parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"YAkP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.k=exports.j=exports.i=exports.h=exports.g=exports.f=exports.e=exports.d=exports.c=exports.b=exports.a=void 0;var e=Object.create,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,p=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,a=(e,r,o)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,n=(e,r)=>t(e,"name",{value:r,configurable:!0}),l=(e,t)=>()=>(e&&(t=e(e=0)),t),x=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),i=(e,r)=>{for(var o in r)t(e,o,{get:r[o],enumerable:!0})},c=(e,p,a,n)=>{if(p&&"object"==typeof p||"function"==typeof p)for(let l of o(p))!s.call(e,l)&&l!==a&&t(e,l,{get:()=>p[l],enumerable:!(n=r(p,l))||n.enumerable});return e},f=(r,o,s)=>(s=null!=r?e(p(r)):{},c(!o&&r&&r.__esModule?s:t(s,"default",{value:r,enumerable:!0}),r)),b=(e,t,r)=>(a(e,"symbol"!=typeof t?t+"":t,r),r),u=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},d=(e,t,r)=>(u(e,t,"read from private field"),r?r.call(e):t.get(e)),m=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},y=(e,t,r,o)=>(u(e,t,"write to private field"),o?o.call(e,r):t.set(e,r),r),g=(e,t,r,o)=>({set _(o){y(e,t,o,r)},get _(){return d(e,t,o)}}),v=(e,t,r)=>(u(e,t,"access private method"),r);exports.k=v,exports.j=g,exports.i=y,exports.h=m,exports.g=d,exports.f=b,exports.e=f,exports.d=i,exports.c=x,exports.b=l,exports.a=n;
},{}],"LKNM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b=exports.a=void 0;var e,r=require("./chunk-ZRT45YCM.js"),o=exports.a=(0,r.b)(()=>{exports.b=e={env:{NODE_ENV:"production",npm_package_version:"5.23.0"}}});
},{"./chunk-ZRT45YCM.js":"YAkP"}],"UXmn":[function(require,module,exports) {
var define;
var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.b=exports.a=void 0;var t=require("./chunk-HZJGZV5Z.js"),n=require("./chunk-ZRT45YCM.js"),r=exports.b=(0,n.c)((e,r)=>{"use strict";function i(e,t,n){n=n||2;var r,i,a,u,v,s,f,h=t&&t.length,l=h?t[0]*n:e.length,y=x(e,0,l,n,!0),c=[];if(!y||y.next===y.prev)return c;if(h&&(y=p(e,t,y,n)),e.length>80*n){r=a=e[0],i=u=e[1];for(var d=n;d<l;d+=n)(v=e[d])<r&&(r=v),(s=e[d+1])<i&&(i=s),v>a&&(a=v),s>u&&(u=s);f=0!==(f=Math.max(a-r,u-i))?32767/f:0}return o(y,c,n,r,i,f,0),c}function x(e,t,n,r,i){var x,a;if(i===E(e,t,n,r)>0)for(x=t;x<n;x+=r)a=P(x,e[x],e[x+1],a);else for(x=n-r;x>=t;x-=r)a=P(x,e[x],e[x+1],a);return a&&k(a,a.next)&&(T(a),a=a.next),a}function a(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!k(r,r.next)&&0!==M(r.prev,r,r.next))r=r.next;else{if(T(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function o(e,t,n,r,i,x,p){if(e){!p&&x&&d(e,r,i,x);for(var h,l,y=e;e.prev!==e.next;)if(h=e.prev,l=e.next,x?v(e,r,i,x):u(e))t.push(h.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),T(e),e=l.next,y=l.next;else if((e=l)===y){p?1===p?o(e=s(a(e),t,n),t,n,r,i,x,2):2===p&&f(e,t,n,r,i,x):o(a(e),t,n,r,i,x,1);break}}}function u(e){var t=e.prev,n=e,r=e.next;if(M(t,n,r)>=0)return!1;for(var i=t.x,x=n.x,a=r.x,o=t.y,u=n.y,v=r.y,s=i<x?i<a?i:a:x<a?x:a,f=o<u?o<v?o:v:u<v?u:v,p=i>x?i>a?i:a:x>a?x:a,h=o>u?o>v?o:v:u>v?u:v,l=r.next;l!==t;){if(l.x>=s&&l.x<=p&&l.y>=f&&l.y<=h&&w(i,o,x,u,a,v,l.x,l.y)&&M(l.prev,l,l.next)>=0)return!1;l=l.next}return!0}function v(e,t,n,r){var i=e.prev,x=e,a=e.next;if(M(i,x,a)>=0)return!1;for(var o=i.x,u=x.x,v=a.x,s=i.y,f=x.y,p=a.y,h=o<u?o<v?o:v:u<v?u:v,l=s<f?s<p?s:p:f<p?f:p,y=o>u?o>v?o:v:u>v?u:v,c=s>f?s>p?s:p:f>p?f:p,d=Z(h,l,t,n,r),g=Z(y,c,t,n,r),m=e.prevZ,b=e.nextZ;m&&m.z>=d&&b&&b.z<=g;){if(m.x>=h&&m.x<=y&&m.y>=l&&m.y<=c&&m!==i&&m!==a&&w(o,s,u,f,v,p,m.x,m.y)&&M(m.prev,m,m.next)>=0||(m=m.prevZ,b.x>=h&&b.x<=y&&b.y>=l&&b.y<=c&&b!==i&&b!==a&&w(o,s,u,f,v,p,b.x,b.y)&&M(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;m&&m.z>=d;){if(m.x>=h&&m.x<=y&&m.y>=l&&m.y<=c&&m!==i&&m!==a&&w(o,s,u,f,v,p,m.x,m.y)&&M(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;b&&b.z<=g;){if(b.x>=h&&b.x<=y&&b.y>=l&&b.y<=c&&b!==i&&b!==a&&w(o,s,u,f,v,p,b.x,b.y)&&M(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function s(e,t,n){var r=e;do{var i=r.prev,x=r.next.next;!k(i,x)&&z(i,r,r.next,x)&&j(i,x)&&j(x,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(x.i/n|0),T(r),T(r.next),r=e=x),r=r.next}while(r!==e);return a(r)}function f(e,t,n,r,i,x){var u=e;do{for(var v=u.next.next;v!==u.prev;){if(u.i!==v.i&&b(u,v)){var s=I(u,v);return u=a(u,u.next),s=a(s,s.next),o(u,t,n,r,i,x,0),void o(s,t,n,r,i,x,0)}v=v.next}u=u.next}while(u!==e)}function p(e,t,n,r){var i,a,o,u=[];for(i=0,a=t.length;i<a;i++)(o=x(e,t[i]*r,i<a-1?t[i+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),u.push(m(o));for(u.sort(h),i=0;i<u.length;i++)n=l(u[i],n);return n}function h(e,t){return e.x-t.x}function l(e,t){var n=y(e,t);if(!n)return t;var r=I(n,e);return a(r,r.next),a(n,n.next)}function y(e,t){var n,r=t,i=e.x,x=e.y,a=-1/0;do{if(x<=r.y&&x>=r.next.y&&r.next.y!==r.y){var o=r.x+(x-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o<=i&&o>a&&(a=o,n=r.x<r.next.x?r:r.next,o===i))return n}r=r.next}while(r!==t);if(!n)return null;var u,v=n,s=n.x,f=n.y,p=1/0;r=n;do{i>=r.x&&r.x>=s&&i!==r.x&&w(x<f?i:a,x,s,f,x<f?a:i,x,r.x,r.y)&&(u=Math.abs(x-r.y)/(i-r.x),j(r,e)&&(u<p||u===p&&(r.x>n.x||r.x===n.x&&c(n,r)))&&(n=r,p=u)),r=r.next}while(r!==v);return n}function c(e,t){return M(e.prev,e,t.prev)<0&&M(t.next,e,e.next)<0}function d(e,t,n,r){var i=e;do{0===i.z&&(i.z=Z(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,g(i)}function g(e){var t,n,r,i,x,a,o,u,v=1;do{for(n=e,e=null,x=null,a=0;n;){for(a++,r=n,o=0,t=0;t<v&&(o++,r=r.nextZ);t++);for(u=v;o>0||u>0&&r;)0!==o&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,o--):(i=r,r=r.nextZ,u--),x?x.nextZ=i:e=i,i.prevZ=x,x=i;n=r}x.nextZ=null,v*=2}while(a>1);return e}function Z(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function m(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function w(e,t,n,r,i,x,a,o){return(i-a)*(t-o)>=(e-a)*(x-o)&&(e-a)*(r-o)>=(n-a)*(t-o)&&(n-a)*(x-o)>=(i-a)*(r-o)}function b(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!L(e,t)&&(j(e,t)&&j(t,e)&&C(e,t)&&(M(e.prev,e,t.prev)||M(e,t.prev,t))||k(e,t)&&M(e.prev,e,e.next)>0&&M(t.prev,t,t.next)>0)}function M(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function k(e,t){return e.x===t.x&&e.y===t.y}function z(e,t,n,r){var i=H(M(e,t,n)),x=H(M(e,t,r)),a=H(M(n,r,e)),o=H(M(n,r,t));return!!(i!==x&&a!==o||0===i&&_(e,n,t)||0===x&&_(e,r,t)||0===a&&_(n,e,r)||0===o&&_(n,t,r))}function _(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function H(e){return e>0?1:e<0?-1:0}function L(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&z(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function j(e,t){return M(e.prev,e,e.next)<0?M(e,t,e.next)>=0&&M(e,e.prev,t)>=0:M(e,t,e.prev)<0||M(e,e.next,t)<0}function C(e,t){var n=e,r=!1,i=(e.x+t.x)/2,x=(e.y+t.y)/2;do{n.y>x!=n.next.y>x&&n.next.y!==n.y&&i<(n.next.x-n.x)*(x-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}function I(e,t){var n=new q(e.i,e.x,e.y),r=new q(t.i,t.x,t.y),i=e.next,x=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,x.next=r,r.prev=x,r}function P(e,t,n,r){var i=new q(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function T(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function q(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function E(e,t,n,r){for(var i=0,x=t,a=n-r;x<n;x+=r)i+=(e[a]-e[x])*(e[x+1]+e[a+1]),a=x;return i}(0,t.a)(),r.exports=i,r.exports.default=i,(0,n.a)(i,"earcut"),(0,n.a)(x,"linkedList"),(0,n.a)(a,"filterPoints"),(0,n.a)(o,"earcutLinked"),(0,n.a)(u,"isEar"),(0,n.a)(v,"isEarHashed"),(0,n.a)(s,"cureLocalIntersections"),(0,n.a)(f,"splitEarcut"),(0,n.a)(p,"eliminateHoles"),(0,n.a)(h,"compareX"),(0,n.a)(l,"eliminateHole"),(0,n.a)(y,"findHoleBridge"),(0,n.a)(c,"sectorContainsSector"),(0,n.a)(d,"indexCurve"),(0,n.a)(g,"sortLinked"),(0,n.a)(Z,"zOrder"),(0,n.a)(m,"getLeftmost"),(0,n.a)(w,"pointInTriangle"),(0,n.a)(b,"isValidDiagonal"),(0,n.a)(M,"area"),(0,n.a)(k,"equals"),(0,n.a)(z,"intersects"),(0,n.a)(_,"onSegment"),(0,n.a)(H,"sign"),(0,n.a)(L,"intersectsPolygon"),(0,n.a)(j,"locallyInside"),(0,n.a)(C,"middleInside"),(0,n.a)(I,"splitPolygon"),(0,n.a)(P,"insertNode"),(0,n.a)(T,"removeNode"),(0,n.a)(q,"Node"),i.deviation=function(e,t,n,r){var i=t&&t.length,x=i?t[0]*n:e.length,a=Math.abs(E(e,0,x,n));if(i)for(var o=0,u=t.length;o<u;o++){var v=t[o]*n,s=o<u-1?t[o+1]*n:e.length;a-=Math.abs(E(e,v,s,n))}var f=0;for(o=0;o<r.length;o+=3){var p=r[o]*n,h=r[o+1]*n,l=r[o+2]*n;f+=Math.abs((e[p]-e[l])*(e[h+1]-e[p+1])-(e[p]-e[h])*(e[l+1]-e[p+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},(0,n.a)(E,"signedArea"),i.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var x=0;x<e[i].length;x++)for(var a=0;a<t;a++)n.vertices.push(e[i][x][a]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}}),i=exports.a=(0,n.c)((r,i)=>{var x,a;(0,t.a)(),x=r,a=function(){"use strict";var e=(0,n.a)(function(e,n){if(void 0===e&&(e=[]),void 0===n&&(n=t),this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)},"TinyQueue");function t(e,t){return e<t?-1:e>t?1:0}return e.prototype.push=(0,n.a)(function(e){this.data.push(e),this.length++,this._up(this.length-1)},"push"),e.prototype.pop=(0,n.a)(function(){if(0!==this.length){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},"pop"),e.prototype.peek=(0,n.a)(function(){return this.data[0]},"peek"),e.prototype._up=(0,n.a)(function(e){for(var t=this.data,n=this.compare,r=t[e];e>0;){var i=e-1>>1,x=t[i];if(n(r,x)>=0)break;t[e]=x,e=i}t[e]=r},"_up"),e.prototype._down=(0,n.a)(function(e){for(var t=this.data,n=this.compare,r=this.length>>1,i=t[e];e<r;){var x=1+(e<<1),a=t[x],o=x+1;if(o<this.length&&n(t[o],a)<0&&(x=o,a=t[o]),n(a,i)>=0)break;t[e]=a,e=x}t[e]=i},"_down"),(0,n.a)(t,"defaultCompare"),e},"object"==typeof r&&typeof i<"u"?i.exports=a():"function"==typeof e&&e.amd?e(a):(x=x||self).TinyQueue=a()});
},{"./chunk-HZJGZV5Z.js":"LKNM","./chunk-ZRT45YCM.js":"YAkP"}],"Bh1I":[function(require,module,exports) {
var t=null;function e(){return t||(t=n()),t}function n(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\/\/[^)\n]+/g);if(t)return r(t[0])}return"/"}function r(t){return(""+t).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\/\/.+)?\/[^/]+(?:\?.*)?$/,"$1")+"/"}exports.getBundleURL=e,exports.getBaseURL=r;
},{}],"z1Am":[function(require,module,exports) {
var r=require("./bundle-url").getBundleURL;function e(r){Array.isArray(r)||(r=[r]);var e=r[r.length-1];try{return Promise.resolve(require(e))}catch(n){if("MODULE_NOT_FOUND"===n.code)return new s(function(n,i){t(r.slice(0,-1)).then(function(){return require(e)}).then(n,i)});throw n}}function t(r){return Promise.all(r.map(u))}var n={};function i(r,e){n[r]=e}module.exports=exports=e,exports.load=t,exports.register=i;var o={};function u(e){var t;if(Array.isArray(e)&&(t=e[1],e=e[0]),o[e])return o[e];var i=(e.substring(e.lastIndexOf(".")+1,e.length)||e).toLowerCase(),u=n[i];return u?o[e]=u(r()+e).then(function(r){return r&&module.bundle.register(t,r),r}).catch(function(r){throw delete o[e],r}):void 0}function s(r){this.executor=r,this.promise=null}s.prototype.then=function(r,e){return null===this.promise&&(this.promise=new Promise(this.executor)),this.promise.then(r,e)},s.prototype.catch=function(r){return null===this.promise&&(this.promise=new Promise(this.executor)),this.promise.catch(r)};
},{"./bundle-url":"Bh1I"}],"jjLH":[function(require,module,exports) {
var define;
var global = arguments[3];
var t,e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.STATE=exports.STACKED_MAPS_STATE=exports.SAFE_AREA_INSET_TYPE=exports.PositionUpdater=exports.OpenStreetMapOutdoorContext=exports.OfflineSearch=exports.MappedinVortex=exports.MappedinVenue=exports.MappedinRankings=exports.MappedinPolygon=exports.MappedinNode=exports.MappedinNavigatable=exports.MappedinMapGroup=exports.MappedinMap=exports.MappedinLocationState=exports.MappedinLocation=exports.MappedinEvent=exports.MappedinDirections=exports.MappedinDestinationSet=exports.MappedinCoordinate=exports.MappedinCollectionType=exports.MappedinCategory=exports.Mappedin=exports.MARKER_ANCHOR=exports.MAP_RENDER_MODE=exports.GEOLOCATION_STATUS=exports.E_SDK_LOG_LEVEL=exports.E_SDK_EVENT=exports.E_MAP_CHANGED_REASON=exports.E_CAMERA_EVENT=exports.E_CAMERA_DIRECTION=exports.E_BLUEDOT_STATE_REASON=exports.E_BLUEDOT_STATE=exports.E_BLUEDOT_MARKER_STATE=exports.E_BLUEDOT_EVENT=exports.CustomerAnalytics=exports.COLLISION_RANKING_TIERS=exports.CAMERA_EASING_MODE=exports.BundleAssetManager=exports.BEARING_TYPE=exports.AzureOutdoorContextProvider=exports.AssetManager=exports.ANIMATION_TWEENS=exports.ACTION_TYPE=void 0,exports.__enableTileManager=p2,exports.__showWatermark=d2,exports.downloadBundle=Jk,exports.downloadVenueBundleMVF=Qk,exports.getVenue=Wk,exports.getVenueBundle=Yk,exports.getVenueBundleURL=Zk,exports.getVenueMVF=Hk,exports.hydrateVenue=$k,exports.setAssetManager=exports.labelThemes=void 0,exports.setFetchFn=Uk,exports.setLoggerLevel=gy,exports.showVenue=u2;var i=require("./chunk-VT5JGPT4.js"),n=require("./chunk-HZJGZV5Z.js"),r=require("./chunk-ZRT45YCM.js"),o=(0,r.c)((e,i)=>{(0,n.a)();var o=(0,r.a)(function(){this._tweens={},this._tweensAddedDuringUpdate={}},"_Group");o.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,e){var i=Object.keys(this._tweens);if(0===i.length)return!1;for(t=void 0!==t?t:s.now();i.length>0;){this._tweensAddedDuringUpdate={};for(var n=0;n<i.length;n++){var r=this._tweens[i[n]];r&&!1===r.update(t)&&(r._isPlaying=!1,e||delete this._tweens[i[n]])}i=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var a,s=new o;s.Group=o,s._nextId=0,s.nextId=function(){return s._nextId++},typeof self>"u"&&typeof n.b<"u"&&n.b.hrtime?s.now=function(){var t=n.b.hrtime();return 1e3*t[0]+t[1]/1e6}:typeof self<"u"&&void 0!==self.performance&&void 0!==self.performance.now?s.now=self.performance.now.bind(self.performance):void 0!==Date.now?s.now=Date.now:s.now=function(){return(new Date).getTime()},s.Tween=function(t,e){this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=s.Easing.Linear.None,this._interpolationFunction=s.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onRepeatCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=e||s,this._id=s.nextId()},s.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(t,e){return this._valuesEnd=t,void 0!==e&&(this._duration=e),this},duration:(0,r.a)(function(t){return this._duration=t,this},"duration"),start:function(t){for(var e in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==t?"string"==typeof t?s.now()+parseFloat(t):t:s.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(this._valuesStart[e]=this._object[e],this._valuesStart[e]instanceof Array||(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(1/0),this},stopChainedTweens:function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onRepeat:(0,r.a)(function(t){return this._onRepeatCallback=t,this},"onRepeat"),onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var e,i,n;if(t<this._startTime)return!0;for(e in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),i=(t-this._startTime)/this._duration,i=0===this._duration||i>1?1:i,n=this._easingFunction(i),this._valuesEnd)if(void 0!==this._valuesStart[e]){var r=this._valuesStart[e]||0,o=this._valuesEnd[e];o instanceof Array?this._object[e]=this._interpolationFunction(o,n):("string"==typeof o&&(o="+"===o.charAt(0)||"-"===o.charAt(0)?r+parseFloat(o):parseFloat(o)),"number"==typeof o&&(this._object[e]=r+(o-r)*n))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object,i),1===i){if(this._repeat>0){for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo){var a=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=a}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,null!==this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,l=this._chainedTweens.length;s<l;s++)this._chainedTweens[s].start(this._startTime+this._duration);return!1}return!0}},s.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-s.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*s.Easing.Bounce.In(2*t):.5*s.Easing.Bounce.Out(2*t-1)+.5}}},s.Interpolation={Linear:function(t,e){var i=t.length-1,n=i*e,r=Math.floor(n),o=s.Interpolation.Utils.Linear;return e<0?o(t[0],t[1],n):e>1?o(t[i],t[i-1],i-n):o(t[r],t[r+1>i?i:r+1],n-r)},Bezier:function(t,e){for(var i=0,n=t.length-1,r=Math.pow,o=s.Interpolation.Utils.Bernstein,a=0;a<=n;a++)i+=r(1-e,n-a)*r(e,a)*t[a]*o(n,a);return i},CatmullRom:function(t,e){var i=t.length-1,n=i*e,r=Math.floor(n),o=s.Interpolation.Utils.CatmullRom;return t[0]===t[i]?(e<0&&(r=Math.floor(n=i*(1+e))),o(t[(r-1+i)%i],t[r],t[(r+1)%i],t[(r+2)%i],n-r)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-n)-t[0]):e>1?t[i]-(o(t[i],t[i],t[i-1],t[i-1],n-i)-t[i]):o(t[r?r-1:0],t[r],t[i<r+1?i:r+1],t[i<r+2?i:r+2],n-r)},Utils:{Linear:function(t,e,i){return(e-t)*i+t},Bernstein:function(t,e){var i=s.Interpolation.Utils.Factorial;return i(t)/i(e)/i(t-e)},Factorial:(a=[1],function(t){var e=1;if(a[t])return a[t];for(var i=t;i>1;i--)e*=i;return a[t]=e,e}),CatmullRom:function(t,e,i,n,r){var o=.5*(i-t),a=.5*(n-e),s=r*r;return(2*e-2*i+o+a)*(r*s)+(-3*e+3*i-2*o-a)*s+o*r+e}}},function(n){"function"==typeof t&&t.amd?t([],function(){return s}):typeof i<"u"&&"object"==typeof e?i.exports=s:void 0!==n&&(n.TWEEN=s)}(e)}),a=(0,r.c)((t,e)=>{"use strict";(0,n.a)(),e.exports=(t=>encodeURIComponent(t).replace(/[!'()*]/g,t=>"%".concat(t.charCodeAt(0).toString(16).toUpperCase())))}),s=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i="%[a-f0-9]{2}",o=new RegExp("("+i+")|([^%]+?)","gi"),a=new RegExp("("+i+")+","gi");function s(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(1===t.length)return t;e=e||1;var i=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],s(i),s(n))}function l(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(o)||[],i=1;i<e.length;i++)e=(t=s(e,i).join("")).match(o)||[];return t}}function h(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},i=a.exec(t);i;){try{e[i[0]]=decodeURIComponent(i[0])}catch{var n=l(i[0]);n!==i[0]&&(e[i[0]]=n)}i=a.exec(t)}e["%C2"]="�";for(var r=Object.keys(e),o=0;o<r.length;o++){var s=r[o];t=t.replace(new RegExp(s,"g"),e[s])}return t}(0,r.a)(s,"decodeComponents"),(0,r.a)(l,"decode"),(0,r.a)(h,"customDecodeURIComponent"),e.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return h(t)}}}),l=(0,r.c)((t,e)=>{"use strict";(0,n.a)(),e.exports=((t,e)=>{if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];let i=t.indexOf(e);return-1===i?[t]:[t.slice(0,i),t.slice(i+e.length)]})}),h=(0,r.c)((t,e)=>{"use strict";(0,n.a)(),e.exports=function(t,e){for(var i={},n=Object.keys(t),r=Array.isArray(e),o=0;o<n.length;o++){var a=n[o],s=t[a];(r?-1!==e.indexOf(a):e(a,s,t))&&(i[a]=s)}return i}}),u=(0,r.c)(t=>{"use strict";(0,n.a)();var e=a(),i=s(),o=l(),u=h(),c=(0,r.a)(t=>null==t,"isNullOrUndefined"),p=Symbol("encodeFragmentIdentifier");function d(t){switch(t.arrayFormat){case"index":return e=>(i,n)=>{let r=i.length;return void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?i:null===n?[...i,[m(e,t),"[",r,"]"].join("")]:[...i,[m(e,t),"[",m(r,t),"]=",m(n,t)].join("")]};case"bracket":return e=>(i,n)=>void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?i:null===n?[...i,[m(e,t),"[]"].join("")]:[...i,[m(e,t),"[]=",m(n,t)].join("")];case"comma":case"separator":case"bracket-separator":{let e="bracket-separator"===t.arrayFormat?"[]=":"=";return i=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:(r=null===r?"":r,0===n.length?[[m(i,t),e,m(r,t)].join("")]:[[n,m(r,t)].join(t.arrayFormatSeparator)])}default:return e=>(i,n)=>void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?i:null===n?[...i,m(e,t)]:[...i,[m(e,t),"=",m(n,t)].join("")]}}function f(t){let e;switch(t.arrayFormat){case"index":return(t,i,n)=>{e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===n[t]&&(n[t]={}),n[t][e[1]]=i):n[t]=i};case"bracket":return(t,i,n)=>{e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==n[t]?n[t]=[].concat(n[t],i):n[t]=[i]:n[t]=i};case"comma":case"separator":return(e,i,n)=>{let r="string"==typeof i&&i.includes(t.arrayFormatSeparator),o="string"==typeof i&&!r&&v(i,t).includes(t.arrayFormatSeparator);i=o?v(i,t):i;let a=r||o?i.split(t.arrayFormatSeparator).map(e=>v(e,t)):null===i?i:v(i,t);n[e]=a};case"bracket-separator":return(e,i,n)=>{let r=/(\[\])$/.test(e);if(e=e.replace(/\[\]$/,""),!r)return void(n[e]=i&&v(i,t));let o=null===i?[]:i.split(t.arrayFormatSeparator).map(e=>v(e,t));void 0!==n[e]?n[e]=[].concat(n[e],o):n[e]=o};default:return(t,e,i)=>{void 0!==i[t]?i[t]=[].concat(i[t],e):i[t]=e}}}function g(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function m(t,i){return i.encode?i.strict?e(t):encodeURIComponent(t):t}function v(t,e){return e.decode?i(t):t}function y(t){return Array.isArray(t)?t.sort():"object"==typeof t?y(Object.keys(t)).sort((t,e)=>Number(t)-Number(e)).map(e=>t[e]):t}function _(t){let e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function x(t){let e="",i=t.indexOf("#");return-1!==i&&(e=t.slice(i)),e}function b(t){let e=(t=_(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function w(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):e.parseBooleans&&null!==t&&("true"===t.toLowerCase()||"false"===t.toLowerCase())&&(t="true"===t.toLowerCase()),t}function E(t,e){g((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);let i=f(e),n=Object.create(null);if("string"!=typeof t||!(t=t.trim().replace(/^[?#&]/,"")))return n;for(let r of t.split("&")){if(""===r)continue;let[t,a]=o(e.decode?r.replace(/\+/g," "):r,"=");a=void 0===a?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?a:v(a,e),i(v(t,e),a,n)}for(let r of Object.keys(n)){let t=n[r];if("object"==typeof t&&null!==t)for(let i of Object.keys(t))t[i]=w(t[i],e);else n[r]=w(t,e)}return!1===e.sort?n:(!0===e.sort?Object.keys(n).sort():Object.keys(n).sort(e.sort)).reduce((t,e)=>{let i=n[e];return i&&"object"==typeof i&&!Array.isArray(i)?t[e]=y(i):t[e]=i,t},Object.create(null))}(0,r.a)(d,"encoderForArrayFormat"),(0,r.a)(f,"parserForArrayFormat"),(0,r.a)(g,"validateArrayFormatSeparator"),(0,r.a)(m,"encode"),(0,r.a)(v,"decode"),(0,r.a)(y,"keysSorter"),(0,r.a)(_,"removeHash"),(0,r.a)(x,"getHash"),(0,r.a)(b,"extract"),(0,r.a)(w,"parseValue"),(0,r.a)(E,"parse"),t.extract=b,t.parse=E,t.stringify=((t,e)=>{if(!t)return"";g((e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e)).arrayFormatSeparator);let i=(0,r.a)(i=>e.skipNull&&c(t[i])||e.skipEmptyString&&""===t[i],"shouldFilter"),n=d(e),o={};for(let r of Object.keys(t))i(r)||(o[r]=t[r]);let a=Object.keys(o);return!1!==e.sort&&a.sort(e.sort),a.map(i=>{let r=t[i];return void 0===r?"":null===r?m(i,e):Array.isArray(r)?0===r.length&&"bracket-separator"===e.arrayFormat?m(i,e)+"[]":r.reduce(n(i),[]).join("&"):m(i,e)+"="+m(r,e)}).filter(t=>t.length>0).join("&")}),t.parseUrl=((t,e)=>{e=Object.assign({decode:!0},e);let[i,n]=o(t,"#");return Object.assign({url:i.split("?")[0]||"",query:E(b(t),e)},e&&e.parseFragmentIdentifier&&n?{fragmentIdentifier:v(n,e)}:{})}),t.stringifyUrl=((e,i)=>{i=Object.assign({encode:!0,strict:!0,[p]:!0},i);let n=_(e.url).split("?")[0]||"",r=t.extract(e.url),o=t.parse(r,{sort:!1}),a=Object.assign(o,e.query),s=t.stringify(a,i);s&&(s="?".concat(s));let l=x(e.url);return e.fragmentIdentifier&&(l="#".concat(i[p]?m(e.fragmentIdentifier,i):e.fragmentIdentifier)),"".concat(n).concat(s).concat(l)}),t.pick=((e,i,n)=>{n=Object.assign({parseFragmentIdentifier:!0,[p]:!1},n);let{url:r,query:o,fragmentIdentifier:a}=t.parseUrl(e,n);return t.stringifyUrl({url:r,query:u(o,i),fragmentIdentifier:a},n)}),t.exclude=((e,i,n)=>{let r=Array.isArray(i)?t=>!i.includes(t):(t,e)=>!i(t,e);return t.pick(e,r,n)})}),c=(0,r.c)((i,o)=>{(0,n.a)(),function(n){var a="object"==typeof i&&i,s="object"==typeof o&&o&&o.exports==a&&o,l="object"==typeof e&&e;(l.global===l||l.window===l)&&(n=l);var h=(0,r.a)(function(t){this.message=t},"InvalidCharacterError");h.prototype=new Error,h.prototype.name="InvalidCharacterError";var u=(0,r.a)(function(t){throw new h(t)},"error"),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=/[\t\n\f\r ]/g,d=(0,r.a)(function(t){var e=(t=String(t).replace(p,"")).length;e%4==0&&(e=(t=t.replace(/==?$/,"")).length),(e%4==1||/[^+a-zA-Z0-9/]/.test(t))&&u("Invalid character: the string to be decoded is not correctly encoded.");for(var i,n,r=0,o="",a=-1;++a<e;)n=c.indexOf(t.charAt(a)),i=r%4?64*i+n:n,r++%4&&(o+=String.fromCharCode(255&i>>(-2*r&6)));return o},"decode"),f={encode:(0,r.a)(function(t){t=String(t),/[^\0-\xFF]/.test(t)&&u("The string to be encoded contains characters outside of the Latin1 range.");for(var e,i,n,r,o=t.length%3,a="",s=-1,l=t.length-o;++s<l;)e=t.charCodeAt(s)<<16,i=t.charCodeAt(++s)<<8,n=t.charCodeAt(++s),a+=c.charAt((r=e+i+n)>>18&63)+c.charAt(r>>12&63)+c.charAt(r>>6&63)+c.charAt(63&r);return 2==o?(e=t.charCodeAt(s)<<8,i=t.charCodeAt(++s),a+=c.charAt((r=e+i)>>10)+c.charAt(r>>4&63)+c.charAt(r<<2&63)+"="):1==o&&(r=t.charCodeAt(s),a+=c.charAt(r>>2)+c.charAt(r<<4&63)+"=="),a},"encode"),decode:d,version:"1.0.0"};if("function"==typeof t&&"object"==typeof t.amd&&t.amd)t(function(){return f});else if(a&&!a.nodeType)if(s)s.exports=f;else for(var g in f)f.hasOwnProperty(g)&&(a[g]=f[g]);else n.base64=f}(i)}),p=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.areaConversion=t.timeConversion=t.distanceConversion=t.altitudeKeys=t.latitudeKeys=t.longitudeKeys=t.MAXLON=t.MINLON=t.MAXLAT=t.MINLAT=t.earthRadius=t.sexagesimalPattern=void 0,t.sexagesimalPattern=/^([0-9]{1,3})°\s*([0-9]{1,3}(?:\.(?:[0-9]{1,}))?)['′]\s*(([0-9]{1,3}(\.([0-9]{1,}))?)["″]\s*)?([NEOSW]?)$/,t.earthRadius=6378137,t.MINLAT=-90,t.MAXLAT=90,t.MINLON=-180,t.MAXLON=180,t.longitudeKeys=["lng","lon","longitude",0],t.latitudeKeys=["lat","latitude",1],t.altitudeKeys=["alt","altitude","elevation","elev",2],t.distanceConversion={m:1,km:.001,cm:100,mm:1e3,mi:1/1609.344,sm:1/1852.216,ft:100/30.48,in:100/2.54,yd:1/.9144},t.timeConversion={m:60,h:3600,d:86400};var e={m2:1,km2:1e-6,ha:1e-4,a:.01,ft2:10.763911,yd2:1.19599,in2:1550.0031};t.areaConversion=e,e.sqm=e.m2,e.sqkm=e.km2,e.sqft=e.ft2,e.sqyd=e.yd2,e.sqin=e.in2}),d=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=(0,r.a)(function(t,e){return e.reduce(function(e,i){if(typeof t>"u"||null===t)throw new Error("'".concat(t,"' is no valid coordinate."));return Object.prototype.hasOwnProperty.call(t,i)&&typeof i<"u"&&typeof e>"u"?(e=i,i):e},void 0)},"getCoordinateKey");t.default=e}),f=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=(0,r.a)(function(t){var e=t.toString().trim();return!isNaN(parseFloat(e))&&parseFloat(e)===Number(e)},"isDecimal");t.default=e}),g=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=p(),i=(0,r.a)(function(t){return e.sexagesimalPattern.test(t.toString().trim())},"isSexagesimal");t.default=i}),m=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=p(),i=(0,r.a)(function(t){var i=new RegExp(e.sexagesimalPattern).exec(t);if(typeof i>"u"||null===i)throw new Error("Given value is not in sexagesimal format");var n=Number(i[2])/60||0,r=Number(i[4])/3600||0,o=parseFloat(i[1])+n+r;return["S","W"].includes(i[7])?-o:o},"sexagesimalToDecimal");t.default=i}),v=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=p(),i=o(d());function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach(function(e){l(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}(0,r.a)(o,"_interopRequireDefault"),(0,r.a)(a,"ownKeys"),(0,r.a)(s,"_objectSpread"),(0,r.a)(l,"_defineProperty");var h=(0,r.a)(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{longitude:e.longitudeKeys,latitude:e.latitudeKeys,altitude:e.altitudeKeys},r=(0,i.default)(t,n.longitude),o=(0,i.default)(t,n.latitude),a=(0,i.default)(t,n.altitude);return s({latitude:o,longitude:r},a?{altitude:a}:{})},"getCoordinateKeys");t.default=h}),y=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=s(f()),i=s(g()),o=s(m()),a=p();function s(t){return t&&t.__esModule?t:{default:t}}(0,r.a)(s,"_interopRequireDefault");var l=(0,r.a)(function t(n){return(0,e.default)(n)?!(parseFloat(n)>a.MAXLAT||n<a.MINLAT):!!(0,i.default)(n)&&t((0,o.default)(n))},"isValidLatitude");t.default=l}),_=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=s(f()),i=s(g()),o=s(m()),a=p();function s(t){return t&&t.__esModule?t:{default:t}}(0,r.a)(s,"_interopRequireDefault");var l=(0,r.a)(function t(n){return(0,e.default)(n)?!(parseFloat(n)>a.MAXLON||n<a.MINLON):!!(0,i.default)(n)&&t((0,o.default)(n))},"isValidLongitude");t.default=l}),x=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=a(v()),i=a(y()),o=a(_());function a(t){return t&&t.__esModule?t:{default:t}}(0,r.a)(a,"_interopRequireDefault");var s=(0,r.a)(function(t){var n=(0,e.default)(t),r=n.latitude,a=n.longitude;if(Array.isArray(t)&&t.length>=2)return(0,o.default)(t[0])&&(0,i.default)(t[1]);if(typeof r>"u"||typeof a>"u")return!1;var s=t[a],l=t[r];return!(typeof l>"u"||typeof s>"u"||!1===(0,i.default)(l)||!1===(0,o.default)(s))},"isValidCoordinate");t.default=s}),b=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=l(f()),i=l(g()),o=l(m()),a=l(x()),s=l(v());function l(t){return t&&t.__esModule?t:{default:t}}function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach(function(e){c(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}(0,r.a)(l,"_interopRequireDefault"),(0,r.a)(h,"ownKeys"),(0,r.a)(u,"_objectSpread"),(0,r.a)(c,"_defineProperty");var p=(0,r.a)(function t(n){if((0,e.default)(n))return Number(n);if((0,i.default)(n))return(0,o.default)(n);if((0,a.default)(n)){var r=(0,s.default)(n);return Array.isArray(n)?n.map(function(e,i){return[0,1].includes(i)?t(e):e}):u(u(u({},n),r.latitude&&c({},r.latitude,t(n[r.latitude]))),r.longitude&&c({},r.longitude,t(n[r.longitude])))}return Array.isArray(n)?n.map(function(e){return(0,a.default)(e)?t(e):e}):n},"toDecimal");t.default=p}),w=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=p(),i=a(d()),o=a(b());function a(t){return t&&t.__esModule?t:{default:t}}(0,r.a)(a,"_interopRequireDefault");var s=(0,r.a)(function(t,n){var r=(0,i.default)(t,e.latitudeKeys);if(!(typeof r>"u"||null===r)){var a=t[r];return!0===n?a:(0,o.default)(a)}},"getLatitude");t.default=s}),E=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=p(),i=a(d()),o=a(b());function a(t){return t&&t.__esModule?t:{default:t}}(0,r.a)(a,"_interopRequireDefault");var s=(0,r.a)(function(t,n){var r=(0,i.default)(t,e.longitudeKeys);if(!(typeof r>"u"||null===r)){var a=t[r];return!0===n?a:(0,o.default)(a)}},"getLongitude");t.default=s}),M=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=(0,r.a)(function(t){return t*Math.PI/180},"toRad");t.default=e}),S=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=(0,r.a)(function(t){return 180*t/Math.PI},"toDeg");t.default=e}),T=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=l(w()),i=l(E()),o=l(M()),a=l(S()),s=p();function l(t){return t&&t.__esModule?t:{default:t}}(0,r.a)(l,"_interopRequireDefault");var h=(0,r.a)(function(t,n,r){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6371e3,h=(0,e.default)(t),u=(0,i.default)(t),c=n/l,p=(0,o.default)(r),d=(0,o.default)(h),f=(0,o.default)(u),g=Math.asin(Math.sin(d)*Math.cos(c)+Math.cos(d)*Math.sin(c)*Math.cos(p)),m=f+Math.atan2(Math.sin(p)*Math.sin(c)*Math.cos(d),Math.cos(c)-Math.sin(d)*Math.sin(g)),v=(0,a.default)(m);return(v<s.MINLON||v>s.MAXLON)&&(m=(m+3*Math.PI)%(2*Math.PI)-Math.PI,v=(0,a.default)(m)),{latitude:(0,a.default)(g),longitude:v}},"computeDestinationPoint");t.default=h}),C=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=p(),i=(0,r.a)(function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m",n=e.areaConversion[i];if(n)return t*n;throw new Error("Invalid unit used for area conversion.")},"convertArea");t.default=i}),A=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=p(),i=(0,r.a)(function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m",n=e.distanceConversion[i];if(n)return t*n;throw new Error("Invalid unit used for distance conversion.")},"convertDistance");t.default=i}),P=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=p(),i=(0,r.a)(function(t){switch(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kmh"){case"kmh":return t*e.timeConversion.h*e.distanceConversion.km;case"mph":return t*e.timeConversion.h*e.distanceConversion.mi;default:return t}},"convertSpeed");t.default=i}),I=(0,r.c)(t=>{"use strict";function e(t,e){return l(t)||s(t,e)||o(t,e)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if("Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return a(t,e)}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function s(t,e){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(t)){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&null!=s.return&&s.return()}finally{if(r)throw o}}return i}}function l(t){if(Array.isArray(t))return t}(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,(0,r.a)(e,"_slicedToArray"),(0,r.a)(i,"_nonIterableRest"),(0,r.a)(o,"_unsupportedIterableToArray"),(0,r.a)(a,"_arrayLikeToArray"),(0,r.a)(s,"_iterableToArrayLimit"),(0,r.a)(l,"_arrayWithHoles");var h=(0,r.a)(function(t){var e=Math.pow(10,12);return Math.round(t*e)/e},"imprecise"),u=(0,r.a)(function(t){var i=e(t.toString().split("."),2),n=i[0],r=i[1],o=Math.abs(Number(n)),a=h(60*+("0."+(r||0))),s=Math.floor(a),l=h(60*(a%s||0));return o+"° "+Number(s.toFixed(6)).toString().split(".").map(function(t,e){return 0===e?t.padStart(2,"0"):t}).join(".")+"' "+Number(l.toFixed(4)).toString().split(".").map(function(t,e){return 0===e?t.padStart(2,"0"):t}).join(".")+'"'},"decimal2sexagesimal");t.default=u}),L=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=(0,r.a)(function(t){return t>1?1:t<-1?-1:t},"robustAcos");t.default=e}),O=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=l(w()),i=l(E()),o=l(M()),a=l(L()),s=p();function l(t){return t&&t.__esModule?t:{default:t}}(0,r.a)(l,"_interopRequireDefault");var h=(0,r.a)(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;r=typeof r<"u"&&!isNaN(r)?r:1;var l=(0,e.default)(t),h=(0,i.default)(t),u=(0,e.default)(n),c=(0,i.default)(n),p=Math.acos((0,a.default)(Math.sin((0,o.default)(u))*Math.sin((0,o.default)(l))+Math.cos((0,o.default)(u))*Math.cos((0,o.default)(l))*Math.cos((0,o.default)(h)-(0,o.default)(c))))*s.earthRadius;return Math.round(p/r)*r},"getDistance");t.default=h}),N=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(O());function i(t){return t&&t.__esModule?t:{default:t}}(0,r.a)(i,"_interopRequireDefault");var o=(0,r.a)(function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.default;return n="function"==typeof n?n:e.default,i.slice().sort(function(e,i){return n(t,e)-n(t,i)})},"orderByDistance");t.default=o}),q=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(N());function i(t){return t&&t.__esModule?t:{default:t}}(0,r.a)(i,"_interopRequireDefault");var o=(0,r.a)(function(t,i){return(0,e.default)(t,i)[0]},"findNearest");t.default=o}),R=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=s(M()),i=s(w()),o=s(E()),a=p();function s(t){return t&&t.__esModule?t:{default:t}}(0,r.a)(s,"_interopRequireDefault");var l=(0,r.a)(function(t){var n=0;if(t.length>2){for(var r,s,l,h=0;h<t.length;h++){h===t.length-2?(r=t.length-2,s=t.length-1,l=0):h===t.length-1?(r=t.length-1,s=0,l=1):(r=h,s=h+1,l=h+2);var u=(0,o.default)(t[r]),c=(0,i.default)(t[s]),p=(0,o.default)(t[l]);n+=((0,e.default)(p)-(0,e.default)(u))*Math.sin((0,e.default)(c))}n=n*a.earthRadius*a.earthRadius/2}return Math.abs(n)},"getAreaOfPolygon");t.default=l}),D=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=o(w()),i=o(E());function o(t){return t&&t.__esModule?t:{default:t}}(0,r.a)(o,"_interopRequireDefault");var a=(0,r.a)(function(t){if(!1===Array.isArray(t)||0===t.length)throw new Error("No points were given.");return t.reduce(function(t,n){var r=(0,e.default)(n),o=(0,i.default)(n);return{maxLat:Math.max(r,t.maxLat),minLat:Math.min(r,t.minLat),maxLng:Math.max(o,t.maxLng),minLng:Math.min(o,t.minLng)}},{maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0})},"getBounds");t.default=a}),k=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=l(w()),i=l(E()),o=l(M()),a=l(S()),s=p();function l(t){return t&&t.__esModule?t:{default:t}}(0,r.a)(l,"_interopRequireDefault");var h=(0,r.a)(function(t,n){var r,l,h=(0,e.default)(t),u=(0,i.default)(t),c=(0,o.default)(h),p=(0,o.default)(u),d=n/s.earthRadius,f=c-d,g=c+d,m=(0,o.default)(s.MAXLAT),v=(0,o.default)(s.MINLAT),y=(0,o.default)(s.MAXLON),_=(0,o.default)(s.MINLON);if(f>v&&g<m){var x=Math.asin(Math.sin(d)/Math.cos(c));(r=p-x)<_&&(r+=2*Math.PI),(l=p+x)>y&&(l-=2*Math.PI)}else f=Math.max(f,v),g=Math.min(g,m),r=_,l=y;return[{latitude:(0,a.default)(f),longitude:(0,a.default)(r)},{latitude:(0,a.default)(g),longitude:(0,a.default)(l)}]},"getBoundsOfDistance");t.default=h}),B=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=s(w()),i=s(E()),o=s(M()),a=s(S());function s(t){return t&&t.__esModule?t:{default:t}}(0,r.a)(s,"_interopRequireDefault");var l=(0,r.a)(function(t){if(!1===Array.isArray(t)||0===t.length)return!1;var n=t.length,r=t.reduce(function(t,n){var r=(0,o.default)((0,e.default)(n)),a=(0,o.default)((0,i.default)(n));return{X:t.X+Math.cos(r)*Math.cos(a),Y:t.Y+Math.cos(r)*Math.sin(a),Z:t.Z+Math.sin(r)}},{X:0,Y:0,Z:0}),s=r.X/n,l=r.Y/n,h=r.Z/n;return{longitude:(0,a.default)(Math.atan2(l,s)),latitude:(0,a.default)(Math.atan2(h,Math.sqrt(s*s+l*l)))}},"getCenter");t.default=l}),F=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(D());function i(t){return t&&t.__esModule?t:{default:t}}(0,r.a)(i,"_interopRequireDefault");var o=(0,r.a)(function(t){var i=(0,e.default)(t),n=i.minLat+(i.maxLat-i.minLat)/2,r=i.minLng+(i.maxLng-i.minLng)/2;return{latitude:parseFloat(n.toFixed(6)),longitude:parseFloat(r.toFixed(6))}},"getCenterOfBounds");t.default=o}),U=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=s(w()),i=s(E()),o=s(M()),a=s(S());function s(t){return t&&t.__esModule?t:{default:t}}(0,r.a)(s,"_interopRequireDefault");var l=(0,r.a)(function(t,n){var r=(0,o.default)((0,i.default)(n))-(0,o.default)((0,i.default)(t)),s=Math.log(Math.tan((0,o.default)((0,e.default)(n))/2+Math.PI/4)/Math.tan((0,o.default)((0,e.default)(t))/2+Math.PI/4));return Math.abs(r)>Math.PI&&(r=r>0?-1*(2*Math.PI-r):2*Math.PI+r),((0,a.default)(Math.atan2(r,s))+360)%360},"getRhumbLineBearing");t.default=l}),z=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(U());function i(t){return t&&t.__esModule?t:{default:t}}(0,r.a)(i,"_interopRequireDefault");var o=(0,r.a)(function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.default,r="function"==typeof n?n(t,i):(0,e.default)(t,i);if(isNaN(r))throw new Error("Could not calculate bearing for given points. Check your bearing function");switch(Math.round(r/22.5)){case 1:return"NNE";case 2:return"NE";case 3:return"ENE";case 4:return"E";case 5:return"ESE";case 6:return"SE";case 7:return"SSE";case 8:return"S";case 9:return"SSW";case 10:return"SW";case 11:return"WSW";case 12:return"W";case 13:return"WNW";case 14:return"NW";case 15:return"NNW";default:return"N"}},"getCompassDirection");t.default=o}),V=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=o(O()),i=o(L());function o(t){return t&&t.__esModule?t:{default:t}}(0,r.a)(o,"_interopRequireDefault");var a=(0,r.a)(function(t,n,r){var o=(0,e.default)(n,t),a=(0,e.default)(t,r),s=(0,e.default)(n,r),l=Math.acos((0,i.default)((o*o+s*s-a*a)/(2*o*s))),h=Math.acos((0,i.default)((a*a+s*s-o*o)/(2*a*s)));return l>Math.PI/2?o:h>Math.PI/2?a:Math.sin(l)*o},"getDistanceFromLine");t.default=a}),j=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=s(w()),i=s(E()),o=s(M()),a=s(S());function s(t){return t&&t.__esModule?t:{default:t}}(0,r.a)(s,"_interopRequireDefault");var l=(0,r.a)(function(t,n){var r=(0,e.default)(n),s=(0,i.default)(n),l=(0,e.default)(t),h=(0,i.default)(t);return((0,a.default)(Math.atan2(Math.sin((0,o.default)(s)-(0,o.default)(h))*Math.cos((0,o.default)(r)),Math.cos((0,o.default)(l))*Math.sin((0,o.default)(r))-Math.sin((0,o.default)(l))*Math.cos((0,o.default)(r))*Math.cos((0,o.default)(s)-(0,o.default)(h))))+360)%360},"getGreatCircleBearing");t.default=l}),G=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(O());function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(0,r.a)(function(t){return typeof t},"_typeof"):(0,r.a)(function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},"_typeof"))(t)}(0,r.a)(i,"_interopRequireDefault"),(0,r.a)(o,"_typeof");var a=(0,r.a)(function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.default;return t.reduce(function(t,e){return"object"===o(t)&&null!==t.last&&(t.distance+=i(e,t.last)),t.last=e,t},{last:null,distance:0}).distance},"getPathLength");t.default=a}),H=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=s(w()),i=s(E()),o=s(M()),a=p();function s(t){return t&&t.__esModule?t:{default:t}}(0,r.a)(s,"_interopRequireDefault");var l=(0,r.a)(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;r=typeof r<"u"&&!isNaN(r)?r:1;var s,l,h,u,c,p,d,f=(0,e.default)(t),g=(0,i.default)(t),m=(0,e.default)(n),v=(0,i.default)(n),y=6356752.314245,_=1/298.257223563,x=(0,o.default)(v-g),b=Math.atan((1-_)*Math.tan((0,o.default)(parseFloat(f)))),w=Math.atan((1-_)*Math.tan((0,o.default)(parseFloat(m)))),E=Math.sin(b),M=Math.cos(b),S=Math.sin(w),T=Math.cos(w),C=x,A=100;do{var P=Math.sin(C),I=Math.cos(C);if(0===(p=Math.sqrt(T*P*(T*P)+(M*S-E*T*I)*(M*S-E*T*I))))return 0;s=E*S+M*T*I,l=Math.atan2(p,s),c=s-2*E*S/(u=1-(h=M*T*P/p)*h),isNaN(c)&&(c=0);var L=_/16*u*(4+_*(4-3*u));d=C,C=x+(1-L)*_*h*(l+L*p*(c+L*s*(2*c*c-1)))}while(Math.abs(C-d)>1e-12&&--A>0);if(0===A)return NaN;var O=u*(a.earthRadius*a.earthRadius-y*y)/(y*y),N=O/1024*(256+O*(O*(74-47*O)-128)),q=y*(1+O/16384*(4096+O*(O*(320-175*O)-768)))*(l-N*p*(c+N/4*(s*(2*c*c-1)-N/6*c*(4*p*p-3)*(4*c*c-3))));return Math.round(q/r)*r},"getDistance");t.default=l}),W=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=(0,r.a)(function(t){return/^NNE|NE|NNW|N$/.test(t)?"N":/^ENE|E|ESE|SE$/.test(t)?"E":/^SSE|S|SSW|SW$/.test(t)?"S":/^WSW|W|WNW|NW$/.test(t)?"W":void 0},"getRoughCompassDirection");t.default=e}),X=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(O());function i(t){return t&&t.__esModule?t:{default:t}}(0,r.a)(i,"_interopRequireDefault");var o=(0,r.a)(function(t,i){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.default)(t,i)/(Number(i.time)-Number(t.time))*1e3},"getSpeed");t.default=o}),Y=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(O());function i(t){return t&&t.__esModule?t:{default:t}}(0,r.a)(i,"_interopRequireDefault");var o=(0,r.a)(function(t,i,n){return(0,e.default)(i,t)+(0,e.default)(t,n)===(0,e.default)(i,n)},"isPointInLine");t.default=o}),Z=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=o(w()),i=o(E());function o(t){return t&&t.__esModule?t:{default:t}}(0,r.a)(o,"_interopRequireDefault");var a=(0,r.a)(function(t,n){for(var r=!1,o=n.length,a=-1,s=o-1;++a<o;s=a)((0,i.default)(n[a])<=(0,i.default)(t)&&(0,i.default)(t)<(0,i.default)(n[s])||(0,i.default)(n[s])<=(0,i.default)(t)&&(0,i.default)(t)<(0,i.default)(n[a]))&&(0,e.default)(t)<((0,e.default)(n[s])-(0,e.default)(n[a]))*((0,i.default)(t)-(0,i.default)(n[a]))/((0,i.default)(n[s])-(0,i.default)(n[a]))+(0,e.default)(n[a])&&(r=!r);return r},"isPointInPolygon");t.default=a}),J=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(V());function i(t){return t&&t.__esModule?t:{default:t}}(0,r.a)(i,"_interopRequireDefault");var o=(0,r.a)(function(t,i,n,r){return(0,e.default)(t,i,n)<r},"isPointNearLine");t.default=o}),K=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(O());function i(t){return t&&t.__esModule?t:{default:t}}(0,r.a)(i,"_interopRequireDefault");var o=(0,r.a)(function(t,i,n){return(0,e.default)(t,i)<n},"isPointWithinRadius");t.default=o}),Q=(0,r.c)(t=>{"use strict";function e(t,e){return l(t)||s(t,e)||o(t,e)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if("Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return a(t,e)}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function s(t,e){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(t)){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&null!=s.return&&s.return()}finally{if(r)throw o}}return i}}function l(t){if(Array.isArray(t))return t}(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,(0,r.a)(e,"_slicedToArray"),(0,r.a)(i,"_nonIterableRest"),(0,r.a)(o,"_unsupportedIterableToArray"),(0,r.a)(a,"_arrayLikeToArray"),(0,r.a)(s,"_iterableToArrayLimit"),(0,r.a)(l,"_arrayWithHoles");var h=(0,r.a)(function(t){if(!t.startsWith("POLYGON"))throw new Error("Invalid wkt.");return t.slice(t.indexOf("(")+2,t.indexOf(")")).split(", ").map(function(t){var i=e(t.split(" "),2),n=i[0],r=i[1];return{longitude:parseFloat(n),latitude:parseFloat(r)}})},"wktToPolygon");t.default=h}),$=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0});var e={computeDestinationPoint:!0,convertArea:!0,convertDistance:!0,convertSpeed:!0,decimalToSexagesimal:!0,findNearest:!0,getAreaOfPolygon:!0,getBounds:!0,getBoundsOfDistance:!0,getCenter:!0,getCenterOfBounds:!0,getCompassDirection:!0,getCoordinateKey:!0,getCoordinateKeys:!0,getDistance:!0,getDistanceFromLine:!0,getGreatCircleBearing:!0,getLatitude:!0,getLongitude:!0,getPathLength:!0,getPreciseDistance:!0,getRhumbLineBearing:!0,getRoughCompassDirection:!0,getSpeed:!0,isDecimal:!0,isPointInLine:!0,isPointInPolygon:!0,isPointNearLine:!0,isPointWithinRadius:!0,isSexagesimal:!0,isValidCoordinate:!0,isValidLatitude:!0,isValidLongitude:!0,orderByDistance:!0,sexagesimalToDecimal:!0,toDecimal:!0,toRad:!0,toDeg:!0,wktToPolygon:!0};Object.defineProperty(t,"computeDestinationPoint",{enumerable:!0,get:(0,r.a)(function(){return i.default},"get")}),Object.defineProperty(t,"convertArea",{enumerable:!0,get:(0,r.a)(function(){return o.default},"get")}),Object.defineProperty(t,"convertDistance",{enumerable:!0,get:(0,r.a)(function(){return a.default},"get")}),Object.defineProperty(t,"convertSpeed",{enumerable:!0,get:(0,r.a)(function(){return s.default},"get")}),Object.defineProperty(t,"decimalToSexagesimal",{enumerable:!0,get:(0,r.a)(function(){return l.default},"get")}),Object.defineProperty(t,"findNearest",{enumerable:!0,get:(0,r.a)(function(){return h.default},"get")}),Object.defineProperty(t,"getAreaOfPolygon",{enumerable:!0,get:(0,r.a)(function(){return u.default},"get")}),Object.defineProperty(t,"getBounds",{enumerable:!0,get:(0,r.a)(function(){return c.default},"get")}),Object.defineProperty(t,"getBoundsOfDistance",{enumerable:!0,get:(0,r.a)(function(){return L.default},"get")}),Object.defineProperty(t,"getCenter",{enumerable:!0,get:(0,r.a)(function(){return $.default},"get")}),Object.defineProperty(t,"getCenterOfBounds",{enumerable:!0,get:(0,r.a)(function(){return tt.default},"get")}),Object.defineProperty(t,"getCompassDirection",{enumerable:!0,get:(0,r.a)(function(){return et.default},"get")}),Object.defineProperty(t,"getCoordinateKey",{enumerable:!0,get:(0,r.a)(function(){return it.default},"get")}),Object.defineProperty(t,"getCoordinateKeys",{enumerable:!0,get:(0,r.a)(function(){return nt.default},"get")}),Object.defineProperty(t,"getDistance",{enumerable:!0,get:(0,r.a)(function(){return rt.default},"get")}),Object.defineProperty(t,"getDistanceFromLine",{enumerable:!0,get:(0,r.a)(function(){return ot.default},"get")}),Object.defineProperty(t,"getGreatCircleBearing",{enumerable:!0,get:(0,r.a)(function(){return at.default},"get")}),Object.defineProperty(t,"getLatitude",{enumerable:!0,get:(0,r.a)(function(){return st.default},"get")}),Object.defineProperty(t,"getLongitude",{enumerable:!0,get:(0,r.a)(function(){return lt.default},"get")}),Object.defineProperty(t,"getPathLength",{enumerable:!0,get:(0,r.a)(function(){return ht.default},"get")}),Object.defineProperty(t,"getPreciseDistance",{enumerable:!0,get:(0,r.a)(function(){return ut.default},"get")}),Object.defineProperty(t,"getRhumbLineBearing",{enumerable:!0,get:(0,r.a)(function(){return ct.default},"get")}),Object.defineProperty(t,"getRoughCompassDirection",{enumerable:!0,get:(0,r.a)(function(){return pt.default},"get")}),Object.defineProperty(t,"getSpeed",{enumerable:!0,get:(0,r.a)(function(){return dt.default},"get")}),Object.defineProperty(t,"isDecimal",{enumerable:!0,get:(0,r.a)(function(){return ft.default},"get")}),Object.defineProperty(t,"isPointInLine",{enumerable:!0,get:(0,r.a)(function(){return gt.default},"get")}),Object.defineProperty(t,"isPointInPolygon",{enumerable:!0,get:(0,r.a)(function(){return mt.default},"get")}),Object.defineProperty(t,"isPointNearLine",{enumerable:!0,get:(0,r.a)(function(){return vt.default},"get")}),Object.defineProperty(t,"isPointWithinRadius",{enumerable:!0,get:(0,r.a)(function(){return yt.default},"get")}),Object.defineProperty(t,"isSexagesimal",{enumerable:!0,get:(0,r.a)(function(){return _t.default},"get")}),Object.defineProperty(t,"isValidCoordinate",{enumerable:!0,get:(0,r.a)(function(){return xt.default},"get")}),Object.defineProperty(t,"isValidLatitude",{enumerable:!0,get:(0,r.a)(function(){return bt.default},"get")}),Object.defineProperty(t,"isValidLongitude",{enumerable:!0,get:(0,r.a)(function(){return wt.default},"get")}),Object.defineProperty(t,"orderByDistance",{enumerable:!0,get:(0,r.a)(function(){return Et.default},"get")}),Object.defineProperty(t,"sexagesimalToDecimal",{enumerable:!0,get:(0,r.a)(function(){return Mt.default},"get")}),Object.defineProperty(t,"toDecimal",{enumerable:!0,get:(0,r.a)(function(){return St.default},"get")}),Object.defineProperty(t,"toRad",{enumerable:!0,get:(0,r.a)(function(){return Tt.default},"get")}),Object.defineProperty(t,"toDeg",{enumerable:!0,get:(0,r.a)(function(){return Ct.default},"get")}),Object.defineProperty(t,"wktToPolygon",{enumerable:!0,get:(0,r.a)(function(){return At.default},"get")});var i=It(T()),o=It(C()),a=It(A()),s=It(P()),l=It(I()),h=It(q()),u=It(R()),c=It(D()),L=It(k()),$=It(B()),tt=It(F()),et=It(z()),it=It(d()),nt=It(v()),rt=It(O()),ot=It(V()),at=It(j()),st=It(w()),lt=It(E()),ht=It(G()),ut=It(H()),ct=It(U()),pt=It(W()),dt=It(X()),ft=It(f()),gt=It(Y()),mt=It(Z()),vt=It(J()),yt=It(K()),_t=It(g()),xt=It(x()),bt=It(y()),wt=It(_()),Et=It(N()),Mt=It(m()),St=It(b()),Tt=It(M()),Ct=It(S()),At=It(Q()),Pt=p();function It(t){return t&&t.__esModule?t:{default:t}}Object.keys(Pt).forEach(function(i){"default"===i||"__esModule"===i||Object.prototype.hasOwnProperty.call(e,i)||Object.defineProperty(t,i,{enumerable:!0,get:(0,r.a)(function(){return Pt[i]},"get")})}),(0,r.a)(It,"_interopRequireDefault")}),tt=(0,r.c)((e,i)=>{(0,n.a)(),function(n,o){"use strict";var a="function",s="undefined",l="object",h="string",u="model",c="name",p="type",d="vendor",f="version",g="architecture",m="console",v="mobile",y="tablet",_="smarttv",x="wearable",b="embedded",w="Amazon",E="Apple",M="ASUS",S="BlackBerry",T="Browser",C="Chrome",A="Firefox",P="Google",I="Huawei",L="LG",O="Microsoft",N="Motorola",q="Opera",R="Samsung",D="Sony",k="Xiaomi",B="Zebra",F="Facebook",U=(0,r.a)(function(t,e){var i={};for(var n in t)e[n]&&e[n].length%2==0?i[n]=e[n].concat(t[n]):i[n]=t[n];return i},"extend"),z=(0,r.a)(function(t){for(var e={},i=0;i<t.length;i++)e[t[i].toUpperCase()]=t[i];return e},"enumerize"),V=(0,r.a)(function(t,e){return typeof t===h&&-1!==j(e).indexOf(j(t))},"has"),j=(0,r.a)(function(t){return t.toLowerCase()},"lowerize"),G=(0,r.a)(function(t){return typeof t===h?t.replace(/[^\d\.]/g,"").split(".")[0]:o},"majorize"),H=(0,r.a)(function(t,e){if(typeof t===h)return t=t.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof e===s?t:t.substring(0,275)},"trim"),W=(0,r.a)(function(t,e){for(var i,n,r,s,h,u,c=0;c<e.length&&!h;){var p=e[c],d=e[c+1];for(i=n=0;i<p.length&&!h;)if(h=p[i++].exec(t))for(r=0;r<d.length;r++)u=h[++n],typeof(s=d[r])===l&&s.length>0?2===s.length?typeof s[1]==a?this[s[0]]=s[1].call(this,u):this[s[0]]=s[1]:3===s.length?typeof s[1]!==a||s[1].exec&&s[1].test?this[s[0]]=u?u.replace(s[1],s[2]):o:this[s[0]]=u?s[1].call(this,u,s[2]):o:4===s.length&&(this[s[0]]=u?s[3].call(this,u.replace(s[1],s[2])):o):this[s]=u||o;c+=2}},"rgxMapper"),X=(0,r.a)(function(t,e){for(var i in e)if(typeof e[i]===l&&e[i].length>0){for(var n=0;n<e[i].length;n++)if(V(e[i][n],t))return"?"===i?o:i}else if(V(e[i],t))return"?"===i?o:i;return t},"strMapper"),Y={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Z={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,f],[/opios[\/ ]+([\w\.]+)/i],[f,[c,q+" Mini"]],[/\bopr\/([\w\.]+)/i],[f,[c,q]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[c,f],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[c,"UC"+T]],[/\bqbcore\/([\w\.]+)/i],[f,[c,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[f,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[c,"IE"]],[/yabrowser\/([\w\.]+)/i],[f,[c,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure "+T],f],[/\bfocus\/([\w\.]+)/i],[f,[c,A+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[c,q+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[c,q+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[c,"MIUI "+T]],[/fxios\/([-\w\.]+)/i],[f,[c,A]],[/\bqihu|(qi?ho?o?|360)browser/i],[[c,"360 "+T]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1 "+T],f],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[c,f],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,F],f],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[c,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[c,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[c,C+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,C+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[c,"Android "+T]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,f],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[f,[c,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[f,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[f,X,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[c,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[c,A+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[c,f]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,j]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,"",j]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,j]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[d,R],[p,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[d,R],[p,v]],[/((ipod|iphone)\d+,\d+)/i],[u,[d,E],[p,v]],[/(ipad\d+,\d+)/i],[u,[d,E],[p,y]],[/\((ip(?:hone|od)[\w ]*);/i],[u,[d,E],[p,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[d,E],[p,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[d,I],[p,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[d,I],[p,v]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[d,k],[p,v]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[d,k],[p,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[d,"OPPO"],[p,v]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[d,"Vivo"],[p,v]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[u,[d,"Realme"],[p,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[d,N],[p,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[d,N],[p,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[d,L],[p,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[d,L],[p,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[d,"Lenovo"],[p,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[d,"Nokia"],[p,v]],[/(pixel c)\b/i],[u,[d,P],[p,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[d,P],[p,v]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[d,D],[p,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[d,D],[p,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[d,"OnePlus"],[p,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[d,w],[p,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[d,w],[p,v]],[/(playbook);[-\w\),; ]+(rim)/i],[u,d,[p,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[d,S],[p,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[d,M],[p,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[d,M],[p,v]],[/(nexus 9)/i],[u,[d,"HTC"],[p,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[d,[u,/_/g," "],[p,v]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[d,"Acer"],[p,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[d,"Meizu"],[p,v]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[d,"Sharp"],[p,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[d,u,[p,v]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[d,u,[p,y]],[/(surface duo)/i],[u,[d,O],[p,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[d,"Fairphone"],[p,v]],[/(u304aa)/i],[u,[d,"AT&T"],[p,v]],[/\bsie-(\w*)/i],[u,[d,"Siemens"],[p,v]],[/\b(rct\w+) b/i],[u,[d,"RCA"],[p,y]],[/\b(venue[\d ]{2,7}) b/i],[u,[d,"Dell"],[p,y]],[/\b(q(?:mv|ta)\w+) b/i],[u,[d,"Verizon"],[p,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[d,"Barnes & Noble"],[p,y]],[/\b(tm\d{3}\w+) b/i],[u,[d,"NuVision"],[p,y]],[/\b(k88) b/i],[u,[d,"ZTE"],[p,y]],[/\b(nx\d{3}j) b/i],[u,[d,"ZTE"],[p,v]],[/\b(gen\d{3}) b.+49h/i],[u,[d,"Swiss"],[p,v]],[/\b(zur\d{3}) b/i],[u,[d,"Swiss"],[p,y]],[/\b((zeki)?tb.*\b) b/i],[u,[d,"Zeki"],[p,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[d,"Dragon Touch"],u,[p,y]],[/\b(ns-?\w{0,9}) b/i],[u,[d,"Insignia"],[p,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[d,"NextBook"],[p,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[d,"Voice"],u,[p,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[d,"LvTel"],u,[p,v]],[/\b(ph-1) /i],[u,[d,"Essential"],[p,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[d,"Envizen"],[p,y]],[/\b(trio[-\w\. ]+) b/i],[u,[d,"MachSpeed"],[p,y]],[/\btu_(1491) b/i],[u,[d,"Rotor"],[p,y]],[/(shield[\w ]+) b/i],[u,[d,"Nvidia"],[p,y]],[/(sprint) (\w+)/i],[d,u,[p,v]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[d,O],[p,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[d,B],[p,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[d,B],[p,v]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[d,u,[p,m]],[/droid.+; (shield) bui/i],[u,[d,"Nvidia"],[p,m]],[/(playstation [345portablevi]+)/i],[u,[d,D],[p,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[d,O],[p,m]],[/smart-tv.+(samsung)/i],[d,[p,_]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[d,R],[p,_]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[d,L],[p,_]],[/(apple) ?tv/i],[d,[u,E+" TV"],[p,_]],[/crkey/i],[[u,C+"cast"],[d,P],[p,_]],[/droid.+aft(\w)( bui|\))/i],[u,[d,w],[p,_]],[/\(dtv[\);].+(aquos)/i],[u,[d,"Sharp"],[p,_]],[/(bravia[\w- ]+) bui/i],[u,[d,D],[p,_]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[d,H],[u,H],[p,_]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,_]],[/((pebble))app/i],[d,u,[p,x]],[/droid.+; (glass) \d/i],[u,[d,P],[p,x]],[/droid.+; (wt63?0{2,3})\)/i],[u,[d,B],[p,x]],[/(quest( 2)?)/i],[u,[d,F],[p,x]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[d,[p,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[u,[p,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[p,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,y]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[p,v]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[d,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[c,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,f],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[c,[f,X,Y]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[c,"Windows"],[f,X,Y]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,"Mac OS"],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[f,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,f],[/\(bb(10);/i],[f,[c,S]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[c,A+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[c,"webOS"]],[/crkey\/([\d\.]+)/i],[f,[c,C+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[c,"Chromium OS"],f],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,f],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[c,f]]},J=(0,r.a)(function(t,e){if(typeof t===l&&(e=t,t=o),!(this instanceof J))return new J(t,e).getResult();var i=t||(typeof n!==s&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:""),r=e?U(Z,e):Z;return this.getBrowser=function(){var t={};return t[c]=o,t[f]=o,W.call(t,i,r.browser),t.major=G(t.version),t},this.getCPU=function(){var t={};return t[g]=o,W.call(t,i,r.cpu),t},this.getDevice=function(){var t={};return t[d]=o,t[u]=o,t[p]=o,W.call(t,i,r.device),t},this.getEngine=function(){var t={};return t[c]=o,t[f]=o,W.call(t,i,r.engine),t},this.getOS=function(){var t={};return t[c]=o,t[f]=o,W.call(t,i,r.os),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(t){return i=typeof t===h&&t.length>275?H(t,275):t,this},this.setUA(i),this},"UAParser");J.VERSION="0.7.31",J.BROWSER=z([c,f,"major"]),J.CPU=z([g]),J.DEVICE=z([u,d,p,m,v,_,y,x,b]),J.ENGINE=J.OS=z([c,f]),typeof e!==s?(typeof i!==s&&i.exports&&(e=i.exports=J),e.UAParser=J):typeof t===a&&t.amd?t(function(){return J}):typeof n!==s&&(n.UAParser=J);var K=typeof n!==s&&(n.jQuery||n.Zepto);if(K&&!K.ua){var Q=new J;K.ua=Q.getResult(),K.ua.get=function(){return Q.getUA()},K.ua.set=function(t){Q.setUA(t);var e=Q.getResult();for(var i in e)K.ua[i]=e[i]}}}("object"==typeof window?window:e)}),et=(0,r.c)((t,i)=>{(0,n.a)();var o="__lodash_hash_undefined__",a=9007199254740991,s="[object Arguments]",l="[object Array]",h="[object Boolean]",u="[object Date]",c="[object Error]",p="[object Function]",d="[object Map]",f="[object Number]",g="[object Object]",m="[object Promise]",v="[object RegExp]",y="[object Set]",_="[object String]",x="[object WeakMap]",b="[object ArrayBuffer]",w="[object DataView]",E=/^\[object .+?Constructor\]$/,M=/^(?:0|[1-9]\d*)$/,S={};S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S[s]=S[l]=S[b]=S[h]=S[w]=S[u]=S[c]=S[p]=S[d]=S[f]=S[g]=S[v]=S[y]=S[_]=S[x]=!1;var T="object"==typeof e&&e&&e.Object===Object&&e,C="object"==typeof self&&self&&self.Object===Object&&self,A=T||C||Function("return this")(),P="object"==typeof t&&t&&!t.nodeType&&t,I=P&&"object"==typeof i&&i&&!i.nodeType&&i,L=I&&I.exports===P,O=L&&T.process,N=function(){try{return O&&O.binding&&O.binding("util")}catch{}}(),q=N&&N.isTypedArray;function R(t,e){for(var i=-1,n=null==t?0:t.length,r=0,o=[];++i<n;){var a=t[i];e(a,i,t)&&(o[r++]=a)}return o}function D(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}function k(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}function B(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}function F(t){return function(e){return t(e)}}function U(t,e){return t.has(e)}function z(t,e){return null==t?void 0:t[e]}function V(t){var e=-1,i=Array(t.size);return t.forEach(function(t,n){i[++e]=[n,t]}),i}function j(t,e){return function(i){return t(e(i))}}function G(t){var e=-1,i=Array(t.size);return t.forEach(function(t){i[++e]=t}),i}(0,r.a)(R,"arrayFilter"),(0,r.a)(D,"arrayPush"),(0,r.a)(k,"arraySome"),(0,r.a)(B,"baseTimes"),(0,r.a)(F,"baseUnary"),(0,r.a)(U,"cacheHas"),(0,r.a)(z,"getValue"),(0,r.a)(V,"mapToArray"),(0,r.a)(j,"overArg"),(0,r.a)(G,"setToArray");var H,W=Array.prototype,X=Function.prototype,Y=Object.prototype,Z=A["__core-js_shared__"],J=X.toString,K=Y.hasOwnProperty,Q=(H=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||""))?"Symbol(src)_1."+H:"",$=Y.toString,tt=RegExp("^"+J.call(K).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=L?A.Buffer:void 0,it=A.Symbol,nt=A.Uint8Array,rt=Y.propertyIsEnumerable,ot=W.splice,at=it?it.toStringTag:void 0,st=Object.getOwnPropertySymbols,lt=et?et.isBuffer:void 0,ht=j(Object.keys,Object),ut=ce(A,"DataView"),ct=ce(A,"Map"),pt=ce(A,"Promise"),dt=ce(A,"Set"),ft=ce(A,"WeakMap"),gt=ce(Object,"create"),mt=xe(ut),vt=xe(ct),yt=xe(pt),_t=xe(dt),xt=xe(ft),bt=it?it.prototype:void 0,wt=bt?bt.valueOf:void 0;function Et(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Mt(){this.__data__=gt?gt(null):{},this.size=0}function St(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Tt(t){var e=this.__data__;if(gt){var i=e[t];return i===o?void 0:i}return K.call(e,t)?e[t]:void 0}function Ct(t){var e=this.__data__;return gt?void 0!==e[t]:K.call(e,t)}function At(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=gt&&void 0===e?o:e,this}function Pt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function It(){this.__data__=[],this.size=0}function Lt(t){var e=this.__data__,i=Kt(e,t);return!(i<0||(i==e.length-1?e.pop():ot.call(e,i,1),--this.size,0))}function Ot(t){var e=this.__data__,i=Kt(e,t);return i<0?void 0:e[i][1]}function Nt(t){return Kt(this.__data__,t)>-1}function qt(t,e){var i=this.__data__,n=Kt(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this}function Rt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Dt(){this.size=0,this.__data__={hash:new Et,map:new(ct||Pt),string:new Et}}function kt(t){var e=ue(this,t).delete(t);return this.size-=e?1:0,e}function Bt(t){return ue(this,t).get(t)}function Ft(t){return ue(this,t).has(t)}function Ut(t,e){var i=ue(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this}function zt(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new Rt;++e<i;)this.add(t[e])}function Vt(t){return this.__data__.set(t,o),this}function jt(t){return this.__data__.has(t)}function Gt(t){var e=this.__data__=new Pt(t);this.size=e.size}function Ht(){this.__data__=new Pt,this.size=0}function Wt(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}function Xt(t){return this.__data__.get(t)}function Yt(t){return this.__data__.has(t)}function Zt(t,e){var i=this.__data__;if(i instanceof Pt){var n=i.__data__;if(!ct||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new Rt(n)}return i.set(t,e),this.size=i.size,this}function Jt(t,e){var i=Ee(t),n=!i&&we(t),r=!i&&!n&&Se(t),o=!i&&!n&&!r&&Le(t),a=i||n||r||o,s=a?B(t.length,String):[],l=s.length;for(var h in t)(e||K.call(t,h))&&(!a||!("length"==h||r&&("offset"==h||"parent"==h)||o&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||ge(h,l)))&&s.push(h);return s}function Kt(t,e){for(var i=t.length;i--;)if(be(t[i][0],e))return i;return-1}function Qt(t,e,i){var n=e(t);return Ee(t)?n:D(n,i(t))}function $t(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":at&&at in Object(t)?pe(t):_e(t)}function te(t){return Ie(t)&&$t(t)==s}function ee(t,e,i,n,r){return t===e||(null==t||null==e||!Ie(t)&&!Ie(e)?t!=t&&e!=e:ie(t,e,i,n,ee,r))}function ie(t,e,i,n,r,o){var a=Ee(t),h=Ee(e),u=a?l:fe(t),c=h?l:fe(e),p=(u=u==s?g:u)==g,d=(c=c==s?g:c)==g,f=u==c;if(f&&Se(t)){if(!Se(e))return!1;a=!0,p=!1}if(f&&!p)return o||(o=new Gt),a||Le(t)?ae(t,e,i,n,r,o):se(t,e,u,i,n,r,o);if(!(1&i)){var m=p&&K.call(t,"__wrapped__"),v=d&&K.call(e,"__wrapped__");if(m||v){var y=m?t.value():t,_=v?e.value():e;return o||(o=new Gt),r(y,_,i,n,o)}}return!!f&&(o||(o=new Gt),le(t,e,i,n,r,o))}function ne(t){return!(!Pe(t)||ve(t))&&(Ce(t)?tt:E).test(xe(t))}function re(t){return Ie(t)&&Ae(t.length)&&!!S[$t(t)]}function oe(t){if(!ye(t))return ht(t);var e=[];for(var i in Object(t))K.call(t,i)&&"constructor"!=i&&e.push(i);return e}function ae(t,e,i,n,r,o){var a=1&i,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var h=o.get(t);if(h&&o.get(e))return h==e;var u=-1,c=!0,p=2&i?new zt:void 0;for(o.set(t,e),o.set(e,t);++u<s;){var d=t[u],f=e[u];if(n)var g=a?n(f,d,u,e,t,o):n(d,f,u,t,e,o);if(void 0!==g){if(g)continue;c=!1;break}if(p){if(!k(e,function(t,e){if(!U(p,e)&&(d===t||r(d,t,i,n,o)))return p.push(e)})){c=!1;break}}else if(d!==f&&!r(d,f,i,n,o)){c=!1;break}}return o.delete(t),o.delete(e),c}function se(t,e,i,n,r,o,a){switch(i){case w:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case b:return!(t.byteLength!=e.byteLength||!o(new nt(t),new nt(e)));case h:case u:case f:return be(+t,+e);case c:return t.name==e.name&&t.message==e.message;case v:case _:return t==e+"";case d:var s=V;case y:var l=1&n;if(s||(s=G),t.size!=e.size&&!l)return!1;var p=a.get(t);if(p)return p==e;n|=2,a.set(t,e);var g=ae(s(t),s(e),n,r,o,a);return a.delete(t),g;case"[object Symbol]":if(wt)return wt.call(t)==wt.call(e)}return!1}function le(t,e,i,n,r,o){var a=1&i,s=he(t),l=s.length;if(l!=he(e).length&&!a)return!1;for(var h=l;h--;){var u=s[h];if(!(a?u in e:K.call(e,u)))return!1}var c=o.get(t);if(c&&o.get(e))return c==e;var p=!0;o.set(t,e),o.set(e,t);for(var d=a;++h<l;){var f=t[u=s[h]],g=e[u];if(n)var m=a?n(g,f,u,e,t,o):n(f,g,u,t,e,o);if(!(void 0===m?f===g||r(f,g,i,n,o):m)){p=!1;break}d||(d="constructor"==u)}if(p&&!d){var v=t.constructor,y=e.constructor;v!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y)&&(p=!1)}return o.delete(t),o.delete(e),p}function he(t){return Qt(t,Oe,de)}function ue(t,e){var i=t.__data__;return me(e)?i["string"==typeof e?"string":"hash"]:i.map}function ce(t,e){var i=z(t,e);return ne(i)?i:void 0}function pe(t){var e=K.call(t,at),i=t[at];try{t[at]=void 0;var n=!0}catch{}var r=$.call(t);return n&&(e?t[at]=i:delete t[at]),r}(0,r.a)(Et,"Hash"),(0,r.a)(Mt,"hashClear"),(0,r.a)(St,"hashDelete"),(0,r.a)(Tt,"hashGet"),(0,r.a)(Ct,"hashHas"),(0,r.a)(At,"hashSet"),Et.prototype.clear=Mt,Et.prototype.delete=St,Et.prototype.get=Tt,Et.prototype.has=Ct,Et.prototype.set=At,(0,r.a)(Pt,"ListCache"),(0,r.a)(It,"listCacheClear"),(0,r.a)(Lt,"listCacheDelete"),(0,r.a)(Ot,"listCacheGet"),(0,r.a)(Nt,"listCacheHas"),(0,r.a)(qt,"listCacheSet"),Pt.prototype.clear=It,Pt.prototype.delete=Lt,Pt.prototype.get=Ot,Pt.prototype.has=Nt,Pt.prototype.set=qt,(0,r.a)(Rt,"MapCache"),(0,r.a)(Dt,"mapCacheClear"),(0,r.a)(kt,"mapCacheDelete"),(0,r.a)(Bt,"mapCacheGet"),(0,r.a)(Ft,"mapCacheHas"),(0,r.a)(Ut,"mapCacheSet"),Rt.prototype.clear=Dt,Rt.prototype.delete=kt,Rt.prototype.get=Bt,Rt.prototype.has=Ft,Rt.prototype.set=Ut,(0,r.a)(zt,"SetCache"),(0,r.a)(Vt,"setCacheAdd"),(0,r.a)(jt,"setCacheHas"),zt.prototype.add=zt.prototype.push=Vt,zt.prototype.has=jt,(0,r.a)(Gt,"Stack"),(0,r.a)(Ht,"stackClear"),(0,r.a)(Wt,"stackDelete"),(0,r.a)(Xt,"stackGet"),(0,r.a)(Yt,"stackHas"),(0,r.a)(Zt,"stackSet"),Gt.prototype.clear=Ht,Gt.prototype.delete=Wt,Gt.prototype.get=Xt,Gt.prototype.has=Yt,Gt.prototype.set=Zt,(0,r.a)(Jt,"arrayLikeKeys"),(0,r.a)(Kt,"assocIndexOf"),(0,r.a)(Qt,"baseGetAllKeys"),(0,r.a)($t,"baseGetTag"),(0,r.a)(te,"baseIsArguments"),(0,r.a)(ee,"baseIsEqual"),(0,r.a)(ie,"baseIsEqualDeep"),(0,r.a)(ne,"baseIsNative"),(0,r.a)(re,"baseIsTypedArray"),(0,r.a)(oe,"baseKeys"),(0,r.a)(ae,"equalArrays"),(0,r.a)(se,"equalByTag"),(0,r.a)(le,"equalObjects"),(0,r.a)(he,"getAllKeys"),(0,r.a)(ue,"getMapData"),(0,r.a)(ce,"getNative"),(0,r.a)(pe,"getRawTag");var de=st?function(t){return null==t?[]:(t=Object(t),R(st(t),function(e){return rt.call(t,e)}))}:Ne,fe=$t;function ge(t,e){return!!(e=null==e?a:e)&&("number"==typeof t||M.test(t))&&t>-1&&t%1==0&&t<e}function me(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function ve(t){return!!Q&&Q in t}function ye(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Y)}function _e(t){return $.call(t)}function xe(t){if(null!=t){try{return J.call(t)}catch{}try{return t+""}catch{}}return""}function be(t,e){return t===e||t!=t&&e!=e}(ut&&fe(new ut(new ArrayBuffer(1)))!=w||ct&&fe(new ct)!=d||pt&&fe(pt.resolve())!=m||dt&&fe(new dt)!=y||ft&&fe(new ft)!=x)&&(fe=(0,r.a)(function(t){var e=$t(t),i=e==g?t.constructor:void 0,n=i?xe(i):"";if(n)switch(n){case mt:return w;case vt:return d;case yt:return m;case _t:return y;case xt:return x}return e},"getTag")),(0,r.a)(ge,"isIndex"),(0,r.a)(me,"isKeyable"),(0,r.a)(ve,"isMasked"),(0,r.a)(ye,"isPrototype"),(0,r.a)(_e,"objectToString"),(0,r.a)(xe,"toSource"),(0,r.a)(be,"eq");var we=te(function(){return arguments}())?te:function(t){return Ie(t)&&K.call(t,"callee")&&!rt.call(t,"callee")},Ee=Array.isArray;function Me(t){return null!=t&&Ae(t.length)&&!Ce(t)}(0,r.a)(Me,"isArrayLike");var Se=lt||qe;function Te(t,e){return ee(t,e)}function Ce(t){if(!Pe(t))return!1;var e=$t(t);return e==p||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ae(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function Pe(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ie(t){return null!=t&&"object"==typeof t}(0,r.a)(Te,"isEqual"),(0,r.a)(Ce,"isFunction"),(0,r.a)(Ae,"isLength"),(0,r.a)(Pe,"isObject"),(0,r.a)(Ie,"isObjectLike");var Le=q?F(q):re;function Oe(t){return Me(t)?Jt(t):oe(t)}function Ne(){return[]}function qe(){return!1}(0,r.a)(Oe,"keys"),(0,r.a)(Ne,"stubArray"),(0,r.a)(qe,"stubFalse"),i.exports=Te}),it=(0,r.c)((t,i)=>{(0,n.a)();var o="__lodash_hash_undefined__",a=9007199254740991,s="[object Arguments]",l="[object Function]",h="[object Object]",u=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,p={};p["[object Float32Array]"]=p["[object Float64Array]"]=p["[object Int8Array]"]=p["[object Int16Array]"]=p["[object Int32Array]"]=p["[object Uint8Array]"]=p["[object Uint8ClampedArray]"]=p["[object Uint16Array]"]=p["[object Uint32Array]"]=!0,p[s]=p["[object Array]"]=p["[object ArrayBuffer]"]=p["[object Boolean]"]=p["[object DataView]"]=p["[object Date]"]=p["[object Error]"]=p[l]=p["[object Map]"]=p["[object Number]"]=p[h]=p["[object RegExp]"]=p["[object Set]"]=p["[object String]"]=p["[object WeakMap]"]=!1;var d="object"==typeof e&&e&&e.Object===Object&&e,f="object"==typeof self&&self&&self.Object===Object&&self,g=d||f||Function("return this")(),m="object"==typeof t&&t&&!t.nodeType&&t,v=m&&"object"==typeof i&&i&&!i.nodeType&&i,y=v&&v.exports===m,_=y&&d.process,x=function(){try{return v&&v.require&&v.require("util").types||_&&_.binding&&_.binding("util")}catch{}}(),b=x&&x.isTypedArray;function w(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function E(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}function M(t){return function(e){return t(e)}}function S(t,e){return null==t?void 0:t[e]}function T(t,e){return function(i){return t(e(i))}}(0,r.a)(w,"apply"),(0,r.a)(E,"baseTimes"),(0,r.a)(M,"baseUnary"),(0,r.a)(S,"getValue"),(0,r.a)(T,"overArg");var C,A=Array.prototype,P=Function.prototype,I=Object.prototype,L=g["__core-js_shared__"],O=P.toString,N=I.hasOwnProperty,q=(C=/[^.]+$/.exec(L&&L.keys&&L.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"",R=I.toString,D=O.call(Object),k=RegExp("^"+O.call(N).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),B=y?g.Buffer:void 0,F=g.Symbol,U=g.Uint8Array,z=B?B.allocUnsafe:void 0,V=T(Object.getPrototypeOf,Object),j=Object.create,G=I.propertyIsEnumerable,H=A.splice,W=F?F.toStringTag:void 0,X=function(){try{var t=Xt(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Y=B?B.isBuffer:void 0,Z=Math.max,J=Date.now,K=Xt(g,"Map"),Q=Xt(Object,"create"),$=function(){function t(){}return(0,r.a)(t,"object"),function(e){if(!me(e))return{};if(j)return j(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();function tt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function et(){this.__data__=Q?Q(null):{},this.size=0}function it(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function nt(t){var e=this.__data__;if(Q){var i=e[t];return i===o?void 0:i}return N.call(e,t)?e[t]:void 0}function rt(t){var e=this.__data__;return Q?void 0!==e[t]:N.call(e,t)}function ot(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Q&&void 0===e?o:e,this}function at(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function st(){this.__data__=[],this.size=0}function lt(t){var e=this.__data__,i=Ct(e,t);return!(i<0||(i==e.length-1?e.pop():H.call(e,i,1),--this.size,0))}function ht(t){var e=this.__data__,i=Ct(e,t);return i<0?void 0:e[i][1]}function ut(t){return Ct(this.__data__,t)>-1}function ct(t,e){var i=this.__data__,n=Ct(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this}function pt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function dt(){this.size=0,this.__data__={hash:new tt,map:new(K||at),string:new tt}}function ft(t){var e=Wt(this,t).delete(t);return this.size-=e?1:0,e}function gt(t){return Wt(this,t).get(t)}function mt(t){return Wt(this,t).has(t)}function vt(t,e){var i=Wt(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this}function yt(t){var e=this.__data__=new at(t);this.size=e.size}function _t(){this.__data__=new at,this.size=0}function xt(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}function bt(t){return this.__data__.get(t)}function wt(t){return this.__data__.has(t)}function Et(t,e){var i=this.__data__;if(i instanceof at){var n=i.__data__;if(!K||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new pt(n)}return i.set(t,e),this.size=i.size,this}function Mt(t,e){var i=ue(t),n=!i&&he(t),r=!i&&!n&&de(t),o=!i&&!n&&!r&&_e(t),a=i||n||r||o,s=a?E(t.length,String):[],l=s.length;for(var h in t)(e||N.call(t,h))&&(!a||!("length"==h||r&&("offset"==h||"parent"==h)||o&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||Jt(h,l)))&&s.push(h);return s}function St(t,e,i){(void 0!==i&&!le(t[e],i)||void 0===i&&!(e in t))&&At(t,e,i)}function Tt(t,e,i){var n=t[e];(!N.call(t,e)||!le(n,i)||void 0===i&&!(e in t))&&At(t,e,i)}function Ct(t,e){for(var i=t.length;i--;)if(le(t[i][0],e))return i;return-1}function At(t,e,i){"__proto__"==e&&X?X(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}(0,r.a)(tt,"Hash"),(0,r.a)(et,"hashClear"),(0,r.a)(it,"hashDelete"),(0,r.a)(nt,"hashGet"),(0,r.a)(rt,"hashHas"),(0,r.a)(ot,"hashSet"),tt.prototype.clear=et,tt.prototype.delete=it,tt.prototype.get=nt,tt.prototype.has=rt,tt.prototype.set=ot,(0,r.a)(at,"ListCache"),(0,r.a)(st,"listCacheClear"),(0,r.a)(lt,"listCacheDelete"),(0,r.a)(ht,"listCacheGet"),(0,r.a)(ut,"listCacheHas"),(0,r.a)(ct,"listCacheSet"),at.prototype.clear=st,at.prototype.delete=lt,at.prototype.get=ht,at.prototype.has=ut,at.prototype.set=ct,(0,r.a)(pt,"MapCache"),(0,r.a)(dt,"mapCacheClear"),(0,r.a)(ft,"mapCacheDelete"),(0,r.a)(gt,"mapCacheGet"),(0,r.a)(mt,"mapCacheHas"),(0,r.a)(vt,"mapCacheSet"),pt.prototype.clear=dt,pt.prototype.delete=ft,pt.prototype.get=gt,pt.prototype.has=mt,pt.prototype.set=vt,(0,r.a)(yt,"Stack"),(0,r.a)(_t,"stackClear"),(0,r.a)(xt,"stackDelete"),(0,r.a)(bt,"stackGet"),(0,r.a)(wt,"stackHas"),(0,r.a)(Et,"stackSet"),yt.prototype.clear=_t,yt.prototype.delete=xt,yt.prototype.get=bt,yt.prototype.has=wt,yt.prototype.set=Et,(0,r.a)(Mt,"arrayLikeKeys"),(0,r.a)(St,"assignMergeValue"),(0,r.a)(Tt,"assignValue"),(0,r.a)(Ct,"assocIndexOf"),(0,r.a)(At,"baseAssignValue");var Pt=Ht();function It(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":W&&W in Object(t)?Yt(t):ie(t)}function Lt(t){return ve(t)&&It(t)==s}function Ot(t){return!(!me(t)||$t(t))&&(fe(t)?k:u).test(se(t))}function Nt(t){return ve(t)&&ge(t.length)&&!!p[It(t)]}function qt(t){if(!me(t))return ee(t);var e=te(t),i=[];for(var n in t)"constructor"==n&&(e||!N.call(t,n))||i.push(n);return i}function Rt(t,e,i,n,r){t!==e&&Pt(e,function(o,a){if(r||(r=new yt),me(o))Dt(t,e,a,i,Rt,n,r);else{var s=n?n(re(t,a),o,a+"",t,e,r):void 0;void 0===s&&(s=o),St(t,a,s)}},be)}function Dt(t,e,i,n,r,o,a){var s=re(t,i),l=re(e,i),h=a.get(l);if(h)St(t,i,h);else{var u=o?o(s,l,i+"",t,e,a):void 0,c=void 0===u;if(c){var p=ue(l),d=!p&&de(l),f=!p&&!d&&_e(l);u=l,p||d||f?ue(s)?u=s:pe(s)?u=Vt(s):d?(c=!1,u=Ft(l,!0)):f?(c=!1,u=zt(l,!0)):u=[]:ye(l)||he(l)?(u=s,he(s)?u=xe(s):(!me(s)||fe(s))&&(u=Zt(l))):c=!1}c&&(a.set(l,u),r(u,l,n,o,a),a.delete(l)),St(t,i,u)}}function kt(t,e){return oe(ne(t,e,Me),t+"")}(0,r.a)(It,"baseGetTag"),(0,r.a)(Lt,"baseIsArguments"),(0,r.a)(Ot,"baseIsNative"),(0,r.a)(Nt,"baseIsTypedArray"),(0,r.a)(qt,"baseKeysIn"),(0,r.a)(Rt,"baseMerge"),(0,r.a)(Dt,"baseMergeDeep"),(0,r.a)(kt,"baseRest");var Bt=X?function(t,e){return X(t,"toString",{configurable:!0,enumerable:!1,value:Ee(e),writable:!0})}:Me;function Ft(t,e){if(e)return t.slice();var i=t.length,n=z?z(i):new t.constructor(i);return t.copy(n),n}function Ut(t){var e=new t.constructor(t.byteLength);return new U(e).set(new U(t)),e}function zt(t,e){var i=e?Ut(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function Vt(t,e){var i=-1,n=t.length;for(e||(e=Array(n));++i<n;)e[i]=t[i];return e}function jt(t,e,i,n){var r=!i;i||(i={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=n?n(i[s],t[s],s,i,t):void 0;void 0===l&&(l=t[s]),r?At(i,s,l):Tt(i,s,l)}return i}function Gt(t){return kt(function(e,i){var n=-1,r=i.length,o=r>1?i[r-1]:void 0,a=r>2?i[2]:void 0;for(o=t.length>3&&"function"==typeof o?(r--,o):void 0,a&&Kt(i[0],i[1],a)&&(o=r<3?void 0:o,r=1),e=Object(e);++n<r;){var s=i[n];s&&t(e,s,n,o)}return e})}function Ht(t){return function(e,i,n){for(var r=-1,o=Object(e),a=n(e),s=a.length;s--;){var l=a[t?s:++r];if(!1===i(o[l],l,o))break}return e}}function Wt(t,e){var i=t.__data__;return Qt(e)?i["string"==typeof e?"string":"hash"]:i.map}function Xt(t,e){var i=S(t,e);return Ot(i)?i:void 0}function Yt(t){var e=N.call(t,W),i=t[W];try{t[W]=void 0;var n=!0}catch{}var r=R.call(t);return n&&(e?t[W]=i:delete t[W]),r}function Zt(t){return"function"!=typeof t.constructor||te(t)?{}:$(V(t))}function Jt(t,e){var i=typeof t;return!!(e=null==e?a:e)&&("number"==i||"symbol"!=i&&c.test(t))&&t>-1&&t%1==0&&t<e}function Kt(t,e,i){if(!me(i))return!1;var n=typeof e;return!!("number"==n?ce(i)&&Jt(e,i.length):"string"==n&&e in i)&&le(i[e],t)}function Qt(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function $t(t){return!!q&&q in t}function te(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||I)}function ee(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}function ie(t){return R.call(t)}function ne(t,e,i){return e=Z(void 0===e?t.length-1:e,0),function(){for(var n=arguments,r=-1,o=Z(n.length-e,0),a=Array(o);++r<o;)a[r]=n[e+r];r=-1;for(var s=Array(e+1);++r<e;)s[r]=n[r];return s[e]=i(a),w(t,this,s)}}function re(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}(0,r.a)(Ft,"cloneBuffer"),(0,r.a)(Ut,"cloneArrayBuffer"),(0,r.a)(zt,"cloneTypedArray"),(0,r.a)(Vt,"copyArray"),(0,r.a)(jt,"copyObject"),(0,r.a)(Gt,"createAssigner"),(0,r.a)(Ht,"createBaseFor"),(0,r.a)(Wt,"getMapData"),(0,r.a)(Xt,"getNative"),(0,r.a)(Yt,"getRawTag"),(0,r.a)(Zt,"initCloneObject"),(0,r.a)(Jt,"isIndex"),(0,r.a)(Kt,"isIterateeCall"),(0,r.a)(Qt,"isKeyable"),(0,r.a)($t,"isMasked"),(0,r.a)(te,"isPrototype"),(0,r.a)(ee,"nativeKeysIn"),(0,r.a)(ie,"objectToString"),(0,r.a)(ne,"overRest"),(0,r.a)(re,"safeGet");var oe=ae(Bt);function ae(t){var e=0,i=0;return function(){var n=J(),r=16-(n-i);if(i=n,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function se(t){if(null!=t){try{return O.call(t)}catch{}try{return t+""}catch{}}return""}function le(t,e){return t===e||t!=t&&e!=e}(0,r.a)(ae,"shortOut"),(0,r.a)(se,"toSource"),(0,r.a)(le,"eq");var he=Lt(function(){return arguments}())?Lt:function(t){return ve(t)&&N.call(t,"callee")&&!G.call(t,"callee")},ue=Array.isArray;function ce(t){return null!=t&&ge(t.length)&&!fe(t)}function pe(t){return ve(t)&&ce(t)}(0,r.a)(ce,"isArrayLike"),(0,r.a)(pe,"isArrayLikeObject");var de=Y||Se;function fe(t){if(!me(t))return!1;var e=It(t);return e==l||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function ge(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function me(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ve(t){return null!=t&&"object"==typeof t}function ye(t){if(!ve(t)||It(t)!=h)return!1;var e=V(t);if(null===e)return!0;var i=N.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&O.call(i)==D}(0,r.a)(fe,"isFunction"),(0,r.a)(ge,"isLength"),(0,r.a)(me,"isObject"),(0,r.a)(ve,"isObjectLike"),(0,r.a)(ye,"isPlainObject");var _e=b?M(b):Nt;function xe(t){return jt(t,be(t))}function be(t){return ce(t)?Mt(t,!0):qt(t)}(0,r.a)(xe,"toPlainObject"),(0,r.a)(be,"keysIn");var we=Gt(function(t,e,i){Rt(t,e,i)});function Ee(t){return function(){return t}}function Me(t){return t}function Se(){return!1}(0,r.a)(Ee,"constant"),(0,r.a)(Me,"identity"),(0,r.a)(Se,"stubFalse"),i.exports=we}),nt=(0,r.c)((e,i)=>{(0,n.a)(),function(n,o){"use strict";var a="function",s="undefined",l="object",h="string",u="model",c="name",p="type",d="vendor",f="version",g="architecture",m="console",v="mobile",y="tablet",_="smarttv",x="wearable",b="embedded",w="Amazon",E="Apple",M="ASUS",S="BlackBerry",T="Browser",C="Chrome",A="Firefox",P="Google",I="Huawei",L="LG",O="Microsoft",N="Motorola",q="Opera",R="Samsung",D="Sharp",k="Sony",B="Xiaomi",F="Zebra",U="Facebook",z=(0,r.a)(function(t,e){var i={};for(var n in t)e[n]&&e[n].length%2==0?i[n]=e[n].concat(t[n]):i[n]=t[n];return i},"extend"),V=(0,r.a)(function(t){for(var e={},i=0;i<t.length;i++)e[t[i].toUpperCase()]=t[i];return e},"enumerize"),j=(0,r.a)(function(t,e){return typeof t===h&&-1!==G(e).indexOf(G(t))},"has"),G=(0,r.a)(function(t){return t.toLowerCase()},"lowerize"),H=(0,r.a)(function(t){return typeof t===h?t.replace(/[^\d\.]/g,"").split(".")[0]:o},"majorize"),W=(0,r.a)(function(t,e){if(typeof t===h)return t=t.replace(/^\s\s*/,""),typeof e===s?t:t.substring(0,350)},"trim"),X=(0,r.a)(function(t,e){for(var i,n,r,s,h,u,c=0;c<e.length&&!h;){var p=e[c],d=e[c+1];for(i=n=0;i<p.length&&!h;)if(h=p[i++].exec(t))for(r=0;r<d.length;r++)u=h[++n],typeof(s=d[r])===l&&s.length>0?2===s.length?typeof s[1]==a?this[s[0]]=s[1].call(this,u):this[s[0]]=s[1]:3===s.length?typeof s[1]!==a||s[1].exec&&s[1].test?this[s[0]]=u?u.replace(s[1],s[2]):o:this[s[0]]=u?s[1].call(this,u,s[2]):o:4===s.length&&(this[s[0]]=u?s[3].call(this,u.replace(s[1],s[2])):o):this[s]=u||o;c+=2}},"rgxMapper"),Y=(0,r.a)(function(t,e){for(var i in e)if(typeof e[i]===l&&e[i].length>0){for(var n=0;n<e[i].length;n++)if(j(e[i][n],t))return"?"===i?o:i}else if(j(e[i],t))return"?"===i?o:i;return t},"strMapper"),Z={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},J={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,f],[/opios[\/ ]+([\w\.]+)/i],[f,[c,q+" Mini"]],[/\bopr\/([\w\.]+)/i],[f,[c,q]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[c,f],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[c,"UC"+T]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[f,[c,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[f,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[c,"IE"]],[/yabrowser\/([\w\.]+)/i],[f,[c,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure "+T],f],[/\bfocus\/([\w\.]+)/i],[f,[c,A+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[c,q+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[c,q+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[c,"MIUI "+T]],[/fxios\/([-\w\.]+)/i],[f,[c,A]],[/\bqihu|(qi?ho?o?|360)browser/i],[[c,"360 "+T]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1 "+T],f],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[c,f],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,U],f],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[c,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[c,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[c,C+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,C+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[c,"Android "+T]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[c,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[f,Y,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[c,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[c,A+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[c,f],[/(cobalt)\/([\w\.]+)/i],[c,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,G]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,"",G]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[d,R],[p,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[d,R],[p,v]],[/\((ip(?:hone|od)[\w ]*);/i],[u,[d,E],[p,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[d,E],[p,y]],[/(macintosh);/i],[u,[d,E]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[d,I],[p,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[d,I],[p,v]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[d,B],[p,v]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[d,B],[p,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[d,"OPPO"],[p,v]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[d,"Vivo"],[p,v]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[u,[d,"Realme"],[p,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[d,N],[p,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[d,N],[p,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[d,L],[p,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[d,L],[p,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[d,"Lenovo"],[p,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[d,"Nokia"],[p,v]],[/(pixel c)\b/i],[u,[d,P],[p,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[d,P],[p,v]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[d,k],[p,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[d,k],[p,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[d,"OnePlus"],[p,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[d,w],[p,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[d,w],[p,v]],[/(playbook);[-\w\),; ]+(rim)/i],[u,d,[p,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[d,S],[p,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[d,M],[p,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[d,M],[p,v]],[/(nexus 9)/i],[u,[d,"HTC"],[p,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[d,[u,/_/g," "],[p,v]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[d,"Acer"],[p,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[d,"Meizu"],[p,v]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[d,D],[p,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[d,u,[p,v]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[d,u,[p,y]],[/(surface duo)/i],[u,[d,O],[p,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[d,"Fairphone"],[p,v]],[/(u304aa)/i],[u,[d,"AT&T"],[p,v]],[/\bsie-(\w*)/i],[u,[d,"Siemens"],[p,v]],[/\b(rct\w+) b/i],[u,[d,"RCA"],[p,y]],[/\b(venue[\d ]{2,7}) b/i],[u,[d,"Dell"],[p,y]],[/\b(q(?:mv|ta)\w+) b/i],[u,[d,"Verizon"],[p,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[d,"Barnes & Noble"],[p,y]],[/\b(tm\d{3}\w+) b/i],[u,[d,"NuVision"],[p,y]],[/\b(k88) b/i],[u,[d,"ZTE"],[p,y]],[/\b(nx\d{3}j) b/i],[u,[d,"ZTE"],[p,v]],[/\b(gen\d{3}) b.+49h/i],[u,[d,"Swiss"],[p,v]],[/\b(zur\d{3}) b/i],[u,[d,"Swiss"],[p,y]],[/\b((zeki)?tb.*\b) b/i],[u,[d,"Zeki"],[p,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[d,"Dragon Touch"],u,[p,y]],[/\b(ns-?\w{0,9}) b/i],[u,[d,"Insignia"],[p,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[d,"NextBook"],[p,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[d,"Voice"],u,[p,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[d,"LvTel"],u,[p,v]],[/\b(ph-1) /i],[u,[d,"Essential"],[p,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[d,"Envizen"],[p,y]],[/\b(trio[-\w\. ]+) b/i],[u,[d,"MachSpeed"],[p,y]],[/\btu_(1491) b/i],[u,[d,"Rotor"],[p,y]],[/(shield[\w ]+) b/i],[u,[d,"Nvidia"],[p,y]],[/(sprint) (\w+)/i],[d,u,[p,v]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[d,O],[p,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[d,F],[p,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[d,F],[p,v]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[d,u,[p,m]],[/droid.+; (shield) bui/i],[u,[d,"Nvidia"],[p,m]],[/(playstation [345portablevi]+)/i],[u,[d,k],[p,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[d,O],[p,m]],[/smart-tv.+(samsung)/i],[d,[p,_]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[d,R],[p,_]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[d,L],[p,_]],[/(apple) ?tv/i],[d,[u,E+" TV"],[p,_]],[/crkey/i],[[u,C+"cast"],[d,P],[p,_]],[/droid.+aft(\w)( bui|\))/i],[u,[d,w],[p,_]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[d,D],[p,_]],[/(bravia[\w ]+)( bui|\))/i],[u,[d,k],[p,_]],[/(mitv-\w{5}) bui/i],[u,[d,B],[p,_]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[d,W],[u,W],[p,_]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,_]],[/((pebble))app/i],[d,u,[p,x]],[/droid.+; (glass) \d/i],[u,[d,P],[p,x]],[/droid.+; (wt63?0{2,3})\)/i],[u,[d,F],[p,x]],[/(quest( 2)?)/i],[u,[d,U],[p,x]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[d,[p,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[u,[p,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[p,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,y]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,v]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[d,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[c,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,f],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[c,[f,Y,Z]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[c,"Windows"],[f,Y,Z]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,"Mac OS"],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,f],[/\(bb(10);/i],[f,[c,S]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[c,A+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[c,"webOS"]],[/crkey\/([\d\.]+)/i],[f,[c,C+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[c,"Chromium OS"],f],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,f],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[c,f]]},K=(0,r.a)(function(t,e){if(typeof t===l&&(e=t,t=o),!(this instanceof K))return new K(t,e).getResult();var i=t||(typeof n!==s&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:""),r=e?z(J,e):J;return this.getBrowser=function(){var t={};return t[c]=o,t[f]=o,X.call(t,i,r.browser),t.major=H(t.version),t},this.getCPU=function(){var t={};return t[g]=o,X.call(t,i,r.cpu),t},this.getDevice=function(){var t={};return t[d]=o,t[u]=o,t[p]=o,X.call(t,i,r.device),t},this.getEngine=function(){var t={};return t[c]=o,t[f]=o,X.call(t,i,r.engine),t},this.getOS=function(){var t={};return t[c]=o,t[f]=o,X.call(t,i,r.os),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(t){return i=typeof t===h&&t.length>350?W(t,350):t,this},this.setUA(i),this},"UAParser");K.VERSION="0.7.33",K.BROWSER=V([c,f,"major"]),K.CPU=V([g]),K.DEVICE=V([u,d,p,m,v,_,y,x,b]),K.ENGINE=K.OS=V([c,f]),typeof e!==s?(typeof i!==s&&i.exports&&(e=i.exports=K),e.UAParser=K):typeof t===a&&t.amd?t(function(){return K}):typeof n!==s&&(n.UAParser=K);var Q=typeof n!==s&&(n.jQuery||n.Zepto);if(Q&&!Q.ua){var $=new K;Q.ua=$.getResult(),Q.ua.get=function(){return $.getUA()},Q.ua.set=function(t){$.setUA(t);var e=$.getResult();for(var i in e)Q.ua[i]=e[i]}}}("object"==typeof window?window:e)}),rt=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function s(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function l(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch{return!1}}(0,r.a)(s,"toObject"),(0,r.a)(l,"shouldUseNative"),e.exports=l()?Object.assign:function(t,e){for(var n,r,l=s(t),h=1;h<arguments.length;h++){for(var u in n=Object(arguments[h]))o.call(n,u)&&(l[u]=n[u]);if(i){r=i(n);for(var c=0;c<r.length;c++)a.call(n,r[c])&&(l[r[c]]=n[r[c]])}}return l}}),ot=(0,r.c)((e,i)=>{var o,a;(0,n.a)(),o=e,a=function(){"use strict";function t(t,n,o,a,s){(0,r.a)(function t(i,n,r,o,a){for(;o>r;){if(o-r>600){var s=o-r+1,l=n-r+1,h=Math.log(s),u=.5*Math.exp(2*h/3),c=.5*Math.sqrt(h*u*(s-u)/s)*(l-s/2<0?-1:1);t(i,n,Math.max(r,Math.floor(n-l*u/s+c)),Math.min(o,Math.floor(n+(s-l)*u/s+c)),a)}var p=i[n],d=r,f=o;for(e(i,r,n),a(i[o],p)>0&&e(i,r,o);d<f;){for(e(i,d,f),d++,f--;a(i[d],p)<0;)d++;for(;a(i[f],p)>0;)f--}0===a(i[r],p)?e(i,r,f):e(i,++f,o),f<=n&&(r=f+1),n<=f&&(o=f-1)}},"t")(t,n,o||0,a||t.length-1,s||i)}function e(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function i(t,e){return t<e?-1:t>e?1:0}(0,r.a)(t,"t"),(0,r.a)(e,"i"),(0,r.a)(i,"n");var n=(0,r.a)(function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()},"r");function o(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function a(t,e){s(t,0,t.children.length,e,t)}function s(t,e,i,n,r){r||(r=g(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o=e;o<i;o++){var a=t.children[o];l(r,t.leaf?n(a):a)}return r}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function h(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(e,i,n,r,o){for(var a=[i,n];a.length;)if(!((n=a.pop())-(i=a.pop())<=r)){var s=i+Math.ceil((n-i)/r/2)*r;t(e,s,i,n,o),a.push(i,s,s,n)}}return(0,r.a)(o,"e"),(0,r.a)(a,"a"),(0,r.a)(s,"h"),(0,r.a)(l,"o"),(0,r.a)(h,"s"),(0,r.a)(u,"l"),(0,r.a)(c,"f"),(0,r.a)(p,"u"),(0,r.a)(d,"m"),(0,r.a)(f,"c"),(0,r.a)(g,"p"),(0,r.a)(m,"d"),n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,i=[];if(!f(t,e))return i;for(var n=this.toBBox,r=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?n(a):a;f(t,s)&&(e.leaf?i.push(a):d(t,s)?this._all(a,i):r.push(a))}e=r.pop()}return i},n.prototype.collides=function(t){var e=this.data;if(!f(t,e))return!1;for(var i=[];e;){for(var n=0;n<e.children.length;n++){var r=e.children[n],o=e.leaf?this.toBBox(r):r;if(f(t,o)){if(e.leaf||d(t,o))return!0;i.push(r)}}e=i.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=g([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var i,n,r,a=this.data,s=this.toBBox(t),l=[],h=[];a||l.length;){if(a||(a=l.pop(),n=l[l.length-1],i=h.pop(),r=!0),a.leaf){var u=o(t,a.children,e);if(-1!==u)return a.children.splice(u,1),l.push(a),this._condense(l),this}r||a.leaf||!d(a,s)?n?(i++,a=n.children[i],r=!1):a=null:(l.push(a),h.push(i),i=0,n=a,a=a.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},n.prototype._build=function(t,e,i,n){var r,o=i-e+1,s=this._maxEntries;if(o<=s)return a(r=g(t.slice(e,i+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,n-1))),(r=g([])).leaf=!1,r.height=n;var l=Math.ceil(o/s),h=l*Math.ceil(Math.sqrt(s));m(t,e,i,h,this.compareMinX);for(var u=e;u<=i;u+=h){var c=Math.min(u+h-1,i);m(t,u,c,l,this.compareMinY);for(var p=u;p<=c;p+=l){var d=Math.min(p+l-1,c);r.children.push(this._build(t,p,d,n-1))}}return a(r,this.toBBox),r},n.prototype._chooseSubtree=function(t,e,i,n){for(;n.push(e),!e.leaf&&n.length-1!==i;){for(var r=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var l=e.children[s],h=c(l),u=(p=t,d=l,(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-h);u<o?(o=u,r=h<r?h:r,a=l):u===o&&h<r&&(r=h,a=l)}e=a||e.children[0]}var p,d;return e},n.prototype._insert=function(t,e,i){var n=i?t:this.toBBox(t),r=[],o=this._chooseSubtree(n,this.data,e,r);for(o.children.push(t),l(o,n);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(n,r,e)},n.prototype._split=function(t,e){var i=t[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);var o=this._chooseSplitIndex(i,r,n),s=g(i.children.splice(o,i.children.length-o));s.height=i.height,s.leaf=i.leaf,a(i,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(i,s)},n.prototype._splitRoot=function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,i){for(var n,r,o,a,l,h,u,p=1/0,d=1/0,f=e;f<=i-e;f++){var g=s(t,0,f,this.toBBox),m=s(t,f,i,this.toBBox),v=(r=g,o=m,a=Math.max(r.minX,o.minX),l=Math.max(r.minY,o.minY),h=Math.min(r.maxX,o.maxX),u=Math.min(r.maxY,o.maxY),Math.max(0,h-a)*Math.max(0,u-l)),y=c(g)+c(m);v<p?(p=v,n=f,d=y<d?y:d):v===p&&y<d&&(d=y,n=f)}return n||i-e},n.prototype._chooseSplitAxis=function(t,e,i){var n=t.leaf?this.compareMinX:h,r=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,i,n){t.children.sort(n);for(var r=this.toBBox,o=s(t,0,e,r),a=s(t,i-e,i,r),h=p(o)+p(a),u=e;u<i-e;u++){var c=t.children[u];l(o,t.leaf?r(c):c),h+=p(o)}for(var d=i-e-1;d>=e;d--){var f=t.children[d];l(a,t.leaf?r(f):f),h+=p(a)}return h},n.prototype._adjustParentBBoxes=function(t,e,i){for(var n=i;n>=0;n--)l(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():a(t[e],this.toBBox)},n},"object"==typeof e&&typeof i<"u"?i.exports=a():"function"==typeof t&&t.amd?t(a):(o=o||self).RBush=a()}),at=(0,r.c)((t,e)=>{(0,n.a)(),e.exports=(0,r.a)(function(t,e,i,n){var r=t[0],o=t[1],a=!1;void 0===i&&(i=0),void 0===n&&(n=e.length);for(var s=(n-i)/2,l=0,h=s-1;l<s;h=l++){var u=e[i+2*l+0],c=e[i+2*l+1],p=e[i+2*h+0],d=e[i+2*h+1];c>o!=d>o&&r<(p-u)*(o-c)/(d-c)+u&&(a=!a)}return a},"pointInPolygonFlat")}),st=(0,r.c)((t,e)=>{(0,n.a)(),e.exports=(0,r.a)(function(t,e,i,n){var r=t[0],o=t[1],a=!1;void 0===i&&(i=0),void 0===n&&(n=e.length);for(var s=n-i,l=0,h=s-1;l<s;h=l++){var u=e[l+i][0],c=e[l+i][1],p=e[h+i][0],d=e[h+i][1];c>o!=d>o&&r<(p-u)*(o-c)/(d-c)+u&&(a=!a)}return a},"pointInPolygonNested")}),lt=(0,r.c)((t,e)=>{(0,n.a)();var i=at(),o=st();e.exports=(0,r.a)(function(t,e,n,r){return e.length>0&&Array.isArray(e[0])?o(t,e,n,r):i(t,e,n,r)},"pointInPolygon"),e.exports.nested=o,e.exports.flat=i}),ht=(0,r.c)((e,i)=>{var o,a;(0,n.a)(),o=e,a=function(t){"use strict";function e(t,e,i,n,r){let o,a,s,l,h=e[0],u=n[0],c=0,p=0;u>h==u>-h?(o=h,h=e[++c]):(o=u,u=n[++p]);let d=0;if(c<t&&p<i)for(u>h==u>-h?(s=o-((a=h+o)-h),h=e[++c]):(s=o-((a=u+o)-u),u=n[++p]),o=a,0!==s&&(r[d++]=s);c<t&&p<i;)u>h==u>-h?(s=o-((a=o+h)-(l=a-o))+(h-l),h=e[++c]):(s=o-((a=o+u)-(l=a-o))+(u-l),u=n[++p]),o=a,0!==s&&(r[d++]=s);for(;c<t;)s=o-((a=o+h)-(l=a-o))+(h-l),h=e[++c],o=a,0!==s&&(r[d++]=s);for(;p<i;)s=o-((a=o+u)-(l=a-o))+(u-l),u=n[++p],o=a,0!==s&&(r[d++]=s);return 0===o&&0!==d||(r[d++]=o),d}function i(t){return new Float64Array(t)}(0,r.a)(e,"r"),(0,r.a)(i,"o");let n=i(4),o=i(8),a=i(12),s=i(16),l=i(4);t.orient2d=function(t,i,r,h,u,c){let p=(i-c)*(r-u),d=(t-u)*(h-c),f=p-d;if(0===p||0===d||p>0!=d>0)return f;let g=Math.abs(p+d);return Math.abs(f)>=3.3306690738754716e-16*g?f:-function(t,i,r,h,u,c,p){let d,f,g,m,v,y,_,x,b,w,E,M,S,T,C,A,P,I,L=t-u,O=r-u,N=i-c,q=h-c;v=(C=(x=L-(_=(y=134217729*L)-(y-L)))*(w=q-(b=(y=134217729*q)-(y-q)))-((T=L*q)-_*b-x*b-_*w))-(E=C-(P=(x=N-(_=(y=134217729*N)-(y-N)))*(w=O-(b=(y=134217729*O)-(y-O)))-((A=N*O)-_*b-x*b-_*w))),n[0]=C-(E+v)+(v-P),v=(S=T-((M=T+E)-(v=M-T))+(E-v))-(E=S-A),n[1]=S-(E+v)+(v-A),v=(I=M+E)-M,n[2]=M-(I-v)+(E-v),n[3]=I;let R=function(t,e){let i=e[0];for(let n=1;n<4;n++)i+=e[n];return i}(0,n),D=2.2204460492503146e-16*p;if(R>=D||-R>=D||(d=t-(L+(v=t-L))+(v-u),g=r-(O+(v=r-O))+(v-u),f=i-(N+(v=i-N))+(v-c),m=h-(q+(v=h-q))+(v-c),0===d&&0===f&&0===g&&0===m)||(D=1.1093356479670487e-31*p+3.3306690738754706e-16*Math.abs(R),(R+=L*m+q*d-(N*g+O*f))>=D||-R>=D))return R;v=(C=(x=d-(_=(y=134217729*d)-(y-d)))*(w=q-(b=(y=134217729*q)-(y-q)))-((T=d*q)-_*b-x*b-_*w))-(E=C-(P=(x=f-(_=(y=134217729*f)-(y-f)))*(w=O-(b=(y=134217729*O)-(y-O)))-((A=f*O)-_*b-x*b-_*w))),l[0]=C-(E+v)+(v-P),v=(S=T-((M=T+E)-(v=M-T))+(E-v))-(E=S-A),l[1]=S-(E+v)+(v-A),v=(I=M+E)-M,l[2]=M-(I-v)+(E-v),l[3]=I;let k=e(4,n,4,l,o);v=(C=(x=L-(_=(y=134217729*L)-(y-L)))*(w=m-(b=(y=134217729*m)-(y-m)))-((T=L*m)-_*b-x*b-_*w))-(E=C-(P=(x=N-(_=(y=134217729*N)-(y-N)))*(w=g-(b=(y=134217729*g)-(y-g)))-((A=N*g)-_*b-x*b-_*w))),l[0]=C-(E+v)+(v-P),v=(S=T-((M=T+E)-(v=M-T))+(E-v))-(E=S-A),l[1]=S-(E+v)+(v-A),v=(I=M+E)-M,l[2]=M-(I-v)+(E-v),l[3]=I;let B=e(k,o,4,l,a);v=(C=(x=d-(_=(y=134217729*d)-(y-d)))*(w=m-(b=(y=134217729*m)-(y-m)))-((T=d*m)-_*b-x*b-_*w))-(E=C-(P=(x=f-(_=(y=134217729*f)-(y-f)))*(w=g-(b=(y=134217729*g)-(y-g)))-((A=f*g)-_*b-x*b-_*w))),l[0]=C-(E+v)+(v-P),v=(S=T-((M=T+E)-(v=M-T))+(E-v))-(E=S-A),l[1]=S-(E+v)+(v-A),v=(I=M+E)-M,l[2]=M-(I-v)+(E-v),l[3]=I;let F=e(B,a,4,l,s);return s[F-1]}(t,i,r,h,u,c,g)},t.orient2dfast=function(t,e,i,n,r,o){return(e-o)*(i-r)-(t-r)*(n-o)},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof e&&typeof i<"u"?a(e):"function"==typeof t&&t.amd?t(["exports"],a):a((o=o||self).predicates={})}),ut=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var o=ot(),a=(0,i.a)(),s=lt(),l=ht().orient2d;function h(t,e,i){e=Math.max(0,void 0===e?2:e),i=i||0;var n=y(t),r=new o(16);r.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},r.compareMinX=function(t,e){return t[0]-e[0]},r.compareMinY=function(t,e){return t[1]-e[1]},r.load(t);for(var a,s=[],l=0;l<n.length;l++){var h=n[l];r.remove(h),a=_(h,a),s.push(a)}var c=new o(16);for(l=0;l<s.length;l++)c.insert(v(s[l]));for(var p=e*e,d=i*i;s.length;){var f=s.shift(),g=f.p,m=f.next.p,b=x(g,m);if(!(b<d)){var w=b/p;(h=u(r,f.prev.p,g,m,f.next.next.p,w,c))&&Math.min(x(h,g),x(h,m))<=w&&(s.push(f),s.push(_(h,f)),r.remove(h),c.remove(f),c.insert(v(f)),c.insert(v(f.next)))}}f=a;var E=[];do{E.push(f.p),f=f.next}while(f!==a);return E.push(f.p),E}function u(t,e,i,n,r,o,s){for(var l=new a([],c),h=t.data;h;){for(var u=0;u<h.children.length;u++){var d=h.children[u],g=h.leaf?b(d,i,n):p(i,n,d);g>o||l.push({node:d,dist:g})}for(;l.length&&!l.peek().node.children;){var m=l.pop(),v=m.node,y=b(v,e,i),_=b(v,n,r);if(m.dist<y&&m.dist<_&&f(i,v,s)&&f(n,v,s))return v}(h=l.pop())&&(h=h.node)}return null}function c(t,e){return t.dist-e.dist}function p(t,e,i){if(d(t,i)||d(e,i))return 0;var n=w(t[0],t[1],e[0],e[1],i.minX,i.minY,i.maxX,i.minY);if(0===n)return 0;var r=w(t[0],t[1],e[0],e[1],i.minX,i.minY,i.minX,i.maxY);if(0===r)return 0;var o=w(t[0],t[1],e[0],e[1],i.maxX,i.minY,i.maxX,i.maxY);if(0===o)return 0;var a=w(t[0],t[1],e[0],e[1],i.minX,i.maxY,i.maxX,i.maxY);return 0===a?0:Math.min(n,r,o,a)}function d(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function f(t,e,i){for(var n=Math.min(t[0],e[0]),r=Math.min(t[1],e[1]),o=Math.max(t[0],e[0]),a=Math.max(t[1],e[1]),s=i.search({minX:n,minY:r,maxX:o,maxY:a}),l=0;l<s.length;l++)if(m(s[l].p,s[l].next.p,t,e))return!1;return!0}function g(t,e,i){return l(t[0],t[1],e[0],e[1],i[0],i[1])}function m(t,e,i,n){return t!==n&&e!==i&&g(t,e,i)>0!=g(t,e,n)>0&&g(i,n,t)>0!=g(i,n,e)>0}function v(t){var e=t.p,i=t.next.p;return t.minX=Math.min(e[0],i[0]),t.minY=Math.min(e[1],i[1]),t.maxX=Math.max(e[0],i[0]),t.maxY=Math.max(e[1],i[1]),t}function y(t){for(var e=t[0],i=t[0],n=t[0],r=t[0],o=0;o<t.length;o++){var a=t[o];a[0]<e[0]&&(e=a),a[0]>n[0]&&(n=a),a[1]<i[1]&&(i=a),a[1]>r[1]&&(r=a)}var l=[e,i,n,r],h=l.slice();for(o=0;o<t.length;o++)s(t[o],l)||h.push(t[o]);return M(h)}function _(t,e){var i={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(i.next=e.next,i.prev=e,e.next.prev=i,e.next=i):(i.prev=i,i.next=i),i}function x(t,e){var i=t[0]-e[0],n=t[1]-e[1];return i*i+n*n}function b(t,e,i){var n=e[0],r=e[1],o=i[0]-n,a=i[1]-r;if(0!==o||0!==a){var s=((t[0]-n)*o+(t[1]-r)*a)/(o*o+a*a);s>1?(n=i[0],r=i[1]):s>0&&(n+=o*s,r+=a*s)}return(o=t[0]-n)*o+(a=t[1]-r)*a}function w(t,e,i,n,r,o,a,s){var l,h,u,c,p=i-t,d=n-e,f=a-r,g=s-o,m=t-r,v=e-o,y=p*p+d*d,_=p*f+d*g,x=f*f+g*g,b=p*m+d*v,w=f*m+g*v,E=y*x-_*_,M=E,S=E;0===E?(h=0,M=1,c=w,S=x):(c=y*w-_*b,(h=_*w-x*b)<0?(h=0,c=w,S=x):h>M&&(h=M,c=w+_,S=x)),c<0?(c=0,-b<0?h=0:-b>y?h=M:(h=-b,M=y)):c>S&&(c=S,-b+_<0?h=0:-b+_>y?h=M:(h=-b+_,M=y));var T=(1-(u=0===c?0:c/S))*r+u*a-((1-(l=0===h?0:h/M))*t+l*i),C=(1-u)*o+u*s-((1-l)*e+l*n);return T*T+C*C}function E(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}function M(t){t.sort(E);for(var e=[],i=0;i<t.length;i++){for(;e.length>=2&&g(e[e.length-2],e[e.length-1],t[i])<=0;)e.pop();e.push(t[i])}for(var n=[],r=t.length-1;r>=0;r--){for(;n.length>=2&&g(n[n.length-2],n[n.length-1],t[r])<=0;)n.pop();n.push(t[r])}return n.pop(),e.pop(),e.concat(n)}a.default&&(a=a.default),e.exports=h,e.exports.default=h,(0,r.a)(h,"concaveman"),(0,r.a)(u,"findCandidate"),(0,r.a)(c,"compareDist"),(0,r.a)(p,"sqSegBoxDist"),(0,r.a)(d,"inside"),(0,r.a)(f,"noIntersections"),(0,r.a)(g,"cross"),(0,r.a)(m,"intersects"),(0,r.a)(v,"updateBBox"),(0,r.a)(y,"fastConvexHull"),(0,r.a)(_,"insertNode"),(0,r.a)(x,"getSqDist"),(0,r.a)(b,"sqSegDist"),(0,r.a)(w,"sqSegSegDist"),(0,r.a)(E,"compareByX"),(0,r.a)(M,"convexHull")}),ct=(0,r.c)((e,i)=>{var o,a;(0,n.a)(),o=e,a=function(){"use strict";function t(t,i,r,o,a){e(t,i,r||0,o||t.length-1,a||n)}function e(t,n,r,o,a){for(;o>r;){if(o-r>600){var s=o-r+1,l=n-r+1,h=Math.log(s),u=.5*Math.exp(2*h/3),c=.5*Math.sqrt(h*u*(s-u)/s)*(l-s/2<0?-1:1);e(t,n,Math.max(r,Math.floor(n-l*u/s+c)),Math.min(o,Math.floor(n+(s-l)*u/s+c)),a)}var p=t[n],d=r,f=o;for(i(t,r,n),a(t[o],p)>0&&i(t,r,o);d<f;){for(i(t,d,f),d++,f--;a(t[d],p)<0;)d++;for(;a(t[f],p)>0;)f--}0===a(t[r],p)?i(t,r,f):i(t,++f,o),f<=n&&(r=f+1),n<=f&&(o=f-1)}}function i(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function n(t,e){return t<e?-1:t>e?1:0}return(0,r.a)(t,"quickselect"),(0,r.a)(e,"quickselectStep"),(0,r.a)(i,"swap"),(0,r.a)(n,"defaultCompare"),t},"object"==typeof e&&typeof i<"u"?i.exports=a():"function"==typeof t&&t.amd?t(a):o.quickselect=a()}),pt=(0,r.c)((t,e)=>{"use strict";(0,n.a)(),e.exports=o,e.exports.default=o;var i=ct();function o(t,e){if(!(this instanceof o))return new o(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function a(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function s(t,e){l(t,0,t.children.length,e,t)}function l(t,e,i,n,r){r||(r=y(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,a=e;a<i;a++)o=t.children[a],h(r,t.leaf?n(o):o);return r}function h(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function p(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function g(t,e){var i=Math.max(t.minX,e.minX),n=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,r-i)*Math.max(0,o-n)}function m(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function v(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function y(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(t,e,n,r,o){for(var a,s=[e,n];s.length;)!((n=s.pop())-(e=s.pop())<=r)&&(a=e+Math.ceil((n-e)/r/2)*r,i(t,a,e,n,o),s.push(e,a,a,n))}(0,r.a)(o,"rbush"),o.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],n=this.toBBox;if(!v(t,e))return i;for(var r,o,a,s,l=[];e;){for(r=0,o=e.children.length;r<o;r++)a=e.children[r],v(t,s=e.leaf?n(a):a)&&(e.leaf?i.push(a):m(t,s)?this._all(a,i):l.push(a));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!v(t,e))return!1;for(var n,r,o,a,s=[];e;){for(n=0,r=e.children.length;n<r;n++)if(o=e.children[n],v(t,a=e.leaf?i(o):o)){if(e.leaf||m(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(t,e){if(!t)return this;for(var i,n,r,o,s=this.data,l=this.toBBox(t),h=[],u=[];s||h.length;){if(s||(s=h.pop(),n=h[h.length-1],i=u.pop(),o=!0),s.leaf&&-1!==(r=a(t,s.children,e)))return s.children.splice(r,1),h.push(s),this._condense(h),this;o||s.leaf||!m(s,l)?n?(i++,s=n.children[i],o=!1):s=null:(h.push(s),u.push(i),i=0,n=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:u,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,n){var r,o=i-e+1,a=this._maxEntries;if(o<=a)return s(r=y(t.slice(e,i+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,n-1))),(r=y([])).leaf=!1,r.height=n;var l,h,u,c,p=Math.ceil(o/a),d=p*Math.ceil(Math.sqrt(a));for(_(t,e,i,d,this.compareMinX),l=e;l<=i;l+=d)for(_(t,l,u=Math.min(l+d-1,i),p,this.compareMinY),h=l;h<=u;h+=p)c=Math.min(h+p-1,u),r.children.push(this._build(t,h,c,n-1));return s(r,this.toBBox),r},_chooseSubtree:function(t,e,i,n){for(var r,o,a,s,l,h,u,c;n.push(e),!e.leaf&&n.length-1!==i;){for(u=c=1/0,r=0,o=e.children.length;r<o;r++)l=p(a=e.children[r]),(h=f(t,a)-l)<c?(c=h,u=l<u?l:u,s=a):h===c&&l<u&&(u=l,s=a);e=s||e.children[0]}return e},_insert:function(t,e,i){var n=this.toBBox,r=i?t:n(t),o=[],a=this._chooseSubtree(r,this.data,e,o);for(a.children.push(t),h(a,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var i=t[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);var o=this._chooseSplitIndex(i,r,n),a=y(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,s(i,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},_splitRoot:function(t,e){this.data=y([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var n,r,o,a,s,h,u,c;for(h=u=1/0,n=e;n<=i-e;n++)a=g(r=l(t,0,n,this.toBBox),o=l(t,n,i,this.toBBox)),s=p(r)+p(o),a<h?(h=a,c=n,u=s<u?s:u):a===h&&s<u&&(u=s,c=n);return c},_chooseSplitAxis:function(t,e,i){var n=t.leaf?this.compareMinX:u,r=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)},_allDistMargin:function(t,e,i,n){t.children.sort(n);var r,o,a=this.toBBox,s=l(t,0,e,a),u=l(t,i-e,i,a),c=d(s)+d(u);for(r=e;r<i-e;r++)o=t.children[r],h(s,t.leaf?a(o):o),c+=d(s);for(r=i-e-1;r>=e;r--)o=t.children[r],h(u,t.leaf?a(o):o),c+=d(u);return c},_adjustParentBBoxes:function(t,e,i){for(var n=i;n>=0;n--)h(e[n],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():s(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},(0,r.a)(a,"findItem"),(0,r.a)(s,"calcBBox"),(0,r.a)(l,"distBBox"),(0,r.a)(h,"extend"),(0,r.a)(u,"compareNodeMinX"),(0,r.a)(c,"compareNodeMinY"),(0,r.a)(p,"bboxArea"),(0,r.a)(d,"bboxMargin"),(0,r.a)(f,"enlargedArea"),(0,r.a)(g,"intersectionArea"),(0,r.a)(m,"contains"),(0,r.a)(v,"intersects"),(0,r.a)(y,"createNode"),(0,r.a)(_,"multiSelect")}),dt=(0,r.c)((e,i)=>{var o,a;(0,n.a)(),o=e,a=function(){"use strict";function t(t,n,o,a,s){(0,r.a)(function t(i,n,r,o,a){for(;o>r;){if(o-r>600){var s=o-r+1,l=n-r+1,h=Math.log(s),u=.5*Math.exp(2*h/3),c=.5*Math.sqrt(h*u*(s-u)/s)*(l-s/2<0?-1:1);t(i,n,Math.max(r,Math.floor(n-l*u/s+c)),Math.min(o,Math.floor(n+(s-l)*u/s+c)),a)}var p=i[n],d=r,f=o;for(e(i,r,n),a(i[o],p)>0&&e(i,r,o);d<f;){for(e(i,d,f),d++,f--;a(i[d],p)<0;)d++;for(;a(i[f],p)>0;)f--}0===a(i[r],p)?e(i,r,f):e(i,++f,o),f<=n&&(r=f+1),n<=f&&(o=f-1)}},"t")(t,n,o||0,a||t.length-1,s||i)}function e(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function i(t,e){return t<e?-1:t>e?1:0}(0,r.a)(t,"t"),(0,r.a)(e,"i"),(0,r.a)(i,"n");var n=(0,r.a)(function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()},"r");function o(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function a(t,e){s(t,0,t.children.length,e,t)}function s(t,e,i,n,r){r||(r=g(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o=e;o<i;o++){var a=t.children[o];l(r,t.leaf?n(a):a)}return r}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function h(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(e,i,n,r,o){for(var a=[i,n];a.length;)if(!((n=a.pop())-(i=a.pop())<=r)){var s=i+Math.ceil((n-i)/r/2)*r;t(e,s,i,n,o),a.push(i,s,s,n)}}return(0,r.a)(o,"e"),(0,r.a)(a,"a"),(0,r.a)(s,"h"),(0,r.a)(l,"o"),(0,r.a)(h,"s"),(0,r.a)(u,"l"),(0,r.a)(c,"f"),(0,r.a)(p,"u"),(0,r.a)(d,"m"),(0,r.a)(f,"c"),(0,r.a)(g,"p"),(0,r.a)(m,"d"),n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,i=[];if(!f(t,e))return i;for(var n=this.toBBox,r=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?n(a):a;f(t,s)&&(e.leaf?i.push(a):d(t,s)?this._all(a,i):r.push(a))}e=r.pop()}return i},n.prototype.collides=function(t){var e=this.data;if(!f(t,e))return!1;for(var i=[];e;){for(var n=0;n<e.children.length;n++){var r=e.children[n],o=e.leaf?this.toBBox(r):r;if(f(t,o)){if(e.leaf||d(t,o))return!0;i.push(r)}}e=i.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=g([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var i,n,r,a=this.data,s=this.toBBox(t),l=[],h=[];a||l.length;){if(a||(a=l.pop(),n=l[l.length-1],i=h.pop(),r=!0),a.leaf){var u=o(t,a.children,e);if(-1!==u)return a.children.splice(u,1),l.push(a),this._condense(l),this}r||a.leaf||!d(a,s)?n?(i++,a=n.children[i],r=!1):a=null:(l.push(a),h.push(i),i=0,n=a,a=a.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},n.prototype._build=function(t,e,i,n){var r,o=i-e+1,s=this._maxEntries;if(o<=s)return a(r=g(t.slice(e,i+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,n-1))),(r=g([])).leaf=!1,r.height=n;var l=Math.ceil(o/s),h=l*Math.ceil(Math.sqrt(s));m(t,e,i,h,this.compareMinX);for(var u=e;u<=i;u+=h){var c=Math.min(u+h-1,i);m(t,u,c,l,this.compareMinY);for(var p=u;p<=c;p+=l){var d=Math.min(p+l-1,c);r.children.push(this._build(t,p,d,n-1))}}return a(r,this.toBBox),r},n.prototype._chooseSubtree=function(t,e,i,n){for(;n.push(e),!e.leaf&&n.length-1!==i;){for(var r=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var l=e.children[s],h=c(l),u=(p=t,d=l,(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-h);u<o?(o=u,r=h<r?h:r,a=l):u===o&&h<r&&(r=h,a=l)}e=a||e.children[0]}var p,d;return e},n.prototype._insert=function(t,e,i){var n=i?t:this.toBBox(t),r=[],o=this._chooseSubtree(n,this.data,e,r);for(o.children.push(t),l(o,n);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(n,r,e)},n.prototype._split=function(t,e){var i=t[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);var o=this._chooseSplitIndex(i,r,n),s=g(i.children.splice(o,i.children.length-o));s.height=i.height,s.leaf=i.leaf,a(i,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(i,s)},n.prototype._splitRoot=function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,i){for(var n,r,o,a,l,h,u,p=1/0,d=1/0,f=e;f<=i-e;f++){var g=s(t,0,f,this.toBBox),m=s(t,f,i,this.toBBox),v=(r=g,o=m,a=Math.max(r.minX,o.minX),l=Math.max(r.minY,o.minY),h=Math.min(r.maxX,o.maxX),u=Math.min(r.maxY,o.maxY),Math.max(0,h-a)*Math.max(0,u-l)),y=c(g)+c(m);v<p?(p=v,n=f,d=y<d?y:d):v===p&&y<d&&(d=y,n=f)}return n||i-e},n.prototype._chooseSplitAxis=function(t,e,i){var n=t.leaf?this.compareMinX:h,r=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,i,n){t.children.sort(n);for(var r=this.toBBox,o=s(t,0,e,r),a=s(t,i-e,i,r),h=p(o)+p(a),u=e;u<i-e;u++){var c=t.children[u];l(o,t.leaf?r(c):c),h+=p(o)}for(var d=i-e-1;d>=e;d--){var f=t.children[d];l(a,t.leaf?r(f):f),h+=p(a)}return h},n.prototype._adjustParentBBoxes=function(t,e,i){for(var n=i;n>=0;n--)l(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():a(t[e],this.toBBox)},n},"object"==typeof e&&typeof i<"u"?i.exports=a():"function"==typeof t&&t.amd?t(a):(o=o||self).RBush=a()}),ft=(0,r.c)(t=>{"use strict";function e(t,e,i){void 0===i&&(i={});var n={type:"Feature"};return(0===i.id||i.id)&&(n.id=i.id),i.bbox&&(n.bbox=i.bbox),n.properties=e||{},n.geometry=t,n}function i(t,e,i){switch(void 0===i&&(i={}),t){case"Point":return o(e).geometry;case"LineString":return h(e).geometry;case"Polygon":return s(e).geometry;case"MultiPoint":return d(e).geometry;case"MultiLineString":return p(e).geometry;case"MultiPolygon":return f(e).geometry;default:throw new Error(t+" is invalid")}}function o(t,i,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!S(t[0])||!S(t[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:t},i,n)}function a(t,e,i){return void 0===i&&(i={}),c(t.map(function(t){return o(t,e)}),i)}function s(t,i,n){void 0===n&&(n={});for(var r=0,o=t;r<o.length;r++){var a=o[r];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:t},i,n)}function l(t,e,i){return void 0===i&&(i={}),c(t.map(function(t){return s(t,e)}),i)}function h(t,i,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:t},i,n)}function u(t,e,i){return void 0===i&&(i={}),c(t.map(function(t){return h(t,e)}),i)}function c(t,e){void 0===e&&(e={});var i={type:"FeatureCollection"};return e.id&&(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.features=t,i}function p(t,i,n){return void 0===n&&(n={}),e({type:"MultiLineString",coordinates:t},i,n)}function d(t,i,n){return void 0===n&&(n={}),e({type:"MultiPoint",coordinates:t},i,n)}function f(t,i,n){return void 0===n&&(n={}),e({type:"MultiPolygon",coordinates:t},i,n)}function g(t,i,n){return void 0===n&&(n={}),e({type:"GeometryCollection",geometries:t},i,n)}function m(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var i=Math.pow(10,e||0);return Math.round(t*i)/i}function v(e,i){void 0===i&&(i="kilometers");var n=t.factors[i];if(!n)throw new Error(i+" units is invalid");return e*n}function y(e,i){void 0===i&&(i="kilometers");var n=t.factors[i];if(!n)throw new Error(i+" units is invalid");return e/n}function _(t,e){return b(y(t,e))}function x(t){var e=t%360;return e<0&&(e+=360),e}function b(t){return t%(2*Math.PI)*180/Math.PI}function w(t){return t%360*Math.PI/180}function E(t,e,i){if(void 0===e&&(e="kilometers"),void 0===i&&(i="kilometers"),!(t>=0))throw new Error("length must be a positive number");return v(y(t,e),i)}function M(e,i,n){if(void 0===i&&(i="meters"),void 0===n&&(n="kilometers"),!(e>=0))throw new Error("area must be a positive number");var r=t.areaFactors[i];if(!r)throw new Error("invalid original units");var o=t.areaFactors[n];if(!o)throw new Error("invalid final units");return e/r*o}function S(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function T(t){return!!t&&t.constructor===Object}function C(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!S(t))throw new Error("bbox must only contain numbers")})}function A(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:1.0936*t.earthRadius},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1.0936133},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046},(0,r.a)(e,"feature"),t.feature=e,(0,r.a)(i,"geometry"),t.geometry=i,(0,r.a)(o,"point"),t.point=o,(0,r.a)(a,"points"),t.points=a,(0,r.a)(s,"polygon"),t.polygon=s,(0,r.a)(l,"polygons"),t.polygons=l,(0,r.a)(h,"lineString"),t.lineString=h,(0,r.a)(u,"lineStrings"),t.lineStrings=u,(0,r.a)(c,"featureCollection"),t.featureCollection=c,(0,r.a)(p,"multiLineString"),t.multiLineString=p,(0,r.a)(d,"multiPoint"),t.multiPoint=d,(0,r.a)(f,"multiPolygon"),t.multiPolygon=f,(0,r.a)(g,"geometryCollection"),t.geometryCollection=g,(0,r.a)(m,"round"),t.round=m,(0,r.a)(v,"radiansToLength"),t.radiansToLength=v,(0,r.a)(y,"lengthToRadians"),t.lengthToRadians=y,(0,r.a)(_,"lengthToDegrees"),t.lengthToDegrees=_,(0,r.a)(x,"bearingToAzimuth"),t.bearingToAzimuth=x,(0,r.a)(b,"radiansToDegrees"),t.radiansToDegrees=b,(0,r.a)(w,"degreesToRadians"),t.degreesToRadians=w,(0,r.a)(E,"convertLength"),t.convertLength=E,(0,r.a)(M,"convertArea"),t.convertArea=M,(0,r.a)(S,"isNumber"),t.isNumber=S,(0,r.a)(T,"isObject"),t.isObject=T,(0,r.a)(C,"validateBBox"),t.validateBBox=C,(0,r.a)(A,"validateId"),t.validateId=A}),gt=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0});var e=ft();function i(t,e,n){if(null!==t)for(var r,o,a,s,l,h,u,c,p=0,d=0,f=t.type,g="FeatureCollection"===f,m="Feature"===f,v=g?t.features.length:1,y=0;y<v;y++){l=(c=!!(u=g?t.features[y].geometry:m?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var _=0;_<l;_++){var x=0,b=0;if(null!==(s=c?u.geometries[_]:u)){h=s.coordinates;var w=s.type;switch(p=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(h,d,y,x,b))return!1;d++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<h.length;r++){if(!1===e(h[r],d,y,x,b))return!1;d++,"MultiPoint"===w&&x++}"LineString"===w&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<h.length;r++){for(o=0;o<h[r].length-p;o++){if(!1===e(h[r][o],d,y,x,b))return!1;d++}"MultiLineString"===w&&x++,"Polygon"===w&&b++}"Polygon"===w&&x++;break;case"MultiPolygon":for(r=0;r<h.length;r++){for(b=0,o=0;o<h[r].length;o++){for(a=0;a<h[r][o].length-p;a++){if(!1===e(h[r][o][a],d,y,x,b))return!1;d++}b++}x++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===i(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e,n,r){var o=n;return i(t,function(t,i,r,a,s){o=0===i&&void 0===n?t:e(o,t,i,r,a,s)},r),o}function a(t,e){var i;switch(t.type){case"FeatureCollection":for(i=0;i<t.features.length&&!1!==e(t.features[i].properties,i);i++);break;case"Feature":e(t.properties,0)}}function s(t,e,i){var n=i;return a(t,function(t,r){n=0===r&&void 0===i?t:e(n,t,r)}),n}function l(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var i=0;i<t.features.length&&!1!==e(t.features[i],i);i++);}function h(t,e,i){var n=i;return l(t,function(t,r){n=0===r&&void 0===i?t:e(n,t,r)}),n}function u(t){var e=[];return i(t,function(t){e.push(t)}),e}function c(t,e){var i,n,r,o,a,s,l,h,u,c,p=0,d="FeatureCollection"===t.type,f="Feature"===t.type,g=d?t.features.length:1;for(i=0;i<g;i++){for(s=d?t.features[i].geometry:f?t.geometry:t,h=d?t.features[i].properties:f?t.properties:{},u=d?t.features[i].bbox:f?t.bbox:void 0,c=d?t.features[i].id:f?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,r=0;r<a;r++)if(null!==(o=l?s.geometries[r]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,h,u,c))return!1;break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(!1===e(o.geometries[n],p,h,u,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,h,u,c))return!1;p++}}function p(t,e,i){var n=i;return c(t,function(t,r,o,a,s){n=0===r&&void 0===i?t:e(n,t,r,o,a,s)}),n}function d(t,i){c(t,function(t,n,r,o,a){var s,l=null===t?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==i(e.feature(t,r,{bbox:o,id:a}),n,0)&&void 0}switch(l){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var h=0;h<t.coordinates.length;h++){var u={type:s,coordinates:t.coordinates[h]};if(!1===i(e.feature(u,r),n,h))return!1}})}function f(t,e,i){var n=i;return d(t,function(t,r,o){n=0===r&&0===o&&void 0===i?t:e(n,t,r,o)}),n}function g(t,n){d(t,function(t,r,o){var a=0;if(t.geometry){var s=t.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var l,h=0,u=0,c=0;if(!1===i(t,function(i,s,p,d,f){if(void 0===l||r>h||d>u||f>c)return l=i,h=r,u=d,c=f,void(a=0);var g=e.lineString([l,i],t.properties);if(!1===n(g,r,o,f,a))return!1;a++,l=i}))return!1}}})}function m(t,e,i){var n=i,r=!1;return g(t,function(t,o,a,s,l){n=!1===r&&void 0===i?t:e(n,t,o,a,s,l),r=!0}),n}function v(t,i){if(!t)throw new Error("geojson is required");d(t,function(t,n,r){if(null!==t.geometry){var o=t.geometry.type,a=t.geometry.coordinates;switch(o){case"LineString":if(!1===i(t,n,r,0,0))return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(!1===i(e.lineString(a[s],t.properties),n,r,s))return!1}}})}function y(t,e,i){var n=i;return v(t,function(t,r,o,a){n=0===r&&void 0===i?t:e(n,t,r,o,a)}),n}function _(t,i){if(i=i||{},!e.isObject(i))throw new Error("options is invalid");var n,r=i.featureIndex||0,o=i.multiFeatureIndex||0,a=i.geometryIndex||0,s=i.segmentIndex||0,l=i.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),l=l||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var h=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=h.length+s-1),e.lineString([h[s],h[s+1]],l,i);case"Polygon":return a<0&&(a=h.length+a),s<0&&(s=h[a].length+s-1),e.lineString([h[a][s],h[a][s+1]],l,i);case"MultiLineString":return o<0&&(o=h.length+o),s<0&&(s=h[o].length+s-1),e.lineString([h[o][s],h[o][s+1]],l,i);case"MultiPolygon":return o<0&&(o=h.length+o),a<0&&(a=h[o].length+a),s<0&&(s=h[o][a].length-s-1),e.lineString([h[o][a][s],h[o][a][s+1]],l,i)}throw new Error("geojson is invalid")}function x(t,i){if(i=i||{},!e.isObject(i))throw new Error("options is invalid");var n,r=i.featureIndex||0,o=i.multiFeatureIndex||0,a=i.geometryIndex||0,s=i.coordIndex||0,l=i.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),l=l||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var h=n.coordinates;switch(n.type){case"Point":return e.point(h,l,i);case"MultiPoint":return o<0&&(o=h.length+o),e.point(h[o],l,i);case"LineString":return s<0&&(s=h.length+s),e.point(h[s],l,i);case"Polygon":return a<0&&(a=h.length+a),s<0&&(s=h[a].length+s),e.point(h[a][s],l,i);case"MultiLineString":return o<0&&(o=h.length+o),s<0&&(s=h[o].length+s),e.point(h[o][s],l,i);case"MultiPolygon":return o<0&&(o=h.length+o),a<0&&(a=h[o].length+a),s<0&&(s=h[o][a].length-s),e.point(h[o][a][s],l,i)}throw new Error("geojson is invalid")}(0,r.a)(i,"coordEach"),(0,r.a)(o,"coordReduce"),(0,r.a)(a,"propEach"),(0,r.a)(s,"propReduce"),(0,r.a)(l,"featureEach"),(0,r.a)(h,"featureReduce"),(0,r.a)(u,"coordAll"),(0,r.a)(c,"geomEach"),(0,r.a)(p,"geomReduce"),(0,r.a)(d,"flattenEach"),(0,r.a)(f,"flattenReduce"),(0,r.a)(g,"segmentEach"),(0,r.a)(m,"segmentReduce"),(0,r.a)(v,"lineEach"),(0,r.a)(y,"lineReduce"),(0,r.a)(_,"findSegment"),(0,r.a)(x,"findPoint"),t.coordAll=u,t.coordEach=i,t.coordReduce=o,t.featureEach=l,t.featureReduce=h,t.findPoint=x,t.findSegment=_,t.flattenEach=d,t.flattenReduce=f,t.geomEach=c,t.geomReduce=p,t.lineEach=v,t.lineReduce=y,t.propEach=a,t.propReduce=s,t.segmentEach=g,t.segmentReduce=m}),mt=(0,r.c)(t=>{"use strict";(0,n.a)(),Object.defineProperty(t,"__esModule",{value:!0});var e=gt();function i(t){var i=[1/0,1/0,-1/0,-1/0];return e.coordEach(t,function(t){i[0]>t[0]&&(i[0]=t[0]),i[1]>t[1]&&(i[1]=t[1]),i[2]<t[0]&&(i[2]=t[0]),i[3]<t[1]&&(i[3]=t[1])}),i}(0,r.a)(i,"bbox"),i.default=i,t.default=i}),vt=(0,r.c)((t,e)=>{(0,n.a)();var i=dt(),o=ft(),a=gt(),s=mt().default,l=a.featureEach,h=(a.coordEach,o.polygon,o.featureCollection);function u(t){var e=new i(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:s(t),i.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:s(t),e.push(t)}):l(t,function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:s(t),e.push(t)}),i.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:s(t),i.prototype.remove.call(this,t,e)},e.clear=function(){return i.prototype.clear.call(this)},e.search=function(t){var e=i.prototype.search.call(this,this.toBBox(t));return h(e)},e.collides=function(t){return i.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=i.prototype.all.call(this);return h(t)},e.toJSON=function(){return i.prototype.toJSON.call(this)},e.fromJSON=function(t){return i.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=s(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=s(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}(0,r.a)(u,"geojsonRbush"),e.exports=u,e.exports.default=u}),yt=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=Object.prototype.toString;e.exports=(0,r.a)(function(t){var e=i.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===i.call(t.callee)),n},"isArguments")}),_t=(0,r.c)((t,e)=>{"use strict";var i,o,a,s,l,h,u,c,p,d,f,g;(0,n.a)(),Object.keys||(o=Object.prototype.hasOwnProperty,a=Object.prototype.toString,s=yt(),l=Object.prototype.propertyIsEnumerable,h=!l.call({toString:null},"toString"),u=l.call(function(){},"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=(0,r.a)(function(t){var e=t.constructor;return e&&e.prototype===t},"equalsConstructorPrototype"),d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if(typeof window>"u")return!1;for(var t in window)try{if(!d["$"+t]&&o.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{p(window[t])}catch{return!0}}catch{return!0}return!1}(),g=(0,r.a)(function(t){if(typeof window>"u"||!f)return p(t);try{return p(t)}catch{return!1}},"equalsConstructorPrototypeIfNotBuggy"),i=(0,r.a)(function(t){var e=null!==t&&"object"==typeof t,i="[object Function]"===a.call(t),n=s(t),r=e&&"[object String]"===a.call(t),l=[];if(!e&&!i&&!n)throw new TypeError("Object.keys called on a non-object");var p=u&&i;if(r&&t.length>0&&!o.call(t,0))for(var d=0;d<t.length;++d)l.push(String(d));if(n&&t.length>0)for(var f=0;f<t.length;++f)l.push(String(f));else for(var m in t)(!p||"prototype"!==m)&&o.call(t,m)&&l.push(String(m));if(h)for(var v=g(t),y=0;y<c.length;++y)(!v||"constructor"!==c[y])&&o.call(t,c[y])&&l.push(c[y]);return l},"keys")),e.exports=i}),xt=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=Array.prototype.slice,o=yt(),a=Object.keys,s=a?(0,r.a)(function(t){return a(t)},"keys"):_t(),l=Object.keys;s.shim=(0,r.a)(function(){Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=(0,r.a)(function(t){return o(t)?l(i.call(t)):l(t)},"keys")):Object.keys=s;return Object.keys||s},"shimObjectKeys"),e.exports=s}),bt=(0,r.c)((t,e)=>{"use strict";(0,n.a)(),e.exports=(0,r.a)(function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),i=Object(e);if("string"==typeof e||"[object Symbol]"!==Object.prototype.toString.call(e)||"[object Symbol]"!==Object.prototype.toString.call(i))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var r=Object.getOwnPropertyDescriptor(t,e);if(42!==r.value||!0!==r.enumerable)return!1}return!0},"hasSymbols")}),wt=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=bt();e.exports=(0,r.a)(function(){return i()&&!!Symbol.toStringTag},"hasToStringTagShams")}),Et=(0,r.c)((t,e)=>{"use strict";(0,n.a)(),e.exports=(0,r.a)(function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),i=Object(e);if("string"==typeof e||"[object Symbol]"!==Object.prototype.toString.call(e)||"[object Symbol]"!==Object.prototype.toString.call(i))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var r=Object.getOwnPropertyDescriptor(t,e);if(42!==r.value||!0!==r.enumerable)return!1}return!0},"hasSymbols")}),Mt=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=typeof Symbol<"u"&&Symbol,o=Et();e.exports=(0,r.a)(function(){return"function"==typeof i&&"function"==typeof Symbol&&"symbol"==typeof i("foo")&&"symbol"==typeof Symbol("bar")&&o()},"hasNativeSymbols")}),St=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=Array.prototype.slice,o=Object.prototype.toString;e.exports=(0,r.a)(function(t){var e=this;if("function"!=typeof e||"[object Function]"!==o.call(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var n,a=i.call(arguments,1),s=(0,r.a)(function(){if(this instanceof n){var r=e.apply(this,a.concat(i.call(arguments)));return Object(r)===r?r:this}return e.apply(t,a.concat(i.call(arguments)))},"binder"),l=Math.max(0,e.length-a.length),h=[],u=0;u<l;u++)h.push("$"+u);if(n=Function("binder","return function ("+h.join(",")+"){ return binder.apply(this,arguments); }")(s),e.prototype){var c=(0,r.a)(function(){},"Empty");c.prototype=e.prototype,n.prototype=new c,c.prototype=null}return n},"bind")}),Tt=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=St();e.exports=Function.prototype.bind||i}),Ct=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=Tt();e.exports=i.call(Function.call,Object.prototype.hasOwnProperty)}),At=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i,o=SyntaxError,a=Function,s=TypeError,l=(0,r.a)(function(t){try{return a('"use strict"; return ('+t+").constructor;")()}catch{}},"getEvalledConstructor"),h=Object.getOwnPropertyDescriptor;if(h)try{h({},"")}catch{h=null}var u=(0,r.a)(function(){throw new s},"throwTypeError"),c=h?function(){try{return u}catch{try{return h(arguments,"callee").get}catch{return u}}}():u,p=Mt()(),d=Object.getPrototypeOf||function(t){return t.__proto__},f={},g=typeof Uint8Array>"u"?i:d(Uint8Array),m={"%AggregateError%":typeof AggregateError>"u"?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?i:ArrayBuffer,"%ArrayIteratorPrototype%":p?d([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":typeof Atomics>"u"?i:Atomics,"%BigInt%":typeof BigInt>"u"?i:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?i:Float32Array,"%Float64Array%":typeof Float64Array>"u"?i:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?i:FinalizationRegistry,"%Function%":a,"%GeneratorFunction%":f,"%Int8Array%":typeof Int8Array>"u"?i:Int8Array,"%Int16Array%":typeof Int16Array>"u"?i:Int16Array,"%Int32Array%":typeof Int32Array>"u"?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":p?d(d([][Symbol.iterator]())):i,"%JSON%":"object"==typeof JSON?JSON:i,"%Map%":typeof Map>"u"?i:Map,"%MapIteratorPrototype%":typeof Map>"u"||!p?i:d((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?i:Promise,"%Proxy%":typeof Proxy>"u"?i:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?i:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?i:Set,"%SetIteratorPrototype%":typeof Set>"u"||!p?i:d((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":p?d(""[Symbol.iterator]()):i,"%Symbol%":p?Symbol:i,"%SyntaxError%":o,"%ThrowTypeError%":c,"%TypedArray%":g,"%TypeError%":s,"%Uint8Array%":typeof Uint8Array>"u"?i:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?i:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?i:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?i:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?i:WeakMap,"%WeakRef%":typeof WeakRef>"u"?i:WeakRef,"%WeakSet%":typeof WeakSet>"u"?i:WeakSet},v=(0,r.a)(function t(e){var i;if("%AsyncFunction%"===e)i=l("async function () {}");else if("%GeneratorFunction%"===e)i=l("function* () {}");else if("%AsyncGeneratorFunction%"===e)i=l("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(i=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var r=t("%AsyncGenerator%");r&&(i=d(r.prototype))}return m[e]=i,i},"doEval"),y={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},_=Tt(),x=Ct(),b=_.call(Function.call,Array.prototype.concat),w=_.call(Function.apply,Array.prototype.splice),E=_.call(Function.call,String.prototype.replace),M=_.call(Function.call,String.prototype.slice),S=_.call(Function.call,RegExp.prototype.exec),T=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,C=/\\(\\)?/g,A=(0,r.a)(function(t){var e=M(t,0,1),i=M(t,-1);if("%"===e&&"%"!==i)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===i&&"%"!==e)throw new o("invalid intrinsic syntax, expected opening `%`");var n=[];return E(t,T,function(t,e,i,r){n[n.length]=i?E(r,C,"$1"):e||t}),n},"stringToPath"),P=(0,r.a)(function(t,e){var i,n=t;if(x(y,n)&&(n="%"+(i=y[n])[0]+"%"),x(m,n)){var r=m[n];if(r===f&&(r=v(n)),typeof r>"u"&&!e)throw new s("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:r}}throw new o("intrinsic "+t+" does not exist!")},"getBaseIntrinsic");e.exports=(0,r.a)(function(t,e){if("string"!=typeof t||0===t.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new s('"allowMissing" argument must be a boolean');if(null===S(/^%?[^%]*%?$/g,t))throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=A(t),n=i.length>0?i[0]:"",r=P("%"+n+"%",e),a=r.name,l=r.value,u=!1,c=r.alias;c&&(n=c[0],w(i,b([0,1],c)));for(var p=1,d=!0;p<i.length;p+=1){var f=i[p],g=M(f,0,1),v=M(f,-1);if(('"'===g||"'"===g||"`"===g||'"'===v||"'"===v||"`"===v)&&g!==v)throw new o("property names with quotes must have matching quotes");if(("constructor"===f||!d)&&(u=!0),x(m,a="%"+(n+="."+f)+"%"))l=m[a];else if(null!=l){if(!(f in l)){if(!e)throw new s("base intrinsic for "+t+" exists, but the property is not available.");return}if(h&&p+1>=i.length){var y=h(l,f);l=(d=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:l[f]}else d=x(l,f),l=l[f];d&&!u&&(m[a]=l)}}return l},"GetIntrinsic")}),Pt=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=Tt(),o=At(),a=o("%Function.prototype.apply%"),s=o("%Function.prototype.call%"),l=o("%Reflect.apply%",!0)||i.call(s,a),h=o("%Object.getOwnPropertyDescriptor%",!0),u=o("%Object.defineProperty%",!0),c=o("%Math.max%");if(u)try{u({},"a",{value:1})}catch{u=null}e.exports=(0,r.a)(function(t){var e=l(i,s,arguments);h&&u&&(h(e,"length").configurable&&u(e,"length",{value:1+c(0,t.length-(arguments.length-1))}));return e},"callBind");var p=(0,r.a)(function(){return l(i,a,arguments)},"applyBind");u?u(e.exports,"apply",{value:p}):e.exports.apply=p}),It=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=At(),o=Pt(),a=o(i("String.prototype.indexOf"));e.exports=(0,r.a)(function(t,e){var n=i(t,!!e);return"function"==typeof n&&a(t,".prototype.")>-1?o(n):n},"callBoundIntrinsic")}),Lt=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=wt()(),o=It()("Object.prototype.toString"),a=(0,r.a)(function(t){return!(i&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===o(t)},"isArguments"),s=(0,r.a)(function(t){return!!a(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==o(t)&&"[object Function]"===o(t.callee)},"isArguments"),l=function(){return a(arguments)}();a.isLegacyArguments=s,e.exports=l?a:s}),Ot=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=xt(),o="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),a=Object.prototype.toString,s=Array.prototype.concat,l=Object.defineProperty,h=(0,r.a)(function(t){return"function"==typeof t&&"[object Function]"===a.call(t)},"isFunction"),u=(0,r.a)(function(){var t={};try{for(var e in l(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch{return!1}},"arePropertyDescriptorsSupported"),c=l&&u(),p=(0,r.a)(function(t,e,i,n){e in t&&(!h(n)||!n())||(c?l(t,e,{configurable:!0,enumerable:!1,value:i,writable:!0}):t[e]=i)},"defineProperty"),d=(0,r.a)(function(t,e){var n=arguments.length>2?arguments[2]:{},r=i(e);o&&(r=s.call(r,Object.getOwnPropertySymbols(e)));for(var a=0;a<r.length;a+=1)p(t,r[a],e[r[a]],n[r[a]])},"defineProperties");d.supportsDescriptors=!!c,e.exports=d}),Nt=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=(0,r.a)(function(t){return t!=t},"numberIsNaN");e.exports=(0,r.a)(function(t,e){return 0===t&&0===e?1/t==1/e:!!(t===e||i(t)&&i(e))},"is")}),qt=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=Nt();e.exports=(0,r.a)(function(){return"function"==typeof Object.is?Object.is:i},"getPolyfill")}),Rt=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=qt(),o=Ot();e.exports=(0,r.a)(function(){var t=i();return o(Object,{is:t},{is:(0,r.a)(function(){return Object.is!==t},"testObjectIs")}),t},"shimObjectIs")}),Dt=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=Ot(),r=Pt(),o=Nt(),a=qt(),s=Rt(),l=r(a(),Object);i(l,{getPolyfill:a,implementation:o,shim:s}),e.exports=l}),kt=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i,o,a,s,l=It(),h=wt()();h&&(i=l("Object.prototype.hasOwnProperty"),o=l("RegExp.prototype.exec"),a={},u=(0,r.a)(function(){throw a},"throwRegexMarker"),s={toString:u,valueOf:u},"symbol"==typeof Symbol.toPrimitive&&(s[Symbol.toPrimitive]=u));var u,c=l("Object.prototype.toString"),p=Object.getOwnPropertyDescriptor;e.exports=(0,r.a)(h?function(t){if(!t||"object"!=typeof t)return!1;var e=p(t,"lastIndex");if(!e||!i(e,"value"))return!1;try{o(t,s)}catch(t){return t===a}}:function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===c(t)},"isRegex")}),Bt=(0,r.c)((t,e)=>{"use strict";(0,n.a)(),e.exports=(0,r.a)(function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),i=Object(e);if("string"==typeof e||"[object Symbol]"!==Object.prototype.toString.call(e)||"[object Symbol]"!==Object.prototype.toString.call(i))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var r=Object.getOwnPropertyDescriptor(t,e);if(42!==r.value||!0!==r.enumerable)return!1}return!0},"hasSymbols")}),Ft=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=typeof Symbol<"u"&&Symbol,o=Bt();e.exports=(0,r.a)(function(){return"function"==typeof i&&"function"==typeof Symbol&&"symbol"==typeof i("foo")&&"symbol"==typeof Symbol("bar")&&o()},"hasNativeSymbols")}),Ut=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i,o=SyntaxError,a=Function,s=TypeError,l=(0,r.a)(function(t){try{return a('"use strict"; return ('+t+").constructor;")()}catch{}},"getEvalledConstructor"),h=Object.getOwnPropertyDescriptor;if(h)try{h({},"")}catch{h=null}var u=(0,r.a)(function(){throw new s},"throwTypeError"),c=h?function(){try{return u}catch{try{return h(arguments,"callee").get}catch{return u}}}():u,p=Ft()(),d=Object.getPrototypeOf||function(t){return t.__proto__},f={},g=typeof Uint8Array>"u"?i:d(Uint8Array),m={"%AggregateError%":typeof AggregateError>"u"?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?i:ArrayBuffer,"%ArrayIteratorPrototype%":p?d([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":typeof Atomics>"u"?i:Atomics,"%BigInt%":typeof BigInt>"u"?i:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?i:Float32Array,"%Float64Array%":typeof Float64Array>"u"?i:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?i:FinalizationRegistry,"%Function%":a,"%GeneratorFunction%":f,"%Int8Array%":typeof Int8Array>"u"?i:Int8Array,"%Int16Array%":typeof Int16Array>"u"?i:Int16Array,"%Int32Array%":typeof Int32Array>"u"?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":p?d(d([][Symbol.iterator]())):i,"%JSON%":"object"==typeof JSON?JSON:i,"%Map%":typeof Map>"u"?i:Map,"%MapIteratorPrototype%":typeof Map>"u"||!p?i:d((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?i:Promise,"%Proxy%":typeof Proxy>"u"?i:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?i:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?i:Set,"%SetIteratorPrototype%":typeof Set>"u"||!p?i:d((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":p?d(""[Symbol.iterator]()):i,"%Symbol%":p?Symbol:i,"%SyntaxError%":o,"%ThrowTypeError%":c,"%TypedArray%":g,"%TypeError%":s,"%Uint8Array%":typeof Uint8Array>"u"?i:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?i:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?i:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?i:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?i:WeakMap,"%WeakRef%":typeof WeakRef>"u"?i:WeakRef,"%WeakSet%":typeof WeakSet>"u"?i:WeakSet},v=(0,r.a)(function t(e){var i;if("%AsyncFunction%"===e)i=l("async function () {}");else if("%GeneratorFunction%"===e)i=l("function* () {}");else if("%AsyncGeneratorFunction%"===e)i=l("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(i=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var r=t("%AsyncGenerator%");r&&(i=d(r.prototype))}return m[e]=i,i},"doEval"),y={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},_=Tt(),x=Ct(),b=_.call(Function.call,Array.prototype.concat),w=_.call(Function.apply,Array.prototype.splice),E=_.call(Function.call,String.prototype.replace),M=_.call(Function.call,String.prototype.slice),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,T=/\\(\\)?/g,C=(0,r.a)(function(t){var e=M(t,0,1),i=M(t,-1);if("%"===e&&"%"!==i)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===i&&"%"!==e)throw new o("invalid intrinsic syntax, expected opening `%`");var n=[];return E(t,S,function(t,e,i,r){n[n.length]=i?E(r,T,"$1"):e||t}),n},"stringToPath"),A=(0,r.a)(function(t,e){var i,n=t;if(x(y,n)&&(n="%"+(i=y[n])[0]+"%"),x(m,n)){var r=m[n];if(r===f&&(r=v(n)),typeof r>"u"&&!e)throw new s("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:r}}throw new o("intrinsic "+t+" does not exist!")},"getBaseIntrinsic");e.exports=(0,r.a)(function(t,e){if("string"!=typeof t||0===t.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new s('"allowMissing" argument must be a boolean');var i=C(t),n=i.length>0?i[0]:"",r=A("%"+n+"%",e),a=r.name,l=r.value,u=!1,c=r.alias;c&&(n=c[0],w(i,b([0,1],c)));for(var p=1,d=!0;p<i.length;p+=1){var f=i[p],g=M(f,0,1),v=M(f,-1);if(('"'===g||"'"===g||"`"===g||'"'===v||"'"===v||"`"===v)&&g!==v)throw new o("property names with quotes must have matching quotes");if(("constructor"===f||!d)&&(u=!0),x(m,a="%"+(n+="."+f)+"%"))l=m[a];else if(null!=l){if(!(f in l)){if(!e)throw new s("base intrinsic for "+t+" exists, but the property is not available.");return}if(h&&p+1>=i.length){var y=h(l,f);l=(d=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:l[f]}else d=x(l,f),l=l[f];d&&!u&&(m[a]=l)}}return l},"GetIntrinsic")}),zt=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=Ut()("%Object.defineProperty%",!0),o=(0,r.a)(function(){if(i)try{return i({},"a",{value:1}),!0}catch{return!1}return!1},"hasPropertyDescriptors");o.hasArrayLengthDefineBug=(0,r.a)(function(){if(!o())return null;try{return 1!==i([],"length",{value:1}).length}catch{return!0}},"hasArrayLengthDefineBug"),e.exports=o}),Vt=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=xt(),o="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),a=Object.prototype.toString,s=Array.prototype.concat,l=Object.defineProperty,h=(0,r.a)(function(t){return"function"==typeof t&&"[object Function]"===a.call(t)},"isFunction"),u=zt()(),c=l&&u,p=(0,r.a)(function(t,e,i,n){if(e in t)if(!0===n){if(t[e]===i)return}else if(!h(n)||!n())return;c?l(t,e,{configurable:!0,enumerable:!1,value:i,writable:!0}):t[e]=i},"defineProperty"),d=(0,r.a)(function(t,e){var n=arguments.length>2?arguments[2]:{},r=i(e);o&&(r=s.call(r,Object.getOwnPropertySymbols(e)));for(var a=0;a<r.length;a+=1)p(t,r[a],e[r[a]],n[r[a]])},"defineProperties");d.supportsDescriptors=!!c,e.exports=d}),jt=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=(0,r.a)(function(){return"string"==typeof(0,r.a)(function(){},"f").name},"functionsHaveNames"),o=Object.getOwnPropertyDescriptor;if(o)try{o([],"length")}catch{o=null}i.functionsHaveConfigurableNames=(0,r.a)(function(){if(!i()||!o)return!1;var t=o(function(){},"name");return!!t&&!!t.configurable},"functionsHaveConfigurableNames");var a=Function.prototype.bind;i.boundFunctionsHaveNames=(0,r.a)(function(){return i()&&"function"==typeof a&&""!==(0,r.a)(function(){},"f").bind().name},"boundFunctionsHaveNames"),e.exports=i}),Gt=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=jt().functionsHaveConfigurableNames(),o=Object,a=TypeError;e.exports=(0,r.a)(function(){if(null!=this&&this!==o(this))throw new a("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t},"flags"),i&&Object.defineProperty&&Object.defineProperty(e.exports,"name",{value:"get flags"})}),Ht=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=Gt(),o=Vt().supportsDescriptors,a=Object.getOwnPropertyDescriptor;e.exports=(0,r.a)(function(){if(o&&"gim"===/a/gim.flags){var t=a(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var e="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){e+="d"}}),Object.defineProperty(n,"sticky",{get:function(){e+="y"}}),"dy"===e)return t.get}}return i},"getPolyfill")}),Wt=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=Vt().supportsDescriptors,o=Ht(),a=Object.getOwnPropertyDescriptor,s=Object.defineProperty,l=TypeError,h=Object.getPrototypeOf,u=/a/;e.exports=(0,r.a)(function(){if(!i||!h)throw new l("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=o(),e=h(u),n=a(e,"flags");return(!n||n.get!==t)&&s(e,"flags",{configurable:!0,enumerable:!1,get:t}),t},"shimFlags")}),Xt=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=Vt(),r=Pt(),o=Gt(),a=Ht(),s=Wt(),l=r(a());i(l,{getPolyfill:a,implementation:o,shim:s}),e.exports=l}),Yt=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=Date.prototype.getDay,o=(0,r.a)(function(t){try{return i.call(t),!0}catch{return!1}},"tryDateGetDayCall"),a=Object.prototype.toString,s="function"==typeof Symbol&&!!Symbol.toStringTag;e.exports=(0,r.a)(function(t){return"object"==typeof t&&null!==t&&(s?o(t):"[object Date]"===a.call(t))},"isDateObject")}),Zt=(0,r.c)((t,e)=>{(0,n.a)();var i=xt(),o=Lt(),a=Dt(),s=kt(),l=Xt(),h=Yt(),u=Date.prototype.getTime;function c(t,e,i){var n=i||{};return!!(n.strict?a(t,e):t===e)||(!t||!e||"object"!=typeof t&&"object"!=typeof e?n.strict?a(t,e):t==e:f(t,e,n))}function p(t){return null==t}function d(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}function f(t,e,n){var r,a;if(typeof t!=typeof e||p(t)||p(e)||t.prototype!==e.prototype||o(t)!==o(e))return!1;var f=s(t),g=s(e);if(f!==g)return!1;if(f||g)return t.source===e.source&&l(t)===l(e);if(h(t)&&h(e))return u.call(t)===u.call(e);var m=d(t),v=d(e);if(m!==v)return!1;if(m||v){if(t.length!==e.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}if(typeof t!=typeof e)return!1;try{var y=i(t),_=i(e)}catch{return!1}if(y.length!==_.length)return!1;for(y.sort(),_.sort(),r=y.length-1;r>=0;r--)if(y[r]!=_[r])return!1;for(r=y.length-1;r>=0;r--)if(!c(t[a=y[r]],e[a],n))return!1;return!0}(0,r.a)(c,"deepEqual"),(0,r.a)(p,"isUndefinedOrNull"),(0,r.a)(d,"isBuffer"),(0,r.a)(f,"objEquiv"),e.exports=c}),Jt=(0,r.c)((t,e)=>{(0,n.a)();var i=Zt(),o=(0,r.a)(function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:l},"Equality");function a(t){return t.coordinates.map(function(e){return{type:t.type.replace("Multi",""),coordinates:e}})}function s(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function l(t,e){return i(t,e,{strict:!0})}o.prototype.compare=function(t,e){if(t.type!==e.type||!s(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var i=this,n=a(t),r=a(e);return n.every(function(t){return this.some(function(e){return i.compare(t,e)})},r)}}return!1},(0,r.a)(a,"explode"),(0,r.a)(s,"sameLength"),o.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(t[i].toFixed(this.precision)!==e[i].toFixed(this.precision))return!1;return!0},o.prototype.compareLine=function(t,e,i,n){if(!s(t,e))return!1;var r=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!n||this.compareCoord(r[0],o[0])||(o=this.fixStartIndex(o,r))){var a=this.compareCoord(r[i],o[i]);return this.direction||a?this.comparePath(r,o):!!this.compareCoord(r[i],o[o.length-(1+i)])&&this.comparePath(r.slice().reverse(),o)}},o.prototype.fixStartIndex=function(t,e){for(var i,n=-1,r=0;r<t.length;r++)if(this.compareCoord(t[r],e[0])){n=r;break}return n>=0&&(i=[].concat(t.slice(n,t.length),t.slice(1,n+1))),i},o.prototype.comparePath=function(t,e){var i=this;return t.every(function(t,e){return i.compareCoord(t,this[e])},e)},o.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var i=t.coordinates.slice(1,t.coordinates.length),n=e.coordinates.slice(1,e.coordinates.length),r=this;return i.every(function(t){return this.some(function(e){return r.compareLine(t,e,1,!0)})},n)}return!1},o.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},o.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},o.prototype.removePseudo=function(t){return t},(0,r.a)(l,"objectComparator"),e.exports=o}),Kt=(0,r.c)((t,e)=>{function i(t,e,i,n){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,i,n)}(0,n.a)(),(0,r.a)(i,"DBSCAN"),i.prototype.run=function(t,e,i,n){this._init(t,e,i,n);for(var r=0;r<this._datasetLength;r++)if(1!==this._visited[r]){this._visited[r]=1;var o=this._regionQuery(r);if(o.length<this.minPts)this.noise.push(r);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(r,a),this._expandCluster(a,o)}}return this.clusters},i.prototype._init=function(t,e,i,n){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),i&&(this.minPts=i),n&&(this.distance=n)},i.prototype._expandCluster=function(t,e){for(var i=0;i<e.length;i++){var n=e[i];if(1!==this._visited[n]){this._visited[n]=1;var r=this._regionQuery(n);r.length>=this.minPts&&(e=this._mergeArrays(e,r))}1!==this._assigned[n]&&this._addToCluster(n,t)}},i.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},i.prototype._regionQuery=function(t){for(var e=[],i=0;i<this._datasetLength;i++)this.distance(this.dataset[t],this.dataset[i])<this.epsilon&&e.push(i);return e},i.prototype._mergeArrays=function(t,e){for(var i=e.length,n=0;n<i;n++){var r=e[n];t.indexOf(r)<0&&t.push(r)}return t},i.prototype._euclideanDistance=function(t,e){for(var i=0,n=Math.min(t.length,e.length);n--;)i+=(t[n]-e[n])*(t[n]-e[n]);return Math.sqrt(i)},typeof e<"u"&&e.exports&&(e.exports=i)}),Qt=(0,r.c)((t,e)=>{function i(t,e,i){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,i)}(0,n.a)(),(0,r.a)(i,"KMEANS"),i.prototype.init=function(t,e,i){this.assignments=[],this.centroids=[],typeof t<"u"&&(this.dataset=t),typeof e<"u"&&(this.k=e),typeof i<"u"&&(this.distance=i)},i.prototype.run=function(t,e){this.init(t,e);for(var i=this.dataset.length,n=0;n<this.k;n++)this.centroids[n]=this.randomCentroid();for(var r=!0;r;){r=this.assign();for(var o=0;o<this.k;o++){for(var a=new Array(u),s=0,l=0;l<u;l++)a[l]=0;for(var h=0;h<i;h++){var u=this.dataset[h].length;if(o===this.assignments[h]){for(l=0;l<u;l++)a[l]+=this.dataset[h][l];s++}}if(s>0){for(l=0;l<u;l++)a[l]/=s;this.centroids[o]=a}else this.centroids[o]=this.randomCentroid(),r=!0}}return this.getClusters()},i.prototype.randomCentroid=function(){var t,e,i=this.dataset.length-1;do{e=Math.round(Math.random()*i),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},i.prototype.assign=function(){for(var t,e=!1,i=this.dataset.length,n=0;n<i;n++)(t=this.argmin(this.dataset[n],this.centroids,this.distance))!=this.assignments[n]&&(this.assignments[n]=t,e=!0);return e},i.prototype.getClusters=function(){for(var t,e=new Array(this.k),i=0;i<this.assignments.length;i++)typeof e[t=this.assignments[i]]>"u"&&(e[t]=[]),e[t].push(i);return e},i.prototype.argmin=function(t,e,i){for(var n,r=Number.MAX_VALUE,o=0,a=e.length,s=0;s<a;s++)(n=i(t,e[s]))<r&&(r=n,o=s);return o},i.prototype.distance=function(t,e){for(var i=0,n=Math.min(t.length,e.length);n--;){var r=t[n]-e[n];i+=r*r}return Math.sqrt(i)},typeof e<"u"&&e.exports&&(e.exports=i)}),$t=(0,r.c)((t,e)=>{function i(t,e,i){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,i)}(0,n.a)(),(0,r.a)(i,"PriorityQueue"),i.prototype.insert=function(t,e){for(var i=this._queue.length,n=i;n--;){var r=this._priorities[n];"desc"===this._sorting?e>r&&(i=n):e<r&&(i=n)}this._insertAt(t,e,i)},i.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},i.prototype.forEach=function(t){this._queue.forEach(t)},i.prototype.getElements=function(){return this._queue},i.prototype.getElementPriority=function(t){return this._priorities[t]},i.prototype.getPriorities=function(){return this._priorities},i.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,i=this._queue.length;e<i;e++)t.push([this._queue[e],this._priorities[e]]);return t},i.prototype._init=function(t,e,i){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var n=0;n<t.length;n++)this.insert(t[n],e[n])}i&&(this._sorting=i)},i.prototype._insertAt=function(t,e,i){this._queue.length===i?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(i,0,t),this._priorities.splice(i,0,e))},typeof e<"u"&&e.exports&&(e.exports=i)}),te=(0,r.c)((t,e)=>{var i;function o(t,e,i,n){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,i,n)}(0,n.a)(),typeof e<"u"&&e.exports&&(i=$t()),(0,r.a)(o,"OPTICS"),o.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var o=0,a=this.dataset.length;o<a;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var s=this.clusters.length-1;this._orderedList.push(o);var l=new i(null,null,"asc"),h=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,h,l),this._expandCluster(s,l))}return this.clusters},o.prototype.getReachabilityPlot=function(){for(var t=[],e=0,i=this._orderedList.length;e<i;e++){var n=this._orderedList[e],r=this._reachability[n];t.push([n,r])}return t},o.prototype._init=function(t,e,i,n){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),i&&(this.minPts=i),n&&(this.distance=n)},o.prototype._updateQueue=function(t,e,i){var n=this;this._coreDistance=this._distanceToCore(t),e.forEach(function(e){if(void 0===n._processed[e]){var r=n.distance(n.dataset[t],n.dataset[e]),o=Math.max(n._coreDistance,r);void 0===n._reachability[e]?(n._reachability[e]=o,i.insert(e,o)):o<n._reachability[e]&&(n._reachability[e]=o,i.remove(e),i.insert(e,o))}})},o.prototype._expandCluster=function(t,e){for(var i=e.getElements(),n=0,r=i.length;n<r;n++){var o=i[n];if(void 0===this._processed[o]){var a=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,a,e),this._expandCluster(t,e))}}},o.prototype._distanceToCore=function(t){for(var e=this.epsilon,i=0;i<e;i++)if(this._regionQuery(t,i).length>=this.minPts)return i},o.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var i=[],n=0,r=this.dataset.length;n<r;n++)this.distance(this.dataset[t],this.dataset[n])<e&&i.push(n);return i},o.prototype._euclideanDistance=function(t,e){for(var i=0,n=Math.min(t.length,e.length);n--;)i+=(t[n]-e[n])*(t[n]-e[n]);return Math.sqrt(i)},typeof e<"u"&&e.exports&&(e.exports=o)}),ee=(0,r.c)((t,e)=>{(0,n.a)(),typeof e<"u"&&e.exports&&(e.exports={DBSCAN:Kt(),KMEANS:Qt(),OPTICS:te(),PriorityQueue:$t()})}),ie=(0,r.c)((t,e)=>{"use strict";(0,n.a)(),e.exports={eudist:(0,r.a)(function(t,e,i){for(var n=t.length,r=0,o=0;o<n;o++){var a=(t[o]||0)-(e[o]||0);r+=a*a}return i?Math.sqrt(r):r},"eudist"),mandist:(0,r.a)(function(t,e,i){for(var n=t.length,r=0,o=0;o<n;o++)r+=Math.abs((t[o]||0)-(e[o]||0));return i?Math.sqrt(r):r},"mandist"),dist:(0,r.a)(function(t,e,i){var n=Math.abs(t-e);return i?n:n*n},"dist")}}),ne=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=ie(),o=i.eudist,a=i.dist;e.exports={kmrand:(0,r.a)(function(t,e){for(var i={},n=[],r=e<<2,o=t.length,a=t[0].length>0;n.length<e&&r-- >0;){var s=t[Math.floor(Math.random()*o)],l=a?s.join("_"):""+s;i[l]||(i[l]=!0,n.push(s))}if(n.length<e)throw new Error("Error initializating clusters");return n},"kmrand"),kmpp:(0,r.a)(function(t,e){var i=t[0].length?o:a,n=[],r=t.length,s=t[0].length>0,l=t[Math.floor(Math.random()*r)];for(s&&l.join("_"),n.push(l);n.length<e;){for(var h=[],u=n.length,c=0,p=[],d=0;d<r;d++){for(var f=1/0,g=0;g<u;g++){var m=i(t[d],n[g]);m<=f&&(f=m)}h[d]=f}for(var v=0;v<r;v++)c+=h[v];for(var y=0;y<r;y++)p[y]={i:y,v:t[y],pr:h[y]/c,cs:0};p.sort(function(t,e){return t.pr-e.pr}),p[0].cs=p[0].pr;for(var _=1;_<r;_++)p[_].cs=p[_-1].cs+p[_].pr;for(var x=Math.random(),b=0;b<r-1&&p[b++].cs<x;);n.push(p[b-1].v)}return n},"kmpp")}}),re=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i=ie(),o=ne(),a=i.eudist,s=(i.mandist,i.dist,o.kmrand),l=o.kmpp;function h(t,e,i){i=i||[];for(var n=0;n<t;n++)i[n]=e;return i}function u(t,e,i,n){var r=[],o=[],u=[],c=[],p=!1,d=n||1e4,f=t.length,g=t[0].length,m=g>0,v=[];if(i)r="kmrand"==i?s(t,e):"kmpp"==i?l(t,e):i;else for(var y={};r.length<e;){var _=Math.floor(Math.random()*f);y[_]||(y[_]=!0,r.push(t[_]))}do{h(e,0,v);for(var x=0;x<f;x++){for(var b=1/0,w=0,E=0;E<e;E++)(c=m?a(t[x],r[E]):Math.abs(t[x]-r[E]))<=b&&(b=c,w=E);u[x]=w,v[w]++}for(var M=[],S=(o=[],0);S<e;S++)M[S]=m?h(g,0,M[S]):0,o[S]=r[S];if(m){for(var T=0;T<e;T++)r[T]=[];for(var C=0;C<f;C++)for(var A=M[u[C]],P=t[C],I=0;I<g;I++)A[I]+=P[I];p=!0;for(var L=0;L<e;L++){for(var O=r[L],N=M[L],q=o[L],R=v[L],D=0;D<g;D++)O[D]=N[D]/R||0;if(p)for(var k=0;k<g;k++)if(q[k]!=O[k]){p=!1;break}}}else{for(var B=0;B<f;B++)M[u[B]]+=t[B];for(var F=0;F<e;F++)r[F]=M[F]/v[F]||0;p=!0;for(var U=0;U<e;U++)if(o[U]!=r[U]){p=!1;break}}p=p||--d<=0}while(!p);return{it:1e4-d,k:e,idxs:u,centroids:r}}(0,r.a)(h,"init"),(0,r.a)(u,"skmeans"),e.exports=u}),oe=(0,r.c)((e,i)=>{var o,a;(0,n.a)(),o=e,a=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}(0,r.a)(t,"_classCallCheck"),(0,r.a)(e,"_defineProperties"),(0,r.a)(i,"_createClass");var o=function(){function t(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null}return(0,r.a)(t,"Node"),t}();function a(t,e){return t>e?1:t<e?-1:0}function s(t,e,i){for(var n=new o(null,null),r=n,a=n;;){var s=i(t,e.key);if(s<0){if(null===e.left)break;if(i(t,e.left.key)<0){var l=e.left;if(e.left=l.right,l.right=e,null===(e=l).left)break}a.left=e,a=e,e=e.left}else{if(!(s>0))break;if(null===e.right)break;if(i(t,e.right.key)>0&&(l=e.right,e.right=l.left,l.left=e,null===(e=l).right))break;r.right=e,r=e,e=e.right}}return r.right=e.left,a.left=e.right,e.left=n.right,e.right=n.left,e}function l(t,e,i,n){var r=new o(t,e);if(null===i)return r.left=r.right=null,r;var a=n(t,(i=s(t,i,n)).key);return a<0?(r.left=i.left,r.right=i,i.left=null):a>=0&&(r.right=i.right,r.left=i,i.right=null),r}function h(t,e,i){var n=null,r=null;if(e){var o=i((e=s(t,e,i)).key,t);0===o?(n=e.left,r=e.right):o<0?(r=e.right,e.right=null,n=e):(n=e.left,e.left=null,r=e)}return{left:n,right:r}}function u(t,e,i){return null===e?t:(null===t||((e=s(t.key,e,i)).left=t),e)}function c(t,e,i,n,r){if(t){n(e+(i?"└── ":"├── ")+r(t)+"\n");var o=e+(i?"    ":"│   ");t.left&&c(t.left,o,!1,n,r),t.right&&c(t.right,o,!0,n,r)}}(0,r.a)(a,"DEFAULT_COMPARE"),(0,r.a)(s,"splay"),(0,r.a)(l,"insert"),(0,r.a)(h,"split"),(0,r.a)(u,"merge"),(0,r.a)(c,"printRow");var p=function(){function t(t){void 0===t&&(t=a),this._root=null,this._size=0,this._comparator=t}return(0,r.a)(t,"Tree"),t.prototype.insert=function(t,e){return this._size++,this._root=l(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var i=new o(t,e);null===this._root&&(i.left=i.right=null,this._size++,this._root=i);var n=this._comparator,r=s(t,this._root,n),a=n(t,r.key);return 0===a?this._root=r:(a<0?(i.left=r.left,i.right=r,r.left=null):a>0&&(i.right=r.right,i.left=r,r.right=null),this._size++,this._root=i),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,i){var n;return null===e?null:0===i(t,(e=s(t,e,i)).key)?(null===e.left?n=e.right:(n=s(t,e.left,i)).right=e.right,this._size--,n):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=s(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,i=this._comparator;e;){var n=i(t,e.key);if(0===n)return e;e=n<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=s(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,i=this._comparator;e;){var n=i(t,e.key);if(0===n)return!0;e=n<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var i=this._root,n=[],r=!1;!r;)null!==i?(n.push(i),i=i.left):0!==n.length?(i=n.pop(),t.call(e,i),i=i.right):r=!0;return this},t.prototype.range=function(t,e,i,n){for(var r=[],o=this._comparator,a=this._root;0!==r.length||a;)if(a)r.push(a),a=a.left;else{if(o((a=r.pop()).key,e)>0)break;if(o(a.key,t)>=0&&i.call(n,a))return this;a=a.right}return this},t.prototype.keys=function(){var t=[];return this.forEach(function(e){var i=e.key;return t.push(i)}),t},t.prototype.values=function(){var t=[];return this.forEach(function(e){var i=e.data;return t.push(i)}),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,i=!1,n=0,r=[];!i;)if(e)r.push(e),e=e.left;else if(r.length>0){if(e=r.pop(),n===t)return e;n++,e=e.right}else i=!0;return null},t.prototype.next=function(t){var e=this._root,i=null;if(t.right){for(i=t.right;i.left;)i=i.left;return i}for(var n=this._comparator;e;){var r=n(t.key,e.key);if(0===r)break;r<0?(i=e,e=e.left):e=e.right}return i},t.prototype.prev=function(t){var e=this._root,i=null;if(null!==t.left){for(i=t.left;i.right;)i=i.right;return i}for(var n=this._comparator;e;){var r=n(t.key,e.key);if(0===r)break;r<0?e=e.left:(i=e,e=e.right)}return i},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return g(this._root)},t.prototype.load=function(t,e,i){void 0===e&&(e=[]),void 0===i&&(i=!1);var n=t.length,r=this._comparator;if(i&&y(t,e,0,n-1,r),null===this._root)this._root=d(t,e,0,n),this._size=n;else{var o=v(this.toList(),f(t,e),r);n=this._size+n,this._root=m({head:o},0,n)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:(0,r.a)(function(){return this._size},"get"),enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:(0,r.a)(function(){return this._root},"get"),enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=(0,r.a)(function(t){return String(t.key)},"printNode"));var e=[];return c(this._root,"",!0,function(t){return e.push(t)},t),e.join("")},t.prototype.update=function(t,e,i){var n=this._comparator,r=h(t,this._root,n),o=r.left,a=r.right;n(t,e)<0?a=l(e,i,a,n):o=l(e,i,o,n),this._root=u(o,a,n)},t.prototype.split=function(t){return h(t,this._root,this._comparator)},t}();function d(t,e,i,n){var r=n-i;if(r>0){var a=i+Math.floor(r/2),s=t[a],l=e[a],h=new o(s,l);return h.left=d(t,e,i,a),h.right=d(t,e,a+1,n),h}return null}function f(t,e){for(var i=new o(null,null),n=i,r=0;r<t.length;r++)n=n.next=new o(t[r],e[r]);return n.next=null,i.next}function g(t){for(var e=t,i=[],n=!1,r=new o(null,null),a=r;!n;)e?(i.push(e),e=e.left):i.length>0?e=(e=a=a.next=i.pop()).right:n=!0;return a.next=null,r.next}function m(t,e,i){var n=i-e;if(n>0){var r=e+Math.floor(n/2),o=m(t,e,r),a=t.head;return a.left=o,t.head=t.head.next,a.right=m(t,r+1,i),a}return null}function v(t,e,i){for(var n=new o(null,null),r=n,a=t,s=e;null!==a&&null!==s;)i(a.key,s.key)<0?(r.next=a,a=a.next):(r.next=s,s=s.next),r=r.next;return null!==a?r.next=a:null!==s&&(r.next=s),n.next}function y(t,e,i,n,r){if(!(i>=n)){for(var o=t[i+n>>1],a=i-1,s=n+1;;){do{a++}while(r(t[a],o)<0);do{s--}while(r(t[s],o)>0);if(a>=s)break;var l=t[a];t[a]=t[s],t[s]=l,l=e[a],e[a]=e[s],e[s]=l}y(t,e,i,s,r),y(t,e,s+1,n,r)}}(0,r.a)(d,"loadRecursive"),(0,r.a)(f,"createList"),(0,r.a)(g,"toList"),(0,r.a)(m,"sortedListToBST"),(0,r.a)(v,"mergeLists"),(0,r.a)(y,"sort");var _=(0,r.a)(function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},"isInBbox"),x=(0,r.a)(function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var i=t.ll.x<e.ll.x?e.ll.x:t.ll.x,n=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:i,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:n,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},"getBboxOverlap"),b=Number.EPSILON;void 0===b&&(b=Math.pow(2,-52));var w=b*b,E=(0,r.a)(function(t,e){if(-b<t&&t<b&&-b<e&&e<b)return 0;var i=t-e;return i*i<w*t*e?0:t<e?-1:1},"cmp"),M=function(){function e(){t(this,e),this.reset()}return(0,r.a)(e,"PtRounder"),i(e,[{key:"reset",value:(0,r.a)(function(){this.xRounder=new S,this.yRounder=new S},"reset")},{key:"round",value:(0,r.a)(function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}},"round")}]),e}(),S=function(){function e(){t(this,e),this.tree=new p,this.round(0)}return(0,r.a)(e,"CoordRounder"),i(e,[{key:"round",value:(0,r.a)(function(t){var e=this.tree.add(t),i=this.tree.prev(e);if(null!==i&&0===E(e.key,i.key))return this.tree.remove(t),i.key;var n=this.tree.next(e);return null!==n&&0===E(e.key,n.key)?(this.tree.remove(t),n.key):t},"round")}]),e}(),T=new M,C=(0,r.a)(function(t,e){return t.x*e.y-t.y*e.x},"crossProduct"),A=(0,r.a)(function(t,e){return t.x*e.x+t.y*e.y},"dotProduct"),P=(0,r.a)(function(t,e,i){var n={x:e.x-t.x,y:e.y-t.y},r={x:i.x-t.x,y:i.y-t.y},o=C(n,r);return E(o,0)},"compareVectorAngles"),I=(0,r.a)(function(t){return Math.sqrt(A(t,t))},"length"),L=(0,r.a)(function(t,e,i){var n={x:e.x-t.x,y:e.y-t.y},r={x:i.x-t.x,y:i.y-t.y};return C(r,n)/I(r)/I(n)},"sineOfAngle"),O=(0,r.a)(function(t,e,i){var n={x:e.x-t.x,y:e.y-t.y},r={x:i.x-t.x,y:i.y-t.y};return A(r,n)/I(r)/I(n)},"cosineOfAngle"),N=(0,r.a)(function(t,e,i){return 0===e.y?null:{x:t.x+e.x/e.y*(i-t.y),y:i}},"horizontalIntersection"),q=(0,r.a)(function(t,e,i){return 0===e.x?null:{x:i,y:t.y+e.y/e.x*(i-t.x)}},"verticalIntersection"),R=(0,r.a)(function(t,e,i,n){if(0===e.x)return q(i,n,t.x);if(0===n.x)return q(t,e,i.x);if(0===e.y)return N(i,n,t.y);if(0===n.y)return N(t,e,i.y);var r=C(e,n);if(0==r)return null;var o={x:i.x-t.x,y:i.y-t.y},a=C(o,e)/r,s=C(o,n)/r;return{x:(t.x+s*e.x+(i.x+a*n.x))/2,y:(t.y+s*e.y+(i.y+a*n.y))/2}},"intersection"),D=function(){function e(i,n){t(this,e),void 0===i.events?i.events=[this]:i.events.push(this),this.point=i,this.isLeft=n}return i(e,null,[{key:"compare",value:(0,r.a)(function(t,i){var n=e.comparePoints(t.point,i.point);return 0!==n?n:(t.point!==i.point&&t.link(i),t.isLeft!==i.isLeft?t.isLeft?1:-1:B.compare(t.segment,i.segment))},"compare")},{key:"comparePoints",value:(0,r.a)(function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0},"comparePoints")}]),(0,r.a)(e,"SweepEvent"),i(e,[{key:"link",value:(0,r.a)(function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,i=0,n=e.length;i<n;i++){var r=e[i];this.point.events.push(r),r.point=this.point}this.checkForConsuming()},"link")},{key:"checkForConsuming",value:(0,r.a)(function(){for(var t=this.point.events.length,e=0;e<t;e++){var i=this.point.events[e];if(void 0===i.segment.consumedBy)for(var n=e+1;n<t;n++){var r=this.point.events[n];void 0===r.consumedBy&&i.otherSE.point.events===r.otherSE.point.events&&i.segment.consume(r.segment)}}},"checkForConsuming")},{key:"getAvailableLinkedEvents",value:(0,r.a)(function(){for(var t=[],e=0,i=this.point.events.length;e<i;e++){var n=this.point.events[e];n!==this&&!n.segment.ringOut&&n.segment.isInResult()&&t.push(n)}return t},"getAvailableLinkedEvents")},{key:"getLeftmostComparator",value:(0,r.a)(function(t){var e=this,i=new Map,n=(0,r.a)(function(n){var r=n.otherSE;i.set(n,{sine:L(e.point,t.point,r.point),cosine:O(e.point,t.point,r.point)})},"fillCache");return function(t,e){i.has(t)||n(t),i.has(e)||n(e);var r=i.get(t),o=r.sine,a=r.cosine,s=i.get(e),l=s.sine,h=s.cosine;return o>=0&&l>=0?a<h?1:a>h?-1:0:o<0&&l<0?a<h?-1:a>h?1:0:l<o?-1:l>o?1:0}},"getLeftmostComparator")}]),e}(),k=0,B=function(){function e(i,n,r,o){t(this,e),this.id=++k,this.leftSE=i,i.segment=this,i.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=i,this.rings=r,this.windings=o}return i(e,null,[{key:"compare",value:(0,r.a)(function(t,e){var i=t.leftSE.point.x,n=e.leftSE.point.x,r=t.rightSE.point.x,o=e.rightSE.point.x;if(o<i)return 1;if(r<n)return-1;var a=t.leftSE.point.y,s=e.leftSE.point.y,l=t.rightSE.point.y,h=e.rightSE.point.y;if(i<n){if(s<a&&s<l)return 1;if(s>a&&s>l)return-1;var u=t.comparePoint(e.leftSE.point);if(u<0)return 1;if(u>0)return-1;var c=e.comparePoint(t.rightSE.point);return 0!==c?c:-1}if(i>n){if(a<s&&a<h)return-1;if(a>s&&a>h)return 1;var p=e.comparePoint(t.leftSE.point);if(0!==p)return p;var d=t.comparePoint(e.rightSE.point);return d<0?1:d>0?-1:1}if(a<s)return-1;if(a>s)return 1;if(r<o){var f=e.comparePoint(t.rightSE.point);if(0!==f)return f}if(r>o){var g=t.comparePoint(e.rightSE.point);if(g<0)return 1;if(g>0)return-1}if(r!==o){var m=l-a,v=r-i,y=h-s,_=o-n;if(m>v&&y<_)return 1;if(m<v&&y>_)return-1}return r>o?1:r<o||l<h?-1:l>h?1:t.id<e.id?-1:t.id>e.id?1:0},"compare")}]),(0,r.a)(e,"Segment"),i(e,[{key:"replaceRightSE",value:(0,r.a)(function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE},"replaceRightSE")},{key:"bbox",value:(0,r.a)(function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}},"bbox")},{key:"vector",value:(0,r.a)(function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}},"vector")},{key:"isAnEndpoint",value:(0,r.a)(function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y},"isAnEndpoint")},{key:"comparePoint",value:(0,r.a)(function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,i=this.rightSE.point,n=this.vector();if(e.x===i.x)return t.x===e.x?0:t.x<e.x?1:-1;var r=(t.y-e.y)/n.y,o=e.x+r*n.x;if(t.x===o)return 0;var a=(t.x-e.x)/n.x,s=e.y+a*n.y;return t.y===s?0:t.y<s?-1:1},"comparePoint")},{key:"getIntersection",value:(0,r.a)(function(t){var e=this.bbox(),i=t.bbox(),n=x(e,i);if(null===n)return null;var r=this.leftSE.point,o=this.rightSE.point,a=t.leftSE.point,s=t.rightSE.point,l=_(e,a)&&0===this.comparePoint(a),h=_(i,r)&&0===t.comparePoint(r),u=_(e,s)&&0===this.comparePoint(s),c=_(i,o)&&0===t.comparePoint(o);if(h&&l)return c&&!u?o:!c&&u?s:null;if(h)return u&&r.x===s.x&&r.y===s.y?null:r;if(l)return c&&o.x===a.x&&o.y===a.y?null:a;if(c&&u)return null;if(c)return o;if(u)return s;var p=R(r,this.vector(),a,t.vector());return null!==p&&_(n,p)?T.round(p.x,p.y):null},"getIntersection")},{key:"split",value:(0,r.a)(function(t){var i=[],n=void 0!==t.events,r=new D(t,!0),o=new D(t,!1),a=this.rightSE;this.replaceRightSE(o),i.push(o),i.push(r);var s=new e(r,a,this.rings.slice(),this.windings.slice());return D.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),D.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),n&&(r.checkForConsuming(),o.checkForConsuming()),i},"split")},{key:"swapEvents",value:(0,r.a)(function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,i=this.windings.length;e<i;e++)this.windings[e]*=-1},"swapEvents")},{key:"consume",value:(0,r.a)(function(t){for(var i=this,n=t;i.consumedBy;)i=i.consumedBy;for(;n.consumedBy;)n=n.consumedBy;var r=e.compare(i,n);if(0!==r){if(r>0){var o=i;i=n,n=o}if(i.prev===n){var a=i;i=n,n=a}for(var s=0,l=n.rings.length;s<l;s++){var h=n.rings[s],u=n.windings[s],c=i.rings.indexOf(h);-1===c?(i.rings.push(h),i.windings.push(u)):i.windings[c]+=u}n.rings=null,n.windings=null,n.consumedBy=i,n.leftSE.consumedBy=i.leftSE,n.rightSE.consumedBy=i.rightSE}},"consume")},{key:"prevInResult",value:(0,r.a)(function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult},"prevInResult")},{key:"beforeState",value:(0,r.a)(function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState},"beforeState")},{key:"afterState",value:(0,r.a)(function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,i=this._afterState.windings,n=this._afterState.multiPolys,r=0,o=this.rings.length;r<o;r++){var a=this.rings[r],s=this.windings[r],l=e.indexOf(a);-1===l?(e.push(a),i.push(s)):i[l]+=s}for(var h=[],u=[],c=0,p=e.length;c<p;c++)if(0!==i[c]){var d=e[c],f=d.poly;if(-1===u.indexOf(f))if(d.isExterior)h.push(f);else{-1===u.indexOf(f)&&u.push(f);var g=h.indexOf(d.poly);-1!==g&&h.splice(g,1)}}for(var m=0,v=h.length;m<v;m++){var y=h[m].multiPoly;-1===n.indexOf(y)&&n.push(y)}return this._afterState},"afterState")},{key:"isInResult",value:(0,r.a)(function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(Y.type){case"union":var i=0===t.length,n=0===e.length;this._isInResult=i!==n;break;case"intersection":var o,a;t.length<e.length?(o=t.length,a=e.length):(o=e.length,a=t.length),this._isInResult=a===Y.numMultiPolys&&o<a;break;case"xor":var s=Math.abs(t.length-e.length);this._isInResult=s%2==1;break;case"difference":var l=(0,r.a)(function(t){return 1===t.length&&t[0].isSubject},"isJustSubject");this._isInResult=l(t)!==l(e);break;default:throw new Error("Unrecognized operation type found ".concat(Y.type))}return this._isInResult},"isInResult")}],[{key:"fromRing",value:(0,r.a)(function(t,i,n){var r,o,a,s=D.comparePoints(t,i);if(s<0)r=t,o=i,a=1;else{if(!(s>0))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));r=i,o=t,a=-1}return new e(new D(r,!0),new D(o,!1),[n],[a])},"fromRing")}]),e}(),F=function(){function e(i,n,r){if(t(this,e),!Array.isArray(i)||0===i.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],"number"!=typeof i[0][0]||"number"!=typeof i[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=T.round(i[0][0],i[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var a=o,s=1,l=i.length;s<l;s++){if("number"!=typeof i[s][0]||"number"!=typeof i[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var h=T.round(i[s][0],i[s][1]);h.x===a.x&&h.y===a.y||(this.segments.push(B.fromRing(a,h,this)),h.x<this.bbox.ll.x&&(this.bbox.ll.x=h.x),h.y<this.bbox.ll.y&&(this.bbox.ll.y=h.y),h.x>this.bbox.ur.x&&(this.bbox.ur.x=h.x),h.y>this.bbox.ur.y&&(this.bbox.ur.y=h.y),a=h)}(o.x!==a.x||o.y!==a.y)&&this.segments.push(B.fromRing(a,o,this))}return(0,r.a)(e,"RingIn"),i(e,[{key:"getSweepEvents",value:(0,r.a)(function(){for(var t=[],e=0,i=this.segments.length;e<i;e++){var n=this.segments[e];t.push(n.leftSE),t.push(n.rightSE)}return t},"getSweepEvents")}]),e}(),U=function(){function e(i,n){if(t(this,e),!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new F(i[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,o=i.length;r<o;r++){var a=new F(i[r],this,!1);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.interiorRings.push(a)}this.multiPoly=n}return(0,r.a)(e,"PolyIn"),i(e,[{key:"getSweepEvents",value:(0,r.a)(function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,i=this.interiorRings.length;e<i;e++)for(var n=this.interiorRings[e].getSweepEvents(),r=0,o=n.length;r<o;r++)t.push(n[r]);return t},"getSweepEvents")}]),e}(),z=function(){function e(i,n){if(t(this,e),!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof i[0][0][0]&&(i=[i])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,o=i.length;r<o;r++){var a=new U(i[r],this);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.polys.push(a)}this.isSubject=n}return(0,r.a)(e,"MultiPolyIn"),i(e,[{key:"getSweepEvents",value:(0,r.a)(function(){for(var t=[],e=0,i=this.polys.length;e<i;e++)for(var n=this.polys[e].getSweepEvents(),r=0,o=n.length;r<o;r++)t.push(n[r]);return t},"getSweepEvents")}]),e}(),V=function(){function e(i){t(this,e),this.events=i;for(var n=0,r=i.length;n<r;n++)i[n].segment.ringOut=this;this.poly=null}return i(e,null,[{key:"factory",value:(0,r.a)(function(t){for(var i=[],n=0,r=t.length;n<r;n++){var o=t[n];if(o.isInResult()&&!o.ringOut){for(var a=null,s=o.leftSE,l=o.rightSE,h=[s],u=s.point,c=[];a=s,s=l,h.push(s),s.point!==u;)for(;;){var p=s.getAvailableLinkedEvents();if(0===p.length){var d=h[0].point,f=h[h.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(d.x,",")+" ".concat(d.y,"]. Last matching segment found ends at")+" [".concat(f.x,", ").concat(f.y,"]."))}if(1===p.length){l=p[0].otherSE;break}for(var g=null,m=0,v=c.length;m<v;m++)if(c[m].point===s.point){g=m;break}if(null===g){c.push({index:h.length,point:s.point});var y=s.getLeftmostComparator(a);l=p.sort(y)[0].otherSE;break}var _=c.splice(g)[0],x=h.splice(_.index);x.unshift(x[0].otherSE),i.push(new e(x.reverse()))}i.push(new e(h))}}return i},"factory")}]),(0,r.a)(e,"RingOut"),i(e,[{key:"getGeom",value:(0,r.a)(function(){for(var t=this.events[0].point,e=[t],i=1,n=this.events.length-1;i<n;i++){var r=this.events[i].point,o=this.events[i+1].point;0!==P(r,t,o)&&(e.push(r),t=r)}if(1===e.length)return null;var a=e[0],s=e[1];0===P(a,t,s)&&e.shift(),e.push(e[0]);for(var l=this.isExteriorRing()?1:-1,h=this.isExteriorRing()?0:e.length-1,u=this.isExteriorRing()?e.length:-1,c=[],p=h;p!=u;p+=l)c.push([e[p].x,e[p].y]);return c},"getGeom")},{key:"isExteriorRing",value:(0,r.a)(function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing},"isExteriorRing")},{key:"enclosingRing",value:(0,r.a)(function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing},"enclosingRing")},{key:"_calcEnclosingRing",value:(0,r.a)(function(){for(var t=this.events[0],e=1,i=this.events.length;e<i;e++){var n=this.events[e];D.compare(t,n)>0&&(t=n)}for(var r=t.segment.prevInResult(),o=r?r.prevInResult():null;;){if(!r)return null;if(!o)return r.ringOut;if(o.ringOut!==r.ringOut)return o.ringOut.enclosingRing()!==r.ringOut?r.ringOut:r.ringOut.enclosingRing();r=o.prevInResult(),o=r?r.prevInResult():null}},"_calcEnclosingRing")}]),e}(),j=function(){function e(i){t(this,e),this.exteriorRing=i,i.poly=this,this.interiorRings=[]}return(0,r.a)(e,"PolyOut"),i(e,[{key:"addInterior",value:(0,r.a)(function(t){this.interiorRings.push(t),t.poly=this},"addInterior")},{key:"getGeom",value:(0,r.a)(function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,i=this.interiorRings.length;e<i;e++){var n=this.interiorRings[e].getGeom();null!==n&&t.push(n)}return t},"getGeom")}]),e}(),G=function(){function e(i){t(this,e),this.rings=i,this.polys=this._composePolys(i)}return(0,r.a)(e,"MultiPolyOut"),i(e,[{key:"getGeom",value:(0,r.a)(function(){for(var t=[],e=0,i=this.polys.length;e<i;e++){var n=this.polys[e].getGeom();null!==n&&t.push(n)}return t},"getGeom")},{key:"_composePolys",value:(0,r.a)(function(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i];if(!r.poly)if(r.isExteriorRing())e.push(new j(r));else{var o=r.enclosingRing();o.poly||e.push(new j(o)),o.poly.addInterior(r)}}return e},"_composePolys")}]),e}(),H=function(){function e(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B.compare;t(this,e),this.queue=i,this.tree=new p(n),this.segments=[]}return(0,r.a)(e,"SweepLine"),i(e,[{key:"process",value:(0,r.a)(function(t){var e=t.segment,i=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),i;var n=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!n)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var r=n,o=n,a=void 0,s=void 0;void 0===a;)null===(r=this.tree.prev(r))?a=null:void 0===r.key.consumedBy&&(a=r.key);for(;void 0===s;)null===(o=this.tree.next(o))?s=null:void 0===o.key.consumedBy&&(s=o.key);if(t.isLeft){var l=null;if(a){var h=a.getIntersection(e);if(null!==h&&(e.isAnEndpoint(h)||(l=h),!a.isAnEndpoint(h)))for(var u=this._splitSafely(a,h),c=0,p=u.length;c<p;c++)i.push(u[c])}var d=null;if(s){var f=s.getIntersection(e);if(null!==f&&(e.isAnEndpoint(f)||(d=f),!s.isAnEndpoint(f)))for(var g=this._splitSafely(s,f),m=0,v=g.length;m<v;m++)i.push(g[m])}if(null!==l||null!==d){var y;y=null===l?d:null===d||D.comparePoints(l,d)<=0?l:d,this.queue.remove(e.rightSE),i.push(e.rightSE);for(var _=e.split(y),x=0,b=_.length;x<b;x++)i.push(_[x])}i.length>0?(this.tree.remove(e),i.push(t)):(this.segments.push(e),e.prev=a)}else{if(a&&s){var w=a.getIntersection(s);if(null!==w){if(!a.isAnEndpoint(w))for(var E=this._splitSafely(a,w),M=0,S=E.length;M<S;M++)i.push(E[M]);if(!s.isAnEndpoint(w))for(var T=this._splitSafely(s,w),C=0,A=T.length;C<A;C++)i.push(T[C])}}this.tree.remove(e)}return i},"process")},{key:"_splitSafely",value:(0,r.a)(function(t,e){this.tree.remove(t);var i=t.rightSE;this.queue.remove(i);var n=t.split(e);return n.push(i),void 0===t.consumedBy&&this.tree.insert(t),n},"_splitSafely")}]),e}(),W=typeof n.b<"u"&&n.b.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,X=typeof n.b<"u"&&n.b.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Y=new(function(){function e(){t(this,e)}return(0,r.a)(e,"Operation"),i(e,[{key:"run",value:(0,r.a)(function(t,e,i){Y.type=t,T.reset();for(var n=[new z(e,!0)],r=0,o=i.length;r<o;r++)n.push(new z(i[r],!1));if(Y.numMultiPolys=n.length,"difference"===Y.type)for(var a=n[0],s=1;s<n.length;)null!==x(n[s].bbox,a.bbox)?s++:n.splice(s,1);if("intersection"===Y.type)for(var l=0,h=n.length;l<h;l++)for(var u=n[l],c=l+1,d=n.length;c<d;c++)if(null===x(u.bbox,n[c].bbox))return[];for(var f=new p(D.compare),g=0,m=n.length;g<m;g++)for(var v=n[g].getSweepEvents(),y=0,_=v.length;y<_;y++)if(f.insert(v[y]),f.size>W)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var b=new H(f),w=f.size,E=f.pop();E;){var M=E.key;if(f.size===w){var S=M.segment;throw new Error("Unable to pop() ".concat(M.isLeft?"left":"right"," SweepEvent ")+"[".concat(M.point.x,", ").concat(M.point.y,"] from segment #").concat(S.id," ")+"[".concat(S.leftSE.point.x,", ").concat(S.leftSE.point.y,"] -> ")+"[".concat(S.rightSE.point.x,", ").concat(S.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(f.size>W)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(b.segments.length>X)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var C=b.process(M),A=0,P=C.length;A<P;A++){var I=C[A];void 0===I.consumedBy&&f.insert(I)}w=f.size,E=f.pop()}T.reset();var L=V.factory(b.segments);return new G(L).getGeom()},"run")}]),e}());return{union:(0,r.a)(function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return Y.run("union",t,i)},"union"),intersection:(0,r.a)(function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return Y.run("intersection",t,i)},"intersection"),xor:(0,r.a)(function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return Y.run("xor",t,i)},"xor"),difference:(0,r.a)(function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return Y.run("difference",t,i)},"difference")}},"object"==typeof e&&typeof i<"u"?i.exports=a():"function"==typeof t&&t.amd?t(a):(o=typeof globalThis<"u"?globalThis:o||self).polygonClipping=a()}),ae=(0,r.c)((e,i)=>{var o,a;(0,n.a)(),o=e,a=function(t){"use strict";function e(){}function i(t){this.message=t||""}function n(t){this.message=t||""}function o(t){this.message=t||""}function a(){}function s(t){return null===t?Rt:t.color}function l(t){return null===t?null:t.parent}function h(t,e){null!==t&&(t.color=e)}function u(t){return null===t?null:t.left}function c(t){return null===t?null:t.right}function p(){this.root_=null,this.size_=0}function d(){}function f(){this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}function g(){}function m(t){this.message=t||""}function v(){this.array_=[]}(0,r.a)(e,"e"),(0,r.a)(i,"n"),(0,r.a)(n,"i"),(0,r.a)(o,"r"),(0,r.a)(a,"o"),(0,r.a)(s,"s"),(0,r.a)(l,"a"),(0,r.a)(h,"u"),(0,r.a)(u,"l"),(0,r.a)(c,"c"),(0,r.a)(p,"p"),(0,r.a)(d,"h"),(0,r.a)(f,"f"),(0,r.a)(g,"g"),(0,r.a)(m,"d"),(0,r.a)(v,"y"),"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),i=Math.max(Math.min(e.length,9007199254740991),0)||0,n=1 in arguments&&parseInt(Number(arguments[1]),10)||0;n=n<0?Math.max(i+n,0):Math.min(n,i);var r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:i;for(r=r<0?Math.max(i+arguments[2],0):Math.min(r,i);n<r;)e[n]=t,++n;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var y=(0,r.a)(function(){},"_");y.prototype.interfaces_=function(){return[]},y.prototype.getClass=function(){return y},y.prototype.equalsWithTolerance=function(t,e,i){return Math.abs(t-e)<=i};var _=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),x=(0,r.a)(function(){},"v"),b={MAX_VALUE:{configurable:!0}};x.isNaN=function(t){return Number.isNaN(t)},x.doubleToLongBits=function(t){return t},x.longBitsToDouble=function(t){return t},x.isInfinite=function(t){return!Number.isFinite(t)},b.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(x,b);var w=(0,r.a)(function(){},"E"),E=(0,r.a)(function(){},"x"),M=(0,r.a)(function(){},"N"),S=(0,r.a)(function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},"t"),T={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};S.prototype.setOrdinate=function(t,e){switch(t){case S.X:this.x=e;break;case S.Y:this.y=e;break;case S.Z:this.z=e;break;default:throw new _("Invalid ordinate index: "+t)}},S.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],i=arguments[1];return!!y.equalsWithTolerance(this.x,e.x,i)&&!!y.equalsWithTolerance(this.y,e.y,i)}},S.prototype.getOrdinate=function(t){switch(t){case S.X:return this.x;case S.Y:return this.y;case S.Z:return this.z}throw new _("Invalid ordinate index: "+t)},S.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||x.isNaN(this.z))&&x.isNaN(t.z)},S.prototype.equals=function(t){return t instanceof S&&this.equals2D(t)},S.prototype.equalInZ=function(t,e){return y.equalsWithTolerance(this.z,t.z,e)},S.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},S.prototype.clone=function(){},S.prototype.copy=function(){return new S(this)},S.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},S.prototype.distance3D=function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return Math.sqrt(e*e+i*i+n*n)},S.prototype.distance=function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},S.prototype.hashCode=function(){var t=17;return 37*(t=37*t+S.hashCode(this.x))+S.hashCode(this.y)},S.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},S.prototype.interfaces_=function(){return[w,E,e]},S.prototype.getClass=function(){return S},S.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=x.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},T.DimensionalComparator.get=function(){return C},T.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},T.NULL_ORDINATE.get=function(){return x.NaN},T.X.get=function(){return 0},T.Y.get=function(){return 1},T.Z.get=function(){return 2},Object.defineProperties(S,T);var C=(0,r.a)(function(t){if(this._dimensionsToTest=2,0!==arguments.length&&1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new _("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}},"L");C.prototype.compare=function(t,e){var i=t,n=e,r=C.compare(i.x,n.x);if(0!==r)return r;var o=C.compare(i.y,n.y);return 0!==o?o:this._dimensionsToTest<=2?0:C.compare(i.z,n.z)},C.prototype.interfaces_=function(){return[M]},C.prototype.getClass=function(){return C},C.compare=function(t,e){return t<e?-1:t>e?1:x.isNaN(t)?x.isNaN(e)?0:-1:x.isNaN(e)?1:0};var A=(0,r.a)(function(){},"b");A.prototype.create=function(){},A.prototype.interfaces_=function(){return[]},A.prototype.getClass=function(){return A};var P=(0,r.a)(function(){},"w"),I={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};P.prototype.interfaces_=function(){return[]},P.prototype.getClass=function(){return P},P.toLocationSymbol=function(t){switch(t){case P.EXTERIOR:return"e";case P.BOUNDARY:return"b";case P.INTERIOR:return"i";case P.NONE:return"-"}throw new _("Unknown location value: "+t)},I.INTERIOR.get=function(){return 0},I.BOUNDARY.get=function(){return 1},I.EXTERIOR.get=function(){return 2},I.NONE.get=function(){return-1},Object.defineProperties(P,I);var L=(0,r.a)(function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},"T"),O=(0,r.a)(function(){},"R"),N={LOG_10:{configurable:!0}};O.prototype.interfaces_=function(){return[]},O.prototype.getClass=function(){return O},O.log10=function(t){var e=Math.log(t);return x.isInfinite(e)||x.isNaN(e)?e:e/O.LOG_10},O.min=function(t,e,i,n){var r=t;return e<r&&(r=e),i<r&&(r=i),n<r&&(r=n),r},O.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],i=arguments[2];return t<e?e:t>i?i:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var n=arguments[0],r=arguments[1],o=arguments[2];return n<r?r:n>o?o:n}},O.wrap=function(t,e){return t<0?e- -t%e:t%e},O.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],i=arguments[2],n=t;return e>n&&(n=e),i>n&&(n=i),n}if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],l=r;return o>l&&(l=o),a>l&&(l=a),s>l&&(l=s),l}},O.average=function(t,e){return(t+e)/2},N.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(O,N);var q=(0,r.a)(function(t){this.str=t},"D");q.prototype.append=function(t){this.str+=t},q.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},q.prototype.toString=function(t){return this.str};var R=(0,r.a)(function(t){this.value=t},"M");R.prototype.intValue=function(){return this.value},R.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},R.isNaN=function(t){return Number.isNaN(t)};var D=(0,r.a)(function(){},"A");D.isWhitespace=function(t){return t<=32&&t>=0||127===t},D.toUpperCase=function(t){return t.toUpperCase()};var k=(0,r.a)(function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var i=arguments[0];this.init(i)}else if("string"==typeof arguments[0]){var n=arguments[0];t.call(this,t.parse(n))}}else if(2===arguments.length){var r=arguments[0],o=arguments[1];this.init(r,o)}},"t"),B={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};k.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},k.prototype.extractSignificantDigits=function(t,e){var i=this.abs(),n=k.magnitude(i._hi),r=k.TEN.pow(n);(i=i.divide(r)).gt(k.TEN)?(i=i.divide(k.TEN),n+=1):i.lt(k.ONE)&&(i=i.multiply(k.TEN),n-=1);for(var o=n+1,a=new q,s=k.MAX_PRINT_DIGITS-1,l=0;l<=s;l++){t&&l===o&&a.append(".");var h=Math.trunc(i._hi);if(h<0)break;var u=!1,c=0;h>9?(u=!0,c="9"):c="0"+h,a.append(c),i=i.subtract(k.valueOf(h)).multiply(k.TEN),u&&i.selfAdd(k.TEN);var p=!0,d=k.magnitude(i._hi);if(d<0&&Math.abs(d)>=s-l&&(p=!1),!p)break}return e[0]=n,a.toString()},k.prototype.sqr=function(){return this.multiply(this)},k.prototype.doubleValue=function(){return this._hi+this._lo},k.prototype.subtract=function(){if(arguments[0]instanceof k){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},k.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},k.prototype.isZero=function(){return 0===this._hi&&0===this._lo},k.prototype.selfSubtract=function(){if(arguments[0]instanceof k){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},k.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},k.prototype.min=function(t){return this.le(t)?this:t},k.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof k){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var i,n,r,o,a=arguments[0],s=arguments[1],l=null,h=null,u=null,c=null;return r=this._hi/a,c=(l=(u=k.SPLIT*r)-(l=u-r))*(h=(c=k.SPLIT*a)-(h=c-a))-(o=r*a)+l*(n=a-h)+(i=r-l)*h+i*n,c=r+(u=(this._hi-o-c+this._lo-r*s)/a),this._hi=c,this._lo=r-c+u,this}},k.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},k.prototype.divide=function(){if(arguments[0]instanceof k){var t,e,i,n,r=arguments[0],o=null,a=null,s=null,l=null;return t=(i=this._hi/r._hi)-(o=(s=k.SPLIT*i)-(o=s-i)),l=o*(a=(l=k.SPLIT*r._hi)-(a=l-r._hi))-(n=i*r._hi)+o*(e=r._hi-a)+t*a+t*e,s=(this._hi-n-l+this._lo-i*r._lo)/r._hi,new k(l=i+s,i-l+s)}if("number"==typeof arguments[0]){var h=arguments[0];return x.isNaN(h)?k.createNaN():k.copy(this).selfDivide(h,0)}},k.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},k.prototype.pow=function(t){if(0===t)return k.valueOf(1);var e=new k(this),i=k.valueOf(1),n=Math.abs(t);if(n>1)for(;n>0;)n%2==1&&i.selfMultiply(e),(n/=2)>0&&(e=e.sqr());else i=e;return t<0?i.reciprocal():i},k.prototype.ceil=function(){if(this.isNaN())return k.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new k(t,e)},k.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},k.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},k.prototype.setValue=function(){if(arguments[0]instanceof k){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},k.prototype.max=function(t){return this.ge(t)?this:t},k.prototype.sqrt=function(){if(this.isZero())return k.valueOf(0);if(this.isNegative())return k.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,i=k.valueOf(e),n=this.subtract(i.sqr())._hi*(.5*t);return i.add(n)},k.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof k){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e,i,n,r,o,a=arguments[0],s=null;return s=(n=this._hi+a)-(r=n-this._hi),i=(o=(s=a-r+(this._hi-s))+this._lo)+(n-(e=n+o)),this._hi=e+i,this._lo=i+(e-this._hi),this}}else if(2===arguments.length){var l,h,u,c,p=arguments[0],d=arguments[1],f=null,g=null,m=null;u=this._hi+p,h=this._lo+d,g=u-(m=u-this._hi),f=h-(c=h-this._lo);var v=(l=u+(m=(g=p-m+(this._hi-g))+h))+(m=(f=d-c+(this._lo-f))+(m+(u-l))),y=m+(l-v);return this._hi=v,this._lo=y,this}},k.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof k){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var i,n,r=arguments[0],o=arguments[1],a=null,s=null,l=null,h=null;a=(l=k.SPLIT*this._hi)-this._hi,h=k.SPLIT*r,a=l-a,i=this._hi-a,s=h-r;var u=(l=this._hi*r)+(h=a*(s=h-s)-l+a*(n=r-s)+i*s+i*n+(this._hi*o+this._lo*r)),c=h+(a=l-u);return this._hi=u,this._lo=c,this}},k.prototype.selfSqr=function(){return this.selfMultiply(this)},k.prototype.floor=function(){if(this.isNaN())return k.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new k(t,e)},k.prototype.negate=function(){return this.isNaN()?this:new k(-this._hi,-this._lo)},k.prototype.clone=function(){},k.prototype.multiply=function(){if(arguments[0]instanceof k){var t=arguments[0];return t.isNaN()?k.createNaN():k.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return x.isNaN(e)?k.createNaN():k.copy(this).selfMultiply(e,0)}},k.prototype.isNaN=function(){return x.isNaN(this._hi)},k.prototype.intValue=function(){return Math.trunc(this._hi)},k.prototype.toString=function(){var t=k.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},k.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),i=this.extractSignificantDigits(!0,e),n=e[0]+1,r=i;if("."===i.charAt(0))r="0"+i;else if(n<0)r="0."+k.stringOfChar("0",-n)+i;else if(-1===i.indexOf(".")){var o=n-i.length;r=i+k.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+r:r},k.prototype.reciprocal=function(){var t,e,i,n,r=null,o=null,a=null,s=null;t=(i=1/this._hi)-(r=(a=k.SPLIT*i)-(r=a-i)),o=(s=k.SPLIT*this._hi)-this._hi;var l=i+(a=(1-(n=i*this._hi)-(s=r*(o=s-o)-n+r*(e=this._hi-o)+t*o+t*e)-i*this._lo)/this._hi);return new k(l,i-l+a)},k.prototype.toSciNotation=function(){if(this.isZero())return k.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),i=this.extractSignificantDigits(!1,e),n=k.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===i.charAt(0))throw new Error("Found leading zero: "+i);var r="";i.length>1&&(r=i.substring(1));var o=i.charAt(0)+"."+r;return this.isNegative()?"-"+o+n:o+n},k.prototype.abs=function(){return this.isNaN()?k.NaN:this.isNegative()?this.negate():new k(this)},k.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},k.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},k.prototype.add=function(){if(arguments[0]instanceof k){var t=arguments[0];return k.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return k.copy(this).selfAdd(e)}},k.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof k){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];this._hi=i,this._lo=n}},k.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},k.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},k.prototype.trunc=function(){return this.isNaN()?k.NaN:this.isPositive()?this.floor():this.ceil()},k.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},k.prototype.interfaces_=function(){return[e,w,E]},k.prototype.getClass=function(){return k},k.sqr=function(t){return k.valueOf(t).selfMultiply(t)},k.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return k.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new k(e)}},k.sqrt=function(t){return k.valueOf(t).sqrt()},k.parse=function(t){for(var e=0,i=t.length;D.isWhitespace(t.charAt(e));)e++;var n=!1;if(e<i){var r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(n=!0))}for(var o=new k,a=0,s=0,l=0;!(e>=i);){var h=t.charAt(e);if(e++,D.isDigit(h)){var u=h-"0";o.selfMultiply(k.TEN),o.selfAdd(u),a++}else{if("."!==h){if("e"===h||"E"===h){var c=t.substring(e);try{l=R.parseInt(c)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+c+" in string "+t):e}break}throw new Error("Unexpected character '"+h+"' at position "+e+" in string "+t)}s=a}}var p=o,d=a-s-l;if(0===d)p=o;else if(d>0){var f=k.TEN.pow(d);p=o.divide(f)}else if(d<0){var g=k.TEN.pow(-d);p=o.multiply(g)}return n?p.negate():p},k.createNaN=function(){return new k(x.NaN,x.NaN)},k.copy=function(t){return new k(t)},k.magnitude=function(t){var e=Math.abs(t),i=Math.log(e)/Math.log(10),n=Math.trunc(Math.floor(i));return 10*Math.pow(10,n)<=e&&(n+=1),n},k.stringOfChar=function(t,e){for(var i=new q,n=0;n<e;n++)i.append(t);return i.toString()},B.PI.get=function(){return new k(3.141592653589793,1.2246467991473532e-16)},B.TWO_PI.get=function(){return new k(6.283185307179586,2.4492935982947064e-16)},B.PI_2.get=function(){return new k(1.5707963267948966,6.123233995736766e-17)},B.E.get=function(){return new k(2.718281828459045,1.4456468917292502e-16)},B.NaN.get=function(){return new k(x.NaN,x.NaN)},B.EPS.get=function(){return 1.23259516440783e-32},B.SPLIT.get=function(){return 134217729},B.MAX_PRINT_DIGITS.get=function(){return 32},B.TEN.get=function(){return k.valueOf(10)},B.ONE.get=function(){return k.valueOf(1)},B.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},B.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(k,B);var F=(0,r.a)(function(){},"q"),U={DP_SAFE_EPSILON:{configurable:!0}};F.prototype.interfaces_=function(){return[]},F.prototype.getClass=function(){return F},F.orientationIndex=function(t,e,i){var n=F.orientationIndexFilter(t,e,i);if(n<=1)return n;var r=k.valueOf(e.x).selfAdd(-t.x),o=k.valueOf(e.y).selfAdd(-t.y),a=k.valueOf(i.x).selfAdd(-e.x),s=k.valueOf(i.y).selfAdd(-e.y);return r.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},F.signOfDet2x2=function(t,e,i,n){return t.multiply(n).selfSubtract(e.multiply(i)).signum()},F.intersection=function(t,e,i,n){var r=k.valueOf(n.y).selfSubtract(i.y).selfMultiply(k.valueOf(e.x).selfSubtract(t.x)),o=k.valueOf(n.x).selfSubtract(i.x).selfMultiply(k.valueOf(e.y).selfSubtract(t.y)),a=r.subtract(o),s=k.valueOf(n.x).selfSubtract(i.x).selfMultiply(k.valueOf(t.y).selfSubtract(i.y)),l=k.valueOf(n.y).selfSubtract(i.y).selfMultiply(k.valueOf(t.x).selfSubtract(i.x)),h=s.subtract(l).selfDivide(a).doubleValue(),u=k.valueOf(t.x).selfAdd(k.valueOf(e.x).selfSubtract(t.x).selfMultiply(h)).doubleValue(),c=k.valueOf(e.x).selfSubtract(t.x).selfMultiply(k.valueOf(t.y).selfSubtract(i.y)),p=k.valueOf(e.y).selfSubtract(t.y).selfMultiply(k.valueOf(t.x).selfSubtract(i.x)),d=c.subtract(p).selfDivide(a).doubleValue(),f=k.valueOf(i.y).selfAdd(k.valueOf(n.y).selfSubtract(i.y).selfMultiply(d)).doubleValue();return new S(u,f)},F.orientationIndexFilter=function(t,e,i){var n=null,r=(t.x-i.x)*(e.y-i.y),o=(t.y-i.y)*(e.x-i.x),a=r-o;if(r>0){if(o<=0)return F.signum(a);n=r+o}else{if(!(r<0)||o>=0)return F.signum(a);n=-r-o}var s=F.DP_SAFE_EPSILON*n;return a>=s||-a>=s?F.signum(a):2},F.signum=function(t){return t>0?1:t<0?-1:0},U.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(F,U);var z=(0,r.a)(function(){},"V"),V={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};V.X.get=function(){return 0},V.Y.get=function(){return 1},V.Z.get=function(){return 2},V.M.get=function(){return 3},z.prototype.setOrdinate=function(t,e,i){},z.prototype.size=function(){},z.prototype.getOrdinate=function(t,e){},z.prototype.getCoordinate=function(){},z.prototype.getCoordinateCopy=function(t){},z.prototype.getDimension=function(){},z.prototype.getX=function(t){},z.prototype.clone=function(){},z.prototype.expandEnvelope=function(t){},z.prototype.copy=function(){},z.prototype.getY=function(t){},z.prototype.toCoordinateArray=function(){},z.prototype.interfaces_=function(){return[E]},z.prototype.getClass=function(){return z},Object.defineProperties(z,V);var j=(0,r.a)(function(){},"z"),G=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(j),H=(0,r.a)(function(){},"Y");H.arraycopy=function(t,e,i,n,r){for(var o=0,a=e;a<e+r;a++)i[n+o]=t[a],o++},H.getProperty=function(t){return{"line.separator":"\n"}[t]};var W=(0,r.a)(function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var i=arguments[0],n=arguments[1];this.x=i,this.y=n,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var r=arguments[0],o=arguments[1];this.x=r.y*o.w-o.y*r.w,this.y=o.x*r.w-r.x*o.w,this.w=r.x*o.y-o.x*r.y}else if(arguments[0]instanceof S&&arguments[1]instanceof S){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var l=arguments[0],h=arguments[1],u=arguments[2];this.x=l,this.y=h,this.w=u}else if(4===arguments.length){var c=arguments[0],p=arguments[1],d=arguments[2],f=arguments[3],g=c.y-p.y,m=p.x-c.x,v=c.x*p.y-p.x*c.y,y=d.y-f.y,_=f.x-d.x,x=d.x*f.y-f.x*d.y;this.x=m*x-_*v,this.y=y*v-g*x,this.w=g*_-y*m}},"t");W.prototype.getY=function(){var t=this.y/this.w;if(x.isNaN(t)||x.isInfinite(t))throw new G;return t},W.prototype.getX=function(){var t=this.x/this.w;if(x.isNaN(t)||x.isInfinite(t))throw new G;return t},W.prototype.getCoordinate=function(){var t=new S;return t.x=this.getX(),t.y=this.getY(),t},W.prototype.interfaces_=function(){return[]},W.prototype.getClass=function(){return W},W.intersection=function(t,e,i,n){var r=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=i.y-n.y,l=n.x-i.x,h=i.x*n.y-n.x*i.y,u=r*l-s*o,c=(o*h-l*a)/u,p=(s*a-r*h)/u;if(x.isNaN(c)||x.isInfinite(c)||x.isNaN(p)||x.isInfinite(p))throw new G;return new S(c,p)};var X=(0,r.a)(function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof S){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var i=arguments[0];this.init(i)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],l=arguments[3];this.init(o,a,s,l)}},"t"),Y={serialVersionUID:{configurable:!0}};X.prototype.getArea=function(){return this.getWidth()*this.getHeight()},X.prototype.equals=function(t){if(!(t instanceof X))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},X.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new X;var e=this._minx>t._minx?this._minx:t._minx,i=this._miny>t._miny?this._miny:t._miny,n=this._maxx<t._maxx?this._maxx:t._maxx,r=this._maxy<t._maxy?this._maxy:t._maxy;return new X(e,n,i,r)},X.prototype.isNull=function(){return this._maxx<this._minx},X.prototype.getMaxX=function(){return this._maxx},X.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof X){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];return!this.isNull()&&i>=this._minx&&i<=this._maxx&&n>=this._miny&&n<=this._maxy}},X.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof X){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof S){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];return!this.isNull()&&!(i>this._maxx||i<this._minx||n>this._maxy||n<this._miny)}},X.prototype.getMinY=function(){return this._miny},X.prototype.getMinX=function(){return this._minx},X.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof X){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];this.isNull()?(this._minx=i,this._maxx=i,this._miny=n,this._maxy=n):(i<this._minx&&(this._minx=i),i>this._maxx&&(this._maxx=i),n<this._miny&&(this._miny=n),n>this._maxy&&(this._maxy=n))}},X.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},X.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},X.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},X.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},X.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},X.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},X.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},X.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},X.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=i,this._maxy+=i,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},X.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof X){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof S){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];return this.covers(i,n)}},X.prototype.centre=function(){return this.isNull()?null:new S((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},X.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof X){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];this.init(i.x,n.x,i.y,n.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];r<o?(this._minx=r,this._maxx=o):(this._minx=o,this._maxx=r),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},X.prototype.getMaxY=function(){return this._maxy},X.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var i=0;return this._maxy<t._miny?i=t._miny-this._maxy:this._miny>t._maxy&&(i=this._miny-t._maxy),0===e?i:0===i?e:Math.sqrt(e*e+i*i)},X.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+S.hashCode(this._minx))+S.hashCode(this._maxx))+S.hashCode(this._miny))+S.hashCode(this._maxy)},X.prototype.interfaces_=function(){return[w,e]},X.prototype.getClass=function(){return X},X.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],i=arguments[2];return i.x>=(t.x<e.x?t.x:e.x)&&i.x<=(t.x>e.x?t.x:e.x)&&i.y>=(t.y<e.y?t.y:e.y)&&i.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),l=Math.max(o.x,a.x),h=Math.min(n.x,r.x),u=Math.max(n.x,r.x);return!(h>l||u<s||(s=Math.min(o.y,a.y),l=Math.max(o.y,a.y),h=Math.min(n.y,r.y),u=Math.max(n.y,r.y),h>l||u<s))}},Y.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(X,Y);var Z={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},J=(0,r.a)(function(t){this.geometryFactory=t||new ye},"K");J.prototype.read=function(t){var e,i,n;t=t.replace(/[\n\r]/g," ");var r=Z.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((r=Z.emptyTypeStr.exec(t))[2]=void 0),r&&(i=r[1].toLowerCase(),n=r[2],Q[i]&&(e=Q[i].apply(this,[n]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},J.prototype.write=function(t){return this.extractGeometry(t)},J.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!K[e])return null;var i=e.toUpperCase();return t.isEmpty()?i+" EMPTY":i+"("+K[e].apply(this,[t])+")"};var K={coordinate:function(t){return t.x+" "+t.y},point:function(t){return K.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],i=0,n=t._geometries.length;i<n;++i)e.push("("+K.point.apply(this,[t._geometries[i]])+")");return e.join(",")},linestring:function(t){for(var e=[],i=0,n=t._points._coordinates.length;i<n;++i)e.push(K.coordinate.apply(this,[t._points._coordinates[i]]));return e.join(",")},linearring:function(t){for(var e=[],i=0,n=t._points._coordinates.length;i<n;++i)e.push(K.coordinate.apply(this,[t._points._coordinates[i]]));return e.join(",")},multilinestring:function(t){for(var e=[],i=0,n=t._geometries.length;i<n;++i)e.push("("+K.linestring.apply(this,[t._geometries[i]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+K.linestring.apply(this,[t._shell])+")");for(var i=0,n=t._holes.length;i<n;++i)e.push("("+K.linestring.apply(this,[t._holes[i]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],i=0,n=t._geometries.length;i<n;++i)e.push("("+K.polygon.apply(this,[t._geometries[i]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],i=0,n=t._geometries.length;i<n;++i)e.push(this.extractGeometry(t._geometries[i]));return e.join(",")}},Q={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Z.spaces);return this.geometryFactory.createPoint(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,i=t.trim().split(","),n=[],r=0,o=i.length;r<o;++r)e=i[r].replace(Z.trimParens,"$1"),n.push(Q.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(n)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,i=t.trim().split(","),n=[],r=0,o=i.length;r<o;++r)e=i[r].trim().split(Z.spaces),n.push(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(n)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,i=t.trim().split(","),n=[],r=0,o=i.length;r<o;++r)e=i[r].trim().split(Z.spaces),n.push(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(n)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,i=t.trim().split(Z.parenComma),n=[],r=0,o=i.length;r<o;++r)e=i[r].replace(Z.trimParens,"$1"),n.push(Q.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(n)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,i,n,r,o=t.trim().split(Z.parenComma),a=[],s=0,l=o.length;s<l;++s)e=o[s].replace(Z.trimParens,"$1"),i=Q.linestring.apply(this,[e]),n=this.geometryFactory.createLinearRing(i._points),0===s?r=n:a.push(n);return this.geometryFactory.createPolygon(r,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,i=t.trim().split(Z.doubleParenComma),n=[],r=0,o=i.length;r<o;++r)e=i[r].replace(Z.trimParens,"$1"),n.push(Q.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(n)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),i=[],n=0,r=e.length;n<r;++n)i.push(this.read(e[n]));return this.geometryFactory.createGeometryCollection(i)}},$=(0,r.a)(function(t){this.parser=new J(t)},"Z");$.prototype.write=function(t){return this.parser.write(t)},$.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var tt=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),et=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(tt),it=(0,r.a)(function(){},"et");it.prototype.interfaces_=function(){return[]},it.prototype.getClass=function(){return it},it.shouldNeverReachHere=function(){if(0===arguments.length)it.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new et("Should never reach here"+(null!==t?": "+t:""))}},it.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],it.isTrue(t,null);else if(2===arguments.length&&(e=arguments[1],!(t=arguments[0])))throw null===e?new et:new et(e)},it.equals=function(){var t,e,i;if(2===arguments.length)t=arguments[0],e=arguments[1],it.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],i=arguments[2],!(e=arguments[1]).equals(t)))throw new et("Expected "+t+" but encountered "+e+(null!==i?": "+i:""))};var nt=(0,r.a)(function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new S,this._intPt[1]=new S,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},"nt"),rt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new q;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,i,n){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=i,this._inputLines[1][1]=n,this._result=this.computeIntersect(t,e,i,n)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return $.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+$.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,i){var n=Math.abs(i.x-e.x),r=Math.abs(i.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(i))o=n>r?n:r;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=n>r?a:s)||t.equals(e)||(o=Math.max(a,s))}return it.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,i){var n=t.x-e.x,r=t.y-e.y,o=Math.sqrt(n*n+r*r);return it.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},rt.DONT_INTERSECT.get=function(){return 0},rt.DO_INTERSECT.get=function(){return 1},rt.COLLINEAR.get=function(){return 2},rt.NO_INTERSECTION.get=function(){return 0},rt.POINT_INTERSECTION.get=function(){return 1},rt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,rt);var ot=function(t){function e(){t.apply(this,arguments)}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new X(this._inputLines[0][0],this._inputLines[0][1]),i=new X(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&i.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],i=arguments[1],n=arguments[2];if(this._isProper=!1,X.intersects(i,n,e)&&0===lt.orientationIndex(i,n,e)&&0===lt.orientationIndex(n,i,e))return this._isProper=!0,(e.equals(i)||e.equals(n))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,i,n,r){r.x=this.smallestInAbsValue(t.x,e.x,i.x,n.x),r.y=this.smallestInAbsValue(t.y,e.y,i.y,n.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,i.x-=r.x,i.y-=r.y,n.x-=r.x,n.y-=r.y},e.prototype.safeHCoordinateIntersection=function(t,i,n,r){var o=null;try{o=W.intersection(t,i,n,r)}catch(s){if(!(s instanceof G))throw s;o=e.nearestEndpoint(t,i,n,r)}return o},e.prototype.intersection=function(t,i,n,r){var o=this.intersectionWithNormalization(t,i,n,r);return this.isInSegmentEnvelopes(o)||(o=new S(e.nearestEndpoint(t,i,n,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,i,n){var r=t,o=Math.abs(r);return Math.abs(e)<o&&(r=e,o=Math.abs(e)),Math.abs(i)<o&&(r=i,o=Math.abs(i)),Math.abs(n)<o&&(r=n),r},e.prototype.checkDD=function(t,e,i,n,r){var o=F.intersection(t,e,i,n),a=this.isInSegmentEnvelopes(o);H.out.println("DD in env = "+a+"  --------------------- "+o),r.distance(o)>1e-4&&H.out.println("Distance = "+r.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,i,n){var r=new S(t),o=new S(e),a=new S(i),s=new S(n),l=new S;this.normalizeToEnvCentre(r,o,a,s,l);var h=this.safeHCoordinateIntersection(r,o,a,s);return h.x+=l.x,h.y+=l.y,h},e.prototype.computeCollinearIntersection=function(e,i,n,r){var o=X.intersects(e,i,n),a=X.intersects(e,i,r),s=X.intersects(n,r,e),l=X.intersects(n,r,i);return o&&a?(this._intPt[0]=n,this._intPt[1]=r,t.COLLINEAR_INTERSECTION):s&&l?(this._intPt[0]=e,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||a||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&l?(this._intPt[0]=n,this._intPt[1]=i,!n.equals(i)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||o||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&l?(this._intPt[0]=r,this._intPt[1]=i,!r.equals(i)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,i,n,r){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,h=i.x<n.x?i.x:n.x,u=i.y<n.y?i.y:n.y,c=i.x>n.x?i.x:n.x,p=i.y>n.y?i.y:n.y,d=((o>h?o:h)+(s<c?s:c))/2,f=((a>u?a:u)+(l<p?l:p))/2;r.x=d,r.y=f,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,i.x-=r.x,i.y-=r.y,n.x-=r.x,n.y-=r.y},e.prototype.computeIntersect=function(e,i,n,r){if(this._isProper=!1,!X.intersects(e,i,n,r))return t.NO_INTERSECTION;var o=lt.orientationIndex(e,i,n),a=lt.orientationIndex(e,i,r);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=lt.orientationIndex(n,r,e),l=lt.orientationIndex(n,r,i);return s>0&&l>0||s<0&&l<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===l?this.computeCollinearIntersection(e,i,n,r):(0===o||0===a||0===s||0===l?(this._isProper=!1,e.equals2D(n)||e.equals2D(r)?this._intPt[0]=e:i.equals2D(n)||i.equals2D(r)?this._intPt[0]=i:0===o?this._intPt[0]=new S(n):0===a?this._intPt[0]=new S(r):0===s?this._intPt[0]=new S(e):0===l&&(this._intPt[0]=new S(i))):(this._isProper=!0,this._intPt[0]=this.intersection(e,i,n,r)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,i,n){var r=t,o=lt.distancePointLine(t,i,n),a=lt.distancePointLine(e,i,n);return a<o&&(o=a,r=e),(a=lt.distancePointLine(i,t,e))<o&&(o=a,r=i),(a=lt.distancePointLine(n,t,e))<o&&(o=a,r=n),r},e}(nt),at=(0,r.a)(function(){},"ot");at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.orientationIndex=function(t,e,i){var n=e.x-t.x,r=e.y-t.y,o=i.x-e.x,a=i.y-e.y;return at.signOfDet2x2(n,r,o,a)},at.signOfDet2x2=function(t,e,i,n){var r=null,o=null,a=null;if(r=1,0===t||0===n)return 0===e||0===i?0:e>0?i>0?-r:r:i>0?r:-r;if(0===e||0===i)return n>0?t>0?r:-r:t>0?-r:r;if(e>0?n>0?e<=n||(r=-r,o=t,t=i,i=o,o=e,e=n,n=o):e<=-n?(r=-r,i=-i,n=-n):(o=t,t=-i,i=o,o=e,e=-n,n=o):n>0?-e<=n?(r=-r,t=-t,e=-e):(o=-t,t=i,i=o,o=-e,e=n,n=o):e>=n?(t=-t,e=-e,i=-i,n=-n):(r=-r,o=-t,t=-i,i=o,o=-e,e=-n,n=o),t>0){if(!(i>0&&t<=i))return r}else{if(i>0||!(t>=i))return-r;r=-r,t=-t,i=-i}for(;;){if((n-=(a=Math.floor(i/t))*e)<0)return-r;if(n>e)return r;if(t>(i-=a*t)+i){if(e<n+n)return r}else{if(e>n+n)return-r;i=t-i,n=e-n,r=-r}if(0===n)return 0===i?0:-r;if(0===i||(t-=(a=Math.floor(t/i))*i,(e-=a*n)<0))return r;if(e>n)return-r;if(i>t+t){if(n<e+e)return-r}else{if(n>e+e)return r;t=i-t,e=n-e,r=-r}if(0===e)return 0===t?0:r;if(0===t)return-r}};var st=(0,r.a)(function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t},"st");st.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var i=t.x,n=e.x;return i>n&&(i=e.x,n=t.x),this._p.x>=i&&this._p.x<=n&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var r=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,l=at.signOfDet2x2(r,o,a,s);if(0===l)return this._isPointOnSegment=!0,null;s<o&&(l=-l),l>0&&this._crossingCount++}},st.prototype.isPointInPolygon=function(){return this.getLocation()!==P.EXTERIOR},st.prototype.getLocation=function(){return this._isPointOnSegment?P.BOUNDARY:this._crossingCount%2==1?P.INTERIOR:P.EXTERIOR},st.prototype.isOnSegment=function(){return this._isPointOnSegment},st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.locatePointInRing=function(){if(arguments[0]instanceof S&&L(arguments[1],z)){for(var t=arguments[0],e=arguments[1],i=new st(t),n=new S,r=new S,o=1;o<e.size();o++)if(e.getCoordinate(o,n),e.getCoordinate(o-1,r),i.countSegment(n,r),i.isOnSegment())return i.getLocation();return i.getLocation()}if(arguments[0]instanceof S&&arguments[1]instanceof Array){for(var a=arguments[0],s=arguments[1],l=new st(a),h=1;h<s.length;h++){var u=s[h],c=s[h-1];if(l.countSegment(u,c),l.isOnSegment())return l.getLocation()}return l.getLocation()}};var lt=(0,r.a)(function(){},"at"),ht={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};lt.prototype.interfaces_=function(){return[]},lt.prototype.getClass=function(){return lt},lt.orientationIndex=function(t,e,i){return F.orientationIndex(t,e,i)},lt.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,i=t[0].x,n=1;n<t.length-1;n++){var r=t[n].x-i,o=t[n+1].y;e+=r*(t[n-1].y-o)}return e/2}if(L(arguments[0],z)){var a=arguments[0],s=a.size();if(s<3)return 0;var l=new S,h=new S,u=new S;a.getCoordinate(0,h),a.getCoordinate(1,u);var c=h.x;u.x-=c;for(var p=0,d=1;d<s-1;d++)l.y=h.y,h.x=u.x,h.y=u.y,a.getCoordinate(d+1,u),u.x-=c,p+=h.x*(l.y-u.y);return p/2}},lt.distanceLineLine=function(t,e,i,n){if(t.equals(e))return lt.distancePointLine(t,i,n);if(i.equals(n))return lt.distancePointLine(n,t,e);var r=!1;if(X.intersects(t,e,i,n)){var o=(e.x-t.x)*(n.y-i.y)-(e.y-t.y)*(n.x-i.x);if(0===o)r=!0;else{var a=(t.y-i.y)*(n.x-i.x)-(t.x-i.x)*(n.y-i.y),s=((t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y))/o,l=a/o;(l<0||l>1||s<0||s>1)&&(r=!0)}}else r=!0;return r?O.min(lt.distancePointLine(t,i,n),lt.distancePointLine(e,i,n),lt.distancePointLine(i,t,e),lt.distancePointLine(n,t,e)):0},lt.isPointInRing=function(t,e){return lt.locatePointInRing(t,e)!==P.EXTERIOR},lt.computeLength=function(t){var e=t.size();if(e<=1)return 0;var i=0,n=new S;t.getCoordinate(0,n);for(var r=n.x,o=n.y,a=1;a<e;a++){t.getCoordinate(a,n);var s=n.x,l=n.y,h=s-r,u=l-o;i+=Math.sqrt(h*h+u*u),r=s,o=l}return i},lt.isCCW=function(t){var e=t.length-1;if(e<3)throw new _("Ring has fewer than 4 points, so orientation cannot be determined");for(var i=t[0],n=0,r=1;r<=e;r++){var o=t[r];o.y>i.y&&(i=o,n=r)}var a=n;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(i)&&a!==n);var s=n;do{s=(s+1)%e}while(t[s].equals2D(i)&&s!==n);var l=t[a],h=t[s];if(l.equals2D(i)||h.equals2D(i)||l.equals2D(h))return!1;var u=lt.computeOrientation(l,i,h);return 0===u?l.x>h.x:u>0},lt.locatePointInRing=function(t,e){return st.locatePointInRing(t,e)},lt.distancePointLinePerpendicular=function(t,e,i){var n=(i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y),r=((e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y))/n;return Math.abs(r)*Math.sqrt(n)},lt.computeOrientation=function(t,e,i){return lt.orientationIndex(t,e,i)},lt.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new _("Line array must contain at least one vertex");for(var i=t.distance(e[0]),n=0;n<e.length-1;n++){var r=lt.distancePointLine(t,e[n],e[n+1]);r<i&&(i=r)}return i}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var l=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),h=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/l;if(h<=0)return o.distance(a);if(h>=1)return o.distance(s);var u=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/l;return Math.abs(u)*Math.sqrt(l)}},lt.isOnLine=function(t,e){for(var i=new ot,n=1;n<e.length;n++){var r=e[n-1],o=e[n];if(i.computeIntersection(t,r,o),i.hasIntersection())return!0}return!1},ht.CLOCKWISE.get=function(){return-1},ht.RIGHT.get=function(){return lt.CLOCKWISE},ht.COUNTERCLOCKWISE.get=function(){return 1},ht.LEFT.get=function(){return lt.COUNTERCLOCKWISE},ht.COLLINEAR.get=function(){return 0},ht.STRAIGHT.get=function(){return lt.COLLINEAR},Object.defineProperties(lt,ht);var ut=(0,r.a)(function(){},"lt");ut.prototype.filter=function(t){},ut.prototype.interfaces_=function(){return[]},ut.prototype.getClass=function(){return ut};var ct=(0,r.a)(function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},"ct"),pt={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ct.prototype.isGeometryCollection=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION},ct.prototype.getFactory=function(){return this._factory},ct.prototype.getGeometryN=function(t){return this},ct.prototype.getArea=function(){return 0},ct.prototype.isRectangle=function(){return!1},ct.prototype.equals=function(){if(arguments[0]instanceof ct){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof ct))return!1;var i=e;return this.equalsExact(i)}},ct.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ct.prototype.geometryChanged=function(){this.apply(ct.geometryChangedFilter)},ct.prototype.geometryChangedAction=function(){this._envelope=null},ct.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ct.prototype.getLength=function(){return 0},ct.prototype.getNumGeometries=function(){return 1},ct.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var i=arguments[0],n=arguments[1];return this.getSortIndex()!==i.getSortIndex()?this.getSortIndex()-i.getSortIndex():this.isEmpty()&&i.isEmpty()?0:this.isEmpty()?-1:i.isEmpty()?1:this.compareToSameClass(i,n)}},ct.prototype.getUserData=function(){return this._userData},ct.prototype.getSRID=function(){return this._SRID},ct.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ct.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION)throw new _("This method does not support GeometryCollection arguments")},ct.prototype.equal=function(t,e,i){return 0===i?t.equals(e):t.distance(e)<=i},ct.prototype.norm=function(){var t=this.copy();return t.normalize(),t},ct.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ct.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new X(this._envelope)},ct.prototype.setSRID=function(t){this._SRID=t},ct.prototype.setUserData=function(t){this._userData=t},ct.prototype.compare=function(t,e){for(var i=t.iterator(),n=e.iterator();i.hasNext()&&n.hasNext();){var r=i.next(),o=n.next(),a=r.compareTo(o);if(0!==a)return a}return i.hasNext()?1:n.hasNext()?-1:0},ct.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ct.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ct.SORTINDEX_MULTIPOINT||this.getSortIndex()===ct.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ct.SORTINDEX_MULTIPOLYGON},ct.prototype.interfaces_=function(){return[E,w,e]},ct.prototype.getClass=function(){return ct},ct.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},ct.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},pt.serialVersionUID.get=function(){return 0x799ea46522854c00},pt.SORTINDEX_POINT.get=function(){return 0},pt.SORTINDEX_MULTIPOINT.get=function(){return 1},pt.SORTINDEX_LINESTRING.get=function(){return 2},pt.SORTINDEX_LINEARRING.get=function(){return 3},pt.SORTINDEX_MULTILINESTRING.get=function(){return 4},pt.SORTINDEX_POLYGON.get=function(){return 5},pt.SORTINDEX_MULTIPOLYGON.get=function(){return 6},pt.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},pt.geometryChangedFilter.get=function(){return dt},Object.defineProperties(ct,pt);var dt=(0,r.a)(function(){},"ht");dt.interfaces_=function(){return[ut]},dt.filter=function(t){t.geometryChangedAction()};var ft=(0,r.a)(function(){},"ft");ft.prototype.filter=function(t){},ft.prototype.interfaces_=function(){return[]},ft.prototype.getClass=function(){return ft};var gt=(0,r.a)(function(){},"gt"),mt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};gt.prototype.isInBoundary=function(t){},gt.prototype.interfaces_=function(){return[]},gt.prototype.getClass=function(){return gt},mt.Mod2BoundaryNodeRule.get=function(){return vt},mt.EndPointBoundaryNodeRule.get=function(){return yt},mt.MultiValentEndPointBoundaryNodeRule.get=function(){return _t},mt.MonoValentEndPointBoundaryNodeRule.get=function(){return xt},mt.MOD2_BOUNDARY_RULE.get=function(){return new vt},mt.ENDPOINT_BOUNDARY_RULE.get=function(){return new yt},mt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new _t},mt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new xt},mt.OGC_SFS_BOUNDARY_RULE.get=function(){return gt.MOD2_BOUNDARY_RULE},Object.defineProperties(gt,mt);var vt=(0,r.a)(function(){},"yt");vt.prototype.isInBoundary=function(t){return t%2==1},vt.prototype.interfaces_=function(){return[gt]},vt.prototype.getClass=function(){return vt};var yt=(0,r.a)(function(){},"_t");yt.prototype.isInBoundary=function(t){return t>0},yt.prototype.interfaces_=function(){return[gt]},yt.prototype.getClass=function(){return yt};var _t=(0,r.a)(function(){},"mt");_t.prototype.isInBoundary=function(t){return t>1},_t.prototype.interfaces_=function(){return[gt]},_t.prototype.getClass=function(){return _t};var xt=(0,r.a)(function(){},"vt");xt.prototype.isInBoundary=function(t){return 1===t},xt.prototype.interfaces_=function(){return[gt]},xt.prototype.getClass=function(){return xt};var bt=(0,r.a)(function(){},"It");bt.prototype.add=function(){},bt.prototype.addAll=function(){},bt.prototype.isEmpty=function(){},bt.prototype.iterator=function(){},bt.prototype.size=function(){},bt.prototype.toArray=function(){},bt.prototype.remove=function(){},(i.prototype=new Error).name="IndexOutOfBoundsException";var wt=(0,r.a)(function(){},"Et");wt.prototype.hasNext=function(){},wt.prototype.next=function(){},wt.prototype.remove=function(){};var Et=function(t){function e(){t.apply(this,arguments)}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(bt);(n.prototype=new Error).name="NoSuchElementException";var Mt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,bt]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var i=this.array_[t];return this.array_[t]=e,i},e.prototype.iterator=function(){return new St(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new i;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,i=this.array_.length;e<i;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,i=0,n=this.array_.length;i<n;i++)if(this.array_[i]===t){this.array_.splice(i,1),e=!0;break}return e},e}(Et),St=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new n;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(wt),Tt=function(t){function e(){if(t.call(this),0!==arguments.length)if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var i=arguments[0],n=arguments[1];this.ensureCapacity(i.length),this.add(i,n)}}(0,r.a)(e,"e"),t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={coordArrayType:{configurable:!0}};return i.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[0],i=arguments[1],n=!1,r=e.iterator();r.hasNext();)this.add(r.next(),i),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),i=0;i<this.size();i++)e.add(i,this.get(i).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var i=arguments[0],n=arguments[1];return this.add(i,n,!0),!0}if(arguments[0]instanceof S&&"boolean"==typeof arguments[1]){var r=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(r))return null;t.prototype.add.call(this,r)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],l=arguments[1];if(arguments[2])for(var h=0;h<s.length;h++)this.add(s[h],l);else for(var u=s.length-1;u>=0;u--)this.add(s[u],l);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof S){var c=arguments[0],p=arguments[1];if(!arguments[2]){var d=this.size();if(d>0&&(c>0&&this.get(c-1).equals2D(p)||c<d&&this.get(c).equals2D(p)))return null}t.prototype.add.call(this,c,p)}}else if(4===arguments.length){var f=arguments[0],g=arguments[1],m=arguments[2],v=arguments[3],y=1;m>v&&(y=-1);for(var _=m;_!==v;_+=y)this.add(f[_],g);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new S(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,i),e}(Mt),Ct=(0,r.a)(function(){},"Lt"),At={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};At.ForwardComparator.get=function(){return Pt},At.BidirectionalComparator.get=function(){return It},At.coordArrayType.get=function(){return new Array(0).fill(null)},Ct.prototype.interfaces_=function(){return[]},Ct.prototype.getClass=function(){return Ct},Ct.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Ct.ptNotInList=function(t,e){for(var i=0;i<t.length;i++){var n=t[i];if(Ct.indexOf(n,e)<0)return n}return null},Ct.scroll=function(t,e){var i=Ct.indexOf(e,t);if(i<0)return null;var n=new Array(t.length).fill(null);H.arraycopy(t,i,n,0,t.length-i),H.arraycopy(t,0,n,t.length-i,i),H.arraycopy(n,0,t,0,t.length)},Ct.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e||t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!t[i].equals(e[i]))return!1;return!0}if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2];if(n===r)return!0;if(null===n||null===r||n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(0!==o.compare(n[a],r[a]))return!1;return!0}},Ct.intersection=function(t,e){for(var i=new Tt,n=0;n<t.length;n++)e.intersects(t[n])&&i.add(t[n],!0);return i.toCoordinateArray()},Ct.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Ct.removeRepeatedPoints=function(t){return Ct.hasRepeatedPoints(t)?new Tt(t,!1).toCoordinateArray():t},Ct.reverse=function(t){for(var e=t.length-1,i=Math.trunc(e/2),n=0;n<=i;n++){var r=t[n];t[n]=t[e-n],t[e-n]=r}},Ct.removeNull=function(t){for(var e=0,i=0;i<t.length;i++)null!==t[i]&&e++;var n=new Array(e).fill(null);if(0===e)return n;for(var r=0,o=0;o<t.length;o++)null!==t[o]&&(n[r++]=t[o]);return n},Ct.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),i=0;i<t.length;i++)e[i]=new S(t[i]);return e}if(5===arguments.length)for(var n=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],l=0;l<s;l++)o[a+l]=new S(n[r+l])},Ct.isEqualReversed=function(t,e){for(var i=0;i<t.length;i++){var n=t[i],r=e[t.length-i-1];if(0!==n.compareTo(r))return!1}return!0},Ct.envelope=function(t){for(var e=new X,i=0;i<t.length;i++)e.expandToInclude(t[i]);return e},Ct.toCoordinateArray=function(t){return t.toArray(Ct.coordArrayType)},Ct.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Ct.indexOf=function(t,e){for(var i=0;i<e.length;i++)if(t.equals(e[i]))return i;return-1},Ct.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var i=t.length-1-e,n=t[e].compareTo(t[i]);if(0!==n)return n}return 1},Ct.compare=function(t,e){for(var i=0;i<t.length&&i<e.length;){var n=t[i].compareTo(e[i]);if(0!==n)return n;i++}return i<e.length?-1:i<t.length?1:0},Ct.minCoordinate=function(t){for(var e=null,i=0;i<t.length;i++)(null===e||e.compareTo(t[i])>0)&&(e=t[i]);return e},Ct.extract=function(t,e,i){e=O.clamp(e,0,t.length);var n=(i=O.clamp(i,-1,t.length))-e+1;i<0&&(n=0),e>=t.length&&(n=0),i<e&&(n=0);var r=new Array(n).fill(null);if(0===n)return r;for(var o=0,a=e;a<=i;a++)r[o++]=t[a];return r},Object.defineProperties(Ct,At);var Pt=(0,r.a)(function(){},"wt");Pt.prototype.compare=function(t,e){return Ct.compare(t,e)},Pt.prototype.interfaces_=function(){return[M]},Pt.prototype.getClass=function(){return Pt};var It=(0,r.a)(function(){},"Ot");It.prototype.compare=function(t,e){var i=t,n=e;if(i.length<n.length)return-1;if(i.length>n.length)return 1;if(0===i.length)return 0;var r=Ct.compare(i,n);return Ct.isEqualReversed(i,n)?0:r},It.prototype.OLDcompare=function(t,e){var i=t,n=e;if(i.length<n.length)return-1;if(i.length>n.length)return 1;if(0===i.length)return 0;for(var r=Ct.increasingDirection(i),o=Ct.increasingDirection(n),a=r>0?0:i.length-1,s=o>0?0:i.length-1,l=0;l<i.length;l++){var h=i[a].compareTo(n[s]);if(0!==h)return h;a+=r,s+=o}return 0},It.prototype.interfaces_=function(){return[M]},It.prototype.getClass=function(){return It};var Lt=(0,r.a)(function(){},"Tt");Lt.prototype.get=function(){},Lt.prototype.put=function(){},Lt.prototype.size=function(){},Lt.prototype.values=function(){},Lt.prototype.entrySet=function(){};var Ot=function(t){function e(){t.apply(this,arguments)}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Lt);(o.prototype=new Error).name="OperationNotSupported",(a.prototype=new bt).contains=function(){};var Nt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,i=this.array_.length;e<i;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,i=this.array_.length;e<i;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new qt(this)},e}(a),qt=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new n;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new o},e}(wt),Rt=0;(p.prototype=new Ot).get=function(t){for(var e=this.root_;null!==e;){var i=t.compareTo(e.key);if(i<0)e=e.left;else{if(!(i>0))return e.value;e=e.right}}return null},p.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Rt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var i,n,r=this.root_;do{if(i=r,(n=t.compareTo(r.key))<0)r=r.left;else{if(!(n>0)){var o=r.value;return r.value=e,o}r=r.right}}while(null!==r);var a={key:t,left:null,right:null,value:e,parent:i,color:Rt,getValue:function(){return this.value},getKey:function(){return this.key}};return n<0?i.left=a:i.right=a,this.fixAfterInsertion(a),this.size_++,null},p.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(l(t)===u(l(l(t)))){var e=c(l(l(t)));1===s(e)?(h(l(t),Rt),h(e,Rt),h(l(l(t)),1),t=l(l(t))):(t===c(l(t))&&(t=l(t),this.rotateLeft(t)),h(l(t),Rt),h(l(l(t)),1),this.rotateRight(l(l(t))))}else{var i=u(l(l(t)));1===s(i)?(h(l(t),Rt),h(i,Rt),h(l(l(t)),1),t=l(l(t))):(t===u(l(t))&&(t=l(t),this.rotateRight(t)),h(l(t),Rt),h(l(l(t)),1),this.rotateLeft(l(l(t))))}this.root_.color=Rt},p.prototype.values=function(){var t=new Mt,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=p.successor(e));)t.add(e.value);return t},p.prototype.entrySet=function(){var t=new Nt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=p.successor(e));)t.add(e);return t},p.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},p.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},p.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},p.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var i=t.parent,n=t;null!==i&&n===i.right;)n=i,i=i.parent;return i},p.prototype.size=function(){return this.size_};var Dt=(0,r.a)(function(){},"At");Dt.prototype.interfaces_=function(){return[]},Dt.prototype.getClass=function(){return Dt},d.prototype=new a,(f.prototype=new d).contains=function(t){for(var e=0,i=this.array_.length;e<i;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},f.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,i=this.array_.length;e<i;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},f.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},f.prototype.remove=function(t){throw new o},f.prototype.size=function(){return this.array_.length},f.prototype.isEmpty=function(){return 0===this.array_.length},f.prototype.toArray=function(){for(var t=[],e=0,i=this.array_.length;e<i;e++)t.push(this.array_[e]);return t},f.prototype.iterator=function(){return new kt(this)};var kt=(0,r.a)(function(t){this.treeSet_=t,this.position_=0},"Ft");kt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new n;return this.treeSet_.array_[this.position_++]},kt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},kt.prototype.remove=function(){throw new o};var Bt=(0,r.a)(function(){},"Gt");Bt.sort=function(){var t,e,i,n,o=arguments[0];if(1===arguments.length)n=(0,r.a)(function(t,e){return t.compareTo(e)},"i"),o.sort(n);else if(2===arguments.length)i=arguments[1],n=(0,r.a)(function(t,e){return i.compare(t,e)},"i"),o.sort(n);else if(3===arguments.length){(e=o.slice(arguments[1],arguments[2])).sort();var a=o.slice(0,arguments[1]).concat(e,o.slice(arguments[2],o.length));for(o.splice(0,o.length),t=0;t<a.length;t++)o.push(a[t])}else if(4===arguments.length)for(e=o.slice(arguments[1],arguments[2]),i=arguments[3],n=(0,r.a)(function(t,e){return i.compare(t,e)},"i"),e.sort(n),a=o.slice(0,arguments[1]).concat(e,o.slice(arguments[2],o.length)),o.splice(0,o.length),t=0;t<a.length;t++)o.push(a[t])},Bt.asList=function(t){for(var e=new Mt,i=0,n=t.length;i<n;i++)e.add(t[i]);return e};var Ft=(0,r.a)(function(){},"qt"),Ut={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Ut.P.get=function(){return 0},Ut.L.get=function(){return 1},Ut.A.get=function(){return 2},Ut.FALSE.get=function(){return-1},Ut.TRUE.get=function(){return-2},Ut.DONTCARE.get=function(){return-3},Ut.SYM_FALSE.get=function(){return"F"},Ut.SYM_TRUE.get=function(){return"T"},Ut.SYM_DONTCARE.get=function(){return"*"},Ut.SYM_P.get=function(){return"0"},Ut.SYM_L.get=function(){return"1"},Ut.SYM_A.get=function(){return"2"},Ft.prototype.interfaces_=function(){return[]},Ft.prototype.getClass=function(){return Ft},Ft.toDimensionSymbol=function(t){switch(t){case Ft.FALSE:return Ft.SYM_FALSE;case Ft.TRUE:return Ft.SYM_TRUE;case Ft.DONTCARE:return Ft.SYM_DONTCARE;case Ft.P:return Ft.SYM_P;case Ft.L:return Ft.SYM_L;case Ft.A:return Ft.SYM_A}throw new _("Unknown dimension value: "+t)},Ft.toDimensionValue=function(t){switch(D.toUpperCase(t)){case Ft.SYM_FALSE:return Ft.FALSE;case Ft.SYM_TRUE:return Ft.TRUE;case Ft.SYM_DONTCARE:return Ft.DONTCARE;case Ft.SYM_P:return Ft.P;case Ft.SYM_L:return Ft.L;case Ft.SYM_A:return Ft.A}throw new _("Unknown dimension symbol: "+t)},Object.defineProperties(Ft,Ut);var zt=(0,r.a)(function(){},"Vt");zt.prototype.filter=function(t){},zt.prototype.interfaces_=function(){return[]},zt.prototype.getClass=function(){return zt};var Vt=(0,r.a)(function(){},"Ut");Vt.prototype.filter=function(t,e){},Vt.prototype.isDone=function(){},Vt.prototype.isGeometryChanged=function(){},Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt};var jt=function(t){function e(e,i){if(t.call(this,i),this._geometries=e||[],t.hasNullElements(this._geometries))throw new _("geometries must not contain null elements")}(0,r.a)(e,"e"),t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new X,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,i=0;i<this._geometries.length;i++)for(var n=this._geometries[i].getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1];if(!this.isEquivalentClass(e))return!1;var n=e;if(this._geometries.length!==n._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(n._geometries[r],i))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Bt.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Ft.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Ft.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),i=0;i<this._geometries.length;i++)e[i]=this._geometries[i].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new f(Bt.asList(this._geometries)),i=new f(Bt.asList(t._geometries));return this.compare(e,i)}if(2===arguments.length){for(var n=arguments[0],r=arguments[1],o=n,a=this.getNumGeometries(),s=o.getNumGeometries(),l=0;l<a&&l<s;){var h=this.getGeometryN(l),u=o.getGeometryN(l),c=h.compareToSameClass(u,r);if(0!==c)return c;l++}return l<a?1:l<s?-1:0}},e.prototype.apply=function(){if(L(arguments[0],ft))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(L(arguments[0],Vt)){var i=arguments[0];if(0===this._geometries.length)return null;for(var n=0;n<this._geometries.length&&(this._geometries[n].apply(i),!i.isDone());n++);i.isGeometryChanged()&&this.geometryChanged()}else if(L(arguments[0],zt)){var r=arguments[0];r.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(r)}else if(L(arguments[0],ut)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),it.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var i=0;i<this._geometries.length;i++)e._geometries[i]=this._geometries[i].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),i=0;i<t.length;i++)t[i]=this._geometries[i].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,i),e}(ct),Gt=function(t){function e(){t.apply(this,arguments)}(0,r.a)(e,"e"),t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,i)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Ft.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),i=0;i<this._geometries.length;i++)e[t-1-i]=this._geometries[i].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Ht(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),i=0;i<t.length;i++)t[i]=this._geometries[i].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Dt]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,i),e}(jt),Ht=(0,r.a)(function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=gt.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var i=arguments[0],n=arguments[1];this._geom=i,this._geomFact=i.getFactory(),this._bnRule=n}},"Yt");Ht.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Ht.prototype.getBoundary=function(){return this._geom instanceof Jt?this.boundaryLineString(this._geom):this._geom instanceof Gt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Ht.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Ht.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Ht.prototype.computeBoundaryCoordinates=function(t){var e=new Mt;this._endpointMap=new p;for(var i=0;i<t.getNumGeometries();i++){var n=t.getGeometryN(i);0!==n.getNumPoints()&&(this.addEndpoint(n.getCoordinateN(0)),this.addEndpoint(n.getCoordinateN(n.getNumPoints()-1)))}for(var r=this._endpointMap.entrySet().iterator();r.hasNext();){var o=r.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return Ct.toCoordinateArray(e)},Ht.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Wt,this._endpointMap.put(t,e)),e.count++},Ht.prototype.interfaces_=function(){return[]},Ht.prototype.getClass=function(){return Ht},Ht.getBoundary=function(){if(1===arguments.length){var t=arguments[0];return new Ht(t).getBoundary()}if(2===arguments.length){var e=arguments[0],i=arguments[1];return new Ht(e,i).getBoundary()}};var Wt=(0,r.a)(function(){this.count=null},"kt");Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt};var Xt=(0,r.a)(function(){},"jt"),Yt={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Xt.prototype.interfaces_=function(){return[]},Xt.prototype.getClass=function(){return Xt},Xt.chars=function(t,e){for(var i=new Array(e).fill(null),n=0;n<e;n++)i[n]=t;return String(i)},Xt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},i=new function(){}(e);return t.printStackTrace(i),e.toString()}if(2===arguments.length){for(var n=arguments[0],r=arguments[1],o="",a=new function(){}(new function(){}(Xt.getStackTrace(n))),s=0;s<r;s++)try{o+=a.readLine()+Xt.NEWLINE}catch(t){if(!(t instanceof g))throw t;it.shouldNeverReachHere()}return o}},Xt.split=function(t,e){for(var i=e.length,n=new Mt,r=""+t,o=r.indexOf(e);o>=0;){var a=r.substring(0,o);n.add(a),o=(r=r.substring(o+i)).indexOf(e)}r.length>0&&n.add(r);for(var s=new Array(n.size()).fill(null),l=0;l<s.length;l++)s[l]=n.get(l);return s},Xt.toString=function(){if(1===arguments.length){var t=arguments[0];return Xt.SIMPLE_ORDINATE_FORMAT.format(t)}},Xt.spaces=function(t){return Xt.chars(" ",t)},Yt.NEWLINE.get=function(){return H.getProperty("line.separator")},Yt.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Xt,Yt);var Zt=(0,r.a)(function(){},"Wt");Zt.prototype.interfaces_=function(){return[]},Zt.prototype.getClass=function(){return Zt},Zt.copyCoord=function(t,e,i,n){for(var r=Math.min(t.getDimension(),i.getDimension()),o=0;o<r;o++)i.setOrdinate(n,o,t.getOrdinate(e,o))},Zt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,z.X)===t.getOrdinate(e-1,z.X)&&t.getOrdinate(0,z.Y)===t.getOrdinate(e-1,z.Y)},Zt.isEqual=function(t,e){var i=t.size();if(i!==e.size())return!1;for(var n=Math.min(t.getDimension(),e.getDimension()),r=0;r<i;r++)for(var o=0;o<n;o++){var a=t.getOrdinate(r,o),s=e.getOrdinate(r,o);if(!(t.getOrdinate(r,o)===e.getOrdinate(r,o)||x.isNaN(a)&&x.isNaN(s)))return!1}return!0},Zt.extend=function(t,e,i){var n=t.create(i,e.getDimension()),r=e.size();if(Zt.copy(e,0,n,0,r),r>0)for(var o=r;o<i;o++)Zt.copy(e,r-1,n,o,1);return n},Zt.reverse=function(t){for(var e=t.size()-1,i=Math.trunc(e/2),n=0;n<=i;n++)Zt.swap(t,n,e-n)},Zt.swap=function(t,e,i){if(e===i)return null;for(var n=0;n<t.getDimension();n++){var r=t.getOrdinate(e,n);t.setOrdinate(e,n,t.getOrdinate(i,n)),t.setOrdinate(i,n,r)}},Zt.copy=function(t,e,i,n,r){for(var o=0;o<r;o++)Zt.copyCoord(t,e+o,i,n+o)},Zt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var i=t.getDimension(),n=new q;n.append("(");for(var r=0;r<e;r++){r>0&&n.append(" ");for(var o=0;o<i;o++)o>0&&n.append(","),n.append(Xt.toString(t.getOrdinate(r,o)))}return n.append(")"),n.toString()}},Zt.ensureValidRing=function(t,e){var i=e.size();return 0===i?e:i<=3?Zt.createClosedRing(t,e,4):e.getOrdinate(0,z.X)===e.getOrdinate(i-1,z.X)&&e.getOrdinate(0,z.Y)===e.getOrdinate(i-1,z.Y)?e:Zt.createClosedRing(t,e,i+1)},Zt.createClosedRing=function(t,e,i){var n=t.create(i,e.getDimension()),r=e.size();Zt.copy(e,0,n,0,r);for(var o=r;o<i;o++)Zt.copy(e,0,n,o,1);return n};var Jt=function(t){function e(e,i){t.call(this,i),this._points=null,this.init(e)}(0,r.a)(e,"e"),t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new X:this._points.expandEnvelope(new X)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1];if(!this.isEquivalentClass(e))return!1;var n=e;if(this._points.size()!==n._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),n._points.getCoordinate(r),i))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Zt.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Ft.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return lt.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Zt.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,i=0;e<this._points.size()&&i<t._points.size();){var n=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(i));if(0!==n)return n;e++,i++}return e<this._points.size()?1:i<t._points.size()?-1:0}if(2===arguments.length){var r=arguments[0];return arguments[1].compare(this._points,r._points)}},e.prototype.apply=function(){if(L(arguments[0],ft))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(L(arguments[0],Vt)){var i=arguments[0];if(0===this._points.size())return null;for(var n=0;n<this._points.size()&&(i.filter(this._points,n),!i.isDone());n++);i.isGeometryChanged()&&this.geometryChanged()}else(L(arguments[0],zt)||L(arguments[0],ut))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Ht(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new _("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Dt]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,i),e}(ct),Kt=(0,r.a)(function(){},"Jt");Kt.prototype.interfaces_=function(){return[]},Kt.prototype.getClass=function(){return Kt};var Qt=function(t){function e(e,i){t.call(this,i),this._coordinates=e||null,this.init(this._coordinates)}(0,r.a)(e,"e"),t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new X;var t=new X;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),i))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(L(arguments[0],ft)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(L(arguments[0],Vt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(L(arguments[0],zt)||L(arguments[0],ut))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),it.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Kt]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,i),e}(ct),$t=(0,r.a)(function(){},"Zt");$t.prototype.interfaces_=function(){return[]},$t.prototype.getClass=function(){return $t};var te=function(t){function e(e,i,n){if(t.call(this,n),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===i&&(i=[]),t.hasNullElements(i))throw new _("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(i))throw new _("shell is empty but holes are not");this._shell=e,this._holes=i}(0,r.a)(e,"e"),t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,i=this._shell.getCoordinates(),n=0;n<i.length;n++)t[++e]=i[n];for(var r=0;r<this._holes.length;r++)for(var o=this._holes[r].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(lt.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(lt.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing()||null===this._shell||5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),i=0;i<5;i++){var n=t.getX(i);if(n!==e.getMinX()&&n!==e.getMaxX())return!1;var r=t.getY(i);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var l=t.getX(s),h=t.getY(s);if(l!==o==(h!==a))return!1;o=l,a=h}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1];if(!this.isEquivalentClass(e))return!1;var n=e,r=this._shell,o=n._shell;if(!r.equalsExact(o,i)||this._holes.length!==n._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(n._holes[a],i))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Bt.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];if(e.isEmpty())return null;var n=new Array(e.getCoordinates().length-1).fill(null);H.arraycopy(e.getCoordinates(),0,n,0,n.length);var r=Ct.minCoordinate(e.getCoordinates());Ct.scroll(n,r),H.arraycopy(n,0,e.getCoordinates(),0,n.length),e.getCoordinates()[n.length]=n[0],lt.isCCW(e.getCoordinates())===i&&Ct.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,i=t._shell;return e.compareToSameClass(i)}if(2===arguments.length){var n=arguments[0],r=arguments[1],o=n,a=this._shell,s=o._shell,l=a.compareToSameClass(s,r);if(0!==l)return l;for(var h=this.getNumInteriorRing(),u=o.getNumInteriorRing(),c=0;c<h&&c<u;){var p=this.getInteriorRingN(c),d=o.getInteriorRingN(c),f=p.compareToSameClass(d,r);if(0!==f)return f;c++}return c<h?1:c<u?-1:0}},e.prototype.apply=function(t){if(L(t,ft)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(L(t,Vt)){if(this._shell.apply(t),!t.isDone())for(var i=0;i<this._holes.length&&(this._holes[i].apply(t),!t.isDone());i++);t.isGeometryChanged()&&this.geometryChanged()}else if(L(t,zt))t.filter(this);else if(L(t,ut)){t.filter(this),this._shell.apply(t);for(var n=0;n<this._holes.length;n++)this._holes[n].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var i=0;i<this._holes.length;i++)e._holes[i]=this._holes[i].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),i=new Array(this._holes.length).fill(null),n=0;n<i.length;n++)i[n]=this._holes[n].copy();return new e(t,i,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[$t]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,i),e}(ct),ee=function(t){function e(){t.apply(this,arguments)}(0,r.a)(e,"e"),t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,i)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),i=0;i<t.length;i++)t[i]=this._geometries[i].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Kt]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,i),e}(jt),ie=function(t){function e(e,i){e instanceof S&&i instanceof ye&&(e=i.getCoordinateSequenceFactory().create(e)),t.call(this,e,i),this.validateConstruction()}(0,r.a)(e,"e"),t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Zt.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new _("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new _("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},i.MINIMUM_VALID_SIZE.get=function(){return 4},i.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,i),e}(Jt),ne=function(t){function e(){t.apply(this,arguments)}(0,r.a)(e,"e"),t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,i)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),i=0;i<this._geometries.length;i++)e[i]=this._geometries[i].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Mt,e=0;e<this._geometries.length;e++)for(var i=this._geometries[e].getBoundary(),n=0;n<i.getNumGeometries();n++)t.add(i.getGeometryN(n));var r=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(r))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),i=0;i<t.length;i++)t[i]=this._geometries[i].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[$t]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,i),e}(jt),re=(0,r.a)(function(t){this._factory=t||null,this._isUserDataCopied=!1},"ie"),oe={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};re.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},re.prototype.edit=function(t,e){if(null===t)return null;var i=this.editInternal(t,e);return this._isUserDataCopied&&i.setUserData(t.getUserData()),i},re.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof jt?this.editGeometryCollection(t,e):t instanceof te?this.editPolygon(t,e):t instanceof Qt||t instanceof Jt?e.edit(t,this._factory):(it.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},re.prototype.editGeometryCollection=function(t,e){for(var i=e.edit(t,this._factory),n=new Mt,r=0;r<i.getNumGeometries();r++){var o=this.edit(i.getGeometryN(r),e);null===o||o.isEmpty()||n.add(o)}return i.getClass()===ee?this._factory.createMultiPoint(n.toArray([])):i.getClass()===Gt?this._factory.createMultiLineString(n.toArray([])):i.getClass()===ne?this._factory.createMultiPolygon(n.toArray([])):this._factory.createGeometryCollection(n.toArray([]))},re.prototype.editPolygon=function(t,e){var i=e.edit(t,this._factory);if(null===i&&(i=this._factory.createPolygon(null)),i.isEmpty())return i;var n=this.edit(i.getExteriorRing(),e);if(null===n||n.isEmpty())return this._factory.createPolygon();for(var r=new Mt,o=0;o<i.getNumInteriorRing();o++){var a=this.edit(i.getInteriorRingN(o),e);null===a||a.isEmpty()||r.add(a)}return this._factory.createPolygon(n,r.toArray([]))},re.prototype.interfaces_=function(){return[]},re.prototype.getClass=function(){return re},re.GeometryEditorOperation=function(){},oe.NoOpGeometryOperation.get=function(){return ae},oe.CoordinateOperation.get=function(){return se},oe.CoordinateSequenceOperation.get=function(){return le},Object.defineProperties(re,oe);var ae=(0,r.a)(function(){},"oe");ae.prototype.edit=function(t,e){return t},ae.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var se=(0,r.a)(function(){},"se");se.prototype.edit=function(t,e){var i=this.editCoordinates(t.getCoordinates(),t);return null===i?t:t instanceof ie?e.createLinearRing(i):t instanceof Jt?e.createLineString(i):t instanceof Qt?i.length>0?e.createPoint(i[0]):e.createPoint():t},se.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var le=(0,r.a)(function(){},"ae");le.prototype.edit=function(t,e){return t instanceof ie?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Jt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Qt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},le.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},le.prototype.getClass=function(){return le};var he=(0,r.a)(function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new S}else if(L(arguments[0],z)){var i=arguments[0];if(null===i)return this._coordinates=new Array(0).fill(null),null;this._dimension=i.getDimension(),this._coordinates=new Array(i.size()).fill(null);for(var n=0;n<this._coordinates.length;n++)this._coordinates[n]=i.getCoordinateCopy(n)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var r=arguments[0],o=arguments[1];this._coordinates=r,this._dimension=o,null===r&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var l=0;l<a;l++)this._coordinates[l]=new S}},"ue"),ue={serialVersionUID:{configurable:!0}};he.prototype.setOrdinate=function(t,e,i){switch(e){case z.X:this._coordinates[t].x=i;break;case z.Y:this._coordinates[t].y=i;break;case z.Z:this._coordinates[t].z=i;break;default:throw new _("invalid ordinateIndex")}},he.prototype.size=function(){return this._coordinates.length},he.prototype.getOrdinate=function(t,e){switch(e){case z.X:return this._coordinates[t].x;case z.Y:return this._coordinates[t].y;case z.Z:return this._coordinates[t].z}return x.NaN},he.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],i=arguments[1];i.x=this._coordinates[e].x,i.y=this._coordinates[e].y,i.z=this._coordinates[e].z}},he.prototype.getCoordinateCopy=function(t){return new S(this._coordinates[t])},he.prototype.getDimension=function(){return this._dimension},he.prototype.getX=function(t){return this._coordinates[t].x},he.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new he(t,this._dimension)},he.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},he.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new he(t,this._dimension)},he.prototype.toString=function(){if(this._coordinates.length>0){var t=new q(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},he.prototype.getY=function(t){return this._coordinates[t].y},he.prototype.toCoordinateArray=function(){return this._coordinates},he.prototype.interfaces_=function(){return[z,e]},he.prototype.getClass=function(){return he},ue.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(he,ue);var ce=(0,r.a)(function(){},"ce"),pe={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ce.prototype.readResolve=function(){return ce.instance()},ce.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new he(t)}if(L(arguments[0],z)){var e=arguments[0];return new he(e)}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];return n>3&&(n=3),n<2?new he(i):new he(i,n)}},ce.prototype.interfaces_=function(){return[A,e]},ce.prototype.getClass=function(){return ce},ce.instance=function(){return ce.instanceObject},pe.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},pe.instanceObject.get=function(){return new ce},Object.defineProperties(ce,pe);var de=function(t){function e(){t.call(this),this.map_=new Map}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new Mt,e=this.map_.values(),i=e.next();!i.done;)t.add(i.value),i=e.next();return t},e.prototype.entrySet=function(){var t=new Nt;return this.map_.entries().forEach(function(e){return t.add(e)}),t},e.prototype.size=function(){return this.map_.size()},e}(Lt),fe=(0,r.a)(function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof me){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var i=arguments[0];this._modelType=t.FIXED,this.setScale(i)}else if(arguments[0]instanceof t){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}},"t"),ge={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};fe.prototype.equals=function(t){if(!(t instanceof fe))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},fe.prototype.compareTo=function(t){var e=t,i=this.getMaximumSignificantDigits(),n=e.getMaximumSignificantDigits();return new R(i).compareTo(new R(n))},fe.prototype.getScale=function(){return this._scale},fe.prototype.isFloating=function(){return this._modelType===fe.FLOATING||this._modelType===fe.FLOATING_SINGLE},fe.prototype.getType=function(){return this._modelType},fe.prototype.toString=function(){var t="UNKNOWN";return this._modelType===fe.FLOATING?t="Floating":this._modelType===fe.FLOATING_SINGLE?t="Floating-Single":this._modelType===fe.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},fe.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return x.isNaN(t)||this._modelType===fe.FLOATING_SINGLE?t:this._modelType===fe.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof S){var e=arguments[0];if(this._modelType===fe.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},fe.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===fe.FLOATING?t=16:this._modelType===fe.FLOATING_SINGLE?t=6:this._modelType===fe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},fe.prototype.setScale=function(t){this._scale=Math.abs(t)},fe.prototype.interfaces_=function(){return[e,w]},fe.prototype.getClass=function(){return fe},fe.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},ge.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},ge.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(fe,ge);var me=(0,r.a)(function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},"t"),ve={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};me.prototype.readResolve=function(){return me.nameToTypeMap.get(this._name)},me.prototype.toString=function(){return this._name},me.prototype.interfaces_=function(){return[e]},me.prototype.getClass=function(){return me},ve.serialVersionUID.get=function(){return-552860263173159e4},ve.nameToTypeMap.get=function(){return new de},Object.defineProperties(me,ve),fe.Type=me,fe.FIXED=new me("FIXED"),fe.FLOATING=new me("FLOATING"),fe.FLOATING_SINGLE=new me("FLOATING SINGLE");var ye=(0,r.a)(function t(){this._precisionModel=new fe,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?L(arguments[0],A)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof fe&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},"t"),_e={serialVersionUID:{configurable:!0}};ye.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new S(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new S(t.getMinX(),t.getMinY()),new S(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new S(t.getMinX(),t.getMinY()),new S(t.getMinX(),t.getMaxY()),new S(t.getMaxX(),t.getMaxY()),new S(t.getMaxX(),t.getMinY()),new S(t.getMinX(),t.getMinY())]),null)},ye.prototype.createLineString=function(t){return t?t instanceof Array?new Jt(this.getCoordinateSequenceFactory().create(t),this):L(t,z)?new Jt(t,this):void 0:new Jt(this.getCoordinateSequenceFactory().create([]),this)},ye.prototype.createMultiLineString=function(){if(0===arguments.length)return new Gt(null,this);if(1===arguments.length){var t=arguments[0];return new Gt(t,this)}},ye.prototype.buildGeometry=function(t){for(var e=null,i=!1,n=!1,r=t.iterator();r.hasNext();){var o=r.next(),a=o.getClass();null===e&&(e=a),a!==e&&(i=!0),o.isGeometryCollectionOrDerived()&&(n=!0)}if(null===e)return this.createGeometryCollection();if(i||n)return this.createGeometryCollection(ye.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof te)return this.createMultiPolygon(ye.toPolygonArray(t));if(s instanceof Jt)return this.createMultiLineString(ye.toLineStringArray(t));if(s instanceof Qt)return this.createMultiPoint(ye.toPointArray(t));it.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},ye.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},ye.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(L(arguments[0],z)){var e=arguments[0];return new Qt(e,this)}}},ye.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},ye.prototype.createPolygon=function(){if(0===arguments.length)return new te(null,null,this);if(1===arguments.length){if(L(arguments[0],z)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ie){var i=arguments[0];return this.createPolygon(i,null)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return new te(n,r,this)}},ye.prototype.getSRID=function(){return this._SRID},ye.prototype.createGeometryCollection=function(){if(0===arguments.length)return new jt(null,this);if(1===arguments.length){var t=arguments[0];return new jt(t,this)}},ye.prototype.createGeometry=function(t){return new re(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},ye.prototype.getPrecisionModel=function(){return this._precisionModel},ye.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(L(arguments[0],z)){var e=arguments[0];return new ie(e,this)}}},ye.prototype.createMultiPolygon=function(){if(0===arguments.length)return new ne(null,this);if(1===arguments.length){var t=arguments[0];return new ne(t,this)}},ye.prototype.createMultiPoint=function(){if(0===arguments.length)return new ee(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new ee(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(L(arguments[0],z)){var i=arguments[0];if(null===i)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(i.size()).fill(null),r=0;r<i.size();r++){var o=this.getCoordinateSequenceFactory().create(1,i.getDimension());Zt.copy(i,r,o,0,1),n[r]=this.createPoint(o)}return this.createMultiPoint(n)}}},ye.prototype.interfaces_=function(){return[e]},ye.prototype.getClass=function(){return ye},ye.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.getDefaultCoordinateSequenceFactory=function(){return ce.instance()},ye.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},_e.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(ye,_e);var xe=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],be=(0,r.a)(function(t){this.geometryFactory=t||new ye},"Ie");be.prototype.read=function(t){var e,i=(e="string"==typeof t?JSON.parse(t):t).type;if(!we[i])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==xe.indexOf(i)?we[i].apply(this,[e.coordinates]):"GeometryCollection"===i?we[i].apply(this,[e.geometries]):we[i].apply(this,[e])},be.prototype.write=function(t){var e=t.getGeometryType();if(!Ee[e])throw new Error("Geometry is not supported");return Ee[e].apply(this,[t])};var we={Feature:function(t){var e={};for(var i in t)e[i]=t[i];if(t.geometry){var n=t.geometry.type;if(!we[n])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=we.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var i=0;i<t.features.length;++i)e.features.push(this.read(t.features[i]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],i=0;i<t.length;++i){var n=t[i];e.push(new S(n[0],n[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new S(t[0],t[1]),new S(t[2],t[1]),new S(t[2],t[3]),new S(t[0],t[3]),new S(t[0],t[1])])},Point:function(t){var e=new S(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],i=0;i<t.length;++i)e.push(we.Point.apply(this,[t[i]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=we.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],i=0;i<t.length;++i)e.push(we.LineString.apply(this,[t[i]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=we.coordinates.apply(this,[t[0]]),i=this.geometryFactory.createLinearRing(e),n=[],r=1;r<t.length;++r){var o=t[r],a=we.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);n.push(s)}return this.geometryFactory.createPolygon(i,n)},MultiPolygon:function(t){for(var e=[],i=0;i<t.length;++i){var n=t[i];e.push(we.Polygon.apply(this,[n]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],i=0;i<t.length;++i){var n=t[i];e.push(this.read(n))}return this.geometryFactory.createGeometryCollection(e)}},Ee={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Ee.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],i=0;i<t._geometries.length;++i){var n=t._geometries[i],r=Ee.Point.apply(this,[n]);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],i=t.getCoordinates(),n=0;n<i.length;++n){var r=i[n];e.push(Ee.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],i=0;i<t._geometries.length;++i){var n=t._geometries[i],r=Ee.LineString.apply(this,[n]);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],i=Ee.LineString.apply(this,[t._shell]);e.push(i.coordinates);for(var n=0;n<t._holes.length;++n){var r=t._holes[n],o=Ee.LineString.apply(this,[r]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],i=0;i<t._geometries.length;++i){var n=t._geometries[i],r=Ee.Polygon.apply(this,[n]);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],i=0;i<t._geometries.length;++i){var n=t._geometries[i],r=n.getGeometryType();e.push(Ee[r].apply(this,[n]))}return{type:"GeometryCollection",geometries:e}}},Me=(0,r.a)(function(t){this.geometryFactory=t||new ye,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new be(this.geometryFactory)},"Ne");Me.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===fe.FIXED&&this.reducePrecision(e),e},Me.prototype.reducePrecision=function(t){var e,i;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,i=t.points.length;e<i;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,i=t.geometries.length;e<i;e++)this.reducePrecision(t.geometries[e])};var Se=(0,r.a)(function(){this.parser=new be(this.geometryFactory)},"Ce");Se.prototype.write=function(t){return this.parser.write(t)};var Te=(0,r.a)(function(){},"Se"),Ce={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Te.prototype.interfaces_=function(){return[]},Te.prototype.getClass=function(){return Te},Te.opposite=function(t){return t===Te.LEFT?Te.RIGHT:t===Te.RIGHT?Te.LEFT:t},Ce.ON.get=function(){return 0},Ce.LEFT.get=function(){return 1},Ce.RIGHT.get=function(){return 2},Object.defineProperties(Te,Ce),(m.prototype=new Error).name="EmptyStackException",(v.prototype=new Et).add=function(t){return this.array_.push(t),!0},v.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},v.prototype.push=function(t){return this.array_.push(t),t},v.prototype.pop=function(t){if(0===this.array_.length)throw new m;return this.array_.pop()},v.prototype.peek=function(){if(0===this.array_.length)throw new m;return this.array_[this.array_.length-1]},v.prototype.empty=function(){return 0===this.array_.length},v.prototype.isEmpty=function(){return this.empty()},v.prototype.search=function(t){return this.array_.indexOf(t)},v.prototype.size=function(){return this.array_.length},v.prototype.toArray=function(){for(var t=[],e=0,i=this.array_.length;e<i;e++)t.push(this.array_[e]);return t};var Ae=(0,r.a)(function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null},"be");Ae.prototype.getCoordinate=function(){return this._minCoord},Ae.prototype.getRightmostSide=function(t,e){var i=this.getRightmostSideOfSegment(t,e);return i<0&&(i=this.getRightmostSideOfSegment(t,e-1)),i<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),i},Ae.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();it.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],i=t[this._minIndex+1],n=lt.computeOrientation(this._minCoord,i,e),r=!1;(e.y<this._minCoord.y&&i.y<this._minCoord.y&&n===lt.COUNTERCLOCKWISE||e.y>this._minCoord.y&&i.y>this._minCoord.y&&n===lt.CLOCKWISE)&&(r=!0),r&&(this._minIndex=this._minIndex-1)},Ae.prototype.getRightmostSideOfSegment=function(t,e){var i=t.getEdge().getCoordinates();if(e<0||e+1>=i.length||i[e].y===i[e+1].y)return-1;var n=Te.LEFT;return i[e].y<i[e+1].y&&(n=Te.RIGHT),n},Ae.prototype.getEdge=function(){return this._orientedDe},Ae.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),i=0;i<e.length-1;i++)(null===this._minCoord||e[i].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=i,this._minCoord=e[i])},Ae.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Ae.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var i=e.next();i.isForward()&&this.checkForRightmostCoordinate(i)}it.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Te.LEFT&&(this._orientedDe=this._minDe.getSym())},Ae.prototype.interfaces_=function(){return[]},Ae.prototype.getClass=function(){return Ae};var Pe=function(t){function e(i,n){t.call(this,e.msgWithCoord(i,n)),this.pt=n?new S(n):null,this.name="TopologyException"}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(tt),Ie=(0,r.a)(function(){this.array_=[]},"Oe");Ie.prototype.addLast=function(t){this.array_.push(t)},Ie.prototype.removeFirst=function(){return this.array_.shift()},Ie.prototype.isEmpty=function(){return 0===this.array_.length};var Le=(0,r.a)(function(){this._finder=null,this._dirEdgeList=new Mt,this._nodes=new Mt,this._rightMostCoord=null,this._env=null,this._finder=new Ae},"Te");Le.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Le.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Le.prototype.computeNodeDepth=function(t){for(var e=null,i=t.getEdges().iterator();i.hasNext();){var n=i.next();if(n.isVisited()||n.getSym().isVisited()){e=n;break}}if(null===e)throw new Pe("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var r=t.getEdges().iterator();r.hasNext();){var o=r.next();o.setVisited(!0),this.copySymDepths(o)}},Le.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Te.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Le.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Le.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Te.RIGHT)>=1&&e.getDepth(Te.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Le.prototype.computeDepths=function(t){var e=new Nt,i=new Ie,n=t.getNode();for(i.addLast(n),e.add(n),t.setVisited(!0);!i.isEmpty();){var r=i.removeFirst();e.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(i.addLast(s),e.add(s))}}}},Le.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Le.prototype.getEnvelope=function(){if(null===this._env){for(var t=new X,e=this._dirEdgeList.iterator();e.hasNext();)for(var i=e.next().getEdge().getCoordinates(),n=0;n<i.length-1;n++)t.expandToInclude(i[n]);this._env=t}return this._env},Le.prototype.addReachable=function(t){var e=new v;for(e.add(t);!e.empty();){var i=e.pop();this.add(i,e)}},Le.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Te.LEFT,t.getDepth(Te.RIGHT)),e.setDepth(Te.RIGHT,t.getDepth(Te.LEFT))},Le.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var i=t.getEdges().iterator();i.hasNext();){var n=i.next();this._dirEdgeList.add(n);var r=n.getSym().getNode();r.isVisited()||e.push(r)}},Le.prototype.getNodes=function(){return this._nodes},Le.prototype.getDirectedEdges=function(){return this._dirEdgeList},Le.prototype.interfaces_=function(){return[w]},Le.prototype.getClass=function(){return Le};var Oe=(0,r.a)(function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var i=arguments[0];this.init(1),this.location[Te.ON]=i}else if(arguments[0]instanceof t){var n=arguments[0];if(this.init(n.location.length),null!==n)for(var r=0;r<this.location.length;r++)this.location[r]=n.location[r]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[Te.ON]=o,this.location[Te.LEFT]=a,this.location[Te.RIGHT]=s}},"t");Oe.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Oe.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==P.NONE)return!1;return!0},Oe.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===P.NONE&&(this.location[e]=t)},Oe.prototype.isLine=function(){return 1===this.location.length},Oe.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Te.ON]=this.location[Te.ON],e[Te.LEFT]=P.NONE,e[Te.RIGHT]=P.NONE,this.location=e}for(var i=0;i<this.location.length;i++)this.location[i]===P.NONE&&i<t.location.length&&(this.location[i]=t.location[i])},Oe.prototype.getLocations=function(){return this.location},Oe.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Te.LEFT];this.location[Te.LEFT]=this.location[Te.RIGHT],this.location[Te.RIGHT]=t},Oe.prototype.toString=function(){var t=new q;return this.location.length>1&&t.append(P.toLocationSymbol(this.location[Te.LEFT])),t.append(P.toLocationSymbol(this.location[Te.ON])),this.location.length>1&&t.append(P.toLocationSymbol(this.location[Te.RIGHT])),t.toString()},Oe.prototype.setLocations=function(t,e,i){this.location[Te.ON]=t,this.location[Te.LEFT]=e,this.location[Te.RIGHT]=i},Oe.prototype.get=function(t){return t<this.location.length?this.location[t]:P.NONE},Oe.prototype.isArea=function(){return this.location.length>1},Oe.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===P.NONE)return!0;return!1},Oe.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Te.ON,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.location[e]=i}},Oe.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(P.NONE)},Oe.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Oe.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Oe.prototype.interfaces_=function(){return[]},Oe.prototype.getClass=function(){return Oe};var Ne=(0,r.a)(function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Oe(e),this.elt[1]=new Oe(e)}else if(arguments[0]instanceof t){var i=arguments[0];this.elt[0]=new Oe(i.elt[0]),this.elt[1]=new Oe(i.elt[1])}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.elt[0]=new Oe(P.NONE),this.elt[1]=new Oe(P.NONE),this.elt[n].setLocation(r)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Oe(o,a,s),this.elt[1]=new Oe(o,a,s)}else if(4===arguments.length){var l=arguments[0],h=arguments[1],u=arguments[2],c=arguments[3];this.elt[0]=new Oe(P.NONE,P.NONE,P.NONE),this.elt[1]=new Oe(P.NONE,P.NONE,P.NONE),this.elt[l].setLocations(h,u,c)}},"t");Ne.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Ne.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Ne.prototype.isNull=function(t){return this.elt[t].isNull()},Ne.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.elt[e].setAllLocationsIfNull(i)}},Ne.prototype.isLine=function(t){return this.elt[t].isLine()},Ne.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Oe(t.elt[e]):this.elt[e].merge(t.elt[e])},Ne.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Ne.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Te.ON)}if(2===arguments.length){var e=arguments[0],i=arguments[1];return this.elt[e].get(i)}},Ne.prototype.toString=function(){var t=new q;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Ne.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Ne.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Ne.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Te.ON,e)}else if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2];this.elt[i].setLocation(n,r)}},Ne.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Ne.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Ne.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Oe(this.elt[t].location[0]))},Ne.prototype.interfaces_=function(){return[]},Ne.prototype.getClass=function(){return Ne},Ne.toLineLabel=function(t){for(var e=new Ne(P.NONE),i=0;i<2;i++)e.setLocation(i,t.getLocation(i));return e};var qe=(0,r.a)(function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Mt,this._pts=new Mt,this._label=new Ne(P.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Mt,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()},"De");qe.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=lt.isCCW(this._ring.getCoordinates())},qe.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},qe.prototype.computePoints=function(t){this._startDe=t;var e=t,i=!0;do{if(null===e)throw new Pe("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Pe("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var n=e.getLabel();it.isTrue(n.isArea()),this.mergeLabel(n),this.addPoints(e.getEdge(),e.isForward(),i),i=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},qe.prototype.getLinearRing=function(){return this._ring},qe.prototype.getCoordinate=function(t){return this._pts.get(t)},qe.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},qe.prototype.addPoints=function(t,e,i){var n=t.getCoordinates();if(e){var r=1;i&&(r=0);for(var o=r;o<n.length;o++)this._pts.add(n[o])}else{var a=n.length-2;i&&(a=n.length-1);for(var s=a;s>=0;s--)this._pts.add(n[s])}},qe.prototype.isHole=function(){return this._isHole},qe.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},qe.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t)||!lt.isPointInRing(t,e.getCoordinates()))return!1;for(var i=this._holes.iterator();i.hasNext();)if(i.next().containsPoint(t))return!1;return!0},qe.prototype.addHole=function(t){this._holes.add(t)},qe.prototype.isShell=function(){return null===this._shell},qe.prototype.getLabel=function(){return this._label},qe.prototype.getEdges=function(){return this._edges},qe.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},qe.prototype.getShell=function(){return this._shell},qe.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],i=arguments[1],n=e.getLocation(i,Te.RIGHT);if(n===P.NONE)return null;if(this._label.getLocation(i)===P.NONE)return this._label.setLocation(i,n),null}},qe.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},qe.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),i=0;i<this._holes.size();i++)e[i]=this._holes.get(i).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},qe.prototype.interfaces_=function(){return[]},qe.prototype.getClass=function(){return qe};var Re=function(t){function e(){var e=arguments[0],i=arguments[1];t.call(this,e,i)}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qe),De=function(t){function e(){var e=arguments[0],i=arguments[1];t.call(this,e,i)}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new Mt,e=this._startDe;do{if(null===e.getMinEdgeRing()){var i=new Re(e,this._geometryFactory);t.add(i)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qe),ke=(0,r.a)(function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0!==arguments.length&&1===arguments.length){var t=arguments[0];this._label=t}},"Fe");ke.prototype.setVisited=function(t){this._isVisited=t},ke.prototype.setInResult=function(t){this._isInResult=t},ke.prototype.isCovered=function(){return this._isCovered},ke.prototype.isCoveredSet=function(){return this._isCoveredSet},ke.prototype.setLabel=function(t){this._label=t},ke.prototype.getLabel=function(){return this._label},ke.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},ke.prototype.updateIM=function(t){it.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},ke.prototype.isInResult=function(){return this._isInResult},ke.prototype.isVisited=function(){return this._isVisited},ke.prototype.interfaces_=function(){return[]},ke.prototype.getClass=function(){return ke};var Be=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],i=arguments[1];this._coord=e,this._edges=i,this._label=new Ne(0,P.NONE)}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var i=P.NONE;if(i=this._label.getLocation(e),!t.isNull(e)){var n=t.getLocation(e);i!==P.BOUNDARY&&(i=n)}return i},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],i=arguments[1];null===this._label?this._label=new Ne(e,i):this._label.setLocation(e,i)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Ne)for(var i=arguments[0],n=0;n<2;n++){var r=this.computeMergedLocation(i,n);this._label.getLocation(n)===P.NONE&&this._label.setLocation(n,r)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=P.NONE;null!==this._label&&(e=this._label.getLocation(t));var i=null;switch(e){case P.BOUNDARY:i=P.INTERIOR;break;case P.INTERIOR:default:i=P.BOUNDARY}this._label.setLocation(t,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ke),Fe=(0,r.a)(function(){this.nodeMap=new p,this.nodeFact=null;var t=arguments[0];this.nodeFact=t},"qe");Fe.prototype.find=function(t){return this.nodeMap.get(t)},Fe.prototype.addNode=function(){if(arguments[0]instanceof S){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Be){var i=arguments[0],n=this.nodeMap.get(i.getCoordinate());return null===n?(this.nodeMap.put(i.getCoordinate(),i),i):(n.mergeLabel(i),n)}},Fe.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Fe.prototype.iterator=function(){return this.nodeMap.values().iterator()},Fe.prototype.values=function(){return this.nodeMap.values()},Fe.prototype.getBoundaryNodes=function(t){for(var e=new Mt,i=this.iterator();i.hasNext();){var n=i.next();n.getLabel().getLocation(t)===P.BOUNDARY&&e.add(n)}return e},Fe.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Fe.prototype.interfaces_=function(){return[]},Fe.prototype.getClass=function(){return Fe};var Ue=(0,r.a)(function(){},"Be"),ze={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Ue.prototype.interfaces_=function(){return[]},Ue.prototype.getClass=function(){return Ue},Ue.isNorthern=function(t){return t===Ue.NE||t===Ue.NW},Ue.isOpposite=function(t,e){return t!==e&&(t-e+4)%4==2},Ue.commonHalfPlane=function(t,e){if(t===e)return t;if((t-e+4)%4==2)return-1;var i=t<e?t:e;return 0===i&&3===(t>e?t:e)?3:i},Ue.isInHalfPlane=function(t,e){return e===Ue.SE?t===Ue.SE||t===Ue.SW:t===e||t===e+1},Ue.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new _("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Ue.NE:Ue.SE:e>=0?Ue.NW:Ue.SW}if(arguments[0]instanceof S&&arguments[1]instanceof S){var i=arguments[0],n=arguments[1];if(n.x===i.x&&n.y===i.y)throw new _("Cannot compute the quadrant for two identical points "+i);return n.x>=i.x?n.y>=i.y?Ue.NE:Ue.SE:n.y>=i.y?Ue.NW:Ue.SW}},ze.NE.get=function(){return 0},ze.NW.get=function(){return 1},ze.SW.get=function(){return 2},ze.SE.get=function(){return 3},Object.defineProperties(Ue,ze);var Ve=(0,r.a)(function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],i=arguments[1],n=arguments[2];this._edge=e,this.init(i,n),this._label=null}else if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=r,this.init(o,a),this._label=s}},"Ue");Ve.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:lt.computeOrientation(t._p0,t._p1,this._p1)},Ve.prototype.getDy=function(){return this._dy},Ve.prototype.getCoordinate=function(){return this._p0},Ve.prototype.setNode=function(t){this._node=t},Ve.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),i=this.getClass().getName(),n=i.lastIndexOf("."),r=i.substring(n+1);t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Ve.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Ve.prototype.getDirectedCoordinate=function(){return this._p1},Ve.prototype.getDx=function(){return this._dx},Ve.prototype.getLabel=function(){return this._label},Ve.prototype.getEdge=function(){return this._edge},Ve.prototype.getQuadrant=function(){return this._quadrant},Ve.prototype.getNode=function(){return this._node},Ve.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),i=e.lastIndexOf(".");return"  "+e.substring(i+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Ve.prototype.computeLabel=function(t){},Ve.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Ue.quadrant(this._dx,this._dy),it.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Ve.prototype.interfaces_=function(){return[w]},Ve.prototype.getClass=function(){return Ve};var je=function(t){function e(){var e=arguments[0],i=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=i,i)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var n=e.getNumPoints()-1;this.init(e.getCoordinate(n),e.getCoordinate(n-1))}this.computeDirectedLabel()}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Ne(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Pe("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Te.LEFT)===P.INTERIOR&&this._label.getLocation(e,Te.RIGHT)===P.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Te.LEFT]+"/"+this._depth[Te.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,P.EXTERIOR),i=!this._label.isArea(1)||this._label.allPositionsEqual(1,P.EXTERIOR);return t&&e&&i},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var i=this.getEdge().getDepthDelta();this._isForward||(i=-i);var n=1;t===Te.LEFT&&(n=-1);var r=Te.opposite(t),o=e+i*n;this.setDepth(t,e),this.setDepth(r,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===P.EXTERIOR&&e===P.INTERIOR?1:t===P.INTERIOR&&e===P.EXTERIOR?-1:0},e}(Ve),Ge=(0,r.a)(function(){},"Xe");Ge.prototype.createNode=function(t){return new Be(t,null)},Ge.prototype.interfaces_=function(){return[]},Ge.prototype.getClass=function(){return Ge};var He=(0,r.a)(function(){if(this._edges=new Mt,this._nodes=null,this._edgeEndList=new Mt,0===arguments.length)this._nodes=new Fe(new Ge);else if(1===arguments.length){var t=arguments[0];this._nodes=new Fe(t)}},"Ye");He.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var i=this._edges.get(e);i.print(t),i.eiList.print(t)}},He.prototype.find=function(t){return this._nodes.find(t)},He.prototype.addNode=function(){if(arguments[0]instanceof Be){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof S){var e=arguments[0];return this._nodes.addNode(e)}},He.prototype.getNodeIterator=function(){return this._nodes.iterator()},He.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},He.prototype.debugPrintln=function(t){H.out.println(t)},He.prototype.isBoundaryNode=function(t,e){var i=this._nodes.find(e);if(null===i)return!1;var n=i.getLabel();return null!==n&&n.getLocation(t)===P.BOUNDARY},He.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},He.prototype.matchInSameDirection=function(t,e,i,n){return!!t.equals(i)&&lt.computeOrientation(t,e,n)===lt.COLLINEAR&&Ue.quadrant(t,e)===Ue.quadrant(i,n)},He.prototype.getEdgeEnds=function(){return this._edgeEndList},He.prototype.debugPrint=function(t){H.out.print(t)},He.prototype.getEdgeIterator=function(){return this._edges.iterator()},He.prototype.findEdgeInSameDirection=function(t,e){for(var i=0;i<this._edges.size();i++){var n=this._edges.get(i),r=n.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1])||this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return n}return null},He.prototype.insertEdge=function(t){this._edges.add(t)},He.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var i=e.next();if(i.getEdge()===t)return i}return null},He.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var i=e.next();this._edges.add(i);var n=new je(i,!0),r=new je(i,!1);n.setSym(r),r.setSym(n),this.add(n),this.add(r)}},He.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},He.prototype.getNodes=function(){return this._nodes.values()},He.prototype.findEdge=function(t,e){for(var i=0;i<this._edges.size();i++){var n=this._edges.get(i),r=n.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return n}return null},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He},He.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var We=(0,r.a)(function(){this._geometryFactory=null,this._shellList=new Mt;var t=arguments[0];this._geometryFactory=t},"ke");We.prototype.sortShellsAndHoles=function(t,e,i){for(var n=t.iterator();n.hasNext();){var r=n.next();r.isHole()?i.add(r):e.add(r)}},We.prototype.computePolygons=function(t){for(var e=new Mt,i=t.iterator();i.hasNext();){var n=i.next().toPolygon(this._geometryFactory);e.add(n)}return e},We.prototype.placeFreeHoles=function(t,e){for(var i=e.iterator();i.hasNext();){var n=i.next();if(null===n.getShell()){var r=this.findEdgeRingContaining(n,t);if(null===r)throw new Pe("unable to assign hole to a shell",n.getCoordinate(0));n.setShell(r)}}},We.prototype.buildMinimalEdgeRings=function(t,e,i){for(var n=new Mt,r=t.iterator();r.hasNext();){var o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):i.addAll(a)}else n.add(o)}return n},We.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},We.prototype.buildMaximalEdgeRings=function(t){for(var e=new Mt,i=t.iterator();i.hasNext();){var n=i.next();if(n.isInResult()&&n.getLabel().isArea()&&null===n.getEdgeRing()){var r=new De(n,this._geometryFactory);e.add(r),r.setInResult()}}return e},We.prototype.placePolygonHoles=function(t,e){for(var i=e.iterator();i.hasNext();){var n=i.next();n.isHole()&&n.setShell(t)}},We.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},We.prototype.findEdgeRingContaining=function(t,e){for(var i=t.getLinearRing(),n=i.getEnvelopeInternal(),r=i.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var l=s.next(),h=l.getLinearRing(),u=h.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var c=!1;u.contains(n)&&lt.isPointInRing(r,h.getCoordinates())&&(c=!0),c&&(null===o||a.contains(u))&&(o=l)}return o},We.prototype.findShell=function(t){for(var e=0,i=null,n=t.iterator();n.hasNext();){var r=n.next();r.isHole()||(i=r,e++)}return it.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),i},We.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],i=arguments[1];He.linkResultDirectedEdges(i);var n=this.buildMaximalEdgeRings(e),r=new Mt,o=this.buildMinimalEdgeRings(n,this._shellList,r);this.sortShellsAndHoles(o,this._shellList,r),this.placeFreeHoles(this._shellList,r)}},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We};var Xe=(0,r.a)(function(){},"je");Xe.prototype.getBounds=function(){},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe};var Ye=(0,r.a)(function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e},"He");Ye.prototype.getItem=function(){return this._item},Ye.prototype.getBounds=function(){return this._bounds},Ye.prototype.interfaces_=function(){return[Xe,e]},Ye.prototype.getClass=function(){return Ye};var Ze=(0,r.a)(function(){this._size=null,this._items=null,this._size=0,this._items=new Mt,this._items.add(null)},"We");Ze.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Ze.prototype.size=function(){return this._size},Ze.prototype.reorder=function(t){for(var e=null,i=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(i)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,i)},Ze.prototype.clear=function(){this._size=0,this._items.clear()},Ze.prototype.isEmpty=function(){return 0===this._size},Ze.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Ze.prototype.interfaces_=function(){return[]},Ze.prototype.getClass=function(){return Ze};var Je=(0,r.a)(function(){},"Ke");Je.prototype.visitItem=function(t){},Je.prototype.interfaces_=function(){return[]},Je.prototype.getClass=function(){return Je};var Ke=(0,r.a)(function(){},"Je");Ke.prototype.insert=function(t,e){},Ke.prototype.remove=function(t,e){},Ke.prototype.query=function(){},Ke.prototype.interfaces_=function(){return[]},Ke.prototype.getClass=function(){return Ke};var Qe=(0,r.a)(function(){if(this._childBoundables=new Mt,this._bounds=null,this._level=null,0!==arguments.length&&1===arguments.length){var t=arguments[0];this._level=t}},"Qe"),$e={serialVersionUID:{configurable:!0}};Qe.prototype.getLevel=function(){return this._level},Qe.prototype.size=function(){return this._childBoundables.size()},Qe.prototype.getChildBoundables=function(){return this._childBoundables},Qe.prototype.addChildBoundable=function(t){it.isTrue(null===this._bounds),this._childBoundables.add(t)},Qe.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Qe.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Qe.prototype.interfaces_=function(){return[Xe,e]},Qe.prototype.getClass=function(){return Qe},$e.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Qe,$e);var ti=(0,r.a)(function(){},"$e");ti.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},ti.min=function(t){return ti.sort(t),t.get(0)},ti.sort=function(t,e){var i=t.toArray();e?Bt.sort(i,e):Bt.sort(i);for(var n=t.iterator(),r=0,o=i.length;r<o;r++)n.next(),n.set(i[r])},ti.singletonList=function(t){var e=new Mt;return e.add(t),e};var ei=(0,r.a)(function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],i=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=i,this._distance=this.distance()},"tn");ei.prototype.expandToQueue=function(t,e){var i=ei.isComposite(this._boundable1),n=ei.isComposite(this._boundable2);if(i&&n)return ei.area(this._boundable1)>ei.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(i)return this.expand(this._boundable1,this._boundable2,t,e),null;if(n)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new _("neither boundable is composite")},ei.prototype.isLeaves=function(){return!(ei.isComposite(this._boundable1)||ei.isComposite(this._boundable2))},ei.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},ei.prototype.expand=function(t,e,i,n){for(var r=t.getChildBoundables().iterator();r.hasNext();){var o=r.next(),a=new ei(o,e,this._itemDistance);a.getDistance()<n&&i.add(a)}},ei.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},ei.prototype.getDistance=function(){return this._distance},ei.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},ei.prototype.interfaces_=function(){return[w]},ei.prototype.getClass=function(){return ei},ei.area=function(t){return t.getBounds().getArea()},ei.isComposite=function(t){return t instanceof Qe};var ii=(0,r.a)(function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Mt,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var i=arguments[0];it.isTrue(i>1,"Node capacity must be greater than 1"),this._nodeCapacity=i}},"t"),ni={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};ii.prototype.getNodeCapacity=function(){return this._nodeCapacity},ii.prototype.lastNode=function(t){return t.get(t.size()-1)},ii.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var i=e.next();i instanceof Qe?t+=this.size(i):i instanceof Ye&&(t+=1)}return t}},ii.prototype.removeItem=function(t,e){for(var i=null,n=t.getChildBoundables().iterator();n.hasNext();){var r=n.next();r instanceof Ye&&r.getItem()===e&&(i=r)}return null!==i&&(t.getChildBoundables().remove(i),!0)},ii.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new Mt:t}if(1===arguments.length){for(var e=arguments[0],i=new Mt,n=e.getChildBoundables().iterator();n.hasNext();){var r=n.next();if(r instanceof Qe){var o=this.itemsTree(r);null!==o&&i.add(o)}else r instanceof Ye?i.add(r.getItem()):it.shouldNeverReachHere()}return i.size()<=0?null:i}},ii.prototype.insert=function(t,e){it.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Ye(t,e))},ii.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Mt;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2];if(it.isTrue(i>-2),n.getLevel()===i)return r.add(n),null;for(var o=n.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Qe?this.boundablesAtLevel(i,a,r):(it.isTrue(a instanceof Ye),-1===i&&r.add(a))}return null}},ii.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new Mt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var i=arguments[0],n=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),i)&&this.query(i,this._root,n)}else if(3===arguments.length)if(L(arguments[2],Je)&&arguments[0]instanceof Object&&arguments[1]instanceof Qe)for(var r=arguments[0],o=arguments[1],a=arguments[2],s=o.getChildBoundables(),l=0;l<s.size();l++){var h=s.get(l);this.getIntersectsOp().intersects(h.getBounds(),r)&&(h instanceof Qe?this.query(r,h,a):h instanceof Ye?a.visitItem(h.getItem()):it.shouldNeverReachHere())}else if(L(arguments[2],Et)&&arguments[0]instanceof Object&&arguments[1]instanceof Qe)for(var u=arguments[0],c=arguments[1],p=arguments[2],d=c.getChildBoundables(),f=0;f<d.size();f++){var g=d.get(f);this.getIntersectsOp().intersects(g.getBounds(),u)&&(g instanceof Qe?this.query(u,g,p):g instanceof Ye?p.add(g.getItem()):it.shouldNeverReachHere())}},ii.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},ii.prototype.getRoot=function(){return this.build(),this._root},ii.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2],o=this.removeItem(n,r);if(o)return!0;for(var a=null,s=n.getChildBoundables().iterator();s.hasNext();){var l=s.next();if(this.getIntersectsOp().intersects(l.getBounds(),i)&&l instanceof Qe&&(o=this.remove(i,l,r))){a=l;break}}return null!==a&&a.getChildBoundables().isEmpty()&&n.getChildBoundables().remove(a),o}},ii.prototype.createHigherLevels=function(t,e){it.isTrue(!t.isEmpty());var i=this.createParentBoundables(t,e+1);return 1===i.size()?i.get(0):this.createHigherLevels(i,e+1)},ii.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var i=e.next();if(i instanceof Qe){var n=this.depth(i);n>t&&(t=n)}}return t+1}},ii.prototype.createParentBoundables=function(t,e){it.isTrue(!t.isEmpty());var i=new Mt;i.add(this.createNode(e));var n=new Mt(t);ti.sort(n,this.getComparator());for(var r=n.iterator();r.hasNext();){var o=r.next();this.lastNode(i).getChildBoundables().size()===this.getNodeCapacity()&&i.add(this.createNode(e)),this.lastNode(i).addChildBoundable(o)}return i},ii.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},ii.prototype.interfaces_=function(){return[e]},ii.prototype.getClass=function(){return ii},ii.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},ni.IntersectsOp.get=function(){return ri},ni.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},ni.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(ii,ni);var ri=(0,r.a)(function(){},"rn"),oi=(0,r.a)(function(){},"on");oi.prototype.distance=function(t,e){},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi};var ai=function(t){function i(e){e=e||i.DEFAULT_NODE_CAPACITY,t.call(this,e)}(0,r.a)(i,"n"),t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return i.prototype.createParentBoundablesFromVerticalSlices=function(t,e){it.isTrue(t.length>0);for(var i=new Mt,n=0;n<t.length;n++)i.addAll(this.createParentBoundablesFromVerticalSlice(t[n],e));return i},i.prototype.createNode=function(t){return new si(t)},i.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},i.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],i=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,i)},i.prototype.getIntersectsOp=function(){return i.intersectsOp},i.prototype.verticalSlices=function(t,e){for(var i=Math.trunc(Math.ceil(t.size()/e)),n=new Array(e).fill(null),r=t.iterator(),o=0;o<e;o++){n[o]=new Mt;for(var a=0;r.hasNext()&&a<i;){var s=r.next();n[o].add(s),a++}}return n},i.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var i=arguments[0],n=arguments[1];t.prototype.query.call(this,i,n)}else if(3===arguments.length)if(L(arguments[2],Je)&&arguments[0]instanceof Object&&arguments[1]instanceof Qe){var r=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,r,o,a)}else if(L(arguments[2],Et)&&arguments[0]instanceof Object&&arguments[1]instanceof Qe){var s=arguments[0],l=arguments[1],h=arguments[2];t.prototype.query.call(this,s,l,h)}},i.prototype.getComparator=function(){return i.yComparator},i.prototype.createParentBoundablesFromVerticalSlice=function(e,i){return t.prototype.createParentBoundables.call(this,e,i)},i.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1];return t.prototype.remove.call(this,e,i)}return t.prototype.remove.apply(this,arguments)},i.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},i.prototype.createParentBoundables=function(t,e){it.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new Mt(t);ti.sort(r,i.xComparator);var o=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(o,e)},i.prototype.nearestNeighbour=function(){if(1===arguments.length){if(L(arguments[0],oi)){var t=arguments[0],e=new ei(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof ei){var n=arguments[0];return this.nearestNeighbour(n,x.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof i&&L(arguments[1],oi)){var r=arguments[0],o=arguments[1],a=new ei(this.getRoot(),r.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof ei&&"number"==typeof arguments[1]){var s=arguments[0],l=arguments[1],h=null,u=new Ze;for(u.add(s);!u.isEmpty()&&l>0;){var c=u.poll(),p=c.getDistance();if(p>=l)break;c.isLeaves()?(l=p,h=c):c.expandToQueue(u,l)}return[h.getBoundable(0).getItem(),h.getBoundable(1).getItem()]}}else if(3===arguments.length){var d=arguments[0],f=arguments[1],g=arguments[2],m=new Ye(d,f),v=new ei(this.getRoot(),m,g);return this.nearestNeighbour(v)[0]}},i.prototype.interfaces_=function(){return[Ke,e]},i.prototype.getClass=function(){return i},i.centreX=function(t){return i.avg(t.getMinX(),t.getMaxX())},i.avg=function(t,e){return(t+e)/2},i.centreY=function(t){return i.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return si},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[M]},compare:function(e,n){return t.compareDoubles(i.centreX(e.getBounds()),i.centreX(n.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[M]},compare:function(e,n){return t.compareDoubles(i.centreY(e.getBounds()),i.centreY(n.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(i,n),i}(ii),si=function(t){function e(){var e=arguments[0];t.call(this,e)}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var i=e.next();null===t?t=new X(i.getBounds()):t.expandToInclude(i.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Qe),li=(0,r.a)(function(){},"un");li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li},li.relativeSign=function(t,e){return t<e?-1:t>e?1:0},li.compare=function(t,e,i){if(e.equals2D(i))return 0;var n=li.relativeSign(e.x,i.x),r=li.relativeSign(e.y,i.y);switch(t){case 0:return li.compareValue(n,r);case 1:return li.compareValue(r,n);case 2:return li.compareValue(r,-n);case 3:return li.compareValue(-n,r);case 4:return li.compareValue(-n,-r);case 5:return li.compareValue(-r,-n);case 6:return li.compareValue(-r,n);case 7:return li.compareValue(n,-r)}return it.shouldNeverReachHere("invalid octant value"),0},li.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var hi=(0,r.a)(function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];this._segString=t,this.coord=new S(e),this.segmentIndex=i,this._segmentOctant=n,this._isInterior=!e.equals2D(t.getCoordinate(i))},"ln");hi.prototype.getCoordinate=function(){return this.coord},hi.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},hi.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:li.compare(this._segmentOctant,this.coord,e.coord)},hi.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},hi.prototype.isInterior=function(){return this._isInterior},hi.prototype.interfaces_=function(){return[w]},hi.prototype.getClass=function(){return hi};var ui=(0,r.a)(function(){this._nodeMap=new p,this._edge=null;var t=arguments[0];this._edge=t},"cn");ui.prototype.getSplitCoordinates=function(){var t=new Tt;this.addEndpoints();for(var e=this.iterator(),i=e.next();e.hasNext();){var n=e.next();this.addEdgeCoordinates(i,n,t),i=n}return t.toCoordinateArray()},ui.prototype.addCollapsedNodes=function(){var t=new Mt;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var i=e.next().intValue();this.add(this._edge.getCoordinate(i),i)}},ui.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},ui.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var i=this._edge.getCoordinate(e),n=this._edge.getCoordinate(e+2);i.equals2D(n)&&t.add(new R(e+1))}},ui.prototype.addEdgeCoordinates=function(t,e,i){var n=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(n);i.add(new S(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)i.add(this._edge.getCoordinate(o));r&&i.add(new S(e.coord))},ui.prototype.iterator=function(){return this._nodeMap.values().iterator()},ui.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),i=e.next();e.hasNext();){var n=e.next(),r=this.createSplitEdge(i,n);t.add(r),i=n}},ui.prototype.findCollapseIndex=function(t,e,i){if(!t.coord.equals2D(e.coord))return!1;var n=e.segmentIndex-t.segmentIndex;return e.isInterior()||n--,1===n&&(i[0]=t.segmentIndex+1,!0)},ui.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),i=this.iterator(),n=i.next();i.hasNext();){var r=i.next();this.findCollapseIndex(n,r,e)&&t.add(new R(e[0])),n=r}},ui.prototype.getEdge=function(){return this._edge},ui.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},ui.prototype.createSplitEdge=function(t,e){var i=e.segmentIndex-t.segmentIndex+2,n=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(n);r||i--;var o=new Array(i).fill(null),a=0;o[a++]=new S(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return r&&(o[a]=new S(e.coord)),new fi(o,this._edge.getData())},ui.prototype.add=function(t,e){var i=new hi(this._edge,t,e,this._edge.getSegmentOctant(e)),n=this._nodeMap.get(i);return null!==n?(it.isTrue(n.coord.equals2D(t),"Found equal nodes with different coordinates"),n):(this._nodeMap.put(i,i),i)},ui.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),i=t.get(0).getCoordinate(0);if(!i.equals2D(e[0]))throw new tt("bad split edge start point at "+i);var n=t.get(t.size()-1).getCoordinates(),r=n[n.length-1];if(!r.equals2D(e[e.length-1]))throw new tt("bad split edge end point at "+r)},ui.prototype.interfaces_=function(){return[]},ui.prototype.getClass=function(){return ui};var ci=(0,r.a)(function(){},"pn");ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci},ci.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new _("Cannot compute the octant for point ( "+t+", "+e+" )");var i=Math.abs(t),n=Math.abs(e);return t>=0?e>=0?i>=n?0:1:i>=n?7:6:e>=0?i>=n?3:2:i>=n?4:5}if(arguments[0]instanceof S&&arguments[1]instanceof S){var r=arguments[0],o=arguments[1],a=o.x-r.x,s=o.y-r.y;if(0===a&&0===s)throw new _("Cannot compute the octant for two identical points "+r);return ci.octant(a,s)}};var pi=(0,r.a)(function(){},"hn");pi.prototype.getCoordinates=function(){},pi.prototype.size=function(){},pi.prototype.getCoordinate=function(t){},pi.prototype.isClosed=function(){},pi.prototype.setData=function(t){},pi.prototype.getData=function(){},pi.prototype.interfaces_=function(){return[]},pi.prototype.getClass=function(){return pi};var di=(0,r.a)(function(){},"fn");di.prototype.addIntersection=function(t,e){},di.prototype.interfaces_=function(){return[pi]},di.prototype.getClass=function(){return di};var fi=(0,r.a)(function(){this._nodeList=new ui(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e},"gn");fi.prototype.getCoordinates=function(){return this._pts},fi.prototype.size=function(){return this._pts.length},fi.prototype.getCoordinate=function(t){return this._pts[t]},fi.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},fi.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},fi.prototype.setData=function(t){this._data=t},fi.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:ci.octant(t,e)},fi.prototype.getData=function(){return this._data},fi.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[3],o=new S(i.getIntersection(r));this.addIntersection(o,n)}},fi.prototype.toString=function(){return $.toLineString(new he(this._pts))},fi.prototype.getNodeList=function(){return this._nodeList},fi.prototype.addIntersectionNode=function(t,e){var i=e,n=i+1;if(n<this._pts.length){var r=this._pts[n];t.equals2D(r)&&(i=n)}return this._nodeList.add(t,i)},fi.prototype.addIntersections=function(t,e,i){for(var n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,i,n)},fi.prototype.interfaces_=function(){return[di]},fi.prototype.getClass=function(){return fi},fi.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Mt;return fi.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var i=arguments[0],n=arguments[1],r=i.iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};var gi=(0,r.a)(function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new S,this.p1=new S;else if(1===arguments.length){var t=arguments[0];this.p0=new S(t.p0),this.p1=new S(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3];this.p0=new S(e,i),this.p1=new S(n,r)}},"dn"),mi={serialVersionUID:{configurable:!0}};gi.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},gi.prototype.orientationIndex=function(){if(arguments[0]instanceof gi){var t=arguments[0],e=lt.orientationIndex(this.p0,this.p1,t.p0),i=lt.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&i>=0||e<=0&&i<=0?Math.max(e,i):0}if(arguments[0]instanceof S){var n=arguments[0];return lt.orientationIndex(this.p0,this.p1,n)}},gi.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},gi.prototype.isVertical=function(){return this.p0.x===this.p1.x},gi.prototype.equals=function(t){if(!(t instanceof gi))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},gi.prototype.intersection=function(t){var e=new ot;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},gi.prototype.project=function(){if(arguments[0]instanceof S){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new S(t);var e=this.projectionFactor(t),i=new S;return i.x=this.p0.x+e*(this.p1.x-this.p0.x),i.y=this.p0.y+e*(this.p1.y-this.p0.y),i}if(arguments[0]instanceof gi){var n=arguments[0],r=this.projectionFactor(n.p0),o=this.projectionFactor(n.p1);if(r>=1&&o>=1||r<=0&&o<=0)return null;var a=this.project(n.p0);r<0&&(a=this.p0),r>1&&(a=this.p1);var s=this.project(n.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new gi(a,s)}},gi.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},gi.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},gi.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},gi.prototype.distancePerpendicular=function(t){return lt.distancePointLinePerpendicular(t,this.p0,this.p1)},gi.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},gi.prototype.midPoint=function(){return gi.midPoint(this.p0,this.p1)},gi.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,i=this.p1.y-this.p0.y,n=e*e+i*i;return n<=0?x.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*i)/n},gi.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var i=new Array(2).fill(null),n=x.MAX_VALUE,r=null,o=this.closestPoint(t.p0);n=o.distance(t.p0),i[0]=o,i[1]=t.p0;var a=this.closestPoint(t.p1);(r=a.distance(t.p1))<n&&(n=r,i[0]=a,i[1]=t.p1);var s=t.closestPoint(this.p0);(r=s.distance(this.p0))<n&&(n=r,i[0]=this.p0,i[1]=s);var l=t.closestPoint(this.p1);return(r=l.distance(this.p1))<n&&(n=r,i[0]=this.p1,i[1]=l),i},gi.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},gi.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},gi.prototype.getLength=function(){return this.p0.distance(this.p1)},gi.prototype.compareTo=function(t){var e=t,i=this.p0.compareTo(e.p0);return 0!==i?i:this.p1.compareTo(e.p1)},gi.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},gi.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},gi.prototype.lineIntersection=function(t){try{return W.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof G))throw t}return null},gi.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},gi.prototype.pointAlongOffset=function(t,e){var i=this.p0.x+t*(this.p1.x-this.p0.x),n=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(r*r+o*o),s=0,l=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*r/a,l=e*o/a}return new S(i-l,n+s)},gi.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=i.x,this.p1.y=i.y}},gi.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||x.isNaN(e))&&(e=1),e},gi.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},gi.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},gi.prototype.distance=function(){if(arguments[0]instanceof gi){var t=arguments[0];return lt.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof S){var e=arguments[0];return lt.distancePointLine(e,this.p0,this.p1)}},gi.prototype.pointAlong=function(t){var e=new S;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},gi.prototype.hashCode=function(){var t=x.doubleToLongBits(this.p0.x);t^=31*x.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),i=x.doubleToLongBits(this.p1.x);return i^=31*x.doubleToLongBits(this.p1.y),e^Math.trunc(i)^Math.trunc(i>>32)},gi.prototype.interfaces_=function(){return[w,e]},gi.prototype.getClass=function(){return gi},gi.midPoint=function(t,e){return new S((t.x+e.x)/2,(t.y+e.y)/2)},mi.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(gi,mi);var vi=(0,r.a)(function(){this.tempEnv1=new X,this.tempEnv2=new X,this._overlapSeg1=new gi,this._overlapSeg2=new gi},"_n");vi.prototype.overlap=function(){if(2!==arguments.length&&4===arguments.length){var t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];t.getLineSegment(e,this._overlapSeg1),i.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},vi.prototype.interfaces_=function(){return[]},vi.prototype.getClass=function(){return vi};var yi=(0,r.a)(function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];this._pts=t,this._start=e,this._end=i,this._context=n},"mn");yi.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},yi.prototype.computeSelect=function(t,e,i,n){var r=this._pts[e],o=this._pts[i];if(n.tempEnv1.init(r,o),i-e==1)return n.select(this,e),null;if(!t.intersects(n.tempEnv1))return null;var a=Math.trunc((e+i)/2);e<a&&this.computeSelect(t,e,a,n),a<i&&this.computeSelect(t,a,i,n)},yi.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,i=this._start;i<=this._end;i++)t[e++]=this._pts[i];return t},yi.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},yi.prototype.setId=function(t){this._id=t},yi.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},yi.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new X(t,e)}return this._env},yi.prototype.getEndIndex=function(){return this._end},yi.prototype.getStartIndex=function(){return this._start},yi.prototype.getContext=function(){return this._context},yi.prototype.getId=function(){return this._id},yi.prototype.computeOverlapsInternal=function(t,e,i,n,r,o){var a=this._pts[t],s=this._pts[e],l=i._pts[n],h=i._pts[r];if(e-t==1&&r-n==1)return o.overlap(this,t,i,n),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(l,h),!o.tempEnv1.intersects(o.tempEnv2))return null;var u=Math.trunc((t+e)/2),c=Math.trunc((n+r)/2);t<u&&(n<c&&this.computeOverlapsInternal(t,u,i,n,c,o),c<r&&this.computeOverlapsInternal(t,u,i,c,r,o)),u<e&&(n<c&&this.computeOverlapsInternal(u,e,i,n,c,o),c<r&&this.computeOverlapsInternal(u,e,i,c,r,o))},yi.prototype.interfaces_=function(){return[]},yi.prototype.getClass=function(){return yi};var _i=(0,r.a)(function(){},"vn");_i.prototype.interfaces_=function(){return[]},_i.prototype.getClass=function(){return _i},_i.getChainStartIndices=function(t){var e=0,i=new Mt;i.add(new R(e));do{var n=_i.findChainEnd(t,e);i.add(new R(n)),e=n}while(e<t.length-1);return _i.toIntArray(i)},_i.findChainEnd=function(t,e){for(var i=e;i<t.length-1&&t[i].equals2D(t[i+1]);)i++;if(i>=t.length-1)return t.length-1;for(var n=Ue.quadrant(t[i],t[i+1]),r=e+1;r<t.length&&(t[r-1].equals2D(t[r])||Ue.quadrant(t[r-1],t[r])===n);)r++;return r-1},_i.getChains=function(){if(1===arguments.length){var t=arguments[0];return _i.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],i=arguments[1],n=new Mt,r=_i.getChainStartIndices(e),o=0;o<r.length-1;o++){var a=new yi(e,r[o],r[o+1],i);n.add(a)}return n}},_i.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),i=0;i<e.length;i++)e[i]=t.get(i).intValue();return e};var xi=(0,r.a)(function(){},"In");xi.prototype.computeNodes=function(t){},xi.prototype.getNodedSubstrings=function(){},xi.prototype.interfaces_=function(){return[]},xi.prototype.getClass=function(){return xi};var bi=(0,r.a)(function(){if(this._segInt=null,0!==arguments.length&&1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}},"En");bi.prototype.setSegmentIntersector=function(t){this._segInt=t},bi.prototype.interfaces_=function(){return[xi]},bi.prototype.getClass=function(){return bi};var wi=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new Mt,this._index=new ai,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}(0,r.a)(e,"e"),t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return fi.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=_i.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var i=e.next();i.setId(this._idCounter++),this._index.insert(i.getEnvelope(),i),this._monoChains.add(i)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new Ei(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var i=e.next(),n=this._index.query(i.getEnvelope()).iterator();n.hasNext();){var r=n.next();if(r.getId()>i.getId()&&(i.computeOverlaps(r,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},i.SegmentOverlapAction.get=function(){return Ei},Object.defineProperties(e,i),e}(bi),Ei=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3],o=e.getContext(),a=n.getContext();this._si.processIntersections(o,i,a,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(vi),Mi=(0,r.a)(function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0!==arguments.length)if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var i=arguments[0],n=arguments[1];this.setQuadrantSegments(i),this.setEndCapStyle(n)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},"t"),Si={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Mi.prototype.getEndCapStyle=function(){return this._endCapStyle},Mi.prototype.isSingleSided=function(){return this._isSingleSided},Mi.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Mi.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Mi.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Mi.JOIN_ROUND&&(this._quadrantSegments=Mi.DEFAULT_QUADRANT_SEGMENTS)},Mi.prototype.getJoinStyle=function(){return this._joinStyle},Mi.prototype.setJoinStyle=function(t){this._joinStyle=t},Mi.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Mi.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Mi.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Mi.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Mi.prototype.getMitreLimit=function(){return this._mitreLimit},Mi.prototype.setMitreLimit=function(t){this._mitreLimit=t},Mi.prototype.setSingleSided=function(t){this._isSingleSided=t},Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi},Mi.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Si.CAP_ROUND.get=function(){return 1},Si.CAP_FLAT.get=function(){return 2},Si.CAP_SQUARE.get=function(){return 3},Si.JOIN_ROUND.get=function(){return 1},Si.JOIN_MITRE.get=function(){return 2},Si.JOIN_BEVEL.get=function(){return 3},Si.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Si.DEFAULT_MITRE_LIMIT.get=function(){return 5},Si.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Mi,Si);var Ti=(0,r.a)(function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=lt.COUNTERCLOCKWISE,this._inputLine=t||null},"Ln"),Ci={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Ti.prototype.isDeletable=function(t,e,i,n){var r=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[i];return!!this.isConcave(r,o,a)&&!!this.isShallow(r,o,a,n)&&this.isShallowSampled(r,o,t,i,n)},Ti.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),i=this.findNextNonDeletedIndex(e),n=!1;i<this._inputLine.length;){var r=!1;this.isDeletable(t,e,i,this._distanceTol)&&(this._isDeleted[e]=Ti.DELETE,r=!0,n=!0),t=r?i:e,e=this.findNextNonDeletedIndex(t),i=this.findNextNonDeletedIndex(e)}return n},Ti.prototype.isShallowConcavity=function(t,e,i,n){return lt.computeOrientation(t,e,i)===this._angleOrientation&&lt.distancePointLine(e,t,i)<n},Ti.prototype.isShallowSampled=function(t,e,i,n,r){var o=Math.trunc((n-i)/Ti.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=i;a<n;a+=o)if(!this.isShallow(t,e,this._inputLine[a],r))return!1;return!0},Ti.prototype.isConcave=function(t,e,i){return lt.computeOrientation(t,e,i)===this._angleOrientation},Ti.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=lt.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Ti.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Ti.DELETE;)e++;return e},Ti.prototype.isShallow=function(t,e,i,n){return lt.distancePointLine(e,t,i)<n},Ti.prototype.collapseLine=function(){for(var t=new Tt,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Ti.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti},Ti.simplify=function(t,e){return new Ti(t).simplify(e)},Ci.INIT.get=function(){return 0},Ci.DELETE.get=function(){return 1},Ci.KEEP.get=function(){return 1},Ci.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Ti,Ci);var Ai=(0,r.a)(function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Mt},"wn"),Pi={COORDINATE_ARRAY_TYPE:{configurable:!0}};Ai.prototype.getCoordinates=function(){return this._ptList.toArray(Ai.COORDINATE_ARRAY_TYPE)},Ai.prototype.setPrecisionModel=function(t){this._precisionModel=t},Ai.prototype.addPt=function(t){var e=new S(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Ai.prototype.revere=function(){},Ai.prototype.addPts=function(t,e){if(e)for(var i=0;i<t.length;i++)this.addPt(t[i]);else for(var n=t.length-1;n>=0;n--)this.addPt(t[n])},Ai.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Ai.prototype.toString=function(){return(new ye).createLineString(this.getCoordinates()).toString()},Ai.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new S(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Ai.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Ai.prototype.interfaces_=function(){return[]},Ai.prototype.getClass=function(){return Ai},Pi.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Ai,Pi);var Ii=(0,r.a)(function(){},"Tn"),Li={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Ii.prototype.interfaces_=function(){return[]},Ii.prototype.getClass=function(){return Ii},Ii.toDegrees=function(t){return 180*t/Math.PI},Ii.normalize=function(t){for(;t>Math.PI;)t-=Ii.PI_TIMES_2;for(;t<=-Math.PI;)t+=Ii.PI_TIMES_2;return t},Ii.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],i=arguments[1],n=i.x-e.x,r=i.y-e.y;return Math.atan2(r,n)}},Ii.isAcute=function(t,e,i){var n=t.x-e.x,r=t.y-e.y;return n*(i.x-e.x)+r*(i.y-e.y)>0},Ii.isObtuse=function(t,e,i){var n=t.x-e.x,r=t.y-e.y;return n*(i.x-e.x)+r*(i.y-e.y)<0},Ii.interiorAngle=function(t,e,i){var n=Ii.angle(e,t),r=Ii.angle(e,i);return Math.abs(r-n)},Ii.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Ii.PI_TIMES_2;t>=Ii.PI_TIMES_2&&(t=0)}else{for(;t>=Ii.PI_TIMES_2;)t-=Ii.PI_TIMES_2;t<0&&(t=0)}return t},Ii.angleBetween=function(t,e,i){var n=Ii.angle(e,t),r=Ii.angle(e,i);return Ii.diff(n,r)},Ii.diff=function(t,e){var i=null;return(i=t<e?e-t:t-e)>Math.PI&&(i=2*Math.PI-i),i},Ii.toRadians=function(t){return t*Math.PI/180},Ii.getTurn=function(t,e){var i=Math.sin(e-t);return i>0?Ii.COUNTERCLOCKWISE:i<0?Ii.CLOCKWISE:Ii.NONE},Ii.angleBetweenOriented=function(t,e,i){var n=Ii.angle(e,t),r=Ii.angle(e,i)-n;return r<=-Math.PI?r+Ii.PI_TIMES_2:r>Math.PI?r-Ii.PI_TIMES_2:r},Li.PI_TIMES_2.get=function(){return 2*Math.PI},Li.PI_OVER_2.get=function(){return Math.PI/2},Li.PI_OVER_4.get=function(){return Math.PI/4},Li.COUNTERCLOCKWISE.get=function(){return lt.COUNTERCLOCKWISE},Li.CLOCKWISE.get=function(){return lt.CLOCKWISE},Li.NONE.get=function(){return lt.COLLINEAR},Object.defineProperties(Ii,Li);var Oi=(0,r.a)(function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new gi,this._seg1=new gi,this._offset0=new gi,this._offset1=new gi,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],i=arguments[1],n=arguments[2];this._precisionModel=e,this._bufParams=i,this._li=new ot,this._filletAngleQuantum=Math.PI/2/i.getQuadrantSegments(),i.getQuadrantSegments()>=8&&i.getJoinStyle()===Mi.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)},"t"),Ni={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Oi.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var i=lt.computeOrientation(this._s0,this._s1,this._s2),n=i===lt.CLOCKWISE&&this._side===Te.LEFT||i===lt.COUNTERCLOCKWISE&&this._side===Te.RIGHT;0===i?this.addCollinear(e):n?this.addOutsideTurn(i,e):this.addInsideTurn(i,e)},Oi.prototype.addLineEndCap=function(t,e){var i=new gi(t,e),n=new gi;this.computeOffsetSegment(i,Te.LEFT,this._distance,n);var r=new gi;this.computeOffsetSegment(i,Te.RIGHT,this._distance,r);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case Mi.CAP_ROUND:this._segList.addPt(n.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,lt.CLOCKWISE,this._distance),this._segList.addPt(r.p1);break;case Mi.CAP_FLAT:this._segList.addPt(n.p1),this._segList.addPt(r.p1);break;case Mi.CAP_SQUARE:var l=new S;l.x=Math.abs(this._distance)*Math.cos(s),l.y=Math.abs(this._distance)*Math.sin(s);var h=new S(n.p1.x+l.x,n.p1.y+l.y),u=new S(r.p1.x+l.x,r.p1.y+l.y);this._segList.addPt(h),this._segList.addPt(u)}},Oi.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Oi.prototype.addMitreJoin=function(t,e,i,n){var r=!0,o=null;try{o=W.intersection(e.p0,e.p1,i.p0,i.p1),(n<=0?1:o.distance(t)/Math.abs(n))>this._bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof G))throw t;o=new S(0,0),r=!1}r?this._segList.addPt(o):this.addLimitedMitreJoin(e,i,n,this._bufParams.getMitreLimit())},Oi.prototype.addFilletCorner=function(t,e,i,n,r){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),l=i.x-t.x,h=i.y-t.y,u=Math.atan2(h,l);n===lt.CLOCKWISE?s<=u&&(s+=2*Math.PI):s>=u&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,u,n,r),this._segList.addPt(i)},Oi.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Oi.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Mi.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Mi.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Oi.prototype.createSquare=function(t){this._segList.addPt(new S(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new S(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new S(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new S(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Oi.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Oi.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Oi.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Oi.prototype.initSideSegments=function(t,e,i){this._s1=t,this._s2=e,this._side=i,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,i,this._distance,this._offset1)},Oi.prototype.addLimitedMitreJoin=function(t,e,i,n){var r=this._seg0.p1,o=Ii.angle(r,this._seg0.p0),a=Ii.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2,s=Ii.normalize(o+a),l=Ii.normalize(s+Math.PI),h=n*i,u=i-h*Math.abs(Math.sin(a)),c=r.x+h*Math.cos(l),p=r.y+h*Math.sin(l),d=new S(c,p),f=new gi(r,d),g=f.pointAlongOffset(1,u),m=f.pointAlongOffset(1,-u);this._side===Te.LEFT?(this._segList.addPt(g),this._segList.addPt(m)):(this._segList.addPt(m),this._segList.addPt(g))},Oi.prototype.computeOffsetSegment=function(t,e,i,n){var r=e===Te.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),l=r*i*o/s,h=r*i*a/s;n.p0.x=t.p0.x-h,n.p0.y=t.p0.y+l,n.p1.x=t.p1.x-h,n.p1.y=t.p1.y+l},Oi.prototype.addFilletArc=function(t,e,i,n,r){var o=n===lt.CLOCKWISE?-1:1,a=Math.abs(e-i),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var l=a/s,h=0,u=new S;h<a;){var c=e+o*h;u.x=t.x+r*Math.cos(c),u.y=t.y+r*Math.sin(c),this._segList.addPt(u),h+=l}},Oi.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Oi.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var i=new S((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i);var n=new S((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Oi.prototype.createCircle=function(t){var e=new S(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Oi.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Oi.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Ai,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Oi.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Oi.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Mi.JOIN_BEVEL||this._bufParams.getJoinStyle()===Mi.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,lt.CLOCKWISE,this._distance))},Oi.prototype.closeRing=function(){this._segList.closeRing()},Oi.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi},Ni.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Ni.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Ni.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Ni.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Oi,Ni);var qi=(0,r.a)(function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e},"Mn");qi.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var i=e<0,n=Math.abs(e),r=this.getSegGen(n);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,i,r);var o=r.getCoordinates();return i&&Ct.reverse(o),o},qi.prototype.computeSingleSidedBufferCurve=function(t,e,i){var n=this.simplifyTolerance(this._distance);if(e){i.addSegments(t,!0);var r=Ti.simplify(t,-n),o=r.length-1;i.initSideSegments(r[o],r[o-1],Te.LEFT),i.addFirstSegment();for(var a=o-2;a>=0;a--)i.addNextSegment(r[a],!0)}else{i.addSegments(t,!1);var s=Ti.simplify(t,n),l=s.length-1;i.initSideSegments(s[0],s[1],Te.LEFT),i.addFirstSegment();for(var h=2;h<=l;h++)i.addNextSegment(s[h],!0)}i.addLastSegment(),i.closeRing()},qi.prototype.computeRingBufferCurve=function(t,e,i){var n=this.simplifyTolerance(this._distance);e===Te.RIGHT&&(n=-n);var r=Ti.simplify(t,n),o=r.length-1;i.initSideSegments(r[o-1],r[0],e);for(var a=1;a<=o;a++){var s=1!==a;i.addNextSegment(r[a],s)}i.closeRing()},qi.prototype.computeLineBufferCurve=function(t,e){var i=this.simplifyTolerance(this._distance),n=Ti.simplify(t,i),r=n.length-1;e.initSideSegments(n[0],n[1],Te.LEFT);for(var o=2;o<=r;o++)e.addNextSegment(n[o],!0);e.addLastSegment(),e.addLineEndCap(n[r-1],n[r]);var a=Ti.simplify(t,-i),s=a.length-1;e.initSideSegments(a[s],a[s-1],Te.LEFT);for(var l=s-2;l>=0;l--)e.addNextSegment(a[l],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},qi.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Mi.CAP_ROUND:e.createCircle(t);break;case Mi.CAP_SQUARE:e.createSquare(t)}},qi.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided()||0===e)return null;var i=Math.abs(e),n=this.getSegGen(i);if(t.length<=1)this.computePointCurve(t[0],n);else if(this._bufParams.isSingleSided()){var r=e<0;this.computeSingleSidedBufferCurve(t,r,n)}else this.computeLineBufferCurve(t,n);return n.getCoordinates()},qi.prototype.getBufferParameters=function(){return this._bufParams},qi.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},qi.prototype.getRingCurve=function(t,e,i){if(this._distance=i,t.length<=2)return this.getLineCurve(t,i);if(0===i)return qi.copyCoordinates(t);var n=this.getSegGen(i);return this.computeRingBufferCurve(t,e,n),n.getCoordinates()},qi.prototype.computeOffsetCurve=function(t,e,i){var n=this.simplifyTolerance(this._distance);if(e){var r=Ti.simplify(t,-n),o=r.length-1;i.initSideSegments(r[o],r[o-1],Te.LEFT),i.addFirstSegment();for(var a=o-2;a>=0;a--)i.addNextSegment(r[a],!0)}else{var s=Ti.simplify(t,n),l=s.length-1;i.initSideSegments(s[0],s[1],Te.LEFT),i.addFirstSegment();for(var h=2;h<=l;h++)i.addNextSegment(s[h],!0)}i.addLastSegment()},qi.prototype.getSegGen=function(t){return new Oi(this._precisionModel,this._bufParams,t)},qi.prototype.interfaces_=function(){return[]},qi.prototype.getClass=function(){return qi},qi.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),i=0;i<e.length;i++)e[i]=new S(t[i]);return e};var Ri=(0,r.a)(function(){this._subgraphs=null,this._seg=new gi,this._cga=new lt;var t=arguments[0];this._subgraphs=t},"An"),Di={DepthSegment:{configurable:!0}};Ri.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new Mt,i=this._subgraphs.iterator();i.hasNext();){var n=i.next(),r=n.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,n.getDirectedEdges(),e)}return e}if(3===arguments.length)if(L(arguments[2],Et)&&arguments[0]instanceof S&&arguments[1]instanceof je){for(var o=arguments[0],a=arguments[1],s=arguments[2],l=a.getEdge().getCoordinates(),h=0;h<l.length-1;h++)if(this._seg.p0=l[h],this._seg.p1=l[h+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||lt.computeOrientation(this._seg.p0,this._seg.p1,o)===lt.RIGHT)){var u=a.getDepth(Te.LEFT);this._seg.p0.equals(l[h])||(u=a.getDepth(Te.RIGHT));var c=new ki(this._seg,u);s.add(c)}}else if(L(arguments[2],Et)&&arguments[0]instanceof S&&L(arguments[1],Et))for(var p=arguments[0],d=arguments[1],f=arguments[2],g=d.iterator();g.hasNext();){var m=g.next();m.isForward()&&this.findStabbedSegments(p,m,f)}},Ri.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:ti.min(e)._leftDepth},Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri},Di.DepthSegment.get=function(){return ki},Object.defineProperties(Ri,Di);var ki=(0,r.a)(function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new gi(t),this._leftDepth=e},"Gn");ki.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var i=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==i||0!=(i=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?i:this._upwardSeg.compareTo(e._upwardSeg)},ki.prototype.compareX=function(t,e){var i=t.p0.compareTo(e.p0);return 0!==i?i:t.p1.compareTo(e.p1)},ki.prototype.toString=function(){return this._upwardSeg.toString()},ki.prototype.interfaces_=function(){return[w]},ki.prototype.getClass=function(){return ki};var Bi=(0,r.a)(function(t,e,i){this.p0=t||null,this.p1=e||null,this.p2=i||null},"qn");Bi.prototype.area=function(){return Bi.area(this.p0,this.p1,this.p2)},Bi.prototype.signedArea=function(){return Bi.signedArea(this.p0,this.p1,this.p2)},Bi.prototype.interpolateZ=function(t){if(null===t)throw new _("Supplied point is null.");return Bi.interpolateZ(t,this.p0,this.p1,this.p2)},Bi.prototype.longestSideLength=function(){return Bi.longestSideLength(this.p0,this.p1,this.p2)},Bi.prototype.isAcute=function(){return Bi.isAcute(this.p0,this.p1,this.p2)},Bi.prototype.circumcentre=function(){return Bi.circumcentre(this.p0,this.p1,this.p2)},Bi.prototype.area3D=function(){return Bi.area3D(this.p0,this.p1,this.p2)},Bi.prototype.centroid=function(){return Bi.centroid(this.p0,this.p1,this.p2)},Bi.prototype.inCentre=function(){return Bi.inCentre(this.p0,this.p1,this.p2)},Bi.prototype.interfaces_=function(){return[]},Bi.prototype.getClass=function(){return Bi},Bi.area=function(t,e,i){return Math.abs(((i.x-t.x)*(e.y-t.y)-(e.x-t.x)*(i.y-t.y))/2)},Bi.signedArea=function(t,e,i){return((i.x-t.x)*(e.y-t.y)-(e.x-t.x)*(i.y-t.y))/2},Bi.det=function(t,e,i,n){return t*n-e*i},Bi.interpolateZ=function(t,e,i,n){var r=e.x,o=e.y,a=i.x-r,s=n.x-r,l=i.y-o,h=n.y-o,u=a*h-s*l,c=t.x-r,p=t.y-o,d=(h*c-s*p)/u,f=(-l*c+a*p)/u;return e.z+d*(i.z-e.z)+f*(n.z-e.z)},Bi.longestSideLength=function(t,e,i){var n=t.distance(e),r=e.distance(i),o=i.distance(t),a=n;return r>a&&(a=r),o>a&&(a=o),a},Bi.isAcute=function(t,e,i){return!!Ii.isAcute(t,e,i)&&!!Ii.isAcute(e,i,t)&&!!Ii.isAcute(i,t,e)},Bi.circumcentre=function(t,e,i){var n=i.x,r=i.y,o=t.x-n,a=t.y-r,s=e.x-n,l=e.y-r,h=2*Bi.det(o,a,s,l),u=Bi.det(a,o*o+a*a,l,s*s+l*l),c=Bi.det(o,o*o+a*a,s,s*s+l*l);return new S(n-u/h,r+c/h)},Bi.perpendicularBisector=function(t,e){var i=e.x-t.x,n=e.y-t.y,r=new W(t.x+i/2,t.y+n/2,1),o=new W(t.x-n+i/2,t.y+i+n/2,1);return new W(r,o)},Bi.angleBisector=function(t,e,i){var n=e.distance(t),r=n/(n+e.distance(i)),o=i.x-t.x,a=i.y-t.y;return new S(t.x+r*o,t.y+r*a)},Bi.area3D=function(t,e,i){var n=e.x-t.x,r=e.y-t.y,o=e.z-t.z,a=i.x-t.x,s=i.y-t.y,l=i.z-t.z,h=r*l-o*s,u=o*a-n*l,c=n*s-r*a,p=h*h+u*u+c*c;return Math.sqrt(p)/2},Bi.centroid=function(t,e,i){var n=(t.x+e.x+i.x)/3,r=(t.y+e.y+i.y)/3;return new S(n,r)},Bi.inCentre=function(t,e,i){var n=e.distance(i),r=t.distance(i),o=t.distance(e),a=n+r+o,s=(n*t.x+r*e.x+o*i.x)/a,l=(n*t.y+r*e.y+o*i.y)/a;return new S(s,l)};var Fi=(0,r.a)(function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Mt;var t=arguments[0],e=arguments[1],i=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=i},"Bn");Fi.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),i=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(i,P.EXTERIOR,P.INTERIOR)},Fi.prototype.addPolygon=function(t){var e=this._distance,i=Te.LEFT;this._distance<0&&(e=-this._distance,i=Te.RIGHT);var n=t.getExteriorRing(),r=Ct.removeRepeatedPoints(n.getCoordinates());if(this._distance<0&&this.isErodedCompletely(n,this._distance)||this._distance<=0&&r.length<3)return null;this.addPolygonRing(r,e,i,P.EXTERIOR,P.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=Ct.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,Te.opposite(i),P.INTERIOR,P.EXTERIOR)}},Fi.prototype.isTriangleErodedCompletely=function(t,e){var i=new Bi(t[0],t[1],t[2]),n=i.inCentre();return lt.distancePointLine(n,i.p0,i.p1)<Math.abs(e)},Fi.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Ct.removeRepeatedPoints(t.getCoordinates()),i=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(i,P.EXTERIOR,P.INTERIOR)},Fi.prototype.addCurve=function(t,e,i){if(null===t||t.length<2)return null;var n=new fi(t,new Ne(0,P.BOUNDARY,e,i));this._curveList.add(n)},Fi.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Fi.prototype.addPolygonRing=function(t,e,i,n,r){if(0===e&&t.length<ie.MINIMUM_VALID_SIZE)return null;var o=n,a=r;t.length>=ie.MINIMUM_VALID_SIZE&&lt.isCCW(t)&&(o=r,a=n,i=Te.opposite(i));var s=this._curveBuilder.getRingCurve(t,i,e);this.addCurve(s,o,a)},Fi.prototype.add=function(t){if(t.isEmpty())return null;t instanceof te?this.addPolygon(t):t instanceof Jt?this.addLineString(t):t instanceof Qt?this.addPoint(t):(t instanceof ee||t instanceof Gt||t instanceof ne||t instanceof jt)&&this.addCollection(t)},Fi.prototype.isErodedCompletely=function(t,e){var i=t.getCoordinates();if(i.length<4)return e<0;if(4===i.length)return this.isTriangleErodedCompletely(i,e);var n=t.getEnvelopeInternal(),r=Math.min(n.getHeight(),n.getWidth());return e<0&&2*Math.abs(e)>r},Fi.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var i=t.getGeometryN(e);this.add(i)}},Fi.prototype.interfaces_=function(){return[]},Fi.prototype.getClass=function(){return Fi};var Ui=(0,r.a)(function(){},"Vn");Ui.prototype.locate=function(t){},Ui.prototype.interfaces_=function(){return[]},Ui.prototype.getClass=function(){return Ui};var zi=(0,r.a)(function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()},"Un");zi.prototype.next=function(){if(this._atStart)return this._atStart=!1,zi.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new n;var t=this._parent.getGeometryN(this._index++);return t instanceof jt?(this._subcollectionIterator=new zi(t),this._subcollectionIterator.next()):t},zi.prototype.remove=function(){throw new Error(this.getClass().getName())},zi.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},zi.prototype.interfaces_=function(){return[wt]},zi.prototype.getClass=function(){return zi},zi.isAtomic=function(t){return!(t instanceof jt)};var Vi=(0,r.a)(function(){this._geom=null;var t=arguments[0];this._geom=t},"zn");Vi.prototype.locate=function(t){return Vi.locate(t,this._geom)},Vi.prototype.interfaces_=function(){return[Ui]},Vi.prototype.getClass=function(){return Vi},Vi.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&lt.isPointInRing(t,e.getCoordinates())},Vi.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var i=e.getExteriorRing();if(!Vi.isPointInRing(t,i))return!1;for(var n=0;n<e.getNumInteriorRing();n++){var r=e.getInteriorRingN(n);if(Vi.isPointInRing(t,r))return!1}return!0},Vi.containsPoint=function(t,e){if(e instanceof te)return Vi.containsPointInPolygon(t,e);if(e instanceof jt)for(var i=new zi(e);i.hasNext();){var n=i.next();if(n!==e&&Vi.containsPoint(t,n))return!0}return!1},Vi.locate=function(t,e){return e.isEmpty()?P.EXTERIOR:Vi.containsPoint(t,e)?P.INTERIOR:P.EXTERIOR};var ji=(0,r.a)(function(){this._edgeMap=new p,this._edgeList=null,this._ptInAreaLocation=[P.NONE,P.NONE]},"Xn");ji.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),i=e-1;return 0===e&&(i=this._edgeList.size()-1),this._edgeList.get(i)},ji.prototype.propagateSideLabels=function(t){for(var e=P.NONE,i=this.iterator();i.hasNext();){var n=i.next().getLabel();n.isArea(t)&&n.getLocation(t,Te.LEFT)!==P.NONE&&(e=n.getLocation(t,Te.LEFT))}if(e===P.NONE)return null;for(var r=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Te.ON)===P.NONE&&s.setLocation(t,Te.ON,r),s.isArea(t)){var l=s.getLocation(t,Te.LEFT),h=s.getLocation(t,Te.RIGHT);if(h!==P.NONE){if(h!==r)throw new Pe("side location conflict",a.getCoordinate());l===P.NONE&&it.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),r=l}else it.isTrue(s.getLocation(t,Te.LEFT)===P.NONE,"found single null side"),s.setLocation(t,Te.RIGHT,r),s.setLocation(t,Te.LEFT,r)}}},ji.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},ji.prototype.print=function(t){H.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},ji.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},ji.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var i=e.size()-1,n=e.get(i).getLabel().getLocation(t,Te.LEFT);it.isTrue(n!==P.NONE,"Found unlabelled area edge");for(var r=n,o=this.iterator();o.hasNext();){var a=o.next().getLabel();it.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Te.LEFT),l=a.getLocation(t,Te.RIGHT);if(s===l||l!==r)return!1;r=s}return!0},ji.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},ji.prototype.iterator=function(){return this.getEdges().iterator()},ji.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Mt(this._edgeMap.values())),this._edgeList},ji.prototype.getLocation=function(t,e,i){return this._ptInAreaLocation[t]===P.NONE&&(this._ptInAreaLocation[t]=Vi.locate(e,i[t].getGeometry())),this._ptInAreaLocation[t]},ji.prototype.toString=function(){var t=new q;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var i=e.next();t.append(i),t.append("\n")}return t.toString()},ji.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},ji.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],i=this.iterator();i.hasNext();)for(var n=i.next().getLabel(),r=0;r<2;r++)n.isLine(r)&&n.getLocation(r)===P.BOUNDARY&&(e[r]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),l=0;l<2;l++)if(s.isAnyNull(l)){var h=P.NONE;if(e[l])h=P.EXTERIOR;else{var u=a.getCoordinate();h=this.getLocation(l,u,t)}s.setAllLocationsIfNull(l,h)}},ji.prototype.getDegree=function(){return this._edgeMap.size()},ji.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},ji.prototype.interfaces_=function(){return[]},ji.prototype.getClass=function(){return ji};var Gi=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,i=this._SCANNING_FOR_INCOMING,n=0;n<this._resultAreaEdgeList.size();n++){var r=this._resultAreaEdgeList.get(n),o=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),i){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),i=this._SCANNING_FOR_INCOMING}}if(i===this._LINKING_TO_OUTGOING){if(null===t)throw new Pe("no outgoing dirEdge found",this.getCoordinate());it.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var i=t.get(0);if(1===e)return i;var n=t.get(e-1),r=i.getQuadrant(),o=n.getQuadrant();return Ue.isNorthern(r)&&Ue.isNorthern(o)?i:Ue.isNorthern(r)||Ue.isNorthern(o)?0!==i.getDy()?i:0!==n.getDy()?n:(it.shouldNeverReachHere("found two horizontal edges incident on node"),null):n},e.prototype.print=function(t){H.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var i=e.next();t.print("out "),i.print(t),t.println(),t.print("in "),i.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Mt;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var i=e.next().getLabel();i.setAllLocationsIfNull(0,t.getLocation(0)),i.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,i=this._edgeList.size()-1;i>=0;i--){var n=this._edgeList.get(i),r=n.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=n}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),i=t.getDepth(Te.LEFT),n=t.getDepth(Te.RIGHT),r=this.computeDepths(e+1,this._edgeList.size(),i);if(this.computeDepths(0,e,r)!==n)throw new Pe("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[0],a=arguments[1],s=arguments[2],l=o;l<a;l++){var h=this._edgeList.get(l);h.setEdgeDepths(Te.RIGHT,s),s=h.getDepth(Te.LEFT)}return s}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,i=null,n=this._SCANNING_FOR_INCOMING,r=this._resultAreaEdgeList.size()-1;r>=0;r--){var o=this._resultAreaEdgeList.get(r),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),n){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;i=a,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;i.setNextMin(o),n=this._SCANNING_FOR_INCOMING}}n===this._LINKING_TO_OUTGOING&&(it.isTrue(null!==e,"found null for first outgoing dirEdge"),it.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),i.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var i=arguments[0],n=0,r=this.iterator();r.hasNext();)r.next().getEdgeRing()===i&&n++;return n}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=P.NONE,e=this.iterator();e.hasNext();){var i=e.next(),n=i.getSym();if(!i.isLineEdge()){if(i.isInResult()){t=P.INTERIOR;break}if(n.isInResult()){t=P.EXTERIOR;break}}}if(t===P.NONE)return null;for(var r=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(r===P.INTERIOR):(a.isInResult()&&(r=P.EXTERIOR),s.isInResult()&&(r=P.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Ne(P.NONE);for(var i=this.iterator();i.hasNext();)for(var n=i.next().getEdge().getLabel(),r=0;r<2;r++){var o=n.getLocation(r);o!==P.INTERIOR&&o!==P.BOUNDARY||this._label.setLocation(r,P.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ji),Hi=function(t){function e(){t.apply(this,arguments)}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Be(t,new Gi)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ge),Wi=(0,r.a)(function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)},"t");Wi.prototype.compareTo=function(t){var e=t;return Wi.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Wi.prototype.interfaces_=function(){return[w]},Wi.prototype.getClass=function(){return Wi},Wi.orientation=function(t){return 1===Ct.increasingDirection(t)},Wi.compareOriented=function(t,e,i,n){for(var r=e?1:-1,o=n?1:-1,a=e?t.length:-1,s=n?i.length:-1,l=e?0:t.length-1,h=n?0:i.length-1;;){var u=t[l].compareTo(i[h]);if(0!==u)return u;var c=(l+=r)===a,p=(h+=o)===s;if(c&&!p)return-1;if(!c&&p)return 1;if(c&&p)return 0}};var Xi=(0,r.a)(function(){this._edges=new Mt,this._ocaMap=new p},"Hn");Xi.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var i=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var n=i.getCoordinates(),r=0;r<n.length;r++)r>0&&t.print(","),t.print(n[r].x+" "+n[r].y);t.println(")")}t.print(")  ")},Xi.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Xi.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Xi.prototype.iterator=function(){return this._edges.iterator()},Xi.prototype.getEdges=function(){return this._edges},Xi.prototype.get=function(t){return this._edges.get(t)},Xi.prototype.findEqualEdge=function(t){var e=new Wi(t.getCoordinates());return this._ocaMap.get(e)},Xi.prototype.add=function(t){this._edges.add(t);var e=new Wi(t.getCoordinates());this._ocaMap.put(e,t)},Xi.prototype.interfaces_=function(){return[]},Xi.prototype.getClass=function(){return Xi};var Yi=(0,r.a)(function(){},"Wn");Yi.prototype.processIntersections=function(t,e,i,n){},Yi.prototype.isDone=function(){},Yi.prototype.interfaces_=function(){return[]},Yi.prototype.getClass=function(){return Yi};var Zi=(0,r.a)(function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t},"Kn");Zi.prototype.isTrivialIntersection=function(t,e,i,n){if(t===i&&1===this._li.getIntersectionNum()){if(Zi.isAdjacentSegments(e,n))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&n===r||0===n&&e===r)return!0}}return!1},Zi.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Zi.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Zi.prototype.getLineIntersector=function(){return this._li},Zi.prototype.hasProperIntersection=function(){return this._hasProper},Zi.prototype.processIntersections=function(t,e,i,n){if(t===i&&e===n)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=i.getCoordinates()[n],s=i.getCoordinates()[n+1];this._li.computeIntersection(r,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,i,n)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),i.addIntersections(this._li,n,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Zi.prototype.hasIntersection=function(){return this._hasIntersection},Zi.prototype.isDone=function(){return!1},Zi.prototype.hasInteriorIntersection=function(){return this._hasInterior},Zi.prototype.interfaces_=function(){return[Yi]},Zi.prototype.getClass=function(){return Zi},Zi.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Ji=(0,r.a)(function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],i=arguments[2];this.coord=new S(t),this.segmentIndex=e,this.dist=i},"Jn");Ji.prototype.getSegmentIndex=function(){return this.segmentIndex},Ji.prototype.getCoordinate=function(){return this.coord},Ji.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Ji.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Ji.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Ji.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Ji.prototype.getDistance=function(){return this.dist},Ji.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Ji.prototype.interfaces_=function(){return[w]},Ji.prototype.getClass=function(){return Ji};var Ki=(0,r.a)(function(){this._nodeMap=new p,this.edge=null;var t=arguments[0];this.edge=t},"Qn");Ki.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Ki.prototype.iterator=function(){return this._nodeMap.values().iterator()},Ki.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),i=e.next();e.hasNext();){var n=e.next(),r=this.createSplitEdge(i,n);t.add(r),i=n}},Ki.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Ki.prototype.createSplitEdge=function(t,e){var i=e.segmentIndex-t.segmentIndex+2,n=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(n);r||i--;var o=new Array(i).fill(null),a=0;o[a++]=new S(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return r&&(o[a]=e.coord),new nn(o,new Ne(this.edge._label))},Ki.prototype.add=function(t,e,i){var n=new Ji(t,e,i),r=this._nodeMap.get(n);return null!==r?r:(this._nodeMap.put(n,n),n)},Ki.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Ki.prototype.interfaces_=function(){return[]},Ki.prototype.getClass=function(){return Ki};var Qi=(0,r.a)(function(){},"Zn");Qi.prototype.getChainStartIndices=function(t){var e=0,i=new Mt;i.add(new R(e));do{var n=this.findChainEnd(t,e);i.add(new R(n)),e=n}while(e<t.length-1);return Qi.toIntArray(i)},Qi.prototype.findChainEnd=function(t,e){for(var i=Ue.quadrant(t[e],t[e+1]),n=e+1;n<t.length&&Ue.quadrant(t[n-1],t[n])===i;)n++;return n-1},Qi.prototype.interfaces_=function(){return[]},Qi.prototype.getClass=function(){return Qi},Qi.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),i=0;i<e.length;i++)e[i]=t.get(i).intValue();return e};var $i=(0,r.a)(function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new X,this.env2=new X;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Qi;this.startIndex=e.getChainStartIndices(this.pts)},"$n");$i.prototype.getCoordinates=function(){return this.pts},$i.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,i=this.pts[this.startIndex[t+1]].x;return e>i?e:i},$i.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,i=this.pts[this.startIndex[t+1]].x;return e<i?e:i},$i.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[i],e.startIndex[i+1],n)}else if(6===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],l=arguments[4],h=arguments[5],u=this.pts[r],c=this.pts[o],p=a.pts[s],d=a.pts[l];if(o-r==1&&l-s==1)return h.addIntersections(this.e,r,a.e,s),null;if(this.env1.init(u,c),this.env2.init(p,d),!this.env1.intersects(this.env2))return null;var f=Math.trunc((r+o)/2),g=Math.trunc((s+l)/2);r<f&&(s<g&&this.computeIntersectsForChain(r,f,a,s,g,h),g<l&&this.computeIntersectsForChain(r,f,a,g,l,h)),f<o&&(s<g&&this.computeIntersectsForChain(f,o,a,s,g,h),g<l&&this.computeIntersectsForChain(f,o,a,g,l,h))}},$i.prototype.getStartIndexes=function(){return this.startIndex},$i.prototype.computeIntersects=function(t,e){for(var i=0;i<this.startIndex.length-1;i++)for(var n=0;n<t.startIndex.length-1;n++)this.computeIntersectsForChain(i,t,n,e)},$i.prototype.interfaces_=function(){return[]},$i.prototype.getClass=function(){return $i};var tn=(0,r.a)(function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var i=0;i<3;i++)this._depth[e][i]=t.NULL_VALUE},"t"),en={NULL_VALUE:{configurable:!0}};tn.prototype.getDepth=function(t,e){return this._depth[t][e]},tn.prototype.setDepth=function(t,e,i){this._depth[t][e]=i},tn.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==tn.NULL_VALUE)return!1;return!0}if(1===arguments.length){var i=arguments[0];return this._depth[i][1]===tn.NULL_VALUE}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this._depth[n][r]===tn.NULL_VALUE}},tn.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var i=1;i<3;i++){var n=0;this._depth[t][i]>e&&(n=1),this._depth[t][i]=n}}},tn.prototype.getDelta=function(t){return this._depth[t][Te.RIGHT]-this._depth[t][Te.LEFT]},tn.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?P.EXTERIOR:P.INTERIOR},tn.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},tn.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var i=1;i<3;i++){var n=t.getLocation(e,i);n!==P.EXTERIOR&&n!==P.INTERIOR||(this.isNull(e,i)?this._depth[e][i]=tn.depthAtLocation(n):this._depth[e][i]+=tn.depthAtLocation(n))}else if(3===arguments.length){var r=arguments[0],o=arguments[1];arguments[2]===P.INTERIOR&&this._depth[r][o]++}},tn.prototype.interfaces_=function(){return[]},tn.prototype.getClass=function(){return tn},tn.depthAtLocation=function(t){return t===P.EXTERIOR?0:t===P.INTERIOR?1:tn.NULL_VALUE},en.NULL_VALUE.get=function(){return-1},Object.defineProperties(tn,en);var nn=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Ki(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new tn,this._depthDelta=0,1===arguments.length){var i=arguments[0];e.call(this,i,null)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.pts=n,this._label=r}}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Ne.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var i=t;if(this.pts.length!==i.pts.length)return!1;for(var n=!0,r=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(i.pts[a])||(n=!1),this.pts[a].equals2D(i.pts[--o])||(r=!1),!n&&!r)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new $i(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new X;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,i,n){var r=new S(t.getIntersection(n)),o=e,a=t.getEdgeDistance(i,n),s=o+1;if(s<this.pts.length){var l=this.pts[s];r.equals2D(l)&&(o=s,a=0)}this.eiList.add(r,o,a)},e.prototype.toString=function(){var t=new q;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,i){for(var n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,i,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],i=arguments[1];i.setAtLeastIfValid(e.getLocation(0,Te.ON),e.getLocation(1,Te.ON),1),e.isArea()&&(i.setAtLeastIfValid(e.getLocation(0,Te.LEFT),e.getLocation(1,Te.LEFT),2),i.setAtLeastIfValid(e.getLocation(0,Te.RIGHT),e.getLocation(1,Te.RIGHT),2))},e}(ke),rn=(0,r.a)(function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Xi,this._bufParams=t||null},"ii");rn.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},rn.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var i=e.getLabel(),n=t.getLabel();e.isPointwiseEqual(t)||(n=new Ne(t.getLabel())).flip(),i.merge(n);var r=rn.depthDelta(n),o=e.getDepthDelta()+r;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(rn.depthDelta(t.getLabel()))},rn.prototype.buildSubgraphs=function(t,e){for(var i=new Mt,n=t.iterator();n.hasNext();){var r=n.next(),o=r.getRightmostCoordinate(),a=new Ri(i).getDepth(o);r.computeDepth(a),r.findResultEdges(),i.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},rn.prototype.createSubgraphs=function(t){for(var e=new Mt,i=t.getNodes().iterator();i.hasNext();){var n=i.next();if(!n.isVisited()){var r=new Le;r.create(n),e.add(r)}}return ti.sort(e,ti.reverseOrder()),e},rn.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},rn.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new wi,i=new ot;return i.setPrecisionModel(t),e.setSegmentIntersector(new Zi(i)),e},rn.prototype.buffer=function(t,e){var i=this._workingPrecisionModel;null===i&&(i=t.getPrecisionModel()),this._geomFact=t.getFactory();var n=new qi(i,this._bufParams),r=new Fi(t,e,n).getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,i),this._graph=new He(new Hi),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new We(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},rn.prototype.computeNodedEdges=function(t,e){var i=this.getNoder(e);i.computeNodes(t);for(var n=i.getNodedSubstrings().iterator();n.hasNext();){var r=n.next(),o=r.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=r.getData(),s=new nn(r.getCoordinates(),new Ne(a));this.insertUniqueEdge(s)}}},rn.prototype.setNoder=function(t){this._workingNoder=t},rn.prototype.interfaces_=function(){return[]},rn.prototype.getClass=function(){return rn},rn.depthDelta=function(t){var e=t.getLocation(0,Te.LEFT),i=t.getLocation(0,Te.RIGHT);return e===P.INTERIOR&&i===P.EXTERIOR?1:e===P.EXTERIOR&&i===P.INTERIOR?-1:0},rn.convertSegStrings=function(t){for(var e=new ye,i=new Mt;t.hasNext();){var n=t.next(),r=e.createLineString(n.getCoordinates());i.add(r)}return e.buildGeometry(i)};var on=(0,r.a)(function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2],o=arguments[3];this._noder=i,this._scaleFactor=n,this._offsetX=r,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}},"ri");on.prototype.rescale=function(){if(L(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],n=0;n<i.length;n++)i[n].x=i[n].x/this._scaleFactor+this._offsetX,i[n].y=i[n].y/this._scaleFactor+this._offsetY;2===i.length&&i[0].equals2D(i[1])&&H.out.println(i)}},on.prototype.scale=function(){if(L(arguments[0],bt)){for(var t=arguments[0],e=new Mt,i=t.iterator();i.hasNext();){var n=i.next();e.add(new fi(this.scale(n.getCoordinates()),n.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],o=new Array(r.length).fill(null),a=0;a<r.length;a++)o[a]=new S(Math.round((r[a].x-this._offsetX)*this._scaleFactor),Math.round((r[a].y-this._offsetY)*this._scaleFactor),r[a].z);return Ct.removeRepeatedPoints(o)}},on.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},on.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},on.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},on.prototype.interfaces_=function(){return[xi]},on.prototype.getClass=function(){return on};var an=(0,r.a)(function(){this._li=new ot,this._segStrings=null;var t=arguments[0];this._segStrings=t},"oi"),sn={fact:{configurable:!0}};an.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var i=arguments[0],n=arguments[1].iterator();n.hasNext();)for(var r=n.next().getCoordinates(),o=1;o<r.length-1;o++)if(r[o].equals(i))throw new tt("found endpt/interior pt intersection at index "+o+" :pt "+i)},an.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),i=this._segStrings.iterator();i.hasNext();){var n=i.next();this.checkInteriorIntersections(e,n)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],a=r.getCoordinates(),s=o.getCoordinates(),l=0;l<a.length-1;l++)for(var h=0;h<s.length-1;h++)this.checkInteriorIntersections(r,l,o,h);else if(4===arguments.length){var u=arguments[0],c=arguments[1],p=arguments[2],d=arguments[3];if(u===p&&c===d)return null;var f=u.getCoordinates()[c],g=u.getCoordinates()[c+1],m=p.getCoordinates()[d],v=p.getCoordinates()[d+1];if(this._li.computeIntersection(f,g,m,v),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,f,g)||this.hasInteriorIntersection(this._li,m,v)))throw new tt("found non-noded intersection at "+f+"-"+g+" and "+m+"-"+v)}},an.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},an.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var i=arguments[0].getCoordinates(),n=0;n<i.length-2;n++)this.checkCollapse(i[n],i[n+1],i[n+2])},an.prototype.hasInteriorIntersection=function(t,e,i){for(var n=0;n<t.getIntersectionNum();n++){var r=t.getIntersection(n);if(!r.equals(e)&&!r.equals(i))return!0}return!1},an.prototype.checkCollapse=function(t,e,i){if(t.equals(i))throw new tt("found non-noded collapse at "+an.fact.createLineString([t,e,i]))},an.prototype.interfaces_=function(){return[]},an.prototype.getClass=function(){return an},sn.fact.get=function(){return new ye},Object.defineProperties(an,sn);var ln=(0,r.a)(function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],i=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=i,e<=0)throw new _("Scale factor must be non-zero");1!==e&&(this._pt=new S(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new S,this._p1Scaled=new S),this.initCorners(this._pt)},"ai"),hn={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};ln.prototype.intersectsScaled=function(t,e){var i=Math.min(t.x,e.x),n=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<i||this._minx>n||this._maxy<r||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return it.isTrue(!(a&&s),"Found bad envelope test"),s},ln.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new S(this._maxx,this._maxy),this._corner[1]=new S(this._minx,this._maxy),this._corner[2]=new S(this._minx,this._miny),this._corner[3]=new S(this._maxx,this._miny)},ln.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},ln.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},ln.prototype.getCoordinate=function(){return this._originalPt},ln.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},ln.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=ln.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new X(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},ln.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},ln.prototype.intersectsToleranceSquare=function(t,e){var i=!1,n=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||i&&n||t.equals(this._pt)||e.equals(this._pt)))))},ln.prototype.addSnappedNode=function(t,e){var i=t.getCoordinate(e),n=t.getCoordinate(e+1);return!!this.intersects(i,n)&&(t.addIntersection(this.getCoordinate(),e),!0)},ln.prototype.interfaces_=function(){return[]},ln.prototype.getClass=function(){return ln},hn.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(ln,hn);var un=(0,r.a)(function(){this.tempEnv1=new X,this.selectedSegment=new gi},"li");un.prototype.select=function(){if(1!==arguments.length&&2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un};var cn=(0,r.a)(function(){this._index=null;var t=arguments[0];this._index=t},"ci"),pn={HotPixelSnapAction:{configurable:!0}};cn.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],i=arguments[1],n=arguments[2],r=e.getSafeEnvelope(),o=new dn(e,i,n);return this._index.query(r,{interfaces_:function(){return[Je]},visitItem:function(t){t.select(r,o)}}),o.isNodeAdded()}},cn.prototype.interfaces_=function(){return[]},cn.prototype.getClass=function(){return cn},pn.HotPixelSnapAction.get=function(){return dn},Object.defineProperties(cn,pn);var dn=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],i=arguments[1],n=arguments[2];this._hotPixel=e,this._parentEdge=i,this._hotPixelVertexIndex=n}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],i=arguments[1],n=e.getContext();if(null!==this._parentEdge&&n===this._parentEdge&&i===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(un),fn=(0,r.a)(function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new Mt},"fi");fn.prototype.processIntersections=function(t,e,i,n){if(t===i&&e===n)return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=i.getCoordinates()[n],s=i.getCoordinates()[n+1];if(this._li.computeIntersection(r,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));t.addIntersections(this._li,e,0),i.addIntersections(this._li,n,1)}},fn.prototype.isDone=function(){return!1},fn.prototype.getInteriorIntersections=function(){return this._interiorIntersections},fn.prototype.interfaces_=function(){return[Yi]},fn.prototype.getClass=function(){return fn};var gn=(0,r.a)(function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new ot,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()},"gi");gn.prototype.checkCorrectness=function(t){var e=fi.getNodedSubstrings(t),i=new an(e);try{i.checkValid()}catch(t){if(!(t instanceof j))throw t;t.printStackTrace()}},gn.prototype.getNodedSubstrings=function(){return fi.getNodedSubstrings(this._nodedSegStrings)},gn.prototype.snapRound=function(t,e){var i=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(i),this.computeVertexSnaps(t)},gn.prototype.findInteriorIntersections=function(t,e){var i=new fn(e);return this._noder.setSegmentIntersector(i),this._noder.computeNodes(t),i.getInteriorIntersections()},gn.prototype.computeVertexSnaps=function(){if(L(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof fi)for(var i=arguments[0],n=i.getCoordinates(),r=0;r<n.length;r++){var o=new ln(n[r],this._scaleFactor,this._li);this._pointSnapper.snap(o,i,r)&&i.addIntersection(n[r],r)}},gn.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new wi,this._pointSnapper=new cn(this._noder.getIndex()),this.snapRound(t,this._li)},gn.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var i=e.next(),n=new ln(i,this._scaleFactor,this._li);this._pointSnapper.snap(n)}},gn.prototype.interfaces_=function(){return[xi]},gn.prototype.getClass=function(){return gn};var mn=(0,r.a)(function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Mi,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this._argGeom=e,this._bufParams=i}},"di"),vn={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};mn.prototype.bufferFixedPrecision=function(t){var e=new on(new gn(new fe(1)),t.getScale()),i=new rn(this._bufParams);i.setWorkingPrecisionModel(t),i.setNoder(e),this._resultGeometry=i.buffer(this._argGeom,this._distance)},mn.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=mn.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Pe))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var i=arguments[0],n=mn.precisionScaleFactor(this._argGeom,this._distance,i),r=new fe(n);this.bufferFixedPrecision(r)}},mn.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===fe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},mn.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},mn.prototype.bufferOriginalPrecision=function(){try{var t=new rn(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof tt))throw t;this._saveException=t}},mn.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},mn.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn},mn.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new mn(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var i=arguments[0],n=arguments[1],r=arguments[2],o=new mn(i);return o.setQuadrantSegments(r),o.getResultGeometry(n)}if(arguments[2]instanceof Mi&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var a=arguments[0],s=arguments[1],l=arguments[2];return new mn(a,l).getResultGeometry(s)}}else if(4===arguments.length){var h=arguments[0],u=arguments[1],c=arguments[2],p=arguments[3],d=new mn(h);return d.setQuadrantSegments(c),d.setEndCapStyle(p),d.getResultGeometry(u)}},mn.precisionScaleFactor=function(t,e,i){var n=t.getEnvelopeInternal(),r=O.max(Math.abs(n.getMaxX()),Math.abs(n.getMaxY()),Math.abs(n.getMinX()),Math.abs(n.getMinY()))+2*(e>0?e:0),o=i-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,o)},vn.CAP_ROUND.get=function(){return Mi.CAP_ROUND},vn.CAP_BUTT.get=function(){return Mi.CAP_FLAT},vn.CAP_FLAT.get=function(){return Mi.CAP_FLAT},vn.CAP_SQUARE.get=function(){return Mi.CAP_SQUARE},vn.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(mn,vn);var yn=(0,r.a)(function(){this._pt=[new S,new S],this._distance=x.NaN,this._isNull=!0},"_i");yn.prototype.getCoordinates=function(){return this._pt},yn.prototype.getCoordinate=function(t){return this._pt[t]},yn.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],i=arguments[1];if(this._isNull)return this.initialize(e,i),null;var n=e.distance(i);n<this._distance&&this.initialize(e,i,n)}},yn.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2];this._pt[0].setCoordinate(i),this._pt[1].setCoordinate(n),this._distance=r,this._isNull=!1}},yn.prototype.getDistance=function(){return this._distance},yn.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],i=arguments[1];if(this._isNull)return this.initialize(e,i),null;var n=e.distance(i);n>this._distance&&this.initialize(e,i,n)}},yn.prototype.interfaces_=function(){return[]},yn.prototype.getClass=function(){return yn};var _n=(0,r.a)(function(){},"mi");_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n},_n.computeDistance=function(){if(arguments[2]instanceof yn&&arguments[0]instanceof Jt&&arguments[1]instanceof S)for(var t=arguments[0],e=arguments[1],i=arguments[2],n=t.getCoordinates(),r=new gi,o=0;o<n.length-1;o++){r.setCoordinates(n[o],n[o+1]);var a=r.closestPoint(e);i.setMinimum(a,e)}else if(arguments[2]instanceof yn&&arguments[0]instanceof te&&arguments[1]instanceof S){var s=arguments[0],l=arguments[1],h=arguments[2];_n.computeDistance(s.getExteriorRing(),l,h);for(var u=0;u<s.getNumInteriorRing();u++)_n.computeDistance(s.getInteriorRingN(u),l,h)}else if(arguments[2]instanceof yn&&arguments[0]instanceof ct&&arguments[1]instanceof S){var c=arguments[0],p=arguments[1],d=arguments[2];if(c instanceof Jt)_n.computeDistance(c,p,d);else if(c instanceof te)_n.computeDistance(c,p,d);else if(c instanceof jt)for(var f=c,g=0;g<f.getNumGeometries();g++){var m=f.getGeometryN(g);_n.computeDistance(m,p,d)}else d.setMinimum(c.getCoordinate(),p)}else if(arguments[2]instanceof yn&&arguments[0]instanceof gi&&arguments[1]instanceof S){var v=arguments[0],y=arguments[1],_=arguments[2],x=v.closestPoint(y);_.setMinimum(x,y)}};var xn=(0,r.a)(function(t){this._maxPtDist=new yn,this._inputGeom=t||null},"vi"),bn={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};xn.prototype.computeMaxMidpointDistance=function(t){var e=new En(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},xn.prototype.computeMaxVertexDistance=function(t){var e=new wn(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},xn.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},xn.prototype.getDistancePoints=function(){return this._maxPtDist},xn.prototype.interfaces_=function(){return[]},xn.prototype.getClass=function(){return xn},bn.MaxPointDistanceFilter.get=function(){return wn},bn.MaxMidpointDistanceFilter.get=function(){return En},Object.defineProperties(xn,bn);var wn=(0,r.a)(function(t){this._maxPtDist=new yn,this._minPtDist=new yn,this._geom=t||null},"Ei");wn.prototype.filter=function(t){this._minPtDist.initialize(),_n.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},wn.prototype.getMaxPointDistance=function(){return this._maxPtDist},wn.prototype.interfaces_=function(){return[ft]},wn.prototype.getClass=function(){return wn};var En=(0,r.a)(function(t){this._maxPtDist=new yn,this._minPtDist=new yn,this._geom=t||null},"xi");En.prototype.filter=function(t,e){if(0===e)return null;var i=t.getCoordinate(e-1),n=t.getCoordinate(e),r=new S((i.x+n.x)/2,(i.y+n.y)/2);this._minPtDist.initialize(),_n.computeDistance(this._geom,r,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},En.prototype.isDone=function(){return!1},En.prototype.isGeometryChanged=function(){return!1},En.prototype.getMaxPointDistance=function(){return this._maxPtDist},En.prototype.interfaces_=function(){return[Vt]},En.prototype.getClass=function(){return En};var Mn=(0,r.a)(function(t){this._comps=t||null},"Ni");Mn.prototype.filter=function(t){t instanceof te&&this._comps.add(t)},Mn.prototype.interfaces_=function(){return[zt]},Mn.prototype.getClass=function(){return Mn},Mn.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Mn.getPolygons(t,new Mt)}if(2===arguments.length){var e=arguments[0],i=arguments[1];return e instanceof te?i.add(e):e instanceof jt&&e.apply(new Mn(i)),i}};var Sn=(0,r.a)(function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this._lines=e,this._isForcedToLineString=i}},"Ci");Sn.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ie){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Jt&&this._lines.add(t)},Sn.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Sn.prototype.interfaces_=function(){return[ut]},Sn.prototype.getClass=function(){return Sn},Sn.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Sn.getLines(t))}if(2===arguments.length){var e=arguments[0],i=arguments[1];return e.getFactory().buildGeometry(Sn.getLines(e,i))}},Sn.getLines=function(){if(1===arguments.length){var t=arguments[0];return Sn.getLines(t,!1)}if(2===arguments.length){if(L(arguments[0],bt)&&L(arguments[1],bt)){for(var e=arguments[0],i=arguments[1],n=e.iterator();n.hasNext();){var r=n.next();Sn.getLines(r,i)}return i}if(arguments[0]instanceof ct&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1],s=new Mt;return o.apply(new Sn(s,a)),s}if(arguments[0]instanceof ct&&L(arguments[1],bt)){var l=arguments[0],h=arguments[1];return l instanceof Jt?h.add(l):l.apply(new Sn(h)),h}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&L(arguments[0],bt)&&L(arguments[1],bt)){for(var u=arguments[0],c=arguments[1],p=arguments[2],d=u.iterator();d.hasNext();){var f=d.next();Sn.getLines(f,c,p)}return c}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ct&&L(arguments[1],bt)){var g=arguments[0],m=arguments[1],v=arguments[2];return g.apply(new Sn(m,v)),m}}};var Tn=(0,r.a)(function(){if(this._boundaryRule=gt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0!==arguments.length&&1===arguments.length){var t=arguments[0];if(null===t)throw new _("Rule must be non-null");this._boundaryRule=t}},"Si");Tn.prototype.locateInternal=function(){if(arguments[0]instanceof S&&arguments[1]instanceof te){var t=arguments[0],e=arguments[1];if(e.isEmpty())return P.EXTERIOR;var i=e.getExteriorRing(),n=this.locateInPolygonRing(t,i);if(n===P.EXTERIOR)return P.EXTERIOR;if(n===P.BOUNDARY)return P.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var o=e.getInteriorRingN(r),a=this.locateInPolygonRing(t,o);if(a===P.INTERIOR)return P.EXTERIOR;if(a===P.BOUNDARY)return P.BOUNDARY}return P.INTERIOR}if(arguments[0]instanceof S&&arguments[1]instanceof Jt){var s=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(s))return P.EXTERIOR;var h=l.getCoordinates();return l.isClosed()||!s.equals(h[0])&&!s.equals(h[h.length-1])?lt.isOnLine(s,h)?P.INTERIOR:P.EXTERIOR:P.BOUNDARY}if(arguments[0]instanceof S&&arguments[1]instanceof Qt){var u=arguments[0];return arguments[1].getCoordinate().equals2D(u)?P.INTERIOR:P.EXTERIOR}},Tn.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?lt.locatePointInRing(t,e.getCoordinates()):P.EXTERIOR},Tn.prototype.intersects=function(t,e){return this.locate(t,e)!==P.EXTERIOR},Tn.prototype.updateLocationInfo=function(t){t===P.INTERIOR&&(this._isIn=!0),t===P.BOUNDARY&&this._numBoundaries++},Tn.prototype.computeLocation=function(t,e){if(e instanceof Qt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Jt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof te)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Gt)for(var i=e,n=0;n<i.getNumGeometries();n++){var r=i.getGeometryN(n);this.updateLocationInfo(this.locateInternal(t,r))}else if(e instanceof ne)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof jt)for(var l=new zi(e);l.hasNext();){var h=l.next();h!==e&&this.computeLocation(t,h)}},Tn.prototype.locate=function(t,e){return e.isEmpty()?P.EXTERIOR:e instanceof Jt||e instanceof te?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?P.BOUNDARY:this._numBoundaries>0||this._isIn?P.INTERIOR:P.EXTERIOR)},Tn.prototype.interfaces_=function(){return[]},Tn.prototype.getClass=function(){return Tn};var Cn=(0,r.a)(function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],i=arguments[1];t.call(this,e,t.INSIDE_AREA,i)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2];this._component=n,this._segIndex=r,this._pt=o}},"t"),An={INSIDE_AREA:{configurable:!0}};Cn.prototype.isInsideArea=function(){return this._segIndex===Cn.INSIDE_AREA},Cn.prototype.getCoordinate=function(){return this._pt},Cn.prototype.getGeometryComponent=function(){return this._component},Cn.prototype.getSegmentIndex=function(){return this._segIndex},Cn.prototype.interfaces_=function(){return[]},Cn.prototype.getClass=function(){return Cn},An.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Cn,An);var Pn=(0,r.a)(function(t){this._pts=t||null},"wi");Pn.prototype.filter=function(t){t instanceof Qt&&this._pts.add(t)},Pn.prototype.interfaces_=function(){return[zt]},Pn.prototype.getClass=function(){return Pn},Pn.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Qt?ti.singletonList(t):Pn.getPoints(t,new Mt)}if(2===arguments.length){var e=arguments[0],i=arguments[1];return e instanceof Qt?i.add(e):e instanceof jt&&e.apply(new Pn(i)),i}};var In=(0,r.a)(function(){this._locations=null;var t=arguments[0];this._locations=t},"Oi");In.prototype.filter=function(t){(t instanceof Qt||t instanceof Jt||t instanceof te)&&this._locations.add(new Cn(t,0,t.getCoordinate()))},In.prototype.interfaces_=function(){return[zt]},In.prototype.getClass=function(){return In},In.getLocations=function(t){var e=new Mt;return t.apply(new In(e)),e};var Ln=(0,r.a)(function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Tn,this._minDistanceLocation=null,this._minDistance=x.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=i,this._geom[1]=n,this._terminateDistance=r}},"Ti");Ln.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1],n=1-e,r=Mn.getPolygons(this._geom[e]);if(r.size()>0){var o=In.getLocations(this._geom[n]);if(this.computeContainmentDistance(o,r,i),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[n]=i[0],this._minDistanceLocation[e]=i[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&L(arguments[0],Et)&&L(arguments[1],Et)){for(var a=arguments[0],s=arguments[1],l=arguments[2],h=0;h<a.size();h++)for(var u=a.get(h),c=0;c<s.size();c++)if(this.computeContainmentDistance(u,s.get(c),l),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Cn&&arguments[1]instanceof te){var p=arguments[0],d=arguments[1],f=arguments[2],g=p.getCoordinate();if(P.EXTERIOR!==this._ptLocator.locate(g,d))return this._minDistance=0,f[0]=p,f[1]=new Cn(d,g),null}},Ln.prototype.computeMinDistanceLinesPoints=function(t,e,i){for(var n=0;n<t.size();n++)for(var r=t.get(n),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(r,a,i),this._minDistance<=this._terminateDistance)return null}},Ln.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Sn.getLines(this._geom[0]),i=Sn.getLines(this._geom[1]),n=Pn.getPoints(this._geom[0]),r=Pn.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(i,n,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(n,r,t),void this.updateMinDistance(t,!1))))},Ln.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Ln.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Ln.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Ln.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Jt&&arguments[1]instanceof Qt){var t=arguments[0],e=arguments[1],i=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var n=t.getCoordinates(),r=e.getCoordinate(),o=0;o<n.length-1;o++){var a=lt.distancePointLine(r,n[o],n[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new gi(n[o],n[o+1]).closestPoint(r);i[0]=new Cn(t,o,s),i[1]=new Cn(e,0,r)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Jt&&arguments[1]instanceof Jt){var l=arguments[0],h=arguments[1],u=arguments[2];if(l.getEnvelopeInternal().distance(h.getEnvelopeInternal())>this._minDistance)return null;for(var c=l.getCoordinates(),p=h.getCoordinates(),d=0;d<c.length-1;d++)for(var f=0;f<p.length-1;f++){var g=lt.distanceLineLine(c[d],c[d+1],p[f],p[f+1]);if(g<this._minDistance){this._minDistance=g;var m=new gi(c[d],c[d+1]),v=new gi(p[f],p[f+1]),y=m.closestPoints(v);u[0]=new Cn(l,d,y[0]),u[1]=new Cn(h,f,y[1])}if(this._minDistance<=this._terminateDistance)return null}}},Ln.prototype.computeMinDistancePoints=function(t,e,i){for(var n=0;n<t.size();n++)for(var r=t.get(n),o=0;o<e.size();o++){var a=e.get(o),s=r.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,i[0]=new Cn(r,0,r.getCoordinate()),i[1]=new Cn(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Ln.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new _("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Ln.prototype.computeMinDistanceLines=function(t,e,i){for(var n=0;n<t.size();n++)for(var r=t.get(n),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(r,a,i),this._minDistance<=this._terminateDistance)return null}},Ln.prototype.interfaces_=function(){return[]},Ln.prototype.getClass=function(){return Ln},Ln.distance=function(t,e){return new Ln(t,e).distance()},Ln.isWithinDistance=function(t,e,i){return new Ln(t,e,i).distance()<=i},Ln.nearestPoints=function(t,e){return new Ln(t,e).nearestPoints()};var On=(0,r.a)(function(){this._pt=[new S,new S],this._distance=x.NaN,this._isNull=!0},"Ri");On.prototype.getCoordinates=function(){return this._pt},On.prototype.getCoordinate=function(t){return this._pt[t]},On.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],i=arguments[1];if(this._isNull)return this.initialize(e,i),null;var n=e.distance(i);n<this._distance&&this.initialize(e,i,n)}},On.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2];this._pt[0].setCoordinate(i),this._pt[1].setCoordinate(n),this._distance=r,this._isNull=!1}},On.prototype.toString=function(){return $.toLineString(this._pt[0],this._pt[1])},On.prototype.getDistance=function(){return this._distance},On.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],i=arguments[1];if(this._isNull)return this.initialize(e,i),null;var n=e.distance(i);n>this._distance&&this.initialize(e,i,n)}},On.prototype.interfaces_=function(){return[]},On.prototype.getClass=function(){return On};var Nn=(0,r.a)(function(){},"Pi");Nn.prototype.interfaces_=function(){return[]},Nn.prototype.getClass=function(){return Nn},Nn.computeDistance=function(){if(arguments[2]instanceof On&&arguments[0]instanceof Jt&&arguments[1]instanceof S)for(var t=arguments[0],e=arguments[1],i=arguments[2],n=new gi,r=t.getCoordinates(),o=0;o<r.length-1;o++){n.setCoordinates(r[o],r[o+1]);var a=n.closestPoint(e);i.setMinimum(a,e)}else if(arguments[2]instanceof On&&arguments[0]instanceof te&&arguments[1]instanceof S){var s=arguments[0],l=arguments[1],h=arguments[2];Nn.computeDistance(s.getExteriorRing(),l,h);for(var u=0;u<s.getNumInteriorRing();u++)Nn.computeDistance(s.getInteriorRingN(u),l,h)}else if(arguments[2]instanceof On&&arguments[0]instanceof ct&&arguments[1]instanceof S){var c=arguments[0],p=arguments[1],d=arguments[2];if(c instanceof Jt)Nn.computeDistance(c,p,d);else if(c instanceof te)Nn.computeDistance(c,p,d);else if(c instanceof jt)for(var f=c,g=0;g<f.getNumGeometries();g++){var m=f.getGeometryN(g);Nn.computeDistance(m,p,d)}else d.setMinimum(c.getCoordinate(),p)}else if(arguments[2]instanceof On&&arguments[0]instanceof gi&&arguments[1]instanceof S){var v=arguments[0],y=arguments[1],_=arguments[2],x=v.closestPoint(y);_.setMinimum(x,y)}};var qn=(0,r.a)(function(){this._g0=null,this._g1=null,this._ptDist=new On,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},"Di"),Rn={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};qn.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},qn.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new _("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},qn.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},qn.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},qn.prototype.computeOrientedDistance=function(t,e,i){var n=new Dn(e);if(t.apply(n),i.setMaximum(n.getMaxPointDistance()),this._densifyFrac>0){var r=new kn(e,this._densifyFrac);t.apply(r),i.setMaximum(r.getMaxPointDistance())}},qn.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},qn.prototype.interfaces_=function(){return[]},qn.prototype.getClass=function(){return qn},qn.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new qn(t,e).distance()}if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2],o=new qn(i,n);return o.setDensifyFraction(r),o.distance()}},Rn.MaxPointDistanceFilter.get=function(){return Dn},Rn.MaxDensifiedByFractionDistanceFilter.get=function(){return kn},Object.defineProperties(qn,Rn);var Dn=(0,r.a)(function(){this._maxPtDist=new On,this._minPtDist=new On,this._euclideanDist=new Nn,this._geom=null;var t=arguments[0];this._geom=t},"Ai");Dn.prototype.filter=function(t){this._minPtDist.initialize(),Nn.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Dn.prototype.getMaxPointDistance=function(){return this._maxPtDist},Dn.prototype.interfaces_=function(){return[ft]},Dn.prototype.getClass=function(){return Dn};var kn=(0,r.a)(function(){this._maxPtDist=new On,this._minPtDist=new On,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))},"Fi");kn.prototype.filter=function(t,e){if(0===e)return null;for(var i=t.getCoordinate(e-1),n=t.getCoordinate(e),r=(n.x-i.x)/this._numSubSegs,o=(n.y-i.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=i.x+a*r,l=i.y+a*o,h=new S(s,l);this._minPtDist.initialize(),Nn.computeDistance(this._geom,h,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},kn.prototype.isDone=function(){return!1},kn.prototype.isGeometryChanged=function(){return!1},kn.prototype.getMaxPointDistance=function(){return this._maxPtDist},kn.prototype.interfaces_=function(){return[Vt]},kn.prototype.getClass=function(){return kn};var Bn=(0,r.a)(function(t,e,i){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=i||null},"Gi"),Fn={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Bn.prototype.checkMaximumDistance=function(t,e,i){var n=new qn(e,t);if(n.setDensifyFraction(.25),this._maxDistanceFound=n.orientedDistance(),this._maxDistanceFound>i){this._isValid=!1;var r=n.getCoordinates();this._errorLocation=r[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+$.toLineString(r[0],r[1])+")"}},Bn.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Bn.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Bn.VERBOSE&&H.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Bn.prototype.checkNegativeValid=function(){if(!(this._input instanceof te||this._input instanceof ne||this._input instanceof jt))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Bn.prototype.getErrorIndicator=function(){return this._errorIndicator},Bn.prototype.checkMinimumDistance=function(t,e,i){var n=new Ln(t,e,i);if(this._minDistanceFound=n.distance(),this._minDistanceFound<i){this._isValid=!1;var r=n.nearestPoints();this._errorLocation=n.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+$.toLineString(r[0],r[1])+" )"}},Bn.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Bn.prototype.getErrorLocation=function(){return this._errorLocation},Bn.prototype.getPolygonLines=function(t){for(var e=new Mt,i=new Sn(e),n=Mn.getPolygons(t).iterator();n.hasNext();)n.next().apply(i);return t.getFactory().buildGeometry(e)},Bn.prototype.getErrorMessage=function(){return this._errMsg},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn},Fn.VERBOSE.get=function(){return!1},Fn.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Bn,Fn);var Un=(0,r.a)(function(t,e,i){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=i||null},"Bi"),zn={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Un.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Un.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Un.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new X(this._input.getEnvelopeInternal());e.expandBy(this._distance);var i=new X(this._result.getEnvelopeInternal());i.expandBy(t),i.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(i)),this.report("Envelope")},Un.prototype.checkDistance=function(){var t=new Bn(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Un.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Un.prototype.checkPolygonal=function(){this._result instanceof te||this._result instanceof ne||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Un.prototype.getErrorIndicator=function(){return this._errorIndicator},Un.prototype.getErrorLocation=function(){return this._errorLocation},Un.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Un.prototype.report=function(t){if(!Un.VERBOSE)return null;H.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Un.prototype.getErrorMessage=function(){return this._errorMsg},Un.prototype.interfaces_=function(){return[]},Un.prototype.getClass=function(){return Un},Un.isValidMsg=function(t,e,i){var n=new Un(t,e,i);return n.isValid()?null:n.getErrorMessage()},Un.isValid=function(t,e,i){return!!new Un(t,e,i).isValid()},zn.VERBOSE.get=function(){return!1},zn.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Un,zn);var Vn=(0,r.a)(function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e},"Ui");Vn.prototype.getCoordinates=function(){return this._pts},Vn.prototype.size=function(){return this._pts.length},Vn.prototype.getCoordinate=function(t){return this._pts[t]},Vn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Vn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:ci.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Vn.prototype.setData=function(t){this._data=t},Vn.prototype.getData=function(){return this._data},Vn.prototype.toString=function(){return $.toLineString(new he(this._pts))},Vn.prototype.interfaces_=function(){return[pi]},Vn.prototype.getClass=function(){return Vn};var jn=(0,r.a)(function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Mt,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null},"zi");jn.prototype.getInteriorIntersection=function(){return this._interiorIntersection},jn.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},jn.prototype.getIntersectionSegments=function(){return this._intSegments},jn.prototype.count=function(){return this._intersectionCount},jn.prototype.getIntersections=function(){return this._intersections},jn.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},jn.prototype.setKeepIntersections=function(t){this._keepIntersections=t},jn.prototype.processIntersections=function(t,e,i,n){if(!this._findAllIntersections&&this.hasIntersection()||t===i&&e===n||this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(i,n))return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=i.getCoordinates()[n],s=i.getCoordinates()[n+1];this._li.computeIntersection(r,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=r,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},jn.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},jn.prototype.hasIntersection=function(){return null!==this._interiorIntersection},jn.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},jn.prototype.interfaces_=function(){return[Yi]},jn.prototype.getClass=function(){return jn},jn.createAllIntersectionsFinder=function(t){var e=new jn(t);return e.setFindAllIntersections(!0),e},jn.createAnyIntersectionFinder=function(t){return new jn(t)},jn.createIntersectionCounter=function(t){var e=new jn(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Gn=(0,r.a)(function(){this._li=new ot,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t},"Xi");Gn.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Gn.prototype.getIntersections=function(){return this._segInt.getIntersections()},Gn.prototype.isValid=function(){return this.execute(),this._isValid},Gn.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Gn.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new jn(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new wi;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Gn.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Pe(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Gn.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+$.toLineString(t[0],t[1])+" and "+$.toLineString(t[2],t[3])},Gn.prototype.interfaces_=function(){return[]},Gn.prototype.getClass=function(){return Gn},Gn.computeIntersections=function(t){var e=new Gn(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Hn=(0,r.a)(function t(){this._nv=null;var e=arguments[0];this._nv=new Gn(t.toSegmentStrings(e))},"t");Hn.prototype.checkValid=function(){this._nv.checkValid()},Hn.prototype.interfaces_=function(){return[]},Hn.prototype.getClass=function(){return Hn},Hn.toSegmentStrings=function(t){for(var e=new Mt,i=t.iterator();i.hasNext();){var n=i.next();e.add(new Vn(n.getCoordinates(),n))}return e},Hn.checkValid=function(t){new Hn(t).checkValid()};var Wn=(0,r.a)(function(t){this._mapOp=t},"ki");Wn.prototype.map=function(t){for(var e=new Mt,i=0;i<t.getNumGeometries();i++){var n=this._mapOp.map(t.getGeometryN(i));n.isEmpty()||e.add(n)}return t.getFactory().createGeometryCollection(ye.toGeometryArray(e))},Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn},Wn.map=function(t,e){return new Wn(e).map(t)};var Xn=(0,r.a)(function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Mt,this._resultLineList=new Mt;var t=arguments[0],e=arguments[1],i=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=i},"ji");Xn.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var i=e.next();this.collectLineEdge(i,t,this._lineEdgesList),this.collectBoundaryTouchEdge(i,t,this._lineEdgesList)}},Xn.prototype.labelIsolatedLine=function(t,e){var i=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,i)},Xn.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Xn.prototype.collectLineEdge=function(t,e,i){var n=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Cr.isResultOfOp(n,e)||r.isCovered()||(i.add(r),t.setVisitedEdge(!0)))},Xn.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var i=e.next(),n=i.getEdge();if(i.isLineEdge()&&!n.isCoveredSet()){var r=this._op.isCoveredByA(i.getCoordinate());n.setCovered(r)}}},Xn.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var i=e.next(),n=i.getLabel();i.isIsolated()&&(n.isNull(0)?this.labelIsolatedLine(i,0):this.labelIsolatedLine(i,1))}},Xn.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var i=e.next(),n=this._geometryFactory.createLineString(i.getCoordinates());this._resultLineList.add(n),i.setInResult(!0)}},Xn.prototype.collectBoundaryTouchEdge=function(t,e,i){var n=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(it.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Cr.isResultOfOp(n,e)&&e===Cr.INTERSECTION&&(i.add(t.getEdge()),t.setVisitedEdge(!0))))},Xn.prototype.interfaces_=function(){return[]},Xn.prototype.getClass=function(){return Xn};var Yn=(0,r.a)(function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Mt;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e},"Hi");Yn.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var i=this._geometryFactory.createPoint(e);this._resultPointList.add(i)}},Yn.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var i=e.next();if(!(i.isInResult()||i.isIncidentEdgeInResult()||0!==i.getEdges().getDegree()&&t!==Cr.INTERSECTION)){var n=i.getLabel();Cr.isResultOfOp(n,t)&&this.filterCoveredNodeToPoint(i)}}},Yn.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Yn.prototype.interfaces_=function(){return[]},Yn.prototype.getClass=function(){return Yn};var Zn=(0,r.a)(function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1},"Wi");Zn.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Zn.prototype.transformPolygon=function(t,e){var i=!0,n=this.transformLinearRing(t.getExteriorRing(),t);null!==n&&n instanceof ie&&!n.isEmpty()||(i=!1);for(var r=new Mt,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof ie||(i=!1),r.add(a))}if(i)return this._factory.createPolygon(n,r.toArray([]));var s=new Mt;return null!==n&&s.add(n),s.addAll(r),this._factory.buildGeometry(s)},Zn.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Zn.prototype.getInputGeometry=function(){return this._inputGeom},Zn.prototype.transformMultiLineString=function(t,e){for(var i=new Mt,n=0;n<t.getNumGeometries();n++){var r=this.transformLineString(t.getGeometryN(n),t);null!==r&&(r.isEmpty()||i.add(r))}return this._factory.buildGeometry(i)},Zn.prototype.transformCoordinates=function(t,e){return this.copy(t)},Zn.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Zn.prototype.transformMultiPoint=function(t,e){for(var i=new Mt,n=0;n<t.getNumGeometries();n++){var r=this.transformPoint(t.getGeometryN(n),t);null!==r&&(r.isEmpty()||i.add(r))}return this._factory.buildGeometry(i)},Zn.prototype.transformMultiPolygon=function(t,e){for(var i=new Mt,n=0;n<t.getNumGeometries();n++){var r=this.transformPolygon(t.getGeometryN(n),t);null!==r&&(r.isEmpty()||i.add(r))}return this._factory.buildGeometry(i)},Zn.prototype.copy=function(t){return t.copy()},Zn.prototype.transformGeometryCollection=function(t,e){for(var i=new Mt,n=0;n<t.getNumGeometries();n++){var r=this.transform(t.getGeometryN(n));null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||i.add(r))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(ye.toGeometryArray(i)):this._factory.buildGeometry(i)},Zn.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Qt)return this.transformPoint(t,null);if(t instanceof ee)return this.transformMultiPoint(t,null);if(t instanceof ie)return this.transformLinearRing(t,null);if(t instanceof Jt)return this.transformLineString(t,null);if(t instanceof Gt)return this.transformMultiLineString(t,null);if(t instanceof te)return this.transformPolygon(t,null);if(t instanceof ne)return this.transformMultiPolygon(t,null);if(t instanceof jt)return this.transformGeometryCollection(t,null);throw new _("Unknown Geometry subtype: "+t.getClass().getName())},Zn.prototype.transformLinearRing=function(t,e){var i=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===i)return this._factory.createLinearRing(null);var n=i.size();return n>0&&n<4&&!this._preserveType?this._factory.createLineString(i):this._factory.createLinearRing(i)},Zn.prototype.interfaces_=function(){return[]},Zn.prototype.getClass=function(){return Zn};var Jn=(0,r.a)(function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new gi,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Jt&&"number"==typeof arguments[1]){var e=arguments[0],i=arguments[1];t.call(this,e.getCoordinates(),i)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=r}},"t");Jn.prototype.snapVertices=function(t,e){for(var i=this._isClosed?t.size()-1:t.size(),n=0;n<i;n++){var r=t.get(n),o=this.findSnapForVertex(r,e);null!==o&&(t.set(n,new S(o)),0===n&&this._isClosed&&t.set(t.size()-1,new S(o)))}},Jn.prototype.findSnapForVertex=function(t,e){for(var i=0;i<e.length;i++){if(t.equals2D(e[i]))return null;if(t.distance(e[i])<this._snapTolerance)return e[i]}return null},Jn.prototype.snapTo=function(t){var e=new Tt(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Jn.prototype.snapSegments=function(t,e){if(0===e.length)return null;var i=e.length;e[0].equals2D(e[e.length-1])&&(i=e.length-1);for(var n=0;n<i;n++){var r=e[n],o=this.findSegmentIndexToSnap(r,t);o>=0&&t.add(o+1,new S(r),!1)}},Jn.prototype.findSegmentIndexToSnap=function(t,e){for(var i=x.MAX_VALUE,n=-1,r=0;r<e.size()-1;r++){if(this._seg.p0=e.get(r),this._seg.p1=e.get(r+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<i&&(i=o,n=r)}return n},Jn.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn},Jn.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Kn=(0,r.a)(function(t){this._srcGeom=t||null},"Ji"),Qn={SNAP_PRECISION_FACTOR:{configurable:!0}};Kn.prototype.snapTo=function(t,e){var i=this.extractTargetCoordinates(t);return new $n(e,i).transform(this._srcGeom)},Kn.prototype.snapToSelf=function(t,e){var i=this.extractTargetCoordinates(this._srcGeom),n=new $n(t,i,!0).transform(this._srcGeom),r=n;return e&&L(r,$t)&&(r=n.buffer(0)),r},Kn.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Kn.prototype.extractTargetCoordinates=function(t){for(var e=new f,i=t.getCoordinates(),n=0;n<i.length;n++)e.add(i[n]);return e.toArray(new Array(0).fill(null))},Kn.prototype.computeMinimumSegmentLength=function(t){for(var e=x.MAX_VALUE,i=0;i<t.length-1;i++){var n=t[i].distance(t[i+1]);n<e&&(e=n)}return e},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn},Kn.snap=function(t,e,i){var n=new Array(2).fill(null),r=new Kn(t);n[0]=r.snapTo(e,i);var o=new Kn(e);return n[1]=o.snapTo(n[0],i),n},Kn.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Kn.computeSizeBasedSnapTolerance(t),i=t.getPrecisionModel();if(i.getType()===fe.FIXED){var n=1/i.getScale()*2/1.415;n>e&&(e=n)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1];return Math.min(Kn.computeOverlaySnapTolerance(r),Kn.computeOverlaySnapTolerance(o))}},Kn.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Kn.SNAP_PRECISION_FACTOR},Kn.snapToSelf=function(t,e,i){return new Kn(t).snapToSelf(e,i)},Qn.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Kn,Qn);var $n=function(t){function e(e,i,n){t.call(this),this._snapTolerance=e||null,this._snapPts=i||null,this._isSelfSnap=void 0!==n&&n}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var i=new Jn(t,this._snapTolerance);return i.setAllowSnappingToSourceVertices(this._isSelfSnap),i.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var i=t.toCoordinateArray(),n=this.snapLine(i,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Zn),tr=(0,r.a)(function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null},"$i");tr.prototype.getCommon=function(){return x.longBitsToDouble(this._commonBits)},tr.prototype.add=function(t){var e=x.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=tr.signExpBits(this._commonBits),this._isFirst=!1,null):tr.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=tr.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=tr.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},tr.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=x.longBitsToDouble(t),i="0000000000000000000000000000000000000000000000000000000000000000"+x.toBinaryString(t),n=i.substring(i.length-64);return n.substring(0,1)+"  "+n.substring(1,12)+"(exp) "+n.substring(12)+" [ "+e+" ]"}},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},tr.getBit=function(t,e){return t&1<<e?1:0},tr.signExpBits=function(t){return t>>52},tr.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},tr.numCommonMostSigMantissaBits=function(t,e){for(var i=0,n=52;n>=0;n--){if(tr.getBit(t,n)!==tr.getBit(e,n))return i;i++}return 52};var er=(0,r.a)(function(){this._commonCoord=null,this._ccFilter=new nr},"tr"),ir={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};er.prototype.addCommonBits=function(t){var e=new rr(this._commonCoord);t.apply(e),t.geometryChanged()},er.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new S(this._commonCoord);e.x=-e.x,e.y=-e.y;var i=new rr(e);return t.apply(i),t.geometryChanged(),t},er.prototype.getCommonCoordinate=function(){return this._commonCoord},er.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},er.prototype.interfaces_=function(){return[]},er.prototype.getClass=function(){return er},ir.CommonCoordinateFilter.get=function(){return nr},ir.Translater.get=function(){return rr},Object.defineProperties(er,ir);var nr=(0,r.a)(function(){this._commonBitsX=new tr,this._commonBitsY=new tr},"nr");nr.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},nr.prototype.getCommonCoordinate=function(){return new S(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},nr.prototype.interfaces_=function(){return[ft]},nr.prototype.getClass=function(){return nr};var rr=(0,r.a)(function(){this.trans=null;var t=arguments[0];this.trans=t},"ir");rr.prototype.filter=function(t,e){var i=t.getOrdinate(e,0)+this.trans.x,n=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,i),t.setOrdinate(e,1,n)},rr.prototype.isDone=function(){return!1},rr.prototype.isGeometryChanged=function(){return!0},rr.prototype.interfaces_=function(){return[Vt]},rr.prototype.getClass=function(){return rr};var or=(0,r.a)(function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()},"rr");or.prototype.selfSnap=function(t){return new Kn(t).snapTo(t,this._snapTolerance)},or.prototype.removeCommonBits=function(t){this._cbr=new er,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},or.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},or.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),i=Cr.overlayOp(e[0],e[1],t);return this.prepareResult(i)},or.prototype.checkValid=function(t){t.isValid()||H.out.println("Snapped geometry is invalid")},or.prototype.computeSnapTolerance=function(){this._snapTolerance=Kn.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},or.prototype.snap=function(t){var e=this.removeCommonBits(t);return Kn.snap(e[0],e[1],this._snapTolerance)},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},or.overlayOp=function(t,e,i){return new or(t,e).getResultGeometry(i)},or.union=function(t,e){return or.overlayOp(t,e,Cr.UNION)},or.intersection=function(t,e){return or.overlayOp(t,e,Cr.INTERSECTION)},or.symDifference=function(t,e){return or.overlayOp(t,e,Cr.SYMDIFFERENCE)},or.difference=function(t,e){return or.overlayOp(t,e,Cr.DIFFERENCE)};var ar=(0,r.a)(function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e},"or");ar.prototype.getResultGeometry=function(t){var e=null,i=!1,n=null;try{e=Cr.overlayOp(this._geom[0],this._geom[1],t),i=!0}catch(t){if(!(t instanceof tt))throw t;n=t}if(!i)try{e=or.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof tt?n:t}return e},ar.prototype.interfaces_=function(){return[]},ar.prototype.getClass=function(){return ar},ar.overlayOp=function(t,e,i){return new ar(t,e).getResultGeometry(i)},ar.union=function(t,e){return ar.overlayOp(t,e,Cr.UNION)},ar.intersection=function(t,e){return ar.overlayOp(t,e,Cr.INTERSECTION)},ar.symDifference=function(t,e){return ar.overlayOp(t,e,Cr.SYMDIFFERENCE)},ar.difference=function(t,e){return ar.overlayOp(t,e,Cr.DIFFERENCE)};var sr=(0,r.a)(function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e},"sr");sr.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr};var lr=(0,r.a)(function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],i=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=i}else if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=n,this._xValue=r,this._obj=o}},"t"),hr={INSERT:{configurable:!0},DELETE:{configurable:!0}};lr.prototype.isDelete=function(){return this._eventType===lr.DELETE},lr.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},lr.prototype.getObject=function(){return this._obj},lr.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},lr.prototype.getInsertEvent=function(){return this._insertEvent},lr.prototype.isInsert=function(){return this._eventType===lr.INSERT},lr.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},lr.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},lr.prototype.interfaces_=function(){return[w]},lr.prototype.getClass=function(){return lr},hr.INSERT.get=function(){return 1},hr.DELETE.get=function(){return 2},Object.defineProperties(lr,hr);var ur=(0,r.a)(function(){},"lr");ur.prototype.interfaces_=function(){return[]},ur.prototype.getClass=function(){return ur};var cr=(0,r.a)(function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],i=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=i},"cr");cr.prototype.isTrivialIntersection=function(t,e,i,n){if(t===i&&1===this._li.getIntersectionNum()){if(cr.isAdjacentSegments(e,n))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&n===r||0===n&&e===r)return!0}}return!1},cr.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},cr.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},cr.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},cr.prototype.isBoundaryPointInternal=function(t,e){for(var i=e.iterator();i.hasNext();){var n=i.next().getCoordinate();if(t.isIntersection(n))return!0}return!1},cr.prototype.hasProperIntersection=function(){return this._hasProper},cr.prototype.hasIntersection=function(){return this._hasIntersection},cr.prototype.isDone=function(){return this._isDone},cr.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},cr.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},cr.prototype.addIntersections=function(t,e,i,n){if(t===i&&e===n)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=i.getCoordinates()[n],s=i.getCoordinates()[n+1];this._li.computeIntersection(r,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),i.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,i,n)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),i.addIntersections(this._li,n,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr},cr.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var pr=function(t){function e(){t.call(this),this.events=new Mt,this.nOverlaps=null}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){ti.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var i=this.events.get(e);if(i.isInsert()&&this.processOverlaps(e,i.getDeleteEventIndex(),i,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof cr&&L(arguments[0],Et)&&L(arguments[1],Et)){var n=arguments[0],r=arguments[1],o=arguments[2];this.addEdges(n,n),this.addEdges(r,r),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&L(arguments[0],Et)&&arguments[1]instanceof cr){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var i=t.getMonotoneChainEdge(),n=i.getStartIndexes(),r=0;r<n.length-1;r++){var o=new sr(i,r),a=new lr(e,i.getMinX(r),o);this.events.add(a),this.events.add(new lr(i.getMaxX(r),a))}},e.prototype.processOverlaps=function(t,e,i,n){for(var r=i.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();i.isSameLabel(a)||(r.computeIntersections(s,n),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var i=arguments[0],n=arguments[1],r=i.iterator();r.hasNext();){var o=r.next();this.addEdge(o,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ur),dr=(0,r.a)(function(){this._min=x.POSITIVE_INFINITY,this._max=x.NEGATIVE_INFINITY},"hr"),fr={NodeComparator:{configurable:!0}};dr.prototype.getMin=function(){return this._min},dr.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},dr.prototype.getMax=function(){return this._max},dr.prototype.toString=function(){return $.toLineString(new S(this._min,0),new S(this._max,0))},dr.prototype.interfaces_=function(){return[]},dr.prototype.getClass=function(){return dr},fr.NodeComparator.get=function(){return gr},Object.defineProperties(dr,fr);var gr=(0,r.a)(function(){},"gr");gr.prototype.compare=function(t,e){var i=t,n=e,r=(i._min+i._max)/2,o=(n._min+n._max)/2;return r<o?-1:r>o?1:0},gr.prototype.interfaces_=function(){return[M]},gr.prototype.getClass=function(){return gr};var mr=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],i=arguments[1],n=arguments[2];this._min=e,this._max=i,this._item=n}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,i){if(!this.intersects(t,e))return null;i.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(dr),vr=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],i=arguments[1];this._node1=e,this._node2=i,this.buildExtent(this._node1,this._node2)}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,i){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,i),null!==this._node2&&this._node2.query(t,e,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(dr),yr=(0,r.a)(function(){this._leaves=new Mt,this._root=null,this._level=0},"_r");yr.prototype.buildTree=function(){ti.sort(this._leaves,new dr.NodeComparator);for(var t=this._leaves,e=null,i=new Mt;;){if(this.buildLevel(t,i),1===i.size())return i.get(0);e=t,t=i,i=e}},yr.prototype.insert=function(t,e,i){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new mr(t,e,i))},yr.prototype.query=function(t,e,i){this.init(),this._root.query(t,e,i)},yr.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},yr.prototype.printNode=function(t){H.out.println($.toLineString(new S(t._min,this._level),new S(t._max,this._level)))},yr.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},yr.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var i=0;i<t.size();i+=2){var n=t.get(i);if(null===(i+1<t.size()?t.get(i):null))e.add(n);else{var r=new vr(t.get(i),t.get(i+1));e.add(r)}}},yr.prototype.interfaces_=function(){return[]},yr.prototype.getClass=function(){return yr};var _r=(0,r.a)(function(){this._items=new Mt},"mr");_r.prototype.visitItem=function(t){this._items.add(t)},_r.prototype.getItems=function(){return this._items},_r.prototype.interfaces_=function(){return[Je]},_r.prototype.getClass=function(){return _r};var xr=(0,r.a)(function(){this._index=null;var t=arguments[0];if(!L(t,$t))throw new _("Argument must be Polygonal");this._index=new Er(t)},"vr"),br={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};xr.prototype.locate=function(t){var e=new st(t),i=new wr(e);return this._index.query(t.y,t.y,i),e.getLocation()},xr.prototype.interfaces_=function(){return[Ui]},xr.prototype.getClass=function(){return xr},br.SegmentVisitor.get=function(){return wr},br.IntervalIndexedGeometry.get=function(){return Er},Object.defineProperties(xr,br);var wr=(0,r.a)(function(){this._counter=null;var t=arguments[0];this._counter=t},"Er");wr.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},wr.prototype.interfaces_=function(){return[Je]},wr.prototype.getClass=function(){return wr};var Er=(0,r.a)(function(){this._index=new yr;var t=arguments[0];this.init(t)},"xr");Er.prototype.init=function(t){for(var e=Sn.getLines(t).iterator();e.hasNext();){var i=e.next().getCoordinates();this.addLine(i)}},Er.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var i=new gi(t[e-1],t[e]),n=Math.min(i.p0.y,i.p1.y),r=Math.max(i.p0.y,i.p1.y);this._index.insert(n,r,i)}},Er.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],i=new _r;return this._index.query(t,e,i),i.getItems()}if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2];this._index.query(n,r,o)}},Er.prototype.interfaces_=function(){return[]},Er.prototype.getClass=function(){return Er};var Mr=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new de,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Tn,2===arguments.length){var e=arguments[0],i=arguments[1],n=gt.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=i,this._boundaryNodeRule=n,null!==i&&this.add(i)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=r,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,i){var n=this._nodes.addNode(i).getLabel(),r=1;P.NONE,n.getLocation(t,Te.ON)===P.BOUNDARY&&r++;var o=e.determineBoundary(this._boundaryNodeRule,r);n.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2],o=new cr(i,!0,!1);o.setIsDoneIfProperInt(r);var a=this.createEdgeSetIntersector(),s=this._parentGeom instanceof ie||this._parentGeom instanceof te||this._parentGeom instanceof ne,l=n||!s;return a.computeIntersections(this._edges,o,l),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,i){var n=new cr(e,i,!0);return n.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,n),n},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Qt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,P.INTERIOR)}else if(arguments[0]instanceof S){var e=arguments[0];this.insertPoint(this._argIndex,e,P.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),P.EXTERIOR,P.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var i=t.getInteriorRingN(e);this.addPolygonRing(i,P.INTERIOR,P.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],P.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],P.BOUNDARY)},e.prototype.addLineString=function(t){var e=Ct.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var i=new nn(e,new Ne(this._argIndex,P.INTERIOR));this._lineEdgeMap.put(t,i),this.insertEdge(i),it.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),i=0,n=t.iterator();n.hasNext();){var r=n.next();e[i++]=r.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,i){if(this.isBoundaryNode(t,e))return null;i===P.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,i)},e.prototype.addPolygonRing=function(t,e,i){if(t.isEmpty())return null;var n=Ct.removeRepeatedPoints(t.getCoordinates());if(n.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=n[0],null;var r=e,o=i;lt.isCCW(n)&&(r=i,o=e);var a=new nn(n,new Ne(this._argIndex,P.BOUNDARY,r,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,n[0],P.BOUNDARY)},e.prototype.insertPoint=function(t,e,i){var n=this._nodes.addNode(e),r=n.getLabel();null===r?n._label=new Ne(t,i):r.setLocation(t,i)},e.prototype.createEdgeSetIntersector=function(){return new pr},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var i=e.next(),n=i.getLabel().getLocation(t),r=i.eiList.iterator();r.hasNext();){var o=r.next();this.addSelfIntersectionNode(t,o.coord,n)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ne&&(this._useBoundaryDeterminationRule=!1),e instanceof te)this.addPolygon(e);else if(e instanceof Jt)this.addLineString(e);else if(e instanceof Qt)this.addPoint(e);else if(e instanceof ee)this.addCollection(e);else if(e instanceof Gt)this.addCollection(e);else if(e instanceof ne)this.addCollection(e);else{if(!(e instanceof jt))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var i=t.getGeometryN(e);this.add(i)}},e.prototype.locate=function(t){return L(this._parentGeom,$t)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new xr(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?P.BOUNDARY:P.INTERIOR},e}(He),Sr=(0,r.a)(function(){if(this._li=new ot,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Mr(0,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1],n=gt.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(i.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(i.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Mr(0,e,n),this._arg[1]=new Mr(1,i,n)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];r.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Mr(0,r,a),this._arg[1]=new Mr(1,o,a)}},"Cr");Sr.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Sr.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Sr.prototype.interfaces_=function(){return[]},Sr.prototype.getClass=function(){return Sr};var Tr=(0,r.a)(function(){},"Sr");Tr.prototype.interfaces_=function(){return[]},Tr.prototype.getClass=function(){return Tr},Tr.map=function(){if(arguments[0]instanceof ct&&L(arguments[1],Tr.MapOp)){for(var t=arguments[0],e=arguments[1],i=new Mt,n=0;n<t.getNumGeometries();n++){var r=e.map(t.getGeometryN(n));null!==r&&i.add(r)}return t.getFactory().buildGeometry(i)}if(L(arguments[0],bt)&&L(arguments[1],Tr.MapOp)){for(var o=arguments[0],a=arguments[1],s=new Mt,l=o.iterator();l.hasNext();){var h=l.next(),u=a.map(h);null!==u&&s.add(u)}return s}},Tr.MapOp=function(){};var Cr=function(t){function e(){var e=arguments[0],i=arguments[1];t.call(this,e,i),this._ptLocator=new Tn,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Xi,this._resultPolyList=new Mt,this._resultLineList=new Mt,this._resultPointList=new Mt,this._graph=new He(new Hi),this._geomFact=e.getFactory()}return(0,r.a)(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var i=e.getLabel(),n=t.getLabel();e.isPointwiseEqual(t)||(n=new Ne(t.getLabel())).flip();var r=e.getDepth();r.isNull()&&r.add(i),r.add(n),i.merge(n)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),i=e.getSym();e.isInResult()&&i.isInResult()&&(e.setInResult(!1),i.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,i,n,r){var o=new Mt;return o.addAll(t),o.addAll(i),o.addAll(n),o.isEmpty()?e.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var i=e.iterator();i.hasNext();){var n=i.next();if(this._ptLocator.locate(t,n)!==P.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new Mt,e=this._edgeList.iterator();e.hasNext();){var i=e.next();i.isCollapsed()&&(e.remove(),t.add(i.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),i=e.getEdges().getLabel();e.getLabel().merge(i)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var i=e.next();this.insertUniqueEdge(i)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Mt;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Hn.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var i=new We(this._geomFact);i.add(this._graph),this._resultPolyList=i.getPolygons();var n=new Xn(this,this._geomFact,this._ptLocator);this._resultLineList=n.build(t);var r=new Yn(this,this._geomFact,this._ptLocator);this._resultPointList=r.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var i=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,i)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var i=e.next();this._graph.addNode(i.getCoordinate()).setLabel(t,i.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var i=this._graph.getEdgeEnds().iterator();i.hasNext();){var n=i.next(),r=n.getLabel();r.isArea()&&!n.isInteriorAreaEdge()&&e.isResultOfOp(r.getLocation(0,Te.RIGHT),r.getLocation(1,Te.RIGHT),t)&&n.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),i=e.getLabel(),n=e.getDepth();if(!n.isNull()){n.normalize();for(var r=0;r<2;r++)i.isNull(r)||!i.isArea()||n.isNull(r)||(0===n.getDelta(r)?i.toLine(r):(it.isTrue(!n.isNull(r,Te.LEFT),"depth of LEFT side has not been initialized"),i.setLocation(r,Te.LEFT,n.getLocation(r,Te.LEFT)),it.isTrue(!n.isNull(r,Te.RIGHT),"depth of RIGHT side has not been initialized"),i.setLocation(r,Te.RIGHT,n.getLocation(r,Te.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),i=e.getLabel();e.isIsolated()&&(i.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(i)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Sr);Cr.overlayOp=function(t,e,i){return new Cr(t,e).getResultGeometry(i)},Cr.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Cr.createEmptyResult(Cr.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var i=e;return Wn.map(t,{interfaces_:function(){return[Tr.MapOp]},map:function(t){return t.intersection(i)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ar.overlayOp(t,e,Cr.INTERSECTION)},Cr.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Cr.createEmptyResult(Cr.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ar.overlayOp(t,e,Cr.SYMDIFFERENCE)},Cr.resultDimension=function(t,e,i){var n=e.getDimension(),r=i.getDimension(),o=-1;switch(t){case Cr.INTERSECTION:o=Math.min(n,r);break;case Cr.UNION:o=Math.max(n,r);break;case Cr.DIFFERENCE:o=n;break;case Cr.SYMDIFFERENCE:o=Math.max(n,r)}return o},Cr.createEmptyResult=function(t,e,i,n){var r=null;switch(Cr.resultDimension(t,e,i)){case-1:r=n.createGeometryCollection(new Array(0).fill(null));break;case 0:r=n.createPoint();break;case 1:r=n.createLineString();break;case 2:r=n.createPolygon()}return r},Cr.difference=function(t,e){return t.isEmpty()?Cr.createEmptyResult(Cr.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ar.overlayOp(t,e,Cr.DIFFERENCE))},Cr.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],i=t.getLocation(0),n=t.getLocation(1);return Cr.isResultOfOp(i,n,e)}if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];switch(r===P.BOUNDARY&&(r=P.INTERIOR),o===P.BOUNDARY&&(o=P.INTERIOR),a){case Cr.INTERSECTION:return r===P.INTERIOR&&o===P.INTERIOR;case Cr.UNION:return r===P.INTERIOR||o===P.INTERIOR;case Cr.DIFFERENCE:return r===P.INTERIOR&&o!==P.INTERIOR;case Cr.SYMDIFFERENCE:return r===P.INTERIOR&&o!==P.INTERIOR||r!==P.INTERIOR&&o===P.INTERIOR}return!1}},Cr.INTERSECTION=1,Cr.UNION=2,Cr.DIFFERENCE=3,Cr.SYMDIFFERENCE=4;var Ar=(0,r.a)(function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Tn,this._seg=new gi;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)},"br");Ar.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var i=this._linework.getGeometryN(e).getCoordinateSequence(),n=0;n<i.size()-1;n++)if(i.getCoordinate(n,this._seg.p0),i.getCoordinate(n+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Ar.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?P.BOUNDARY:this._ptLocator.locate(t,this._g)},Ar.prototype.extractLinework=function(t){var e=new Pr;t.apply(e);var i=e.getLinework(),n=ye.toLineStringArray(i);return t.getFactory().createMultiLineString(n)},Ar.prototype.interfaces_=function(){return[]},Ar.prototype.getClass=function(){return Ar};var Pr=(0,r.a)(function(){this._linework=null,this._linework=new Mt},"wr");Pr.prototype.getLinework=function(){return this._linework},Pr.prototype.filter=function(t){if(t instanceof te){var e=t;this._linework.add(e.getExteriorRing());for(var i=0;i<e.getNumInteriorRing();i++)this._linework.add(e.getInteriorRingN(i))}},Pr.prototype.interfaces_=function(){return[zt]},Pr.prototype.getClass=function(){return Pr};var Ir=(0,r.a)(function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t},"Or");Ir.prototype.extractPoints=function(t,e,i){for(var n=t.getCoordinates(),r=0;r<n.length-1;r++)this.computeOffsetPoints(n[r],n[r+1],e,i)},Ir.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Ir.prototype.getPoints=function(t){for(var e=new Mt,i=Sn.getLines(this._g).iterator();i.hasNext();){var n=i.next();this.extractPoints(n,t,e)}return e},Ir.prototype.computeOffsetPoints=function(t,e,i,n){var r=e.x-t.x,o=e.y-t.y,a=Math.sqrt(r*r+o*o),s=i*r/a,l=i*o/a,h=(e.x+t.x)/2,u=(e.y+t.y)/2;if(this._doLeft){var c=new S(h-l,u+s);n.add(c)}if(this._doRight){var p=new S(h+l,u-s);n.add(p)}},Ir.prototype.interfaces_=function(){return[]},Ir.prototype.getClass=function(){return Ir};var Lr=(0,r.a)(function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Mt;var e=arguments[0],i=arguments[1],n=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,i),this._geom=[e,i,n],this._locFinder=[new Ar(this._geom[0],this._boundaryDistanceTolerance),new Ar(this._geom[1],this._boundaryDistanceTolerance),new Ar(this._geom[2],this._boundaryDistanceTolerance)]},"t"),Or={TOLERANCE:{configurable:!0}};Lr.prototype.reportResult=function(t,e,i){H.out.println("Overlay result invalid - A:"+P.toLocationSymbol(e[0])+" B:"+P.toLocationSymbol(e[1])+" expected:"+(i?"i":"e")+" actual:"+P.toLocationSymbol(e[2]))},Lr.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Lr.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var i=this._testCoords.get(e);if(!this.checkValid(t,i))return this._invalidLocation=i,!1}return!0}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this._location[0]=this._locFinder[0].getLocation(r),this._location[1]=this._locFinder[1].getLocation(r),this._location[2]=this._locFinder[2].getLocation(r),!!Lr.hasLocation(this._location,P.BOUNDARY)||this.isValidResult(n,this._location)}},Lr.prototype.addTestPts=function(t){var e=new Ir(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Lr.prototype.isValidResult=function(t,e){var i=Cr.isResultOfOp(e[0],e[1],t),n=!(i^e[2]===P.INTERIOR);return n||this.reportResult(t,e,i),n},Lr.prototype.getInvalidLocation=function(){return this._invalidLocation},Lr.prototype.interfaces_=function(){return[]},Lr.prototype.getClass=function(){return Lr},Lr.hasLocation=function(t,e){for(var i=0;i<3;i++)if(t[i]===e)return!0;return!1},Lr.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Kn.computeSizeBasedSnapTolerance(t),Kn.computeSizeBasedSnapTolerance(e))},Lr.isValid=function(t,e,i,n){return new Lr(t,e,n).isValid(i)},Or.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Lr,Or);var Nr=(0,r.a)(function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e},"t");Nr.prototype.extractElements=function(t,e){if(null===t)return null;for(var i=0;i<t.getNumGeometries();i++){var n=t.getGeometryN(i);this._skipEmpty&&n.isEmpty()||e.add(n)}},Nr.prototype.combine=function(){for(var t=new Mt,e=this._inputGeoms.iterator();e.hasNext();){var i=e.next();this.extractElements(i,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Nr.prototype.interfaces_=function(){return[]},Nr.prototype.getClass=function(){return Nr},Nr.combine=function(){if(1===arguments.length){var t=arguments[0];return new Nr(t).combine()}if(2===arguments.length){var e=arguments[0],i=arguments[1];return new Nr(Nr.createList(e,i)).combine()}if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2];return new Nr(Nr.createList(n,r,o)).combine()}},Nr.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Nr.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],i=new Mt;return i.add(t),i.add(e),i}if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2],a=new Mt;return a.add(n),a.add(r),a.add(o),a}};var qr=(0,r.a)(function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new Mt)},"Dr"),Rr={STRTREE_NODE_CAPACITY:{configurable:!0}};qr.prototype.reduceToGeometries=function(t){for(var e=new Mt,i=t.iterator();i.hasNext();){var n=i.next(),r=null;L(n,Et)?r=this.unionTree(n):n instanceof ct&&(r=n),e.add(r)}return e},qr.prototype.extractByEnvelope=function(t,e,i){for(var n=new Mt,r=0;r<e.getNumGeometries();r++){var o=e.getGeometryN(r);o.getEnvelopeInternal().intersects(t)?n.add(o):i.add(o)}return this._geomFactory.buildGeometry(n)},qr.prototype.unionOptimized=function(t,e){var i=t.getEnvelopeInternal(),n=e.getEnvelopeInternal();if(!i.intersects(n))return Nr.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var r=i.intersection(n);return this.unionUsingEnvelopeIntersection(t,e,r)},qr.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new ai(qr.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var i=e.next();t.insert(i.getEnvelopeInternal(),i)}this._inputPolys=null;var n=t.itemsTree();return this.unionTree(n)},qr.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],i=arguments[1],n=arguments[2];if(n-i<=1){var r=qr.getGeometry(e,i);return this.unionSafe(r,null)}if(n-i==2)return this.unionSafe(qr.getGeometry(e,i),qr.getGeometry(e,i+1));var o=Math.trunc((n+i)/2),a=this.binaryUnion(e,i,o),s=this.binaryUnion(e,o,n);return this.unionSafe(a,s)}},qr.prototype.repeatedUnion=function(t){for(var e=null,i=t.iterator();i.hasNext();){var n=i.next();e=null===e?n.copy():e.union(n)}return e},qr.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},qr.prototype.unionActual=function(t,e){return qr.restrictToPolygons(t.union(e))},qr.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},qr.prototype.unionUsingEnvelopeIntersection=function(t,e,i){var n=new Mt,r=this.extractByEnvelope(i,t,n),o=this.extractByEnvelope(i,e,n),a=this.unionActual(r,o);return n.add(a),Nr.combine(n)},qr.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],i=arguments[1];return e.getFactory().createGeometryCollection([e,i]).buffer(0)}},qr.prototype.interfaces_=function(){return[]},qr.prototype.getClass=function(){return qr},qr.restrictToPolygons=function(t){if(L(t,$t))return t;var e=Mn.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(ye.toPolygonArray(e))},qr.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},qr.union=function(t){return new qr(t).union()},Rr.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(qr,Rr);var Dr=(0,r.a)(function(){},"Ar");Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr},Dr.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Cr.createEmptyResult(Cr.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ar.overlayOp(t,e,Cr.UNION)},t.GeoJSONReader=Me,t.GeoJSONWriter=Se,t.OverlayOp=Cr,t.UnionOp=Dr,t.BufferOp=mn,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof e&&typeof i<"u"?a(e):"function"==typeof t&&t.amd?t(["exports"],a):a(o.jsts={})}),se=(0,r.c)((e,i)=>{(0,n.a)(),function(e){var n=/^\s+/,o=/\s+$/,a=0,s=e.round,l=e.min,h=e.max,u=e.random;function c(t,e){if(e=e||{},(t=t||"")instanceof c)return t;if(!(this instanceof c))return new c(t,e);var i=p(t);this._originalInput=t,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=s(100*this._a)/100,this._format=e.format||i.format,this._gradientType=e.gradientType,this._r<1&&(this._r=s(this._r)),this._g<1&&(this._g=s(this._g)),this._b<1&&(this._b=s(this._b)),this._ok=i.ok,this._tc_id=a++}function p(t){var e={r:0,g:0,b:0},i=1,n=null,r=null,o=null,a=!1,s=!1;return"string"==typeof t&&(t=Q(t)),"object"==typeof t&&(K(t.r)&&K(t.g)&&K(t.b)?(e=d(t.r,t.g,t.b),a=!0,s="%"===String(t.r).substr(-1)?"prgb":"rgb"):K(t.h)&&K(t.s)&&K(t.v)?(n=G(t.s),r=G(t.v),e=v(t.h,n,r),a=!0,s="hsv"):K(t.h)&&K(t.s)&&K(t.l)&&(n=G(t.s),o=G(t.l),e=g(t.h,n,o),a=!0,s="hsl"),t.hasOwnProperty("a")&&(i=t.a)),i=k(i),{ok:a,format:t.format||s,r:l(255,h(e.r,0)),g:l(255,h(e.g,0)),b:l(255,h(e.b,0)),a:i}}function d(t,e,i){return{r:255*B(t,255),g:255*B(e,255),b:255*B(i,255)}}function f(t,e,i){t=B(t,255),e=B(e,255),i=B(i,255);var n,r,o=h(t,e,i),a=l(t,e,i),s=(o+a)/2;if(o==a)n=r=0;else{var u=o-a;switch(r=s>.5?u/(2-o-a):u/(o+a),o){case t:n=(e-i)/u+(e<i?6:0);break;case e:n=(i-t)/u+2;break;case i:n=(t-e)/u+4}n/=6}return{h:n,s:r,l:s}}function g(t,e,i){var n,o,a;function s(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}if(t=B(t,360),e=B(e,100),i=B(i,100),(0,r.a)(s,"hue2rgb"),0===e)n=o=a=i;else{var l=i<.5?i*(1+e):i+e-i*e,h=2*i-l;n=s(h,l,t+1/3),o=s(h,l,t),a=s(h,l,t-1/3)}return{r:255*n,g:255*o,b:255*a}}function m(t,e,i){t=B(t,255),e=B(e,255),i=B(i,255);var n,r,o=h(t,e,i),a=l(t,e,i),s=o,u=o-a;if(r=0===o?0:u/o,o==a)n=0;else{switch(o){case t:n=(e-i)/u+(e<i?6:0);break;case e:n=(i-t)/u+2;break;case i:n=(t-e)/u+4}n/=6}return{h:n,s:r,v:s}}function v(t,i,n){t=6*B(t,360),i=B(i,100),n=B(n,100);var r=e.floor(t),o=t-r,a=n*(1-i),s=n*(1-o*i),l=n*(1-(1-o)*i),h=r%6;return{r:255*[n,s,a,a,l,n][h],g:255*[l,n,n,s,a,a][h],b:255*[a,a,l,n,n,s][h]}}function y(t,e,i,n){var r=[j(s(t).toString(16)),j(s(e).toString(16)),j(s(i).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function _(t,e,i,n,r){var o=[j(s(t).toString(16)),j(s(e).toString(16)),j(s(i).toString(16)),j(H(n))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function x(t,e,i,n){return[j(H(n)),j(s(t).toString(16)),j(s(e).toString(16)),j(s(i).toString(16))].join("")}function b(t,e){e=0===e?0:e||10;var i=c(t).toHsl();return i.s-=e/100,i.s=F(i.s),c(i)}function w(t,e){e=0===e?0:e||10;var i=c(t).toHsl();return i.s+=e/100,i.s=F(i.s),c(i)}function E(t){return c(t).desaturate(100)}function M(t,e){e=0===e?0:e||10;var i=c(t).toHsl();return i.l+=e/100,i.l=F(i.l),c(i)}function S(t,e){e=0===e?0:e||10;var i=c(t).toRgb();return i.r=h(0,l(255,i.r-s(-e/100*255))),i.g=h(0,l(255,i.g-s(-e/100*255))),i.b=h(0,l(255,i.b-s(-e/100*255))),c(i)}function T(t,e){e=0===e?0:e||10;var i=c(t).toHsl();return i.l-=e/100,i.l=F(i.l),c(i)}function C(t,e){var i=c(t).toHsl(),n=(i.h+e)%360;return i.h=n<0?360+n:n,c(i)}function A(t){var e=c(t).toHsl();return e.h=(e.h+180)%360,c(e)}function P(t){var e=c(t).toHsl(),i=e.h;return[c(t),c({h:(i+120)%360,s:e.s,l:e.l}),c({h:(i+240)%360,s:e.s,l:e.l})]}function I(t){var e=c(t).toHsl(),i=e.h;return[c(t),c({h:(i+90)%360,s:e.s,l:e.l}),c({h:(i+180)%360,s:e.s,l:e.l}),c({h:(i+270)%360,s:e.s,l:e.l})]}function L(t){var e=c(t).toHsl(),i=e.h;return[c(t),c({h:(i+72)%360,s:e.s,l:e.l}),c({h:(i+216)%360,s:e.s,l:e.l})]}function O(t,e,i){e=e||6,i=i||30;var n=c(t).toHsl(),r=360/i,o=[c(t)];for(n.h=(n.h-(r*e>>1)+720)%360;--e;)n.h=(n.h+r)%360,o.push(c(n));return o}function N(t,e){e=e||6;for(var i=c(t).toHsv(),n=i.h,r=i.s,o=i.v,a=[],s=1/e;e--;)a.push(c({h:n,s:r,v:o})),o=(o+s)%1;return a}(0,r.a)(c,"tinycolor"),c.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,i,n,r=this.toRgb();return t=r.r/255,i=r.g/255,n=r.b/255,.2126*(t<=.03928?t/12.92:e.pow((t+.055)/1.055,2.4))+.7152*(i<=.03928?i/12.92:e.pow((i+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:e.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=k(t),this._roundA=s(100*this._a)/100,this},toHsv:function(){var t=m(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=m(this._r,this._g,this._b),e=s(360*t.h),i=s(100*t.s),n=s(100*t.v);return 1==this._a?"hsv("+e+", "+i+"%, "+n+"%)":"hsva("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=f(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=f(this._r,this._g,this._b),e=s(360*t.h),i=s(100*t.s),n=s(100*t.l);return 1==this._a?"hsl("+e+", "+i+"%, "+n+"%)":"hsla("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return y(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return _(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:s(this._r),g:s(this._g),b:s(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+s(this._r)+", "+s(this._g)+", "+s(this._b)+")":"rgba("+s(this._r)+", "+s(this._g)+", "+s(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:s(100*B(this._r,255))+"%",g:s(100*B(this._g,255))+"%",b:s(100*B(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+s(100*B(this._r,255))+"%, "+s(100*B(this._g,255))+"%, "+s(100*B(this._b,255))+"%)":"rgba("+s(100*B(this._r,255))+"%, "+s(100*B(this._g,255))+"%, "+s(100*B(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(R[y(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+x(this._r,this._g,this._b,this._a),i=e,n=this._gradientType?"GradientType = 1, ":"";if(t){var r=c(t);i="#"+x(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+i+")"},toString:function(t){var e=!!t;t=t||this._format;var i=!1,n=this._a<1&&this._a>=0;return e||!n||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(i=this.toRgbString()),"prgb"===t&&(i=this.toPercentageRgbString()),("hex"===t||"hex6"===t)&&(i=this.toHexString()),"hex3"===t&&(i=this.toHexString(!0)),"hex4"===t&&(i=this.toHex8String(!0)),"hex8"===t&&(i=this.toHex8String()),"name"===t&&(i=this.toName()),"hsl"===t&&(i=this.toHslString()),"hsv"===t&&(i=this.toHsvString()),i||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return c(this.toString())},_applyModification:function(t,e){var i=t.apply(null,[this].concat([].slice.call(e)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(M,arguments)},brighten:function(){return this._applyModification(S,arguments)},darken:function(){return this._applyModification(T,arguments)},desaturate:function(){return this._applyModification(b,arguments)},saturate:function(){return this._applyModification(w,arguments)},greyscale:function(){return this._applyModification(E,arguments)},spin:function(){return this._applyModification(C,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(O,arguments)},complement:function(){return this._applyCombination(A,arguments)},monochromatic:function(){return this._applyCombination(N,arguments)},splitcomplement:function(){return this._applyCombination(L,arguments)},triad:function(){return this._applyCombination(P,arguments)},tetrad:function(){return this._applyCombination(I,arguments)}},c.fromRatio=function(t,e){if("object"==typeof t){var i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]="a"===n?t[n]:G(t[n]));t=i}return c(t,e)},(0,r.a)(p,"inputToRGB"),(0,r.a)(d,"rgbToRgb"),(0,r.a)(f,"rgbToHsl"),(0,r.a)(g,"hslToRgb"),(0,r.a)(m,"rgbToHsv"),(0,r.a)(v,"hsvToRgb"),(0,r.a)(y,"rgbToHex"),(0,r.a)(_,"rgbaToHex"),(0,r.a)(x,"rgbaToArgbHex"),c.equals=function(t,e){return!(!t||!e)&&c(t).toRgbString()==c(e).toRgbString()},c.random=function(){return c.fromRatio({r:u(),g:u(),b:u()})},(0,r.a)(b,"desaturate"),(0,r.a)(w,"saturate"),(0,r.a)(E,"greyscale"),(0,r.a)(M,"lighten"),(0,r.a)(S,"brighten"),(0,r.a)(T,"darken"),(0,r.a)(C,"spin"),(0,r.a)(A,"complement"),(0,r.a)(P,"triad"),(0,r.a)(I,"tetrad"),(0,r.a)(L,"splitcomplement"),(0,r.a)(O,"analogous"),(0,r.a)(N,"monochromatic"),c.mix=function(t,e,i){i=0===i?0:i||50;var n=c(t).toRgb(),r=c(e).toRgb(),o=i/100;return c({r:(r.r-n.r)*o+n.r,g:(r.g-n.g)*o+n.g,b:(r.b-n.b)*o+n.b,a:(r.a-n.a)*o+n.a})},c.readability=function(t,i){var n=c(t),r=c(i);return(e.max(n.getLuminance(),r.getLuminance())+.05)/(e.min(n.getLuminance(),r.getLuminance())+.05)},c.isReadable=function(t,e,i){var n,r,o=c.readability(t,e);switch(r=!1,(n=$(i)).level+n.size){case"AAsmall":case"AAAlarge":r=o>=4.5;break;case"AAlarge":r=o>=3;break;case"AAAsmall":r=o>=7}return r},c.mostReadable=function(t,e,i){var n,r,o,a,s=null,l=0;r=(i=i||{}).includeFallbackColors,o=i.level,a=i.size;for(var h=0;h<e.length;h++)(n=c.readability(t,e[h]))>l&&(l=n,s=c(e[h]));return c.isReadable(t,s,{level:o,size:a})||!r?s:(i.includeFallbackColors=!1,c.mostReadable(t,["#fff","#000"],i))};var q=c.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},R=c.hexNames=D(q);function D(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[t[i]]=i);return e}function k(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function B(t,i){z(t)&&(t="100%");var n=V(t);return t=l(i,h(0,parseFloat(t))),n&&(t=parseInt(t*i,10)/100),e.abs(t-i)<1e-6?1:t%i/parseFloat(i)}function F(t){return l(1,h(0,t))}function U(t){return parseInt(t,16)}function z(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function V(t){return"string"==typeof t&&-1!=t.indexOf("%")}function j(t){return 1==t.length?"0"+t:""+t}function G(t){return t<=1&&(t=100*t+"%"),t}function H(t){return e.round(255*parseFloat(t)).toString(16)}function W(t){return U(t)/255}(0,r.a)(D,"flip"),(0,r.a)(k,"boundAlpha"),(0,r.a)(B,"bound01"),(0,r.a)(F,"clamp01"),(0,r.a)(U,"parseIntFromHex"),(0,r.a)(z,"isOnePointZero"),(0,r.a)(V,"isPercentage"),(0,r.a)(j,"pad2"),(0,r.a)(G,"convertToPercentage"),(0,r.a)(H,"convertDecimalToHex"),(0,r.a)(W,"convertHexToDecimal");var X,Y,Z,J=(Y="[\\s|\\(]+("+(X="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+X+")[,|\\s]+("+X+")\\s*\\)?",Z="[\\s|\\(]+("+X+")[,|\\s]+("+X+")[,|\\s]+("+X+")[,|\\s]+("+X+")\\s*\\)?",{CSS_UNIT:new RegExp(X),rgb:new RegExp("rgb"+Y),rgba:new RegExp("rgba"+Z),hsl:new RegExp("hsl"+Y),hsla:new RegExp("hsla"+Z),hsv:new RegExp("hsv"+Y),hsva:new RegExp("hsva"+Z),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function K(t){return!!J.CSS_UNIT.exec(t)}function Q(t){t=t.replace(n,"").replace(o,"").toLowerCase();var e,i=!1;if(q[t])t=q[t],i=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(e=J.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=J.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=J.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=J.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=J.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=J.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=J.hex8.exec(t))?{r:U(e[1]),g:U(e[2]),b:U(e[3]),a:W(e[4]),format:i?"name":"hex8"}:(e=J.hex6.exec(t))?{r:U(e[1]),g:U(e[2]),b:U(e[3]),format:i?"name":"hex"}:(e=J.hex4.exec(t))?{r:U(e[1]+""+e[1]),g:U(e[2]+""+e[2]),b:U(e[3]+""+e[3]),a:W(e[4]+""+e[4]),format:i?"name":"hex8"}:!!(e=J.hex3.exec(t))&&{r:U(e[1]+""+e[1]),g:U(e[2]+""+e[2]),b:U(e[3]+""+e[3]),format:i?"name":"hex"}}function $(t){var e,i;return"AA"!==(e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==e&&(e="AA"),"small"!==(i=(t.size||"small").toLowerCase())&&"large"!==i&&(i="small"),{level:e,size:i}}(0,r.a)(K,"isValidCSSUnit"),(0,r.a)(Q,"stringInputToObject"),(0,r.a)($,"validateWCAG2Parms"),typeof i<"u"&&i.exports?i.exports=c:"function"==typeof t&&t.amd?t(function(){return c}):window.tinycolor=c}(Math)}),le=(0,r.c)((t,i)=>{(0,n.a)();var o="__lodash_hash_undefined__",a=9007199254740991,s="[object Arguments]",l="[object Function]",h="[object Object]",u=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,p={};p["[object Float32Array]"]=p["[object Float64Array]"]=p["[object Int8Array]"]=p["[object Int16Array]"]=p["[object Int32Array]"]=p["[object Uint8Array]"]=p["[object Uint8ClampedArray]"]=p["[object Uint16Array]"]=p["[object Uint32Array]"]=!0,p[s]=p["[object Array]"]=p["[object ArrayBuffer]"]=p["[object Boolean]"]=p["[object DataView]"]=p["[object Date]"]=p["[object Error]"]=p[l]=p["[object Map]"]=p["[object Number]"]=p[h]=p["[object RegExp]"]=p["[object Set]"]=p["[object String]"]=p["[object WeakMap]"]=!1;var d="object"==typeof e&&e&&e.Object===Object&&e,f="object"==typeof self&&self&&self.Object===Object&&self,g=d||f||Function("return this")(),m="object"==typeof t&&t&&!t.nodeType&&t,v=m&&"object"==typeof i&&i&&!i.nodeType&&i,y=v&&v.exports===m,_=y&&d.process,x=function(){try{return v&&v.require&&v.require("util").types||_&&_.binding&&_.binding("util")}catch{}}(),b=x&&x.isTypedArray;function w(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function E(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}function M(t){return function(e){return t(e)}}function S(t,e){return null==t?void 0:t[e]}function T(t,e){return function(i){return t(e(i))}}(0,r.a)(w,"apply"),(0,r.a)(E,"baseTimes"),(0,r.a)(M,"baseUnary"),(0,r.a)(S,"getValue"),(0,r.a)(T,"overArg");var C,A=Array.prototype,P=Function.prototype,I=Object.prototype,L=g["__core-js_shared__"],O=P.toString,N=I.hasOwnProperty,q=(C=/[^.]+$/.exec(L&&L.keys&&L.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"",R=I.toString,D=O.call(Object),k=RegExp("^"+O.call(N).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),B=y?g.Buffer:void 0,F=g.Symbol,U=g.Uint8Array,z=B?B.allocUnsafe:void 0,V=T(Object.getPrototypeOf,Object),j=Object.create,G=I.propertyIsEnumerable,H=A.splice,W=F?F.toStringTag:void 0,X=function(){try{var t=Yt(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Y=B?B.isBuffer:void 0,Z=Math.max,J=Date.now,K=Yt(g,"Map"),Q=Yt(Object,"create"),$=function(){function t(){}return(0,r.a)(t,"object"),function(e){if(!ve(e))return{};if(j)return j(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();function tt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function et(){this.__data__=Q?Q(null):{},this.size=0}function it(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function nt(t){var e=this.__data__;if(Q){var i=e[t];return i===o?void 0:i}return N.call(e,t)?e[t]:void 0}function rt(t){var e=this.__data__;return Q?void 0!==e[t]:N.call(e,t)}function ot(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Q&&void 0===e?o:e,this}function at(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function st(){this.__data__=[],this.size=0}function lt(t){var e=this.__data__,i=Ct(e,t);return!(i<0||(i==e.length-1?e.pop():H.call(e,i,1),--this.size,0))}function ht(t){var e=this.__data__,i=Ct(e,t);return i<0?void 0:e[i][1]}function ut(t){return Ct(this.__data__,t)>-1}function ct(t,e){var i=this.__data__,n=Ct(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this}function pt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function dt(){this.size=0,this.__data__={hash:new tt,map:new(K||at),string:new tt}}function ft(t){var e=Xt(this,t).delete(t);return this.size-=e?1:0,e}function gt(t){return Xt(this,t).get(t)}function mt(t){return Xt(this,t).has(t)}function vt(t,e){var i=Xt(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this}function yt(t){var e=this.__data__=new at(t);this.size=e.size}function _t(){this.__data__=new at,this.size=0}function xt(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}function bt(t){return this.__data__.get(t)}function wt(t){return this.__data__.has(t)}function Et(t,e){var i=this.__data__;if(i instanceof at){var n=i.__data__;if(!K||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new pt(n)}return i.set(t,e),this.size=i.size,this}function Mt(t,e){var i=ce(t),n=!i&&ue(t),r=!i&&!n&&fe(t),o=!i&&!n&&!r&&xe(t),a=i||n||r||o,s=a?E(t.length,String):[],l=s.length;for(var h in t)(e||N.call(t,h))&&(!a||!("length"==h||r&&("offset"==h||"parent"==h)||o&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||Kt(h,l)))&&s.push(h);return s}function St(t,e,i){(void 0!==i&&!he(t[e],i)||void 0===i&&!(e in t))&&At(t,e,i)}function Tt(t,e,i){var n=t[e];(!N.call(t,e)||!he(n,i)||void 0===i&&!(e in t))&&At(t,e,i)}function Ct(t,e){for(var i=t.length;i--;)if(he(t[i][0],e))return i;return-1}function At(t,e,i){"__proto__"==e&&X?X(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}(0,r.a)(tt,"Hash"),(0,r.a)(et,"hashClear"),(0,r.a)(it,"hashDelete"),(0,r.a)(nt,"hashGet"),(0,r.a)(rt,"hashHas"),(0,r.a)(ot,"hashSet"),tt.prototype.clear=et,tt.prototype.delete=it,tt.prototype.get=nt,tt.prototype.has=rt,tt.prototype.set=ot,(0,r.a)(at,"ListCache"),(0,r.a)(st,"listCacheClear"),(0,r.a)(lt,"listCacheDelete"),(0,r.a)(ht,"listCacheGet"),(0,r.a)(ut,"listCacheHas"),(0,r.a)(ct,"listCacheSet"),at.prototype.clear=st,at.prototype.delete=lt,at.prototype.get=ht,at.prototype.has=ut,at.prototype.set=ct,(0,r.a)(pt,"MapCache"),(0,r.a)(dt,"mapCacheClear"),(0,r.a)(ft,"mapCacheDelete"),(0,r.a)(gt,"mapCacheGet"),(0,r.a)(mt,"mapCacheHas"),(0,r.a)(vt,"mapCacheSet"),pt.prototype.clear=dt,pt.prototype.delete=ft,pt.prototype.get=gt,pt.prototype.has=mt,pt.prototype.set=vt,(0,r.a)(yt,"Stack"),(0,r.a)(_t,"stackClear"),(0,r.a)(xt,"stackDelete"),(0,r.a)(bt,"stackGet"),(0,r.a)(wt,"stackHas"),(0,r.a)(Et,"stackSet"),yt.prototype.clear=_t,yt.prototype.delete=xt,yt.prototype.get=bt,yt.prototype.has=wt,yt.prototype.set=Et,(0,r.a)(Mt,"arrayLikeKeys"),(0,r.a)(St,"assignMergeValue"),(0,r.a)(Tt,"assignValue"),(0,r.a)(Ct,"assocIndexOf"),(0,r.a)(At,"baseAssignValue");var Pt=Ht();function It(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":W&&W in Object(t)?Zt(t):ne(t)}function Lt(t){return ye(t)&&It(t)==s}function Ot(t){return!(!ve(t)||te(t))&&(ge(t)?k:u).test(le(t))}function Nt(t){return ye(t)&&me(t.length)&&!!p[It(t)]}function qt(t){if(!ve(t))return ie(t);var e=ee(t),i=[];for(var n in t)"constructor"==n&&(e||!N.call(t,n))||i.push(n);return i}function Rt(t,e,i,n,r){t!==e&&Pt(e,function(o,a){if(r||(r=new yt),ve(o))Dt(t,e,a,i,Rt,n,r);else{var s=n?n(oe(t,a),o,a+"",t,e,r):void 0;void 0===s&&(s=o),St(t,a,s)}},Ee)}function Dt(t,e,i,n,r,o,a){var s=oe(t,i),l=oe(e,i),h=a.get(l);if(h)St(t,i,h);else{var u=o?o(s,l,i+"",t,e,a):void 0,c=void 0===u;if(c){var p=ce(l),d=!p&&fe(l),f=!p&&!d&&xe(l);u=l,p||d||f?ce(s)?u=s:de(s)?u=Vt(s):d?(c=!1,u=Ft(l,!0)):f?(c=!1,u=zt(l,!0)):u=[]:_e(l)||ue(l)?(u=s,ue(s)?u=be(s):(!ve(s)||ge(s))&&(u=Jt(l))):c=!1}c&&(a.set(l,u),r(u,l,n,o,a),a.delete(l)),St(t,i,u)}}function kt(t,e){return ae(re(t,e,Te),t+"")}(0,r.a)(It,"baseGetTag"),(0,r.a)(Lt,"baseIsArguments"),(0,r.a)(Ot,"baseIsNative"),(0,r.a)(Nt,"baseIsTypedArray"),(0,r.a)(qt,"baseKeysIn"),(0,r.a)(Rt,"baseMerge"),(0,r.a)(Dt,"baseMergeDeep"),(0,r.a)(kt,"baseRest");var Bt=X?function(t,e){return X(t,"toString",{configurable:!0,enumerable:!1,value:Se(e),writable:!0})}:Te;function Ft(t,e){if(e)return t.slice();var i=t.length,n=z?z(i):new t.constructor(i);return t.copy(n),n}function Ut(t){var e=new t.constructor(t.byteLength);return new U(e).set(new U(t)),e}function zt(t,e){var i=e?Ut(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function Vt(t,e){var i=-1,n=t.length;for(e||(e=Array(n));++i<n;)e[i]=t[i];return e}function jt(t,e,i,n){var r=!i;i||(i={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=n?n(i[s],t[s],s,i,t):void 0;void 0===l&&(l=t[s]),r?At(i,s,l):Tt(i,s,l)}return i}function Gt(t){return kt(function(e,i){var n=-1,r=i.length,o=r>1?i[r-1]:void 0,a=r>2?i[2]:void 0;for(o=t.length>3&&"function"==typeof o?(r--,o):void 0,a&&Qt(i[0],i[1],a)&&(o=r<3?void 0:o,r=1),e=Object(e);++n<r;){var s=i[n];s&&t(e,s,n,o)}return e})}function Ht(t){return function(e,i,n){for(var r=-1,o=Object(e),a=n(e),s=a.length;s--;){var l=a[t?s:++r];if(!1===i(o[l],l,o))break}return e}}function Wt(t,e,i,n,r,o){return ve(t)&&ve(e)&&(o.set(e,t),Rt(t,e,void 0,Wt,o),o.delete(e)),t}function Xt(t,e){var i=t.__data__;return $t(e)?i["string"==typeof e?"string":"hash"]:i.map}function Yt(t,e){var i=S(t,e);return Ot(i)?i:void 0}function Zt(t){var e=N.call(t,W),i=t[W];try{t[W]=void 0;var n=!0}catch{}var r=R.call(t);return n&&(e?t[W]=i:delete t[W]),r}function Jt(t){return"function"!=typeof t.constructor||ee(t)?{}:$(V(t))}function Kt(t,e){var i=typeof t;return!!(e=null==e?a:e)&&("number"==i||"symbol"!=i&&c.test(t))&&t>-1&&t%1==0&&t<e}function Qt(t,e,i){if(!ve(i))return!1;var n=typeof e;return!!("number"==n?pe(i)&&Kt(e,i.length):"string"==n&&e in i)&&he(i[e],t)}function $t(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function te(t){return!!q&&q in t}function ee(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||I)}function ie(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}function ne(t){return R.call(t)}function re(t,e,i){return e=Z(void 0===e?t.length-1:e,0),function(){for(var n=arguments,r=-1,o=Z(n.length-e,0),a=Array(o);++r<o;)a[r]=n[e+r];r=-1;for(var s=Array(e+1);++r<e;)s[r]=n[r];return s[e]=i(a),w(t,this,s)}}function oe(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}(0,r.a)(Ft,"cloneBuffer"),(0,r.a)(Ut,"cloneArrayBuffer"),(0,r.a)(zt,"cloneTypedArray"),(0,r.a)(Vt,"copyArray"),(0,r.a)(jt,"copyObject"),(0,r.a)(Gt,"createAssigner"),(0,r.a)(Ht,"createBaseFor"),(0,r.a)(Wt,"customDefaultsMerge"),(0,r.a)(Xt,"getMapData"),(0,r.a)(Yt,"getNative"),(0,r.a)(Zt,"getRawTag"),(0,r.a)(Jt,"initCloneObject"),(0,r.a)(Kt,"isIndex"),(0,r.a)(Qt,"isIterateeCall"),(0,r.a)($t,"isKeyable"),(0,r.a)(te,"isMasked"),(0,r.a)(ee,"isPrototype"),(0,r.a)(ie,"nativeKeysIn"),(0,r.a)(ne,"objectToString"),(0,r.a)(re,"overRest"),(0,r.a)(oe,"safeGet");var ae=se(Bt);function se(t){var e=0,i=0;return function(){var n=J(),r=16-(n-i);if(i=n,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function le(t){if(null!=t){try{return O.call(t)}catch{}try{return t+""}catch{}}return""}function he(t,e){return t===e||t!=t&&e!=e}(0,r.a)(se,"shortOut"),(0,r.a)(le,"toSource"),(0,r.a)(he,"eq");var ue=Lt(function(){return arguments}())?Lt:function(t){return ye(t)&&N.call(t,"callee")&&!G.call(t,"callee")},ce=Array.isArray;function pe(t){return null!=t&&me(t.length)&&!ge(t)}function de(t){return ye(t)&&pe(t)}(0,r.a)(pe,"isArrayLike"),(0,r.a)(de,"isArrayLikeObject");var fe=Y||Ce;function ge(t){if(!ve(t))return!1;var e=It(t);return e==l||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function me(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function ve(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ye(t){return null!=t&&"object"==typeof t}function _e(t){if(!ye(t)||It(t)!=h)return!1;var e=V(t);if(null===e)return!0;var i=N.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&O.call(i)==D}(0,r.a)(ge,"isFunction"),(0,r.a)(me,"isLength"),(0,r.a)(ve,"isObject"),(0,r.a)(ye,"isObjectLike"),(0,r.a)(_e,"isPlainObject");var xe=b?M(b):Nt;function be(t){return jt(t,Ee(t))}(0,r.a)(be,"toPlainObject");var we=kt(function(t){return t.push(void 0,Wt),w(Me,void 0,t)});function Ee(t){return pe(t)?Mt(t,!0):qt(t)}(0,r.a)(Ee,"keysIn");var Me=Gt(function(t,e,i,n){Rt(t,e,i,n)});function Se(t){return function(){return t}}function Te(t){return t}function Ce(){return!1}(0,r.a)(Se,"constant"),(0,r.a)(Te,"identity"),(0,r.a)(Ce,"stubFalse"),i.exports=we}),he=(0,r.c)((t,e)=>{(0,n.a)();var i=9007199254740991,o=/^(?:0|[1-9]\d*)$/;function a(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function s(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}(0,r.a)(a,"apply"),(0,r.a)(s,"baseTimes");var l=Object.prototype,h=l.hasOwnProperty,u=l.toString,c=l.propertyIsEnumerable,p=Math.max;function d(t,e){var i=T(t)||S(t)?s(t.length,String):[],n=i.length,r=!!n;for(var o in t)(e||h.call(t,o))&&(!r||"length"!=o&&!x(o,n))&&i.push(o);return i}function f(t,e,i,n){return void 0===t||M(t,l[i])&&!h.call(n,i)?e:t}function g(t,e,i){var n=t[e];(!h.call(t,e)||!M(n,i)||void 0===i&&!(e in t))&&(t[e]=i)}function m(t){if(!L(t))return E(t);var e=w(t),i=[];for(var n in t)"constructor"==n&&(e||!h.call(t,n))||i.push(n);return i}function v(t,e){return e=p(void 0===e?t.length-1:e,0),function(){for(var i=arguments,n=-1,r=p(i.length-e,0),o=Array(r);++n<r;)o[n]=i[e+n];n=-1;for(var s=Array(e+1);++n<e;)s[n]=i[n];return s[e]=o,a(t,this,s)}}function y(t,e,i,n){i||(i={});for(var r=-1,o=e.length;++r<o;){var a=e[r],s=n?n(i[a],t[a],a,i,t):void 0;g(i,a,void 0===s?t[a]:s)}return i}function _(t){return v(function(e,i){var n=-1,r=i.length,o=r>1?i[r-1]:void 0,a=r>2?i[2]:void 0;for(o=t.length>3&&"function"==typeof o?(r--,o):void 0,a&&b(i[0],i[1],a)&&(o=r<3?void 0:o,r=1),e=Object(e);++n<r;){var s=i[n];s&&t(e,s,n,o)}return e})}function x(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||o.test(t))&&t>-1&&t%1==0&&t<e}function b(t,e,i){if(!L(i))return!1;var n=typeof e;return!!("number"==n?C(i)&&x(e,i.length):"string"==n&&e in i)&&M(i[e],t)}function w(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||l)}function E(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}function M(t,e){return t===e||t!=t&&e!=e}function S(t){return A(t)&&h.call(t,"callee")&&(!c.call(t,"callee")||"[object Arguments]"==u.call(t))}(0,r.a)(d,"arrayLikeKeys"),(0,r.a)(f,"assignInDefaults"),(0,r.a)(g,"assignValue"),(0,r.a)(m,"baseKeysIn"),(0,r.a)(v,"baseRest"),(0,r.a)(y,"copyObject"),(0,r.a)(_,"createAssigner"),(0,r.a)(x,"isIndex"),(0,r.a)(b,"isIterateeCall"),(0,r.a)(w,"isPrototype"),(0,r.a)(E,"nativeKeysIn"),(0,r.a)(M,"eq"),(0,r.a)(S,"isArguments");var T=Array.isArray;function C(t){return null!=t&&I(t.length)&&!P(t)}function A(t){return O(t)&&C(t)}function P(t){var e=L(t)?u.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}function I(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}function L(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function O(t){return!!t&&"object"==typeof t}(0,r.a)(C,"isArrayLike"),(0,r.a)(A,"isArrayLikeObject"),(0,r.a)(P,"isFunction"),(0,r.a)(I,"isLength"),(0,r.a)(L,"isObject"),(0,r.a)(O,"isObjectLike");var N=_(function(t,e,i,n){y(e,R(e),t,n)}),q=v(function(t){return t.push(void 0,f),a(N,void 0,t)});function R(t){return C(t)?d(t,!0):m(t)}(0,r.a)(R,"keysIn"),e.exports=q}),ue=(0,r.c)((t,e)=>{"use strict";(0,n.a)();var i,o={},a=!1;typeof e<"u"&&e.exports?(e.exports=o,a=!0):typeof document<"u"?window.ClipperLib=o:self.ClipperLib=o,a?(s="chrome",i="Netscape"):(s=navigator.userAgent.toString().toLowerCase(),i=navigator.appName);var s,l,h={};function u(t,e,i){o.biginteger_used=1,null!=t&&("number"==typeof t&&typeof e>"u"?this.fromInt(t):"number"==typeof t?this.fromNumber(t,e,i):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function c(){return new u(null)}function p(t,e,i,n,r,o){for(;--o>=0;){var a=e*this[t++]+i[n]+r;r=Math.floor(a/67108864),i[n++]=67108863&a}return r}function d(t,e,i,n,r,o){for(var a=32767&e,s=e>>15;--o>=0;){var l=32767&this[t],h=this[t++]>>15,u=s*l+h*a;r=((l=a*l+((32767&u)<<15)+i[n]+(1073741823&r))>>>30)+(u>>>15)+s*h+(r>>>30),i[n++]=1073741823&l}return r}function f(t,e,i,n,r,o){for(var a=16383&e,s=e>>14;--o>=0;){var l=16383&this[t],h=this[t++]>>14,u=s*l+h*a;r=((l=a*l+((16383&u)<<14)+i[n]+r)>>28)+(u>>14)+s*h,i[n++]=268435455&l}return r}-1!=s.indexOf("chrome")&&-1==s.indexOf("chromium")?h.chrome=1:h.chrome=0,-1!=s.indexOf("chromium")?h.chromium=1:h.chromium=0,-1!=s.indexOf("safari")&&-1==s.indexOf("chrome")&&-1==s.indexOf("chromium")?h.safari=1:h.safari=0,-1!=s.indexOf("firefox")?h.firefox=1:h.firefox=0,-1!=s.indexOf("firefox/17")?h.firefox17=1:h.firefox17=0,-1!=s.indexOf("firefox/15")?h.firefox15=1:h.firefox15=0,-1!=s.indexOf("firefox/3")?h.firefox3=1:h.firefox3=0,-1!=s.indexOf("opera")?h.opera=1:h.opera=0,-1!=s.indexOf("msie 10")?h.msie10=1:h.msie10=0,-1!=s.indexOf("msie 9")?h.msie9=1:h.msie9=0,-1!=s.indexOf("msie 8")?h.msie8=1:h.msie8=0,-1!=s.indexOf("msie 7")?h.msie7=1:h.msie7=0,-1!=s.indexOf("msie ")?h.msie=1:h.msie=0,o.biginteger_used=null,(0,r.a)(u,"BigInteger"),(0,r.a)(c,"nbi"),(0,r.a)(p,"am1"),(0,r.a)(d,"am2"),(0,r.a)(f,"am3"),"Microsoft Internet Explorer"==i?(u.prototype.am=d,l=30):"Netscape"!=i?(u.prototype.am=p,l=26):(u.prototype.am=f,l=28),u.prototype.DB=l,u.prototype.DM=(1<<l)-1,u.prototype.DV=1<<l,u.prototype.FV=Math.pow(2,52),u.prototype.F1=52-l,u.prototype.F2=2*l-52;var g,m,v=new Array;for(g="0".charCodeAt(0),m=0;m<=9;++m)v[g++]=m;for(g="a".charCodeAt(0),m=10;m<36;++m)v[g++]=m;for(g="A".charCodeAt(0),m=10;m<36;++m)v[g++]=m;function y(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function _(t,e){var i=v[t.charCodeAt(e)];return null==i?-1:i}function x(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function b(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0}function w(t){var e=c();return e.fromInt(t),e}function E(t,e){var i;if(16==e)i=4;else if(8==e)i=3;else if(256==e)i=8;else if(2==e)i=1;else if(32==e)i=5;else{if(4!=e)return void this.fromRadix(t,e);i=2}this.t=0,this.s=0;for(var n=t.length,r=!1,o=0;--n>=0;){var a=8==i?255&t[n]:_(t,n);a<0?"-"==t.charAt(n)&&(r=!0):(r=!1,0==o?this[this.t++]=a:o+i>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,(o+=i)>=this.DB&&(o-=this.DB))}8==i&&128&t[0]&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),r&&u.ZERO.subTo(this,this)}function M(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function S(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var i,n=(1<<e)-1,r=!1,o="",a=this.t,s=this.DB-a*this.DB%e;if(a-- >0)for(s<this.DB&&(i=this[a]>>s)>0&&(r=!0,o=y(i));a>=0;)s<e?(i=(this[a]&(1<<s)-1)<<e-s,i|=this[--a]>>(s+=this.DB-e)):(i=this[a]>>(s-=e)&n,s<=0&&(s+=this.DB,--a)),i>0&&(r=!0),r&&(o+=y(i));return r?o:"0"}function T(){var t=c();return u.ZERO.subTo(this,t),t}function C(){return this.s<0?this.negate():this}function A(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(0!=(e=i-t.t))return this.s<0?-e:e;for(;--i>=0;)if(0!=(e=this[i]-t[i]))return e;return 0}function P(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function I(){return this.t<=0?0:this.DB*(this.t-1)+P(this[this.t-1]^this.s&this.DM)}function L(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s}function O(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s}function N(t,e){var i,n=t%this.DB,r=this.DB-n,o=(1<<r)-1,a=Math.floor(t/this.DB),s=this.s<<n&this.DM;for(i=this.t-1;i>=0;--i)e[i+a+1]=this[i]>>r|s,s=(this[i]&o)<<n;for(i=a-1;i>=0;--i)e[i]=0;e[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()}function q(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)e.t=0;else{var n=t%this.DB,r=this.DB-n,o=(1<<n)-1;e[0]=this[i]>>n;for(var a=i+1;a<this.t;++a)e[a-i-1]|=(this[a]&o)<<r,e[a-i]=this[a]>>n;n>0&&(e[this.t-i-1]|=(this.s&o)<<r),e.t=this.t-i,e.clamp()}}function R(t,e){for(var i=0,n=0,r=Math.min(t.t,this.t);i<r;)n+=this[i]-t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n-=t[i],e[i++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[i++]=this.DV+n:n>0&&(e[i++]=n),e.t=i,e.clamp()}function D(t,e){var i=this.abs(),n=t.abs(),r=i.t;for(e.t=r+n.t;--r>=0;)e[r]=0;for(r=0;r<n.t;++r)e[r+i.t]=i.am(0,n[r],e,r,0,i.t);e.s=0,e.clamp(),this.s!=t.s&&u.ZERO.subTo(e,e)}function k(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){var n=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,n,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()}function B(t,e,i){var n=t.abs();if(!(n.t<=0)){var r=this.abs();if(r.t<n.t)return null!=e&&e.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=c());var o=c(),a=this.s,s=t.s,l=this.DB-P(n[n.t-1]);l>0?(n.lShiftTo(l,o),r.lShiftTo(l,i)):(n.copyTo(o),r.copyTo(i));var h=o.t,p=o[h-1];if(0!=p){var d=p*(1<<this.F1)+(h>1?o[h-2]>>this.F2:0),f=this.FV/d,g=(1<<this.F1)/d,m=1<<this.F2,v=i.t,y=v-h,_=null==e?c():e;for(o.dlShiftTo(y,_),i.compareTo(_)>=0&&(i[i.t++]=1,i.subTo(_,i)),u.ONE.dlShiftTo(h,_),_.subTo(o,o);o.t<h;)o[o.t++]=0;for(;--y>=0;){var x=i[--v]==p?this.DM:Math.floor(i[v]*f+(i[v-1]+m)*g);if((i[v]+=o.am(0,x,i,y,0,h))<x)for(o.dlShiftTo(y,_),i.subTo(_,i);i[v]<--x;)i.subTo(_,i)}null!=e&&(i.drShiftTo(h,e),a!=s&&u.ZERO.subTo(e,e)),i.t=h,i.clamp(),l>0&&i.rShiftTo(l,i),a<0&&u.ZERO.subTo(i,i)}}}function F(t){var e=c();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(u.ZERO)>0&&t.subTo(e,e),e}function U(t){this.m=t}function z(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function V(t){return t}function j(t){t.divRemTo(this.m,null,t)}function G(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function H(t,e){t.squareTo(e),this.reduce(e)}function W(){if(this.t<1)return 0;var t=this[0];if(!(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e}function X(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function Y(t){var e=c();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(u.ZERO)>0&&this.m.subTo(e,e),e}function Z(t){var e=c();return t.copyTo(e),this.reduce(e),e}function J(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=32767&t[e],n=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[i=e+this.m.t]+=this.m.am(0,n,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function K(t,e){t.squareTo(e),this.reduce(e)}function Q(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function $(){return 0==(this.t>0?1&this[0]:this.s)}function tt(t,e){if(t>4294967295||t<1)return u.ONE;var i=c(),n=c(),r=e.convert(this),o=P(t)-1;for(r.copyTo(i);--o>=0;)if(e.sqrTo(i,n),(t&1<<o)>0)e.mulTo(n,r,i);else{var a=i;i=n,n=a}return e.revert(i)}function et(t,e){var i;return i=t<256||e.isEven()?new U(e):new X(e),this.exp(t,i)}function it(){var t=c();return this.copyTo(t),t}function nt(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function rt(){return 0==this.t?this.s:this[0]<<24>>24}function ot(){return 0==this.t?this.s:this[0]<<16>>16}function at(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function st(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function lt(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),i=Math.pow(t,e),n=w(i),r=c(),o=c(),a="";for(this.divRemTo(n,r,o);r.signum()>0;)a=(i+o.intValue()).toString(t).substr(1)+a,r.divRemTo(n,r,o);return o.intValue().toString(t)+a}function ht(t,e){this.fromInt(0),null==e&&(e=10);for(var i=this.chunkSize(e),n=Math.pow(e,i),r=!1,o=0,a=0,s=0;s<t.length;++s){var l=_(t,s);l<0?"-"==t.charAt(s)&&0==this.signum()&&(r=!0):(a=e*a+l,++o>=i&&(this.dMultiply(n),this.dAddOffset(a,0),o=0,a=0))}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),r&&u.ZERO.subTo(this,this)}function ut(t,e,i){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,i),this.testBit(t-1)||this.bitwiseTo(u.ONE.shiftLeft(t-1),yt,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(u.ONE.shiftLeft(t-1),this);else{var n=new Array,r=7&t;n.length=1+(t>>3),e.nextBytes(n),r>0?n[0]&=(1<<r)-1:n[0]=0,this.fromString(n,256)}}function ct(){var t=this.t,e=new Array;e[0]=this.s;var i,n=this.DB-t*this.DB%8,r=0;if(t-- >0)for(n<this.DB&&(i=this[t]>>n)!=(this.s&this.DM)>>n&&(e[r++]=i|this.s<<this.DB-n);t>=0;)n<8?(i=(this[t]&(1<<n)-1)<<8-n,i|=this[--t]>>(n+=this.DB-8)):(i=this[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),128&i&&(i|=-256),0==r&&(128&this.s)!=(128&i)&&++r,(r>0||i!=this.s)&&(e[r++]=i);return e}function pt(t){return 0==this.compareTo(t)}function dt(t){return this.compareTo(t)<0?this:t}function ft(t){return this.compareTo(t)>0?this:t}function gt(t,e,i){var n,r,o=Math.min(t.t,this.t);for(n=0;n<o;++n)i[n]=e(this[n],t[n]);if(t.t<this.t){for(r=t.s&this.DM,n=o;n<this.t;++n)i[n]=e(this[n],r);i.t=this.t}else{for(r=this.s&this.DM,n=o;n<t.t;++n)i[n]=e(r,t[n]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()}function mt(t,e){return t&e}function vt(t){var e=c();return this.bitwiseTo(t,mt,e),e}function yt(t,e){return t|e}function _t(t){var e=c();return this.bitwiseTo(t,yt,e),e}function xt(t,e){return t^e}function bt(t){var e=c();return this.bitwiseTo(t,xt,e),e}function wt(t,e){return t&~e}function Et(t){var e=c();return this.bitwiseTo(t,wt,e),e}function Mt(){for(var t=c(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function St(t){var e=c();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function Tt(t){var e=c();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function Ct(t){if(0==t)return-1;var e=0;return 65535&t||(t>>=16,e+=16),255&t||(t>>=8,e+=8),15&t||(t>>=4,e+=4),3&t||(t>>=2,e+=2),1&t||++e,e}function At(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+Ct(this[t]);return this.s<0?this.t*this.DB:-1}function Pt(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function It(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i)t+=Pt(this[i]^e);return t}function Lt(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function Ot(t,e){var i=u.ONE.shiftLeft(t);return this.bitwiseTo(i,e,i),i}function Nt(t){return this.changeBit(t,yt)}function qt(t){return this.changeBit(t,wt)}function Rt(t){return this.changeBit(t,xt)}function Dt(t,e){for(var i=0,n=0,r=Math.min(t.t,this.t);i<r;)n+=this[i]+t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n+=t[i],e[i++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e[i++]=n:n<-1&&(e[i++]=this.DV+n),e.t=i,e.clamp()}function kt(t){var e=c();return this.addTo(t,e),e}function Bt(t){var e=c();return this.subTo(t,e),e}function Ft(t){var e=c();return this.multiplyTo(t,e),e}function Ut(){var t=c();return this.squareTo(t),t}function zt(t){var e=c();return this.divRemTo(t,e,null),e}function Vt(t){var e=c();return this.divRemTo(t,null,e),e}function jt(t){var e=c(),i=c();return this.divRemTo(t,e,i),new Array(e,i)}function Gt(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function Ht(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function Wt(){}function Xt(t){return t}function Yt(t,e,i){t.multiplyTo(e,i)}function Zt(t,e){t.squareTo(e)}function Jt(t){return this.exp(t,new Wt)}function Kt(t,e,i){var n,r=Math.min(this.t+t.t,e);for(i.s=0,i.t=r;r>0;)i[--r]=0;for(n=i.t-this.t;r<n;++r)i[r+this.t]=this.am(0,t[r],i,r,0,this.t);for(n=Math.min(t.t,e);r<n;++r)this.am(0,t[r],i,r,0,e-r);i.clamp()}function Qt(t,e,i){--e;var n=i.t=this.t+t.t-e;for(i.s=0;--n>=0;)i[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)i[this.t+n-e]=this.am(e-n,t[n],i,0,0,this.t+n-e);i.clamp(),i.drShiftTo(1,i)}function $t(t){this.r2=c(),this.q3=c(),u.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function te(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=c();return t.copyTo(e),this.reduce(e),e}function ee(t){return t}function ie(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function ne(t,e){t.squareTo(e),this.reduce(e)}function re(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function oe(t,e){var i,n,r=t.bitLength(),o=w(1);if(r<=0)return o;i=r<18?1:r<48?3:r<144?4:r<768?5:6,n=r<8?new U(e):e.isEven()?new $t(e):new X(e);var a=new Array,s=3,l=i-1,h=(1<<i)-1;if(a[1]=n.convert(this),i>1){var u=c();for(n.sqrTo(a[1],u);s<=h;)a[s]=c(),n.mulTo(u,a[s-2],a[s]),s+=2}var p,d,f=t.t-1,g=!0,m=c();for(r=P(t[f])-1;f>=0;){for(r>=l?p=t[f]>>r-l&h:(p=(t[f]&(1<<r+1)-1)<<l-r,f>0&&(p|=t[f-1]>>this.DB+r-l)),s=i;!(1&p);)p>>=1,--s;if((r-=s)<0&&(r+=this.DB,--f),g)a[p].copyTo(o),g=!1;else{for(;s>1;)n.sqrTo(o,m),n.sqrTo(m,o),s-=2;s>0?n.sqrTo(o,m):(d=o,o=m,m=d),n.mulTo(m,a[p],o)}for(;f>=0&&!(t[f]&1<<r);)n.sqrTo(o,m),d=o,o=m,m=d,--r<0&&(r=this.DB-1,--f)}return n.revert(o)}function ae(t){var e=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(e.compareTo(i)<0){var n=e;e=i,i=n}var r=e.getLowestSetBit(),o=i.getLowestSetBit();if(o<0)return e;for(r<o&&(o=r),o>0&&(e.rShiftTo(o,e),i.rShiftTo(o,i));e.signum()>0;)(r=e.getLowestSetBit())>0&&e.rShiftTo(r,e),(r=i.getLowestSetBit())>0&&i.rShiftTo(r,i),e.compareTo(i)>=0?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return o>0&&i.lShiftTo(o,i),i}function se(t){if(t<=0)return 0;var e=this.DV%t,i=this.s<0?t-1:0;if(this.t>0)if(0==e)i=this[0]%t;else for(var n=this.t-1;n>=0;--n)i=(e*i+this[n])%t;return i}function le(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return u.ZERO;for(var i=t.clone(),n=this.clone(),r=w(1),o=w(0),a=w(0),s=w(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),e?((!r.isEven()||!o.isEven())&&(r.addTo(this,r),o.subTo(t,o)),r.rShiftTo(1,r)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?((!a.isEven()||!s.isEven())&&(a.addTo(this,a),s.subTo(t,s)),a.rShiftTo(1,a)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);i.compareTo(n)>=0?(i.subTo(n,i),e&&r.subTo(a,r),o.subTo(s,o)):(n.subTo(i,n),e&&a.subTo(r,a),s.subTo(o,s))}return 0!=n.compareTo(u.ONE)?u.ZERO:s.compareTo(t)>=0?s.subtract(t):s.signum()<0?(s.addTo(t,s),s.signum()<0?s.add(t):s):s}(0,r.a)(y,"int2char"),(0,r.a)(_,"intAt"),(0,r.a)(x,"bnpCopyTo"),(0,r.a)(b,"bnpFromInt"),(0,r.a)(w,"nbv"),(0,r.a)(E,"bnpFromString"),(0,r.a)(M,"bnpClamp"),(0,r.a)(S,"bnToString"),(0,r.a)(T,"bnNegate"),(0,r.a)(C,"bnAbs"),(0,r.a)(A,"bnCompareTo"),(0,r.a)(P,"nbits"),(0,r.a)(I,"bnBitLength"),(0,r.a)(L,"bnpDLShiftTo"),(0,r.a)(O,"bnpDRShiftTo"),(0,r.a)(N,"bnpLShiftTo"),(0,r.a)(q,"bnpRShiftTo"),(0,r.a)(R,"bnpSubTo"),(0,r.a)(D,"bnpMultiplyTo"),(0,r.a)(k,"bnpSquareTo"),(0,r.a)(B,"bnpDivRemTo"),(0,r.a)(F,"bnMod"),(0,r.a)(U,"Classic"),(0,r.a)(z,"cConvert"),(0,r.a)(V,"cRevert"),(0,r.a)(j,"cReduce"),(0,r.a)(G,"cMulTo"),(0,r.a)(H,"cSqrTo"),U.prototype.convert=z,U.prototype.revert=V,U.prototype.reduce=j,U.prototype.mulTo=G,U.prototype.sqrTo=H,(0,r.a)(W,"bnpInvDigit"),(0,r.a)(X,"Montgomery"),(0,r.a)(Y,"montConvert"),(0,r.a)(Z,"montRevert"),(0,r.a)(J,"montReduce"),(0,r.a)(K,"montSqrTo"),(0,r.a)(Q,"montMulTo"),X.prototype.convert=Y,X.prototype.revert=Z,X.prototype.reduce=J,X.prototype.mulTo=Q,X.prototype.sqrTo=K,(0,r.a)($,"bnpIsEven"),(0,r.a)(tt,"bnpExp"),(0,r.a)(et,"bnModPowInt"),u.prototype.copyTo=x,u.prototype.fromInt=b,u.prototype.fromString=E,u.prototype.clamp=M,u.prototype.dlShiftTo=L,u.prototype.drShiftTo=O,u.prototype.lShiftTo=N,u.prototype.rShiftTo=q,u.prototype.subTo=R,u.prototype.multiplyTo=D,u.prototype.squareTo=k,u.prototype.divRemTo=B,u.prototype.invDigit=W,u.prototype.isEven=$,u.prototype.exp=tt,u.prototype.toString=S,u.prototype.negate=T,u.prototype.abs=C,u.prototype.compareTo=A,u.prototype.bitLength=I,u.prototype.mod=F,u.prototype.modPowInt=et,u.ZERO=w(0),u.ONE=w(1),(0,r.a)(it,"bnClone"),(0,r.a)(nt,"bnIntValue"),(0,r.a)(rt,"bnByteValue"),(0,r.a)(ot,"bnShortValue"),(0,r.a)(at,"bnpChunkSize"),(0,r.a)(st,"bnSigNum"),(0,r.a)(lt,"bnpToRadix"),(0,r.a)(ht,"bnpFromRadix"),(0,r.a)(ut,"bnpFromNumber"),(0,r.a)(ct,"bnToByteArray"),(0,r.a)(pt,"bnEquals"),(0,r.a)(dt,"bnMin"),(0,r.a)(ft,"bnMax"),(0,r.a)(gt,"bnpBitwiseTo"),(0,r.a)(mt,"op_and"),(0,r.a)(vt,"bnAnd"),(0,r.a)(yt,"op_or"),(0,r.a)(_t,"bnOr"),(0,r.a)(xt,"op_xor"),(0,r.a)(bt,"bnXor"),(0,r.a)(wt,"op_andnot"),(0,r.a)(Et,"bnAndNot"),(0,r.a)(Mt,"bnNot"),(0,r.a)(St,"bnShiftLeft"),(0,r.a)(Tt,"bnShiftRight"),(0,r.a)(Ct,"lbit"),(0,r.a)(At,"bnGetLowestSetBit"),(0,r.a)(Pt,"cbit"),(0,r.a)(It,"bnBitCount"),(0,r.a)(Lt,"bnTestBit"),(0,r.a)(Ot,"bnpChangeBit"),(0,r.a)(Nt,"bnSetBit"),(0,r.a)(qt,"bnClearBit"),(0,r.a)(Rt,"bnFlipBit"),(0,r.a)(Dt,"bnpAddTo"),(0,r.a)(kt,"bnAdd"),(0,r.a)(Bt,"bnSubtract"),(0,r.a)(Ft,"bnMultiply"),(0,r.a)(Ut,"bnSquare"),(0,r.a)(zt,"bnDivide"),(0,r.a)(Vt,"bnRemainder"),(0,r.a)(jt,"bnDivideAndRemainder"),(0,r.a)(Gt,"bnpDMultiply"),(0,r.a)(Ht,"bnpDAddOffset"),(0,r.a)(Wt,"NullExp"),(0,r.a)(Xt,"nNop"),(0,r.a)(Yt,"nMulTo"),(0,r.a)(Zt,"nSqrTo"),Wt.prototype.convert=Xt,Wt.prototype.revert=Xt,Wt.prototype.mulTo=Yt,Wt.prototype.sqrTo=Zt,(0,r.a)(Jt,"bnPow"),(0,r.a)(Kt,"bnpMultiplyLowerTo"),(0,r.a)(Qt,"bnpMultiplyUpperTo"),(0,r.a)($t,"Barrett"),(0,r.a)(te,"barrettConvert"),(0,r.a)(ee,"barrettRevert"),(0,r.a)(ie,"barrettReduce"),(0,r.a)(ne,"barrettSqrTo"),(0,r.a)(re,"barrettMulTo"),$t.prototype.convert=te,$t.prototype.revert=ee,$t.prototype.reduce=ie,$t.prototype.mulTo=re,$t.prototype.sqrTo=ne,(0,r.a)(oe,"bnModPow"),(0,r.a)(ae,"bnGCD"),(0,r.a)(se,"bnpModInt"),(0,r.a)(le,"bnModInverse");var he=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],ue=(1<<26)/he[he.length-1];function ce(t){var e,i=this.abs();if(1==i.t&&i[0]<=he[he.length-1]){for(e=0;e<he.length;++e)if(i[0]==he[e])return!0;return!1}if(i.isEven())return!1;for(e=1;e<he.length;){for(var n=he[e],r=e+1;r<he.length&&n<ue;)n*=he[r++];for(n=i.modInt(n);e<r;)if(n%he[e++]==0)return!1}return i.millerRabin(t)}function pe(t){var e=this.subtract(u.ONE),i=e.getLowestSetBit();if(i<=0)return!1;var n=e.shiftRight(i);(t=t+1>>1)>he.length&&(t=he.length);for(var r=c(),o=0;o<t;++o){r.fromInt(he[Math.floor(Math.random()*he.length)]);var a=r.modPow(n,this);if(0!=a.compareTo(u.ONE)&&0!=a.compareTo(e)){for(var s=1;s++<i&&0!=a.compareTo(e);)if(0==(a=a.modPowInt(2,this)).compareTo(u.ONE))return!1;if(0!=a.compareTo(e))return!1}}return!0}(0,r.a)(ce,"bnIsProbablePrime"),(0,r.a)(pe,"bnpMillerRabin"),u.prototype.chunkSize=at,u.prototype.toRadix=lt,u.prototype.fromRadix=ht,u.prototype.fromNumber=ut,u.prototype.bitwiseTo=gt,u.prototype.changeBit=Ot,u.prototype.addTo=Dt,u.prototype.dMultiply=Gt,u.prototype.dAddOffset=Ht,u.prototype.multiplyLowerTo=Kt,u.prototype.multiplyUpperTo=Qt,u.prototype.modInt=se,u.prototype.millerRabin=pe,u.prototype.clone=it,u.prototype.intValue=nt,u.prototype.byteValue=rt,u.prototype.shortValue=ot,u.prototype.signum=st,u.prototype.toByteArray=ct,u.prototype.equals=pt,u.prototype.min=dt,u.prototype.max=ft,u.prototype.and=vt,u.prototype.or=_t,u.prototype.xor=bt,u.prototype.andNot=Et,u.prototype.not=Mt,u.prototype.shiftLeft=St,u.prototype.shiftRight=Tt,u.prototype.getLowestSetBit=At,u.prototype.bitCount=It,u.prototype.testBit=Lt,u.prototype.setBit=Nt,u.prototype.clearBit=qt,u.prototype.flipBit=Rt,u.prototype.add=kt,u.prototype.subtract=Bt,u.prototype.multiply=Ft,u.prototype.divide=zt,u.prototype.remainder=Vt,u.prototype.divideAndRemainder=jt,u.prototype.modPow=oe,u.prototype.modInverse=le,u.prototype.pow=Jt,u.prototype.gcd=ae,u.prototype.isProbablePrime=ce,u.prototype.square=Ut;var de,fe=u;fe.prototype.IsNegative=function(){return-1==this.compareTo(fe.ZERO)},fe.op_Equality=function(t,e){return 0==t.compareTo(e)},fe.op_Inequality=function(t,e){return 0!=t.compareTo(e)},fe.op_GreaterThan=function(t,e){return t.compareTo(e)>0},fe.op_LessThan=function(t,e){return t.compareTo(e)<0},fe.op_Addition=function(t,e){return new fe(t).add(new fe(e))},fe.op_Subtraction=function(t,e){return new fe(t).subtract(new fe(e))},fe.Int128Mul=function(t,e){return new fe(t).multiply(new fe(e))},fe.op_Division=function(t,e){return t.divide(e)},fe.prototype.ToDouble=function(){return parseFloat(this.toString())},typeof de>"u"&&(de=(0,r.a)(function(t,e){var i;if(typeof Object.getOwnPropertyNames>"u"){for(i in e.prototype)(typeof t.prototype[i]>"u"||t.prototype[i]==Object.prototype[i])&&(t.prototype[i]=e.prototype[i]);for(i in e)typeof t[i]>"u"&&(t[i]=e[i]);t.$baseCtor=e}else{for(var n=Object.getOwnPropertyNames(e.prototype),r=0;r<n.length;r++)typeof Object.getOwnPropertyDescriptor(t.prototype,n[r])>"u"&&Object.defineProperty(t.prototype,n[r],Object.getOwnPropertyDescriptor(e.prototype,n[r]));for(i in e)typeof t[i]>"u"&&(t[i]=e[i]);t.$baseCtor=e}},"Inherit")),o.Path=function(){return[]},o.Paths=function(){return[]},o.DoublePoint=function(){var t=arguments;this.X=0,this.Y=0,1==t.length?(this.X=t[0].X,this.Y=t[0].Y):2==t.length&&(this.X=t[0],this.Y=t[1])},o.DoublePoint0=function(){this.X=0,this.Y=0},o.DoublePoint1=function(t){this.X=t.X,this.Y=t.Y},o.DoublePoint2=function(t,e){this.X=t,this.Y=e},o.PolyNode=function(){this.m_Parent=null,this.m_polygon=new o.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},o.PolyNode.prototype.IsHoleNode=function(){for(var t=!0,e=this.m_Parent;null!==e;)t=!t,e=e.m_Parent;return t},o.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},o.PolyNode.prototype.Contour=function(){return this.m_polygon},o.PolyNode.prototype.AddChild=function(t){var e=this.m_Childs.length;this.m_Childs.push(t),t.m_Parent=this,t.m_Index=e},o.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},o.PolyNode.prototype.GetNextSiblingUp=function(){return null===this.m_Parent?null:this.m_Index==this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},o.PolyNode.prototype.Childs=function(){return this.m_Childs},o.PolyNode.prototype.Parent=function(){return this.m_Parent},o.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},o.PolyTree=function(){this.m_AllPolys=[],o.PolyNode.call(this)},o.PolyTree.prototype.Clear=function(){for(var t=0,e=this.m_AllPolys.length;t<e;t++)this.m_AllPolys[t]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},o.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},o.PolyTree.prototype.Total=function(){return this.m_AllPolys.length},de(o.PolyTree,o.PolyNode),o.Math_Abs_Int64=o.Math_Abs_Int32=o.Math_Abs_Double=function(t){return Math.abs(t)},o.Math_Max_Int32_Int32=function(t,e){return Math.max(t,e)},h.msie||h.opera||h.safari?o.Cast_Int32=function(t){return 0|t}:o.Cast_Int32=function(t){return~~t},h.chrome?o.Cast_Int64=function(t){return t<-2147483648||t>2147483647?t<0?Math.ceil(t):Math.floor(t):~~t}:h.firefox&&"function"==typeof Number.toInteger?o.Cast_Int64=function(t){return Number.toInteger(t)}:h.msie7||h.msie8?o.Cast_Int64=function(t){return parseInt(t,10)}:h.msie?o.Cast_Int64=function(t){return t<-2147483648||t>2147483647?t<0?Math.ceil(t):Math.floor(t):0|t}:o.Cast_Int64=function(t){return t<0?Math.ceil(t):Math.floor(t)},o.Clear=function(t){t.length=0},o.PI=3.141592653589793,o.PI2=6.283185307179586,o.IntPoint=function(){var t=arguments,e=t.length;if(this.X=0,this.Y=0,2==e)this.X=t[0],this.Y=t[1];else if(1==e)if(t[0]instanceof o.DoublePoint){var i=t[0];this.X=o.Clipper.Round(i.X),this.Y=o.Clipper.Round(i.Y)}else{var n=t[0];this.X=n.X,this.Y=n.Y}else this.X=0,this.Y=0},o.IntPoint.op_Equality=function(t,e){return t.X==e.X&&t.Y==e.Y},o.IntPoint.op_Inequality=function(t,e){return t.X!=e.X||t.Y!=e.Y},o.IntPoint0=function(){this.X=0,this.Y=0},o.IntPoint1=function(t){this.X=t.X,this.Y=t.Y},o.IntPoint1dp=function(t){this.X=o.Clipper.Round(t.X),this.Y=o.Clipper.Round(t.Y)},o.IntPoint2=function(t,e){this.X=t,this.Y=e},o.IntRect=function(){var t=arguments,e=t.length;4==e?(this.left=t[0],this.top=t[1],this.right=t[2],this.bottom=t[3]):1==e?(this.left=ir.left,this.top=ir.top,this.right=ir.right,this.bottom=ir.bottom):(this.left=0,this.top=0,this.right=0,this.bottom=0)},o.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},o.IntRect1=function(t){this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom},o.IntRect4=function(t,e,i,n){this.left=t,this.top=e,this.right=i,this.bottom=n},o.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},o.PolyType={ptSubject:0,ptClip:1},o.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},o.JoinType={jtSquare:0,jtRound:1,jtMiter:2},o.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},o.EdgeSide={esLeft:0,esRight:1},o.Direction={dRightToLeft:0,dLeftToRight:1},o.TEdge=function(){this.Bot=new o.IntPoint,this.Curr=new o.IntPoint,this.Top=new o.IntPoint,this.Delta=new o.IntPoint,this.Dx=0,this.PolyTyp=o.PolyType.ptSubject,this.Side=o.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},o.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new o.IntPoint},o.MyIntersectNodeSort=function(){},o.MyIntersectNodeSort.Compare=function(t,e){return e.Pt.Y-t.Pt.Y},o.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},o.Scanbeam=function(){this.Y=0,this.Next=null},o.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},o.OutPt=function(){this.Idx=0,this.Pt=new o.IntPoint,this.Next=null,this.Prev=null},o.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new o.IntPoint},o.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_MinimaList=null,this.m_CurrentLM=null,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},o.ClipperBase.horizontal=-9007199254740992,o.ClipperBase.Skip=-2,o.ClipperBase.Unassigned=-1,o.ClipperBase.tolerance=1e-20,o.ClipperBase.loRange=47453132,o.ClipperBase.hiRange=0xfffffffffffff,o.ClipperBase.near_zero=function(t){return t>-o.ClipperBase.tolerance&&t<o.ClipperBase.tolerance},o.ClipperBase.IsHorizontal=function(t){return 0===t.Delta.Y},o.ClipperBase.prototype.PointIsVertex=function(t,e){var i=e;do{if(o.IntPoint.op_Equality(i.Pt,t))return!0;i=i.Next}while(i!=e);return!1},o.ClipperBase.prototype.PointOnLineSegment=function(t,e,i,n){return n?t.X==e.X&&t.Y==e.Y||t.X==i.X&&t.Y==i.Y||t.X>e.X==t.X<i.X&&t.Y>e.Y==t.Y<i.Y&&fe.op_Equality(fe.Int128Mul(t.X-e.X,i.Y-e.Y),fe.Int128Mul(i.X-e.X,t.Y-e.Y)):t.X==e.X&&t.Y==e.Y||t.X==i.X&&t.Y==i.Y||t.X>e.X==t.X<i.X&&t.Y>e.Y==t.Y<i.Y&&(t.X-e.X)*(i.Y-e.Y)==(i.X-e.X)*(t.Y-e.Y)},o.ClipperBase.prototype.PointOnPolygon=function(t,e,i){for(var n=e;;){if(this.PointOnLineSegment(t,n.Pt,n.Next.Pt,i))return!0;if((n=n.Next)==e)break}return!1},o.ClipperBase.prototype.SlopesEqual=o.ClipperBase.SlopesEqual=function(){var t,e,i,n,r,a,s=arguments,l=s.length;return 3==l?(t=s[0],e=s[1],s[2]?fe.op_Equality(fe.Int128Mul(t.Delta.Y,e.Delta.X),fe.Int128Mul(t.Delta.X,e.Delta.Y)):o.Cast_Int64(t.Delta.Y*e.Delta.X)==o.Cast_Int64(t.Delta.X*e.Delta.Y)):4==l?(i=s[0],n=s[1],r=s[2],s[3]?fe.op_Equality(fe.Int128Mul(i.Y-n.Y,n.X-r.X),fe.Int128Mul(i.X-n.X,n.Y-r.Y)):o.Cast_Int64((i.Y-n.Y)*(n.X-r.X))-o.Cast_Int64((i.X-n.X)*(n.Y-r.Y))==0):(i=s[0],n=s[1],r=s[2],a=s[3],s[4]?fe.op_Equality(fe.Int128Mul(i.Y-n.Y,r.X-a.X),fe.Int128Mul(i.X-n.X,r.Y-a.Y)):o.Cast_Int64((i.Y-n.Y)*(r.X-a.X))-o.Cast_Int64((i.X-n.X)*(r.Y-a.Y))==0)},o.ClipperBase.SlopesEqual3=function(t,e,i){return i?fe.op_Equality(fe.Int128Mul(t.Delta.Y,e.Delta.X),fe.Int128Mul(t.Delta.X,e.Delta.Y)):o.Cast_Int64(t.Delta.Y*e.Delta.X)==o.Cast_Int64(t.Delta.X*e.Delta.Y)},o.ClipperBase.SlopesEqual4=function(t,e,i,n){return n?fe.op_Equality(fe.Int128Mul(t.Y-e.Y,e.X-i.X),fe.Int128Mul(t.X-e.X,e.Y-i.Y)):o.Cast_Int64((t.Y-e.Y)*(e.X-i.X))-o.Cast_Int64((t.X-e.X)*(e.Y-i.Y))==0},o.ClipperBase.SlopesEqual5=function(t,e,i,n,r){return r?fe.op_Equality(fe.Int128Mul(t.Y-e.Y,i.X-n.X),fe.Int128Mul(t.X-e.X,i.Y-n.Y)):o.Cast_Int64((t.Y-e.Y)*(i.X-n.X))-o.Cast_Int64((t.X-e.X)*(i.Y-n.Y))==0},o.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var t=0,e=this.m_edges.length;t<e;++t){for(var i=0,n=this.m_edges[t].length;i<n;++i)this.m_edges[t][i]=null;o.Clear(this.m_edges[t])}o.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},o.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;null!==this.m_MinimaList;){var t=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=t}this.m_CurrentLM=null},o.ClipperBase.prototype.RangeTest=function(t,e){e.Value?(t.X>o.ClipperBase.hiRange||t.Y>o.ClipperBase.hiRange||-t.X>o.ClipperBase.hiRange||-t.Y>o.ClipperBase.hiRange)&&o.Error("Coordinate outside allowed range in RangeTest()."):(t.X>o.ClipperBase.loRange||t.Y>o.ClipperBase.loRange||-t.X>o.ClipperBase.loRange||-t.Y>o.ClipperBase.loRange)&&(e.Value=!0,this.RangeTest(t,e))},o.ClipperBase.prototype.InitEdge=function(t,e,i,n){t.Next=e,t.Prev=i,t.Curr.X=n.X,t.Curr.Y=n.Y,t.OutIdx=-1},o.ClipperBase.prototype.InitEdge2=function(t,e){t.Curr.Y>=t.Next.Curr.Y?(t.Bot.X=t.Curr.X,t.Bot.Y=t.Curr.Y,t.Top.X=t.Next.Curr.X,t.Top.Y=t.Next.Curr.Y):(t.Top.X=t.Curr.X,t.Top.Y=t.Curr.Y,t.Bot.X=t.Next.Curr.X,t.Bot.Y=t.Next.Curr.Y),this.SetDx(t),t.PolyTyp=e},o.ClipperBase.prototype.FindNextLocMin=function(t){for(var e;;){for(;o.IntPoint.op_Inequality(t.Bot,t.Prev.Bot)||o.IntPoint.op_Equality(t.Curr,t.Top);)t=t.Next;if(t.Dx!=o.ClipperBase.horizontal&&t.Prev.Dx!=o.ClipperBase.horizontal)break;for(;t.Prev.Dx==o.ClipperBase.horizontal;)t=t.Prev;for(e=t;t.Dx==o.ClipperBase.horizontal;)t=t.Next;if(t.Top.Y!=t.Prev.Bot.Y){e.Prev.Bot.X<t.Bot.X&&(t=e);break}}return t},o.ClipperBase.prototype.ProcessBound=function(t,e){var i,n,r=t,a=t;if(t.Dx==o.ClipperBase.horizontal&&(n=e?t.Prev.Bot.X:t.Next.Bot.X,t.Bot.X!=n&&this.ReverseHorizontal(t)),a.OutIdx!=o.ClipperBase.Skip)if(e){for(;a.Top.Y==a.Next.Bot.Y&&a.Next.OutIdx!=o.ClipperBase.Skip;)a=a.Next;if(a.Dx==o.ClipperBase.horizontal&&a.Next.OutIdx!=o.ClipperBase.Skip){for(i=a;i.Prev.Dx==o.ClipperBase.horizontal;)i=i.Prev;i.Prev.Top.X==a.Next.Top.X?e||(a=i.Prev):i.Prev.Top.X>a.Next.Top.X&&(a=i.Prev)}for(;t!=a;)t.NextInLML=t.Next,t.Dx==o.ClipperBase.horizontal&&t!=r&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),t=t.Next;t.Dx==o.ClipperBase.horizontal&&t!=r&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),a=a.Next}else{for(;a.Top.Y==a.Prev.Bot.Y&&a.Prev.OutIdx!=o.ClipperBase.Skip;)a=a.Prev;if(a.Dx==o.ClipperBase.horizontal&&a.Prev.OutIdx!=o.ClipperBase.Skip){for(i=a;i.Next.Dx==o.ClipperBase.horizontal;)i=i.Next;i.Next.Top.X==a.Prev.Top.X?e||(a=i.Next):i.Next.Top.X>a.Prev.Top.X&&(a=i.Next)}for(;t!=a;)t.NextInLML=t.Prev,t.Dx==o.ClipperBase.horizontal&&t!=r&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),t=t.Prev;t.Dx==o.ClipperBase.horizontal&&t!=r&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),a=a.Prev}if(a.OutIdx==o.ClipperBase.Skip){if(t=a,e){for(;t.Top.Y==t.Next.Bot.Y;)t=t.Next;for(;t!=a&&t.Dx==o.ClipperBase.horizontal;)t=t.Prev}else{for(;t.Top.Y==t.Prev.Bot.Y;)t=t.Prev;for(;t!=a&&t.Dx==o.ClipperBase.horizontal;)t=t.Next}if(t==a)a=e?t.Next:t.Prev;else{t=e?a.Next:a.Prev;var s=new o.LocalMinima;s.Next=null,s.Y=t.Bot.Y,s.LeftBound=null,s.RightBound=t,s.RightBound.WindDelta=0,a=this.ProcessBound(s.RightBound,e),this.InsertLocalMinima(s)}}return a},o.ClipperBase.prototype.AddPath=function(t,e,i){!i&&e==o.PolyType.ptClip&&o.Error("AddPath: Open paths must be subject.");var n=t.length-1;if(i)for(;n>0&&o.IntPoint.op_Equality(t[n],t[0]);)--n;for(;n>0&&o.IntPoint.op_Equality(t[n],t[n-1]);)--n;if(i&&n<2||!i&&n<1)return!1;for(var r=new Array,a=0;a<=n;a++)r.push(new o.TEdge);var s=!0;r[1].Curr.X=t[1].X,r[1].Curr.Y=t[1].Y;var l={Value:this.m_UseFullRange};for(this.RangeTest(t[0],l),this.m_UseFullRange=l.Value,l.Value=this.m_UseFullRange,this.RangeTest(t[n],l),this.m_UseFullRange=l.Value,this.InitEdge(r[0],r[1],r[n],t[0]),this.InitEdge(r[n],r[0],r[n-1],t[n]),a=n-1;a>=1;--a)l.Value=this.m_UseFullRange,this.RangeTest(t[a],l),this.m_UseFullRange=l.Value,this.InitEdge(r[a],r[a+1],r[a-1],t[a]);for(var h=r[0],u=h,c=h;;)if(o.IntPoint.op_Equality(u.Curr,u.Next.Curr)){if(u==u.Next)break;u==h&&(h=u.Next),c=u=this.RemoveEdge(u)}else{if(u.Prev==u.Next)break;if(!i||!o.ClipperBase.SlopesEqual(u.Prev.Curr,u.Curr,u.Next.Curr,this.m_UseFullRange)||this.PreserveCollinear&&this.Pt2IsBetweenPt1AndPt3(u.Prev.Curr,u.Curr,u.Next.Curr)){if((u=u.Next)==c)break}else u==h&&(h=u.Next),c=u=(u=this.RemoveEdge(u)).Prev}if(!i&&u==u.Next||i&&u.Prev==u.Next)return!1;i||(this.m_HasOpenPaths=!0,h.Prev.OutIdx=o.ClipperBase.Skip),u=h;do{this.InitEdge2(u,e),u=u.Next,s&&u.Curr.Y!=h.Curr.Y&&(s=!1)}while(u!=h);if(s){if(i)return!1;for(u.Prev.OutIdx=o.ClipperBase.Skip,u.Prev.Bot.X<u.Prev.Top.X&&this.ReverseHorizontal(u.Prev),(f=new o.LocalMinima).Next=null,f.Y=u.Bot.Y,f.LeftBound=null,f.RightBound=u,f.RightBound.Side=o.EdgeSide.esRight,f.RightBound.WindDelta=0;u.Next.OutIdx!=o.ClipperBase.Skip;)u.NextInLML=u.Next,u.Bot.X!=u.Prev.Top.X&&this.ReverseHorizontal(u),u=u.Next;return this.InsertLocalMinima(f),this.m_edges.push(r),!0}this.m_edges.push(r);for(var p,d=null;(u=this.FindNextLocMin(u))!=d;){var f;null==d&&(d=u),(f=new o.LocalMinima).Next=null,f.Y=u.Bot.Y,u.Dx<u.Prev.Dx?(f.LeftBound=u.Prev,f.RightBound=u,p=!1):(f.LeftBound=u,f.RightBound=u.Prev,p=!0),f.LeftBound.Side=o.EdgeSide.esLeft,f.RightBound.Side=o.EdgeSide.esRight,i?f.LeftBound.Next==f.RightBound?f.LeftBound.WindDelta=-1:f.LeftBound.WindDelta=1:f.LeftBound.WindDelta=0,f.RightBound.WindDelta=-f.LeftBound.WindDelta,u=this.ProcessBound(f.LeftBound,p);var g=this.ProcessBound(f.RightBound,!p);f.LeftBound.OutIdx==o.ClipperBase.Skip?f.LeftBound=null:f.RightBound.OutIdx==o.ClipperBase.Skip&&(f.RightBound=null),this.InsertLocalMinima(f),p||(u=g)}return!0},o.ClipperBase.prototype.AddPaths=function(t,e,i){for(var n=!1,r=0,o=t.length;r<o;++r)this.AddPath(t[r],e,i)&&(n=!0);return n},o.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(t,e,i){return!(o.IntPoint.op_Equality(t,i)||o.IntPoint.op_Equality(t,e)||o.IntPoint.op_Equality(i,e))&&(t.X!=i.X?e.X>t.X==e.X<i.X:e.Y>t.Y==e.Y<i.Y)},o.ClipperBase.prototype.RemoveEdge=function(t){t.Prev.Next=t.Next,t.Next.Prev=t.Prev;var e=t.Next;return t.Prev=null,e},o.ClipperBase.prototype.SetDx=function(t){t.Delta.X=t.Top.X-t.Bot.X,t.Delta.Y=t.Top.Y-t.Bot.Y,0===t.Delta.Y?t.Dx=o.ClipperBase.horizontal:t.Dx=t.Delta.X/t.Delta.Y},o.ClipperBase.prototype.InsertLocalMinima=function(t){if(null===this.m_MinimaList)this.m_MinimaList=t;else if(t.Y>=this.m_MinimaList.Y)t.Next=this.m_MinimaList,this.m_MinimaList=t;else{for(var e=this.m_MinimaList;null!==e.Next&&t.Y<e.Next.Y;)e=e.Next;t.Next=e.Next,e.Next=t}},o.ClipperBase.prototype.PopLocalMinima=function(){null!==this.m_CurrentLM&&(this.m_CurrentLM=this.m_CurrentLM.Next)},o.ClipperBase.prototype.ReverseHorizontal=function(t){var e=t.Top.X;t.Top.X=t.Bot.X,t.Bot.X=e},o.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,null!=this.m_CurrentLM)for(var t=this.m_MinimaList;null!=t;){var e=t.LeftBound;null!=e&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.Side=o.EdgeSide.esLeft,e.OutIdx=o.ClipperBase.Unassigned),null!=(e=t.RightBound)&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.Side=o.EdgeSide.esRight,e.OutIdx=o.ClipperBase.Unassigned),t=t.Next}},o.Clipper=function(t){typeof t>"u"&&(t=0),this.m_PolyOuts=null,this.m_ClipType=o.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=o.PolyFillType.pftEvenOdd,this.m_SubjFillType=o.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,o.ClipperBase.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=o.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=0!=(1&t),this.StrictlySimple=0!=(2&t),this.PreserveCollinear=0!=(4&t)},o.Clipper.ioReverseSolution=1,o.Clipper.ioStrictlySimple=2,o.Clipper.ioPreserveCollinear=4,o.Clipper.prototype.Clear=function(){0!==this.m_edges.length&&(this.DisposeAllPolyPts(),o.ClipperBase.prototype.Clear.call(this))},o.Clipper.prototype.DisposeScanbeamList=function(){for(;null!==this.m_Scanbeam;){var t=this.m_Scanbeam.Next;this.m_Scanbeam=null,this.m_Scanbeam=t}},o.Clipper.prototype.Reset=function(){o.ClipperBase.prototype.Reset.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null;for(var t=this.m_MinimaList;null!==t;)this.InsertScanbeam(t.Y),t=t.Next},o.Clipper.prototype.InsertScanbeam=function(t){if(null===this.m_Scanbeam)this.m_Scanbeam=new o.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=t;else if(t>this.m_Scanbeam.Y)(i=new o.Scanbeam).Y=t,i.Next=this.m_Scanbeam,this.m_Scanbeam=i;else{for(var e=this.m_Scanbeam;null!==e.Next&&t<=e.Next.Y;)e=e.Next;if(t==e.Y)return;var i;(i=new o.Scanbeam).Y=t,i.Next=e.Next,e.Next=i}},o.Clipper.prototype.Execute=function(){var t=arguments,e=t.length,i=t[1]instanceof o.PolyTree;if(4==e&&!i){var n=t[0],r=t[1],a=t[2],s=t[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&o.Error("Error: PolyTree struct is need for open path clipping."),this.m_ExecuteLocked=!0,o.Clear(r),this.m_SubjFillType=a,this.m_ClipFillType=s,this.m_ClipType=n,this.m_UsingPolyTree=!1;try{(h=this.ExecuteInternal())&&this.BuildResult(r)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return h}if(4==e&&i){n=t[0];var l=t[1];if(a=t[2],s=t[3],this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=a,this.m_ClipFillType=s,this.m_ClipType=n,this.m_UsingPolyTree=!0;try{var h;(h=this.ExecuteInternal())&&this.BuildResult2(l)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return h}return 2!=e||i?2==e&&i?(n=t[0],l=t[1],this.Execute(n,l,o.PolyFillType.pftEvenOdd,o.PolyFillType.pftEvenOdd)):void 0:(n=t[0],r=t[1],this.Execute(n,r,o.PolyFillType.pftEvenOdd,o.PolyFillType.pftEvenOdd))},o.Clipper.prototype.FixHoleLinkage=function(t){if(null!==t.FirstLeft&&(t.IsHole==t.FirstLeft.IsHole||null===t.FirstLeft.Pts)){for(var e=t.FirstLeft;null!==e&&(e.IsHole==t.IsHole||null===e.Pts);)e=e.FirstLeft;t.FirstLeft=e}},o.Clipper.prototype.ExecuteInternal=function(){try{if(this.Reset(),null===this.m_CurrentLM)return!1;var t=this.PopScanbeam();do{if(this.InsertLocalMinimaIntoAEL(t),o.Clear(this.m_GhostJoins),this.ProcessHorizontals(!1),null===this.m_Scanbeam)break;var e=this.PopScanbeam();if(!this.ProcessIntersections(t,e))return!1;this.ProcessEdgesAtTopOfScanbeam(e),t=e}while(null!==this.m_Scanbeam||null!==this.m_CurrentLM);for(var i=0,n=this.m_PolyOuts.length;i<n;i++)null===(r=this.m_PolyOuts[i]).Pts||r.IsOpen||(r.IsHole^this.ReverseSolution)==this.Area(r)>0&&this.ReversePolyPtLinks(r.Pts);for(this.JoinCommonEdges(),i=0,n=this.m_PolyOuts.length;i<n;i++){var r;null!==(r=this.m_PolyOuts[i]).Pts&&!r.IsOpen&&this.FixupOutPolygon(r)}return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{o.Clear(this.m_Joins),o.Clear(this.m_GhostJoins)}},o.Clipper.prototype.PopScanbeam=function(){var t=this.m_Scanbeam.Y;return this.m_Scanbeam,this.m_Scanbeam=this.m_Scanbeam.Next,t},o.Clipper.prototype.DisposeAllPolyPts=function(){for(var t=0,e=this.m_PolyOuts.length;t<e;++t)this.DisposeOutRec(t);o.Clear(this.m_PolyOuts)},o.Clipper.prototype.DisposeOutRec=function(t){var e=this.m_PolyOuts[t];null!==e.Pts&&this.DisposeOutPts(e.Pts),e=null,this.m_PolyOuts[t]=null},o.Clipper.prototype.DisposeOutPts=function(t){if(null!==t)for(t.Prev.Next=null;null!==t;)t=t.Next},o.Clipper.prototype.AddJoin=function(t,e,i){var n=new o.Join;n.OutPt1=t,n.OutPt2=e,n.OffPt.X=i.X,n.OffPt.Y=i.Y,this.m_Joins.push(n)},o.Clipper.prototype.AddGhostJoin=function(t,e){var i=new o.Join;i.OutPt1=t,i.OffPt.X=e.X,i.OffPt.Y=e.Y,this.m_GhostJoins.push(i)},o.Clipper.prototype.InsertLocalMinimaIntoAEL=function(t){for(;null!==this.m_CurrentLM&&this.m_CurrentLM.Y==t;){var e=this.m_CurrentLM.LeftBound,i=this.m_CurrentLM.RightBound;this.PopLocalMinima();var n=null;if(null===e?(this.InsertEdgeIntoAEL(i,null),this.SetWindingCount(i),this.IsContributing(i)&&(n=this.AddOutPt(i,i.Bot))):null==i?(this.InsertEdgeIntoAEL(e,null),this.SetWindingCount(e),this.IsContributing(e)&&(n=this.AddOutPt(e,e.Bot)),this.InsertScanbeam(e.Top.Y)):(this.InsertEdgeIntoAEL(e,null),this.InsertEdgeIntoAEL(i,e),this.SetWindingCount(e),i.WindCnt=e.WindCnt,i.WindCnt2=e.WindCnt2,this.IsContributing(e)&&(n=this.AddLocalMinPoly(e,i,e.Bot)),this.InsertScanbeam(e.Top.Y)),null!=i&&(o.ClipperBase.IsHorizontal(i)?this.AddEdgeToSEL(i):this.InsertScanbeam(i.Top.Y)),null!=e&&null!=i){if(null!==n&&o.ClipperBase.IsHorizontal(i)&&this.m_GhostJoins.length>0&&0!==i.WindDelta)for(var r=0,a=this.m_GhostJoins.length;r<a;r++){var s=this.m_GhostJoins[r];this.HorzSegmentsOverlap(s.OutPt1.Pt,s.OffPt,i.Bot,i.Top)&&this.AddJoin(s.OutPt1,n,s.OffPt)}if(e.OutIdx>=0&&null!==e.PrevInAEL&&e.PrevInAEL.Curr.X==e.Bot.X&&e.PrevInAEL.OutIdx>=0&&o.ClipperBase.SlopesEqual(e.PrevInAEL,e,this.m_UseFullRange)&&0!==e.WindDelta&&0!==e.PrevInAEL.WindDelta){var l=this.AddOutPt(e.PrevInAEL,e.Bot);this.AddJoin(n,l,e.Top)}if(e.NextInAEL!=i){i.OutIdx>=0&&i.PrevInAEL.OutIdx>=0&&o.ClipperBase.SlopesEqual(i.PrevInAEL,i,this.m_UseFullRange)&&0!==i.WindDelta&&0!==i.PrevInAEL.WindDelta&&(l=this.AddOutPt(i.PrevInAEL,i.Bot),this.AddJoin(n,l,i.Top));var h=e.NextInAEL;if(null!==h)for(;h!=i;)this.IntersectEdges(i,h,e.Curr,!1),h=h.NextInAEL}}}},o.Clipper.prototype.InsertEdgeIntoAEL=function(t,e){if(null===this.m_ActiveEdges)t.PrevInAEL=null,t.NextInAEL=null,this.m_ActiveEdges=t;else if(null===e&&this.E2InsertsBeforeE1(this.m_ActiveEdges,t))t.PrevInAEL=null,t.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=t,this.m_ActiveEdges=t;else{for(null===e&&(e=this.m_ActiveEdges);null!==e.NextInAEL&&!this.E2InsertsBeforeE1(e.NextInAEL,t);)e=e.NextInAEL;t.NextInAEL=e.NextInAEL,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=t),t.PrevInAEL=e,e.NextInAEL=t}},o.Clipper.prototype.E2InsertsBeforeE1=function(t,e){return e.Curr.X==t.Curr.X?e.Top.Y>t.Top.Y?e.Top.X<o.Clipper.TopX(t,e.Top.Y):t.Top.X>o.Clipper.TopX(e,t.Top.Y):e.Curr.X<t.Curr.X},o.Clipper.prototype.IsEvenOddFillType=function(t){return t.PolyTyp==o.PolyType.ptSubject?this.m_SubjFillType==o.PolyFillType.pftEvenOdd:this.m_ClipFillType==o.PolyFillType.pftEvenOdd},o.Clipper.prototype.IsEvenOddAltFillType=function(t){return t.PolyTyp==o.PolyType.ptSubject?this.m_ClipFillType==o.PolyFillType.pftEvenOdd:this.m_SubjFillType==o.PolyFillType.pftEvenOdd},o.Clipper.prototype.IsContributing=function(t){var e,i;switch(t.PolyTyp==o.PolyType.ptSubject?(e=this.m_SubjFillType,i=this.m_ClipFillType):(e=this.m_ClipFillType,i=this.m_SubjFillType),e){case o.PolyFillType.pftEvenOdd:if(0===t.WindDelta&&1!=t.WindCnt)return!1;break;case o.PolyFillType.pftNonZero:if(1!=Math.abs(t.WindCnt))return!1;break;case o.PolyFillType.pftPositive:if(1!=t.WindCnt)return!1;break;default:if(-1!=t.WindCnt)return!1}switch(this.m_ClipType){case o.ClipType.ctIntersection:switch(i){case o.PolyFillType.pftEvenOdd:case o.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case o.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case o.ClipType.ctUnion:switch(i){case o.PolyFillType.pftEvenOdd:case o.PolyFillType.pftNonZero:return 0===t.WindCnt2;case o.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}case o.ClipType.ctDifference:if(t.PolyTyp==o.PolyType.ptSubject)switch(i){case o.PolyFillType.pftEvenOdd:case o.PolyFillType.pftNonZero:return 0===t.WindCnt2;case o.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}else switch(i){case o.PolyFillType.pftEvenOdd:case o.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case o.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case o.ClipType.ctXor:if(0!==t.WindDelta)return!0;switch(i){case o.PolyFillType.pftEvenOdd:case o.PolyFillType.pftNonZero:return 0===t.WindCnt2;case o.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}}return!0},o.Clipper.prototype.SetWindingCount=function(t){for(var e=t.PrevInAEL;null!==e&&(e.PolyTyp!=t.PolyTyp||0===e.WindDelta);)e=e.PrevInAEL;if(null===e)t.WindCnt=0===t.WindDelta?1:t.WindDelta,t.WindCnt2=0,e=this.m_ActiveEdges;else if(0===t.WindDelta&&this.m_ClipType!=o.ClipType.ctUnion)t.WindCnt=1,t.WindCnt2=e.WindCnt2,e=e.NextInAEL;else if(this.IsEvenOddFillType(t)){if(0===t.WindDelta){for(var i=!0,n=e.PrevInAEL;null!==n;)n.PolyTyp==e.PolyTyp&&0!==n.WindDelta&&(i=!i),n=n.PrevInAEL;t.WindCnt=i?0:1}else t.WindCnt=t.WindDelta;t.WindCnt2=e.WindCnt2,e=e.NextInAEL}else e.WindCnt*e.WindDelta<0?Math.abs(e.WindCnt)>1?e.WindDelta*t.WindDelta<0?t.WindCnt=e.WindCnt:t.WindCnt=e.WindCnt+t.WindDelta:t.WindCnt=0===t.WindDelta?1:t.WindDelta:0===t.WindDelta?t.WindCnt=e.WindCnt<0?e.WindCnt-1:e.WindCnt+1:e.WindDelta*t.WindDelta<0?t.WindCnt=e.WindCnt:t.WindCnt=e.WindCnt+t.WindDelta,t.WindCnt2=e.WindCnt2,e=e.NextInAEL;if(this.IsEvenOddAltFillType(t))for(;e!=t;)0!==e.WindDelta&&(t.WindCnt2=0===t.WindCnt2?1:0),e=e.NextInAEL;else for(;e!=t;)t.WindCnt2+=e.WindDelta,e=e.NextInAEL},o.Clipper.prototype.AddEdgeToSEL=function(t){null===this.m_SortedEdges?(this.m_SortedEdges=t,t.PrevInSEL=null,t.NextInSEL=null):(t.NextInSEL=this.m_SortedEdges,t.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=t,this.m_SortedEdges=t)},o.Clipper.prototype.CopyAELToSEL=function(){var t=this.m_ActiveEdges;for(this.m_SortedEdges=t;null!==t;)t.PrevInSEL=t.PrevInAEL,t.NextInSEL=t.NextInAEL,t=t.NextInAEL},o.Clipper.prototype.SwapPositionsInAEL=function(t,e){if(t.NextInAEL!=t.PrevInAEL&&e.NextInAEL!=e.PrevInAEL){if(t.NextInAEL==e)null!==(i=e.NextInAEL)&&(i.PrevInAEL=t),null!==(n=t.PrevInAEL)&&(n.NextInAEL=e),e.PrevInAEL=n,e.NextInAEL=t,t.PrevInAEL=e,t.NextInAEL=i;else if(e.NextInAEL==t)null!==(i=t.NextInAEL)&&(i.PrevInAEL=e),null!==(n=e.PrevInAEL)&&(n.NextInAEL=t),t.PrevInAEL=n,t.NextInAEL=e,e.PrevInAEL=t,e.NextInAEL=i;else{var i=t.NextInAEL,n=t.PrevInAEL;t.NextInAEL=e.NextInAEL,null!==t.NextInAEL&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=e.PrevInAEL,null!==t.PrevInAEL&&(t.PrevInAEL.NextInAEL=t),e.NextInAEL=i,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=n,null!==e.PrevInAEL&&(e.PrevInAEL.NextInAEL=e)}null===t.PrevInAEL?this.m_ActiveEdges=t:null===e.PrevInAEL&&(this.m_ActiveEdges=e)}},o.Clipper.prototype.SwapPositionsInSEL=function(t,e){if(!(null===t.NextInSEL&&null===t.PrevInSEL||null===e.NextInSEL&&null===e.PrevInSEL)){if(t.NextInSEL==e)null!==(i=e.NextInSEL)&&(i.PrevInSEL=t),null!==(n=t.PrevInSEL)&&(n.NextInSEL=e),e.PrevInSEL=n,e.NextInSEL=t,t.PrevInSEL=e,t.NextInSEL=i;else if(e.NextInSEL==t)null!==(i=t.NextInSEL)&&(i.PrevInSEL=e),null!==(n=e.PrevInSEL)&&(n.NextInSEL=t),t.PrevInSEL=n,t.NextInSEL=e,e.PrevInSEL=t,e.NextInSEL=i;else{var i=t.NextInSEL,n=t.PrevInSEL;t.NextInSEL=e.NextInSEL,null!==t.NextInSEL&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=e.PrevInSEL,null!==t.PrevInSEL&&(t.PrevInSEL.NextInSEL=t),e.NextInSEL=i,null!==e.NextInSEL&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=n,null!==e.PrevInSEL&&(e.PrevInSEL.NextInSEL=e)}null===t.PrevInSEL?this.m_SortedEdges=t:null===e.PrevInSEL&&(this.m_SortedEdges=e)}},o.Clipper.prototype.AddLocalMaxPoly=function(t,e,i){this.AddOutPt(t,i),0==e.WindDelta&&this.AddOutPt(e,i),t.OutIdx==e.OutIdx?(t.OutIdx=-1,e.OutIdx=-1):t.OutIdx<e.OutIdx?this.AppendPolygon(t,e):this.AppendPolygon(e,t)},o.Clipper.prototype.AddLocalMinPoly=function(t,e,i){var n,r,a;if(o.ClipperBase.IsHorizontal(e)||t.Dx>e.Dx?(n=this.AddOutPt(t,i),e.OutIdx=t.OutIdx,t.Side=o.EdgeSide.esLeft,e.Side=o.EdgeSide.esRight,a=(r=t).PrevInAEL==e?e.PrevInAEL:r.PrevInAEL):(n=this.AddOutPt(e,i),t.OutIdx=e.OutIdx,t.Side=o.EdgeSide.esRight,e.Side=o.EdgeSide.esLeft,a=(r=e).PrevInAEL==t?t.PrevInAEL:r.PrevInAEL),null!==a&&a.OutIdx>=0&&o.Clipper.TopX(a,i.Y)==o.Clipper.TopX(r,i.Y)&&o.ClipperBase.SlopesEqual(r,a,this.m_UseFullRange)&&0!==r.WindDelta&&0!==a.WindDelta){var s=this.AddOutPt(a,i);this.AddJoin(n,s,r.Top)}return n},o.Clipper.prototype.CreateOutRec=function(){var t=new o.OutRec;return t.Idx=-1,t.IsHole=!1,t.IsOpen=!1,t.FirstLeft=null,t.Pts=null,t.BottomPt=null,t.PolyNode=null,this.m_PolyOuts.push(t),t.Idx=this.m_PolyOuts.length-1,t},o.Clipper.prototype.AddOutPt=function(t,e){var i=t.Side==o.EdgeSide.esLeft;if(t.OutIdx<0){(r=this.CreateOutRec()).IsOpen=0===t.WindDelta;var n=new o.OutPt;return r.Pts=n,n.Idx=r.Idx,n.Pt.X=e.X,n.Pt.Y=e.Y,n.Next=n,n.Prev=n,r.IsOpen||this.SetHoleState(t,r),t.OutIdx=r.Idx,n}var r,a=(r=this.m_PolyOuts[t.OutIdx]).Pts;return i&&o.IntPoint.op_Equality(e,a.Pt)?a:!i&&o.IntPoint.op_Equality(e,a.Prev.Pt)?a.Prev:((n=new o.OutPt).Idx=r.Idx,n.Pt.X=e.X,n.Pt.Y=e.Y,n.Next=a,n.Prev=a.Prev,n.Prev.Next=n,a.Prev=n,i&&(r.Pts=n),n)},o.Clipper.prototype.SwapPoints=function(t,e){var i=new o.IntPoint(t.Value);t.Value.X=e.Value.X,t.Value.Y=e.Value.Y,e.Value.X=i.X,e.Value.Y=i.Y},o.Clipper.prototype.HorzSegmentsOverlap=function(t,e,i,n){return t.X>i.X==t.X<n.X||e.X>i.X==e.X<n.X||i.X>t.X==i.X<e.X||n.X>t.X==n.X<e.X||t.X==i.X&&e.X==n.X||t.X==n.X&&e.X==i.X},o.Clipper.prototype.InsertPolyPtBetween=function(t,e,i){var n=new o.OutPt;return n.Pt.X=i.X,n.Pt.Y=i.Y,e==t.Next?(t.Next=n,e.Prev=n,n.Next=e,n.Prev=t):(e.Next=n,t.Prev=n,n.Next=t,n.Prev=e),n},o.Clipper.prototype.SetHoleState=function(t,e){for(var i=!1,n=t.PrevInAEL;null!==n;)n.OutIdx>=0&&0!=n.WindDelta&&(i=!i,null===e.FirstLeft&&(e.FirstLeft=this.m_PolyOuts[n.OutIdx])),n=n.PrevInAEL;i&&(e.IsHole=!0)},o.Clipper.prototype.GetDx=function(t,e){return t.Y==e.Y?o.ClipperBase.horizontal:(e.X-t.X)/(e.Y-t.Y)},o.Clipper.prototype.FirstIsBottomPt=function(t,e){for(var i=t.Prev;o.IntPoint.op_Equality(i.Pt,t.Pt)&&i!=t;)i=i.Prev;var n=Math.abs(this.GetDx(t.Pt,i.Pt));for(i=t.Next;o.IntPoint.op_Equality(i.Pt,t.Pt)&&i!=t;)i=i.Next;var r=Math.abs(this.GetDx(t.Pt,i.Pt));for(i=e.Prev;o.IntPoint.op_Equality(i.Pt,e.Pt)&&i!=e;)i=i.Prev;var a=Math.abs(this.GetDx(e.Pt,i.Pt));for(i=e.Next;o.IntPoint.op_Equality(i.Pt,e.Pt)&&i!=e;)i=i.Next;var s=Math.abs(this.GetDx(e.Pt,i.Pt));return n>=a&&n>=s||r>=a&&r>=s},o.Clipper.prototype.GetBottomPt=function(t){for(var e=null,i=t.Next;i!=t;)i.Pt.Y>t.Pt.Y?(t=i,e=null):i.Pt.Y==t.Pt.Y&&i.Pt.X<=t.Pt.X&&(i.Pt.X<t.Pt.X?(e=null,t=i):i.Next!=t&&i.Prev!=t&&(e=i)),i=i.Next;if(null!==e)for(;e!=i;)for(this.FirstIsBottomPt(i,e)||(t=e),e=e.Next;o.IntPoint.op_Inequality(e.Pt,t.Pt);)e=e.Next;return t},o.Clipper.prototype.GetLowermostRec=function(t,e){null===t.BottomPt&&(t.BottomPt=this.GetBottomPt(t.Pts)),null===e.BottomPt&&(e.BottomPt=this.GetBottomPt(e.Pts));var i=t.BottomPt,n=e.BottomPt;return i.Pt.Y>n.Pt.Y?t:i.Pt.Y<n.Pt.Y?e:i.Pt.X<n.Pt.X?t:i.Pt.X>n.Pt.X||i.Next==i?e:n.Next==n||this.FirstIsBottomPt(i,n)?t:e},o.Clipper.prototype.Param1RightOfParam2=function(t,e){do{if((t=t.FirstLeft)==e)return!0}while(null!==t);return!1},o.Clipper.prototype.GetOutRec=function(t){for(var e=this.m_PolyOuts[t];e!=this.m_PolyOuts[e.Idx];)e=this.m_PolyOuts[e.Idx];return e},o.Clipper.prototype.AppendPolygon=function(t,e){var i,n=this.m_PolyOuts[t.OutIdx],r=this.m_PolyOuts[e.OutIdx];i=this.Param1RightOfParam2(n,r)?r:this.Param1RightOfParam2(r,n)?n:this.GetLowermostRec(n,r);var a,s=n.Pts,l=s.Prev,h=r.Pts,u=h.Prev;t.Side==o.EdgeSide.esLeft?(e.Side==o.EdgeSide.esLeft?(this.ReversePolyPtLinks(h),h.Next=s,s.Prev=h,l.Next=u,u.Prev=l,n.Pts=u):(u.Next=s,s.Prev=u,h.Prev=l,l.Next=h,n.Pts=h),a=o.EdgeSide.esLeft):(e.Side==o.EdgeSide.esRight?(this.ReversePolyPtLinks(h),l.Next=u,u.Prev=l,h.Next=s,s.Prev=h):(l.Next=h,h.Prev=l,s.Prev=u,u.Next=s),a=o.EdgeSide.esRight),n.BottomPt=null,i==r&&(r.FirstLeft!=n&&(n.FirstLeft=r.FirstLeft),n.IsHole=r.IsHole),r.Pts=null,r.BottomPt=null,r.FirstLeft=n;var c=t.OutIdx,p=e.OutIdx;t.OutIdx=-1,e.OutIdx=-1;for(var d=this.m_ActiveEdges;null!==d;){if(d.OutIdx==p){d.OutIdx=c,d.Side=a;break}d=d.NextInAEL}r.Idx=n.Idx},o.Clipper.prototype.ReversePolyPtLinks=function(t){if(null!==t){var e,i;e=t;do{i=e.Next,e.Next=e.Prev,e.Prev=i,e=i}while(e!=t)}},o.Clipper.SwapSides=function(t,e){var i=t.Side;t.Side=e.Side,e.Side=i},o.Clipper.SwapPolyIndexes=function(t,e){var i=t.OutIdx;t.OutIdx=e.OutIdx,e.OutIdx=i},o.Clipper.prototype.IntersectEdges=function(t,e,i,n){var r,a,s,l,h,u,c=!n&&null===t.NextInLML&&t.Top.X==i.X&&t.Top.Y==i.Y,p=!n&&null===e.NextInLML&&e.Top.X==i.X&&e.Top.Y==i.Y,d=t.OutIdx>=0,f=e.OutIdx>=0;if(0===t.WindDelta||0===e.WindDelta)return 0===t.WindDelta&&0===e.WindDelta?(c||p)&&d&&f&&this.AddLocalMaxPoly(t,e,i):t.PolyTyp==e.PolyTyp&&t.WindDelta!=e.WindDelta&&this.m_ClipType==o.ClipType.ctUnion?0===t.WindDelta?f&&(this.AddOutPt(t,i),d&&(t.OutIdx=-1)):d&&(this.AddOutPt(e,i),f&&(e.OutIdx=-1)):t.PolyTyp!=e.PolyTyp&&(0!==t.WindDelta||1!=Math.abs(e.WindCnt)||this.m_ClipType==o.ClipType.ctUnion&&0!==e.WindCnt2?0===e.WindDelta&&1==Math.abs(t.WindCnt)&&(this.m_ClipType!=o.ClipType.ctUnion||0===t.WindCnt2)&&(this.AddOutPt(e,i),f&&(e.OutIdx=-1)):(this.AddOutPt(t,i),d&&(t.OutIdx=-1))),c&&(t.OutIdx<0?this.DeleteFromAEL(t):o.Error("Error intersecting polylines")),void(p&&(e.OutIdx<0?this.DeleteFromAEL(e):o.Error("Error intersecting polylines")));if(t.PolyTyp==e.PolyTyp)if(this.IsEvenOddFillType(t)){var g=t.WindCnt;t.WindCnt=e.WindCnt,e.WindCnt=g}else t.WindCnt+e.WindDelta===0?t.WindCnt=-t.WindCnt:t.WindCnt+=e.WindDelta,e.WindCnt-t.WindDelta==0?e.WindCnt=-e.WindCnt:e.WindCnt-=t.WindDelta;else this.IsEvenOddFillType(e)?t.WindCnt2=0===t.WindCnt2?1:0:t.WindCnt2+=e.WindDelta,this.IsEvenOddFillType(t)?e.WindCnt2=0===e.WindCnt2?1:0:e.WindCnt2-=t.WindDelta;switch(t.PolyTyp==o.PolyType.ptSubject?(r=this.m_SubjFillType,s=this.m_ClipFillType):(r=this.m_ClipFillType,s=this.m_SubjFillType),e.PolyTyp==o.PolyType.ptSubject?(a=this.m_SubjFillType,l=this.m_ClipFillType):(a=this.m_ClipFillType,l=this.m_SubjFillType),r){case o.PolyFillType.pftPositive:h=t.WindCnt;break;case o.PolyFillType.pftNegative:h=-t.WindCnt;break;default:h=Math.abs(t.WindCnt)}switch(a){case o.PolyFillType.pftPositive:u=e.WindCnt;break;case o.PolyFillType.pftNegative:u=-e.WindCnt;break;default:u=Math.abs(e.WindCnt)}if(d&&f)c||p||0!==h&&1!=h||0!==u&&1!=u||t.PolyTyp!=e.PolyTyp&&this.m_ClipType!=o.ClipType.ctXor?this.AddLocalMaxPoly(t,e,i):(this.AddOutPt(t,i),this.AddOutPt(e,i),o.Clipper.SwapSides(t,e),o.Clipper.SwapPolyIndexes(t,e));else if(d)(0===u||1==u)&&(this.AddOutPt(t,i),o.Clipper.SwapSides(t,e),o.Clipper.SwapPolyIndexes(t,e));else if(f)(0===h||1==h)&&(this.AddOutPt(e,i),o.Clipper.SwapSides(t,e),o.Clipper.SwapPolyIndexes(t,e));else if(!(0!==h&&1!=h||0!==u&&1!=u||c||p)){var m,v;switch(s){case o.PolyFillType.pftPositive:m=t.WindCnt2;break;case o.PolyFillType.pftNegative:m=-t.WindCnt2;break;default:m=Math.abs(t.WindCnt2)}switch(l){case o.PolyFillType.pftPositive:v=e.WindCnt2;break;case o.PolyFillType.pftNegative:v=-e.WindCnt2;break;default:v=Math.abs(e.WindCnt2)}if(t.PolyTyp!=e.PolyTyp)this.AddLocalMinPoly(t,e,i);else if(1==h&&1==u)switch(this.m_ClipType){case o.ClipType.ctIntersection:m>0&&v>0&&this.AddLocalMinPoly(t,e,i);break;case o.ClipType.ctUnion:m<=0&&v<=0&&this.AddLocalMinPoly(t,e,i);break;case o.ClipType.ctDifference:(t.PolyTyp==o.PolyType.ptClip&&m>0&&v>0||t.PolyTyp==o.PolyType.ptSubject&&m<=0&&v<=0)&&this.AddLocalMinPoly(t,e,i);break;case o.ClipType.ctXor:this.AddLocalMinPoly(t,e,i)}else o.Clipper.SwapSides(t,e)}c!=p&&(c&&t.OutIdx>=0||p&&e.OutIdx>=0)&&(o.Clipper.SwapSides(t,e),o.Clipper.SwapPolyIndexes(t,e)),c&&this.DeleteFromAEL(t),p&&this.DeleteFromAEL(e)},o.Clipper.prototype.DeleteFromAEL=function(t){var e=t.PrevInAEL,i=t.NextInAEL;null===e&&null===i&&t!=this.m_ActiveEdges||(null!==e?e.NextInAEL=i:this.m_ActiveEdges=i,null!==i&&(i.PrevInAEL=e),t.NextInAEL=null,t.PrevInAEL=null)},o.Clipper.prototype.DeleteFromSEL=function(t){var e=t.PrevInSEL,i=t.NextInSEL;null===e&&null===i&&t!=this.m_SortedEdges||(null!==e?e.NextInSEL=i:this.m_SortedEdges=i,null!==i&&(i.PrevInSEL=e),t.NextInSEL=null,t.PrevInSEL=null)},o.Clipper.prototype.UpdateEdgeIntoAEL=function(t){null===t.NextInLML&&o.Error("UpdateEdgeIntoAEL: invalid call");var e=t.PrevInAEL,i=t.NextInAEL;return t.NextInLML.OutIdx=t.OutIdx,null!==e?e.NextInAEL=t.NextInLML:this.m_ActiveEdges=t.NextInLML,null!==i&&(i.PrevInAEL=t.NextInLML),t.NextInLML.Side=t.Side,t.NextInLML.WindDelta=t.WindDelta,t.NextInLML.WindCnt=t.WindCnt,t.NextInLML.WindCnt2=t.WindCnt2,(t=t.NextInLML).Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,t.PrevInAEL=e,t.NextInAEL=i,o.ClipperBase.IsHorizontal(t)||this.InsertScanbeam(t.Top.Y),t},o.Clipper.prototype.ProcessHorizontals=function(t){for(var e=this.m_SortedEdges;null!==e;)this.DeleteFromSEL(e),this.ProcessHorizontal(e,t),e=this.m_SortedEdges},o.Clipper.prototype.GetHorzDirection=function(t,e){t.Bot.X<t.Top.X?(e.Left=t.Bot.X,e.Right=t.Top.X,e.Dir=o.Direction.dLeftToRight):(e.Left=t.Top.X,e.Right=t.Bot.X,e.Dir=o.Direction.dRightToLeft)},o.Clipper.prototype.PrepareHorzJoins=function(t,e){var i=this.m_PolyOuts[t.OutIdx].Pts;t.Side!=o.EdgeSide.esLeft&&(i=i.Prev),e&&(o.IntPoint.op_Equality(i.Pt,t.Top)?this.AddGhostJoin(i,t.Bot):this.AddGhostJoin(i,t.Top))},o.Clipper.prototype.ProcessHorizontal=function(t,e){var i={Dir:null,Left:null,Right:null};this.GetHorzDirection(t,i);for(var n=i.Dir,r=i.Left,a=i.Right,s=t,l=null;null!==s.NextInLML&&o.ClipperBase.IsHorizontal(s.NextInLML);)s=s.NextInLML;for(null===s.NextInLML&&(l=this.GetMaximaPair(s));;){for(var h=t==s,u=this.GetNextInAEL(t,n);null!==u&&!(u.Curr.X==t.Top.X&&null!==t.NextInLML&&u.Dx<t.NextInLML.Dx);){var c=this.GetNextInAEL(u,n);if(n==o.Direction.dLeftToRight&&u.Curr.X<=a||n==o.Direction.dRightToLeft&&u.Curr.X>=r){if(t.OutIdx>=0&&0!=t.WindDelta&&this.PrepareHorzJoins(t,e),u==l&&h)return n==o.Direction.dLeftToRight?this.IntersectEdges(t,u,u.Top,!1):this.IntersectEdges(u,t,u.Top,!1),void(l.OutIdx>=0&&o.Error("ProcessHorizontal error"));if(n==o.Direction.dLeftToRight){var p=new o.IntPoint(u.Curr.X,t.Curr.Y);this.IntersectEdges(t,u,p,!0)}else p=new o.IntPoint(u.Curr.X,t.Curr.Y),this.IntersectEdges(u,t,p,!0);this.SwapPositionsInAEL(t,u)}else if(n==o.Direction.dLeftToRight&&u.Curr.X>=a||n==o.Direction.dRightToLeft&&u.Curr.X<=r)break;u=c}if(t.OutIdx>=0&&0!==t.WindDelta&&this.PrepareHorzJoins(t,e),null===t.NextInLML||!o.ClipperBase.IsHorizontal(t.NextInLML))break;(t=this.UpdateEdgeIntoAEL(t)).OutIdx>=0&&this.AddOutPt(t,t.Bot),i={Dir:n,Left:r,Right:a},this.GetHorzDirection(t,i),n=i.Dir,r=i.Left,a=i.Right}if(null!==t.NextInLML)if(t.OutIdx>=0){var d=this.AddOutPt(t,t.Top);if(0===(t=this.UpdateEdgeIntoAEL(t)).WindDelta)return;var f=t.PrevInAEL;if(c=t.NextInAEL,null!==f&&f.Curr.X==t.Bot.X&&f.Curr.Y==t.Bot.Y&&0!==f.WindDelta&&f.OutIdx>=0&&f.Curr.Y>f.Top.Y&&o.ClipperBase.SlopesEqual(t,f,this.m_UseFullRange)){var g=this.AddOutPt(f,t.Bot);this.AddJoin(d,g,t.Top)}else null!==c&&c.Curr.X==t.Bot.X&&c.Curr.Y==t.Bot.Y&&0!==c.WindDelta&&c.OutIdx>=0&&c.Curr.Y>c.Top.Y&&o.ClipperBase.SlopesEqual(t,c,this.m_UseFullRange)&&(g=this.AddOutPt(c,t.Bot),this.AddJoin(d,g,t.Top))}else t=this.UpdateEdgeIntoAEL(t);else null!==l?l.OutIdx>=0?(n==o.Direction.dLeftToRight?this.IntersectEdges(t,l,t.Top,!1):this.IntersectEdges(l,t,t.Top,!1),l.OutIdx>=0&&o.Error("ProcessHorizontal error")):(this.DeleteFromAEL(t),this.DeleteFromAEL(l)):(t.OutIdx>=0&&this.AddOutPt(t,t.Top),this.DeleteFromAEL(t))},o.Clipper.prototype.GetNextInAEL=function(t,e){return e==o.Direction.dLeftToRight?t.NextInAEL:t.PrevInAEL},o.Clipper.prototype.IsMinima=function(t){return null!==t&&t.Prev.NextInLML!=t&&t.Next.NextInLML!=t},o.Clipper.prototype.IsMaxima=function(t,e){return null!==t&&t.Top.Y==e&&null===t.NextInLML},o.Clipper.prototype.IsIntermediate=function(t,e){return t.Top.Y==e&&null!==t.NextInLML},o.Clipper.prototype.GetMaximaPair=function(t){var e=null;return o.IntPoint.op_Equality(t.Next.Top,t.Top)&&null===t.Next.NextInLML?e=t.Next:o.IntPoint.op_Equality(t.Prev.Top,t.Top)&&null===t.Prev.NextInLML&&(e=t.Prev),null===e||-2!=e.OutIdx&&(e.NextInAEL!=e.PrevInAEL||o.ClipperBase.IsHorizontal(e))?e:null},o.Clipper.prototype.ProcessIntersections=function(t,e){if(null==this.m_ActiveEdges)return!0;try{if(this.BuildIntersectList(t,e),0==this.m_IntersectList.length)return!0;if(1!=this.m_IntersectList.length&&!this.FixupIntersectionOrder())return!1;this.ProcessIntersectList()}catch{this.m_SortedEdges=null,this.m_IntersectList.length=0,o.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},o.Clipper.prototype.BuildIntersectList=function(t,e){if(null!==this.m_ActiveEdges){var i=this.m_ActiveEdges;for(this.m_SortedEdges=i;null!==i;)i.PrevInSEL=i.PrevInAEL,i.NextInSEL=i.NextInAEL,i.Curr.X=o.Clipper.TopX(i,e),i=i.NextInAEL;for(var n=!0;n&&null!==this.m_SortedEdges;){for(n=!1,i=this.m_SortedEdges;null!==i.NextInSEL;){var r=i.NextInSEL,a=new o.IntPoint;if(i.Curr.X>r.Curr.X){!this.IntersectPoint(i,r,a)&&i.Curr.X>r.Curr.X+1&&o.Error("Intersection error"),a.Y>t&&(a.Y=t,Math.abs(i.Dx)>Math.abs(r.Dx)?a.X=o.Clipper.TopX(r,t):a.X=o.Clipper.TopX(i,t));var s=new o.IntersectNode;s.Edge1=i,s.Edge2=r,s.Pt.X=a.X,s.Pt.Y=a.Y,this.m_IntersectList.push(s),this.SwapPositionsInSEL(i,r),n=!0}else i=r}if(null===i.PrevInSEL)break;i.PrevInSEL.NextInSEL=null}this.m_SortedEdges=null}},o.Clipper.prototype.EdgesAdjacent=function(t){return t.Edge1.NextInSEL==t.Edge2||t.Edge1.PrevInSEL==t.Edge2},o.Clipper.IntersectNodeSort=function(t,e){return e.Pt.Y-t.Pt.Y},o.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var t=this.m_IntersectList.length,e=0;e<t;e++){if(!this.EdgesAdjacent(this.m_IntersectList[e])){for(var i=e+1;i<t&&!this.EdgesAdjacent(this.m_IntersectList[i]);)i++;if(i==t)return!1;var n=this.m_IntersectList[e];this.m_IntersectList[e]=this.m_IntersectList[i],this.m_IntersectList[i]=n}this.SwapPositionsInSEL(this.m_IntersectList[e].Edge1,this.m_IntersectList[e].Edge2)}return!0},o.Clipper.prototype.ProcessIntersectList=function(){for(var t=0,e=this.m_IntersectList.length;t<e;t++){var i=this.m_IntersectList[t];this.IntersectEdges(i.Edge1,i.Edge2,i.Pt,!0),this.SwapPositionsInAEL(i.Edge1,i.Edge2)}this.m_IntersectList.length=0};var ge=(0,r.a)(function(t){return t<0?Math.ceil(t-.5):Math.round(t)},"R1"),me=(0,r.a)(function(t){return t<0?Math.ceil(t-.5):Math.floor(t+.5)},"R2"),ve=(0,r.a)(function(t){return t<0?-Math.round(Math.abs(t)):Math.round(t)},"R3"),ye=(0,r.a)(function(t){return t<0?(t-=.5)<-2147483648?Math.ceil(t):0|t:(t+=.5)>2147483647?Math.floor(t):0|t},"R4");h.msie?o.Clipper.Round=ge:h.chromium?o.Clipper.Round=ve:h.safari?o.Clipper.Round=ye:o.Clipper.Round=me,o.Clipper.TopX=function(t,e){return e==t.Top.Y?t.Top.X:t.Bot.X+o.Clipper.Round(t.Dx*(e-t.Bot.Y))},o.Clipper.prototype.IntersectPoint=function(t,e,i){var n,r;if(i.X=0,i.Y=0,o.ClipperBase.SlopesEqual(t,e,this.m_UseFullRange)||t.Dx==e.Dx)return e.Bot.Y>t.Bot.Y?(i.X=e.Bot.X,i.Y=e.Bot.Y):(i.X=t.Bot.X,i.Y=t.Bot.Y),!1;if(0===t.Delta.X)i.X=t.Bot.X,o.ClipperBase.IsHorizontal(e)?i.Y=e.Bot.Y:(r=e.Bot.Y-e.Bot.X/e.Dx,i.Y=o.Clipper.Round(i.X/e.Dx+r));else if(0===e.Delta.X)i.X=e.Bot.X,o.ClipperBase.IsHorizontal(t)?i.Y=t.Bot.Y:(n=t.Bot.Y-t.Bot.X/t.Dx,i.Y=o.Clipper.Round(i.X/t.Dx+n));else{n=t.Bot.X-t.Bot.Y*t.Dx;var a=((r=e.Bot.X-e.Bot.Y*e.Dx)-n)/(t.Dx-e.Dx);i.Y=o.Clipper.Round(a),Math.abs(t.Dx)<Math.abs(e.Dx)?i.X=o.Clipper.Round(t.Dx*a+n):i.X=o.Clipper.Round(e.Dx*a+r)}if(i.Y<t.Top.Y||i.Y<e.Top.Y){if(t.Top.Y>e.Top.Y)return i.Y=t.Top.Y,i.X=o.Clipper.TopX(e,t.Top.Y),i.X<t.Top.X;i.Y=e.Top.Y,Math.abs(t.Dx)<Math.abs(e.Dx)?i.X=o.Clipper.TopX(t,i.Y):i.X=o.Clipper.TopX(e,i.Y)}return!0},o.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(t){for(var e=this.m_ActiveEdges;null!==e;){var i=this.IsMaxima(e,t);if(i){var n=this.GetMaximaPair(e);i=null===n||!o.ClipperBase.IsHorizontal(n)}if(i){var r=e.PrevInAEL;this.DoMaxima(e),e=null===r?this.m_ActiveEdges:r.NextInAEL}else{if(this.IsIntermediate(e,t)&&o.ClipperBase.IsHorizontal(e.NextInLML)?((e=this.UpdateEdgeIntoAEL(e)).OutIdx>=0&&this.AddOutPt(e,e.Bot),this.AddEdgeToSEL(e)):(e.Curr.X=o.Clipper.TopX(e,t),e.Curr.Y=t),this.StrictlySimple&&(r=e.PrevInAEL,e.OutIdx>=0&&0!==e.WindDelta&&null!==r&&r.OutIdx>=0&&r.Curr.X==e.Curr.X&&0!==r.WindDelta)){var a=this.AddOutPt(r,e.Curr),s=this.AddOutPt(e,e.Curr);this.AddJoin(a,s,e.Curr)}e=e.NextInAEL}}for(this.ProcessHorizontals(!0),e=this.m_ActiveEdges;null!==e;){if(this.IsIntermediate(e,t)){a=null,e.OutIdx>=0&&(a=this.AddOutPt(e,e.Top)),r=(e=this.UpdateEdgeIntoAEL(e)).PrevInAEL;var l=e.NextInAEL;null!==r&&r.Curr.X==e.Bot.X&&r.Curr.Y==e.Bot.Y&&null!==a&&r.OutIdx>=0&&r.Curr.Y>r.Top.Y&&o.ClipperBase.SlopesEqual(e,r,this.m_UseFullRange)&&0!==e.WindDelta&&0!==r.WindDelta?(s=this.AddOutPt(r,e.Bot),this.AddJoin(a,s,e.Top)):null!==l&&l.Curr.X==e.Bot.X&&l.Curr.Y==e.Bot.Y&&null!==a&&l.OutIdx>=0&&l.Curr.Y>l.Top.Y&&o.ClipperBase.SlopesEqual(e,l,this.m_UseFullRange)&&0!==e.WindDelta&&0!==l.WindDelta&&(s=this.AddOutPt(l,e.Bot),this.AddJoin(a,s,e.Top))}e=e.NextInAEL}},o.Clipper.prototype.DoMaxima=function(t){var e=this.GetMaximaPair(t);if(null===e)return t.OutIdx>=0&&this.AddOutPt(t,t.Top),void this.DeleteFromAEL(t);for(var i=t.NextInAEL;null!==i&&i!=e;)this.IntersectEdges(t,i,t.Top,!0),this.SwapPositionsInAEL(t,i),i=t.NextInAEL;-1==t.OutIdx&&-1==e.OutIdx?(this.DeleteFromAEL(t),this.DeleteFromAEL(e)):t.OutIdx>=0&&e.OutIdx>=0?this.IntersectEdges(t,e,t.Top,!1):0===t.WindDelta?(t.OutIdx>=0&&(this.AddOutPt(t,t.Top),t.OutIdx=-1),this.DeleteFromAEL(t),e.OutIdx>=0&&(this.AddOutPt(e,t.Top),e.OutIdx=-1),this.DeleteFromAEL(e)):o.Error("DoMaxima error")},o.Clipper.ReversePaths=function(t){for(var e=0,i=t.length;e<i;e++)t[e].reverse()},o.Clipper.Orientation=function(t){return o.Clipper.Area(t)>=0},o.Clipper.prototype.PointCount=function(t){if(null===t)return 0;var e=0,i=t;do{e++,i=i.Next}while(i!=t);return e},o.Clipper.prototype.BuildResult=function(t){o.Clear(t);for(var e=0,i=this.m_PolyOuts.length;e<i;e++){var n=this.m_PolyOuts[e];if(null!==n.Pts){var r=n.Pts.Prev,a=this.PointCount(r);if(!(a<2)){for(var s=new Array(a),l=0;l<a;l++)s[l]=r.Pt,r=r.Prev;t.push(s)}}}},o.Clipper.prototype.BuildResult2=function(t){t.Clear();for(var e=0,i=this.m_PolyOuts.length;e<i;e++){var n=this.m_PolyOuts[e],r=this.PointCount(n.Pts);if(!(n.IsOpen&&r<2||!n.IsOpen&&r<3)){this.FixHoleLinkage(n);var a=new o.PolyNode;t.m_AllPolys.push(a),n.PolyNode=a,a.m_polygon.length=r;for(var s=n.Pts.Prev,l=0;l<r;l++)a.m_polygon[l]=s.Pt,s=s.Prev}}for(e=0,i=this.m_PolyOuts.length;e<i;e++)null!==(n=this.m_PolyOuts[e]).PolyNode&&(n.IsOpen?(n.PolyNode.IsOpen=!0,t.AddChild(n.PolyNode)):null!==n.FirstLeft&&null!=n.FirstLeft.PolyNode?n.FirstLeft.PolyNode.AddChild(n.PolyNode):t.AddChild(n.PolyNode))},o.Clipper.prototype.FixupOutPolygon=function(t){var e=null;t.BottomPt=null;for(var i=t.Pts;;){if(i.Prev==i||i.Prev==i.Next)return this.DisposeOutPts(i),void(t.Pts=null);if(o.IntPoint.op_Equality(i.Pt,i.Next.Pt)||o.IntPoint.op_Equality(i.Pt,i.Prev.Pt)||o.ClipperBase.SlopesEqual(i.Prev.Pt,i.Pt,i.Next.Pt,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(i.Prev.Pt,i.Pt,i.Next.Pt)))e=null,i.Prev.Next=i.Next,i.Next.Prev=i.Prev,i=i.Prev;else{if(i==e)break;null===e&&(e=i),i=i.Next}}t.Pts=i},o.Clipper.prototype.DupOutPt=function(t,e){var i=new o.OutPt;return i.Pt.X=t.Pt.X,i.Pt.Y=t.Pt.Y,i.Idx=t.Idx,e?(i.Next=t.Next,i.Prev=t,t.Next.Prev=i,t.Next=i):(i.Prev=t.Prev,i.Next=t,t.Prev.Next=i,t.Prev=i),i},o.Clipper.prototype.GetOverlap=function(t,e,i,n,r){return t<e?i<n?(r.Left=Math.max(t,i),r.Right=Math.min(e,n)):(r.Left=Math.max(t,n),r.Right=Math.min(e,i)):i<n?(r.Left=Math.max(e,i),r.Right=Math.min(t,n)):(r.Left=Math.max(e,n),r.Right=Math.min(t,i)),r.Left<r.Right},o.Clipper.prototype.JoinHorz=function(t,e,i,n,r,a){var s=t.Pt.X>e.Pt.X?o.Direction.dRightToLeft:o.Direction.dLeftToRight,l=i.Pt.X>n.Pt.X?o.Direction.dRightToLeft:o.Direction.dLeftToRight;if(s==l)return!1;if(s==o.Direction.dLeftToRight){for(;t.Next.Pt.X<=r.X&&t.Next.Pt.X>=t.Pt.X&&t.Next.Pt.Y==r.Y;)t=t.Next;a&&t.Pt.X!=r.X&&(t=t.Next),e=this.DupOutPt(t,!a),o.IntPoint.op_Inequality(e.Pt,r)&&((t=e).Pt.X=r.X,t.Pt.Y=r.Y,e=this.DupOutPt(t,!a))}else{for(;t.Next.Pt.X>=r.X&&t.Next.Pt.X<=t.Pt.X&&t.Next.Pt.Y==r.Y;)t=t.Next;!a&&t.Pt.X!=r.X&&(t=t.Next),e=this.DupOutPt(t,a),o.IntPoint.op_Inequality(e.Pt,r)&&((t=e).Pt.X=r.X,t.Pt.Y=r.Y,e=this.DupOutPt(t,a))}if(l==o.Direction.dLeftToRight){for(;i.Next.Pt.X<=r.X&&i.Next.Pt.X>=i.Pt.X&&i.Next.Pt.Y==r.Y;)i=i.Next;a&&i.Pt.X!=r.X&&(i=i.Next),n=this.DupOutPt(i,!a),o.IntPoint.op_Inequality(n.Pt,r)&&((i=n).Pt.X=r.X,i.Pt.Y=r.Y,n=this.DupOutPt(i,!a))}else{for(;i.Next.Pt.X>=r.X&&i.Next.Pt.X<=i.Pt.X&&i.Next.Pt.Y==r.Y;)i=i.Next;!a&&i.Pt.X!=r.X&&(i=i.Next),n=this.DupOutPt(i,a),o.IntPoint.op_Inequality(n.Pt,r)&&((i=n).Pt.X=r.X,i.Pt.Y=r.Y,n=this.DupOutPt(i,a))}return s==o.Direction.dLeftToRight==a?(t.Prev=i,i.Next=t,e.Next=n,n.Prev=e):(t.Next=i,i.Prev=t,e.Prev=n,n.Next=e),!0},o.Clipper.prototype.JoinPoints=function(t,e,i){var n=t.OutPt1,r=new o.OutPt,a=t.OutPt2,s=new o.OutPt,l=t.OutPt1.Pt.Y==t.OffPt.Y;if(l&&o.IntPoint.op_Equality(t.OffPt,t.OutPt1.Pt)&&o.IntPoint.op_Equality(t.OffPt,t.OutPt2.Pt)){for(r=t.OutPt1.Next;r!=n&&o.IntPoint.op_Equality(r.Pt,t.OffPt);)r=r.Next;var h=r.Pt.Y>t.OffPt.Y;for(s=t.OutPt2.Next;s!=a&&o.IntPoint.op_Equality(s.Pt,t.OffPt);)s=s.Next;return h!=s.Pt.Y>t.OffPt.Y&&(h?(r=this.DupOutPt(n,!1),s=this.DupOutPt(a,!0),n.Prev=a,a.Next=n,r.Next=s,s.Prev=r,t.OutPt1=n,t.OutPt2=r,!0):(r=this.DupOutPt(n,!0),s=this.DupOutPt(a,!1),n.Next=a,a.Prev=n,r.Prev=s,s.Next=r,t.OutPt1=n,t.OutPt2=r,!0))}if(l){for(r=n;n.Prev.Pt.Y==n.Pt.Y&&n.Prev!=r&&n.Prev!=a;)n=n.Prev;for(;r.Next.Pt.Y==r.Pt.Y&&r.Next!=n&&r.Next!=a;)r=r.Next;if(r.Next==n||r.Next==a)return!1;for(s=a;a.Prev.Pt.Y==a.Pt.Y&&a.Prev!=s&&a.Prev!=r;)a=a.Prev;for(;s.Next.Pt.Y==s.Pt.Y&&s.Next!=a&&s.Next!=n;)s=s.Next;if(s.Next==a||s.Next==n)return!1;var u={Left:null,Right:null};if(!this.GetOverlap(n.Pt.X,r.Pt.X,a.Pt.X,s.Pt.X,u))return!1;var c,p=u.Left,d=u.Right,f=new o.IntPoint;return n.Pt.X>=p&&n.Pt.X<=d?(f.X=n.Pt.X,f.Y=n.Pt.Y,c=n.Pt.X>r.Pt.X):a.Pt.X>=p&&a.Pt.X<=d?(f.X=a.Pt.X,f.Y=a.Pt.Y,c=a.Pt.X>s.Pt.X):r.Pt.X>=p&&r.Pt.X<=d?(f.X=r.Pt.X,f.Y=r.Pt.Y,c=r.Pt.X>n.Pt.X):(f.X=s.Pt.X,f.Y=s.Pt.Y,c=s.Pt.X>a.Pt.X),t.OutPt1=n,t.OutPt2=a,this.JoinHorz(n,r,a,s,f,c)}for(r=n.Next;o.IntPoint.op_Equality(r.Pt,n.Pt)&&r!=n;)r=r.Next;var g=r.Pt.Y>n.Pt.Y||!o.ClipperBase.SlopesEqual(n.Pt,r.Pt,t.OffPt,this.m_UseFullRange);if(g){for(r=n.Prev;o.IntPoint.op_Equality(r.Pt,n.Pt)&&r!=n;)r=r.Prev;if(r.Pt.Y>n.Pt.Y||!o.ClipperBase.SlopesEqual(n.Pt,r.Pt,t.OffPt,this.m_UseFullRange))return!1}for(s=a.Next;o.IntPoint.op_Equality(s.Pt,a.Pt)&&s!=a;)s=s.Next;var m=s.Pt.Y>a.Pt.Y||!o.ClipperBase.SlopesEqual(a.Pt,s.Pt,t.OffPt,this.m_UseFullRange);if(m){for(s=a.Prev;o.IntPoint.op_Equality(s.Pt,a.Pt)&&s!=a;)s=s.Prev;if(s.Pt.Y>a.Pt.Y||!o.ClipperBase.SlopesEqual(a.Pt,s.Pt,t.OffPt,this.m_UseFullRange))return!1}return!(r==n||s==a||r==s||e==i&&g==m||(g?(r=this.DupOutPt(n,!1),s=this.DupOutPt(a,!0),n.Prev=a,a.Next=n,r.Next=s,s.Prev=r,t.OutPt1=n,t.OutPt2=r,0):(r=this.DupOutPt(n,!0),s=this.DupOutPt(a,!1),n.Next=a,a.Prev=n,r.Prev=s,s.Next=r,t.OutPt1=n,t.OutPt2=r,0)))},o.Clipper.GetBounds=function(t){for(var e=0,i=t.length;e<i&&0==t[e].length;)e++;if(e==i)return new o.IntRect(0,0,0,0);var n=new o.IntRect;for(n.left=t[e][0].X,n.right=n.left,n.top=t[e][0].Y,n.bottom=n.top;e<i;e++)for(var r=0,a=t[e].length;r<a;r++)t[e][r].X<n.left?n.left=t[e][r].X:t[e][r].X>n.right&&(n.right=t[e][r].X),t[e][r].Y<n.top?n.top=t[e][r].Y:t[e][r].Y>n.bottom&&(n.bottom=t[e][r].Y);return n},o.Clipper.prototype.GetBounds2=function(t){var e=t,i=new o.IntRect;for(i.left=t.Pt.X,i.right=t.Pt.X,i.top=t.Pt.Y,i.bottom=t.Pt.Y,t=t.Next;t!=e;)t.Pt.X<i.left&&(i.left=t.Pt.X),t.Pt.X>i.right&&(i.right=t.Pt.X),t.Pt.Y<i.top&&(i.top=t.Pt.Y),t.Pt.Y>i.bottom&&(i.bottom=t.Pt.Y),t=t.Next;return i},o.Clipper.PointInPolygon=function(t,e){var i=0,n=e.length;if(n<3)return 0;for(var r=e[0],o=1;o<=n;++o){var a=o==n?e[0]:e[o];if(a.Y==t.Y&&(a.X==t.X||r.Y==t.Y&&a.X>t.X==r.X<t.X))return-1;if(r.Y<t.Y!=a.Y<t.Y)if(r.X>=t.X)if(a.X>t.X)i=1-i;else{if(0==(s=(r.X-t.X)*(a.Y-t.Y)-(a.X-t.X)*(r.Y-t.Y)))return-1;s>0==a.Y>r.Y&&(i=1-i)}else if(a.X>t.X){var s;if(0==(s=(r.X-t.X)*(a.Y-t.Y)-(a.X-t.X)*(r.Y-t.Y)))return-1;s>0==a.Y>r.Y&&(i=1-i)}r=a}return i},o.Clipper.prototype.PointInPolygon=function(t,e){for(var i=0,n=e;;){var r=e.Pt.X,o=e.Pt.Y,a=e.Next.Pt.X,s=e.Next.Pt.Y;if(s==t.Y&&(a==t.X||o==t.Y&&a>t.X==r<t.X))return-1;if(o<t.Y!=s<t.Y)if(r>=t.X)if(a>t.X)i=1-i;else{if(0==(l=(r-t.X)*(s-t.Y)-(a-t.X)*(o-t.Y)))return-1;l>0==s>o&&(i=1-i)}else if(a>t.X){var l;if(0==(l=(r-t.X)*(s-t.Y)-(a-t.X)*(o-t.Y)))return-1;l>0==s>o&&(i=1-i)}if(n==(e=e.Next))break}return i},o.Clipper.prototype.Poly2ContainsPoly1=function(t,e){var i=t;do{var n=this.PointInPolygon(i.Pt,e);if(n>=0)return 0!=n;i=i.Next}while(i!=t);return!0},o.Clipper.prototype.FixupFirstLefts1=function(t,e){for(var i=0,n=this.m_PolyOuts.length;i<n;i++){var r=this.m_PolyOuts[i];null!==r.Pts&&r.FirstLeft==t&&this.Poly2ContainsPoly1(r.Pts,e.Pts)&&(r.FirstLeft=e)}},o.Clipper.prototype.FixupFirstLefts2=function(t,e){for(var i=0,n=this.m_PolyOuts,r=n.length,o=n[i];i<r;o=n[++i])o.FirstLeft==t&&(o.FirstLeft=e)},o.Clipper.ParseFirstLeft=function(t){for(;null!=t&&null==t.Pts;)t=t.FirstLeft;return t},o.Clipper.prototype.JoinCommonEdges=function(){for(var t=0,e=this.m_Joins.length;t<e;t++){var i,n=this.m_Joins[t],r=this.GetOutRec(n.OutPt1.Idx),a=this.GetOutRec(n.OutPt2.Idx);if(null!=r.Pts&&null!=a.Pts&&(i=r==a?r:this.Param1RightOfParam2(r,a)?a:this.Param1RightOfParam2(a,r)?r:this.GetLowermostRec(r,a),this.JoinPoints(n,r,a)))if(r==a){if(r.Pts=n.OutPt1,r.BottomPt=null,(a=this.CreateOutRec()).Pts=n.OutPt2,this.UpdateOutPtIdxs(a),this.m_UsingPolyTree)for(var s=0,l=this.m_PolyOuts.length;s<l-1;s++){var h=this.m_PolyOuts[s];null==h.Pts||o.Clipper.ParseFirstLeft(h.FirstLeft)!=r||h.IsHole==r.IsHole||this.Poly2ContainsPoly1(h.Pts,n.OutPt2)&&(h.FirstLeft=a)}this.Poly2ContainsPoly1(a.Pts,r.Pts)?(a.IsHole=!r.IsHole,a.FirstLeft=r,this.m_UsingPolyTree&&this.FixupFirstLefts2(a,r),(a.IsHole^this.ReverseSolution)==this.Area(a)>0&&this.ReversePolyPtLinks(a.Pts)):this.Poly2ContainsPoly1(r.Pts,a.Pts)?(a.IsHole=r.IsHole,r.IsHole=!a.IsHole,a.FirstLeft=r.FirstLeft,r.FirstLeft=a,this.m_UsingPolyTree&&this.FixupFirstLefts2(r,a),(r.IsHole^this.ReverseSolution)==this.Area(r)>0&&this.ReversePolyPtLinks(r.Pts)):(a.IsHole=r.IsHole,a.FirstLeft=r.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(r,a))}else a.Pts=null,a.BottomPt=null,a.Idx=r.Idx,r.IsHole=i.IsHole,i==a&&(r.FirstLeft=a.FirstLeft),a.FirstLeft=r,this.m_UsingPolyTree&&this.FixupFirstLefts2(a,r)}},o.Clipper.prototype.UpdateOutPtIdxs=function(t){var e=t.Pts;do{e.Idx=t.Idx,e=e.Prev}while(e!=t.Pts)},o.Clipper.prototype.DoSimplePolygons=function(){for(var t=0;t<this.m_PolyOuts.length;){var e=this.m_PolyOuts[t++],i=e.Pts;if(null!==i)do{for(var n=i.Next;n!=e.Pts;){if(o.IntPoint.op_Equality(i.Pt,n.Pt)&&n.Next!=i&&n.Prev!=i){var r=i.Prev,a=n.Prev;i.Prev=a,a.Next=i,n.Prev=r,r.Next=n,e.Pts=i;var s=this.CreateOutRec();s.Pts=n,this.UpdateOutPtIdxs(s),this.Poly2ContainsPoly1(s.Pts,e.Pts)?(s.IsHole=!e.IsHole,s.FirstLeft=e):this.Poly2ContainsPoly1(e.Pts,s.Pts)?(s.IsHole=e.IsHole,e.IsHole=!s.IsHole,s.FirstLeft=e.FirstLeft,e.FirstLeft=s):(s.IsHole=e.IsHole,s.FirstLeft=e.FirstLeft),n=i}n=n.Next}i=i.Next}while(i!=e.Pts)}},o.Clipper.Area=function(t){var e=t.length;if(e<3)return 0;for(var i=0,n=0,r=e-1;n<e;++n)i+=(t[r].X+t[n].X)*(t[r].Y-t[n].Y),r=n;return.5*-i},o.Clipper.prototype.Area=function(t){var e=t.Pts;if(null==e)return 0;var i=0;do{i+=(e.Prev.Pt.X+e.Pt.X)*(e.Prev.Pt.Y-e.Pt.Y),e=e.Next}while(e!=t.Pts);return.5*i},o.Clipper.SimplifyPolygon=function(t,e){var i=new Array,n=new o.Clipper(0);return n.StrictlySimple=!0,n.AddPath(t,o.PolyType.ptSubject,!0),n.Execute(o.ClipType.ctUnion,i,e,e),i},o.Clipper.SimplifyPolygons=function(t,e){typeof e>"u"&&(e=o.PolyFillType.pftEvenOdd);var i=new Array,n=new o.Clipper(0);return n.StrictlySimple=!0,n.AddPaths(t,o.PolyType.ptSubject,!0),n.Execute(o.ClipType.ctUnion,i,e,e),i},o.Clipper.DistanceSqrd=function(t,e){var i=t.X-e.X,n=t.Y-e.Y;return i*i+n*n},o.Clipper.DistanceFromLineSqrd=function(t,e,i){var n=e.Y-i.Y,r=i.X-e.X,o=n*e.X+r*e.Y;return(o=n*t.X+r*t.Y-o)*o/(n*n+r*r)},o.Clipper.SlopesNearCollinear=function(t,e,i,n){return o.Clipper.DistanceFromLineSqrd(e,t,i)<n},o.Clipper.PointsAreClose=function(t,e,i){var n=t.X-e.X,r=t.Y-e.Y;return n*n+r*r<=i},o.Clipper.ExcludeOp=function(t){var e=t.Prev;return e.Next=t.Next,t.Next.Prev=e,e.Idx=0,e},o.Clipper.CleanPolygon=function(t,e){typeof e>"u"&&(e=1.415);var i=t.length;if(0==i)return new Array;for(var n=new Array(i),r=0;r<i;++r)n[r]=new o.OutPt;for(r=0;r<i;++r)n[r].Pt=t[r],n[r].Next=n[(r+1)%i],n[r].Next.Prev=n[r],n[r].Idx=0;for(var a=e*e,s=n[0];0==s.Idx&&s.Next!=s.Prev;)o.Clipper.PointsAreClose(s.Pt,s.Prev.Pt,a)?(s=o.Clipper.ExcludeOp(s),i--):o.Clipper.PointsAreClose(s.Prev.Pt,s.Next.Pt,a)?(o.Clipper.ExcludeOp(s.Next),s=o.Clipper.ExcludeOp(s),i-=2):o.Clipper.SlopesNearCollinear(s.Prev.Pt,s.Pt,s.Next.Pt,a)?(s=o.Clipper.ExcludeOp(s),i--):(s.Idx=1,s=s.Next);i<3&&(i=0);var l=new Array(i);for(r=0;r<i;++r)l[r]=new o.IntPoint(s.Pt),s=s.Next;return n=null,l},o.Clipper.CleanPolygons=function(t,e){for(var i=new Array(t.length),n=0,r=t.length;n<r;n++)i[n]=o.Clipper.CleanPolygon(t[n],e);return i},o.Clipper.Minkowski=function(t,e,i,n){var r=n?1:0,a=t.length,s=e.length,l=new Array;if(i)for(var h=0;h<s;h++){for(var u=new Array(a),c=0,p=t.length,d=t[c];c<p;d=t[++c])u[c]=new o.IntPoint(e[h].X+d.X,e[h].Y+d.Y);l.push(u)}else for(h=0;h<s;h++){for(u=new Array(a),c=0,p=t.length,d=t[c];c<p;d=t[++c])u[c]=new o.IntPoint(e[h].X-d.X,e[h].Y-d.Y);l.push(u)}var f=new Array;for(h=0;h<s-1+r;h++)for(c=0;c<a;c++){var g=new Array;g.push(l[h%s][c%a]),g.push(l[(h+1)%s][c%a]),g.push(l[(h+1)%s][(c+1)%a]),g.push(l[h%s][(c+1)%a]),o.Clipper.Orientation(g)||g.reverse(),f.push(g)}var m=new o.Clipper(0);return m.AddPaths(f,o.PolyType.ptSubject,!0),m.Execute(o.ClipType.ctUnion,l,o.PolyFillType.pftNonZero,o.PolyFillType.pftNonZero),l},o.Clipper.MinkowskiSum=function(){var t=arguments,e=t.length;if(3==e){var i=t[0],n=t[1],r=t[2];return o.Clipper.Minkowski(i,n,!0,r)}if(4==e){i=t[0];for(var a=t[1],s=t[2],l=(r=t[3],new o.Clipper),h=0,u=a.length;h<u;++h){var c=o.Clipper.Minkowski(i,a[h],!0,r);l.AddPaths(c,o.PolyType.ptSubject,!0)}r&&l.AddPaths(a,o.PolyType.ptClip,!0);var p=new o.Paths;return l.Execute(o.ClipType.ctUnion,p,s,s),p}},o.Clipper.MinkowskiDiff=function(t,e,i){return o.Clipper.Minkowski(t,e,!1,i)},o.Clipper.PolyTreeToPaths=function(t){var e=new Array;return o.Clipper.AddPolyNodeToPaths(t,o.Clipper.NodeType.ntAny,e),e},o.Clipper.AddPolyNodeToPaths=function(t,e,i){var n=!0;switch(e){case o.Clipper.NodeType.ntOpen:return;case o.Clipper.NodeType.ntClosed:n=!t.IsOpen}t.m_polygon.length>0&&n&&i.push(t.m_polygon);for(var r=0,a=t.Childs(),s=a.length,l=a[r];r<s;l=a[++r])o.Clipper.AddPolyNodeToPaths(l,e,i)},o.Clipper.OpenPathsFromPolyTree=function(t){for(var e=new o.Paths,i=0,n=t.ChildCount();i<n;i++)t.Childs()[i].IsOpen&&e.push(t.Childs()[i].m_polygon);return e},o.Clipper.ClosedPathsFromPolyTree=function(t){var e=new o.Paths;return o.Clipper.AddPolyNodeToPaths(t,o.Clipper.NodeType.ntClosed,e),e},de(o.Clipper,o.ClipperBase),o.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},o.ClipperOffset=function(t,e){typeof t>"u"&&(t=2),typeof e>"u"&&(e=o.ClipperOffset.def_arc_tolerance),this.m_destPolys=new o.Paths,this.m_srcPoly=new o.Path,this.m_destPoly=new o.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new o.IntPoint,this.m_polyNodes=new o.PolyNode,this.MiterLimit=t,this.ArcTolerance=e,this.m_lowest.X=-1},o.ClipperOffset.two_pi=6.28318530717959,o.ClipperOffset.def_arc_tolerance=.25,o.ClipperOffset.prototype.Clear=function(){o.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},o.ClipperOffset.Round=o.Clipper.Round,o.ClipperOffset.prototype.AddPath=function(t,e,i){var n=t.length-1;if(!(n<0)){var r=new o.PolyNode;if(r.m_jointype=e,r.m_endtype=i,i==o.EndType.etClosedLine||i==o.EndType.etClosedPolygon)for(;n>0&&o.IntPoint.op_Equality(t[0],t[n]);)n--;r.m_polygon.push(t[0]);for(var a=0,s=0,l=1;l<=n;l++)o.IntPoint.op_Inequality(r.m_polygon[a],t[l])&&(a++,r.m_polygon.push(t[l]),(t[l].Y>r.m_polygon[s].Y||t[l].Y==r.m_polygon[s].Y&&t[l].X<r.m_polygon[s].X)&&(s=a));if(!(i==o.EndType.etClosedPolygon&&a<2||i!=o.EndType.etClosedPolygon&&a<0)&&(this.m_polyNodes.AddChild(r),i==o.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new o.IntPoint(0,s);else{var h=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(r.m_polygon[s].Y>h.Y||r.m_polygon[s].Y==h.Y&&r.m_polygon[s].X<h.X)&&(this.m_lowest=new o.IntPoint(this.m_polyNodes.ChildCount()-1,s))}}},o.ClipperOffset.prototype.AddPaths=function(t,e,i){for(var n=0,r=t.length;n<r;n++)this.AddPath(t[n],e,i)},o.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!o.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var t=0;t<this.m_polyNodes.ChildCount();t++)((e=this.m_polyNodes.Childs()[t]).m_endtype==o.EndType.etClosedPolygon||e.m_endtype==o.EndType.etClosedLine&&o.Clipper.Orientation(e.m_polygon))&&e.m_polygon.reverse();else for(t=0;t<this.m_polyNodes.ChildCount();t++){var e;(e=this.m_polyNodes.Childs()[t]).m_endtype==o.EndType.etClosedLine&&!o.Clipper.Orientation(e.m_polygon)&&e.m_polygon.reverse()}},o.ClipperOffset.GetUnitNormal=function(t,e){var i=e.X-t.X,n=e.Y-t.Y;if(0==i&&0==n)return new o.DoublePoint(0,0);var r=1/Math.sqrt(i*i+n*n);return i*=r,n*=r,new o.DoublePoint(n,-i)},o.ClipperOffset.prototype.DoOffset=function(t){if(this.m_destPolys=new Array,this.m_delta=t,o.ClipperBase.near_zero(t))for(var e=0;e<this.m_polyNodes.ChildCount();e++)(r=this.m_polyNodes.Childs()[e]).m_endtype==o.EndType.etClosedPolygon&&this.m_destPolys.push(r.m_polygon);else{var i;this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5,i=this.ArcTolerance<=0?o.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(t)*o.ClipperOffset.def_arc_tolerance?Math.abs(t)*o.ClipperOffset.def_arc_tolerance:this.ArcTolerance;var n=3.14159265358979/Math.acos(1-i/Math.abs(t));for(this.m_sin=Math.sin(o.ClipperOffset.two_pi/n),this.m_cos=Math.cos(o.ClipperOffset.two_pi/n),this.m_StepsPerRad=n/o.ClipperOffset.two_pi,t<0&&(this.m_sin=-this.m_sin),e=0;e<this.m_polyNodes.ChildCount();e++){var r=this.m_polyNodes.Childs()[e];this.m_srcPoly=r.m_polygon;var a=this.m_srcPoly.length;if(!(0==a||t<=0&&(a<3||r.m_endtype!=o.EndType.etClosedPolygon))){if(this.m_destPoly=new Array,1==a){if(r.m_jointype==o.JoinType.jtRound)for(var s=1,l=0,h=1;h<=n;h++){this.m_destPoly.push(new o.IntPoint(o.ClipperOffset.Round(this.m_srcPoly[0].X+s*t),o.ClipperOffset.Round(this.m_srcPoly[0].Y+l*t)));var u=s;s=s*this.m_cos-this.m_sin*l,l=u*this.m_sin+l*this.m_cos}else for(s=-1,l=-1,h=0;h<4;++h)this.m_destPoly.push(new o.IntPoint(o.ClipperOffset.Round(this.m_srcPoly[0].X+s*t),o.ClipperOffset.Round(this.m_srcPoly[0].Y+l*t))),s<0?s=1:l<0?l=1:s=-1;this.m_destPolys.push(this.m_destPoly);continue}for(this.m_normals.length=0,h=0;h<a-1;h++)this.m_normals.push(o.ClipperOffset.GetUnitNormal(this.m_srcPoly[h],this.m_srcPoly[h+1]));if(r.m_endtype==o.EndType.etClosedLine||r.m_endtype==o.EndType.etClosedPolygon?this.m_normals.push(o.ClipperOffset.GetUnitNormal(this.m_srcPoly[a-1],this.m_srcPoly[0])):this.m_normals.push(new o.DoublePoint(this.m_normals[a-2])),r.m_endtype==o.EndType.etClosedPolygon){var c=a-1;for(h=0;h<a;h++)c=this.OffsetPoint(h,c,r.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(r.m_endtype==o.EndType.etClosedLine){for(c=a-1,h=0;h<a;h++)c=this.OffsetPoint(h,c,r.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;var p=this.m_normals[a-1];for(h=a-1;h>0;h--)this.m_normals[h]=new o.DoublePoint(-this.m_normals[h-1].X,-this.m_normals[h-1].Y);for(this.m_normals[0]=new o.DoublePoint(-p.X,-p.Y),c=0,h=a-1;h>=0;h--)c=this.OffsetPoint(h,c,r.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(c=0,h=1;h<a-1;++h)c=this.OffsetPoint(h,c,r.m_jointype);var d;for(r.m_endtype==o.EndType.etOpenButt?(h=a-1,d=new o.IntPoint(o.ClipperOffset.Round(this.m_srcPoly[h].X+this.m_normals[h].X*t),o.ClipperOffset.Round(this.m_srcPoly[h].Y+this.m_normals[h].Y*t)),this.m_destPoly.push(d),d=new o.IntPoint(o.ClipperOffset.Round(this.m_srcPoly[h].X-this.m_normals[h].X*t),o.ClipperOffset.Round(this.m_srcPoly[h].Y-this.m_normals[h].Y*t)),this.m_destPoly.push(d)):(h=a-1,c=a-2,this.m_sinA=0,this.m_normals[h]=new o.DoublePoint(-this.m_normals[h].X,-this.m_normals[h].Y),r.m_endtype==o.EndType.etOpenSquare?this.DoSquare(h,c):this.DoRound(h,c)),h=a-1;h>0;h--)this.m_normals[h]=new o.DoublePoint(-this.m_normals[h-1].X,-this.m_normals[h-1].Y);for(this.m_normals[0]=new o.DoublePoint(-this.m_normals[1].X,-this.m_normals[1].Y),h=(c=a-1)-1;h>0;--h)c=this.OffsetPoint(h,c,r.m_jointype);r.m_endtype==o.EndType.etOpenButt?(d=new o.IntPoint(o.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*t),o.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*t)),this.m_destPoly.push(d),d=new o.IntPoint(o.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*t),o.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*t)),this.m_destPoly.push(d)):(c=1,this.m_sinA=0,r.m_endtype==o.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}}}},o.ClipperOffset.prototype.Execute=function(){var t=arguments;if(t[0]instanceof o.PolyTree){var e=t[0],i=t[1];if(e.Clear(),this.FixOrientations(),this.DoOffset(i),(s=new o.Clipper(0)).AddPaths(this.m_destPolys,o.PolyType.ptSubject,!0),i>0)s.Execute(o.ClipType.ctUnion,e,o.PolyFillType.pftPositive,o.PolyFillType.pftPositive);else{var n=o.Clipper.GetBounds(this.m_destPolys);if((l=new o.Path).push(new o.IntPoint(n.left-10,n.bottom+10)),l.push(new o.IntPoint(n.right+10,n.bottom+10)),l.push(new o.IntPoint(n.right+10,n.top-10)),l.push(new o.IntPoint(n.left-10,n.top-10)),s.AddPath(l,o.PolyType.ptSubject,!0),s.ReverseSolution=!0,s.Execute(o.ClipType.ctUnion,e,o.PolyFillType.pftNegative,o.PolyFillType.pftNegative),1==e.ChildCount()&&e.Childs()[0].ChildCount()>0){var r=e.Childs()[0];e.Childs()[0]=r.Childs()[0];for(var a=1;a<r.ChildCount();a++)e.AddChild(r.Childs()[a])}else e.Clear()}}else{var s,l;if(e=t[0],i=t[1],o.Clear(e),this.FixOrientations(),this.DoOffset(i),(s=new o.Clipper(0)).AddPaths(this.m_destPolys,o.PolyType.ptSubject,!0),i>0)s.Execute(o.ClipType.ctUnion,e,o.PolyFillType.pftPositive,o.PolyFillType.pftPositive);else n=o.Clipper.GetBounds(this.m_destPolys),(l=new o.Path).push(new o.IntPoint(n.left-10,n.bottom+10)),l.push(new o.IntPoint(n.right+10,n.bottom+10)),l.push(new o.IntPoint(n.right+10,n.top-10)),l.push(new o.IntPoint(n.left-10,n.top-10)),s.AddPath(l,o.PolyType.ptSubject,!0),s.ReverseSolution=!0,s.Execute(o.ClipType.ctUnion,e,o.PolyFillType.pftNegative,o.PolyFillType.pftNegative),e.length>0&&e.splice(0,1)}},o.ClipperOffset.prototype.OffsetPoint=function(t,e,i){if(this.m_sinA=this.m_normals[e].X*this.m_normals[t].Y-this.m_normals[t].X*this.m_normals[e].Y,this.m_sinA<5e-5&&this.m_sinA>-5e-5)return e;if(this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1),this.m_sinA*this.m_delta<0)this.m_destPoly.push(new o.IntPoint(o.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[e].X*this.m_delta),o.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[e].Y*this.m_delta))),this.m_destPoly.push(new o.IntPoint(this.m_srcPoly[t])),this.m_destPoly.push(new o.IntPoint(o.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),o.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)));else switch(i){case o.JoinType.jtMiter:var n=this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y+1;n>=this.m_miterLim?this.DoMiter(t,e,n):this.DoSquare(t,e);break;case o.JoinType.jtSquare:this.DoSquare(t,e);break;case o.JoinType.jtRound:this.DoRound(t,e)}return t},o.ClipperOffset.prototype.DoSquare=function(t,e){var i=Math.tan(Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y)/4);this.m_destPoly.push(new o.IntPoint(o.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[e].X-this.m_normals[e].Y*i)),o.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[e].Y+this.m_normals[e].X*i)))),this.m_destPoly.push(new o.IntPoint(o.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[t].X+this.m_normals[t].Y*i)),o.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[t].Y-this.m_normals[t].X*i))))},o.ClipperOffset.prototype.DoMiter=function(t,e,i){var n=this.m_delta/i;this.m_destPoly.push(new o.IntPoint(o.ClipperOffset.Round(this.m_srcPoly[t].X+(this.m_normals[e].X+this.m_normals[t].X)*n),o.ClipperOffset.Round(this.m_srcPoly[t].Y+(this.m_normals[e].Y+this.m_normals[t].Y)*n)))},o.ClipperOffset.prototype.DoRound=function(t,e){for(var i,n=Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y),r=o.Cast_Int32(o.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(n))),a=this.m_normals[e].X,s=this.m_normals[e].Y,l=0;l<r;++l)this.m_destPoly.push(new o.IntPoint(o.ClipperOffset.Round(this.m_srcPoly[t].X+a*this.m_delta),o.ClipperOffset.Round(this.m_srcPoly[t].Y+s*this.m_delta))),i=a,a=a*this.m_cos-this.m_sin*s,s=i*this.m_sin+s*this.m_cos;this.m_destPoly.push(new o.IntPoint(o.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),o.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)))},o.Error=function(t){try{throw new Error(t)}catch(t){alert(t.message)}},o.JS={},o.JS.AreaOfPolygon=function(t,e){return e||(e=1),o.Clipper.Area(t)/(e*e)},o.JS.AreaOfPolygons=function(t,e){e||(e=1);for(var i=0,n=0;n<t.length;n++)i+=o.Clipper.Area(t[n]);return i/(e*e)},o.JS.BoundsOfPath=function(t,e){return o.JS.BoundsOfPaths([t],e)},o.JS.BoundsOfPaths=function(t,e){e||(e=1);var i=o.Clipper.GetBounds(t);return i.left/=e,i.bottom/=e,i.right/=e,i.top/=e,i},o.JS.Clean=function(t,e){if(!(t instanceof Array))return[];var i=t[0]instanceof Array;if(t=o.JS.Clone(t),"number"!=typeof e||null===e)return o.Error("Delta is not a number in Clean()."),t;if(0===t.length||1==t.length&&0===t[0].length||e<0)return t;i||(t=[t]);for(var n,r,a,s,l,h,u,c=t.length,p=[],d=0;d<c;d++)if(0!==(n=(r=t[d]).length)){if(n<3){a=r,p.push(a);continue}for(a=r,s=e*e,l=r[0],h=1,u=1;u<n;u++)(r[u].X-l.X)*(r[u].X-l.X)+(r[u].Y-l.Y)*(r[u].Y-l.Y)<=s||(a[h]=r[u],l=r[u],h++);l=r[h-1],(r[0].X-l.X)*(r[0].X-l.X)+(r[0].Y-l.Y)*(r[0].Y-l.Y)<=s&&h--,h<n&&a.splice(h,n-h),a.length&&p.push(a)}return!i&&p.length?p=p[0]:i||0!==p.length?i&&0===p.length&&(p=[[]]):p=[],p},o.JS.Clone=function(t){if(!(t instanceof Array))return[];if(0===t.length)return[];if(1==t.length&&0===t[0].length)return[[]];var e=t[0]instanceof Array;e||(t=[t]);var i,n,r,o,a=t.length,s=new Array(a);for(n=0;n<a;n++){for(i=t[n].length,o=new Array(i),r=0;r<i;r++)o[r]={X:t[n][r].X,Y:t[n][r].Y};s[n]=o}return e||(s=s[0]),s},o.JS.Lighten=function(t,e){if(!(t instanceof Array))return[];if("number"!=typeof e||null===e)return o.Error("Tolerance is not a number in Lighten()."),o.JS.Clone(t);if(0===t.length||1==t.length&&0===t[0].length||e<0)return o.JS.Clone(t);t[0]instanceof Array||(t=[t]);var i,n,r,a,s,l,h,u,c,p,d,f,g,m,v,y,_=t.length,x=e*e,b=[];for(i=0;i<_;i++)if(0!=(l=(r=t[i]).length)){for(a=0;a<1e6;a++){for(s=[],r[(l=r.length)-1].X!=r[0].X||r[l-1].Y!=r[0].Y?(d=1,r.push({X:r[0].X,Y:r[0].Y}),l=r.length):d=0,p=[],n=0;n<l-2;n++)h=r[n],c=r[n+1],u=r[n+2],v=h.X,y=h.Y,f=u.X-v,g=u.Y-y,(0!==f||0!==g)&&((m=((c.X-v)*f+(c.Y-y)*g)/(f*f+g*g))>1?(v=u.X,y=u.Y):m>0&&(v+=f*m,y+=g*m)),(f=c.X-v)*f+(g=c.Y-y)*g<=x&&(p[n+1]=1,n++);for(s.push({X:r[0].X,Y:r[0].Y}),n=1;n<l-1;n++)p[n]||s.push({X:r[n].X,Y:r[n].Y});if(s.push({X:r[l-1].X,Y:r[l-1].Y}),d&&r.pop(),!p.length)break;r=s}s[(l=s.length)-1].X==s[0].X&&s[l-1].Y==s[0].Y&&s.pop(),s.length>2&&b.push(s)}return!t[0]instanceof Array&&(b=b[0]),typeof b>"u"&&(b=[[]]),b},o.JS.PerimeterOfPath=function(t,e,i){if(typeof t>"u")return 0;var n,r,o=Math.sqrt,a=0,s=0,l=0,h=0,u=0,c=t.length;if(c<2)return 0;for(e&&(t[c]=t[0],c++);--c;)s=(n=t[c]).X,l=n.Y,a+=o((s-(h=(r=t[c-1]).X))*(s-h)+(l-(u=r.Y))*(l-u));return e&&t.pop(),a/i},o.JS.PerimeterOfPaths=function(t,e,i){i||(i=1);for(var n=0,r=0;r<t.length;r++)n+=o.JS.PerimeterOfPath(t[r],e,i);return n},o.JS.ScaleDownPath=function(t,e){var i,n;for(e||(e=1),i=t.length;i--;)(n=t[i]).X=n.X/e,n.Y=n.Y/e},o.JS.ScaleDownPaths=function(t,e){var i,n,r;for(Math.round,e||(e=1),i=t.length;i--;)for(n=t[i].length;n--;)(r=t[i][n]).X=r.X/e,r.Y=r.Y/e},o.JS.ScaleUpPath=function(t,e){var i,n,r=Math.round;for(e||(e=1),i=t.length;i--;)(n=t[i]).X=r(n.X*e),n.Y=r(n.Y*e)},o.JS.ScaleUpPaths=function(t,e){var i,n,r,o=Math.round;for(e||(e=1),i=t.length;i--;)for(n=t[i].length;n--;)(r=t[i][n]).X=o(r.X*e),r.Y=o(r.Y*e)},o.ExPolygons=function(){return[]},o.ExPolygon=function(){this.outer=null,this.holes=null},o.JS.AddOuterPolyNodeToExPolygons=function(t,e){var i=new o.ExPolygon;i.outer=t.Contour();var n,r,a,s,l,h,u=t.Childs(),c=u.length;for(i.holes=new Array(c),a=0;a<c;a++)for(n=u[a],i.holes[a]=n.Contour(),s=0,h=(l=n.Childs()).length;s<h;s++)r=l[s],o.JS.AddOuterPolyNodeToExPolygons(r,e);e.push(i)},o.JS.ExPolygonsToPaths=function(t){var e,i,n,r,a=new o.Paths;for(e=0,n=t.length;e<n;e++)for(a.push(t[e].outer),i=0,r=t[e].holes.length;i<r;i++)a.push(t[e].holes[i]);return a},o.JS.PolyTreeToExPolygons=function(t){var e,i,n,r,a=new o.ExPolygons;for(i=0,r=(n=t.Childs()).length;i<r;i++)e=n[i],o.JS.AddOuterPolyNodeToExPolygons(e,a);return a},e.exports=o}),ce=(0,r.c)((t,e)=>{"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}(0,n.a)(),(0,r.a)(i,"_classCallCheck"),(0,r.a)(o,"_defineProperties"),(0,r.a)(a,"_createClass");var s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.R,r=void 0===n?1:n,o=e.Q,a=void 0===o?1:o,s=e.A,l=void 0===s?1:s,h=e.B,u=void 0===h?0:h,c=e.C,p=void 0===c?1:c;i(this,t),this.R=r,this.Q=a,this.A=l,this.C=p,this.B=u,this.cov=NaN,this.x=NaN}return(0,r.a)(t,"KalmanFilter"),a(t,[{key:"filter",value:(0,r.a)(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(isNaN(this.x))this.x=1/this.C*t,this.cov=1/this.C*this.Q*(1/this.C);else{var i=this.predict(e),n=this.uncertainty(),r=n*this.C*(1/(this.C*n*this.C+this.Q));this.x=i+r*(t-this.C*i),this.cov=n-r*this.C*n}return this.x},"filter")},{key:"predict",value:(0,r.a)(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.A*this.x+this.B*t},"predict")},{key:"uncertainty",value:(0,r.a)(function(){return this.A*this.cov*this.A+this.R},"uncertainty")},{key:"lastMeasurement",value:(0,r.a)(function(){return this.x},"lastMeasurement")},{key:"setMeasurementNoise",value:(0,r.a)(function(t){this.Q=t},"setMeasurementNoise")},{key:"setProcessNoise",value:(0,r.a)(function(t){this.R=t},"setProcessNoise")}]),t}();e.exports=s}),pe=(0,r.c)((t,e)=>{"use strict";(0,n.a)(),e.exports=(0,r.a)(function(t){if(!Array.isArray(t))throw new TypeError("array-unique expects an array.");for(var e=t.length,i=-1;i++<e;)for(var n=i+1;n<t.length;++n)t[i]===t[n]&&t.splice(n--,1);return t},"unique"),e.exports.immutable=(0,r.a)(function(t){if(!Array.isArray(t))throw new TypeError("array-unique expects an array.");for(var i=t.length,n=new Array(i),r=0;r<i;r++)n[r]=t[r];return e.exports(n)},"uniqueImmutable")}),de=(0,r.c)((e,i)=>{var o,a;(0,n.a)(),o=e,a=function(){var t=(0,r.a)(function(){function e(t){return o.appendChild(t.dom),t}function i(t){for(var e=0;e<o.children.length;e++)o.children[e].style.display=e===t?"block":"none";n=t}(0,r.a)(e,"e"),(0,r.a)(i,"u");var n=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(t){t.preventDefault(),i(++n%o.children.length)},!1);var a=(performance||Date).now(),s=a,l=0,h=e(new t.Panel("FPS","#0ff","#002")),u=e(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=e(new t.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:o,addPanel:e,showPanel:i,begin:function(){a=(performance||Date).now()},end:function(){l++;var t=(performance||Date).now();if(u.update(t-a,200),t>s+1e3&&(h.update(1e3*l/(t-s),100),s=t,l=0,c)){var e=performance.memory;c.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){a=this.end()},domElement:o,setMode:i}},"f");return t.Panel=function(t,e,i){var n=1/0,r=0,o=Math.round,a=o(window.devicePixelRatio||1),s=80*a,l=48*a,h=3*a,u=2*a,c=3*a,p=15*a,d=74*a,f=30*a,g=document.createElement("canvas");g.width=s,g.height=l,g.style.cssText="width:80px;height:48px";var m=g.getContext("2d");return m.font="bold "+9*a+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=i,m.fillRect(0,0,s,l),m.fillStyle=e,m.fillText(t,h,u),m.fillRect(c,p,d,f),m.fillStyle=i,m.globalAlpha=.9,m.fillRect(c,p,d,f),{dom:g,update:function(l,v){n=Math.min(n,l),r=Math.max(r,l),m.fillStyle=i,m.globalAlpha=1,m.fillRect(0,0,s,p),m.fillStyle=e,m.fillText(o(l)+" "+t+" ("+o(n)+"-"+o(r)+")",h,u),m.drawImage(g,c+a,p,d-a,f,c,p,d-a,f),m.fillRect(c+d-a,p,a,f),m.fillStyle=i,m.globalAlpha=.9,m.fillRect(c+d-a,p,a,o((1-l/v)*f))}}},t},"object"==typeof e&&typeof i<"u"?i.exports=a():"function"==typeof t&&t.amd?t(a):o.Stats=a()}),fe=(0,r.c)((e,i)=>{var o,a;(0,n.a)(),o=e,a=function(){"use strict";let{entries:t,setPrototypeOf:e,isFrozen:i,getPrototypeOf:n,getOwnPropertyDescriptor:o}=Object,{freeze:a,seal:s,create:l}=Object,{apply:h,construct:u}=typeof Reflect<"u"&&Reflect;a||(a=(0,r.a)(function(t){return t},"freeze")),s||(s=(0,r.a)(function(t){return t},"seal")),h||(h=(0,r.a)(function(t,e,i){return t.apply(e,i)},"apply")),u||(u=(0,r.a)(function(t,e){return new t(...e)},"construct"));let c=w(Array.prototype.forEach),p=w(Array.prototype.pop),d=w(Array.prototype.push),f=w(String.prototype.toLowerCase),g=w(String.prototype.toString),m=w(String.prototype.match),v=w(String.prototype.replace),y=w(String.prototype.indexOf),_=w(String.prototype.trim),x=w(RegExp.prototype.test),b=E(TypeError);function w(t){return function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return h(t,e,n)}}function E(t){return function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return u(t,i)}}function M(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;e&&e(t,null);let o=n.length;for(;o--;){let e=n[o];if("string"==typeof e){let t=r(e);t!==e&&(i(n)||(n[o]=t),e=t)}t[e]=!0}return t}function S(e){let i=l(null);for(let[n,r]of t(e))void 0!==o(e,n)&&(i[n]=r);return i}function T(t,e){for(;null!==t;){let i=o(t,e);if(i){if(i.get)return w(i.get);if("function"==typeof i.value)return w(i.value)}t=n(t)}function i(t){return console.warn("fallback value for",t),null}return(0,r.a)(i,"fallbackValue"),i}(0,r.a)(w,"unapply"),(0,r.a)(E,"unconstruct"),(0,r.a)(M,"addToSet"),(0,r.a)(S,"clone"),(0,r.a)(T,"lookupGetter");let C=a(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),A=a(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),P=a(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),I=a(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),L=a(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),O=a(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),N=a(["#text"]),q=a(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),R=a(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),D=a(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),k=a(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),B=s(/\{\{[\w\W]*|[\w\W]*\}\}/gm),F=s(/<%[\w\W]*|[\w\W]*%>/gm),U=s(/\${[\w\W]*}/gm),z=s(/^data-[\-\w.\u00B7-\uFFFF]/),V=s(/^aria-[\-\w]+$/),j=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),G=s(/^(?:\w+script|data):/i),H=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),W=s(/^html$/i);var X=Object.freeze({__proto__:null,MUSTACHE_EXPR:B,ERB_EXPR:F,TMPLIT_EXPR:U,DATA_ATTR:z,ARIA_ATTR:V,IS_ALLOWED_URI:j,IS_SCRIPT_OR_DATA:G,ATTR_WHITESPACE:H,DOCTYPE_NAME:W});let Y=(0,r.a)(function(){return typeof window>"u"?null:window},"getGlobal"),Z=(0,r.a)(function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let i=null,n="data-tt-policy-suffix";e&&e.hasAttribute(n)&&(i=e.getAttribute(n));let r="dompurify"+(i?"#"+i:"");try{return t.createPolicy(r,{createHTML:t=>t,createScriptURL:t=>t})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}},"_createTrustedTypesPolicy");function J(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y(),i=(0,r.a)(t=>J(t),"DOMPurify");if(i.version="3.0.6",i.removed=[],!e||!e.document||9!==e.document.nodeType)return i.isSupported=!1,i;let{document:n}=e,o=n,s=o.currentScript,{DocumentFragment:h,HTMLTemplateElement:u,Node:w,Element:E,NodeFilter:B,NamedNodeMap:F=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:U,DOMParser:z,trustedTypes:V}=e,G=E.prototype,H=T(G,"cloneNode"),K=T(G,"nextSibling"),Q=T(G,"childNodes"),$=T(G,"parentNode");if("function"==typeof u){let t=n.createElement("template");t.content&&t.content.ownerDocument&&(n=t.content.ownerDocument)}let tt,et="",{implementation:it,createNodeIterator:nt,createDocumentFragment:rt,getElementsByTagName:ot}=n,{importNode:at}=o,st={};i.isSupported="function"==typeof t&&"function"==typeof $&&it&&void 0!==it.createHTMLDocument;let{MUSTACHE_EXPR:lt,ERB_EXPR:ht,TMPLIT_EXPR:ut,DATA_ATTR:ct,ARIA_ATTR:pt,IS_SCRIPT_OR_DATA:dt,ATTR_WHITESPACE:ft}=X,{IS_ALLOWED_URI:gt}=X,mt=null,vt=M({},[...C,...A,...P,...L,...N]),yt=null,_t=M({},[...q,...R,...D,...k]),xt=Object.seal(l(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),bt=null,wt=null,Et=!0,Mt=!0,St=!1,Tt=!0,Ct=!1,At=!1,Pt=!1,It=!1,Lt=!1,Ot=!1,Nt=!1,qt=!0,Rt=!1,Dt=!0,kt=!1,Bt={},Ft=null,Ut=M({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),zt=null,Vt=M({},["audio","video","img","source","image","track"]),jt=null,Gt=M({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ht="http://www.w3.org/1998/Math/MathML",Wt="http://www.w3.org/2000/svg",Xt="http://www.w3.org/1999/xhtml",Yt=Xt,Zt=!1,Jt=null,Kt=M({},[Ht,Wt,Xt],g),Qt=null,$t=["application/xhtml+xml","text/html"],te=null,ee=null,ie=n.createElement("form"),ne=(0,r.a)(function(t){return t instanceof RegExp||t instanceof Function},"isRegexOrFunction"),re=(0,r.a)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ee||ee!==t){if((!t||"object"!=typeof t)&&(t={}),t=S(t),Qt=Qt=-1===$t.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,te="application/xhtml+xml"===Qt?g:f,mt="ALLOWED_TAGS"in t?M({},t.ALLOWED_TAGS,te):vt,yt="ALLOWED_ATTR"in t?M({},t.ALLOWED_ATTR,te):_t,Jt="ALLOWED_NAMESPACES"in t?M({},t.ALLOWED_NAMESPACES,g):Kt,jt="ADD_URI_SAFE_ATTR"in t?M(S(Gt),t.ADD_URI_SAFE_ATTR,te):Gt,zt="ADD_DATA_URI_TAGS"in t?M(S(Vt),t.ADD_DATA_URI_TAGS,te):Vt,Ft="FORBID_CONTENTS"in t?M({},t.FORBID_CONTENTS,te):Ut,bt="FORBID_TAGS"in t?M({},t.FORBID_TAGS,te):{},wt="FORBID_ATTR"in t?M({},t.FORBID_ATTR,te):{},Bt="USE_PROFILES"in t&&t.USE_PROFILES,Et=!1!==t.ALLOW_ARIA_ATTR,Mt=!1!==t.ALLOW_DATA_ATTR,St=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Tt=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,Ct=t.SAFE_FOR_TEMPLATES||!1,At=t.WHOLE_DOCUMENT||!1,Lt=t.RETURN_DOM||!1,Ot=t.RETURN_DOM_FRAGMENT||!1,Nt=t.RETURN_TRUSTED_TYPE||!1,It=t.FORCE_BODY||!1,qt=!1!==t.SANITIZE_DOM,Rt=t.SANITIZE_NAMED_PROPS||!1,Dt=!1!==t.KEEP_CONTENT,kt=t.IN_PLACE||!1,gt=t.ALLOWED_URI_REGEXP||j,Yt=t.NAMESPACE||Xt,xt=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&ne(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(xt.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&ne(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(xt.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(xt.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ct&&(Mt=!1),Ot&&(Lt=!0),Bt&&(mt=M({},[...N]),yt=[],!0===Bt.html&&(M(mt,C),M(yt,q)),!0===Bt.svg&&(M(mt,A),M(yt,R),M(yt,k)),!0===Bt.svgFilters&&(M(mt,P),M(yt,R),M(yt,k)),!0===Bt.mathMl&&(M(mt,L),M(yt,D),M(yt,k))),t.ADD_TAGS&&(mt===vt&&(mt=S(mt)),M(mt,t.ADD_TAGS,te)),t.ADD_ATTR&&(yt===_t&&(yt=S(yt)),M(yt,t.ADD_ATTR,te)),t.ADD_URI_SAFE_ATTR&&M(jt,t.ADD_URI_SAFE_ATTR,te),t.FORBID_CONTENTS&&(Ft===Ut&&(Ft=S(Ft)),M(Ft,t.FORBID_CONTENTS,te)),Dt&&(mt["#text"]=!0),At&&M(mt,["html","head","body"]),mt.table&&(M(mt,["tbody"]),delete bt.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw b('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw b('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');tt=t.TRUSTED_TYPES_POLICY,et=tt.createHTML("")}else void 0===tt&&(tt=Z(V,s)),null!==tt&&"string"==typeof et&&(et=tt.createHTML(""));a&&a(t),ee=t}},"_parseConfig"),oe=M({},["mi","mo","mn","ms","mtext"]),ae=M({},["foreignobject","desc","title","annotation-xml"]),se=M({},["title","style","font","a","script"]),le=M({},A);M(le,P),M(le,I);let he=M({},L);M(he,O);let ue=(0,r.a)(function(t){let e=$(t);(!e||!e.tagName)&&(e={namespaceURI:Yt,tagName:"template"});let i=f(t.tagName),n=f(e.tagName);return!!Jt[t.namespaceURI]&&(t.namespaceURI===Wt?e.namespaceURI===Xt?"svg"===i:e.namespaceURI===Ht?"svg"===i&&("annotation-xml"===n||oe[n]):!!le[i]:t.namespaceURI===Ht?e.namespaceURI===Xt?"math"===i:e.namespaceURI===Wt?"math"===i&&ae[n]:!!he[i]:t.namespaceURI===Xt?!(e.namespaceURI===Wt&&!ae[n]||e.namespaceURI===Ht&&!oe[n])&&!he[i]&&(se[i]||!le[i]):!("application/xhtml+xml"!==Qt||!Jt[t.namespaceURI]))},"_checkValidNamespace"),ce=(0,r.a)(function(t){d(i.removed,{element:t});try{t.parentNode.removeChild(t)}catch{t.remove()}},"_forceRemove"),pe=(0,r.a)(function(t,e){try{d(i.removed,{attribute:e.getAttributeNode(t),from:e})}catch{d(i.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!yt[t])if(Lt||Ot)try{ce(e)}catch{}else try{e.setAttribute(t,"")}catch{}},"_removeAttribute"),de=(0,r.a)(function(t){let e=null,i=null;if(It)t="<remove></remove>"+t;else{let e=m(t,/^[\r\n\t ]+/);i=e&&e[0]}"application/xhtml+xml"===Qt&&Yt===Xt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");let r=tt?tt.createHTML(t):t;if(Yt===Xt)try{e=(new z).parseFromString(r,Qt)}catch{}if(!e||!e.documentElement){e=it.createDocument(Yt,"template",null);try{e.documentElement.innerHTML=Zt?et:r}catch{}}let o=e.body||e.documentElement;return t&&i&&o.insertBefore(n.createTextNode(i),o.childNodes[0]||null),Yt===Xt?ot.call(e,At?"html":"body")[0]:At?e.documentElement:o},"_initDocument"),fe=(0,r.a)(function(t){return nt.call(t.ownerDocument||t,t,B.SHOW_ELEMENT|B.SHOW_COMMENT|B.SHOW_TEXT,null)},"_createNodeIterator"),ge=(0,r.a)(function(t){return t instanceof U&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof F)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)},"_isClobbered"),me=(0,r.a)(function(t){return"function"==typeof w&&t instanceof w},"_isNode"),ve=(0,r.a)(function(t,e,n){st[t]&&c(st[t],t=>{t.call(i,e,n,ee)})},"_executeHook"),ye=(0,r.a)(function(t){let e=null;if(ve("beforeSanitizeElements",t,null),ge(t))return ce(t),!0;let n=te(t.nodeName);if(ve("uponSanitizeElement",t,{tagName:n,allowedTags:mt}),t.hasChildNodes()&&!me(t.firstElementChild)&&x(/<[/\w]/g,t.innerHTML)&&x(/<[/\w]/g,t.textContent))return ce(t),!0;if(!mt[n]||bt[n]){if(!bt[n]&&xe(n)&&(xt.tagNameCheck instanceof RegExp&&x(xt.tagNameCheck,n)||xt.tagNameCheck instanceof Function&&xt.tagNameCheck(n)))return!1;if(Dt&&!Ft[n]){let e=$(t)||t.parentNode,i=Q(t)||t.childNodes;if(i&&e)for(let n=i.length-1;n>=0;--n)e.insertBefore(H(i[n],!0),K(t))}return ce(t),!0}return t instanceof E&&!ue(t)||("noscript"===n||"noembed"===n||"noframes"===n)&&x(/<\/no(script|embed|frames)/i,t.innerHTML)?(ce(t),!0):(Ct&&3===t.nodeType&&(e=t.textContent,c([lt,ht,ut],t=>{e=v(e,t," ")}),t.textContent!==e&&(d(i.removed,{element:t.cloneNode()}),t.textContent=e)),ve("afterSanitizeElements",t,null),!1)},"_sanitizeElements"),_e=(0,r.a)(function(t,e,i){if(qt&&("id"===e||"name"===e)&&(i in n||i in ie))return!1;if((!Mt||wt[e]||!x(ct,e))&&(!Et||!x(pt,e)))if(!yt[e]||wt[e]){if(!(xe(t)&&(xt.tagNameCheck instanceof RegExp&&x(xt.tagNameCheck,t)||xt.tagNameCheck instanceof Function&&xt.tagNameCheck(t))&&(xt.attributeNameCheck instanceof RegExp&&x(xt.attributeNameCheck,e)||xt.attributeNameCheck instanceof Function&&xt.attributeNameCheck(e))||"is"===e&&xt.allowCustomizedBuiltInElements&&(xt.tagNameCheck instanceof RegExp&&x(xt.tagNameCheck,i)||xt.tagNameCheck instanceof Function&&xt.tagNameCheck(i))))return!1}else if(!jt[e]&&!x(gt,v(i,ft,""))&&("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==y(i,"data:")||!zt[t])&&(!St||x(dt,v(i,ft,"")))&&i)return!1;return!0},"_isValidAttribute"),xe=(0,r.a)(function(t){return t.indexOf("-")>0},"_isBasicCustomElement"),be=(0,r.a)(function(t){ve("beforeSanitizeAttributes",t,null);let{attributes:e}=t;if(!e)return;let n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:yt},r=e.length;for(;r--;){let o=e[r],{name:a,namespaceURI:s,value:l}=o,h=te(a),u="value"===a?l:_(l);if(n.attrName=h,n.attrValue=u,n.keepAttr=!0,n.forceKeepAttr=void 0,ve("uponSanitizeAttribute",t,n),u=n.attrValue,n.forceKeepAttr||(pe(a,t),!n.keepAttr))continue;if(!Tt&&x(/\/>/i,u)){pe(a,t);continue}Ct&&c([lt,ht,ut],t=>{u=v(u,t," ")});let d=te(t.nodeName);if(_e(d,h,u)){if(Rt&&("id"===h||"name"===h)&&(pe(a,t),u="user-content-"+u),tt&&"object"==typeof V&&"function"==typeof V.getAttributeType&&!s)switch(V.getAttributeType(d,h)){case"TrustedHTML":u=tt.createHTML(u);break;case"TrustedScriptURL":u=tt.createScriptURL(u)}try{s?t.setAttributeNS(s,a,u):t.setAttribute(a,u),p(i.removed)}catch{}}}ve("afterSanitizeAttributes",t,null)},"_sanitizeAttributes"),we=(0,r.a)(function t(e){let i=null,n=fe(e);for(ve("beforeSanitizeShadowDOM",e,null);i=n.nextNode();)ve("uponSanitizeShadowNode",i,null),!ye(i)&&(i.content instanceof h&&t(i.content),be(i));ve("afterSanitizeShadowDOM",e,null)},"_sanitizeShadowDOM");return i.sanitize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null,a=null,s=null;if((Zt=!t)&&(t="\x3c!--\x3e"),"string"!=typeof t&&!me(t)){if("function"!=typeof t.toString)throw b("toString is not a function");if("string"!=typeof(t=t.toString()))throw b("dirty is not a string, aborting")}if(!i.isSupported)return t;if(Pt||re(e),i.removed=[],"string"==typeof t&&(kt=!1),kt){if(t.nodeName){let e=te(t.nodeName);if(!mt[e]||bt[e])throw b("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof w)1===(r=(n=de("\x3c!----\x3e")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===r.nodeName||"HTML"===r.nodeName?n=r:n.appendChild(r);else{if(!Lt&&!Ct&&!At&&-1===t.indexOf("<"))return tt&&Nt?tt.createHTML(t):t;if(!(n=de(t)))return Lt?null:Nt?et:""}n&&It&&ce(n.firstChild);let l=fe(kt?t:n);for(;a=l.nextNode();)ye(a)||(a.content instanceof h&&we(a.content),be(a));if(kt)return t;if(Lt){if(Ot)for(s=rt.call(n.ownerDocument);n.firstChild;)s.appendChild(n.firstChild);else s=n;return(yt.shadowroot||yt.shadowrootmode)&&(s=at.call(o,s,!0)),s}let u=At?n.outerHTML:n.innerHTML;return At&&mt["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&x(W,n.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+u),Ct&&c([lt,ht,ut],t=>{u=v(u,t," ")}),tt&&Nt?tt.createHTML(u):u},i.setConfig=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};re(t),Pt=!0},i.clearConfig=function(){ee=null,Pt=!1},i.isValidAttribute=function(t,e,i){ee||re({});let n=te(t),r=te(e);return _e(n,r,i)},i.addHook=function(t,e){"function"==typeof e&&(st[t]=st[t]||[],d(st[t],e))},i.removeHook=function(t){if(st[t])return p(st[t])},i.removeHooks=function(t){st[t]&&(st[t]=[])},i.removeAllHooks=function(){st={}},i}return(0,r.a)(J,"createDOMPurify"),J()},"object"==typeof e&&typeof i<"u"?i.exports=a():"function"==typeof t&&t.amd?t(a):(o=typeof globalThis<"u"?globalThis:o||self).DOMPurify=a()}),ge=(0,r.c)((e,i)=>{(0,n.a)(),function(){"use strict";function e(t,e){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n}function n(t,e,i){var n=e.x,r=e.y,o=i.x-n,a=i.y-r;if(0!==o||0!==a){var s=((t.x-n)*o+(t.y-r)*a)/(o*o+a*a);s>1?(n=i.x,r=i.y):s>0&&(n+=o*s,r+=a*s)}return(o=t.x-n)*o+(a=t.y-r)*a}function o(t,i){for(var n,r=t[0],o=[r],a=1,s=t.length;a<s;a++)e(n=t[a],r)>i&&(o.push(n),r=n);return r!==n&&o.push(n),o}function a(t,e,i,r,o){for(var s,l=r,h=e+1;h<i;h++){var u=n(t[h],t[e],t[i]);u>l&&(s=h,l=u)}l>r&&(s-e>1&&a(t,e,s,r,o),o.push(t[s]),i-s>1&&a(t,s,i,r,o))}function s(t,e){var i=t.length-1,n=[t[0]];return a(t,0,i,e,n),n.push(t[i]),n}function l(t,e,i){if(t.length<=2)return t;var n=void 0!==e?e*e:1;return s(t=i?t:o(t,n),n)}(0,r.a)(e,"getSqDist"),(0,r.a)(n,"getSqSegDist"),(0,r.a)(o,"simplifyRadialDist"),(0,r.a)(a,"simplifyDPStep"),(0,r.a)(s,"simplifyDouglasPeucker"),(0,r.a)(l,"simplify"),"function"==typeof t&&t.amd?t(function(){return l}):typeof i<"u"?(i.exports=l,i.exports.default=l):typeof self<"u"?self.simplify=l:window.simplify=l}()});(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)();var me="151",ve={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ye=0,_e=1,xe=2,be=1,we=2,Ee=3,Me=0,Se=1,Te=2,Ce=0,Ae=1,Pe=2,Ie=3,Le=4,Oe=5,Ne=100,qe=101,Re=102,De=103,ke=104,Be=200,Fe=201,Ue=202,ze=203,Ve=204,je=205,Ge=206,He=207,We=208,Xe=209,Ye=210,Ze=0,Je=1,Ke=2,Qe=3,$e=4,ti=5,ei=6,ii=7,ni=0,ri=1,oi=2,ai=0,si=1,li=2,hi=3,ui=4,ci=5,pi=300,di=301,fi=302,gi=303,mi=304,vi=306,yi=1e3,_i=1001,xi=1002,bi=1003,wi=1004,Ei=1005,Mi=1006,Si=1007,Ti=1008,Ci=1009,Ai=1010,Pi=1011,Ii=1012,Li=1013,Oi=1014,Ni=1015,qi=1016,Ri=1017,Di=1018,ki=1020,Bi=1021,Fi=1023,Ui=1024,zi=1025,Vi=1026,ji=1027,Gi=1028,Hi=1029,Wi=1030,Xi=1031,Yi=1033,Zi=33776,Ji=33777,Ki=33778,Qi=33779,$i=35840,tn=35841,en=35842,nn=35843,rn=36196,on=37492,an=37496,sn=37808,ln=37809,hn=37810,un=37811,cn=37812,pn=37813,dn=37814,fn=37815,gn=37816,mn=37817,vn=37818,yn=37819,_n=37820,xn=37821,bn=36492,wn=36283,En=36284,Mn=36285,Sn=36286,Tn=2300,Cn=2301,An=2302,Pn=2400,In=2401,Ln=2402,On=3e3,Nn=3001,qn=3200,Rn=3201,Dn=0,kn=1,Bn="",Fn="srgb",Un="srgb-linear",zn="display-p3",Vn=7680,jn=7681,Gn=514,Hn=519,Wn=35044,Xn="300 es",Yn=1035,Zn=class{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});let i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;let i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;let i=this._listeners[t];if(void 0!==i){let t=i.indexOf(e);-1!==t&&i.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;let e=this._listeners[t.type];if(void 0!==e){t.target=this;let i=e.slice(0);for(let e=0,n=i.length;e<n;e++)i[e].call(this,t);t.target=null}}};(0,r.a)(Zn,"EventDispatcher");var Jn=Zn,Kn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Qn=1234567,$n=Math.PI/180,tr=180/Math.PI;function er(){let t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Kn[255&t]+Kn[t>>8&255]+Kn[t>>16&255]+Kn[t>>24&255]+"-"+Kn[255&e]+Kn[e>>8&255]+"-"+Kn[e>>16&15|64]+Kn[e>>24&255]+"-"+Kn[63&i|128]+Kn[i>>8&255]+"-"+Kn[i>>16&255]+Kn[i>>24&255]+Kn[255&n]+Kn[n>>8&255]+Kn[n>>16&255]+Kn[n>>24&255]).toLowerCase()}function nr(t,e,i){return Math.max(e,Math.min(i,t))}function rr(t,e){return(t%e+e)%e}function or(t,e,i,n,r){return n+(t-e)*(r-n)/(i-e)}function ar(t,e,i){return t!==e?(i-t)/(e-t):0}function sr(t,e,i){return(1-i)*t+i*e}function lr(t,e,i,n){return sr(t,e,1-Math.exp(-i*n))}function hr(t,e=1){return e-Math.abs(rr(t,2*e)-e)}function ur(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)}function cr(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)}function pr(t,e){return t+Math.floor(Math.random()*(e-t+1))}function dr(t,e){return t+Math.random()*(e-t)}function fr(t){return t*(.5-Math.random())}function gr(t){void 0!==t&&(Qn=t);let e=Qn+=1831565813;return e=Math.imul(e^e>>>15,1|e),(((e^=e+Math.imul(e^e>>>7,61|e))^e>>>14)>>>0)/4294967296}function mr(t){return t*$n}function vr(t){return t*tr}function yr(t){return 0==(t&t-1)&&0!==t}function _r(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function xr(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function br(t,e,i,n,r){let o=Math.cos,a=Math.sin,s=o(i/2),l=a(i/2),h=o((e+n)/2),u=a((e+n)/2),c=o((e-n)/2),p=a((e-n)/2),d=o((n-e)/2),f=a((n-e)/2);switch(r){case"XYX":t.set(s*u,l*c,l*p,s*h);break;case"YZY":t.set(l*p,s*u,l*c,s*h);break;case"ZXZ":t.set(l*c,l*p,s*u,s*h);break;case"XZX":t.set(s*u,l*f,l*d,s*h);break;case"YXY":t.set(l*d,s*u,l*f,s*h);break;case"ZYZ":t.set(l*f,l*d,s*u,s*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function wr(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Er(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}(0,r.a)(er,"generateUUID"),(0,r.a)(nr,"clamp"),(0,r.a)(rr,"euclideanModulo"),(0,r.a)(or,"mapLinear"),(0,r.a)(ar,"inverseLerp"),(0,r.a)(sr,"lerp"),(0,r.a)(lr,"damp"),(0,r.a)(hr,"pingpong"),(0,r.a)(ur,"smoothstep"),(0,r.a)(cr,"smootherstep"),(0,r.a)(pr,"randInt"),(0,r.a)(dr,"randFloat"),(0,r.a)(fr,"randFloatSpread"),(0,r.a)(gr,"seededRandom"),(0,r.a)(mr,"degToRad"),(0,r.a)(vr,"radToDeg"),(0,r.a)(yr,"isPowerOfTwo"),(0,r.a)(_r,"ceilPowerOfTwo"),(0,r.a)(xr,"floorPowerOfTwo"),(0,r.a)(br,"setQuaternionFromProperEuler"),(0,r.a)(wr,"denormalize"),(0,r.a)(Er,"normalize");var Mr={DEG2RAD:$n,RAD2DEG:tr,generateUUID:er,clamp:nr,euclideanModulo:rr,mapLinear:or,inverseLerp:ar,lerp:sr,damp:lr,pingpong:hr,smoothstep:ur,smootherstep:cr,randInt:pr,randFloat:dr,randFloatSpread:fr,seededRandom:gr,degToRad:mr,radToDeg:vr,isPowerOfTwo:yr,ceilPowerOfTwo:_r,floorPowerOfTwo:xr,setQuaternionFromProperEuler:br,normalize:Er,denormalize:wr},Sr=class t{constructor(e=0,i=0){t.prototype.isVector2=!0,this.x=e,this.y=i}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){let e=this.x,i=this.y,n=t.elements;return this.x=n[0]*e+n[3]*i+n[6],this.y=n[1]*e+n[4]*i+n[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;let i=this.dot(t)/e;return Math.acos(nr(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){let i=Math.cos(e),n=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*i-o*n+t.x,this.y=r*n+o*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}};(0,r.a)(Sr,"Vector2");var Tr=Sr,Cr=class t{constructor(){t.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,i,n,r,o,a,s,l){let h=this.elements;return h[0]=t,h[1]=n,h[2]=a,h[3]=e,h[4]=r,h[5]=s,h[6]=i,h[7]=o,h[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){let e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,n=e.elements,r=this.elements,o=i[0],a=i[3],s=i[6],l=i[1],h=i[4],u=i[7],c=i[2],p=i[5],d=i[8],f=n[0],g=n[3],m=n[6],v=n[1],y=n[4],_=n[7],x=n[2],b=n[5],w=n[8];return r[0]=o*f+a*v+s*x,r[3]=o*g+a*y+s*b,r[6]=o*m+a*_+s*w,r[1]=l*f+h*v+u*x,r[4]=l*g+h*y+u*b,r[7]=l*m+h*_+u*w,r[2]=c*f+p*v+d*x,r[5]=c*g+p*y+d*b,r[8]=c*m+p*_+d*w,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],h=t[8];return e*o*h-e*a*l-i*r*h+i*a*s+n*r*l-n*o*s}invert(){let t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],h=t[8],u=h*o-a*l,c=a*s-h*r,p=l*r-o*s,d=e*u+i*c+n*p;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);let f=1/d;return t[0]=u*f,t[1]=(n*l-h*i)*f,t[2]=(a*i-n*o)*f,t[3]=c*f,t[4]=(h*e-n*s)*f,t[5]=(n*r-a*e)*f,t[6]=p*f,t[7]=(i*s-l*e)*f,t[8]=(o*e-i*r)*f,this}transpose(){let t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){let e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,n,r,o,a){let s=Math.cos(r),l=Math.sin(r);return this.set(i*s,i*l,-i*(s*o+l*a)+o+t,-n*l,n*s,-n*(-l*o+s*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(Pr.makeScale(t,e)),this}rotate(t){return this.premultiply(Pr.makeRotation(-t)),this}translate(t,e){return this.premultiply(Pr.makeTranslation(t,e)),this}makeTranslation(t,e){return this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){let e=this.elements,i=t.elements;for(let n=0;n<9;n++)if(e[n]!==i[n])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return(new this.constructor).fromArray(this.elements)}};(0,r.a)(Cr,"Matrix3");var Ar=Cr,Pr=new Ar;function Ir(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function Lr(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function Or(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Nr(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}(0,r.a)(Ir,"arrayNeedsUint32"),(0,r.a)(Lr,"createElementNS"),(0,r.a)(Or,"SRGBToLinear"),(0,r.a)(Nr,"LinearToSRGB");var qr=(new Ar).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),Rr=(new Ar).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function Dr(t){return t.convertSRGBToLinear().applyMatrix3(Rr)}function kr(t){return t.applyMatrix3(qr).convertLinearToSRGB()}(0,r.a)(Dr,"DisplayP3ToLinearSRGB"),(0,r.a)(kr,"LinearSRGBToDisplayP3");var Br,Fr={[Un]:t=>t,[Fn]:t=>t.convertSRGBToLinear(),[zn]:Dr},Ur={[Un]:t=>t,[Fn]:t=>t.convertLinearToSRGB(),[zn]:kr},zr={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return Un},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,i){if(!1===this.enabled||e===i||!e||!i)return t;let n=Fr[e],r=Ur[i];if(void 0===n||void 0===r)throw new Error('Unsupported color space conversion, "'.concat(e,'" to "').concat(i,'".'));return r(n(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},Vr=class{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Br&&(Br=Lr("canvas")),Br.width=t.width,Br.height=t.height;let i=Br.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=Br}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){let e=Lr("canvas");e.width=t.width,e.height=t.height;let i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);let n=i.getImageData(0,0,t.width,t.height),r=n.data;for(let t=0;t<r.length;t++)r[t]=255*Or(r[t]/255);return i.putImageData(n,0,0),e}if(t.data){let e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*Or(e[t]/255)):e[t]=Or(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}};(0,r.a)(Vr,"ImageUtils");var jr=Vr,Gr=class{constructor(t=null){this.isSource=!0,this.uuid=er(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){let e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];let i={uuid:this.uuid,url:""},n=this.data;if(null!==n){let t;if(Array.isArray(n)){t=[];for(let e=0,i=n.length;e<i;e++)n[e].isDataTexture?t.push(Wr(n[e].image)):t.push(Wr(n[e]))}else t=Wr(n);i.url=t}return e||(t.images[this.uuid]=i),i}};(0,r.a)(Gr,"Source");var Hr=Gr;function Wr(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?jr.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}(0,r.a)(Wr,"serializeImage");var Xr=0,Yr=class t extends Jn{constructor(e=t.DEFAULT_IMAGE,i=t.DEFAULT_MAPPING,n=_i,r=_i,o=Mi,a=Ti,s=Fi,l=Ci,h=t.DEFAULT_ANISOTROPY,u=On){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Xr++}),this.uuid=er(),this.name="",this.source=new Hr(e),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=o,this.minFilter=a,this.anisotropy=h,this.format=s,this.internalFormat=null,this.type=l,this.offset=new Tr(0,0),this.repeat=new Tr(1,1),this.center=new Tr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ar,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){let e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];let i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==pi)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case yi:t.x=t.x-Math.floor(t.x);break;case _i:t.x=t.x<0?0:1;break;case xi:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case yi:t.y=t.y-Math.floor(t.y);break;case _i:t.y=t.y<0?0:1;break;case xi:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}};(0,r.a)(Yr,"Texture");var Zr=Yr;Zr.DEFAULT_IMAGE=null,Zr.DEFAULT_MAPPING=pi,Zr.DEFAULT_ANISOTROPY=1;var Jr=class t{constructor(e=0,i=0,n=0,r=1){t.prototype.isVector4=!0,this.x=e,this.y=i,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){let e=this.x,i=this.y,n=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*n+o[12]*r,this.y=o[1]*e+o[5]*i+o[9]*n+o[13]*r,this.z=o[2]*e+o[6]*i+o[10]*n+o[14]*r,this.w=o[3]*e+o[7]*i+o[11]*n+o[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);let e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,n,r,o=t.elements,a=o[0],s=o[4],l=o[8],h=o[1],u=o[5],c=o[9],p=o[2],d=o[6],f=o[10];if(Math.abs(s-h)<.01&&Math.abs(l-p)<.01&&Math.abs(c-d)<.01){if(Math.abs(s+h)<.1&&Math.abs(l+p)<.1&&Math.abs(c+d)<.1&&Math.abs(a+u+f-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;let t=(a+1)/2,o=(u+1)/2,g=(f+1)/2,m=(s+h)/4,v=(l+p)/4,y=(c+d)/4;return t>o&&t>g?t<.01?(i=0,n=.707106781,r=.707106781):(n=m/(i=Math.sqrt(t)),r=v/i):o>g?o<.01?(i=.707106781,n=0,r=.707106781):(i=m/(n=Math.sqrt(o)),r=y/n):g<.01?(i=.707106781,n=.707106781,r=0):(i=v/(r=Math.sqrt(g)),n=y/r),this.set(i,n,r,e),this}let g=Math.sqrt((d-c)*(d-c)+(l-p)*(l-p)+(h-s)*(h-s));return Math.abs(g)<.001&&(g=1),this.x=(d-c)/g,this.y=(l-p)/g,this.z=(h-s)/g,this.w=Math.acos((a+u+f-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}};(0,r.a)(Jr,"Vector4");var Kr=Jr,Qr=class extends Jn{constructor(t=1,e=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new Kr(0,0,t,e),this.scissorTest=!1,this.viewport=new Kr(0,0,t,e);let n={width:t,height:e,depth:1};this.texture=new Zr(n,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:Mi,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(t,e,i=1){(this.width!==t||this.height!==e||this.depth!==i)&&(this.width=t,this.height=e,this.depth=i,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;let e=Object.assign({},t.texture.image);return this.texture.source=new Hr(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}};(0,r.a)(Qr,"WebGLRenderTarget");var $r=Qr,to=class extends Zr{constructor(t=null,e=1,i=1,n=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:i,depth:n},this.magFilter=bi,this.minFilter=bi,this.wrapR=_i,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};(0,r.a)(to,"DataArrayTexture");var eo=to,io=class extends Zr{constructor(t=null,e=1,i=1,n=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:i,depth:n},this.magFilter=bi,this.minFilter=bi,this.wrapR=_i,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};(0,r.a)(io,"Data3DTexture");var no=io,ro=class extends $r{constructor(t=1,e=1,i=1,n={}){super(t,e,n),this.isWebGLMultipleRenderTargets=!0;let r=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=r.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let n=0,r=this.texture.length;n<r;n++)this.texture[n].image.width=t,this.texture[n].image.height=e,this.texture[n].image.depth=i;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.texture.length=0;for(let e=0,i=t.texture.length;e<i;e++)this.texture[e]=t.texture[e].clone(),this.texture[e].isRenderTargetTexture=!0;return this}};(0,r.a)(ro,"WebGLMultipleRenderTargets");var oo=ro,ao=class{constructor(t=0,e=0,i=0,n=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=n}static slerpFlat(t,e,i,n,r,o,a){let s=i[n+0],l=i[n+1],h=i[n+2],u=i[n+3],c=r[o+0],p=r[o+1],d=r[o+2],f=r[o+3];if(0===a)return t[e+0]=s,t[e+1]=l,t[e+2]=h,void(t[e+3]=u);if(1===a)return t[e+0]=c,t[e+1]=p,t[e+2]=d,void(t[e+3]=f);if(u!==f||s!==c||l!==p||h!==d){let t=1-a,e=s*c+l*p+h*d+u*f,i=e>=0?1:-1,n=1-e*e;if(n>Number.EPSILON){let r=Math.sqrt(n),o=Math.atan2(r,e*i);t=Math.sin(t*o)/r,a=Math.sin(a*o)/r}let r=a*i;if(s=s*t+c*r,l=l*t+p*r,h=h*t+d*r,u=u*t+f*r,t===1-a){let t=1/Math.sqrt(s*s+l*l+h*h+u*u);s*=t,l*=t,h*=t,u*=t}}t[e]=s,t[e+1]=l,t[e+2]=h,t[e+3]=u}static multiplyQuaternionsFlat(t,e,i,n,r,o){let a=i[n],s=i[n+1],l=i[n+2],h=i[n+3],u=r[o],c=r[o+1],p=r[o+2],d=r[o+3];return t[e]=a*d+h*u+s*p-l*c,t[e+1]=s*d+h*c+l*u-a*p,t[e+2]=l*d+h*p+a*c-s*u,t[e+3]=h*d-a*u-s*c-l*p,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){let i=t._x,n=t._y,r=t._z,o=t._order,a=Math.cos,s=Math.sin,l=a(i/2),h=a(n/2),u=a(r/2),c=s(i/2),p=s(n/2),d=s(r/2);switch(o){case"XYZ":this._x=c*h*u+l*p*d,this._y=l*p*u-c*h*d,this._z=l*h*d+c*p*u,this._w=l*h*u-c*p*d;break;case"YXZ":this._x=c*h*u+l*p*d,this._y=l*p*u-c*h*d,this._z=l*h*d-c*p*u,this._w=l*h*u+c*p*d;break;case"ZXY":this._x=c*h*u-l*p*d,this._y=l*p*u+c*h*d,this._z=l*h*d+c*p*u,this._w=l*h*u-c*p*d;break;case"ZYX":this._x=c*h*u-l*p*d,this._y=l*p*u+c*h*d,this._z=l*h*d-c*p*u,this._w=l*h*u+c*p*d;break;case"YZX":this._x=c*h*u+l*p*d,this._y=l*p*u+c*h*d,this._z=l*h*d-c*p*u,this._w=l*h*u-c*p*d;break;case"XZY":this._x=c*h*u-l*p*d,this._y=l*p*u-c*h*d,this._z=l*h*d+c*p*u,this._w=l*h*u+c*p*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){let i=e/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){let e=t.elements,i=e[0],n=e[4],r=e[8],o=e[1],a=e[5],s=e[9],l=e[2],h=e[6],u=e[10],c=i+a+u;if(c>0){let t=.5/Math.sqrt(c+1);this._w=.25/t,this._x=(h-s)*t,this._y=(r-l)*t,this._z=(o-n)*t}else if(i>a&&i>u){let t=2*Math.sqrt(1+i-a-u);this._w=(h-s)/t,this._x=.25*t,this._y=(n+o)/t,this._z=(r+l)/t}else if(a>u){let t=2*Math.sqrt(1+a-i-u);this._w=(r-l)/t,this._x=(n+o)/t,this._y=.25*t,this._z=(s+h)/t}else{let t=2*Math.sqrt(1+u-i-a);this._w=(o-n)/t,this._x=(r+l)/t,this._y=(s+h)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(nr(this.dot(t),-1,1)))}rotateTowards(t,e){let i=this.angleTo(t);if(0===i)return this;let n=Math.min(1,e/i);return this.slerp(t,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){let i=t._x,n=t._y,r=t._z,o=t._w,a=e._x,s=e._y,l=e._z,h=e._w;return this._x=i*h+o*a+n*l-r*s,this._y=n*h+o*s+r*a-i*l,this._z=r*h+o*l+i*s-n*a,this._w=o*h-i*a-n*s-r*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);let i=this._x,n=this._y,r=this._z,o=this._w,a=o*t._w+i*t._x+n*t._y+r*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=i,this._y=n,this._z=r,this;let s=1-a*a;if(s<=Number.EPSILON){let t=1-e;return this._w=t*o+e*this._w,this._x=t*i+e*this._x,this._y=t*n+e*this._y,this._z=t*r+e*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(s),h=Math.atan2(l,a),u=Math.sin((1-e)*h)/l,c=Math.sin(e*h)/l;return this._w=o*u+this._w*c,this._x=i*u+this._x*c,this._y=n*u+this._y*c,this._z=r*u+this._z*c,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){let t=Math.random(),e=Math.sqrt(1-t),i=Math.sqrt(t),n=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(e*Math.cos(n),i*Math.sin(r),i*Math.cos(r),e*Math.sin(n))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}};(0,r.a)(ao,"Quaternion");var so=ao,lo=class t{constructor(e=0,i=0,n=0){t.prototype.isVector3=!0,this.x=e,this.y=i,this.z=n}set(t,e,i){return void 0===i&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(co.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(co.setFromAxisAngle(t,e))}applyMatrix3(t){let e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6]*n,this.y=r[1]*e+r[4]*i+r[7]*n,this.z=r[2]*e+r[5]*i+r[8]*n,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){let e=this.x,i=this.y,n=this.z,r=t.elements,o=1/(r[3]*e+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*e+r[4]*i+r[8]*n+r[12])*o,this.y=(r[1]*e+r[5]*i+r[9]*n+r[13])*o,this.z=(r[2]*e+r[6]*i+r[10]*n+r[14])*o,this}applyQuaternion(t){let e=this.x,i=this.y,n=this.z,r=t.x,o=t.y,a=t.z,s=t.w,l=s*e+o*n-a*i,h=s*i+a*e-r*n,u=s*n+r*i-o*e,c=-r*e-o*i-a*n;return this.x=l*s+c*-r+h*-a-u*-o,this.y=h*s+c*-o+u*-r-l*-a,this.z=u*s+c*-a+l*-o-h*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){let e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*n,this.y=r[1]*e+r[5]*i+r[9]*n,this.z=r[2]*e+r[6]*i+r[10]*n,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){let i=t.x,n=t.y,r=t.z,o=e.x,a=e.y,s=e.z;return this.x=n*s-r*a,this.y=r*o-i*s,this.z=i*a-n*o,this}projectOnVector(t){let e=t.lengthSq();if(0===e)return this.set(0,0,0);let i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return uo.copy(this).projectOnVector(t),this.sub(uo)}reflect(t){return this.sub(uo.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;let i=this.dot(t)/e;return Math.acos(nr(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){let n=Math.sin(e)*t;return this.x=n*Math.sin(i),this.y=Math.cos(e)*t,this.z=n*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){let e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){let e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=n,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,i=Math.sqrt(1-t**2);return this.x=i*Math.cos(e),this.y=i*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}};(0,r.a)(lo,"Vector3");var ho=lo,uo=new ho,co=new so,po=class{constructor(t=new ho(1/0,1/0,1/0),e=new ho(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e+=3)this.expandByPoint(mo.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,i=t.count;e<i;e++)this.expandByPoint(mo.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){let i=mo.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){if(t.updateWorldMatrix(!1,!1),void 0!==t.boundingBox)null===t.boundingBox&&t.computeBoundingBox(),vo.copy(t.boundingBox),vo.applyMatrix4(t.matrixWorld),this.union(vo);else{let i=t.geometry;if(void 0!==i)if(e&&void 0!==i.attributes&&void 0!==i.attributes.position){let e=i.attributes.position;for(let i=0,n=e.count;i<n;i++)mo.fromBufferAttribute(e,i).applyMatrix4(t.matrixWorld),this.expandByPoint(mo)}else null===i.boundingBox&&i.computeBoundingBox(),vo.copy(i.boundingBox),vo.applyMatrix4(t.matrixWorld),this.union(vo)}let i=t.children;for(let n=0,r=i.length;n<r;n++)this.expandByObject(i[n],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,mo),mo.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Mo),So.subVectors(this.max,Mo),yo.subVectors(t.a,Mo),_o.subVectors(t.b,Mo),xo.subVectors(t.c,Mo),bo.subVectors(_o,yo),wo.subVectors(xo,_o),Eo.subVectors(yo,xo);let e=[0,-bo.z,bo.y,0,-wo.z,wo.y,0,-Eo.z,Eo.y,bo.z,0,-bo.x,wo.z,0,-wo.x,Eo.z,0,-Eo.x,-bo.y,bo.x,0,-wo.y,wo.x,0,-Eo.y,Eo.x,0];return!(!Ao(e,yo,_o,xo,So)||(e=[1,0,0,0,1,0,0,0,1],!Ao(e,yo,_o,xo,So)))&&(To.crossVectors(bo,wo),Ao(e=[To.x,To.y,To.z],yo,_o,xo,So))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,mo).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(mo).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(go[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),go[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),go[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),go[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),go[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),go[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),go[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),go[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(go)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}};(0,r.a)(po,"Box3");var fo=po,go=[new ho,new ho,new ho,new ho,new ho,new ho,new ho,new ho],mo=new ho,vo=new fo,yo=new ho,_o=new ho,xo=new ho,bo=new ho,wo=new ho,Eo=new ho,Mo=new ho,So=new ho,To=new ho,Co=new ho;function Ao(t,e,i,n,r){for(let o=0,a=t.length-3;o<=a;o+=3){Co.fromArray(t,o);let a=r.x*Math.abs(Co.x)+r.y*Math.abs(Co.y)+r.z*Math.abs(Co.z),s=e.dot(Co),l=i.dot(Co),h=n.dot(Co);if(Math.max(-Math.max(s,l,h),Math.min(s,l,h))>a)return!1}return!0}(0,r.a)(Ao,"satForAxes");var Po=new fo,Io=new ho,Lo=new ho,Oo=class{constructor(t=new ho,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){let i=this.center;void 0!==e?i.copy(e):Po.setFromPoints(t).getCenter(i);let n=0;for(let r=0,o=t.length;r<o;r++)n=Math.max(n,i.distanceToSquared(t[r]));return this.radius=Math.sqrt(n),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){let e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){let i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Io.subVectors(t,this.center);let e=Io.lengthSq();if(e>this.radius*this.radius){let t=Math.sqrt(e),i=.5*(t-this.radius);this.center.addScaledVector(Io,i/t),this.radius+=i}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(Lo.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Io.copy(t.center).add(Lo)),this.expandByPoint(Io.copy(t.center).sub(Lo))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}};(0,r.a)(Oo,"Sphere");var No=Oo,qo=new ho,Ro=new ho,Do=new ho,ko=new ho,Bo=new ho,Fo=new ho,Uo=new ho,zo=class{constructor(t=new ho,e=new ho(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,qo)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);let i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){let e=qo.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(qo.copy(this.origin).addScaledVector(this.direction,e),qo.distanceToSquared(t))}distanceSqToSegment(t,e,i,n){Ro.copy(t).add(e).multiplyScalar(.5),Do.copy(e).sub(t).normalize(),ko.copy(this.origin).sub(Ro);let r,o,a,s,l=.5*t.distanceTo(e),h=-this.direction.dot(Do),u=ko.dot(this.direction),c=-ko.dot(Do),p=ko.lengthSq(),d=Math.abs(1-h*h);if(d>0)if(o=h*u-c,s=l*d,(r=h*c-u)>=0)if(o>=-s)if(o<=s){let t=1/d;a=(r*=t)*(r+h*(o*=t)+2*u)+o*(h*r+o+2*c)+p}else o=l,a=-(r=Math.max(0,-(h*o+u)))*r+o*(o+2*c)+p;else o=-l,a=-(r=Math.max(0,-(h*o+u)))*r+o*(o+2*c)+p;else o<=-s?a=-(r=Math.max(0,-(-h*l+u)))*r+(o=r>0?-l:Math.min(Math.max(-l,-c),l))*(o+2*c)+p:o<=s?(r=0,a=(o=Math.min(Math.max(-l,-c),l))*(o+2*c)+p):a=-(r=Math.max(0,-(h*l+u)))*r+(o=r>0?l:Math.min(Math.max(-l,-c),l))*(o+2*c)+p;else o=h>0?-l:l,a=-(r=Math.max(0,-(h*o+u)))*r+o*(o+2*c)+p;return i&&i.copy(this.origin).addScaledVector(this.direction,r),n&&n.copy(Ro).addScaledVector(Do,o),a}intersectSphere(t,e){qo.subVectors(t.center,this.origin);let i=qo.dot(this.direction),n=qo.dot(qo)-i*i,r=t.radius*t.radius;if(n>r)return null;let o=Math.sqrt(r-n),a=i-o,s=i+o;return s<0?null:a<0?this.at(s,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){let e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;let i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){let i=this.distanceToPlane(t);return null===i?null:this.at(i,e)}intersectsPlane(t){let e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,n,r,o,a,s,l=1/this.direction.x,h=1/this.direction.y,u=1/this.direction.z,c=this.origin;return l>=0?(i=(t.min.x-c.x)*l,n=(t.max.x-c.x)*l):(i=(t.max.x-c.x)*l,n=(t.min.x-c.x)*l),h>=0?(r=(t.min.y-c.y)*h,o=(t.max.y-c.y)*h):(r=(t.max.y-c.y)*h,o=(t.min.y-c.y)*h),i>o||r>n||((r>i||isNaN(i))&&(i=r),(o<n||isNaN(n))&&(n=o),u>=0?(a=(t.min.z-c.z)*u,s=(t.max.z-c.z)*u):(a=(t.max.z-c.z)*u,s=(t.min.z-c.z)*u),i>s||a>n)||((a>i||i!=i)&&(i=a),(s<n||n!=n)&&(n=s),n<0)?null:this.at(i>=0?i:n,e)}intersectsBox(t){return null!==this.intersectBox(t,qo)}intersectTriangle(t,e,i,n,r){Bo.subVectors(e,t),Fo.subVectors(i,t),Uo.crossVectors(Bo,Fo);let o,a=this.direction.dot(Uo);if(a>0){if(n)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}ko.subVectors(this.origin,t);let s=o*this.direction.dot(Fo.crossVectors(ko,Fo));if(s<0)return null;let l=o*this.direction.dot(Bo.cross(ko));if(l<0||s+l>a)return null;let h=-o*ko.dot(Uo);return h<0?null:this.at(h/a,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}};(0,r.a)(zo,"Ray");var Vo=zo,jo=class t{constructor(){t.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,i,n,r,o,a,s,l,h,u,c,p,d,f,g){let m=this.elements;return m[0]=t,m[4]=e,m[8]=i,m[12]=n,m[1]=r,m[5]=o,m[9]=a,m[13]=s,m[2]=l,m[6]=h,m[10]=u,m[14]=c,m[3]=p,m[7]=d,m[11]=f,m[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new t).fromArray(this.elements)}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){let e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){let e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){let e=this.elements,i=t.elements,n=1/Ho.setFromMatrixColumn(t,0).length(),r=1/Ho.setFromMatrixColumn(t,1).length(),o=1/Ho.setFromMatrixColumn(t,2).length();return e[0]=i[0]*n,e[1]=i[1]*n,e[2]=i[2]*n,e[3]=0,e[4]=i[4]*r,e[5]=i[5]*r,e[6]=i[6]*r,e[7]=0,e[8]=i[8]*o,e[9]=i[9]*o,e[10]=i[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){let e=this.elements,i=t.x,n=t.y,r=t.z,o=Math.cos(i),a=Math.sin(i),s=Math.cos(n),l=Math.sin(n),h=Math.cos(r),u=Math.sin(r);if("XYZ"===t.order){let t=o*h,i=o*u,n=a*h,r=a*u;e[0]=s*h,e[4]=-s*u,e[8]=l,e[1]=i+n*l,e[5]=t-r*l,e[9]=-a*s,e[2]=r-t*l,e[6]=n+i*l,e[10]=o*s}else if("YXZ"===t.order){let t=s*h,i=s*u,n=l*h,r=l*u;e[0]=t+r*a,e[4]=n*a-i,e[8]=o*l,e[1]=o*u,e[5]=o*h,e[9]=-a,e[2]=i*a-n,e[6]=r+t*a,e[10]=o*s}else if("ZXY"===t.order){let t=s*h,i=s*u,n=l*h,r=l*u;e[0]=t-r*a,e[4]=-o*u,e[8]=n+i*a,e[1]=i+n*a,e[5]=o*h,e[9]=r-t*a,e[2]=-o*l,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){let t=o*h,i=o*u,n=a*h,r=a*u;e[0]=s*h,e[4]=n*l-i,e[8]=t*l+r,e[1]=s*u,e[5]=r*l+t,e[9]=i*l-n,e[2]=-l,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){let t=o*s,i=o*l,n=a*s,r=a*l;e[0]=s*h,e[4]=r-t*u,e[8]=n*u+i,e[1]=u,e[5]=o*h,e[9]=-a*h,e[2]=-l*h,e[6]=i*u+n,e[10]=t-r*u}else if("XZY"===t.order){let t=o*s,i=o*l,n=a*s,r=a*l;e[0]=s*h,e[4]=-u,e[8]=l*h,e[1]=t*u+r,e[5]=o*h,e[9]=i*u-n,e[2]=n*u-i,e[6]=a*h,e[10]=r*u+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Xo,t,Yo)}lookAt(t,e,i){let n=this.elements;return Ko.subVectors(t,e),0===Ko.lengthSq()&&(Ko.z=1),Ko.normalize(),Zo.crossVectors(i,Ko),0===Zo.lengthSq()&&(1===Math.abs(i.z)?Ko.x+=1e-4:Ko.z+=1e-4,Ko.normalize(),Zo.crossVectors(i,Ko)),Zo.normalize(),Jo.crossVectors(Ko,Zo),n[0]=Zo.x,n[4]=Jo.x,n[8]=Ko.x,n[1]=Zo.y,n[5]=Jo.y,n[9]=Ko.y,n[2]=Zo.z,n[6]=Jo.z,n[10]=Ko.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,n=e.elements,r=this.elements,o=i[0],a=i[4],s=i[8],l=i[12],h=i[1],u=i[5],c=i[9],p=i[13],d=i[2],f=i[6],g=i[10],m=i[14],v=i[3],y=i[7],_=i[11],x=i[15],b=n[0],w=n[4],E=n[8],M=n[12],S=n[1],T=n[5],C=n[9],A=n[13],P=n[2],I=n[6],L=n[10],O=n[14],N=n[3],q=n[7],R=n[11],D=n[15];return r[0]=o*b+a*S+s*P+l*N,r[4]=o*w+a*T+s*I+l*q,r[8]=o*E+a*C+s*L+l*R,r[12]=o*M+a*A+s*O+l*D,r[1]=h*b+u*S+c*P+p*N,r[5]=h*w+u*T+c*I+p*q,r[9]=h*E+u*C+c*L+p*R,r[13]=h*M+u*A+c*O+p*D,r[2]=d*b+f*S+g*P+m*N,r[6]=d*w+f*T+g*I+m*q,r[10]=d*E+f*C+g*L+m*R,r[14]=d*M+f*A+g*O+m*D,r[3]=v*b+y*S+_*P+x*N,r[7]=v*w+y*T+_*I+x*q,r[11]=v*E+y*C+_*L+x*R,r[15]=v*M+y*A+_*O+x*D,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[4],n=t[8],r=t[12],o=t[1],a=t[5],s=t[9],l=t[13],h=t[2],u=t[6],c=t[10],p=t[14];return t[3]*(+r*s*u-n*l*u-r*a*c+i*l*c+n*a*p-i*s*p)+t[7]*(+e*s*p-e*l*c+r*o*c-n*o*p+n*l*h-r*s*h)+t[11]*(+e*l*u-e*a*p-r*o*u+i*o*p+r*a*h-i*l*h)+t[15]*(-n*a*h-e*s*u+e*a*c+n*o*u-i*o*c+i*s*h)}transpose(){let t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(t,e,i){let n=this.elements;return t.isVector3?(n[12]=t.x,n[13]=t.y,n[14]=t.z):(n[12]=t,n[13]=e,n[14]=i),this}invert(){let t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],h=t[8],u=t[9],c=t[10],p=t[11],d=t[12],f=t[13],g=t[14],m=t[15],v=u*g*l-f*c*l+f*s*p-a*g*p-u*s*m+a*c*m,y=d*c*l-h*g*l-d*s*p+o*g*p+h*s*m-o*c*m,_=h*f*l-d*u*l+d*a*p-o*f*p-h*a*m+o*u*m,x=d*u*s-h*f*s-d*a*c+o*f*c+h*a*g-o*u*g,b=e*v+i*y+n*_+r*x;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let w=1/b;return t[0]=v*w,t[1]=(f*c*r-u*g*r-f*n*p+i*g*p+u*n*m-i*c*m)*w,t[2]=(a*g*r-f*s*r+f*n*l-i*g*l-a*n*m+i*s*m)*w,t[3]=(u*s*r-a*c*r-u*n*l+i*c*l+a*n*p-i*s*p)*w,t[4]=y*w,t[5]=(h*g*r-d*c*r+d*n*p-e*g*p-h*n*m+e*c*m)*w,t[6]=(d*s*r-o*g*r-d*n*l+e*g*l+o*n*m-e*s*m)*w,t[7]=(o*c*r-h*s*r+h*n*l-e*c*l-o*n*p+e*s*p)*w,t[8]=_*w,t[9]=(d*u*r-h*f*r-d*i*p+e*f*p+h*i*m-e*u*m)*w,t[10]=(o*f*r-d*a*r+d*i*l-e*f*l-o*i*m+e*a*m)*w,t[11]=(h*a*r-o*u*r-h*i*l+e*u*l+o*i*p-e*a*p)*w,t[12]=x*w,t[13]=(h*f*n-d*u*n+d*i*c-e*f*c-h*i*g+e*u*g)*w,t[14]=(d*a*n-o*f*n-d*i*s+e*f*s+o*i*g-e*a*g)*w,t[15]=(o*u*n-h*a*n+h*i*s-e*u*s-o*i*c+e*a*c)*w,this}scale(t){let e=this.elements,i=t.x,n=t.y,r=t.z;return e[0]*=i,e[4]*=n,e[8]*=r,e[1]*=i,e[5]*=n,e[9]*=r,e[2]*=i,e[6]*=n,e[10]*=r,e[3]*=i,e[7]*=n,e[11]*=r,this}getMaxScaleOnAxis(){let t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))}makeTranslation(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){let e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){let i=Math.cos(e),n=Math.sin(e),r=1-i,o=t.x,a=t.y,s=t.z,l=r*o,h=r*a;return this.set(l*o+i,l*a-n*s,l*s+n*a,0,l*a+n*s,h*a+i,h*s-n*o,0,l*s-n*a,h*s+n*o,r*s*s+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,n,r,o){return this.set(1,i,r,0,t,1,o,0,e,n,1,0,0,0,0,1),this}compose(t,e,i){let n=this.elements,r=e._x,o=e._y,a=e._z,s=e._w,l=r+r,h=o+o,u=a+a,c=r*l,p=r*h,d=r*u,f=o*h,g=o*u,m=a*u,v=s*l,y=s*h,_=s*u,x=i.x,b=i.y,w=i.z;return n[0]=(1-(f+m))*x,n[1]=(p+_)*x,n[2]=(d-y)*x,n[3]=0,n[4]=(p-_)*b,n[5]=(1-(c+m))*b,n[6]=(g+v)*b,n[7]=0,n[8]=(d+y)*w,n[9]=(g-v)*w,n[10]=(1-(c+f))*w,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this}decompose(t,e,i){let n=this.elements,r=Ho.set(n[0],n[1],n[2]).length(),o=Ho.set(n[4],n[5],n[6]).length(),a=Ho.set(n[8],n[9],n[10]).length();this.determinant()<0&&(r=-r),t.x=n[12],t.y=n[13],t.z=n[14],Wo.copy(this);let s=1/r,l=1/o,h=1/a;return Wo.elements[0]*=s,Wo.elements[1]*=s,Wo.elements[2]*=s,Wo.elements[4]*=l,Wo.elements[5]*=l,Wo.elements[6]*=l,Wo.elements[8]*=h,Wo.elements[9]*=h,Wo.elements[10]*=h,e.setFromRotationMatrix(Wo),i.x=r,i.y=o,i.z=a,this}makePerspective(t,e,i,n,r,o){let a=this.elements,s=2*r/(e-t),l=2*r/(i-n),h=(e+t)/(e-t),u=(i+n)/(i-n),c=-(o+r)/(o-r),p=-2*o*r/(o-r);return a[0]=s,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=c,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,i,n,r,o){let a=this.elements,s=1/(e-t),l=1/(i-n),h=1/(o-r),u=(e+t)*s,c=(i+n)*l,p=(o+r)*h;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-c,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){let e=this.elements,i=t.elements;for(let n=0;n<16;n++)if(e[n]!==i[n])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}};(0,r.a)(jo,"Matrix4");var Go=jo,Ho=new ho,Wo=new Go,Xo=new ho(0,0,0),Yo=new ho(1,1,1),Zo=new ho,Jo=new ho,Ko=new ho,Qo=new Go,$o=new so,ta=class t{constructor(e=0,i=0,n=0,r=t.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=i,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,n=this._order){return this._x=t,this._y=e,this._z=i,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){let n=t.elements,r=n[0],o=n[4],a=n[8],s=n[1],l=n[5],h=n[9],u=n[2],c=n[6],p=n[10];switch(e){case"XYZ":this._y=Math.asin(nr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(c,l),this._z=0);break;case"YXZ":this._x=Math.asin(-nr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(nr(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(-u,p),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,r));break;case"ZYX":this._y=Math.asin(-nr(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(c,p),this._z=Math.atan2(s,r)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(nr(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-nr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(c,l),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-h,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===i&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return Qo.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Qo,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return $o.setFromEuler(this),this.setFromQuaternion($o,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};(0,r.a)(ta,"Euler");var ea=ta;ea.DEFAULT_ORDER="XYZ";var ia=class{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}};(0,r.a)(ia,"Layers");var na=ia,ra=0,oa=new ho,aa=new so,sa=new Go,la=new ho,ha=new ho,ua=new ho,ca=new so,pa=new ho(1,0,0),da=new ho(0,1,0),fa=new ho(0,0,1),ga={type:"added"},ma={type:"removed"},va=class t extends Jn{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ra++}),this.uuid=er(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=t.DEFAULT_UP.clone();let e=new ho,i=new ea,n=new so,o=new ho(1,1,1);function a(){n.setFromEuler(i,!1)}function s(){i.setFromQuaternion(n,void 0,!1)}(0,r.a)(a,"onRotationChange"),(0,r.a)(s,"onQuaternionChange"),i._onChange(a),n._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new Go},normalMatrix:{value:new Ar}}),this.matrix=new Go,this.matrixWorld=new Go,this.matrixAutoUpdate=t.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=t.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new na,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return aa.setFromAxisAngle(t,e),this.quaternion.multiply(aa),this}rotateOnWorldAxis(t,e){return aa.setFromAxisAngle(t,e),this.quaternion.premultiply(aa),this}rotateX(t){return this.rotateOnAxis(pa,t)}rotateY(t){return this.rotateOnAxis(da,t)}rotateZ(t){return this.rotateOnAxis(fa,t)}translateOnAxis(t,e){return oa.copy(t).applyQuaternion(this.quaternion),this.position.add(oa.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(pa,t)}translateY(t){return this.translateOnAxis(da,t)}translateZ(t){return this.translateOnAxis(fa,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(sa.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?la.copy(t):la.set(t,e,i);let n=this.parent;this.updateWorldMatrix(!0,!1),ha.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?sa.lookAt(ha,la,this.up):sa.lookAt(la,ha,this.up),this.quaternion.setFromRotationMatrix(sa),n&&(sa.extractRotation(n.matrixWorld),aa.setFromRotationMatrix(sa),this.quaternion.premultiply(aa.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(ga)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}let e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(ma)),this}removeFromParent(){let t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){let e=this.children[t];e.parent=null,e.dispatchEvent(ma)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),sa.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),sa.multiply(t.parent.matrixWorld)),t.applyMatrix4(sa),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,n=this.children.length;i<n;i++){let n=this.children[i].getObjectByProperty(t,e);if(void 0!==n)return n}}getObjectsByProperty(t,e){let i=[];this[t]===e&&i.push(this);for(let n=0,r=this.children.length;n<r;n++){let r=this.children[n].getObjectsByProperty(t,e);r.length>0&&(i=i.concat(r))}return i}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ha,t,ua),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ha,ca,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);let e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);let e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}traverseAncestors(t){let e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);let e=this.children;for(let i=0,n=e.length;i<n;i++){let n=e[i];(!0===n.matrixWorldAutoUpdate||!0===t)&&n.updateMatrixWorld(t)}}updateWorldMatrix(t,e){let i=this.parent;if(!0===t&&null!==i&&!0===i.matrixWorldAutoUpdate&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){let t=this.children;for(let e=0,i=t.length;e<i;e++){let i=t[e];!0===i.matrixWorldAutoUpdate&&i.updateWorldMatrix(!1,!0)}}}toJSON(t){let e=void 0===t||"string"==typeof t,i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let n={};function o(e,i){return void 0===e[i.uuid]&&(e[i.uuid]=i.toJSON(t)),i.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),n.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(n.instanceColor=this.instanceColor.toJSON())),(0,r.a)(o,"serialize"),this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(n.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=o(t.geometries,this.geometry);let e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){let i=e.shapes;if(Array.isArray(i))for(let e=0,n=i.length;e<n;e++){let n=i[e];o(t.shapes,n)}else o(t.shapes,i)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){let e=[];for(let i=0,n=this.material.length;i<n;i++)e.push(o(t.materials,this.material[i]));n.material=e}else n.material=o(t.materials,this.material);if(this.children.length>0){n.children=[];for(let e=0;e<this.children.length;e++)n.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){n.animations=[];for(let e=0;e<this.animations.length;e++){let i=this.animations[e];n.animations.push(o(t.animations,i))}}if(e){let e=a(t.geometries),n=a(t.materials),r=a(t.textures),o=a(t.images),s=a(t.shapes),l=a(t.skeletons),h=a(t.animations),u=a(t.nodes);e.length>0&&(i.geometries=e),n.length>0&&(i.materials=n),r.length>0&&(i.textures=r),o.length>0&&(i.images=o),s.length>0&&(i.shapes=s),l.length>0&&(i.skeletons=l),h.length>0&&(i.animations=h),u.length>0&&(i.nodes=u)}return i.object=n,i;function a(t){let e=[];for(let i in t){let n=t[i];delete n.metadata,e.push(n)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let i=0;i<t.children.length;i++){let e=t.children[i];this.add(e.clone())}return this}};(0,r.a)(va,"Object3D");var ya=va;ya.DEFAULT_UP=new ho(0,1,0),ya.DEFAULT_MATRIX_AUTO_UPDATE=!0,ya.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var _a=new ho,xa=new ho,ba=new ho,wa=new ho,Ea=new ho,Ma=new ho,Sa=new ho,Ta=new ho,Ca=new ho,Aa=new ho,Pa=!1,Ia=class t{constructor(t=new ho,e=new ho,i=new ho){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,n){n.subVectors(i,e),_a.subVectors(t,e),n.cross(_a);let r=n.lengthSq();return r>0?n.multiplyScalar(1/Math.sqrt(r)):n.set(0,0,0)}static getBarycoord(t,e,i,n,r){_a.subVectors(n,e),xa.subVectors(i,e),ba.subVectors(t,e);let o=_a.dot(_a),a=_a.dot(xa),s=_a.dot(ba),l=xa.dot(xa),h=xa.dot(ba),u=o*l-a*a;if(0===u)return r.set(-2,-1,-1);let c=1/u,p=(l*s-a*h)*c,d=(o*h-a*s)*c;return r.set(1-p-d,d,p)}static containsPoint(t,e,i,n){return this.getBarycoord(t,e,i,n,wa),wa.x>=0&&wa.y>=0&&wa.x+wa.y<=1}static getUV(t,e,i,n,r,o,a,s){return!1===Pa&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Pa=!0),this.getInterpolation(t,e,i,n,r,o,a,s)}static getInterpolation(t,e,i,n,r,o,a,s){return this.getBarycoord(t,e,i,n,wa),s.setScalar(0),s.addScaledVector(r,wa.x),s.addScaledVector(o,wa.y),s.addScaledVector(a,wa.z),s}static isFrontFacing(t,e,i,n){return _a.subVectors(i,e),xa.subVectors(t,e),_a.cross(xa).dot(n)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this}setFromAttributeAndIndices(t,e,i,n){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return _a.subVectors(this.c,this.b),xa.subVectors(this.a,this.b),.5*_a.cross(xa).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return t.getNormal(this.a,this.b,this.c,e)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,i){return t.getBarycoord(e,this.a,this.b,this.c,i)}getUV(e,i,n,r,o){return!1===Pa&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Pa=!0),t.getInterpolation(e,this.a,this.b,this.c,i,n,r,o)}getInterpolation(e,i,n,r,o){return t.getInterpolation(e,this.a,this.b,this.c,i,n,r,o)}containsPoint(e){return t.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return t.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){let i,n,r=this.a,o=this.b,a=this.c;Ea.subVectors(o,r),Ma.subVectors(a,r),Ta.subVectors(t,r);let s=Ea.dot(Ta),l=Ma.dot(Ta);if(s<=0&&l<=0)return e.copy(r);Ca.subVectors(t,o);let h=Ea.dot(Ca),u=Ma.dot(Ca);if(h>=0&&u<=h)return e.copy(o);let c=s*u-h*l;if(c<=0&&s>=0&&h<=0)return i=s/(s-h),e.copy(r).addScaledVector(Ea,i);Aa.subVectors(t,a);let p=Ea.dot(Aa),d=Ma.dot(Aa);if(d>=0&&p<=d)return e.copy(a);let f=p*l-s*d;if(f<=0&&l>=0&&d<=0)return n=l/(l-d),e.copy(r).addScaledVector(Ma,n);let g=h*d-p*u;if(g<=0&&u-h>=0&&p-d>=0)return Sa.subVectors(a,o),n=(u-h)/(u-h+(p-d)),e.copy(o).addScaledVector(Sa,n);let m=1/(g+f+c);return i=f*m,n=c*m,e.copy(r).addScaledVector(Ea,i).addScaledVector(Ma,n)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}};(0,r.a)(Ia,"Triangle");var La=Ia,Oa=0,Na=class extends Jn{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Oa++}),this.uuid=er(),this.name="",this.type="Material",this.blending=Ae,this.side=Me,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Ve,this.blendDst=je,this.blendEquation=Ne,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Qe,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Hn,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Vn,this.stencilZFail=Vn,this.stencilZPass=Vn,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(let e in t){let i=t[e];if(void 0===i){console.warn("THREE.Material: parameter '".concat(e,"' has value of undefined."));continue}let n=this[e];void 0!==n?n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[e]=i:console.warn("THREE.Material: '".concat(e,"' is not a property of THREE.").concat(this.type,"."))}}toJSON(t){let e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});let i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(t){let e=[];for(let i in t){let n=t[i];delete n.metadata,e.push(n)}return e}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Ae&&(i.blending=this.blending),this.side!==Me&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(i.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),(0,r.a)(n,"extractFromCache"),e){let e=n(t.textures),r=n(t.images);e.length>0&&(i.textures=e),r.length>0&&(i.images=r)}return i}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;let e=t.clippingPlanes,i=null;if(null!==e){let t=e.length;i=new Array(t);for(let n=0;n!==t;++n)i[n]=e[n].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}};(0,r.a)(Na,"Material");var qa=Na,Ra={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Da={h:0,s:0,l:0},ka={h:0,s:0,l:0};function Ba(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}(0,r.a)(Ba,"hue2rgb");var Fa=class{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Fn){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,zr.toWorkingColorSpace(this,e),this}setRGB(t,e,i,n=zr.workingColorSpace){return this.r=t,this.g=e,this.b=i,zr.toWorkingColorSpace(this,n),this}setHSL(t,e,i,n=zr.workingColorSpace){if(t=rr(t,1),e=nr(e,0,1),i=nr(i,0,1),0===e)this.r=this.g=this.b=i;else{let n=i<=.5?i*(1+e):i+e-i*e,r=2*i-n;this.r=Ba(r,n,t+1/3),this.g=Ba(r,n,t),this.b=Ba(r,n,t-1/3)}return zr.toWorkingColorSpace(this,n),this}setStyle(t,e=Fn){function i(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if((0,r.a)(i,"handleAlpha"),n=/^(\w+)\(([^\)]*)\)/.exec(t)){let r,o=n[1],a=n[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,zr.toWorkingColorSpace(this,e),i(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,zr.toWorkingColorSpace(this,e),i(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){let t=parseFloat(r[1])/360,n=parseFloat(r[2])/100,o=parseFloat(r[3])/100;return i(r[4]),this.setHSL(t,n,o,e)}break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){let i=n[1],r=i.length;if(3===r)return this.setRGB(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15,e);if(6===r)return this.setHex(parseInt(i,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Fn){let i=Ra[t.toLowerCase()];return void 0!==i?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Or(t.r),this.g=Or(t.g),this.b=Or(t.b),this}copyLinearToSRGB(t){return this.r=Nr(t.r),this.g=Nr(t.g),this.b=Nr(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Fn){return zr.fromWorkingColorSpace(za.copy(this),t),nr(255*za.r,0,255)<<16^nr(255*za.g,0,255)<<8^nr(255*za.b,0,255)<<0}getHexString(t=Fn){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=zr.workingColorSpace){zr.fromWorkingColorSpace(za.copy(this),e);let i,n,r=za.r,o=za.g,a=za.b,s=Math.max(r,o,a),l=Math.min(r,o,a),h=(l+s)/2;if(l===s)i=0,n=0;else{let t=s-l;switch(n=h<=.5?t/(s+l):t/(2-s-l),s){case r:i=(o-a)/t+(o<a?6:0);break;case o:i=(a-r)/t+2;break;case a:i=(r-o)/t+4}i/=6}return t.h=i,t.s=n,t.l=h,t}getRGB(t,e=zr.workingColorSpace){return zr.fromWorkingColorSpace(za.copy(this),e),t.r=za.r,t.g=za.g,t.b=za.b,t}getStyle(t=Fn){zr.fromWorkingColorSpace(za.copy(this),t);let e=za.r,i=za.g,n=za.b;return t!==Fn?"color(".concat(t," ").concat(e.toFixed(3)," ").concat(i.toFixed(3)," ").concat(n.toFixed(3),")"):"rgb(".concat(255*e|0,",").concat(255*i|0,",").concat(255*n|0,")")}offsetHSL(t,e,i){return this.getHSL(Da),Da.h+=t,Da.s+=e,Da.l+=i,this.setHSL(Da.h,Da.s,Da.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(Da),t.getHSL(ka);let i=sr(Da.h,ka.h,e),n=sr(Da.s,ka.s,e),r=sr(Da.l,ka.l,e);return this.setHSL(i,n,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){let e=this.r,i=this.g,n=this.b,r=t.elements;return this.r=r[0]*e+r[3]*i+r[6]*n,this.g=r[1]*e+r[4]*i+r[7]*n,this.b=r[2]*e+r[5]*i+r[8]*n,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};(0,r.a)(Fa,"Color");var Ua=Fa,za=new Ua;Ua.NAMES=Ra;var Va=class extends qa{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ua(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ni,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}};(0,r.a)(Va,"MeshBasicMaterial");var ja=Va,Ga=new ho,Ha=new Tr,Wa=class{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=i,this.usage=Wn,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let n=0,r=this.itemSize;n<r;n++)this.array[t+n]=e.array[i+n];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,i=this.count;e<i;e++)Ha.fromBufferAttribute(this,e),Ha.applyMatrix3(t),this.setXY(e,Ha.x,Ha.y);else if(3===this.itemSize)for(let e=0,i=this.count;e<i;e++)Ga.fromBufferAttribute(this,e),Ga.applyMatrix3(t),this.setXYZ(e,Ga.x,Ga.y,Ga.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)Ga.fromBufferAttribute(this,e),Ga.applyMatrix4(t),this.setXYZ(e,Ga.x,Ga.y,Ga.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)Ga.fromBufferAttribute(this,e),Ga.applyNormalMatrix(t),this.setXYZ(e,Ga.x,Ga.y,Ga.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)Ga.fromBufferAttribute(this,e),Ga.transformDirection(t),this.setXYZ(e,Ga.x,Ga.y,Ga.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=wr(e,this.array)),e}setX(t,e){return this.normalized&&(e=Er(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=wr(e,this.array)),e}setY(t,e){return this.normalized&&(e=Er(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=wr(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Er(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=wr(e,this.array)),e}setW(t,e){return this.normalized&&(e=Er(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=Er(e,this.array),i=Er(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,n){return t*=this.itemSize,this.normalized&&(e=Er(e,this.array),i=Er(i,this.array),n=Er(n,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this}setXYZW(t,e,i,n,r){return t*=this.itemSize,this.normalized&&(e=Er(e,this.array),i=Er(i,this.array),n=Er(n,this.array),r=Er(r,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==Wn&&(t.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}};(0,r.a)(Wa,"BufferAttribute");var Xa=Wa,Ya=class extends Xa{constructor(t,e,i){super(new Uint16Array(t),e,i)}};(0,r.a)(Ya,"Uint16BufferAttribute");var Za=Ya,Ja=class extends Xa{constructor(t,e,i){super(new Uint32Array(t),e,i)}};(0,r.a)(Ja,"Uint32BufferAttribute");var Ka=Ja,Qa=class extends Xa{constructor(t,e,i){super(new Float32Array(t),e,i)}};(0,r.a)(Qa,"Float32BufferAttribute");var $a=Qa,ts=0,es=new Go,is=new ya,ns=new ho,rs=new fo,os=new fo,as=new ho,ss=class t extends Jn{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ts++}),this.uuid=er(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Ir(t)?Ka:Za)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){let e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);let i=this.attributes.normal;if(void 0!==i){let e=(new Ar).getNormalMatrix(t);i.applyNormalMatrix(e),i.needsUpdate=!0}let n=this.attributes.tangent;return void 0!==n&&(n.transformDirection(t),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return es.makeRotationFromQuaternion(t),this.applyMatrix4(es),this}rotateX(t){return es.makeRotationX(t),this.applyMatrix4(es),this}rotateY(t){return es.makeRotationY(t),this.applyMatrix4(es),this}rotateZ(t){return es.makeRotationZ(t),this.applyMatrix4(es),this}translate(t,e,i){return es.makeTranslation(t,e,i),this.applyMatrix4(es),this}scale(t,e,i){return es.makeScale(t,e,i),this.applyMatrix4(es),this}lookAt(t){return is.lookAt(t),is.updateMatrix(),this.applyMatrix4(is.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ns).negate(),this.translate(ns.x,ns.y,ns.z),this}setFromPoints(t){let e=[];for(let i=0,n=t.length;i<n;i++){let n=t[i];e.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new $a(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new fo);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new ho(-1/0,-1/0,-1/0),new ho(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,n=e.length;i<n;i++){let t=e[i];rs.setFromBufferAttribute(t),this.morphTargetsRelative?(as.addVectors(this.boundingBox.min,rs.min),this.boundingBox.expandByPoint(as),as.addVectors(this.boundingBox.max,rs.max),this.boundingBox.expandByPoint(as)):(this.boundingBox.expandByPoint(rs.min),this.boundingBox.expandByPoint(rs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new No);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new ho,1/0);if(t){let i=this.boundingSphere.center;if(rs.setFromBufferAttribute(t),e)for(let t=0,r=e.length;t<r;t++){let i=e[t];os.setFromBufferAttribute(i),this.morphTargetsRelative?(as.addVectors(rs.min,os.min),rs.expandByPoint(as),as.addVectors(rs.max,os.max),rs.expandByPoint(as)):(rs.expandByPoint(os.min),rs.expandByPoint(os.max))}rs.getCenter(i);let n=0;for(let e=0,r=t.count;e<r;e++)as.fromBufferAttribute(t,e),n=Math.max(n,i.distanceToSquared(as));if(e)for(let r=0,o=e.length;r<o;r++){let o=e[r],a=this.morphTargetsRelative;for(let e=0,r=o.count;e<r;e++)as.fromBufferAttribute(o,e),a&&(ns.fromBufferAttribute(t,e),as.add(ns)),n=Math.max(n,i.distanceToSquared(as))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");let i=t.array,n=e.position.array,o=e.normal.array,a=e.uv.array,s=n.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Xa(new Float32Array(4*s),4));let l=this.getAttribute("tangent").array,h=[],u=[];for(let r=0;r<s;r++)h[r]=new ho,u[r]=new ho;let c=new ho,p=new ho,d=new ho,f=new Tr,g=new Tr,m=new Tr,v=new ho,y=new ho;function _(t,e,i){c.fromArray(n,3*t),p.fromArray(n,3*e),d.fromArray(n,3*i),f.fromArray(a,2*t),g.fromArray(a,2*e),m.fromArray(a,2*i),p.sub(c),d.sub(c),g.sub(f),m.sub(f);let r=1/(g.x*m.y-m.x*g.y);isFinite(r)&&(v.copy(p).multiplyScalar(m.y).addScaledVector(d,-g.y).multiplyScalar(r),y.copy(d).multiplyScalar(g.x).addScaledVector(p,-m.x).multiplyScalar(r),h[t].add(v),h[e].add(v),h[i].add(v),u[t].add(y),u[e].add(y),u[i].add(y))}(0,r.a)(_,"handleTriangle");let x=this.groups;0===x.length&&(x=[{start:0,count:i.length}]);for(let r=0,T=x.length;r<T;++r){let t=x[r],e=t.start;for(let n=e,r=e+t.count;n<r;n+=3)_(i[n+0],i[n+1],i[n+2])}let b=new ho,w=new ho,E=new ho,M=new ho;function S(t){E.fromArray(o,3*t),M.copy(E);let e=h[t];b.copy(e),b.sub(E.multiplyScalar(E.dot(e))).normalize(),w.crossVectors(M,e);let i=w.dot(u[t])<0?-1:1;l[4*t]=b.x,l[4*t+1]=b.y,l[4*t+2]=b.z,l[4*t+3]=i}(0,r.a)(S,"handleVertex");for(let r=0,T=x.length;r<T;++r){let t=x[r],e=t.start;for(let n=e,r=e+t.count;n<r;n+=3)S(i[n+0]),S(i[n+1]),S(i[n+2])}}computeVertexNormals(){let t=this.index,e=this.getAttribute("position");if(void 0!==e){let i=this.getAttribute("normal");if(void 0===i)i=new Xa(new Float32Array(3*e.count),3),this.setAttribute("normal",i);else for(let t=0,e=i.count;t<e;t++)i.setXYZ(t,0,0,0);let n=new ho,r=new ho,o=new ho,a=new ho,s=new ho,l=new ho,h=new ho,u=new ho;if(t)for(let c=0,p=t.count;c<p;c+=3){let p=t.getX(c+0),d=t.getX(c+1),f=t.getX(c+2);n.fromBufferAttribute(e,p),r.fromBufferAttribute(e,d),o.fromBufferAttribute(e,f),h.subVectors(o,r),u.subVectors(n,r),h.cross(u),a.fromBufferAttribute(i,p),s.fromBufferAttribute(i,d),l.fromBufferAttribute(i,f),a.add(h),s.add(h),l.add(h),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(d,s.x,s.y,s.z),i.setXYZ(f,l.x,l.y,l.z)}else for(let t=0,c=e.count;t<c;t+=3)n.fromBufferAttribute(e,t+0),r.fromBufferAttribute(e,t+1),o.fromBufferAttribute(e,t+2),h.subVectors(o,r),u.subVectors(n,r),h.cross(u),i.setXYZ(t+0,h.x,h.y,h.z),i.setXYZ(t+1,h.x,h.y,h.z),i.setXYZ(t+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){let t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)as.fromBufferAttribute(t,e),as.normalize(),t.setXYZ(e,as.x,as.y,as.z)}toNonIndexed(){function e(t,e){let i=t.array,n=t.itemSize,r=t.normalized,o=new i.constructor(e.length*n),a=0,s=0;for(let l=0,h=e.length;l<h;l++){a=t.isInterleavedBufferAttribute?e[l]*t.data.stride+t.offset:e[l]*n;for(let t=0;t<n;t++)o[s++]=i[a++]}return new Xa(o,n,r)}if((0,r.a)(e,"convertBufferAttribute"),null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let i=new t,n=this.index.array,o=this.attributes;for(let t in o){let r=e(o[t],n);i.setAttribute(t,r)}let a=this.morphAttributes;for(let t in a){let r=[],o=a[t];for(let t=0,i=o.length;t<i;t++){let i=e(o[t],n);r.push(i)}i.morphAttributes[t]=r}i.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let t=0,r=s.length;t<r;t++){let e=s[t];i.addGroup(e.start,e.count,e.materialIndex)}return i}toJSON(){let t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){let e=this.parameters;for(let i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};let e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});let i=this.attributes;for(let s in i){let e=i[s];t.data.attributes[s]=e.toJSON(t.data)}let n={},r=!1;for(let s in this.morphAttributes){let e=this.morphAttributes[s],i=[];for(let n=0,r=e.length;n<r;n++){let r=e[n];i.push(r.toJSON(t.data))}i.length>0&&(n[s]=i,r=!0)}r&&(t.data.morphAttributes=n,t.data.morphTargetsRelative=this.morphTargetsRelative);let o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));let a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let e={};this.name=t.name;let i=t.index;null!==i&&this.setIndex(i.clone(e));let n=t.attributes;for(let l in n){let t=n[l];this.setAttribute(l,t.clone(e))}let r=t.morphAttributes;for(let l in r){let t=[],i=r[l];for(let n=0,r=i.length;n<r;n++)t.push(i[n].clone(e));this.morphAttributes[l]=t}this.morphTargetsRelative=t.morphTargetsRelative;let o=t.groups;for(let l=0,h=o.length;l<h;l++){let t=o[l];this.addGroup(t.start,t.count,t.materialIndex)}let a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());let s=t.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}};(0,r.a)(ss,"BufferGeometry");var ls=ss,hs=new Go,us=new Vo,cs=new No,ps=new ho,ds=new ho,fs=new ho,gs=new ho,ms=new ho,vs=new ho,ys=new Tr,_s=new Tr,xs=new Tr,bs=new ho,ws=new ho,Es=new ho,Ms=new ho,Ss=new ho,Ts=class extends ya{constructor(t=new ls,e=new ja){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){let i=t[e[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=i.length;t<e;t++){let e=i[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(t,e){let i=this.geometry,n=i.attributes.position,r=i.morphAttributes.position,o=i.morphTargetsRelative;e.fromBufferAttribute(n,t);let a=this.morphTargetInfluences;if(r&&a){vs.set(0,0,0);for(let i=0,n=r.length;i<n;i++){let n=a[i],s=r[i];0!==n&&(ms.fromBufferAttribute(s,t),o?vs.addScaledVector(ms,n):vs.addScaledVector(ms.sub(e),n))}e.add(vs)}return this.isSkinnedMesh&&this.applyBoneTransform(t,e),e}raycast(t,e){let i=this.geometry,n=this.material,r=this.matrixWorld;if(void 0===n||(null===i.boundingSphere&&i.computeBoundingSphere(),cs.copy(i.boundingSphere),cs.applyMatrix4(r),us.copy(t.ray).recast(t.near),!1===cs.containsPoint(us.origin)&&(null===us.intersectSphere(cs,ps)||us.origin.distanceToSquared(ps)>(t.far-t.near)**2))||(hs.copy(r).invert(),us.copy(t.ray).applyMatrix4(hs),null!==i.boundingBox&&!1===us.intersectsBox(i.boundingBox)))return;let o,a=i.index,s=i.attributes.position,l=i.attributes.uv,h=i.attributes.uv2,u=i.attributes.normal,c=i.groups,p=i.drawRange;if(null!==a)if(Array.isArray(n))for(let d=0,f=c.length;d<f;d++){let i=c[d],r=n[i.materialIndex];for(let n=Math.max(i.start,p.start),s=Math.min(a.count,Math.min(i.start+i.count,p.start+p.count));n<s;n+=3){let s=a.getX(n),c=a.getX(n+1),p=a.getX(n+2);(o=Ps(this,r,t,us,l,h,u,s,c,p))&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,e.push(o))}}else for(let d=Math.max(0,p.start),f=Math.min(a.count,p.start+p.count);d<f;d+=3){let i=a.getX(d),r=a.getX(d+1),s=a.getX(d+2);(o=Ps(this,n,t,us,l,h,u,i,r,s))&&(o.faceIndex=Math.floor(d/3),e.push(o))}else if(void 0!==s)if(Array.isArray(n))for(let d=0,f=c.length;d<f;d++){let i=c[d],r=n[i.materialIndex];for(let n=Math.max(i.start,p.start),a=Math.min(s.count,Math.min(i.start+i.count,p.start+p.count));n<a;n+=3)(o=Ps(this,r,t,us,l,h,u,n,n+1,n+2))&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,e.push(o))}else for(let d=Math.max(0,p.start),f=Math.min(s.count,p.start+p.count);d<f;d+=3)(o=Ps(this,n,t,us,l,h,u,d,d+1,d+2))&&(o.faceIndex=Math.floor(d/3),e.push(o))}};(0,r.a)(Ts,"Mesh");var Cs=Ts;function As(t,e,i,n,r,o,a,s){let l;if(null===(l=e.side===Se?n.intersectTriangle(a,o,r,!0,s):n.intersectTriangle(r,o,a,e.side===Me,s)))return null;Ss.copy(s),Ss.applyMatrix4(t.matrixWorld);let h=i.ray.origin.distanceTo(Ss);return h<i.near||h>i.far?null:{distance:h,point:Ss.clone(),object:t}}function Ps(t,e,i,n,r,o,a,s,l,h){t.getVertexPosition(s,ds),t.getVertexPosition(l,fs),t.getVertexPosition(h,gs);let u=As(t,e,i,n,ds,fs,gs,Ms);if(u){r&&(ys.fromBufferAttribute(r,s),_s.fromBufferAttribute(r,l),xs.fromBufferAttribute(r,h),u.uv=La.getInterpolation(Ms,ds,fs,gs,ys,_s,xs,new Tr)),o&&(ys.fromBufferAttribute(o,s),_s.fromBufferAttribute(o,l),xs.fromBufferAttribute(o,h),u.uv2=La.getInterpolation(Ms,ds,fs,gs,ys,_s,xs,new Tr)),a&&(bs.fromBufferAttribute(a,s),ws.fromBufferAttribute(a,l),Es.fromBufferAttribute(a,h),u.normal=La.getInterpolation(Ms,ds,fs,gs,bs,ws,Es,new ho),u.normal.dot(n.direction)>0&&u.normal.multiplyScalar(-1));let t={a:s,b:l,c:h,normal:new ho,materialIndex:0};La.getNormal(ds,fs,gs,t.normal),u.face=t}return u}(0,r.a)(As,"checkIntersection"),(0,r.a)(Ps,"checkGeometryIntersection");var Is=class t extends ls{constructor(t=1,e=1,i=1,n=1,o=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:o,depthSegments:a};let s=this;n=Math.floor(n),o=Math.floor(o),a=Math.floor(a);let l=[],h=[],u=[],c=[],p=0,d=0;function f(t,e,i,n,r,o,a,f,g,m,v){let y=o/g,_=a/m,x=o/2,b=a/2,w=f/2,E=g+1,M=m+1,S=0,T=0,C=new ho;for(let s=0;s<M;s++){let o=s*_-b;for(let a=0;a<E;a++){let l=a*y-x;C[t]=l*n,C[e]=o*r,C[i]=w,h.push(C.x,C.y,C.z),C[t]=0,C[e]=0,C[i]=f>0?1:-1,u.push(C.x,C.y,C.z),c.push(a/g),c.push(1-s/m),S+=1}}for(let s=0;s<m;s++)for(let t=0;t<g;t++){let e=p+t+E*s,i=p+t+E*(s+1),n=p+(t+1)+E*(s+1),r=p+(t+1)+E*s;l.push(e,i,r),l.push(i,n,r),T+=6}s.addGroup(d,T,v),d+=T,p+=S}f("z","y","x",-1,-1,i,e,t,a,o,0),f("z","y","x",1,-1,i,e,-t,a,o,1),f("x","z","y",1,1,t,i,e,n,a,2),f("x","z","y",1,-1,t,i,-e,n,a,3),f("x","y","z",1,-1,t,e,i,n,o,4),f("x","y","z",-1,-1,t,e,-i,n,o,5),this.setIndex(l),this.setAttribute("position",new $a(h,3)),this.setAttribute("normal",new $a(u,3)),this.setAttribute("uv",new $a(c,2)),(0,r.a)(f,"buildPlane")}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(e){return new t(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};(0,r.a)(Is,"BoxGeometry");var Ls=Is;function Os(t){let e={};for(let i in t){e[i]={};for(let n in t[i]){let r=t[i][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[i][n]=null):e[i][n]=r.clone():Array.isArray(r)?e[i][n]=r.slice():e[i][n]=r}}return e}function Ns(t){let e={};for(let i=0;i<t.length;i++){let n=Os(t[i]);for(let t in n)e[t]=n[t]}return e}function qs(t){let e=[];for(let i=0;i<t.length;i++)e.push(t[i].clone());return e}function Rs(t){return null===t.getRenderTarget()&&t.outputEncoding===Nn?Fn:Un}(0,r.a)(Os,"cloneUniforms"),(0,r.a)(Ns,"mergeUniforms"),(0,r.a)(qs,"cloneUniformsGroups"),(0,r.a)(Rs,"getUnlitUniformColorSpace");var Ds={clone:Os,merge:Ns},ks="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",Bs="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",Fs=class extends qa{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=ks,this.fragmentShader=Bs,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Os(t.uniforms),this.uniformsGroups=qs(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){let e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(let n in this.uniforms){let i=this.uniforms[n].value;i&&i.isTexture?e.uniforms[n]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[n]={type:"m4",value:i.toArray()}:e.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;let i={};for(let n in this.extensions)!0===this.extensions[n]&&(i[n]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}};(0,r.a)(Fs,"ShaderMaterial");var Us=Fs,zs=class extends ya{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Go,this.projectionMatrix=new Go,this.projectionMatrixInverse=new Go}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}};(0,r.a)(zs,"Camera");var Vs=zs,js=class extends Vs{constructor(t=50,e=1,i=.1,n=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=n,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){let e=.5*this.getFilmHeight()/t;this.fov=2*tr*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){let t=Math.tan(.5*$n*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*tr*Math.atan(Math.tan(.5*$n*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,i,n,r,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=this.near,e=t*Math.tan(.5*$n*this.fov)/this.zoom,i=2*e,n=this.aspect*i,r=-.5*n,o=this.view;if(null!==this.view&&this.view.enabled){let t=o.fullWidth,a=o.fullHeight;r+=o.offsetX*n/t,e-=o.offsetY*i/a,n*=o.width/t,i*=o.height/a}let a=this.filmOffset;0!==a&&(r+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,e,e-i,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}};(0,r.a)(js,"PerspectiveCamera");var Gs=js,Hs=-90,Ws=1,Xs=class extends ya{constructor(t,e,i){super(),this.type="CubeCamera",this.renderTarget=i;let n=new Gs(Hs,Ws,t,e);n.layers=this.layers,n.up.set(0,1,0),n.lookAt(1,0,0),this.add(n);let r=new Gs(Hs,Ws,t,e);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(-1,0,0),this.add(r);let o=new Gs(Hs,Ws,t,e);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);let a=new Gs(Hs,Ws,t,e);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);let s=new Gs(Hs,Ws,t,e);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(0,0,1),this.add(s);let l=new Gs(Hs,Ws,t,e);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(t,e){null===this.parent&&this.updateMatrixWorld();let i=this.renderTarget,[n,r,o,a,s,l]=this.children,h=t.getRenderTarget(),u=t.toneMapping,c=t.xr.enabled;t.toneMapping=ai,t.xr.enabled=!1;let p=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0),t.render(e,n),t.setRenderTarget(i,1),t.render(e,r),t.setRenderTarget(i,2),t.render(e,o),t.setRenderTarget(i,3),t.render(e,a),t.setRenderTarget(i,4),t.render(e,s),i.texture.generateMipmaps=p,t.setRenderTarget(i,5),t.render(e,l),t.setRenderTarget(h),t.toneMapping=u,t.xr.enabled=c,i.texture.needsPMREMUpdate=!0}};(0,r.a)(Xs,"CubeCamera");var Ys=Xs,Zs=class extends Zr{constructor(t,e,i,n,r,o,a,s,l,h){super(t=void 0!==t?t:[],e=void 0!==e?e:di,i,n,r,o,a,s,l,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}};(0,r.a)(Zs,"CubeTexture");var Js=Zs,Ks=class extends $r{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;let i={width:t,height:t,depth:1},n=[i,i,i,i,i,i];this.texture=new Js(n,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:Mi}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;let i=new Ls(5,5,5),n=new Us({name:"CubemapFromEquirect",uniforms:Os({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",side:Se,blending:Ce});n.uniforms.tEquirect.value=e;let r=new Cs(i,n),o=e.minFilter;return e.minFilter===Ti&&(e.minFilter=Mi),new Ys(1,10,this).update(t,r),e.minFilter=o,r.geometry.dispose(),r.material.dispose(),this}clear(t,e,i,n){let r=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,i,n);t.setRenderTarget(r)}};(0,r.a)(Ks,"WebGLCubeRenderTarget");var Qs=Ks,$s=new ho,tl=new ho,el=new Ar,il=class{constructor(t=new ho(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){let n=$s.subVectors(i,e).cross(tl.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(n,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){let t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){let i=t.delta($s),n=this.normal.dot(i);if(0===n)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;let r=-(t.start.dot(this.normal)+this.constant)/n;return r<0||r>1?null:e.copy(t.start).addScaledVector(i,r)}intersectsLine(t){let e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){let i=e||el.getNormalMatrix(t),n=this.coplanarPoint($s).applyMatrix4(t),r=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}};(0,r.a)(il,"Plane");var nl=il,rl=new No,ol=new ho,al=class{constructor(t=new nl,e=new nl,i=new nl,n=new nl,r=new nl,o=new nl){this.planes=[t,e,i,n,r,o]}set(t,e,i,n,r,o){let a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(i),a[3].copy(n),a[4].copy(r),a[5].copy(o),this}copy(t){let e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t){let e=this.planes,i=t.elements,n=i[0],r=i[1],o=i[2],a=i[3],s=i[4],l=i[5],h=i[6],u=i[7],c=i[8],p=i[9],d=i[10],f=i[11],g=i[12],m=i[13],v=i[14],y=i[15];return e[0].setComponents(a-n,u-s,f-c,y-g).normalize(),e[1].setComponents(a+n,u+s,f+c,y+g).normalize(),e[2].setComponents(a+r,u+l,f+p,y+m).normalize(),e[3].setComponents(a-r,u-l,f-p,y-m).normalize(),e[4].setComponents(a-o,u-h,f-d,y-v).normalize(),e[5].setComponents(a+o,u+h,f+d,y+v).normalize(),this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),rl.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{let e=t.geometry;null===e.boundingSphere&&e.computeBoundingSphere(),rl.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(rl)}intersectsSprite(t){return rl.center.set(0,0,0),rl.radius=.7071067811865476,rl.applyMatrix4(t.matrixWorld),this.intersectsSphere(rl)}intersectsSphere(t){let e=this.planes,i=t.center,n=-t.radius;for(let r=0;r<6;r++)if(e[r].distanceToPoint(i)<n)return!1;return!0}intersectsBox(t){let e=this.planes;for(let i=0;i<6;i++){let n=e[i];if(ol.x=n.normal.x>0?t.max.x:t.min.x,ol.y=n.normal.y>0?t.max.y:t.min.y,ol.z=n.normal.z>0?t.max.z:t.min.z,n.distanceToPoint(ol)<0)return!1}return!0}containsPoint(t){let e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}};(0,r.a)(al,"Frustum");var sl=al;function ll(){let t=null,e=!1,i=null,n=null;function o(e,r){i(e,r),n=t.requestAnimationFrame(o)}return(0,r.a)(o,"onAnimationFrame"),{start:function(){!0!==e&&null!==i&&(n=t.requestAnimationFrame(o),e=!0)},stop:function(){t.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(t){i=t},setContext:function(e){t=e}}}function hl(t,e){let i=e.isWebGL2,n=new WeakMap;function o(e,n){let r,o=e.array,a=e.usage,s=t.createBuffer();if(t.bindBuffer(n,s),t.bufferData(n,o,a),e.onUploadCallback(),o instanceof Float32Array)r=5126;else if(o instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!i)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");r=5131}else r=5123;else if(o instanceof Int16Array)r=5122;else if(o instanceof Uint32Array)r=5125;else if(o instanceof Int32Array)r=5124;else if(o instanceof Int8Array)r=5120;else if(o instanceof Uint8Array)r=5121;else{if(!(o instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+o);r=5121}return{buffer:s,type:r,bytesPerElement:o.BYTES_PER_ELEMENT,version:e.version}}function a(e,n,r){let o=n.array,a=n.updateRange;t.bindBuffer(r,e),-1===a.count?t.bufferSubData(r,0,o):(i?t.bufferSubData(r,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):t.bufferSubData(r,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1),n.onUploadCallback()}function s(t){return t.isInterleavedBufferAttribute&&(t=t.data),n.get(t)}function l(e){e.isInterleavedBufferAttribute&&(e=e.data);let i=n.get(e);i&&(t.deleteBuffer(i.buffer),n.delete(e))}function h(t,e){if(t.isGLBufferAttribute){let e=n.get(t);return void((!e||e.version<t.version)&&n.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);let i=n.get(t);void 0===i?n.set(t,o(t,e)):i.version<t.version&&(a(i.buffer,t,e),i.version=t.version)}return(0,r.a)(o,"createBuffer"),(0,r.a)(a,"updateBuffer"),(0,r.a)(s,"get"),(0,r.a)(l,"remove"),(0,r.a)(h,"update"),{get:s,remove:l,update:h}}(0,r.a)(ll,"WebGLAnimation"),(0,r.a)(hl,"WebGLAttributes");var ul=class t extends ls{constructor(t=1,e=1,i=1,n=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n};let r=t/2,o=e/2,a=Math.floor(i),s=Math.floor(n),l=a+1,h=s+1,u=t/a,c=e/s,p=[],d=[],f=[],g=[];for(let m=0;m<h;m++){let t=m*c-o;for(let e=0;e<l;e++){let i=e*u-r;d.push(i,-t,0),f.push(0,0,1),g.push(e/a),g.push(1-m/s)}}for(let m=0;m<s;m++)for(let t=0;t<a;t++){let e=t+l*m,i=t+l*(m+1),n=t+1+l*(m+1),r=t+1+l*m;p.push(e,i,r),p.push(i,n,r)}this.setIndex(p),this.setAttribute("position",new $a(d,3)),this.setAttribute("normal",new $a(f,3)),this.setAttribute("uv",new $a(g,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(e){return new t(e.width,e.height,e.widthSegments,e.heightSegments)}};(0,r.a)(ul,"PlaneGeometry");var cl=ul,pl="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",dl="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",fl="#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",gl="#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",ml="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",vl="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",yl="vec3 transformed = vec3( position );",_l="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",xl="float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",bl="#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",wl="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",El="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",Ml="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",Sl="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",Tl="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",Cl="#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",Al="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",Pl="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",Il="#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",Ll="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",Ol="#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",Nl="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",ql="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",Rl="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",Dl="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",kl="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",Bl="gl_FragColor = linearToOutputTexel( gl_FragColor );",Fl="vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",Ul="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",zl="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",Vl="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",jl="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",Gl="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",Hl="#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",Wl="#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",Xl="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",Yl="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",Zl="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",Jl="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",Kl="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",Ql="LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",$l="varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",th="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",eh="#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",ih="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",nh="varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",rh="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",oh="varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",ah="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif",sh="struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lh="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",hh="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",uh="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",ch="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",ph="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",dh="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",fh="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",gh="#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",mh="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",vh="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",yh="#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",_h="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",xh="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",bh="#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",wh="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",Eh="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",Mh="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",Sh="float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_NORMALMAP_TANGENTSPACE\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",Th="#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",Ch="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",Ah="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",Ph="#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",Ih="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",Lh="#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",Oh="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",Nh="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",qh="#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",Rh="#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",Dh="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",kh="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",Bh="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",Fh="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",Uh="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",zh="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",Vh="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",jh="#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",Gh="#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",Hh="#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",Wh="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",Xh="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",Yh="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",Zh="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",Jh="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",Kh="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",Qh="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",$h="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tu="#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",eu="#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",iu="#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\t\n\t\tvec2 lodFudge = pow( 1.95, lod ) / fullSize;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec2 fullSize = vec2( textureSize( sampler, 0 ) );\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",nu="#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",ru="#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_UV2\n\tattribute vec2 uv2;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",ou="#ifdef USE_UV\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",au="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",su="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",lu="uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",hu="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",uu="#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cu="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",pu="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",du="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",fu="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",gu="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",mu="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",vu="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",yu="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",_u="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",xu="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",bu="#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",wu="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Eu="#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Mu="#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Su="#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",Tu="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Cu="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",Au="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",Pu="#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Iu="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Lu="#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",Ou="#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Nu="#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",qu="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Ru="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",Du="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",ku="#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Bu="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Fu="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Uu="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",zu={alphamap_fragment:pl,alphamap_pars_fragment:dl,alphatest_fragment:fl,alphatest_pars_fragment:gl,aomap_fragment:ml,aomap_pars_fragment:vl,begin_vertex:yl,beginnormal_vertex:_l,bsdfs:xl,iridescence_fragment:bl,bumpmap_pars_fragment:wl,clipping_planes_fragment:El,clipping_planes_pars_fragment:Ml,clipping_planes_pars_vertex:Sl,clipping_planes_vertex:Tl,color_fragment:Cl,color_pars_fragment:Al,color_pars_vertex:Pl,color_vertex:Il,common:Ll,cube_uv_reflection_fragment:Ol,defaultnormal_vertex:Nl,displacementmap_pars_vertex:ql,displacementmap_vertex:Rl,emissivemap_fragment:Dl,emissivemap_pars_fragment:kl,encodings_fragment:Bl,encodings_pars_fragment:Fl,envmap_fragment:Ul,envmap_common_pars_fragment:zl,envmap_pars_fragment:Vl,envmap_pars_vertex:jl,envmap_physical_pars_fragment:eh,envmap_vertex:Gl,fog_vertex:Hl,fog_pars_vertex:Wl,fog_fragment:Xl,fog_pars_fragment:Yl,gradientmap_pars_fragment:Zl,lightmap_fragment:Jl,lightmap_pars_fragment:Kl,lights_lambert_fragment:Ql,lights_lambert_pars_fragment:$l,lights_pars_begin:th,lights_toon_fragment:ih,lights_toon_pars_fragment:nh,lights_phong_fragment:rh,lights_phong_pars_fragment:oh,lights_physical_fragment:ah,lights_physical_pars_fragment:sh,lights_fragment_begin:lh,lights_fragment_maps:hh,lights_fragment_end:uh,logdepthbuf_fragment:ch,logdepthbuf_pars_fragment:ph,logdepthbuf_pars_vertex:dh,logdepthbuf_vertex:fh,map_fragment:gh,map_pars_fragment:mh,map_particle_fragment:vh,map_particle_pars_fragment:yh,metalnessmap_fragment:_h,metalnessmap_pars_fragment:xh,morphcolor_vertex:bh,morphnormal_vertex:wh,morphtarget_pars_vertex:Eh,morphtarget_vertex:Mh,normal_fragment_begin:Sh,normal_fragment_maps:Th,normal_pars_fragment:Ch,normal_pars_vertex:Ah,normal_vertex:Ph,normalmap_pars_fragment:Ih,clearcoat_normal_fragment_begin:Lh,clearcoat_normal_fragment_maps:Oh,clearcoat_pars_fragment:Nh,iridescence_pars_fragment:qh,output_fragment:Rh,packing:Dh,premultiplied_alpha_fragment:kh,project_vertex:Bh,dithering_fragment:Fh,dithering_pars_fragment:Uh,roughnessmap_fragment:zh,roughnessmap_pars_fragment:Vh,shadowmap_pars_fragment:jh,shadowmap_pars_vertex:Gh,shadowmap_vertex:Hh,shadowmask_pars_fragment:Wh,skinbase_vertex:Xh,skinning_pars_vertex:Yh,skinning_vertex:Zh,skinnormal_vertex:Jh,specularmap_fragment:Kh,specularmap_pars_fragment:Qh,tonemapping_fragment:$h,tonemapping_pars_fragment:tu,transmission_fragment:eu,transmission_pars_fragment:iu,uv_pars_fragment:nu,uv_pars_vertex:ru,uv_vertex:ou,worldpos_vertex:au,background_vert:su,background_frag:lu,backgroundCube_vert:hu,backgroundCube_frag:uu,cube_vert:cu,cube_frag:pu,depth_vert:du,depth_frag:fu,distanceRGBA_vert:gu,distanceRGBA_frag:mu,equirect_vert:vu,equirect_frag:yu,linedashed_vert:_u,linedashed_frag:xu,meshbasic_vert:bu,meshbasic_frag:wu,meshlambert_vert:Eu,meshlambert_frag:Mu,meshmatcap_vert:Su,meshmatcap_frag:Tu,meshnormal_vert:Cu,meshnormal_frag:Au,meshphong_vert:Pu,meshphong_frag:Iu,meshphysical_vert:Lu,meshphysical_frag:Ou,meshtoon_vert:Nu,meshtoon_frag:qu,points_vert:Ru,points_frag:Du,shadow_vert:ku,shadow_frag:Bu,sprite_vert:Fu,sprite_frag:Uu},Vu={common:{diffuse:{value:new Ua(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ar},alphaMap:{value:null},alphaMapTransform:{value:new Ar},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ar}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ar}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ar}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ar},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ar},normalScale:{value:new Tr(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ar},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ar}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ar}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ar}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ua(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ua(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ar}},sprite:{diffuse:{value:new Ua(16777215)},opacity:{value:1},center:{value:new Tr(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ar},alphaMap:{value:null},alphaTest:{value:0}}},ju={basic:{uniforms:Ns([Vu.common,Vu.specularmap,Vu.envmap,Vu.aomap,Vu.lightmap,Vu.fog]),vertexShader:zu.meshbasic_vert,fragmentShader:zu.meshbasic_frag},lambert:{uniforms:Ns([Vu.common,Vu.specularmap,Vu.envmap,Vu.aomap,Vu.lightmap,Vu.emissivemap,Vu.bumpmap,Vu.normalmap,Vu.displacementmap,Vu.fog,Vu.lights,{emissive:{value:new Ua(0)}}]),vertexShader:zu.meshlambert_vert,fragmentShader:zu.meshlambert_frag},phong:{uniforms:Ns([Vu.common,Vu.specularmap,Vu.envmap,Vu.aomap,Vu.lightmap,Vu.emissivemap,Vu.bumpmap,Vu.normalmap,Vu.displacementmap,Vu.fog,Vu.lights,{emissive:{value:new Ua(0)},specular:{value:new Ua(1118481)},shininess:{value:30}}]),vertexShader:zu.meshphong_vert,fragmentShader:zu.meshphong_frag},standard:{uniforms:Ns([Vu.common,Vu.envmap,Vu.aomap,Vu.lightmap,Vu.emissivemap,Vu.bumpmap,Vu.normalmap,Vu.displacementmap,Vu.roughnessmap,Vu.metalnessmap,Vu.fog,Vu.lights,{emissive:{value:new Ua(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:zu.meshphysical_vert,fragmentShader:zu.meshphysical_frag},toon:{uniforms:Ns([Vu.common,Vu.aomap,Vu.lightmap,Vu.emissivemap,Vu.bumpmap,Vu.normalmap,Vu.displacementmap,Vu.gradientmap,Vu.fog,Vu.lights,{emissive:{value:new Ua(0)}}]),vertexShader:zu.meshtoon_vert,fragmentShader:zu.meshtoon_frag},matcap:{uniforms:Ns([Vu.common,Vu.bumpmap,Vu.normalmap,Vu.displacementmap,Vu.fog,{matcap:{value:null}}]),vertexShader:zu.meshmatcap_vert,fragmentShader:zu.meshmatcap_frag},points:{uniforms:Ns([Vu.points,Vu.fog]),vertexShader:zu.points_vert,fragmentShader:zu.points_frag},dashed:{uniforms:Ns([Vu.common,Vu.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:zu.linedashed_vert,fragmentShader:zu.linedashed_frag},depth:{uniforms:Ns([Vu.common,Vu.displacementmap]),vertexShader:zu.depth_vert,fragmentShader:zu.depth_frag},normal:{uniforms:Ns([Vu.common,Vu.bumpmap,Vu.normalmap,Vu.displacementmap,{opacity:{value:1}}]),vertexShader:zu.meshnormal_vert,fragmentShader:zu.meshnormal_frag},sprite:{uniforms:Ns([Vu.sprite,Vu.fog]),vertexShader:zu.sprite_vert,fragmentShader:zu.sprite_frag},background:{uniforms:{uvTransform:{value:new Ar},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:zu.background_vert,fragmentShader:zu.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:zu.backgroundCube_vert,fragmentShader:zu.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:zu.cube_vert,fragmentShader:zu.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:zu.equirect_vert,fragmentShader:zu.equirect_frag},distanceRGBA:{uniforms:Ns([Vu.common,Vu.displacementmap,{referencePosition:{value:new ho},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:zu.distanceRGBA_vert,fragmentShader:zu.distanceRGBA_frag},shadow:{uniforms:Ns([Vu.lights,Vu.fog,{color:{value:new Ua(0)},opacity:{value:1}}]),vertexShader:zu.shadow_vert,fragmentShader:zu.shadow_frag}};ju.physical={uniforms:Ns([ju.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ar},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ar},clearcoatNormalScale:{value:new Tr(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ar},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ar},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ar},sheen:{value:0},sheenColor:{value:new Ua(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ar},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ar},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ar},transmissionSamplerSize:{value:new Tr},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ar},attenuationDistance:{value:0},attenuationColor:{value:new Ua(0)},specularColor:{value:new Ua(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ar},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ar}}]),vertexShader:zu.meshphysical_vert,fragmentShader:zu.meshphysical_frag};var Gu={r:0,b:0,g:0};function Hu(t,e,i,n,o,a,s){let l,h,u=new Ua(0),c=!0===a?0:1,p=null,d=0,f=null;function g(n,r){let a=!1,s=!0===r.isScene?r.background:null;s&&s.isTexture&&(s=(r.backgroundBlurriness>0?i:e).get(s));let g=t.xr,v=g.getSession&&g.getSession();v&&"additive"===v.environmentBlendMode&&(s=null),null===s?m(u,c):s&&s.isColor&&(m(s,1),a=!0),(t.autoClear||a)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),s&&(s.isCubeTexture||s.mapping===vi)?(void 0===h&&((h=new Cs(new Ls(1,1,1),new Us({name:"BackgroundCubeMaterial",uniforms:Os(ju.backgroundCube.uniforms),vertexShader:ju.backgroundCube.vertexShader,fragmentShader:ju.backgroundCube.fragmentShader,side:Se,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(t,e,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(h)),h.material.uniforms.envMap.value=s,h.material.uniforms.flipEnvMap.value=s.isCubeTexture&&!1===s.isRenderTargetTexture?-1:1,h.material.uniforms.backgroundBlurriness.value=r.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=r.backgroundIntensity,h.material.toneMapped=s.encoding!==Nn,(p!==s||d!==s.version||f!==t.toneMapping)&&(h.material.needsUpdate=!0,p=s,d=s.version,f=t.toneMapping),h.layers.enableAll(),n.unshift(h,h.geometry,h.material,0,0,null)):s&&s.isTexture&&(void 0===l&&((l=new Cs(new cl(2,2),new Us({name:"BackgroundMaterial",uniforms:Os(ju.background.uniforms),vertexShader:ju.background.vertexShader,fragmentShader:ju.background.fragmentShader,side:Me,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(l)),l.material.uniforms.t2D.value=s,l.material.uniforms.backgroundIntensity.value=r.backgroundIntensity,l.material.toneMapped=s.encoding!==Nn,!0===s.matrixAutoUpdate&&s.updateMatrix(),l.material.uniforms.uvTransform.value.copy(s.matrix),(p!==s||d!==s.version||f!==t.toneMapping)&&(l.material.needsUpdate=!0,p=s,d=s.version,f=t.toneMapping),l.layers.enableAll(),n.unshift(l,l.geometry,l.material,0,0,null))}function m(e,i){e.getRGB(Gu,Rs(t)),n.buffers.color.setClear(Gu.r,Gu.g,Gu.b,i,s)}return(0,r.a)(g,"render"),(0,r.a)(m,"setClear"),{getClearColor:function(){return u},setClearColor:function(t,e=1){u.set(t),m(u,c=e)},getClearAlpha:function(){return c},setClearAlpha:function(t){m(u,c=t)},render:g}}function Wu(t,e,i,n){let o=t.getParameter(34921),a=n.isWebGL2?null:e.get("OES_vertex_array_object"),s=n.isWebGL2||null!==a,l={},h=v(null),u=h,c=!1;function p(e,n,r,o,a){let l=!1;if(s){let t=m(o,r,n);u!==t&&f((u=t).object),(l=y(e,o,r,a))&&_(e,o,r,a)}else{let t=!0===n.wireframe;(u.geometry!==o.id||u.program!==r.id||u.wireframe!==t)&&(u.geometry=o.id,u.program=r.id,u.wireframe=t,l=!0)}null!==a&&i.update(a,34963),(l||c)&&(c=!1,S(e,n,r,o),null!==a&&t.bindBuffer(34963,i.get(a).buffer))}function d(){return n.isWebGL2?t.createVertexArray():a.createVertexArrayOES()}function f(e){return n.isWebGL2?t.bindVertexArray(e):a.bindVertexArrayOES(e)}function g(e){return n.isWebGL2?t.deleteVertexArray(e):a.deleteVertexArrayOES(e)}function m(t,e,i){let n=!0===i.wireframe,r=l[t.id];void 0===r&&(r={},l[t.id]=r);let o=r[e.id];void 0===o&&(o={},r[e.id]=o);let a=o[n];return void 0===a&&(a=v(d()),o[n]=a),a}function v(t){let e=[],i=[],n=[];for(let r=0;r<o;r++)e[r]=0,i[r]=0,n[r]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:i,attributeDivisors:n,object:t,attributes:{},index:null}}function y(t,e,i,n){let r=u.attributes,o=e.attributes,a=0,s=i.getAttributes();for(let l in s)if(s[l].location>=0){let e=r[l],i=o[l];if(void 0===i&&("instanceMatrix"===l&&t.instanceMatrix&&(i=t.instanceMatrix),"instanceColor"===l&&t.instanceColor&&(i=t.instanceColor)),void 0===e||e.attribute!==i||i&&e.data!==i.data)return!0;a++}return u.attributesNum!==a||u.index!==n}function _(t,e,i,n){let r={},o=e.attributes,a=0,s=i.getAttributes();for(let l in s)if(s[l].location>=0){let e=o[l];void 0===e&&("instanceMatrix"===l&&t.instanceMatrix&&(e=t.instanceMatrix),"instanceColor"===l&&t.instanceColor&&(e=t.instanceColor));let i={};i.attribute=e,e&&e.data&&(i.data=e.data),r[l]=i,a++}u.attributes=r,u.attributesNum=a,u.index=n}function x(){let t=u.newAttributes;for(let e=0,i=t.length;e<i;e++)t[e]=0}function b(t){w(t,0)}function w(i,r){let o=u.newAttributes,a=u.enabledAttributes,s=u.attributeDivisors;o[i]=1,0===a[i]&&(t.enableVertexAttribArray(i),a[i]=1),s[i]!==r&&((n.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](i,r),s[i]=r)}function E(){let e=u.newAttributes,i=u.enabledAttributes;for(let n=0,r=i.length;n<r;n++)i[n]!==e[n]&&(t.disableVertexAttribArray(n),i[n]=0)}function M(e,i,r,o,a,s){!0!==n.isWebGL2||5124!==r&&5125!==r?t.vertexAttribPointer(e,i,r,o,a,s):t.vertexAttribIPointer(e,i,r,a,s)}function S(r,o,a,s){if(!1===n.isWebGL2&&(r.isInstancedMesh||s.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;x();let l=s.attributes,h=a.getAttributes(),u=o.defaultAttributeValues;for(let e in h){let n=h[e];if(n.location>=0){let o=l[e];if(void 0===o&&("instanceMatrix"===e&&r.instanceMatrix&&(o=r.instanceMatrix),"instanceColor"===e&&r.instanceColor&&(o=r.instanceColor)),void 0!==o){let e=o.normalized,a=o.itemSize,l=i.get(o);if(void 0===l)continue;let h=l.buffer,u=l.type,c=l.bytesPerElement;if(o.isInterleavedBufferAttribute){let i=o.data,l=i.stride,p=o.offset;if(i.isInstancedInterleavedBuffer){for(let t=0;t<n.locationSize;t++)w(n.location+t,i.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=i.meshPerAttribute*i.count)}else for(let t=0;t<n.locationSize;t++)b(n.location+t);t.bindBuffer(34962,h);for(let t=0;t<n.locationSize;t++)M(n.location+t,a/n.locationSize,u,e,l*c,(p+a/n.locationSize*t)*c)}else{if(o.isInstancedBufferAttribute){for(let t=0;t<n.locationSize;t++)w(n.location+t,o.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let t=0;t<n.locationSize;t++)b(n.location+t);t.bindBuffer(34962,h);for(let t=0;t<n.locationSize;t++)M(n.location+t,a/n.locationSize,u,e,a*c,a/n.locationSize*t*c)}}else if(void 0!==u){let i=u[e];if(void 0!==i)switch(i.length){case 2:t.vertexAttrib2fv(n.location,i);break;case 3:t.vertexAttrib3fv(n.location,i);break;case 4:t.vertexAttrib4fv(n.location,i);break;default:t.vertexAttrib1fv(n.location,i)}}}}E()}function T(){P();for(let t in l){let e=l[t];for(let t in e){let i=e[t];for(let t in i)g(i[t].object),delete i[t];delete e[t]}delete l[t]}}function C(t){if(void 0===l[t.id])return;let e=l[t.id];for(let i in e){let t=e[i];for(let e in t)g(t[e].object),delete t[e];delete e[i]}delete l[t.id]}function A(t){for(let e in l){let i=l[e];if(void 0===i[t.id])continue;let n=i[t.id];for(let t in n)g(n[t].object),delete n[t];delete i[t.id]}}function P(){I(),c=!0,u!==h&&f((u=h).object)}function I(){h.geometry=null,h.program=null,h.wireframe=!1}return(0,r.a)(p,"setup"),(0,r.a)(d,"createVertexArrayObject"),(0,r.a)(f,"bindVertexArrayObject"),(0,r.a)(g,"deleteVertexArrayObject"),(0,r.a)(m,"getBindingState"),(0,r.a)(v,"createBindingState"),(0,r.a)(y,"needsUpdate"),(0,r.a)(_,"saveCache"),(0,r.a)(x,"initAttributes"),(0,r.a)(b,"enableAttribute"),(0,r.a)(w,"enableAttributeAndDivisor"),(0,r.a)(E,"disableUnusedAttributes"),(0,r.a)(M,"vertexAttribPointer"),(0,r.a)(S,"setupVertexAttributes"),(0,r.a)(T,"dispose"),(0,r.a)(C,"releaseStatesOfGeometry"),(0,r.a)(A,"releaseStatesOfProgram"),(0,r.a)(P,"reset"),(0,r.a)(I,"resetDefaultState"),{setup:p,reset:P,resetDefaultState:I,dispose:T,releaseStatesOfGeometry:C,releaseStatesOfProgram:A,initAttributes:x,enableAttribute:b,disableUnusedAttributes:E}}function Xu(t,e,i,n){let o,a=n.isWebGL2;function s(t){o=t}function l(e,n){t.drawArrays(o,e,n),i.update(n,o,1)}function h(n,r,s){if(0===s)return;let l,h;if(a)l=t,h="drawArraysInstanced";else if(h="drawArraysInstancedANGLE",null===(l=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[h](o,n,r,s),i.update(r,o,s)}(0,r.a)(s,"setMode"),(0,r.a)(l,"render"),(0,r.a)(h,"renderInstances"),this.setMode=s,this.render=l,this.renderInstances=h}function Yu(t,e,i){let n;function o(){if(void 0!==n)return n;if(!0===e.has("EXT_texture_filter_anisotropic")){let i=e.get("EXT_texture_filter_anisotropic");n=t.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function a(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}(0,r.a)(o,"getMaxAnisotropy"),(0,r.a)(a,"getMaxPrecision");let s=typeof WebGL2RenderingContext<"u"&&"WebGL2RenderingContext"===t.constructor.name,l=void 0!==i.precision?i.precision:"highp",h=a(l);h!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",h,"instead."),l=h);let u=s||e.has("WEBGL_draw_buffers"),c=!0===i.logarithmicDepthBuffer,p=t.getParameter(34930),d=t.getParameter(35660),f=t.getParameter(3379),g=t.getParameter(34076),m=t.getParameter(34921),v=t.getParameter(36347),y=t.getParameter(36348),_=t.getParameter(36349),x=d>0,b=s||e.has("OES_texture_float");return{isWebGL2:s,drawBuffers:u,getMaxAnisotropy:o,getMaxPrecision:a,precision:l,logarithmicDepthBuffer:c,maxTextures:p,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:g,maxAttributes:m,maxVertexUniforms:v,maxVaryings:y,maxFragmentUniforms:_,vertexTextures:x,floatFragmentTextures:b,floatVertexTextures:x&&b,maxSamples:s?t.getParameter(36183):0}}function Zu(t){let e=this,i=null,n=0,o=!1,a=!1,s=new nl,l=new Ar,h={value:null,needsUpdate:!1};function u(){h.value!==i&&(h.value=i,h.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(t,i,n,r){let o=null!==t?t.length:0,a=null;if(0!==o){if(a=h.value,!0!==r||null===a){let e=n+4*o,r=i.matrixWorldInverse;l.getNormalMatrix(r),(null===a||a.length<e)&&(a=new Float32Array(e));for(let i=0,h=n;i!==o;++i,h+=4)s.copy(t[i]).applyMatrix4(r,l),s.normal.toArray(a,h),a[h+3]=s.constant}h.value=a,h.needsUpdate=!0}return e.numPlanes=o,e.numIntersection=0,a}this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e){let i=0!==t.length||e||0!==n||o;return o=e,n=t.length,i},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(t,e){i=c(t,e,0)},this.setState=function(e,r,s){let l=e.clippingPlanes,p=e.clipIntersection,d=e.clipShadows,f=t.get(e);if(!o||null===l||0===l.length||a&&!d)a?c(null):u();else{let t=a?0:n,e=4*t,o=f.clippingState||null;h.value=o,o=c(l,r,e,s);for(let n=0;n!==e;++n)o[n]=i[n];f.clippingState=o,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=t}},(0,r.a)(u,"resetGlobalState"),(0,r.a)(c,"projectPlanes")}function Ju(t){let e=new WeakMap;function i(t,e){return e===gi?t.mapping=di:e===mi&&(t.mapping=fi),t}function n(n){if(n&&n.isTexture&&!1===n.isRenderTargetTexture){let r=n.mapping;if(r===gi||r===mi){if(e.has(n))return i(e.get(n).texture,n.mapping);{let r=n.image;if(r&&r.height>0){let a=new Qs(r.height/2);return a.fromEquirectangularTexture(t,n),e.set(n,a),n.addEventListener("dispose",o),i(a.texture,n.mapping)}return null}}}return n}function o(t){let i=t.target;i.removeEventListener("dispose",o);let n=e.get(i);void 0!==n&&(e.delete(i),n.dispose())}function a(){e=new WeakMap}return(0,r.a)(i,"mapTextureMapping"),(0,r.a)(n,"get"),(0,r.a)(o,"onTextureDispose"),(0,r.a)(a,"dispose"),{get:n,dispose:a}}(0,r.a)(Hu,"WebGLBackground"),(0,r.a)(Wu,"WebGLBindingStates"),(0,r.a)(Xu,"WebGLBufferRenderer"),(0,r.a)(Yu,"WebGLCapabilities"),(0,r.a)(Zu,"WebGLClipping"),(0,r.a)(Ju,"WebGLCubeMaps");var Ku=class extends Vs{constructor(t=-1,e=1,i=1,n=-1,r=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=n,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,i,n,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,r=i-t,o=i+t,a=n+e,s=n-e;if(null!==this.view&&this.view.enabled){let t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o=(r+=t*this.view.offsetX)+t*this.view.width,s=(a-=e*this.view.offsetY)-e*this.view.height}this.projectionMatrix.makeOrthographic(r,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}};(0,r.a)(Ku,"OrthographicCamera");var Qu=Ku,$u=4,tc=[.125,.215,.35,.446,.526,.582],ec=20,ic=new Qu,nc=new Ua,rc=null,oc=(1+Math.sqrt(5))/2,ac=1/oc,sc=[new ho(1,1,1),new ho(-1,1,1),new ho(1,1,-1),new ho(-1,1,-1),new ho(0,oc,ac),new ho(0,oc,-ac),new ho(ac,0,oc),new ho(-ac,0,oc),new ho(oc,ac,0),new ho(-oc,ac,0)],lc=class{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,n=100){rc=this._renderer.getRenderTarget(),this._setSize(256);let r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(t,i,n,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=gc(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=fc(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(rc),t.scissorTest=!1,pc(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===di||t.mapping===fi?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),rc=this._renderer.getRenderTarget();let i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,i={magFilter:Mi,minFilter:Mi,generateMipmaps:!1,type:qi,format:Fi,encoding:On,depthBuffer:!1},n=cc(t,e,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=cc(t,e,i);let{_lodMax:n}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=uc(n)),this._blurMaterial=dc(n,t,e)}return n}_compileMaterial(t){let e=new Cs(this._lodPlanes[0],t);this._renderer.compile(e,ic)}_sceneToCubeUV(t,e,i,n){let r=new Gs(90,1,e,i),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,h=s.toneMapping;s.getClearColor(nc),s.toneMapping=ai,s.autoClear=!1;let u=new ja({name:"PMREM.Background",side:Se,depthWrite:!1,depthTest:!1}),c=new Cs(new Ls,u),p=!1,d=t.background;d?d.isColor&&(u.color.copy(d),t.background=null,p=!0):(u.color.copy(nc),p=!0);for(let f=0;f<6;f++){let e=f%3;0===e?(r.up.set(0,o[f],0),r.lookAt(a[f],0,0)):1===e?(r.up.set(0,0,o[f]),r.lookAt(0,a[f],0)):(r.up.set(0,o[f],0),r.lookAt(0,0,a[f]));let i=this._cubeSize;pc(n,e*i,f>2?i:0,i,i),s.setRenderTarget(n),p&&s.render(c,r),s.render(t,r)}c.geometry.dispose(),c.material.dispose(),s.toneMapping=h,s.autoClear=l,t.background=d}_textureToCubeUV(t,e){let i=this._renderer,n=t.mapping===di||t.mapping===fi;n?(null===this._cubemapMaterial&&(this._cubemapMaterial=gc()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=fc());let r=n?this._cubemapMaterial:this._equirectMaterial,o=new Cs(this._lodPlanes[0],r);r.uniforms.envMap.value=t;let a=this._cubeSize;pc(e,0,0,3*a,2*a),i.setRenderTarget(e),i.render(o,ic)}_applyPMREM(t){let e=this._renderer,i=e.autoClear;e.autoClear=!1;for(let n=1;n<this._lodPlanes.length;n++){let e=Math.sqrt(this._sigmas[n]*this._sigmas[n]-this._sigmas[n-1]*this._sigmas[n-1]),i=sc[(n-1)%sc.length];this._blur(t,n-1,n,e,i)}e.autoClear=i}_blur(t,e,i,n,r){let o=this._pingPongRenderTarget;this._halfBlur(t,o,e,i,n,"latitudinal",r),this._halfBlur(o,t,i,i,n,"longitudinal",r)}_halfBlur(t,e,i,n,r,o,a){let s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");let h=new Cs(this._lodPlanes[n],l),u=l.uniforms,c=this._sizeLods[i]-1,p=isFinite(r)?Math.PI/(2*c):2*Math.PI/(2*ec-1),d=r/p,f=isFinite(r)?1+Math.floor(3*d):ec;f>ec&&console.warn("sigmaRadians, ".concat(r,", is too large and will clip, as it requested ").concat(f," samples when the maximum is set to ").concat(ec));let g=[],m=0;for(let _=0;_<ec;++_){let t=_/d,e=Math.exp(-t*t/2);g.push(e),0===_?m+=e:_<f&&(m+=2*e)}for(let _=0;_<g.length;_++)g[_]=g[_]/m;u.envMap.value=t.texture,u.samples.value=f,u.weights.value=g,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a);let{_lodMax:v}=this;u.dTheta.value=p,u.mipInt.value=v-i;let y=this._sizeLods[n];pc(e,3*y*(n>v-$u?n-v+$u:0),4*(this._cubeSize-y),3*y,2*y),s.setRenderTarget(e),s.render(h,ic)}};(0,r.a)(lc,"PMREMGenerator");var hc=lc;function uc(t){let e=[],i=[],n=[],r=t,o=t-$u+1+tc.length;for(let a=0;a<o;a++){let o=Math.pow(2,r);i.push(o);let s=1/o;a>t-$u?s=tc[a-t+$u-1]:0===a&&(s=0),n.push(s);let l=1/(o-2),h=-l,u=1+l,c=[h,h,u,h,u,u,h,h,u,u,h,u],p=6,d=6,f=3,g=2,m=1,v=new Float32Array(f*d*p),y=new Float32Array(g*d*p),_=new Float32Array(m*d*p);for(let t=0;t<p;t++){let e=t%3*2/3-1,i=t>2?0:-1,n=[e,i,0,e+2/3,i,0,e+2/3,i+1,0,e,i,0,e+2/3,i+1,0,e,i+1,0];v.set(n,f*d*t),y.set(c,g*d*t);let r=[t,t,t,t,t,t];_.set(r,m*d*t)}let x=new ls;x.setAttribute("position",new Xa(v,f)),x.setAttribute("uv",new Xa(y,g)),x.setAttribute("faceIndex",new Xa(_,m)),e.push(x),r>$u&&r--}return{lodPlanes:e,sizeLods:i,sigmas:n}}function cc(t,e,i){let n=new $r(t,e,i);return n.texture.mapping=vi,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function pc(t,e,i,n,r){t.viewport.set(e,i,n,r),t.scissor.set(e,i,n,r)}function dc(t,e,i){let n=new Float32Array(ec),r=new ho(0,1,0);return new Us({name:"SphericalGaussianBlur",defines:{n:ec,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:"".concat(t,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:mc(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:Ce,depthTest:!1,depthWrite:!1})}function fc(){return new Us({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:mc(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:Ce,depthTest:!1,depthWrite:!1})}function gc(){return new Us({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:mc(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:Ce,depthTest:!1,depthWrite:!1})}function mc(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function vc(t){let e=new WeakMap,i=null;function n(n){if(n&&n.isTexture){let r=n.mapping,s=r===gi||r===mi,l=r===di||r===fi;if(s||l){if(n.isRenderTargetTexture&&!0===n.needsPMREMUpdate){n.needsPMREMUpdate=!1;let r=e.get(n);return null===i&&(i=new hc(t)),r=s?i.fromEquirectangular(n,r):i.fromCubemap(n,r),e.set(n,r),r.texture}if(e.has(n))return e.get(n).texture;{let r=n.image;if(s&&r&&r.height>0||l&&r&&o(r)){null===i&&(i=new hc(t));let r=s?i.fromEquirectangular(n):i.fromCubemap(n);return e.set(n,r),n.addEventListener("dispose",a),r.texture}return null}}}return n}function o(t){let e=0;for(let i=0;i<6;i++)void 0!==t[i]&&e++;return 6===e}function a(t){let i=t.target;i.removeEventListener("dispose",a);let n=e.get(i);void 0!==n&&(e.delete(i),n.dispose())}function s(){e=new WeakMap,null!==i&&(i.dispose(),i=null)}return(0,r.a)(n,"get"),(0,r.a)(o,"isCubeTextureComplete"),(0,r.a)(a,"onTextureDispose"),(0,r.a)(s,"dispose"),{get:n,dispose:s}}function yc(t){let e={};function i(i){if(void 0!==e[i])return e[i];let n;switch(i){case"WEBGL_depth_texture":n=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=t.getExtension(i)}return e[i]=n,n}return(0,r.a)(i,"getExtension"),{has:function(t){return null!==i(t)},init:function(t){t.isWebGL2?i("EXT_color_buffer_float"):(i("WEBGL_depth_texture"),i("OES_texture_float"),i("OES_texture_half_float"),i("OES_texture_half_float_linear"),i("OES_standard_derivatives"),i("OES_element_index_uint"),i("OES_vertex_array_object"),i("ANGLE_instanced_arrays")),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture")},get:function(t){let e=i(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function _c(t,e,i,n){let o={},a=new WeakMap;function s(t){let r=t.target;null!==r.index&&e.remove(r.index);for(let i in r.attributes)e.remove(r.attributes[i]);r.removeEventListener("dispose",s),delete o[r.id];let l=a.get(r);l&&(e.remove(l),a.delete(r)),n.releaseStatesOfGeometry(r),!0===r.isInstancedBufferGeometry&&delete r._maxInstanceCount,i.memory.geometries--}function l(t,e){return!0===o[e.id]||(e.addEventListener("dispose",s),o[e.id]=!0,i.memory.geometries++),e}function h(t){let i=t.attributes;for(let r in i)e.update(i[r],34962);let n=t.morphAttributes;for(let r in n){let t=n[r];for(let i=0,n=t.length;i<n;i++)e.update(t[i],34962)}}function u(t){let i=[],n=t.index,r=t.attributes.position,o=0;if(null!==n){let t=n.array;o=n.version;for(let e=0,n=t.length;e<n;e+=3){let n=t[e+0],r=t[e+1],o=t[e+2];i.push(n,r,r,o,o,n)}}else{let t=r.array;o=r.version;for(let e=0,n=t.length/3-1;e<n;e+=3){let t=e+0,n=e+1,r=e+2;i.push(t,n,n,r,r,t)}}let s=new(Ir(i)?Ka:Za)(i,1);s.version=o;let l=a.get(t);l&&e.remove(l),a.set(t,s)}function c(t){let e=a.get(t);if(e){let i=t.index;null!==i&&e.version<i.version&&u(t)}else u(t);return a.get(t)}return(0,r.a)(s,"onGeometryDispose"),(0,r.a)(l,"get"),(0,r.a)(h,"update"),(0,r.a)(u,"updateWireframeAttribute"),(0,r.a)(c,"getWireframeAttribute"),{get:l,update:h,getWireframeAttribute:c}}function xc(t,e,i,n){let o,a,s,l=n.isWebGL2;function h(t){o=t}function u(t){a=t.type,s=t.bytesPerElement}function c(e,n){t.drawElements(o,n,a,e*s),i.update(n,o,1)}function p(n,r,h){if(0===h)return;let u,c;if(l)u=t,c="drawElementsInstanced";else if(c="drawElementsInstancedANGLE",null===(u=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[c](o,r,a,n*s,h),i.update(r,o,h)}(0,r.a)(h,"setMode"),(0,r.a)(u,"setIndex"),(0,r.a)(c,"render"),(0,r.a)(p,"renderInstances"),this.setMode=h,this.setIndex=u,this.render=c,this.renderInstances=p}function bc(t){let e={frame:0,calls:0,triangles:0,points:0,lines:0};function i(t,i,n){switch(e.calls++,i){case 4:e.triangles+=n*(t/3);break;case 1:e.lines+=n*(t/2);break;case 3:e.lines+=n*(t-1);break;case 2:e.lines+=n*t;break;case 0:e.points+=n*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}function n(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0}return(0,r.a)(i,"update"),(0,r.a)(n,"reset"),{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:n,update:i}}function wc(t,e){return t[0]-e[0]}function Ec(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Mc(t,e,i){let n={},o=new Float32Array(8),a=new WeakMap,s=new Kr,l=[];for(let r=0;r<8;r++)l[r]=[r,0];function h(h,u,c){let p=h.morphTargetInfluences;if(!0===e.isWebGL2){let n=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,o=void 0!==n?n.length:0,l=a.get(u);if(void 0===l||l.count!==o){let t=function(){y.dispose(),a.delete(u),u.removeEventListener("dispose",t)};(0,r.a)(t,"disposeTexture"),void 0!==l&&l.texture.dispose();let i=void 0!==u.morphAttributes.position,n=void 0!==u.morphAttributes.normal,h=void 0!==u.morphAttributes.color,c=u.morphAttributes.position||[],p=u.morphAttributes.normal||[],d=u.morphAttributes.color||[],f=0;!0===i&&(f=1),!0===n&&(f=2),!0===h&&(f=3);let g=u.attributes.position.count*f,m=1;g>e.maxTextureSize&&(m=Math.ceil(g/e.maxTextureSize),g=e.maxTextureSize);let v=new Float32Array(g*m*4*o),y=new eo(v,g,m,o);y.type=Ni,y.needsUpdate=!0;let _=4*f;for(let e=0;e<o;e++){let t=c[e],r=p[e],o=d[e],a=g*m*4*e;for(let e=0;e<t.count;e++){let l=e*_;!0===i&&(s.fromBufferAttribute(t,e),v[a+l+0]=s.x,v[a+l+1]=s.y,v[a+l+2]=s.z,v[a+l+3]=0),!0===n&&(s.fromBufferAttribute(r,e),v[a+l+4]=s.x,v[a+l+5]=s.y,v[a+l+6]=s.z,v[a+l+7]=0),!0===h&&(s.fromBufferAttribute(o,e),v[a+l+8]=s.x,v[a+l+9]=s.y,v[a+l+10]=s.z,v[a+l+11]=4===o.itemSize?s.w:1)}}l={count:o,texture:y,size:new Tr(g,m)},a.set(u,l),u.addEventListener("dispose",t)}let h=0;for(let t=0;t<p.length;t++)h+=p[t];let d=u.morphTargetsRelative?1:1-h;c.getUniforms().setValue(t,"morphTargetBaseInfluence",d),c.getUniforms().setValue(t,"morphTargetInfluences",p),c.getUniforms().setValue(t,"morphTargetsTexture",l.texture,i),c.getUniforms().setValue(t,"morphTargetsTextureSize",l.size)}else{let e=void 0===p?0:p.length,i=n[u.id];if(void 0===i||i.length!==e){i=[];for(let t=0;t<e;t++)i[t]=[t,0];n[u.id]=i}for(let t=0;t<e;t++){let e=i[t];e[0]=t,e[1]=p[t]}i.sort(Ec);for(let t=0;t<8;t++)t<e&&i[t][1]?(l[t][0]=i[t][0],l[t][1]=i[t][1]):(l[t][0]=Number.MAX_SAFE_INTEGER,l[t][1]=0);l.sort(wc);let r=u.morphAttributes.position,a=u.morphAttributes.normal,s=0;for(let t=0;t<8;t++){let e=l[t],i=e[0],n=e[1];i!==Number.MAX_SAFE_INTEGER&&n?(r&&u.getAttribute("morphTarget"+t)!==r[i]&&u.setAttribute("morphTarget"+t,r[i]),a&&u.getAttribute("morphNormal"+t)!==a[i]&&u.setAttribute("morphNormal"+t,a[i]),o[t]=n,s+=n):(r&&!0===u.hasAttribute("morphTarget"+t)&&u.deleteAttribute("morphTarget"+t),a&&!0===u.hasAttribute("morphNormal"+t)&&u.deleteAttribute("morphNormal"+t),o[t]=0)}let h=u.morphTargetsRelative?1:1-s;c.getUniforms().setValue(t,"morphTargetBaseInfluence",h),c.getUniforms().setValue(t,"morphTargetInfluences",o)}}return(0,r.a)(h,"update"),{update:h}}function Sc(t,e,i,n){let o=new WeakMap;function a(t){let r=n.render.frame,a=t.geometry,s=e.get(t,a);return o.get(s)!==r&&(e.update(s),o.set(s,r)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",l)&&t.addEventListener("dispose",l),i.update(t.instanceMatrix,34962),null!==t.instanceColor&&i.update(t.instanceColor,34962)),s}function s(){o=new WeakMap}function l(t){let e=t.target;e.removeEventListener("dispose",l),i.remove(e.instanceMatrix),null!==e.instanceColor&&i.remove(e.instanceColor)}return(0,r.a)(a,"update"),(0,r.a)(s,"dispose"),(0,r.a)(l,"onInstancedMeshDispose"),{update:a,dispose:s}}(0,r.a)(uc,"_createPlanes"),(0,r.a)(cc,"_createRenderTarget"),(0,r.a)(pc,"_setViewport"),(0,r.a)(dc,"_getBlurShader"),(0,r.a)(fc,"_getEquirectMaterial"),(0,r.a)(gc,"_getCubemapMaterial"),(0,r.a)(mc,"_getCommonVertexShader"),(0,r.a)(vc,"WebGLCubeUVMaps"),(0,r.a)(yc,"WebGLExtensions"),(0,r.a)(_c,"WebGLGeometries"),(0,r.a)(xc,"WebGLIndexedBufferRenderer"),(0,r.a)(bc,"WebGLInfo"),(0,r.a)(wc,"numericalSort"),(0,r.a)(Ec,"absNumericalSort"),(0,r.a)(Mc,"WebGLMorphtargets"),(0,r.a)(Sc,"WebGLObjects");var Tc=new Zr,Cc=new eo,Ac=new no,Pc=new Js,Ic=[],Lc=[],Oc=new Float32Array(16),Nc=new Float32Array(9),qc=new Float32Array(4);function Rc(t,e,i){let n=t[0];if(n<=0||n>0)return t;let r=e*i,o=Ic[r];if(void 0===o&&(o=new Float32Array(r),Ic[r]=o),0!==e){n.toArray(o,0);for(let n=1,r=0;n!==e;++n)r+=i,t[n].toArray(o,r)}return o}function Dc(t,e){if(t.length!==e.length)return!1;for(let i=0,n=t.length;i<n;i++)if(t[i]!==e[i])return!1;return!0}function kc(t,e){for(let i=0,n=e.length;i<n;i++)t[i]=e[i]}function Bc(t,e){let i=Lc[e];void 0===i&&(i=new Int32Array(e),Lc[e]=i);for(let n=0;n!==e;++n)i[n]=t.allocateTextureUnit();return i}function Fc(t,e){let i=this.cache;i[0]!==e&&(t.uniform1f(this.addr,e),i[0]=e)}function Uc(t,e){let i=this.cache;if(void 0!==e.x)(i[0]!==e.x||i[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(Dc(i,e))return;t.uniform2fv(this.addr,e),kc(i,e)}}function zc(t,e){let i=this.cache;if(void 0!==e.x)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else if(void 0!==e.r)(i[0]!==e.r||i[1]!==e.g||i[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),i[0]=e.r,i[1]=e.g,i[2]=e.b);else{if(Dc(i,e))return;t.uniform3fv(this.addr,e),kc(i,e)}}function Vc(t,e){let i=this.cache;if(void 0!==e.x)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z||i[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(Dc(i,e))return;t.uniform4fv(this.addr,e),kc(i,e)}}function jc(t,e){let i=this.cache,n=e.elements;if(void 0===n){if(Dc(i,e))return;t.uniformMatrix2fv(this.addr,!1,e),kc(i,e)}else{if(Dc(i,n))return;qc.set(n),t.uniformMatrix2fv(this.addr,!1,qc),kc(i,n)}}function Gc(t,e){let i=this.cache,n=e.elements;if(void 0===n){if(Dc(i,e))return;t.uniformMatrix3fv(this.addr,!1,e),kc(i,e)}else{if(Dc(i,n))return;Nc.set(n),t.uniformMatrix3fv(this.addr,!1,Nc),kc(i,n)}}function Hc(t,e){let i=this.cache,n=e.elements;if(void 0===n){if(Dc(i,e))return;t.uniformMatrix4fv(this.addr,!1,e),kc(i,e)}else{if(Dc(i,n))return;Oc.set(n),t.uniformMatrix4fv(this.addr,!1,Oc),kc(i,n)}}function Wc(t,e){let i=this.cache;i[0]!==e&&(t.uniform1i(this.addr,e),i[0]=e)}function Xc(t,e){let i=this.cache;if(void 0!==e.x)(i[0]!==e.x||i[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(Dc(i,e))return;t.uniform2iv(this.addr,e),kc(i,e)}}function Yc(t,e){let i=this.cache;if(void 0!==e.x)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else{if(Dc(i,e))return;t.uniform3iv(this.addr,e),kc(i,e)}}function Zc(t,e){let i=this.cache;if(void 0!==e.x)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z||i[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(Dc(i,e))return;t.uniform4iv(this.addr,e),kc(i,e)}}function Jc(t,e){let i=this.cache;i[0]!==e&&(t.uniform1ui(this.addr,e),i[0]=e)}function Kc(t,e){let i=this.cache;if(void 0!==e.x)(i[0]!==e.x||i[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(Dc(i,e))return;t.uniform2uiv(this.addr,e),kc(i,e)}}function Qc(t,e){let i=this.cache;if(void 0!==e.x)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else{if(Dc(i,e))return;t.uniform3uiv(this.addr,e),kc(i,e)}}function $c(t,e){let i=this.cache;if(void 0!==e.x)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z||i[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(Dc(i,e))return;t.uniform4uiv(this.addr,e),kc(i,e)}}function tp(t,e,i){let n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture2D(e||Tc,r)}function ep(t,e,i){let n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture3D(e||Ac,r)}function ip(t,e,i){let n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTextureCube(e||Pc,r)}function np(t,e,i){let n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture2DArray(e||Cc,r)}function rp(t){switch(t){case 5126:return Fc;case 35664:return Uc;case 35665:return zc;case 35666:return Vc;case 35674:return jc;case 35675:return Gc;case 35676:return Hc;case 5124:case 35670:return Wc;case 35667:case 35671:return Xc;case 35668:case 35672:return Yc;case 35669:case 35673:return Zc;case 5125:return Jc;case 36294:return Kc;case 36295:return Qc;case 36296:return $c;case 35678:case 36198:case 36298:case 36306:case 35682:return tp;case 35679:case 36299:case 36307:return ep;case 35680:case 36300:case 36308:case 36293:return ip;case 36289:case 36303:case 36311:case 36292:return np}}function op(t,e){t.uniform1fv(this.addr,e)}function ap(t,e){let i=Rc(e,this.size,2);t.uniform2fv(this.addr,i)}function sp(t,e){let i=Rc(e,this.size,3);t.uniform3fv(this.addr,i)}function lp(t,e){let i=Rc(e,this.size,4);t.uniform4fv(this.addr,i)}function hp(t,e){let i=Rc(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,i)}function up(t,e){let i=Rc(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,i)}function cp(t,e){let i=Rc(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,i)}function pp(t,e){t.uniform1iv(this.addr,e)}function dp(t,e){t.uniform2iv(this.addr,e)}function fp(t,e){t.uniform3iv(this.addr,e)}function gp(t,e){t.uniform4iv(this.addr,e)}function mp(t,e){t.uniform1uiv(this.addr,e)}function vp(t,e){t.uniform2uiv(this.addr,e)}function yp(t,e){t.uniform3uiv(this.addr,e)}function _p(t,e){t.uniform4uiv(this.addr,e)}function xp(t,e,i){let n=this.cache,r=e.length,o=Bc(i,r);Dc(n,o)||(t.uniform1iv(this.addr,o),kc(n,o));for(let a=0;a!==r;++a)i.setTexture2D(e[a]||Tc,o[a])}function bp(t,e,i){let n=this.cache,r=e.length,o=Bc(i,r);Dc(n,o)||(t.uniform1iv(this.addr,o),kc(n,o));for(let a=0;a!==r;++a)i.setTexture3D(e[a]||Ac,o[a])}function wp(t,e,i){let n=this.cache,r=e.length,o=Bc(i,r);Dc(n,o)||(t.uniform1iv(this.addr,o),kc(n,o));for(let a=0;a!==r;++a)i.setTextureCube(e[a]||Pc,o[a])}function Ep(t,e,i){let n=this.cache,r=e.length,o=Bc(i,r);Dc(n,o)||(t.uniform1iv(this.addr,o),kc(n,o));for(let a=0;a!==r;++a)i.setTexture2DArray(e[a]||Cc,o[a])}function Mp(t){switch(t){case 5126:return op;case 35664:return ap;case 35665:return sp;case 35666:return lp;case 35674:return hp;case 35675:return up;case 35676:return cp;case 5124:case 35670:return pp;case 35667:case 35671:return dp;case 35668:case 35672:return fp;case 35669:case 35673:return gp;case 5125:return mp;case 36294:return vp;case 36295:return yp;case 36296:return _p;case 35678:case 36198:case 36298:case 36306:case 35682:return xp;case 35679:case 36299:case 36307:return bp;case 35680:case 36300:case 36308:case 36293:return wp;case 36289:case 36303:case 36311:case 36292:return Ep}}(0,r.a)(Rc,"flatten"),(0,r.a)(Dc,"arraysEqual"),(0,r.a)(kc,"copyArray"),(0,r.a)(Bc,"allocTexUnits"),(0,r.a)(Fc,"setValueV1f"),(0,r.a)(Uc,"setValueV2f"),(0,r.a)(zc,"setValueV3f"),(0,r.a)(Vc,"setValueV4f"),(0,r.a)(jc,"setValueM2"),(0,r.a)(Gc,"setValueM3"),(0,r.a)(Hc,"setValueM4"),(0,r.a)(Wc,"setValueV1i"),(0,r.a)(Xc,"setValueV2i"),(0,r.a)(Yc,"setValueV3i"),(0,r.a)(Zc,"setValueV4i"),(0,r.a)(Jc,"setValueV1ui"),(0,r.a)(Kc,"setValueV2ui"),(0,r.a)(Qc,"setValueV3ui"),(0,r.a)($c,"setValueV4ui"),(0,r.a)(tp,"setValueT1"),(0,r.a)(ep,"setValueT3D1"),(0,r.a)(ip,"setValueT6"),(0,r.a)(np,"setValueT2DArray1"),(0,r.a)(rp,"getSingularSetter"),(0,r.a)(op,"setValueV1fArray"),(0,r.a)(ap,"setValueV2fArray"),(0,r.a)(sp,"setValueV3fArray"),(0,r.a)(lp,"setValueV4fArray"),(0,r.a)(hp,"setValueM2Array"),(0,r.a)(up,"setValueM3Array"),(0,r.a)(cp,"setValueM4Array"),(0,r.a)(pp,"setValueV1iArray"),(0,r.a)(dp,"setValueV2iArray"),(0,r.a)(fp,"setValueV3iArray"),(0,r.a)(gp,"setValueV4iArray"),(0,r.a)(mp,"setValueV1uiArray"),(0,r.a)(vp,"setValueV2uiArray"),(0,r.a)(yp,"setValueV3uiArray"),(0,r.a)(_p,"setValueV4uiArray"),(0,r.a)(xp,"setValueT1Array"),(0,r.a)(bp,"setValueT3DArray"),(0,r.a)(wp,"setValueT6Array"),(0,r.a)(Ep,"setValueT2DArrayArray"),(0,r.a)(Mp,"getPureArraySetter");var Sp=class{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.setValue=rp(e.type)}};(0,r.a)(Sp,"SingleUniform");var Tp=Sp,Cp=class{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.size=e.size,this.setValue=Mp(e.type)}};(0,r.a)(Cp,"PureArrayUniform");var Ap=Cp,Pp=class{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,i){let n=this.seq;for(let r=0,o=n.length;r!==o;++r){let o=n[r];o.setValue(t,e[o.id],i)}}};(0,r.a)(Pp,"StructuredUniform");var Ip=Pp,Lp=/(\w+)(\])?(\[|\.)?/g;function Op(t,e){t.seq.push(e),t.map[e.id]=e}function Np(t,e,i){let n=t.name,r=n.length;for(Lp.lastIndex=0;;){let o=Lp.exec(n),a=Lp.lastIndex,s=o[1],l="]"===o[2],h=o[3];if(l&&(s|=0),void 0===h||"["===h&&a+2===r){Op(i,void 0===h?new Tp(s,t,e):new Ap(s,t,e));break}{let t=i.map[s];void 0===t&&Op(i,t=new Ip(s)),i=t}}}(0,r.a)(Op,"addUniform"),(0,r.a)(Np,"parseUniform");var qp=class{constructor(t,e){this.seq=[],this.map={};let i=t.getProgramParameter(e,35718);for(let n=0;n<i;++n){let i=t.getActiveUniform(e,n);Np(i,t.getUniformLocation(e,i.name),this)}}setValue(t,e,i,n){let r=this.map[e];void 0!==r&&r.setValue(t,i,n)}setOptional(t,e,i){let n=e[i];void 0!==n&&this.setValue(t,i,n)}static upload(t,e,i,n){for(let r=0,o=e.length;r!==o;++r){let o=e[r],a=i[o.id];!1!==a.needsUpdate&&o.setValue(t,a.value,n)}}static seqWithValue(t,e){let i=[];for(let n=0,r=t.length;n!==r;++n){let r=t[n];r.id in e&&i.push(r)}return i}};(0,r.a)(qp,"WebGLUniforms");var Rp=qp;function Dp(t,e,i){let n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),n}(0,r.a)(Dp,"WebGLShader");var kp=0;function Bp(t,e){let i=t.split("\n"),n=[],r=Math.max(e-6,0),o=Math.min(e+6,i.length);for(let a=r;a<o;a++){let t=a+1;n.push("".concat(t===e?">":" "," ").concat(t,": ").concat(i[a]))}return n.join("\n")}function Fp(t){switch(t){case On:return["Linear","( value )"];case Nn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function Up(t,e,i){let n=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();if(n&&""===r)return"";let o=/ERROR: 0:(\d+)/.exec(r);if(o){let n=parseInt(o[1]);return i.toUpperCase()+"\n\n"+r+"\n\n"+Bp(t.getShaderSource(e),n)}return r}function zp(t,e){let i=Fp(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function Vp(t,e){let i;switch(e){case si:i="Linear";break;case li:i="Reinhard";break;case hi:i="OptimizedCineon";break;case ui:i="ACESFilmic";break;case ci:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),i="Linear"}return"vec3 "+t+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function jp(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Wp).join("\n")}function Gp(t){let e=[];for(let i in t){let n=t[i];!1!==n&&e.push("#define "+i+" "+n)}return e.join("\n")}function Hp(t,e){let i={},n=t.getProgramParameter(e,35721);for(let r=0;r<n;r++){let n=t.getActiveAttrib(e,r),o=n.name,a=1;35674===n.type&&(a=2),35675===n.type&&(a=3),35676===n.type&&(a=4),i[o]={type:n.type,location:t.getAttribLocation(e,o),locationSize:a}}return i}function Wp(t){return""!==t}function Xp(t,e){let i=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Yp(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}(0,r.a)(Bp,"handleSource"),(0,r.a)(Fp,"getEncodingComponents"),(0,r.a)(Up,"getShaderErrors"),(0,r.a)(zp,"getTexelEncodingFunction"),(0,r.a)(Vp,"getToneMappingFunction"),(0,r.a)(jp,"generateExtensions"),(0,r.a)(Gp,"generateDefines"),(0,r.a)(Hp,"fetchAttributeLocations"),(0,r.a)(Wp,"filterEmptyLine"),(0,r.a)(Xp,"replaceLightNums"),(0,r.a)(Yp,"replaceClippingPlaneNums");var Zp=/^[ \t]*#include +<([\w\d./]+)>/gm;function Jp(t){return t.replace(Zp,Kp)}function Kp(t,e){let i=zu[e];if(void 0===i)throw new Error("Can not resolve #include <"+e+">");return Jp(i)}(0,r.a)(Jp,"resolveIncludes"),(0,r.a)(Kp,"includeReplacer");var Qp=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function $p(t){return t.replace(Qp,td)}function td(t,e,i,n){let r="";for(let o=parseInt(e);o<parseInt(i);o++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function ed(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function id(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===be?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===we?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Ee&&(e="SHADOWMAP_TYPE_VSM"),e}function nd(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case di:case fi:e="ENVMAP_TYPE_CUBE";break;case vi:e="ENVMAP_TYPE_CUBE_UV"}return e}function rd(t){let e="ENVMAP_MODE_REFLECTION";return t.envMap&&t.envMapMode===fi&&(e="ENVMAP_MODE_REFRACTION"),e}function od(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case ni:e="ENVMAP_BLENDING_MULTIPLY";break;case ri:e="ENVMAP_BLENDING_MIX";break;case oi:e="ENVMAP_BLENDING_ADD"}return e}function ad(t){let e=t.envMapCubeUVHeight;if(null===e)return null;let i=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,i),112)),texelHeight:n,maxMip:i}}function sd(t,e,i,n){let r,o,a=t.getContext(),s=i.defines,l=i.vertexShader,h=i.fragmentShader,u=id(i),c=nd(i),p=rd(i),d=od(i),f=ad(i),g=i.isWebGL2?"":jp(i),m=Gp(s),v=a.createProgram(),y=i.glslVersion?"#version "+i.glslVersion+"\n":"";i.isRawShaderMaterial?((r=[m].filter(Wp).join("\n")).length>0&&(r+="\n"),(o=[g,m].filter(Wp).join("\n")).length>0&&(o+="\n")):(r=[ed(i),"#define SHADER_NAME "+i.shaderName,m,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+p:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.displacementMap?"#define USE_DISPLACEMENTMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.mapUv?"#define MAP_UV "+i.mapUv:"",i.alphaMapUv?"#define ALPHAMAP_UV "+i.alphaMapUv:"",i.lightMapUv?"#define LIGHTMAP_UV "+i.lightMapUv:"",i.aoMapUv?"#define AOMAP_UV "+i.aoMapUv:"",i.emissiveMapUv?"#define EMISSIVEMAP_UV "+i.emissiveMapUv:"",i.bumpMapUv?"#define BUMPMAP_UV "+i.bumpMapUv:"",i.normalMapUv?"#define NORMALMAP_UV "+i.normalMapUv:"",i.displacementMapUv?"#define DISPLACEMENTMAP_UV "+i.displacementMapUv:"",i.metalnessMapUv?"#define METALNESSMAP_UV "+i.metalnessMapUv:"",i.roughnessMapUv?"#define ROUGHNESSMAP_UV "+i.roughnessMapUv:"",i.clearcoatMapUv?"#define CLEARCOATMAP_UV "+i.clearcoatMapUv:"",i.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+i.clearcoatNormalMapUv:"",i.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+i.clearcoatRoughnessMapUv:"",i.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+i.iridescenceMapUv:"",i.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+i.iridescenceThicknessMapUv:"",i.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+i.sheenColorMapUv:"",i.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+i.sheenRoughnessMapUv:"",i.specularMapUv?"#define SPECULARMAP_UV "+i.specularMapUv:"",i.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+i.specularColorMapUv:"",i.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+i.specularIntensityMapUv:"",i.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+i.transmissionMapUv:"",i.thicknessMapUv?"#define THICKNESSMAP_UV "+i.thicknessMapUv:"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs2?"#define USE_UV2":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.morphColors&&i.isWebGL2?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+u:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Wp).join("\n"),o=[g,ed(i),"#define SHADER_NAME "+i.shaderName,m,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+c:"",i.envMap?"#define "+p:"",i.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs2?"#define USE_UV2":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+u:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.useLegacyLights?"#define LEGACY_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==ai?"#define TONE_MAPPING":"",i.toneMapping!==ai?zu.tonemapping_pars_fragment:"",i.toneMapping!==ai?Vp("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",zu.encodings_pars_fragment,zp("linearToOutputTexel",i.outputEncoding),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(Wp).join("\n")),l=Yp(l=Xp(l=Jp(l),i),i),h=Yp(h=Xp(h=Jp(h),i),i),l=$p(l),h=$p(h),i.isWebGL2&&!0!==i.isRawShaderMaterial&&(y="#version 300 es\n",r=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+r,o=["#define varying in",i.glslVersion===Xn?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===Xn?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+o);let _,x,b=y+o+h,w=Dp(a,35633,y+r+l),E=Dp(a,35632,b);if(a.attachShader(v,w),a.attachShader(v,E),void 0!==i.index0AttributeName?a.bindAttribLocation(v,0,i.index0AttributeName):!0===i.morphTargets&&a.bindAttribLocation(v,0,"position"),a.linkProgram(v),t.debug.checkShaderErrors){let e=a.getProgramInfoLog(v).trim(),i=a.getShaderInfoLog(w).trim(),n=a.getShaderInfoLog(E).trim(),s=!0,l=!0;if(!1===a.getProgramParameter(v,35714))if(s=!1,"function"==typeof t.debug.onShaderError)t.debug.onShaderError(a,v,w,E);else{let t=Up(a,w,"vertex"),i=Up(a,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(v,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+i)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):(""===i||""===n)&&(l=!1);l&&(this.diagnostics={runnable:s,programLog:e,vertexShader:{log:i,prefix:r},fragmentShader:{log:n,prefix:o}})}return a.deleteShader(w),a.deleteShader(E),this.getUniforms=function(){return void 0===_&&(_=new Rp(a,v)),_},this.getAttributes=function(){return void 0===x&&(x=Hp(a,v)),x},this.destroy=function(){n.releaseStatesOfProgram(this),a.deleteProgram(v),this.program=void 0},this.name=i.shaderName,this.id=kp++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=w,this.fragmentShader=E,this}(0,r.a)($p,"unrollLoops"),(0,r.a)(td,"loopReplacer"),(0,r.a)(ed,"generatePrecision"),(0,r.a)(id,"generateShadowMapTypeDefine"),(0,r.a)(nd,"generateEnvMapTypeDefine"),(0,r.a)(rd,"generateEnvMapModeDefine"),(0,r.a)(od,"generateEnvMapBlendingDefine"),(0,r.a)(ad,"generateCubeUVSize"),(0,r.a)(sd,"WebGLProgram");var ld=0,hd=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){let e=t.vertexShader,i=t.fragmentShader,n=this._getShaderStage(e),r=this._getShaderStage(i),o=this._getShaderCacheForMaterial(t);return!1===o.has(n)&&(o.add(n),n.usedTimes++),!1===o.has(r)&&(o.add(r),r.usedTimes++),this}remove(t){let e=this.materialCache.get(t);for(let i of e)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){let e=this.materialCache,i=e.get(t);return void 0===i&&(i=new Set,e.set(t,i)),i}_getShaderStage(t){let e=this.shaderCache,i=e.get(t);return void 0===i&&(i=new pd(t),e.set(t,i)),i}};(0,r.a)(hd,"WebGLShaderCache");var ud=hd,cd=class{constructor(t){this.id=ld++,this.code=t,this.usedTimes=0}};(0,r.a)(cd,"WebGLShaderStage");var pd=cd;function dd(t,e,i,n,o,a,s){let l=new na,h=new ud,u=[],c=o.isWebGL2,p=o.logarithmicDepthBuffer,d=o.vertexTextures,f=o.precision,g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(t){return 1===t?"uv2":"uv"}function v(r,a,l,u,v){let y=u.fog,_=v.geometry,x=r.isMeshStandardMaterial?u.environment:null,b=(r.isMeshStandardMaterial?i:e).get(r.envMap||x),w=b&&b.mapping===vi?b.image.height:null,E=g[r.type];null!==r.precision&&((f=o.getMaxPrecision(r.precision))!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",f,"instead."));let M,S,T,C,A=_.morphAttributes.position||_.morphAttributes.normal||_.morphAttributes.color,P=void 0!==A?A.length:0,I=0;if(void 0!==_.morphAttributes.position&&(I=1),void 0!==_.morphAttributes.normal&&(I=2),void 0!==_.morphAttributes.color&&(I=3),E){let t=ju[E];M=t.vertexShader,S=t.fragmentShader}else M=r.vertexShader,S=r.fragmentShader,h.update(r),T=h.getVertexShaderID(r),C=h.getFragmentShaderID(r);let L=t.getRenderTarget(),O=!0===v.isInstancedMesh,N=!!r.map,q=!!r.matcap,R=!!b,D=!!r.aoMap,k=!!r.lightMap,B=!!r.bumpMap,F=!!r.normalMap,U=!!r.displacementMap,z=!!r.emissiveMap,V=!!r.metalnessMap,j=!!r.roughnessMap,G=r.clearcoat>0,H=r.iridescence>0,W=r.sheen>0,X=r.transmission>0,Y=G&&!!r.clearcoatMap,Z=G&&!!r.clearcoatNormalMap,J=G&&!!r.clearcoatRoughnessMap,K=H&&!!r.iridescenceMap,Q=H&&!!r.iridescenceThicknessMap,$=W&&!!r.sheenColorMap,tt=W&&!!r.sheenRoughnessMap,et=!!r.specularMap,it=!!r.specularColorMap,nt=!!r.specularIntensityMap,rt=X&&!!r.transmissionMap,ot=X&&!!r.thicknessMap,at=!!r.gradientMap,st=!!r.alphaMap,lt=r.alphaTest>0,ht=!!r.extensions,ut=!!_.attributes.uv2;return{isWebGL2:c,shaderID:E,shaderName:r.type,vertexShader:M,fragmentShader:S,defines:r.defines,customVertexShaderID:T,customFragmentShaderID:C,isRawShaderMaterial:!0===r.isRawShaderMaterial,glslVersion:r.glslVersion,precision:f,instancing:O,instancingColor:O&&null!==v.instanceColor,supportsVertexTextures:d,outputEncoding:null===L?t.outputEncoding:!0===L.isXRRenderTarget?L.texture.encoding:On,map:N,matcap:q,envMap:R,envMapMode:R&&b.mapping,envMapCubeUVHeight:w,aoMap:D,lightMap:k,bumpMap:B,normalMap:F,displacementMap:d&&U,emissiveMap:z,normalMapObjectSpace:F&&r.normalMapType===kn,normalMapTangentSpace:F&&r.normalMapType===Dn,decodeVideoTexture:N&&!0===r.map.isVideoTexture&&r.map.encoding===Nn,metalnessMap:V,roughnessMap:j,clearcoat:G,clearcoatMap:Y,clearcoatNormalMap:Z,clearcoatRoughnessMap:J,iridescence:H,iridescenceMap:K,iridescenceThicknessMap:Q,sheen:W,sheenColorMap:$,sheenRoughnessMap:tt,specularMap:et,specularColorMap:it,specularIntensityMap:nt,transmission:X,transmissionMap:rt,thicknessMap:ot,gradientMap:at,opaque:!1===r.transparent&&r.blending===Ae,alphaMap:st,alphaTest:lt,combine:r.combine,mapUv:N&&m(r.map.channel),aoMapUv:D&&m(r.aoMap.channel),lightMapUv:k&&m(r.lightMap.channel),bumpMapUv:B&&m(r.bumpMap.channel),normalMapUv:F&&m(r.normalMap.channel),displacementMapUv:U&&m(r.displacementMap.channel),emissiveMapUv:z&&m(r.emissiveMap.channel),metalnessMapUv:V&&m(r.metalnessMap.channel),roughnessMapUv:j&&m(r.roughnessMap.channel),clearcoatMapUv:Y&&m(r.clearcoatMap.channel),clearcoatNormalMapUv:Z&&m(r.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:J&&m(r.clearcoatRoughnessMap.channel),iridescenceMapUv:K&&m(r.iridescenceMap.channel),iridescenceThicknessMapUv:Q&&m(r.iridescenceThicknessMap.channel),sheenColorMapUv:$&&m(r.sheenColorMap.channel),sheenRoughnessMapUv:tt&&m(r.sheenRoughnessMap.channel),specularMapUv:et&&m(r.specularMap.channel),specularColorMapUv:it&&m(r.specularColorMap.channel),specularIntensityMapUv:nt&&m(r.specularIntensityMap.channel),transmissionMapUv:rt&&m(r.transmissionMap.channel),thicknessMapUv:ot&&m(r.thicknessMap.channel),alphaMapUv:st&&m(r.alphaMap.channel),vertexTangents:F&&!!_.attributes.tangent,vertexColors:r.vertexColors,vertexAlphas:!0===r.vertexColors&&!!_.attributes.color&&4===_.attributes.color.itemSize,vertexUvs2:ut,pointsUvs:!0===v.isPoints&&!!_.attributes.uv&&(N||st),fog:!!y,useFog:!0===r.fog,fogExp2:y&&y.isFogExp2,flatShading:!0===r.flatShading,sizeAttenuation:!0===r.sizeAttenuation,logarithmicDepthBuffer:p,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==_.morphAttributes.position,morphNormals:void 0!==_.morphAttributes.normal,morphColors:void 0!==_.morphAttributes.color,morphTargetsCount:P,morphTextureStride:I,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numSpotLightMaps:a.spotLightMap.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numSpotLightShadowsWithMaps:a.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:r.dithering,shadowMapEnabled:t.shadowMap.enabled&&l.length>0,shadowMapType:t.shadowMap.type,toneMapping:r.toneMapped?t.toneMapping:ai,useLegacyLights:t.useLegacyLights,premultipliedAlpha:r.premultipliedAlpha,doubleSided:r.side===Te,flipSided:r.side===Se,useDepthPacking:r.depthPacking>=0,depthPacking:r.depthPacking||0,index0AttributeName:r.index0AttributeName,extensionDerivatives:ht&&!0===r.extensions.derivatives,extensionFragDepth:ht&&!0===r.extensions.fragDepth,extensionDrawBuffers:ht&&!0===r.extensions.drawBuffers,extensionShaderTextureLOD:ht&&!0===r.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||n.has("EXT_shader_texture_lod"),customProgramCacheKey:r.customProgramCacheKey()}}function y(e){let i=[];if(e.shaderID?i.push(e.shaderID):(i.push(e.customVertexShaderID),i.push(e.customFragmentShaderID)),void 0!==e.defines)for(let t in e.defines)i.push(t),i.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(_(i,e),x(i,e),i.push(t.outputEncoding)),i.push(e.customProgramCacheKey),i.join()}function _(t,e){t.push(e.precision),t.push(e.outputEncoding),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.mapUv),t.push(e.alphaMapUv),t.push(e.lightMapUv),t.push(e.aoMapUv),t.push(e.bumpMapUv),t.push(e.normalMapUv),t.push(e.displacementMapUv),t.push(e.emissiveMapUv),t.push(e.metalnessMapUv),t.push(e.roughnessMapUv),t.push(e.clearcoatMapUv),t.push(e.clearcoatNormalMapUv),t.push(e.clearcoatRoughnessMapUv),t.push(e.iridescenceMapUv),t.push(e.iridescenceThicknessMapUv),t.push(e.sheenColorMapUv),t.push(e.sheenRoughnessMapUv),t.push(e.specularMapUv),t.push(e.specularColorMapUv),t.push(e.specularIntensityMapUv),t.push(e.transmissionMapUv),t.push(e.thicknessMapUv),t.push(e.combine),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numSpotLightMaps),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.numSpotLightShadowsWithMaps),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}function x(t,e){l.disableAll(),e.isWebGL2&&l.enable(0),e.supportsVertexTextures&&l.enable(1),e.instancing&&l.enable(2),e.instancingColor&&l.enable(3),e.matcap&&l.enable(4),e.envMap&&l.enable(5),e.normalMapObjectSpace&&l.enable(6),e.normalMapTangentSpace&&l.enable(7),e.clearcoat&&l.enable(8),e.iridescence&&l.enable(9),e.alphaTest&&l.enable(10),e.vertexColors&&l.enable(11),e.vertexAlphas&&l.enable(12),e.vertexUvs2&&l.enable(13),e.vertexTangents&&l.enable(14),t.push(l.mask),l.disableAll(),e.fog&&l.enable(0),e.useFog&&l.enable(1),e.flatShading&&l.enable(2),e.logarithmicDepthBuffer&&l.enable(3),e.skinning&&l.enable(4),e.morphTargets&&l.enable(5),e.morphNormals&&l.enable(6),e.morphColors&&l.enable(7),e.premultipliedAlpha&&l.enable(8),e.shadowMapEnabled&&l.enable(9),e.useLegacyLights&&l.enable(10),e.doubleSided&&l.enable(11),e.flipSided&&l.enable(12),e.useDepthPacking&&l.enable(13),e.dithering&&l.enable(14),e.transmission&&l.enable(15),e.sheen&&l.enable(16),e.decodeVideoTexture&&l.enable(17),e.opaque&&l.enable(18),e.pointsUvs&&l.enable(19),t.push(l.mask)}function b(t){let e,i=g[t.type];if(i){let t=ju[i];e=Ds.clone(t.uniforms)}else e=t.uniforms;return e}function w(e,i){let n;for(let t=0,r=u.length;t<r;t++){let e=u[t];if(e.cacheKey===i){++(n=e).usedTimes;break}}return void 0===n&&(n=new sd(t,i,e,a),u.push(n)),n}function E(t){if(0==--t.usedTimes){let e=u.indexOf(t);u[e]=u[u.length-1],u.pop(),t.destroy()}}function M(t){h.remove(t)}function S(){h.dispose()}return(0,r.a)(m,"getChannel"),(0,r.a)(v,"getParameters"),(0,r.a)(y,"getProgramCacheKey"),(0,r.a)(_,"getProgramCacheKeyParameters"),(0,r.a)(x,"getProgramCacheKeyBooleans"),(0,r.a)(b,"getUniforms"),(0,r.a)(w,"acquireProgram"),(0,r.a)(E,"releaseProgram"),(0,r.a)(M,"releaseShaderCache"),(0,r.a)(S,"dispose"),{getParameters:v,getProgramCacheKey:y,getUniforms:b,acquireProgram:w,releaseProgram:E,releaseShaderCache:M,programs:u,dispose:S}}function fd(){let t=new WeakMap;function e(e){let i=t.get(e);return void 0===i&&(i={},t.set(e,i)),i}function i(e){t.delete(e)}function n(e,i,n){t.get(e)[i]=n}function o(){t=new WeakMap}return(0,r.a)(e,"get"),(0,r.a)(i,"remove"),(0,r.a)(n,"update"),(0,r.a)(o,"dispose"),{get:e,remove:i,update:n,dispose:o}}function gd(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function md(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function vd(){let t=[],e=0,i=[],n=[],o=[];function a(){e=0,i.length=0,n.length=0,o.length=0}function s(i,n,r,o,a,s){let l=t[e];return void 0===l?(l={id:i.id,object:i,geometry:n,material:r,groupOrder:o,renderOrder:i.renderOrder,z:a,group:s},t[e]=l):(l.id=i.id,l.object=i,l.geometry=n,l.material=r,l.groupOrder=o,l.renderOrder=i.renderOrder,l.z=a,l.group=s),e++,l}function l(t,e,r,a,l,h){let u=s(t,e,r,a,l,h);r.transmission>0?n.push(u):!0===r.transparent?o.push(u):i.push(u)}function h(t,e,r,a,l,h){let u=s(t,e,r,a,l,h);r.transmission>0?n.unshift(u):!0===r.transparent?o.unshift(u):i.unshift(u)}function u(t,e){i.length>1&&i.sort(t||gd),n.length>1&&n.sort(e||md),o.length>1&&o.sort(e||md)}function c(){for(let i=e,n=t.length;i<n;i++){let e=t[i];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}}return(0,r.a)(a,"init"),(0,r.a)(s,"getNextRenderItem"),(0,r.a)(l,"push"),(0,r.a)(h,"unshift"),(0,r.a)(u,"sort"),(0,r.a)(c,"finish"),{opaque:i,transmissive:n,transparent:o,init:a,push:l,unshift:h,finish:c,sort:u}}function yd(){let t=new WeakMap;function e(e,i){let n,r=t.get(e);return void 0===r?(n=new vd,t.set(e,[n])):i>=r.length?(n=new vd,r.push(n)):n=r[i],n}function i(){t=new WeakMap}return(0,r.a)(e,"get"),(0,r.a)(i,"dispose"),{get:e,dispose:i}}function _d(){let t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let i;switch(e.type){case"DirectionalLight":i={direction:new ho,color:new Ua};break;case"SpotLight":i={position:new ho,direction:new ho,color:new Ua,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new ho,color:new Ua,distance:0,decay:0};break;case"HemisphereLight":i={direction:new ho,skyColor:new Ua,groundColor:new Ua};break;case"RectAreaLight":i={color:new Ua,position:new ho,halfWidth:new ho,halfHeight:new ho}}return t[e.id]=i,i}}}function xd(){let t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let i;switch(e.type){case"DirectionalLight":case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Tr};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Tr,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=i,i}}}(0,r.a)(dd,"WebGLPrograms"),(0,r.a)(fd,"WebGLProperties"),(0,r.a)(gd,"painterSortStable"),(0,r.a)(md,"reversePainterSortStable"),(0,r.a)(vd,"WebGLRenderList"),(0,r.a)(yd,"WebGLRenderLists"),(0,r.a)(_d,"UniformsCache"),(0,r.a)(xd,"ShadowUniformsCache");var bd=0;function wd(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Ed(t,e){let i=new _d,n=xd(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let r=0;r<9;r++)o.probe.push(new ho);let a=new ho,s=new Go,l=new Go;function h(r,a){let s=0,l=0,h=0;for(let t=0;t<9;t++)o.probe[t].set(0,0,0);let u=0,c=0,p=0,d=0,f=0,g=0,m=0,v=0,y=0,_=0;r.sort(wd);let x=!0===a?Math.PI:1;for(let t=0,e=r.length;t<e;t++){let e=r[t],a=e.color,b=e.intensity,w=e.distance,E=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)s+=a.r*b*x,l+=a.g*b*x,h+=a.b*b*x;else if(e.isLightProbe)for(let t=0;t<9;t++)o.probe[t].addScaledVector(e.sh.coefficients[t],b);else if(e.isDirectionalLight){let t=i.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*x),e.castShadow){let t=e.shadow,i=n.get(e);i.shadowBias=t.bias,i.shadowNormalBias=t.normalBias,i.shadowRadius=t.radius,i.shadowMapSize=t.mapSize,o.directionalShadow[u]=i,o.directionalShadowMap[u]=E,o.directionalShadowMatrix[u]=e.shadow.matrix,g++}o.directional[u]=t,u++}else if(e.isSpotLight){let t=i.get(e);t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(a).multiplyScalar(b*x),t.distance=w,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,o.spot[p]=t;let r=e.shadow;if(e.map&&(o.spotLightMap[y]=e.map,y++,r.updateMatrices(e),e.castShadow&&_++),o.spotLightMatrix[p]=r.matrix,e.castShadow){let t=n.get(e);t.shadowBias=r.bias,t.shadowNormalBias=r.normalBias,t.shadowRadius=r.radius,t.shadowMapSize=r.mapSize,o.spotShadow[p]=t,o.spotShadowMap[p]=E,v++}p++}else if(e.isRectAreaLight){let t=i.get(e);t.color.copy(a).multiplyScalar(b),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),o.rectArea[d]=t,d++}else if(e.isPointLight){let t=i.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*x),t.distance=e.distance,t.decay=e.decay,e.castShadow){let t=e.shadow,i=n.get(e);i.shadowBias=t.bias,i.shadowNormalBias=t.normalBias,i.shadowRadius=t.radius,i.shadowMapSize=t.mapSize,i.shadowCameraNear=t.camera.near,i.shadowCameraFar=t.camera.far,o.pointShadow[c]=i,o.pointShadowMap[c]=E,o.pointShadowMatrix[c]=e.shadow.matrix,m++}o.point[c]=t,c++}else if(e.isHemisphereLight){let t=i.get(e);t.skyColor.copy(e.color).multiplyScalar(b*x),t.groundColor.copy(e.groundColor).multiplyScalar(b*x),o.hemi[f]=t,f++}}d>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(o.rectAreaLTC1=Vu.LTC_FLOAT_1,o.rectAreaLTC2=Vu.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(o.rectAreaLTC1=Vu.LTC_HALF_1,o.rectAreaLTC2=Vu.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=s,o.ambient[1]=l,o.ambient[2]=h;let b=o.hash;(b.directionalLength!==u||b.pointLength!==c||b.spotLength!==p||b.rectAreaLength!==d||b.hemiLength!==f||b.numDirectionalShadows!==g||b.numPointShadows!==m||b.numSpotShadows!==v||b.numSpotMaps!==y)&&(o.directional.length=u,o.spot.length=p,o.rectArea.length=d,o.point.length=c,o.hemi.length=f,o.directionalShadow.length=g,o.directionalShadowMap.length=g,o.pointShadow.length=m,o.pointShadowMap.length=m,o.spotShadow.length=v,o.spotShadowMap.length=v,o.directionalShadowMatrix.length=g,o.pointShadowMatrix.length=m,o.spotLightMatrix.length=v+y-_,o.spotLightMap.length=y,o.numSpotLightShadowsWithMaps=_,b.directionalLength=u,b.pointLength=c,b.spotLength=p,b.rectAreaLength=d,b.hemiLength=f,b.numDirectionalShadows=g,b.numPointShadows=m,b.numSpotShadows=v,b.numSpotMaps=y,o.version=bd++)}function u(t,e){let i=0,n=0,r=0,h=0,u=0,c=e.matrixWorldInverse;for(let p=0,d=t.length;p<d;p++){let e=t[p];if(e.isDirectionalLight){let t=o.directional[i];t.direction.setFromMatrixPosition(e.matrixWorld),a.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(a),t.direction.transformDirection(c),i++}else if(e.isSpotLight){let t=o.spot[r];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(c),t.direction.setFromMatrixPosition(e.matrixWorld),a.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(a),t.direction.transformDirection(c),r++}else if(e.isRectAreaLight){let t=o.rectArea[h];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(c),l.identity(),s.copy(e.matrixWorld),s.premultiply(c),l.extractRotation(s),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),t.halfWidth.applyMatrix4(l),t.halfHeight.applyMatrix4(l),h++}else if(e.isPointLight){let t=o.point[n];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(c),n++}else if(e.isHemisphereLight){let t=o.hemi[u];t.direction.setFromMatrixPosition(e.matrixWorld),t.direction.transformDirection(c),u++}}}return(0,r.a)(h,"setup"),(0,r.a)(u,"setupView"),{setup:h,setupView:u,state:o}}function Md(t,e){let i=new Ed(t,e),n=[],o=[];function a(){n.length=0,o.length=0}function s(t){n.push(t)}function l(t){o.push(t)}function h(t){i.setup(n,t)}function u(t){i.setupView(n,t)}return(0,r.a)(a,"init"),(0,r.a)(s,"pushLight"),(0,r.a)(l,"pushShadow"),(0,r.a)(h,"setupLights"),(0,r.a)(u,"setupLightsView"),{init:a,state:{lightsArray:n,shadowsArray:o,lights:i},setupLights:h,setupLightsView:u,pushLight:s,pushShadow:l}}function Sd(t,e){let i=new WeakMap;function n(n,r=0){let o,a=i.get(n);return void 0===a?(o=new Md(t,e),i.set(n,[o])):r>=a.length?(o=new Md(t,e),a.push(o)):o=a[r],o}function o(){i=new WeakMap}return(0,r.a)(n,"get"),(0,r.a)(o,"dispose"),{get:n,dispose:o}}(0,r.a)(wd,"shadowCastingAndTexturingLightsFirst"),(0,r.a)(Ed,"WebGLLights"),(0,r.a)(Md,"WebGLRenderState"),(0,r.a)(Sd,"WebGLRenderStates");var Td=class extends qa{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=qn,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}};(0,r.a)(Td,"MeshDepthMaterial");var Cd=Td,Ad=class extends qa{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}};(0,r.a)(Ad,"MeshDistanceMaterial");var Pd=Ad,Id="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",Ld="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function Od(t,e,i){let n=new sl,o=new Tr,a=new Tr,s=new Kr,l=new Cd({depthPacking:Rn}),h=new Pd,u={},c=i.maxTextureSize,p={[Me]:Se,[Se]:Me,[Te]:Te},d=new Us({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Tr},radius:{value:4}},vertexShader:Id,fragmentShader:Ld}),f=d.clone();f.defines.HORIZONTAL_PASS=1;let g=new ls;g.setAttribute("position",new Xa(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let m=new Cs(g,d),v=this;function y(i,n){let r=e.update(m);d.defines.VSM_SAMPLES!==i.blurSamples&&(d.defines.VSM_SAMPLES=i.blurSamples,f.defines.VSM_SAMPLES=i.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),null===i.mapPass&&(i.mapPass=new $r(o.x,o.y)),d.uniforms.shadow_pass.value=i.map.texture,d.uniforms.resolution.value=i.mapSize,d.uniforms.radius.value=i.radius,t.setRenderTarget(i.mapPass),t.clear(),t.renderBufferDirect(n,null,r,d,m,null),f.uniforms.shadow_pass.value=i.mapPass.texture,f.uniforms.resolution.value=i.mapSize,f.uniforms.radius.value=i.radius,t.setRenderTarget(i.map),t.clear(),t.renderBufferDirect(n,null,r,f,m,null)}function _(e,i,n,r){let o=null,a=!0===n.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(void 0!==a)o=a;else if(o=!0===n.isPointLight?h:l,t.localClippingEnabled&&!0===i.clipShadows&&Array.isArray(i.clippingPlanes)&&0!==i.clippingPlanes.length||i.displacementMap&&0!==i.displacementScale||i.alphaMap&&i.alphaTest>0||i.map&&i.alphaTest>0){let t=o.uuid,e=i.uuid,n=u[t];void 0===n&&(n={},u[t]=n);let r=n[e];void 0===r&&(r=o.clone(),n[e]=r),o=r}return o.visible=i.visible,o.wireframe=i.wireframe,o.side=r===Ee?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:p[i.side],o.alphaMap=i.alphaMap,o.alphaTest=i.alphaTest,o.map=i.map,o.clipShadows=i.clipShadows,o.clippingPlanes=i.clippingPlanes,o.clipIntersection=i.clipIntersection,o.displacementMap=i.displacementMap,o.displacementScale=i.displacementScale,o.displacementBias=i.displacementBias,o.wireframeLinewidth=i.wireframeLinewidth,o.linewidth=i.linewidth,!0===n.isPointLight&&!0===o.isMeshDistanceMaterial&&(t.properties.get(o).light=n),o}function x(i,r,o,a,s){if(!1===i.visible)return;if(i.layers.test(r.layers)&&(i.isMesh||i.isLine||i.isPoints)&&(i.castShadow||i.receiveShadow&&s===Ee)&&(!i.frustumCulled||n.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,i.matrixWorld);let n=e.update(i),r=i.material;if(Array.isArray(r)){let e=n.groups;for(let l=0,h=e.length;l<h;l++){let h=e[l],u=r[h.materialIndex];if(u&&u.visible){let e=_(i,u,a,s);t.renderBufferDirect(o,null,n,e,i,h)}}}else if(r.visible){let e=_(i,r,a,s);t.renderBufferDirect(o,null,n,e,i,null)}}let l=i.children;for(let t=0,e=l.length;t<e;t++)x(l[t],r,o,a,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=be,this.render=function(e,i,r){if(!1===v.enabled||!1===v.autoUpdate&&!1===v.needsUpdate||0===e.length)return;let l=t.getRenderTarget(),h=t.getActiveCubeFace(),u=t.getActiveMipmapLevel(),p=t.state;p.setBlending(Ce),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(let d=0,f=e.length;d<f;d++){let l=e[d],h=l.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;o.copy(h.mapSize);let u=h.getFrameExtents();if(o.multiply(u),a.copy(h.mapSize),(o.x>c||o.y>c)&&(o.x>c&&(a.x=Math.floor(c/u.x),o.x=a.x*u.x,h.mapSize.x=a.x),o.y>c&&(a.y=Math.floor(c/u.y),o.y=a.y*u.y,h.mapSize.y=a.y)),null===h.map){let t=this.type!==Ee?{minFilter:bi,magFilter:bi}:{};h.map=new $r(o.x,o.y,t),h.map.texture.name=l.name+".shadowMap",h.camera.updateProjectionMatrix()}t.setRenderTarget(h.map),t.clear();let f=h.getViewportCount();for(let t=0;t<f;t++){let e=h.getViewport(t);s.set(a.x*e.x,a.y*e.y,a.x*e.z,a.y*e.w),p.viewport(s),h.updateMatrices(l,t),n=h.getFrustum(),x(i,r,h.camera,l,this.type)}!0!==h.isPointLightShadow&&this.type===Ee&&y(h,r),h.needsUpdate=!1}v.needsUpdate=!1,t.setRenderTarget(l,h,u)},(0,r.a)(y,"VSMPass"),(0,r.a)(_,"getDepthMaterial"),(0,r.a)(x,"renderObject")}function Nd(t,e,i){let n=i.isWebGL2;function o(){let e=!1,i=new Kr,n=null,r=new Kr(0,0,0,0);return{setMask:function(i){n!==i&&!e&&(t.colorMask(i,i,i,i),n=i)},setLocked:function(t){e=t},setClear:function(e,n,o,a,s){!0===s&&(e*=a,n*=a,o*=a),i.set(e,n,o,a),!1===r.equals(i)&&(t.clearColor(e,n,o,a),r.copy(i))},reset:function(){e=!1,n=null,r.set(-1,0,0,0)}}}function a(){let e=!1,i=null,n=null,r=null;return{setTest:function(t){t?G(2929):H(2929)},setMask:function(n){i!==n&&!e&&(t.depthMask(n),i=n)},setFunc:function(e){if(n!==e){switch(e){case Ze:t.depthFunc(512);break;case Je:t.depthFunc(519);break;case Ke:t.depthFunc(513);break;case Qe:t.depthFunc(515);break;case $e:t.depthFunc(514);break;case ti:t.depthFunc(518);break;case ei:t.depthFunc(516);break;case ii:t.depthFunc(517);break;default:t.depthFunc(515)}n=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,i=null,n=null,r=null}}}function s(){let e=!1,i=null,n=null,r=null,o=null,a=null,s=null,l=null,h=null;return{setTest:function(t){e||(t?G(2960):H(2960))},setMask:function(n){i!==n&&!e&&(t.stencilMask(n),i=n)},setFunc:function(e,i,a){(n!==e||r!==i||o!==a)&&(t.stencilFunc(e,i,a),n=e,r=i,o=a)},setOp:function(e,i,n){(a!==e||s!==i||l!==n)&&(t.stencilOp(e,i,n),a=e,s=i,l=n)},setLocked:function(t){e=t},setClear:function(e){h!==e&&(t.clearStencil(e),h=e)},reset:function(){e=!1,i=null,n=null,r=null,o=null,a=null,s=null,l=null,h=null}}}(0,r.a)(o,"ColorBuffer"),(0,r.a)(a,"DepthBuffer"),(0,r.a)(s,"StencilBuffer");let l=new o,h=new a,u=new s,c=new WeakMap,p=new WeakMap,d={},f={},g=new WeakMap,m=[],v=null,y=!1,_=null,x=null,b=null,w=null,E=null,M=null,S=null,T=!1,C=null,A=null,P=null,I=null,L=null,O=t.getParameter(35661),N=!1,q=0,R=t.getParameter(7938);-1!==R.indexOf("WebGL")?(q=parseFloat(/^WebGL (\d)/.exec(R)[1]),N=q>=1):-1!==R.indexOf("OpenGL ES")&&(q=parseFloat(/^OpenGL ES (\d)/.exec(R)[1]),N=q>=2);let D=null,k={},B=t.getParameter(3088),F=t.getParameter(2978),U=(new Kr).fromArray(B),z=(new Kr).fromArray(F);function V(e,i,n){let r=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let a=0;a<n;a++)t.texImage2D(i+a,0,6408,1,1,0,6408,5121,r);return o}(0,r.a)(V,"createTexture");let j={};function G(e){!0!==d[e]&&(t.enable(e),d[e]=!0)}function H(e){!1!==d[e]&&(t.disable(e),d[e]=!1)}function W(e,i){return f[e]!==i&&(t.bindFramebuffer(e,i),f[e]=i,n&&(36009===e&&(f[36160]=i),36160===e&&(f[36009]=i)),!0)}function X(n,r){let o=m,a=!1;if(n)if(void 0===(o=g.get(r))&&(o=[],g.set(r,o)),n.isWebGLMultipleRenderTargets){let t=n.texture;if(o.length!==t.length||36064!==o[0]){for(let e=0,i=t.length;e<i;e++)o[e]=36064+e;o.length=t.length,a=!0}}else 36064!==o[0]&&(o[0]=36064,a=!0);else 1029!==o[0]&&(o[0]=1029,a=!0);a&&(i.isWebGL2?t.drawBuffers(o):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(o))}function Y(e){return v!==e&&(t.useProgram(e),v=e,!0)}j[3553]=V(3553,3553,1),j[34067]=V(34067,34069,6),l.setClear(0,0,0,1),h.setClear(1),u.setClear(0),G(2929),h.setFunc(Qe),$(!1),tt(_e),G(2884),K(Ce),(0,r.a)(G,"enable"),(0,r.a)(H,"disable"),(0,r.a)(W,"bindFramebuffer"),(0,r.a)(X,"drawBuffers"),(0,r.a)(Y,"useProgram");let Z={[Ne]:32774,[qe]:32778,[Re]:32779};if(n)Z[De]=32775,Z[ke]=32776;else{let t=e.get("EXT_blend_minmax");null!==t&&(Z[De]=t.MIN_EXT,Z[ke]=t.MAX_EXT)}let J={[Be]:0,[Fe]:1,[Ue]:768,[Ve]:770,[Ye]:776,[We]:774,[Ge]:772,[ze]:769,[je]:771,[Xe]:775,[He]:773};function K(e,i,n,r,o,a,s,l){if(e!==Ce){if(!1===y&&(G(3042),y=!0),e===Oe)o=o||i,a=a||n,s=s||r,(i!==x||o!==E)&&(t.blendEquationSeparate(Z[i],Z[o]),x=i,E=o),(n!==b||r!==w||a!==M||s!==S)&&(t.blendFuncSeparate(J[n],J[r],J[a],J[s]),b=n,w=r,M=a,S=s),_=e,T=!1;else if(e!==_||l!==T){if((x!==Ne||E!==Ne)&&(t.blendEquation(32774),x=Ne,E=Ne),l)switch(e){case Ae:t.blendFuncSeparate(1,771,1,771);break;case Pe:t.blendFunc(1,1);break;case Ie:t.blendFuncSeparate(0,769,0,1);break;case Le:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case Ae:t.blendFuncSeparate(770,771,1,771);break;case Pe:t.blendFunc(770,1);break;case Ie:t.blendFuncSeparate(0,769,0,1);break;case Le:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}b=null,w=null,M=null,S=null,_=e,T=l}}else!0===y&&(H(3042),y=!1)}function Q(t,e){t.side===Te?H(2884):G(2884);let i=t.side===Se;e&&(i=!i),$(i),t.blending===Ae&&!1===t.transparent?K(Ce):K(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),h.setFunc(t.depthFunc),h.setTest(t.depthTest),h.setMask(t.depthWrite),l.setMask(t.colorWrite);let n=t.stencilWrite;u.setTest(n),n&&(u.setMask(t.stencilWriteMask),u.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),u.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),it(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?G(32926):H(32926)}function $(e){C!==e&&(e?t.frontFace(2304):t.frontFace(2305),C=e)}function tt(e){e!==ye?(G(2884),e!==A&&(e===_e?t.cullFace(1029):e===xe?t.cullFace(1028):t.cullFace(1032))):H(2884),A=e}function et(e){e!==P&&(N&&t.lineWidth(e),P=e)}function it(e,i,n){e?(G(32823),(I!==i||L!==n)&&(t.polygonOffset(i,n),I=i,L=n)):H(32823)}function nt(t){t?G(3089):H(3089)}function rt(e){void 0===e&&(e=33984+O-1),D!==e&&(t.activeTexture(e),D=e)}function ot(e,i,n){void 0===n&&(n=null===D?33984+O-1:D);let r=k[n];void 0===r&&(r={type:void 0,texture:void 0},k[n]=r),(r.type!==e||r.texture!==i)&&(D!==n&&(t.activeTexture(n),D=n),t.bindTexture(e,i||j[e]),r.type=e,r.texture=i)}function at(){let e=k[D];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)}function st(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function lt(){try{t.compressedTexImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function ht(){try{t.texSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function ut(){try{t.texSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function ct(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function pt(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function dt(){try{t.texStorage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function ft(){try{t.texStorage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function gt(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function mt(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function vt(e){!1===U.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),U.copy(e))}function yt(e){!1===z.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),z.copy(e))}function _t(e,i){let n=p.get(i);void 0===n&&(n=new WeakMap,p.set(i,n));let r=n.get(e);void 0===r&&(r=t.getUniformBlockIndex(i,e.name),n.set(e,r))}function xt(e,i){let n=p.get(i).get(e);c.get(i)!==n&&(t.uniformBlockBinding(i,n,e.__bindingPointIndex),c.set(i,n))}function bt(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===n&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),d={},D=null,k={},f={},g=new WeakMap,m=[],v=null,y=!1,_=null,x=null,b=null,w=null,E=null,M=null,S=null,T=!1,C=null,A=null,P=null,I=null,L=null,U.set(0,0,t.canvas.width,t.canvas.height),z.set(0,0,t.canvas.width,t.canvas.height),l.reset(),h.reset(),u.reset()}return(0,r.a)(K,"setBlending"),(0,r.a)(Q,"setMaterial"),(0,r.a)($,"setFlipSided"),(0,r.a)(tt,"setCullFace"),(0,r.a)(et,"setLineWidth"),(0,r.a)(it,"setPolygonOffset"),(0,r.a)(nt,"setScissorTest"),(0,r.a)(rt,"activeTexture"),(0,r.a)(ot,"bindTexture"),(0,r.a)(at,"unbindTexture"),(0,r.a)(st,"compressedTexImage2D"),(0,r.a)(lt,"compressedTexImage3D"),(0,r.a)(ht,"texSubImage2D"),(0,r.a)(ut,"texSubImage3D"),(0,r.a)(ct,"compressedTexSubImage2D"),(0,r.a)(pt,"compressedTexSubImage3D"),(0,r.a)(dt,"texStorage2D"),(0,r.a)(ft,"texStorage3D"),(0,r.a)(gt,"texImage2D"),(0,r.a)(mt,"texImage3D"),(0,r.a)(vt,"scissor"),(0,r.a)(yt,"viewport"),(0,r.a)(_t,"updateUBOMapping"),(0,r.a)(xt,"uniformBlockBinding"),(0,r.a)(bt,"reset"),{buffers:{color:l,depth:h,stencil:u},enable:G,disable:H,bindFramebuffer:W,drawBuffers:X,useProgram:Y,setBlending:K,setMaterial:Q,setFlipSided:$,setCullFace:tt,setLineWidth:et,setPolygonOffset:it,setScissorTest:nt,activeTexture:rt,bindTexture:ot,unbindTexture:at,compressedTexImage2D:st,compressedTexImage3D:lt,texImage2D:gt,texImage3D:mt,updateUBOMapping:_t,uniformBlockBinding:xt,texStorage2D:dt,texStorage3D:ft,texSubImage2D:ht,texSubImage3D:ut,compressedTexSubImage2D:ct,compressedTexSubImage3D:pt,scissor:vt,viewport:yt,reset:bt}}function qd(t,e,i,n,o,a,s){let l,h=o.isWebGL2,u=o.maxTextures,c=o.maxCubemapSize,p=o.maxTextureSize,d=o.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,g=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap,v=new WeakMap,y=!1;try{y=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function _(t,e){return y?new OffscreenCanvas(t,e):Lr("canvas")}function x(t,e,i,n){let r=1;if((t.width>n||t.height>n)&&(r=n/Math.max(t.width,t.height)),r<1||!0===e){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){let n=e?xr:Math.floor,o=n(r*t.width),a=n(r*t.height);void 0===l&&(l=_(o,a));let s=i?_(o,a):l;return s.width=o,s.height=a,s.getContext("2d").drawImage(t,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+a+")."),s}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function b(t){return yr(t.width)&&yr(t.height)}function w(t){return!h&&(t.wrapS!==_i||t.wrapT!==_i||t.minFilter!==bi&&t.minFilter!==Mi)}function E(t,e){return t.generateMipmaps&&e&&t.minFilter!==bi&&t.minFilter!==Mi}function M(e){t.generateMipmap(e)}function S(i,n,r,o,a=!1){if(!1===h)return n;if(null!==i){if(void 0!==t[i])return t[i];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+i+"'")}let s=n;return 6403===n&&(5126===r&&(s=33326),5131===r&&(s=33325),5121===r&&(s=33321)),33319===n&&(5126===r&&(s=33328),5131===r&&(s=33327),5121===r&&(s=33323)),6408===n&&(5126===r&&(s=34836),5131===r&&(s=34842),5121===r&&(s=o===Nn&&!1===a?35907:32856),32819===r&&(s=32854),32820===r&&(s=32855)),(33325===s||33326===s||33327===s||33328===s||34842===s||34836===s)&&e.get("EXT_color_buffer_float"),s}function T(t,e,i){return!0===E(t,i)||t.isFramebufferTexture&&t.minFilter!==bi&&t.minFilter!==Mi?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function C(t){return t===bi||t===wi||t===Ei?9728:9729}function A(t){let e=t.target;e.removeEventListener("dispose",A),I(e),e.isVideoTexture&&m.delete(e)}function P(t){let e=t.target;e.removeEventListener("dispose",P),O(e)}function I(t){let e=n.get(t);if(void 0===e.__webglInit)return;let i=t.source,r=v.get(i);if(r){let n=r[e.__cacheKey];n.usedTimes--,0===n.usedTimes&&L(t),0===Object.keys(r).length&&v.delete(i)}n.remove(t)}function L(e){let i=n.get(e);t.deleteTexture(i.__webglTexture);let r=e.source;delete v.get(r)[i.__cacheKey],s.memory.textures--}function O(e){let i=e.texture,r=n.get(e),o=n.get(i);if(void 0!==o.__webglTexture&&(t.deleteTexture(o.__webglTexture),s.memory.textures--),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(let n=0;n<6;n++)t.deleteFramebuffer(r.__webglFramebuffer[n]),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer[n]);else{if(t.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&t.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(let e=0;e<r.__webglColorRenderbuffer.length;e++)r.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(r.__webglColorRenderbuffer[e]);r.__webglDepthRenderbuffer&&t.deleteRenderbuffer(r.__webglDepthRenderbuffer)}if(e.isWebGLMultipleRenderTargets)for(let a=0,l=i.length;a<l;a++){let e=n.get(i[a]);e.__webglTexture&&(t.deleteTexture(e.__webglTexture),s.memory.textures--),n.remove(i[a])}n.remove(i),n.remove(e)}(0,r.a)(_,"createCanvas"),(0,r.a)(x,"resizeImage"),(0,r.a)(b,"isPowerOfTwo$1"),(0,r.a)(w,"textureNeedsPowerOfTwo"),(0,r.a)(E,"textureNeedsGenerateMipmaps"),(0,r.a)(M,"generateMipmap"),(0,r.a)(S,"getInternalFormat"),(0,r.a)(T,"getMipLevels"),(0,r.a)(C,"filterFallback"),(0,r.a)(A,"onTextureDispose"),(0,r.a)(P,"onRenderTargetDispose"),(0,r.a)(I,"deallocateTexture"),(0,r.a)(L,"deleteTexture"),(0,r.a)(O,"deallocateRenderTarget");let N=0;function q(){N=0}function R(){let t=N;return t>=u&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+u),N+=1,t}function D(t){let e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.wrapR||0),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.encoding),e.join()}function k(t,e){let r=n.get(t);if(t.isVideoTexture&&nt(t),!1===t.isRenderTargetTexture&&t.version>0&&r.__version!==t.version){let i=t.image;if(null===i)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==i.complete)return void H(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}i.bindTexture(3553,r.__webglTexture,33984+e)}function B(t,e){let r=n.get(t);t.version>0&&r.__version!==t.version?H(r,t,e):i.bindTexture(35866,r.__webglTexture,33984+e)}function F(t,e){let r=n.get(t);t.version>0&&r.__version!==t.version?H(r,t,e):i.bindTexture(32879,r.__webglTexture,33984+e)}function U(t,e){let r=n.get(t);t.version>0&&r.__version!==t.version?W(r,t,e):i.bindTexture(34067,r.__webglTexture,33984+e)}(0,r.a)(q,"resetTextureUnits"),(0,r.a)(R,"allocateTextureUnit"),(0,r.a)(D,"getTextureCacheKey"),(0,r.a)(k,"setTexture2D"),(0,r.a)(B,"setTexture2DArray"),(0,r.a)(F,"setTexture3D"),(0,r.a)(U,"setTextureCube");let z={[yi]:10497,[_i]:33071,[xi]:33648},V={[bi]:9728,[wi]:9984,[Ei]:9986,[Mi]:9729,[Si]:9985,[Ti]:9987};function j(i,r,a){if(a?(t.texParameteri(i,10242,z[r.wrapS]),t.texParameteri(i,10243,z[r.wrapT]),(32879===i||35866===i)&&t.texParameteri(i,32882,z[r.wrapR]),t.texParameteri(i,10240,V[r.magFilter]),t.texParameteri(i,10241,V[r.minFilter])):(t.texParameteri(i,10242,33071),t.texParameteri(i,10243,33071),(32879===i||35866===i)&&t.texParameteri(i,32882,33071),(r.wrapS!==_i||r.wrapT!==_i)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(i,10240,C(r.magFilter)),t.texParameteri(i,10241,C(r.minFilter)),r.minFilter!==bi&&r.minFilter!==Mi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){let a=e.get("EXT_texture_filter_anisotropic");if(r.magFilter===bi||r.minFilter!==Ei&&r.minFilter!==Ti||r.type===Ni&&!1===e.has("OES_texture_float_linear")||!1===h&&r.type===qi&&!1===e.has("OES_texture_half_float_linear"))return;(r.anisotropy>1||n.get(r).__currentAnisotropy)&&(t.texParameterf(i,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(r.anisotropy,o.getMaxAnisotropy())),n.get(r).__currentAnisotropy=r.anisotropy)}}function G(e,i){let n=!1;void 0===e.__webglInit&&(e.__webglInit=!0,i.addEventListener("dispose",A));let r=i.source,o=v.get(r);void 0===o&&(o={},v.set(r,o));let a=D(i);if(a!==e.__cacheKey){void 0===o[a]&&(o[a]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,n=!0),o[a].usedTimes++;let r=o[e.__cacheKey];void 0!==r&&(o[e.__cacheKey].usedTimes--,0===r.usedTimes&&L(i)),e.__cacheKey=a,e.__webglTexture=o[a].texture}return n}function H(e,r,o){let s=3553;(r.isDataArrayTexture||r.isCompressedArrayTexture)&&(s=35866),r.isData3DTexture&&(s=32879);let l=G(e,r),u=r.source;i.bindTexture(s,e.__webglTexture,33984+o);let c=n.get(u);if(u.version!==c.__version||!0===l){i.activeTexture(33984+o),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);let e=w(r)&&!1===b(r.image),n=x(r.image,e,!1,p),d=b(n=rt(r,n))||h,f=a.convert(r.format,r.encoding),g=a.convert(r.type),m=S(r.internalFormat,f,g,r.encoding,r.isVideoTexture);j(s,r,d);let v,y=r.mipmaps,_=h&&!0!==r.isVideoTexture,C=void 0===c.__version||!0===l,A=T(r,n,d);if(r.isDepthTexture)m=6402,h?m=r.type===Ni?36012:r.type===Oi?33190:r.type===ki?35056:33189:r.type===Ni&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===Vi&&6402===m&&r.type!==Ii&&r.type!==Oi&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Oi,g=a.convert(r.type)),r.format===ji&&6402===m&&(m=34041,r.type!==ki&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=ki,g=a.convert(r.type))),C&&(_?i.texStorage2D(3553,1,m,n.width,n.height):i.texImage2D(3553,0,m,n.width,n.height,0,f,g,null));else if(r.isDataTexture)if(y.length>0&&d){_&&C&&i.texStorage2D(3553,A,m,y[0].width,y[0].height);for(let t=0,e=y.length;t<e;t++)v=y[t],_?i.texSubImage2D(3553,t,0,0,v.width,v.height,f,g,v.data):i.texImage2D(3553,t,m,v.width,v.height,0,f,g,v.data);r.generateMipmaps=!1}else _?(C&&i.texStorage2D(3553,A,m,n.width,n.height),i.texSubImage2D(3553,0,0,0,n.width,n.height,f,g,n.data)):i.texImage2D(3553,0,m,n.width,n.height,0,f,g,n.data);else if(r.isCompressedTexture)if(r.isCompressedArrayTexture){_&&C&&i.texStorage3D(35866,A,m,y[0].width,y[0].height,n.depth);for(let t=0,e=y.length;t<e;t++)v=y[t],r.format!==Fi?null!==f?_?i.compressedTexSubImage3D(35866,t,0,0,0,v.width,v.height,n.depth,f,v.data,0,0):i.compressedTexImage3D(35866,t,m,v.width,v.height,n.depth,0,v.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):_?i.texSubImage3D(35866,t,0,0,0,v.width,v.height,n.depth,f,g,v.data):i.texImage3D(35866,t,m,v.width,v.height,n.depth,0,f,g,v.data)}else{_&&C&&i.texStorage2D(3553,A,m,y[0].width,y[0].height);for(let t=0,e=y.length;t<e;t++)v=y[t],r.format!==Fi?null!==f?_?i.compressedTexSubImage2D(3553,t,0,0,v.width,v.height,f,v.data):i.compressedTexImage2D(3553,t,m,v.width,v.height,0,v.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):_?i.texSubImage2D(3553,t,0,0,v.width,v.height,f,g,v.data):i.texImage2D(3553,t,m,v.width,v.height,0,f,g,v.data)}else if(r.isDataArrayTexture)_?(C&&i.texStorage3D(35866,A,m,n.width,n.height,n.depth),i.texSubImage3D(35866,0,0,0,0,n.width,n.height,n.depth,f,g,n.data)):i.texImage3D(35866,0,m,n.width,n.height,n.depth,0,f,g,n.data);else if(r.isData3DTexture)_?(C&&i.texStorage3D(32879,A,m,n.width,n.height,n.depth),i.texSubImage3D(32879,0,0,0,0,n.width,n.height,n.depth,f,g,n.data)):i.texImage3D(32879,0,m,n.width,n.height,n.depth,0,f,g,n.data);else if(r.isFramebufferTexture){if(C)if(_)i.texStorage2D(3553,A,m,n.width,n.height);else{let t=n.width,e=n.height;for(let n=0;n<A;n++)i.texImage2D(3553,n,m,t,e,0,f,g,null),t>>=1,e>>=1}}else if(y.length>0&&d){_&&C&&i.texStorage2D(3553,A,m,y[0].width,y[0].height);for(let t=0,e=y.length;t<e;t++)v=y[t],_?i.texSubImage2D(3553,t,0,0,f,g,v):i.texImage2D(3553,t,m,f,g,v);r.generateMipmaps=!1}else _?(C&&i.texStorage2D(3553,A,m,n.width,n.height),i.texSubImage2D(3553,0,0,0,f,g,n)):i.texImage2D(3553,0,m,f,g,n);E(r,d)&&M(s),c.__version=u.version,r.onUpdate&&r.onUpdate(r)}e.__version=r.version}function W(e,r,o){if(6!==r.image.length)return;let s=G(e,r),l=r.source;i.bindTexture(34067,e.__webglTexture,33984+o);let u=n.get(l);if(l.version!==u.__version||!0===s){i.activeTexture(33984+o),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);let e=r.isCompressedTexture||r.image[0].isCompressedTexture,n=r.image[0]&&r.image[0].isDataTexture,p=[];for(let t=0;t<6;t++)p[t]=e||n?n?r.image[t].image:r.image[t]:x(r.image[t],!1,!0,c),p[t]=rt(r,p[t]);let d,f=p[0],g=b(f)||h,m=a.convert(r.format,r.encoding),v=a.convert(r.type),y=S(r.internalFormat,m,v,r.encoding),_=h&&!0!==r.isVideoTexture,w=void 0===u.__version||!0===s,C=T(r,f,g);if(j(34067,r,g),e){_&&w&&i.texStorage2D(34067,C,y,f.width,f.height);for(let t=0;t<6;t++){d=p[t].mipmaps;for(let e=0;e<d.length;e++){let n=d[e];r.format!==Fi?null!==m?_?i.compressedTexSubImage2D(34069+t,e,0,0,n.width,n.height,m,n.data):i.compressedTexImage2D(34069+t,e,y,n.width,n.height,0,n.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):_?i.texSubImage2D(34069+t,e,0,0,n.width,n.height,m,v,n.data):i.texImage2D(34069+t,e,y,n.width,n.height,0,m,v,n.data)}}}else{d=r.mipmaps,_&&w&&(d.length>0&&C++,i.texStorage2D(34067,C,y,p[0].width,p[0].height));for(let t=0;t<6;t++)if(n){_?i.texSubImage2D(34069+t,0,0,0,p[t].width,p[t].height,m,v,p[t].data):i.texImage2D(34069+t,0,y,p[t].width,p[t].height,0,m,v,p[t].data);for(let e=0;e<d.length;e++){let n=d[e].image[t].image;_?i.texSubImage2D(34069+t,e+1,0,0,n.width,n.height,m,v,n.data):i.texImage2D(34069+t,e+1,y,n.width,n.height,0,m,v,n.data)}}else{_?i.texSubImage2D(34069+t,0,0,0,m,v,p[t]):i.texImage2D(34069+t,0,y,m,v,p[t]);for(let e=0;e<d.length;e++){let n=d[e];_?i.texSubImage2D(34069+t,e+1,0,0,m,v,n.image[t]):i.texImage2D(34069+t,e+1,y,m,v,n.image[t])}}}E(r,g)&&M(34067),u.__version=l.version,r.onUpdate&&r.onUpdate(r)}e.__version=r.version}function X(e,r,o,s,l){let h=a.convert(o.format,o.encoding),u=a.convert(o.type),c=S(o.internalFormat,h,u,o.encoding);n.get(r).__hasExternalTextures||(32879===l||35866===l?i.texImage3D(l,0,c,r.width,r.height,r.depth,0,h,u,null):i.texImage2D(l,0,c,r.width,r.height,0,h,u,null)),i.bindFramebuffer(36160,e),it(r)?f.framebufferTexture2DMultisampleEXT(36160,s,l,n.get(o).__webglTexture,0,et(r)):(3553===l||l>=34069&&l<=34074)&&t.framebufferTexture2D(36160,s,l,n.get(o).__webglTexture,0),i.bindFramebuffer(36160,null)}function Y(e,i,n){if(t.bindRenderbuffer(36161,e),i.depthBuffer&&!i.stencilBuffer){let r=33189;if(n||it(i)){let e=i.depthTexture;e&&e.isDepthTexture&&(e.type===Ni?r=36012:e.type===Oi&&(r=33190));let n=et(i);it(i)?f.renderbufferStorageMultisampleEXT(36161,n,r,i.width,i.height):t.renderbufferStorageMultisample(36161,n,r,i.width,i.height)}else t.renderbufferStorage(36161,r,i.width,i.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(i.depthBuffer&&i.stencilBuffer){let r=et(i);n&&!1===it(i)?t.renderbufferStorageMultisample(36161,r,35056,i.width,i.height):it(i)?f.renderbufferStorageMultisampleEXT(36161,r,35056,i.width,i.height):t.renderbufferStorage(36161,34041,i.width,i.height),t.framebufferRenderbuffer(36160,33306,36161,e)}else{let e=!0===i.isWebGLMultipleRenderTargets?i.texture:[i.texture];for(let r=0;r<e.length;r++){let o=e[r],s=a.convert(o.format,o.encoding),l=a.convert(o.type),h=S(o.internalFormat,s,l,o.encoding),u=et(i);n&&!1===it(i)?t.renderbufferStorageMultisample(36161,u,h,i.width,i.height):it(i)?f.renderbufferStorageMultisampleEXT(36161,u,h,i.width,i.height):t.renderbufferStorage(36161,h,i.width,i.height)}}t.bindRenderbuffer(36161,null)}function Z(e,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(36160,e),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(r.depthTexture).__webglTexture||r.depthTexture.image.width!==r.width||r.depthTexture.image.height!==r.height)&&(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),k(r.depthTexture,0);let o=n.get(r.depthTexture).__webglTexture,a=et(r);if(r.depthTexture.format===Vi)it(r)?f.framebufferTexture2DMultisampleEXT(36160,36096,3553,o,0,a):t.framebufferTexture2D(36160,36096,3553,o,0);else{if(r.depthTexture.format!==ji)throw new Error("Unknown depthTexture format");it(r)?f.framebufferTexture2DMultisampleEXT(36160,33306,3553,o,0,a):t.framebufferTexture2D(36160,33306,3553,o,0)}}function J(e){let r=n.get(e),o=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!r.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");Z(r.__webglFramebuffer,e)}else if(o){r.__webglDepthbuffer=[];for(let n=0;n<6;n++)i.bindFramebuffer(36160,r.__webglFramebuffer[n]),r.__webglDepthbuffer[n]=t.createRenderbuffer(),Y(r.__webglDepthbuffer[n],e,!1)}else i.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=t.createRenderbuffer(),Y(r.__webglDepthbuffer,e,!1);i.bindFramebuffer(36160,null)}function K(t,e,i){let r=n.get(t);void 0!==e&&X(r.__webglFramebuffer,t,t.texture,36064,3553),void 0!==i&&J(t)}function Q(e){let r=e.texture,l=n.get(e),u=n.get(r);e.addEventListener("dispose",P),!0!==e.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=t.createTexture()),u.__version=r.version,s.memory.textures++);let c=!0===e.isWebGLCubeRenderTarget,p=!0===e.isWebGLMultipleRenderTargets,d=b(e)||h;if(c){l.__webglFramebuffer=[];for(let e=0;e<6;e++)l.__webglFramebuffer[e]=t.createFramebuffer()}else{if(l.__webglFramebuffer=t.createFramebuffer(),p)if(o.drawBuffers){let i=e.texture;for(let e=0,r=i.length;e<r;e++){let r=n.get(i[e]);void 0===r.__webglTexture&&(r.__webglTexture=t.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(h&&e.samples>0&&!1===it(e)){let n=p?r:[r];l.__webglMultisampledFramebuffer=t.createFramebuffer(),l.__webglColorRenderbuffer=[],i.bindFramebuffer(36160,l.__webglMultisampledFramebuffer);for(let i=0;i<n.length;i++){let r=n[i];l.__webglColorRenderbuffer[i]=t.createRenderbuffer(),t.bindRenderbuffer(36161,l.__webglColorRenderbuffer[i]);let o=a.convert(r.format,r.encoding),s=a.convert(r.type),h=S(r.internalFormat,o,s,r.encoding,!0===e.isXRRenderTarget),u=et(e);t.renderbufferStorageMultisample(36161,u,h,e.width,e.height),t.framebufferRenderbuffer(36160,36064+i,36161,l.__webglColorRenderbuffer[i])}t.bindRenderbuffer(36161,null),e.depthBuffer&&(l.__webglDepthRenderbuffer=t.createRenderbuffer(),Y(l.__webglDepthRenderbuffer,e,!0)),i.bindFramebuffer(36160,null)}}if(c){i.bindTexture(34067,u.__webglTexture),j(34067,r,d);for(let t=0;t<6;t++)X(l.__webglFramebuffer[t],e,r,36064,34069+t);E(r,d)&&M(34067),i.unbindTexture()}else if(p){let t=e.texture;for(let r=0,o=t.length;r<o;r++){let o=t[r],a=n.get(o);i.bindTexture(3553,a.__webglTexture),j(3553,o,d),X(l.__webglFramebuffer,e,o,36064+r,3553),E(o,d)&&M(3553)}i.unbindTexture()}else{let t=3553;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(h?t=e.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),i.bindTexture(t,u.__webglTexture),j(t,r,d),X(l.__webglFramebuffer,e,r,36064,t),E(r,d)&&M(t),i.unbindTexture()}e.depthBuffer&&J(e)}function $(t){let e=b(t)||h,r=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let o=0,a=r.length;o<a;o++){let a=r[o];if(E(a,e)){let e=t.isWebGLCubeRenderTarget?34067:3553,r=n.get(a).__webglTexture;i.bindTexture(e,r),M(e),i.unbindTexture()}}}function tt(e){if(h&&e.samples>0&&!1===it(e)){let r=e.isWebGLMultipleRenderTargets?e.texture:[e.texture],o=e.width,a=e.height,s=16384,l=[],h=e.stencilBuffer?33306:36096,u=n.get(e),c=!0===e.isWebGLMultipleRenderTargets;if(c)for(let e=0;e<r.length;e++)i.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+e,36161,null),i.bindFramebuffer(36160,u.__webglFramebuffer),t.framebufferTexture2D(36009,36064+e,3553,null,0);i.bindFramebuffer(36008,u.__webglMultisampledFramebuffer),i.bindFramebuffer(36009,u.__webglFramebuffer);for(let i=0;i<r.length;i++){l.push(36064+i),e.depthBuffer&&l.push(h);let p=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===p&&(e.depthBuffer&&(s|=256),e.stencilBuffer&&(s|=1024)),c&&t.framebufferRenderbuffer(36008,36064,36161,u.__webglColorRenderbuffer[i]),!0===p&&(t.invalidateFramebuffer(36008,[h]),t.invalidateFramebuffer(36009,[h])),c){let e=n.get(r[i]).__webglTexture;t.framebufferTexture2D(36009,36064,3553,e,0)}t.blitFramebuffer(0,0,o,a,0,0,o,a,s,9728),g&&t.invalidateFramebuffer(36008,l)}if(i.bindFramebuffer(36008,null),i.bindFramebuffer(36009,null),c)for(let e=0;e<r.length;e++){i.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+e,36161,u.__webglColorRenderbuffer[e]);let o=n.get(r[e]).__webglTexture;i.bindFramebuffer(36160,u.__webglFramebuffer),t.framebufferTexture2D(36009,36064+e,3553,o,0)}i.bindFramebuffer(36009,u.__webglMultisampledFramebuffer)}}function et(t){return Math.min(d,t.samples)}function it(t){let i=n.get(t);return h&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==i.__useRenderToTexture}function nt(t){let e=s.render.frame;m.get(t)!==e&&(m.set(t,e),t.update())}function rt(t,i){let n=t.encoding,r=t.format,o=t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||t.format===Yn||n!==On&&(n===Nn?!1===h?!0===e.has("EXT_sRGB")&&r===Fi?(t.format=Yn,t.minFilter=Mi,t.generateMipmaps=!1):i=jr.sRGBToLinear(i):(r!==Fi||o!==Ci)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",n)),i}(0,r.a)(j,"setTextureParameters"),(0,r.a)(G,"initTexture"),(0,r.a)(H,"uploadTexture"),(0,r.a)(W,"uploadCubeTexture"),(0,r.a)(X,"setupFrameBufferTexture"),(0,r.a)(Y,"setupRenderBufferStorage"),(0,r.a)(Z,"setupDepthTexture"),(0,r.a)(J,"setupDepthRenderbuffer"),(0,r.a)(K,"rebindTextures"),(0,r.a)(Q,"setupRenderTarget"),(0,r.a)($,"updateRenderTargetMipmap"),(0,r.a)(tt,"updateMultisampleRenderTarget"),(0,r.a)(et,"getRenderTargetSamples"),(0,r.a)(it,"useMultisampledRTT"),(0,r.a)(nt,"updateVideoTexture"),(0,r.a)(rt,"verifyColorSpace"),this.allocateTextureUnit=R,this.resetTextureUnits=q,this.setTexture2D=k,this.setTexture2DArray=B,this.setTexture3D=F,this.setTextureCube=U,this.rebindTextures=K,this.setupRenderTarget=Q,this.updateRenderTargetMipmap=$,this.updateMultisampleRenderTarget=tt,this.setupDepthRenderbuffer=J,this.setupFrameBufferTexture=X,this.useMultisampledRTT=it}function Rd(t,e,i){let n=i.isWebGL2;function o(i,r=null){let o;if(i===Ci)return 5121;if(i===Ri)return 32819;if(i===Di)return 32820;if(i===Ai)return 5120;if(i===Pi)return 5122;if(i===Ii)return 5123;if(i===Li)return 5124;if(i===Oi)return 5125;if(i===Ni)return 5126;if(i===qi)return n?5131:null!==(o=e.get("OES_texture_half_float"))?o.HALF_FLOAT_OES:null;if(i===Bi)return 6406;if(i===Fi)return 6408;if(i===Ui)return 6409;if(i===zi)return 6410;if(i===Vi)return 6402;if(i===ji)return 34041;if(i===Yn)return null!==(o=e.get("EXT_sRGB"))?o.SRGB_ALPHA_EXT:null;if(i===Gi)return 6403;if(i===Hi)return 36244;if(i===Wi)return 33319;if(i===Xi)return 33320;if(i===Yi)return 36249;if(i===Zi||i===Ji||i===Ki||i===Qi)if(r===Nn){if(null===(o=e.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(i===Zi)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Ji)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Ki)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Qi)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(o=e.get("WEBGL_compressed_texture_s3tc")))return null;if(i===Zi)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Ji)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Ki)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Qi)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(i===$i||i===tn||i===en||i===nn){if(null===(o=e.get("WEBGL_compressed_texture_pvrtc")))return null;if(i===$i)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===tn)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===en)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===nn)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(i===rn)return null!==(o=e.get("WEBGL_compressed_texture_etc1"))?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(i===on||i===an){if(null===(o=e.get("WEBGL_compressed_texture_etc")))return null;if(i===on)return r===Nn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(i===an)return r===Nn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(i===sn||i===ln||i===hn||i===un||i===cn||i===pn||i===dn||i===fn||i===gn||i===mn||i===vn||i===yn||i===_n||i===xn){if(null===(o=e.get("WEBGL_compressed_texture_astc")))return null;if(i===sn)return r===Nn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===ln)return r===Nn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===hn)return r===Nn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===un)return r===Nn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===cn)return r===Nn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===pn)return r===Nn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===dn)return r===Nn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===fn)return r===Nn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===gn)return r===Nn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===mn)return r===Nn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===vn)return r===Nn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===yn)return r===Nn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===_n)return r===Nn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===xn)return r===Nn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(i===bn){if(null===(o=e.get("EXT_texture_compression_bptc")))return null;if(i===bn)return r===Nn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(i===wn||i===En||i===Mn||i===Sn){if(null===(o=e.get("EXT_texture_compression_rgtc")))return null;if(i===bn)return o.COMPRESSED_RED_RGTC1_EXT;if(i===En)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Mn)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===Sn)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return i===ki?n?34042:null!==(o=e.get("WEBGL_depth_texture"))?o.UNSIGNED_INT_24_8_WEBGL:null:void 0!==t[i]?t[i]:null}return(0,r.a)(o,"convert"),{convert:o}}(0,r.a)(Od,"WebGLShadowMap"),(0,r.a)(Nd,"WebGLState"),(0,r.a)(qd,"WebGLTextures"),(0,r.a)(Rd,"WebGLUtils");var Dd=class extends Gs{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}};(0,r.a)(Dd,"ArrayCamera");var kd=Dd,Bd=class extends ya{constructor(){super(),this.isGroup=!0,this.type="Group"}};(0,r.a)(Bd,"Group");var Fd=Bd,Ud={type:"move"},zd=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Fd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Fd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ho,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ho),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Fd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ho,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ho),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){let e=this._hand;if(e)for(let i of t.hand.values())this._getHandJoint(e,i)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,i){let n=null,r=null,o=null,a=this._targetRay,s=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(l&&t.hand){o=!0;for(let o of t.hand.values()){let t=e.getJointPose(o,i),n=this._getHandJoint(l,o);null!==t&&(n.matrix.fromArray(t.transform.matrix),n.matrix.decompose(n.position,n.rotation,n.scale),n.jointRadius=t.radius),n.visible=null!==t}let n=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],a=n.position.distanceTo(r.position),s=.02,h=.005;l.inputState.pinching&&a>s+h?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&a<=s-h&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==s&&t.gripSpace&&(null!==(r=e.getPose(t.gripSpace,i))&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1));null!==a&&(null===(n=e.getPose(t.targetRaySpace,i))&&null!==r&&(n=r),null!==n&&(a.matrix.fromArray(n.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),n.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(n.linearVelocity)):a.hasLinearVelocity=!1,n.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(n.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Ud)))}return null!==a&&(a.visible=null!==n),null!==s&&(s.visible=null!==r),null!==l&&(l.visible=null!==o),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){let i=new Fd;i.matrixAutoUpdate=!1,i.visible=!1,t.joints[e.jointName]=i,t.add(i)}return t.joints[e.jointName]}};(0,r.a)(zd,"WebXRController");var Vd=zd,jd=class extends Zr{constructor(t,e,i,n,r,o,a,s,l,h){if((h=void 0!==h?h:Vi)!==Vi&&h!==ji)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&h===Vi&&(i=Oi),void 0===i&&h===ji&&(i=ki),super(null,n,r,o,a,s,h,i,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==a?a:bi,this.minFilter=void 0!==s?s:bi,this.flipY=!1,this.generateMipmaps=!1}};(0,r.a)(jd,"DepthTexture");var Gd=jd,Hd=class extends Jn{constructor(t,e){super();let i=this,n=null,o=1,a=null,s="local-floor",l=1,h=null,u=null,c=null,p=null,d=null,f=null,g=e.getContextAttributes(),m=null,v=null,y=[],_=[],x=new Set,b=new Map,w=new Gs;w.layers.enable(1),w.viewport=new Kr;let E=new Gs;E.layers.enable(2),E.viewport=new Kr;let M=[w,E],S=new kd;S.layers.enable(1),S.layers.enable(2);let T=null,C=null;function A(t){let e=_.indexOf(t.inputSource);if(-1===e)return;let i=y[e];void 0!==i&&i.dispatchEvent({type:t.type,data:t.inputSource})}function P(){n.removeEventListener("select",A),n.removeEventListener("selectstart",A),n.removeEventListener("selectend",A),n.removeEventListener("squeeze",A),n.removeEventListener("squeezestart",A),n.removeEventListener("squeezeend",A),n.removeEventListener("end",P),n.removeEventListener("inputsourceschange",I);for(let t=0;t<y.length;t++){let e=_[t];null!==e&&(_[t]=null,y[t].disconnect(e))}T=null,C=null,t.setRenderTarget(m),d=null,p=null,c=null,n=null,v=null,B.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function I(t){for(let e=0;e<t.removed.length;e++){let i=t.removed[e],n=_.indexOf(i);n>=0&&(_[n]=null,y[n].disconnect(i))}for(let e=0;e<t.added.length;e++){let i=t.added[e],n=_.indexOf(i);if(-1===n){for(let t=0;t<y.length;t++){if(t>=_.length){_.push(i),n=t;break}if(null===_[t]){_[t]=i,n=t;break}}if(-1===n)break}let r=y[n];r&&r.connect(i)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=y[t];return void 0===e&&(e=new Vd,y[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=y[t];return void 0===e&&(e=new Vd,y[t]=e),e.getGripSpace()},this.getHand=function(t){let e=y[t];return void 0===e&&(e=new Vd,y[t]=e),e.getHandSpace()},(0,r.a)(A,"onSessionEvent"),(0,r.a)(P,"onSessionEnd"),this.setFramebufferScaleFactor=function(t){o=t,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){s=t,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||a},this.setReferenceSpace=function(t){h=t},this.getBaseLayer=function(){return null!==p?p:d},this.getBinding=function(){return c},this.getFrame=function(){return f},this.getSession=function(){return n},this.setSession=async function(r){if(null!==(n=r)){if(m=t.getRenderTarget(),n.addEventListener("select",A),n.addEventListener("selectstart",A),n.addEventListener("selectend",A),n.addEventListener("squeeze",A),n.addEventListener("squeezestart",A),n.addEventListener("squeezeend",A),n.addEventListener("end",P),n.addEventListener("inputsourceschange",I),!0!==g.xrCompatible&&await e.makeXRCompatible(),void 0===n.renderState.layers||!1===t.capabilities.isWebGL2){let i={antialias:void 0!==n.renderState.layers||g.antialias,alpha:g.alpha,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:o};d=new XRWebGLLayer(n,e,i),n.updateRenderState({baseLayer:d}),v=new $r(d.framebufferWidth,d.framebufferHeight,{format:Fi,type:Ci,encoding:t.outputEncoding,stencilBuffer:g.stencil})}else{let i=null,r=null,a=null;g.depth&&(a=g.stencil?35056:33190,i=g.stencil?ji:Vi,r=g.stencil?ki:Oi);let s={colorFormat:32856,depthFormat:a,scaleFactor:o};c=new XRWebGLBinding(n,e),p=c.createProjectionLayer(s),n.updateRenderState({layers:[p]}),v=new $r(p.textureWidth,p.textureHeight,{format:Fi,type:Ci,depthTexture:new Gd(p.textureWidth,p.textureHeight,r,void 0,void 0,void 0,void 0,void 0,void 0,i),stencilBuffer:g.stencil,encoding:t.outputEncoding,samples:g.antialias?4:0}),t.properties.get(v).__ignoreDepthValues=p.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(l),h=null,a=await n.requestReferenceSpace(s),B.setContext(n),B.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},(0,r.a)(I,"onInputSourcesChange");let L=new ho,O=new ho;function N(t,e,i){L.setFromMatrixPosition(e.matrixWorld),O.setFromMatrixPosition(i.matrixWorld);let n=L.distanceTo(O),r=e.projectionMatrix.elements,o=i.projectionMatrix.elements,a=r[14]/(r[10]-1),s=r[14]/(r[10]+1),l=(r[9]+1)/r[5],h=(r[9]-1)/r[5],u=(r[8]-1)/r[0],c=(o[8]+1)/o[0],p=a*u,d=a*c,f=n/(-u+c),g=f*-u;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(g),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();let m=a+f,v=s+f,y=p-g,_=d+(n-g),x=l*s/v*m,b=h*s/v*m;t.projectionMatrix.makePerspective(y,_,x,b,m,v),t.projectionMatrixInverse.copy(t.projectionMatrix).invert()}function q(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}function R(t,e,i){null===i?t.matrix.copy(e.matrixWorld):(t.matrix.copy(i.matrixWorld),t.matrix.invert(),t.matrix.multiply(e.matrixWorld)),t.matrix.decompose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0);let n=t.children;for(let r=0,o=n.length;r<o;r++)n[r].updateMatrixWorld(!0);t.projectionMatrix.copy(e.projectionMatrix),t.projectionMatrixInverse.copy(e.projectionMatrixInverse),t.isPerspectiveCamera&&(t.fov=2*tr*Math.atan(1/t.projectionMatrix.elements[5]),t.zoom=1)}(0,r.a)(N,"setProjectionFromUnion"),(0,r.a)(q,"updateCamera"),this.updateCamera=function(t){if(null===n)return;S.near=E.near=w.near=t.near,S.far=E.far=w.far=t.far,(T!==S.near||C!==S.far)&&(n.updateRenderState({depthNear:S.near,depthFar:S.far}),T=S.near,C=S.far);let e=t.parent,i=S.cameras;q(S,e);for(let n=0;n<i.length;n++)q(i[n],e);2===i.length?N(S,w,E):S.projectionMatrix.copy(w.projectionMatrix),R(t,S,e)},(0,r.a)(R,"updateUserCamera"),this.getCamera=function(){return S},this.getFoveation=function(){if(null!==p||null!==d)return l},this.setFoveation=function(t){l=t,null!==p&&(p.fixedFoveation=t),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=t)},this.getPlanes=function(){return x};let D=null;function k(e,n){if(u=n.getViewerPose(h||a),f=n,null!==u){let e=u.views;null!==d&&(t.setRenderTargetFramebuffer(v,d.framebuffer),t.setRenderTarget(v));let i=!1;e.length!==S.cameras.length&&(S.cameras.length=0,i=!0);for(let n=0;n<e.length;n++){let r=e[n],o=null;if(null!==d)o=d.getViewport(r);else{let e=c.getViewSubImage(p,r);o=e.viewport,0===n&&(t.setRenderTargetTextures(v,e.colorTexture,p.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(v))}let a=M[n];void 0===a&&((a=new Gs).layers.enable(n),a.viewport=new Kr,M[n]=a),a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale),a.projectionMatrix.fromArray(r.projectionMatrix),a.projectionMatrixInverse.copy(a.projectionMatrix).invert(),a.viewport.set(o.x,o.y,o.width,o.height),0===n&&(S.matrix.copy(a.matrix),S.matrix.decompose(S.position,S.quaternion,S.scale)),!0===i&&S.cameras.push(a)}}for(let t=0;t<y.length;t++){let e=_[t],i=y[t];null!==e&&void 0!==i&&i.update(e,n,h||a)}if(D&&D(e,n),n.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:n.detectedPlanes});let t=null;for(let e of x)n.detectedPlanes.has(e)||(null===t&&(t=[]),t.push(e));if(null!==t)for(let e of t)x.delete(e),b.delete(e),i.dispatchEvent({type:"planeremoved",data:e});for(let e of n.detectedPlanes)if(x.has(e)){let t=b.get(e);e.lastChangedTime>t&&(b.set(e,e.lastChangedTime),i.dispatchEvent({type:"planechanged",data:e}))}else x.add(e),b.set(e,n.lastChangedTime),i.dispatchEvent({type:"planeadded",data:e})}f=null}(0,r.a)(k,"onAnimationFrame");let B=new ll;B.setAnimationLoop(k),this.setAnimationLoop=function(t){D=t},this.dispose=function(){}}};(0,r.a)(Hd,"WebXRManager");var Wd=Hd;function Xd(t,e){function i(t,e){!0===t.matrixAutoUpdate&&t.updateMatrix(),e.value.copy(t.matrix)}function n(e,i){i.color.getRGB(e.fogColor.value,Rs(t)),i.isFog?(e.fogNear.value=i.near,e.fogFar.value=i.far):i.isFogExp2&&(e.fogDensity.value=i.density)}function o(t,e,i,n,r){e.isMeshBasicMaterial||e.isMeshLambertMaterial?a(t,e):e.isMeshToonMaterial?(a(t,e),p(t,e)):e.isMeshPhongMaterial?(a(t,e),c(t,e)):e.isMeshStandardMaterial?(a(t,e),d(t,e),e.isMeshPhysicalMaterial&&f(t,e,r)):e.isMeshMatcapMaterial?(a(t,e),g(t,e)):e.isMeshDepthMaterial?a(t,e):e.isMeshDistanceMaterial?(a(t,e),m(t,e)):e.isMeshNormalMaterial?a(t,e):e.isLineBasicMaterial?(s(t,e),e.isLineDashedMaterial&&l(t,e)):e.isPointsMaterial?h(t,e,i,n):e.isSpriteMaterial?u(t,e):e.isShadowMaterial?(t.color.value.copy(e.color),t.opacity.value=e.opacity):e.isShaderMaterial&&(e.uniformsNeedUpdate=!1)}function a(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map,i(r.map,n.mapTransform)),r.alphaMap&&(n.alphaMap.value=r.alphaMap,i(r.alphaMap,n.alphaMapTransform)),r.bumpMap&&(n.bumpMap.value=r.bumpMap,i(r.bumpMap,n.bumpMapTransform),n.bumpScale.value=r.bumpScale,r.side===Se&&(n.bumpScale.value*=-1)),r.normalMap&&(n.normalMap.value=r.normalMap,i(r.normalMap,n.normalMapTransform),n.normalScale.value.copy(r.normalScale),r.side===Se&&n.normalScale.value.negate()),r.displacementMap&&(n.displacementMap.value=r.displacementMap,i(r.displacementMap,n.displacementMapTransform),n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap,i(r.emissiveMap,n.emissiveMapTransform)),r.specularMap&&(n.specularMap.value=r.specularMap,i(r.specularMap,n.specularMapTransform)),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);let o=e.get(r).envMap;if(o&&(n.envMap.value=o,n.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;let e=!0===t.useLegacyLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*e,i(r.lightMap,n.lightMapTransform)}r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity,i(r.aoMap,n.aoMapTransform))}function s(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,e.map&&(t.map.value=e.map,i(e.map,t.mapTransform))}function l(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function h(t,e,n,r){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*r,e.map&&(t.map.value=e.map,i(e.map,t.uvTransform)),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}function u(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map,i(e.map,t.mapTransform)),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}function c(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}function p(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}function d(t,n){t.metalness.value=n.metalness,n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap,i(n.metalnessMap,t.metalnessMapTransform)),t.roughness.value=n.roughness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap,i(n.roughnessMap,t.roughnessMapTransform)),e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}function f(t,e,n){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap,i(e.sheenColorMap,t.sheenColorMapTransform)),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap,i(e.sheenRoughnessMap,t.sheenRoughnessMapTransform))),e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap,i(e.clearcoatMap,t.clearcoatMapTransform)),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap,i(e.clearcoatRoughnessMap,t.clearcoatRoughnessMapTransform)),e.clearcoatNormalMap&&(t.clearcoatNormalMap.value=e.clearcoatNormalMap,i(e.clearcoatNormalMap,t.clearcoatNormalMapTransform),t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),e.side===Se&&t.clearcoatNormalScale.value.negate())),e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap,i(e.iridescenceMap,t.iridescenceMapTransform)),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap,i(e.iridescenceThicknessMap,t.iridescenceThicknessMapTransform))),e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=n.texture,t.transmissionSamplerSize.value.set(n.width,n.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap,i(e.transmissionMap,t.transmissionMapTransform)),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap,i(e.thicknessMap,t.thicknessMapTransform)),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor)),t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap,i(e.specularColorMap,t.specularColorMapTransform)),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap,i(e.specularIntensityMap,t.specularIntensityMapTransform))}function g(t,e){e.matcap&&(t.matcap.value=e.matcap)}function m(t,i){let n=e.get(i).light;t.referencePosition.value.setFromMatrixPosition(n.matrixWorld),t.nearDistance.value=n.shadow.camera.near,t.farDistance.value=n.shadow.camera.far}return(0,r.a)(i,"refreshTransformUniform"),(0,r.a)(n,"refreshFogUniforms"),(0,r.a)(o,"refreshMaterialUniforms"),(0,r.a)(a,"refreshUniformsCommon"),(0,r.a)(s,"refreshUniformsLine"),(0,r.a)(l,"refreshUniformsDash"),(0,r.a)(h,"refreshUniformsPoints"),(0,r.a)(u,"refreshUniformsSprites"),(0,r.a)(c,"refreshUniformsPhong"),(0,r.a)(p,"refreshUniformsToon"),(0,r.a)(d,"refreshUniformsStandard"),(0,r.a)(f,"refreshUniformsPhysical"),(0,r.a)(g,"refreshUniformsMatcap"),(0,r.a)(m,"refreshUniformsDistance"),{refreshFogUniforms:n,refreshMaterialUniforms:o}}function Yd(t,e,i,n){let o={},a={},s=[],l=i.isWebGL2?t.getParameter(35375):0;function h(t,e){let i=e.program;n.uniformBlockBinding(t,i)}function u(t,i){let r=o[t.id];void 0===r&&(g(t),r=c(t),o[t.id]=r,t.addEventListener("dispose",v));let s=i.program;n.updateUBOMapping(t,s);let l=e.render.frame;a[t.id]!==l&&(d(t),a[t.id]=l)}function c(e){let i=p();e.__bindingPointIndex=i;let n=t.createBuffer(),r=e.__size,o=e.usage;return t.bindBuffer(35345,n),t.bufferData(35345,r,o),t.bindBuffer(35345,null),t.bindBufferBase(35345,i,n),n}function p(){for(let t=0;t<l;t++)if(-1===s.indexOf(t))return s.push(t),t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(e){let i=o[e.id],n=e.uniforms,r=e.__cache;t.bindBuffer(35345,i);for(let o=0,a=n.length;o<a;o++){let e=n[o];if(!0===f(e,o,r)){let i=e.__offset,n=Array.isArray(e.value)?e.value:[e.value],r=0;for(let o=0;o<n.length;o++){let a=n[o],s=m(a);"number"==typeof a?(e.__data[0]=a,t.bufferSubData(35345,i+r,e.__data)):a.isMatrix3?(e.__data[0]=a.elements[0],e.__data[1]=a.elements[1],e.__data[2]=a.elements[2],e.__data[3]=a.elements[0],e.__data[4]=a.elements[3],e.__data[5]=a.elements[4],e.__data[6]=a.elements[5],e.__data[7]=a.elements[0],e.__data[8]=a.elements[6],e.__data[9]=a.elements[7],e.__data[10]=a.elements[8],e.__data[11]=a.elements[0]):(a.toArray(e.__data,r),r+=s.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(35345,i,e.__data)}}t.bindBuffer(35345,null)}function f(t,e,i){let n=t.value;if(void 0===i[e]){if("number"==typeof n)i[e]=n;else{let t=Array.isArray(n)?n:[n],r=[];for(let e=0;e<t.length;e++)r.push(t[e].clone());i[e]=r}return!0}if("number"==typeof n){if(i[e]!==n)return i[e]=n,!0}else{let t=Array.isArray(i[e])?i[e]:[i[e]],r=Array.isArray(n)?n:[n];for(let e=0;e<t.length;e++){let i=t[e];if(!1===i.equals(r[e]))return i.copy(r[e]),!0}}return!1}function g(t){let e=t.uniforms,i=0,n=0;for(let r=0,o=e.length;r<o;r++){let t=e[r],o={boundary:0,storage:0},a=Array.isArray(t.value)?t.value:[t.value];for(let e=0,i=a.length;e<i;e++){let t=m(a[e]);o.boundary+=t.boundary,o.storage+=t.storage}if(t.__data=new Float32Array(o.storage/Float32Array.BYTES_PER_ELEMENT),t.__offset=i,r>0){let e=16-(n=i%16);0!==n&&e-o.boundary<0&&(i+=16-n,t.__offset=i)}i+=o.storage}return(n=i%16)>0&&(i+=16-n),t.__size=i,t.__cache={},this}function m(t){let e={boundary:0,storage:0};return"number"==typeof t?(e.boundary=4,e.storage=4):t.isVector2?(e.boundary=8,e.storage=8):t.isVector3||t.isColor?(e.boundary=16,e.storage=12):t.isVector4?(e.boundary=16,e.storage=16):t.isMatrix3?(e.boundary=48,e.storage=48):t.isMatrix4?(e.boundary=64,e.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),e}function v(e){let i=e.target;i.removeEventListener("dispose",v);let n=s.indexOf(i.__bindingPointIndex);s.splice(n,1),t.deleteBuffer(o[i.id]),delete o[i.id],delete a[i.id]}function y(){for(let e in o)t.deleteBuffer(o[e]);s=[],o={},a={}}return(0,r.a)(h,"bind"),(0,r.a)(u,"update"),(0,r.a)(c,"createBuffer"),(0,r.a)(p,"allocateBindingPointIndex"),(0,r.a)(d,"updateBufferData"),(0,r.a)(f,"hasUniformChanged"),(0,r.a)(g,"prepareUniformsGroup"),(0,r.a)(m,"getUniformSize"),(0,r.a)(v,"onUniformsGroupsDispose"),(0,r.a)(y,"dispose"),{bind:h,update:u,dispose:y}}function Zd(){let t=Lr("canvas");return t.style.display="block",t}(0,r.a)(Xd,"WebGLMaterials"),(0,r.a)(Yd,"WebGLUniformsGroups"),(0,r.a)(Zd,"createCanvasElement");var Jd=class{constructor(t={}){let e,{canvas:i=Zd(),context:n=null,depth:o=!0,stencil:a=!0,alpha:s=!1,antialias:l=!1,premultipliedAlpha:h=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:p=!1}=t;this.isWebGLRenderer=!0,e=null!==n?n.getContextAttributes().alpha:s;let d=null,f=null,g=[],m=[];this.domElement=i,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=On,this.useLegacyLights=!0,this.toneMapping=ai,this.toneMappingExposure=1;let v=this,y=!1,_=0,x=0,b=null,w=-1,E=null,M=new Kr,S=new Kr,T=null,C=i.width,A=i.height,P=1,I=null,L=null,O=new Kr(0,0,C,A),N=new Kr(0,0,C,A),q=!1,R=new sl,D=!1,k=!1,B=null,F=new Go,U=new ho,z={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function V(){return null===b?P:1}(0,r.a)(V,"getTargetPixelRatio");let j,G,H,W,X,Y,Z,J,K,Q,$,tt,et,it,nt,rt,ot,at,st,lt,ht,ut,ct,pt,dt=n;function ft(t,e){for(let n=0;n<t.length;n++){let r=t[n],o=i.getContext(r,e);if(null!==o)return o}return null}(0,r.a)(ft,"getContext");try{let e={alpha:!0,depth:o,stencil:a,antialias:l,premultipliedAlpha:h,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:p};if("setAttribute"in i&&i.setAttribute("data-engine","three.js r".concat(me)),i.addEventListener("webglcontextlost",vt,!1),i.addEventListener("webglcontextrestored",yt,!1),i.addEventListener("webglcontextcreationerror",_t,!1),null===dt){let t=["webgl2","webgl","experimental-webgl"];if(!0===v.isWebGL1Renderer&&t.shift(),null===(dt=ft(t,e)))throw ft(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===dt.getShaderPrecisionFormat&&(dt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function gt(){j=new yc(dt),G=new Yu(dt,j,t),j.init(G),ut=new Rd(dt,j,G),H=new Nd(dt,j,G),W=new bc,X=new fd,Y=new qd(dt,j,H,X,G,ut,W),Z=new Ju(v),J=new vc(v),K=new hl(dt,G),ct=new Wu(dt,j,K,G),Q=new _c(dt,K,W,ct),$=new Sc(dt,Q,K,W),st=new Mc(dt,G,Y),rt=new Zu(X),tt=new dd(v,Z,J,j,G,ct,rt),et=new Xd(v,X),it=new yd,nt=new Sd(j,G),at=new Hu(v,Z,J,H,$,e,h),ot=new Od(v,$,G),pt=new Yd(dt,W,G,H),lt=new Xu(dt,j,W,G),ht=new xc(dt,j,W,G),W.programs=tt.programs,v.capabilities=G,v.extensions=j,v.properties=X,v.renderLists=it,v.shadowMap=ot,v.state=H,v.info=W}(0,r.a)(gt,"initGLContext"),gt();let mt=new Wd(v,dt);function vt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function yt(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;let t=W.autoReset,e=ot.enabled,i=ot.autoUpdate,n=ot.needsUpdate,r=ot.type;gt(),W.autoReset=t,ot.enabled=e,ot.autoUpdate=i,ot.needsUpdate=n,ot.type=r}function _t(t){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function xt(t){let e=t.target;e.removeEventListener("dispose",xt),bt(e)}function bt(t){wt(t),X.remove(t)}function wt(t){let e=X.get(t).programs;void 0!==e&&(e.forEach(function(t){tt.releaseProgram(t)}),t.isShaderMaterial&&tt.releaseShaderCache(t))}this.xr=mt,this.getContext=function(){return dt},this.getContextAttributes=function(){return dt.getContextAttributes()},this.forceContextLoss=function(){let t=j.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){let t=j.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(t){void 0!==t&&(P=t,this.setSize(C,A,!1))},this.getSize=function(t){return t.set(C,A)},this.setSize=function(t,e,n=!0){mt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(C=t,A=e,i.width=Math.floor(t*P),i.height=Math.floor(e*P),!0===n&&(i.style.width=t+"px",i.style.height=e+"px"),this.setViewport(0,0,t,e))},this.getDrawingBufferSize=function(t){return t.set(C*P,A*P).floor()},this.setDrawingBufferSize=function(t,e,n){C=t,A=e,P=n,i.width=Math.floor(t*n),i.height=Math.floor(e*n),this.setViewport(0,0,t,e)},this.getCurrentViewport=function(t){return t.copy(M)},this.getViewport=function(t){return t.copy(O)},this.setViewport=function(t,e,i,n){t.isVector4?O.set(t.x,t.y,t.z,t.w):O.set(t,e,i,n),H.viewport(M.copy(O).multiplyScalar(P).floor())},this.getScissor=function(t){return t.copy(N)},this.setScissor=function(t,e,i,n){t.isVector4?N.set(t.x,t.y,t.z,t.w):N.set(t,e,i,n),H.scissor(S.copy(N).multiplyScalar(P).floor())},this.getScissorTest=function(){return q},this.setScissorTest=function(t){H.setScissorTest(q=t)},this.setOpaqueSort=function(t){I=t},this.setTransparentSort=function(t){L=t},this.getClearColor=function(t){return t.copy(at.getClearColor())},this.setClearColor=function(){at.setClearColor.apply(at,arguments)},this.getClearAlpha=function(){return at.getClearAlpha()},this.setClearAlpha=function(){at.setClearAlpha.apply(at,arguments)},this.clear=function(t=!0,e=!0,i=!0){let n=0;t&&(n|=16384),e&&(n|=256),i&&(n|=1024),dt.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){i.removeEventListener("webglcontextlost",vt,!1),i.removeEventListener("webglcontextrestored",yt,!1),i.removeEventListener("webglcontextcreationerror",_t,!1),it.dispose(),nt.dispose(),X.dispose(),Z.dispose(),J.dispose(),$.dispose(),ct.dispose(),pt.dispose(),tt.dispose(),mt.dispose(),mt.removeEventListener("sessionstart",St),mt.removeEventListener("sessionend",Tt),B&&(B.dispose(),B=null),Ct.stop()},(0,r.a)(vt,"onContextLost"),(0,r.a)(yt,"onContextRestore"),(0,r.a)(_t,"onContextCreationError"),(0,r.a)(xt,"onMaterialDispose"),(0,r.a)(bt,"deallocateMaterial"),(0,r.a)(wt,"releaseMaterialProgramReferences"),this.renderBufferDirect=function(t,e,i,n,r,o){null===e&&(e=z);let a=r.isMesh&&r.matrixWorld.determinant()<0,s=Rt(t,e,i,n,r);H.setMaterial(n,a);let l=i.index,h=1;!0===n.wireframe&&(l=Q.getWireframeAttribute(i),h=2);let u=i.drawRange,c=i.attributes.position,p=u.start*h,d=(u.start+u.count)*h;null!==o&&(p=Math.max(p,o.start*h),d=Math.min(d,(o.start+o.count)*h)),null!==l?(p=Math.max(p,0),d=Math.min(d,l.count)):null!=c&&(p=Math.max(p,0),d=Math.min(d,c.count));let f=d-p;if(f<0||f===1/0)return;ct.setup(r,n,s,i,l);let g,m=lt;if(null!==l&&(g=K.get(l),(m=ht).setIndex(g)),r.isMesh)!0===n.wireframe?(H.setLineWidth(n.wireframeLinewidth*V()),m.setMode(1)):m.setMode(4);else if(r.isLine){let t=n.linewidth;void 0===t&&(t=1),H.setLineWidth(t*V()),r.isLineSegments?m.setMode(1):r.isLineLoop?m.setMode(2):m.setMode(3)}else r.isPoints?m.setMode(0):r.isSprite&&m.setMode(4);if(r.isInstancedMesh)m.renderInstances(p,f,r.count);else if(i.isInstancedBufferGeometry){let t=void 0!==i._maxInstanceCount?i._maxInstanceCount:1/0,e=Math.min(i.instanceCount,t);m.renderInstances(p,f,e)}else m.render(p,f)},this.compile=function(t,e){function i(t,e,i){!0===t.transparent&&t.side===Te&&!1===t.forceSinglePass?(t.side=Se,t.needsUpdate=!0,Nt(t,e,i),t.side=Me,t.needsUpdate=!0,Nt(t,e,i),t.side=Te):Nt(t,e,i)}(0,r.a)(i,"prepare"),(f=nt.get(t)).init(),m.push(f),t.traverseVisible(function(t){t.isLight&&t.layers.test(e.layers)&&(f.pushLight(t),t.castShadow&&f.pushShadow(t))}),f.setupLights(v.useLegacyLights),t.traverse(function(e){let n=e.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++)i(n[r],t,e);else i(n,t,e)}),m.pop(),f=null};let Et=null;function Mt(t){Et&&Et(t)}function St(){Ct.stop()}function Tt(){Ct.start()}(0,r.a)(Mt,"onAnimationFrame"),(0,r.a)(St,"onXRSessionStart"),(0,r.a)(Tt,"onXRSessionEnd");let Ct=new ll;function At(t,e,i,n){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)i=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)f.pushLight(t),t.castShadow&&f.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||R.intersectsSprite(t)){n&&U.setFromMatrixPosition(t.matrixWorld).applyMatrix4(F);let e=$.update(t),r=t.material;r.visible&&d.push(t,e,r,i,U.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==W.render.frame&&(t.skeleton.update(),t.skeleton.frame=W.render.frame),!t.frustumCulled||R.intersectsObject(t))){n&&U.setFromMatrixPosition(t.matrixWorld).applyMatrix4(F);let e=$.update(t),r=t.material;if(Array.isArray(r)){let n=e.groups;for(let o=0,a=n.length;o<a;o++){let a=n[o],s=r[a.materialIndex];s&&s.visible&&d.push(t,e,s,i,U.z,a)}}else r.visible&&d.push(t,e,r,i,U.z,null)}let r=t.children;for(let o=0,a=r.length;o<a;o++)At(r[o],e,i,n)}function Pt(t,e,i,n){let r=t.opaque,o=t.transmissive,a=t.transparent;f.setupLightsView(i),!0===D&&rt.setGlobalState(v.clippingPlanes,i),o.length>0&&It(r,o,e,i),n&&H.viewport(M.copy(n)),r.length>0&&Lt(r,e,i),o.length>0&&Lt(o,e,i),a.length>0&&Lt(a,e,i),H.buffers.depth.setTest(!0),H.buffers.depth.setMask(!0),H.buffers.color.setMask(!0),H.setPolygonOffset(!1)}function It(t,e,i,n){if(null===B){let t=G.isWebGL2;B=new $r(1024,1024,{generateMipmaps:!0,type:j.has("EXT_color_buffer_half_float")?qi:Ci,minFilter:Ti,samples:t&&!0===l?4:0})}let r=v.getRenderTarget();v.setRenderTarget(B),v.clear();let o=v.toneMapping;v.toneMapping=ai,Lt(t,i,n),Y.updateMultisampleRenderTarget(B),Y.updateRenderTargetMipmap(B);let a=!1;for(let s=0,l=e.length;s<l;s++){let t=e[s],r=t.object,o=t.geometry,l=t.material,h=t.group;if(l.side===Te&&r.layers.test(n.layers)){let t=l.side;l.side=Se,l.needsUpdate=!0,Ot(r,i,n,o,l,h),l.side=t,l.needsUpdate=!0,a=!0}}!0===a&&(Y.updateMultisampleRenderTarget(B),Y.updateRenderTargetMipmap(B)),v.setRenderTarget(r),v.toneMapping=o}function Lt(t,e,i){let n=!0===e.isScene?e.overrideMaterial:null;for(let r=0,o=t.length;r<o;r++){let o=t[r],a=o.object,s=o.geometry,l=null===n?o.material:n,h=o.group;a.layers.test(i.layers)&&Ot(a,e,i,s,l,h)}}function Ot(t,e,i,n,r,o){t.onBeforeRender(v,e,i,n,r,o),t.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),r.onBeforeRender(v,e,i,n,t,o),!0===r.transparent&&r.side===Te&&!1===r.forceSinglePass?(r.side=Se,r.needsUpdate=!0,v.renderBufferDirect(i,e,n,r,t,o),r.side=Me,r.needsUpdate=!0,v.renderBufferDirect(i,e,n,r,t,o),r.side=Te):v.renderBufferDirect(i,e,n,r,t,o),t.onAfterRender(v,e,i,n,r,o)}function Nt(t,e,i){!0!==e.isScene&&(e=z);let n=X.get(t),r=f.state.lights,o=f.state.shadowsArray,a=r.state.version,s=tt.getParameters(t,r.state,o,e,i),l=tt.getProgramCacheKey(s),h=n.programs;n.environment=t.isMeshStandardMaterial?e.environment:null,n.fog=e.fog,n.envMap=(t.isMeshStandardMaterial?J:Z).get(t.envMap||n.environment),void 0===h&&(t.addEventListener("dispose",xt),h=new Map,n.programs=h);let u=h.get(l);if(void 0!==u){if(n.currentProgram===u&&n.lightsStateVersion===a)return qt(t,s),u}else s.uniforms=tt.getUniforms(t),t.onBuild(i,s,v),t.onBeforeCompile(s,v),u=tt.acquireProgram(s,l),h.set(l,u),n.uniforms=s.uniforms;let c=n.uniforms;(!t.isShaderMaterial&&!t.isRawShaderMaterial||!0===t.clipping)&&(c.clippingPlanes=rt.uniform),qt(t,s),n.needsLights=kt(t),n.lightsStateVersion=a,n.needsLights&&(c.ambientLightColor.value=r.state.ambient,c.lightProbe.value=r.state.probe,c.directionalLights.value=r.state.directional,c.directionalLightShadows.value=r.state.directionalShadow,c.spotLights.value=r.state.spot,c.spotLightShadows.value=r.state.spotShadow,c.rectAreaLights.value=r.state.rectArea,c.ltc_1.value=r.state.rectAreaLTC1,c.ltc_2.value=r.state.rectAreaLTC2,c.pointLights.value=r.state.point,c.pointLightShadows.value=r.state.pointShadow,c.hemisphereLights.value=r.state.hemi,c.directionalShadowMap.value=r.state.directionalShadowMap,c.directionalShadowMatrix.value=r.state.directionalShadowMatrix,c.spotShadowMap.value=r.state.spotShadowMap,c.spotLightMatrix.value=r.state.spotLightMatrix,c.spotLightMap.value=r.state.spotLightMap,c.pointShadowMap.value=r.state.pointShadowMap,c.pointShadowMatrix.value=r.state.pointShadowMatrix);let p=u.getUniforms(),d=Rp.seqWithValue(p.seq,c);return n.currentProgram=u,n.uniformsList=d,u}function qt(t,e){let i=X.get(t);i.outputEncoding=e.outputEncoding,i.instancing=e.instancing,i.skinning=e.skinning,i.morphTargets=e.morphTargets,i.morphNormals=e.morphNormals,i.morphColors=e.morphColors,i.morphTargetsCount=e.morphTargetsCount,i.numClippingPlanes=e.numClippingPlanes,i.numIntersection=e.numClipIntersection,i.vertexAlphas=e.vertexAlphas,i.vertexTangents=e.vertexTangents,i.toneMapping=e.toneMapping}function Rt(t,e,i,n,r){!0!==e.isScene&&(e=z),Y.resetTextureUnits();let o=e.fog,a=n.isMeshStandardMaterial?e.environment:null,s=null===b?v.outputEncoding:!0===b.isXRRenderTarget?b.texture.encoding:On,l=(n.isMeshStandardMaterial?J:Z).get(n.envMap||a),h=!0===n.vertexColors&&!!i.attributes.color&&4===i.attributes.color.itemSize,u=!!n.normalMap&&!!i.attributes.tangent,c=!!i.morphAttributes.position,p=!!i.morphAttributes.normal,d=!!i.morphAttributes.color,g=n.toneMapped?v.toneMapping:ai,m=i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color,y=void 0!==m?m.length:0,_=X.get(n),x=f.state.lights;if(!0===D&&(!0===k||t!==E)){let e=t===E&&n.id===w;rt.setState(n,t,e)}let M=!1;n.version===_.__version?(_.needsLights&&_.lightsStateVersion!==x.state.version||_.outputEncoding!==s||r.isInstancedMesh&&!1===_.instancing||!r.isInstancedMesh&&!0===_.instancing||r.isSkinnedMesh&&!1===_.skinning||!r.isSkinnedMesh&&!0===_.skinning||_.envMap!==l||!0===n.fog&&_.fog!==o||void 0!==_.numClippingPlanes&&(_.numClippingPlanes!==rt.numPlanes||_.numIntersection!==rt.numIntersection)||_.vertexAlphas!==h||_.vertexTangents!==u||_.morphTargets!==c||_.morphNormals!==p||_.morphColors!==d||_.toneMapping!==g||!0===G.isWebGL2&&_.morphTargetsCount!==y)&&(M=!0):(M=!0,_.__version=n.version);let S=_.currentProgram;!0===M&&(S=Nt(n,e,r));let T=!1,C=!1,I=!1,L=S.getUniforms(),O=_.uniforms;if(H.useProgram(S.program)&&(T=!0,C=!0,I=!0),n.id!==w&&(w=n.id,C=!0),T||E!==t){if(L.setValue(dt,"projectionMatrix",t.projectionMatrix),G.logarithmicDepthBuffer&&L.setValue(dt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),E!==t&&(E=t,C=!0,I=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){let e=L.map.cameraPosition;void 0!==e&&e.setValue(dt,U.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&L.setValue(dt,"isOrthographic",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||r.isSkinnedMesh)&&L.setValue(dt,"viewMatrix",t.matrixWorldInverse)}if(r.isSkinnedMesh){L.setOptional(dt,r,"bindMatrix"),L.setOptional(dt,r,"bindMatrixInverse");let t=r.skeleton;t&&(G.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),L.setValue(dt,"boneTexture",t.boneTexture,Y),L.setValue(dt,"boneTextureSize",t.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let N=i.morphAttributes;if((void 0!==N.position||void 0!==N.normal||void 0!==N.color&&!0===G.isWebGL2)&&st.update(r,i,S),(C||_.receiveShadow!==r.receiveShadow)&&(_.receiveShadow=r.receiveShadow,L.setValue(dt,"receiveShadow",r.receiveShadow)),n.isMeshGouraudMaterial&&null!==n.envMap&&(O.envMap.value=l,O.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),C&&(L.setValue(dt,"toneMappingExposure",v.toneMappingExposure),_.needsLights&&Dt(O,I),o&&!0===n.fog&&et.refreshFogUniforms(O,o),et.refreshMaterialUniforms(O,n,P,A,B),Rp.upload(dt,_.uniformsList,O,Y)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Rp.upload(dt,_.uniformsList,O,Y),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&L.setValue(dt,"center",r.center),L.setValue(dt,"modelViewMatrix",r.modelViewMatrix),L.setValue(dt,"normalMatrix",r.normalMatrix),L.setValue(dt,"modelMatrix",r.matrixWorld),n.isShaderMaterial||n.isRawShaderMaterial){let t=n.uniformsGroups;for(let e=0,i=t.length;e<i;e++)if(G.isWebGL2){let i=t[e];pt.update(i,S),pt.bind(i,S)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return S}function Dt(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.directionalLightShadows.needsUpdate=e,t.pointLights.needsUpdate=e,t.pointLightShadows.needsUpdate=e,t.spotLights.needsUpdate=e,t.spotLightShadows.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function kt(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}Ct.setAnimationLoop(Mt),typeof self<"u"&&Ct.setContext(self),this.setAnimationLoop=function(t){Et=t,mt.setAnimationLoop(t),null===t?Ct.stop():Ct.start()},mt.addEventListener("sessionstart",St),mt.addEventListener("sessionend",Tt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===y)return;!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===mt.enabled&&!0===mt.isPresenting&&(!0===mt.cameraAutoUpdate&&mt.updateCamera(e),e=mt.getCamera()),!0===t.isScene&&t.onBeforeRender(v,t,e,b),(f=nt.get(t,m.length)).init(),m.push(f),F.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),R.setFromProjectionMatrix(F),k=this.localClippingEnabled,D=rt.init(this.clippingPlanes,k),(d=it.get(t,g.length)).init(),g.push(d),At(t,e,0,v.sortObjects),d.finish(),!0===v.sortObjects&&d.sort(I,L),!0===D&&rt.beginShadows();let i=f.state.shadowsArray;if(ot.render(i,t,e),!0===D&&rt.endShadows(),!0===this.info.autoReset&&this.info.reset(),at.render(d,t),f.setupLights(v.useLegacyLights),e.isArrayCamera){let i=e.cameras;for(let e=0,n=i.length;e<n;e++){let n=i[e];Pt(d,t,n,n.viewport)}}else Pt(d,t,e);null!==b&&(Y.updateMultisampleRenderTarget(b),Y.updateRenderTargetMipmap(b)),!0===t.isScene&&t.onAfterRender(v,t,e),ct.resetDefaultState(),w=-1,E=null,m.pop(),f=m.length>0?m[m.length-1]:null,g.pop(),d=g.length>0?g[g.length-1]:null},(0,r.a)(At,"projectObject"),(0,r.a)(Pt,"renderScene"),(0,r.a)(It,"renderTransmissionPass"),(0,r.a)(Lt,"renderObjects"),(0,r.a)(Ot,"renderObject"),(0,r.a)(Nt,"getProgram"),(0,r.a)(qt,"updateCommonMaterialProperties"),(0,r.a)(Rt,"setProgram"),(0,r.a)(Dt,"markUniformsLightsNeedsUpdate"),(0,r.a)(kt,"materialNeedsLights"),this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(t,e,i){X.get(t.texture).__webglTexture=e,X.get(t.depthTexture).__webglTexture=i;let n=X.get(t);n.__hasExternalTextures=!0,n.__hasExternalTextures&&(n.__autoAllocateDepthBuffer=void 0===i,n.__autoAllocateDepthBuffer||!0===j.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),n.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){let i=X.get(t);i.__webglFramebuffer=e,i.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t,e=0,i=0){b=t,_=e,x=i;let n=!0,r=null,o=!1,a=!1;if(t){let i=X.get(t);void 0!==i.__useDefaultFramebuffer?(H.bindFramebuffer(36160,null),n=!1):void 0===i.__webglFramebuffer?Y.setupRenderTarget(t):i.__hasExternalTextures&&Y.rebindTextures(t,X.get(t.texture).__webglTexture,X.get(t.depthTexture).__webglTexture);let s=t.texture;(s.isData3DTexture||s.isDataArrayTexture||s.isCompressedArrayTexture)&&(a=!0);let l=X.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=l[e],o=!0):r=G.isWebGL2&&t.samples>0&&!1===Y.useMultisampledRTT(t)?X.get(t).__webglMultisampledFramebuffer:l,M.copy(t.viewport),S.copy(t.scissor),T=t.scissorTest}else M.copy(O).multiplyScalar(P).floor(),S.copy(N).multiplyScalar(P).floor(),T=q;if(H.bindFramebuffer(36160,r)&&G.drawBuffers&&n&&H.drawBuffers(t,r),H.viewport(M),H.scissor(S),H.setScissorTest(T),o){let n=X.get(t.texture);dt.framebufferTexture2D(36160,36064,34069+e,n.__webglTexture,i)}else if(a){let n=X.get(t.texture),r=e||0;dt.framebufferTextureLayer(36160,36064,n.__webglTexture,i||0,r)}w=-1},this.readRenderTargetPixels=function(t,e,i,n,r,o,a){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=X.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){H.bindFramebuffer(36160,s);try{let a=t.texture,s=a.format,l=a.type;if(s!==Fi&&ut.convert(s)!==dt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");let h=l===qi&&(j.has("EXT_color_buffer_half_float")||G.isWebGL2&&j.has("EXT_color_buffer_float"));if(!(l===Ci||ut.convert(l)===dt.getParameter(35738)||l===Ni&&(G.isWebGL2||j.has("OES_texture_float")||j.has("WEBGL_color_buffer_float"))||h))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-n&&i>=0&&i<=t.height-r&&dt.readPixels(e,i,n,r,ut.convert(s),ut.convert(l),o)}finally{let t=null!==b?X.get(b).__webglFramebuffer:null;H.bindFramebuffer(36160,t)}}},this.copyFramebufferToTexture=function(t,e,i=0){let n=Math.pow(2,-i),r=Math.floor(e.image.width*n),o=Math.floor(e.image.height*n);Y.setTexture2D(e,0),dt.copyTexSubImage2D(3553,i,0,0,t.x,t.y,r,o),H.unbindTexture()},this.copyTextureToTexture=function(t,e,i,n=0){let r=e.image.width,o=e.image.height,a=ut.convert(i.format),s=ut.convert(i.type);Y.setTexture2D(i,0),dt.pixelStorei(37440,i.flipY),dt.pixelStorei(37441,i.premultiplyAlpha),dt.pixelStorei(3317,i.unpackAlignment),e.isDataTexture?dt.texSubImage2D(3553,n,t.x,t.y,r,o,a,s,e.image.data):e.isCompressedTexture?dt.compressedTexSubImage2D(3553,n,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,a,e.mipmaps[0].data):dt.texSubImage2D(3553,n,t.x,t.y,a,s,e.image),0===n&&i.generateMipmaps&&dt.generateMipmap(3553),H.unbindTexture()},this.copyTextureToTexture3D=function(t,e,i,n,r=0){if(v.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");let o,a=t.max.x-t.min.x+1,s=t.max.y-t.min.y+1,l=t.max.z-t.min.z+1,h=ut.convert(n.format),u=ut.convert(n.type);if(n.isData3DTexture)Y.setTexture3D(n,0),o=32879;else{if(!n.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Y.setTexture2DArray(n,0),o=35866}dt.pixelStorei(37440,n.flipY),dt.pixelStorei(37441,n.premultiplyAlpha),dt.pixelStorei(3317,n.unpackAlignment);let c=dt.getParameter(3314),p=dt.getParameter(32878),d=dt.getParameter(3316),f=dt.getParameter(3315),g=dt.getParameter(32877),m=i.isCompressedTexture?i.mipmaps[0]:i.image;dt.pixelStorei(3314,m.width),dt.pixelStorei(32878,m.height),dt.pixelStorei(3316,t.min.x),dt.pixelStorei(3315,t.min.y),dt.pixelStorei(32877,t.min.z),i.isDataTexture||i.isData3DTexture?dt.texSubImage3D(o,r,e.x,e.y,e.z,a,s,l,h,u,m.data):i.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),dt.compressedTexSubImage3D(o,r,e.x,e.y,e.z,a,s,l,h,m.data)):dt.texSubImage3D(o,r,e.x,e.y,e.z,a,s,l,h,u,m),dt.pixelStorei(3314,c),dt.pixelStorei(32878,p),dt.pixelStorei(3316,d),dt.pixelStorei(3315,f),dt.pixelStorei(32877,g),0===r&&n.generateMipmaps&&dt.generateMipmap(o),H.unbindTexture()},this.initTexture=function(t){t.isCubeTexture?Y.setTextureCube(t,0):t.isData3DTexture?Y.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?Y.setTexture2DArray(t,0):Y.setTexture2D(t,0),H.unbindTexture()},this.resetState=function(){_=0,x=0,b=null,H.reset(),ct.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(t){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!t}};(0,r.a)(Jd,"WebGLRenderer");var Kd=Jd,Qd=class extends Kd{};(0,r.a)(Qd,"WebGL1Renderer");var $d=Qd;$d.prototype.isWebGL1Renderer=!0;var tf=class extends ya{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){let e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}};(0,r.a)(tf,"Scene");var ef=tf,nf=class{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=Wn,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=er()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,i){t*=this.stride,i*=e.stride;for(let n=0,r=this.stride;n<r;n++)this.array[t+n]=e.array[i+n];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=er()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=er()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}};(0,r.a)(nf,"InterleavedBuffer");var rf=nf,of=new ho,af=class t{constructor(t,e,i,n=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=n}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,i=this.data.count;e<i;e++)of.fromBufferAttribute(this,e),of.applyMatrix4(t),this.setXYZ(e,of.x,of.y,of.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)of.fromBufferAttribute(this,e),of.applyNormalMatrix(t),this.setXYZ(e,of.x,of.y,of.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)of.fromBufferAttribute(this,e),of.transformDirection(t),this.setXYZ(e,of.x,of.y,of.z);return this}setX(t,e){return this.normalized&&(e=Er(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=Er(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=Er(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=Er(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=wr(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=wr(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=wr(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=wr(e,this.array)),e}setXY(t,e,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=Er(e,this.array),i=Er(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this}setXYZ(t,e,i,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=Er(e,this.array),i=Er(i,this.array),n=Er(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this}setXYZW(t,e,i,n,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=Er(e,this.array),i=Er(i,this.array),n=Er(n,this.array),r=Er(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this.data.array[t+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let e=0;e<this.count;e++){let i=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[i+e])}return new Xa(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new t(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let e=0;e<this.count;e++){let i=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[i+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}};(0,r.a)(af,"InterleavedBufferAttribute");var sf=af,lf=class extends qa{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ua(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}};(0,r.a)(lf,"SpriteMaterial");var hf,uf=lf,cf=new ho,pf=new ho,df=new ho,ff=new Tr,gf=new Tr,mf=new Go,vf=new ho,yf=new ho,_f=new ho,xf=new Tr,bf=new Tr,wf=new Tr,Ef=class extends ya{constructor(t){if(super(),this.isSprite=!0,this.type="Sprite",void 0===hf){hf=new ls;let t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new rf(t,5);hf.setIndex([0,1,2,0,2,3]),hf.setAttribute("position",new sf(e,3,0,!1)),hf.setAttribute("uv",new sf(e,2,3,!1))}this.geometry=hf,this.material=void 0!==t?t:new uf,this.center=new Tr(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),pf.setFromMatrixScale(this.matrixWorld),mf.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),df.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&pf.multiplyScalar(-df.z);let i,n,r=this.material.rotation;0!==r&&(n=Math.cos(r),i=Math.sin(r));let o=this.center;Sf(vf.set(-.5,-.5,0),df,o,pf,i,n),Sf(yf.set(.5,-.5,0),df,o,pf,i,n),Sf(_f.set(.5,.5,0),df,o,pf,i,n),xf.set(0,0),bf.set(1,0),wf.set(1,1);let a=t.ray.intersectTriangle(vf,yf,_f,!1,cf);if(null===a&&(Sf(yf.set(-.5,.5,0),df,o,pf,i,n),bf.set(0,1),null===(a=t.ray.intersectTriangle(vf,_f,yf,!1,cf))))return;let s=t.ray.origin.distanceTo(cf);s<t.near||s>t.far||e.push({distance:s,point:cf.clone(),uv:La.getInterpolation(cf,vf,yf,_f,xf,bf,wf,new Tr),face:null,object:this})}copy(t,e){return super.copy(t,e),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}};(0,r.a)(Ef,"Sprite");var Mf=Ef;function Sf(t,e,i,n,r,o){ff.subVectors(t,i).addScalar(.5).multiply(n),void 0!==r?(gf.x=o*ff.x-r*ff.y,gf.y=r*ff.x+o*ff.y):gf.copy(ff),t.copy(e),t.x+=gf.x,t.y+=gf.y,t.applyMatrix4(mf)}(0,r.a)(Sf,"transformVertex");var Tf=class extends Zr{constructor(t=null,e=1,i=1,n,r,o,a,s,l=bi,h=bi,u,c){super(null,o,a,s,l,h,n,r,u,c),this.isDataTexture=!0,this.image={data:t,width:e,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};(0,r.a)(Tf,"DataTexture");var Cf=Tf,Af=class extends Xa{constructor(t,e,i,n=1){super(t,e,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){let t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}};(0,r.a)(Af,"InstancedBufferAttribute");var Pf=Af,If=class extends qa{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ua(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}};(0,r.a)(If,"LineBasicMaterial");var Lf=If,Of=new ho,Nf=new ho,qf=new Go,Rf=new Vo,Df=new No,kf=class extends ya{constructor(t=new ls,e=new Lf){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){let t=this.geometry;if(null===t.index){let e=t.attributes.position,i=[0];for(let t=1,n=e.count;t<n;t++)Of.fromBufferAttribute(e,t-1),Nf.fromBufferAttribute(e,t),i[t]=i[t-1],i[t]+=Of.distanceTo(Nf);t.setAttribute("lineDistance",new $a(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){let i=this.geometry,n=this.matrixWorld,r=t.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Df.copy(i.boundingSphere),Df.applyMatrix4(n),Df.radius+=r,!1===t.ray.intersectsSphere(Df))return;qf.copy(n).invert(),Rf.copy(t.ray).applyMatrix4(qf);let a=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=new ho,h=new ho,u=new ho,c=new ho,p=this.isLineSegments?2:1,d=i.index,f=i.attributes.position;if(null!==d)for(let g=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count)-1;g<m;g+=p){let i=d.getX(g),n=d.getX(g+1);if(l.fromBufferAttribute(f,i),h.fromBufferAttribute(f,n),Rf.distanceSqToSegment(l,h,c,u)>s)continue;c.applyMatrix4(this.matrixWorld);let r=t.ray.origin.distanceTo(c);r<t.near||r>t.far||e.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}else for(let g=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count)-1;g<m;g+=p){if(l.fromBufferAttribute(f,g),h.fromBufferAttribute(f,g+1),Rf.distanceSqToSegment(l,h,c,u)>s)continue;c.applyMatrix4(this.matrixWorld);let i=t.ray.origin.distanceTo(c);i<t.near||i>t.far||e.push({distance:i,point:u.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}updateMorphTargets(){let t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){let i=t[e[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=i.length;t<e;t++){let e=i[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}};(0,r.a)(kf,"Line");var Bf=kf,Ff=new ho,Uf=new ho,zf=class extends Bf{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let t=this.geometry;if(null===t.index){let e=t.attributes.position,i=[];for(let t=0,n=e.count;t<n;t+=2)Ff.fromBufferAttribute(e,t),Uf.fromBufferAttribute(e,t+1),i[t]=0===t?0:i[t-1],i[t+1]=i[t]+Ff.distanceTo(Uf);t.setAttribute("lineDistance",new $a(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}};(0,r.a)(zf,"LineSegments");var Vf=zf,jf=class extends Zr{constructor(t,e,i,n,r,o,a,s,l){super(t,e,i,n,r,o,a,s,l),this.isCanvasTexture=!0,this.needsUpdate=!0}};(0,r.a)(jf,"CanvasTexture");var Gf=jf,Hf=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){let i=this.getUtoTmapping(t);return this.getPoint(i,e)}getPoints(t=5){let e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return e}getSpacedPoints(t=5){let e=[];for(let i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e}getLength(){let t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let e,i=[],n=this.getPoint(0),r=0;i.push(0);for(let o=1;o<=t;o++)r+=(e=this.getPoint(o/t)).distanceTo(n),i.push(r),n=e;return this.cacheArcLengths=i,i}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){let i,n=this.getLengths(),r=0,o=n.length;i=e||t*n[o-1];let a,s=0,l=o-1;for(;s<=l;)if((a=n[r=Math.floor(s+(l-s)/2)]-i)<0)s=r+1;else{if(!(a>0)){l=r;break}l=r-1}if(n[r=l]===i)return r/(o-1);let h=n[r];return(r+(i-h)/(n[r+1]-h))/(o-1)}getTangent(t,e){let i=t-1e-4,n=t+1e-4;i<0&&(i=0),n>1&&(n=1);let r=this.getPoint(i),o=this.getPoint(n),a=e||(r.isVector2?new Tr:new ho);return a.copy(o).sub(r).normalize(),a}getTangentAt(t,e){let i=this.getUtoTmapping(t);return this.getTangent(i,e)}computeFrenetFrames(t,e){let i=new ho,n=[],r=[],o=[],a=new ho,s=new Go;for(let p=0;p<=t;p++){let e=p/t;n[p]=this.getTangentAt(e,new ho)}r[0]=new ho,o[0]=new ho;let l=Number.MAX_VALUE,h=Math.abs(n[0].x),u=Math.abs(n[0].y),c=Math.abs(n[0].z);h<=l&&(l=h,i.set(1,0,0)),u<=l&&(l=u,i.set(0,1,0)),c<=l&&i.set(0,0,1),a.crossVectors(n[0],i).normalize(),r[0].crossVectors(n[0],a),o[0].crossVectors(n[0],r[0]);for(let p=1;p<=t;p++){if(r[p]=r[p-1].clone(),o[p]=o[p-1].clone(),a.crossVectors(n[p-1],n[p]),a.length()>Number.EPSILON){a.normalize();let t=Math.acos(nr(n[p-1].dot(n[p]),-1,1));r[p].applyMatrix4(s.makeRotationAxis(a,t))}o[p].crossVectors(n[p],r[p])}if(!0===e){let e=Math.acos(nr(r[0].dot(r[t]),-1,1));e/=t,n[0].dot(a.crossVectors(r[0],r[t]))>0&&(e=-e);for(let i=1;i<=t;i++)r[i].applyMatrix4(s.makeRotationAxis(n[i],e*i)),o[i].crossVectors(n[i],r[i])}return{tangents:n,normals:r,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){let t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}};(0,r.a)(Hf,"Curve");var Wf=Hf,Xf=class extends Wf{constructor(t=0,e=0,i=1,n=1,r=0,o=2*Math.PI,a=!1,s=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=n,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s}getPoint(t,e){let i=e||new Tr,n=2*Math.PI,r=this.aEndAngle-this.aStartAngle,o=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=o?0:n),!0===this.aClockwise&&!o&&(r===n?r=-n:r-=n);let a=this.aStartAngle+t*r,s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){let t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),i=s-this.aX,n=l-this.aY;s=i*t-n*e+this.aX,l=i*e+n*t+this.aY}return i.set(s,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){let t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}};(0,r.a)(Xf,"EllipseCurve");var Yf=Xf,Zf=class extends Yf{constructor(t,e,i,n,r,o){super(t,e,i,i,n,r,o),this.isArcCurve=!0,this.type="ArcCurve"}};(0,r.a)(Zf,"ArcCurve");var Jf=Zf;function Kf(){let t=0,e=0,i=0,n=0;function o(r,o,a,s){t=r,e=a,i=-3*r+3*o-2*a-s,n=2*r-2*o+a+s}return(0,r.a)(o,"init"),{initCatmullRom:function(t,e,i,n,r){o(e,i,r*(i-t),r*(n-e))},initNonuniformCatmullRom:function(t,e,i,n,r,a,s){let l=(e-t)/r-(i-t)/(r+a)+(i-e)/a,h=(i-e)/a-(n-e)/(a+s)+(n-i)/s;o(e,i,l*=a,h*=a)},calc:function(r){let o=r*r;return t+e*r+i*o+n*(o*r)}}}(0,r.a)(Kf,"CubicPoly");var Qf=new ho,$f=new Kf,tg=new Kf,eg=new Kf,ig=class extends Wf{constructor(t=[],e=!1,i="centripetal",n=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=i,this.tension=n}getPoint(t,e=new ho){let i,n,r=e,o=this.points,a=o.length,s=(a-(this.closed?0:1))*t,l=Math.floor(s),h=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/a)+1)*a:0===h&&l===a-1&&(l=a-2,h=1),this.closed||l>0?i=o[(l-1)%a]:(Qf.subVectors(o[0],o[1]).add(o[0]),i=Qf);let u=o[l%a],c=o[(l+1)%a];if(this.closed||l+2<a?n=o[(l+2)%a]:(Qf.subVectors(o[a-1],o[a-2]).add(o[a-1]),n=Qf),"centripetal"===this.curveType||"chordal"===this.curveType){let t="chordal"===this.curveType?.5:.25,e=Math.pow(i.distanceToSquared(u),t),r=Math.pow(u.distanceToSquared(c),t),o=Math.pow(c.distanceToSquared(n),t);r<1e-4&&(r=1),e<1e-4&&(e=r),o<1e-4&&(o=r),$f.initNonuniformCatmullRom(i.x,u.x,c.x,n.x,e,r,o),tg.initNonuniformCatmullRom(i.y,u.y,c.y,n.y,e,r,o),eg.initNonuniformCatmullRom(i.z,u.z,c.z,n.z,e,r,o)}else"catmullrom"===this.curveType&&($f.initCatmullRom(i.x,u.x,c.x,n.x,this.tension),tg.initCatmullRom(i.y,u.y,c.y,n.y,this.tension),eg.initCatmullRom(i.z,u.z,c.z,n.z,this.tension));return r.set($f.calc(h),tg.calc(h),eg.calc(h)),r}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){let i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){let t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){let i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){let i=t.points[e];this.points.push((new ho).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}};(0,r.a)(ig,"CatmullRomCurve3");var ng=ig;function rg(t,e,i,n,r){let o=.5*(n-e),a=.5*(r-i),s=t*t;return(2*i-2*n+o+a)*(t*s)+(-3*i+3*n-2*o-a)*s+o*t+i}function og(t,e){let i=1-t;return i*i*e}function ag(t,e){return 2*(1-t)*t*e}function sg(t,e){return t*t*e}function lg(t,e,i,n){return og(t,e)+ag(t,i)+sg(t,n)}function hg(t,e){let i=1-t;return i*i*i*e}function ug(t,e){let i=1-t;return 3*i*i*t*e}function cg(t,e){return 3*(1-t)*t*t*e}function pg(t,e){return t*t*t*e}function dg(t,e,i,n,r){return hg(t,e)+ug(t,i)+cg(t,n)+pg(t,r)}(0,r.a)(rg,"CatmullRom"),(0,r.a)(og,"QuadraticBezierP0"),(0,r.a)(ag,"QuadraticBezierP1"),(0,r.a)(sg,"QuadraticBezierP2"),(0,r.a)(lg,"QuadraticBezier"),(0,r.a)(hg,"CubicBezierP0"),(0,r.a)(ug,"CubicBezierP1"),(0,r.a)(cg,"CubicBezierP2"),(0,r.a)(pg,"CubicBezierP3"),(0,r.a)(dg,"CubicBezier");var fg=class extends Wf{constructor(t=new Tr,e=new Tr,i=new Tr,n=new Tr){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=i,this.v3=n}getPoint(t,e=new Tr){let i=e,n=this.v0,r=this.v1,o=this.v2,a=this.v3;return i.set(dg(t,n.x,r.x,o.x,a.x),dg(t,n.y,r.y,o.y,a.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}};(0,r.a)(fg,"CubicBezierCurve");var gg=fg,mg=class extends Wf{constructor(t=new ho,e=new ho,i=new ho,n=new ho){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=i,this.v3=n}getPoint(t,e=new ho){let i=e,n=this.v0,r=this.v1,o=this.v2,a=this.v3;return i.set(dg(t,n.x,r.x,o.x,a.x),dg(t,n.y,r.y,o.y,a.y),dg(t,n.z,r.z,o.z,a.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}};(0,r.a)(mg,"CubicBezierCurve3");var vg=mg,yg=class extends Wf{constructor(t=new Tr,e=new Tr){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Tr){let i=e;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new Tr){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}};(0,r.a)(yg,"LineCurve");var _g=yg,xg=class extends Wf{constructor(t=new ho,e=new ho){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new ho){let i=e;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new ho){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}};(0,r.a)(xg,"LineCurve3");var bg=xg,wg=class extends Wf{constructor(t=new Tr,e=new Tr,i=new Tr){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new Tr){let i=e,n=this.v0,r=this.v1,o=this.v2;return i.set(lg(t,n.x,r.x,o.x),lg(t,n.y,r.y,o.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}};(0,r.a)(wg,"QuadraticBezierCurve");var Eg=wg,Mg=class extends Wf{constructor(t=new ho,e=new ho,i=new ho){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new ho){let i=e,n=this.v0,r=this.v1,o=this.v2;return i.set(lg(t,n.x,r.x,o.x),lg(t,n.y,r.y,o.y),lg(t,n.z,r.z,o.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}};(0,r.a)(Mg,"QuadraticBezierCurve3");var Sg=Mg,Tg=class extends Wf{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new Tr){let i=e,n=this.points,r=(n.length-1)*t,o=Math.floor(r),a=r-o,s=n[0===o?o:o-1],l=n[o],h=n[o>n.length-2?n.length-1:o+1],u=n[o>n.length-3?n.length-1:o+2];return i.set(rg(a,s.x,l.x,h.x,u.x),rg(a,s.y,l.y,h.y,u.y)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){let i=t.points[e];this.points.push(i.clone())}return this}toJSON(){let t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){let i=this.points[e];t.points.push(i.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){let i=t.points[e];this.points.push((new Tr).fromArray(i))}return this}};(0,r.a)(Tg,"SplineCurve");var Cg=Tg,Ag=Object.freeze({__proto__:null,ArcCurve:Jf,CatmullRomCurve3:ng,CubicBezierCurve:gg,CubicBezierCurve3:vg,EllipseCurve:Yf,LineCurve:_g,LineCurve3:bg,QuadraticBezierCurve:Eg,QuadraticBezierCurve3:Sg,SplineCurve:Cg}),Pg=class extends Wf{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){let t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new _g(e,t))}getPoint(t,e){let i=t*this.getLength(),n=this.getCurveLengths(),r=0;for(;r<n.length;){if(n[r]>=i){let t=n[r]-i,o=this.curves[r],a=o.getLength(),s=0===a?0:1-t/a;return o.getPointAt(s,e)}r++}return null}getLength(){let t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let t=[],e=0;for(let i=0,n=this.curves.length;i<n;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){let e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){let e,i=[];for(let n=0,r=this.curves;n<r.length;n++){let o=r[n],a=o.isEllipseCurve?2*t:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a);for(let t=0;t<s.length;t++){let n=s[t];e&&e.equals(n)||(i.push(n),e=n)}}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i}copy(t){super.copy(t),this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){let i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this}toJSON(){let t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,i=this.curves.length;e<i;e++){let i=this.curves[e];t.curves.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){let i=t.curves[e];this.curves.push((new Ag[i.type]).fromJSON(i))}return this}};(0,r.a)(Pg,"CurvePath");var Ig=Pg,Lg=class extends Ig{constructor(t){super(),this.type="Path",this.currentPoint=new Tr,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){let i=new _g(this.currentPoint.clone(),new Tr(t,e));return this.curves.push(i),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,i,n){let r=new Eg(this.currentPoint.clone(),new Tr(t,e),new Tr(i,n));return this.curves.push(r),this.currentPoint.set(i,n),this}bezierCurveTo(t,e,i,n,r,o){let a=new gg(this.currentPoint.clone(),new Tr(t,e),new Tr(i,n),new Tr(r,o));return this.curves.push(a),this.currentPoint.set(r,o),this}splineThru(t){let e=[this.currentPoint.clone()].concat(t),i=new Cg(e);return this.curves.push(i),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,i,n,r,o){let a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+a,e+s,i,n,r,o),this}absarc(t,e,i,n,r,o){return this.absellipse(t,e,i,i,n,r,o),this}ellipse(t,e,i,n,r,o,a,s){let l=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(t+l,e+h,i,n,r,o,a,s),this}absellipse(t,e,i,n,r,o,a,s){let l=new Yf(t,e,i,n,r,o,a,s);if(this.curves.length>0){let t=l.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(l);let h=l.getPoint(1);return this.currentPoint.copy(h),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){let t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}};(0,r.a)(Lg,"Path");var Og=Lg,Ng=class t extends ls{constructor(t=1,e=1,i=1,n=32,o=1,a=!1,s=0,l=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:n,heightSegments:o,openEnded:a,thetaStart:s,thetaLength:l};let h=this;n=Math.floor(n),o=Math.floor(o);let u=[],c=[],p=[],d=[],f=0,g=[],m=i/2,v=0;function y(){let r=new ho,a=new ho,y=0,_=(e-t)/i;for(let h=0;h<=o;h++){let u=[],v=h/o,y=v*(e-t)+t;for(let t=0;t<=n;t++){let e=t/n,o=e*l+s,h=Math.sin(o),g=Math.cos(o);a.x=y*h,a.y=-v*i+m,a.z=y*g,c.push(a.x,a.y,a.z),r.set(h,_,g).normalize(),p.push(r.x,r.y,r.z),d.push(e,1-v),u.push(f++)}g.push(u)}for(let t=0;t<n;t++)for(let e=0;e<o;e++){let i=g[e][t],n=g[e+1][t],r=g[e+1][t+1],o=g[e][t+1];u.push(i,n,o),u.push(n,r,o),y+=6}h.addGroup(v,y,0),v+=y}function _(i){let r=f,o=new Tr,a=new ho,g=0,y=!0===i?t:e,_=!0===i?1:-1;for(let t=1;t<=n;t++)c.push(0,m*_,0),p.push(0,_,0),d.push(.5,.5),f++;let x=f;for(let t=0;t<=n;t++){let e=t/n*l+s,i=Math.cos(e),r=Math.sin(e);a.x=y*r,a.y=m*_,a.z=y*i,c.push(a.x,a.y,a.z),p.push(0,_,0),o.x=.5*i+.5,o.y=.5*r*_+.5,d.push(o.x,o.y),f++}for(let t=0;t<n;t++){let e=r+t,n=x+t;!0===i?u.push(n,n+1,e):u.push(n+1,n,e),g+=3}h.addGroup(v,g,!0===i?1:2),v+=g}y(),!1===a&&(t>0&&_(!0),e>0&&_(!1)),this.setIndex(u),this.setAttribute("position",new $a(c,3)),this.setAttribute("normal",new $a(p,3)),this.setAttribute("uv",new $a(d,2)),(0,r.a)(y,"generateTorso"),(0,r.a)(_,"generateCap")}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(e){return new t(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}};(0,r.a)(Ng,"CylinderGeometry");var qg=Ng,Rg=class extends Og{constructor(t){super(t),this.uuid=er(),this.type="Shape",this.holes=[]}getPointsHoles(t){let e=[];for(let i=0,n=this.holes.length;i<n;i++)e[i]=this.holes[i].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){let i=t.holes[e];this.holes.push(i.clone())}return this}toJSON(){let t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,i=this.holes.length;e<i;e++){let i=this.holes[e];t.holes.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){let i=t.holes[e];this.holes.push((new Og).fromJSON(i))}return this}};(0,r.a)(Rg,"Shape");var Dg=Rg,kg={triangulate:function(t,e,i=2){let n,r,o,a,s,l,h,u=e&&e.length,c=u?e[0]*i:t.length,p=Bg(t,0,c,i,!0),d=[];if(!p||p.next===p.prev)return d;if(u&&(p=Hg(t,e,p,i)),t.length>80*i){n=o=t[0],r=a=t[1];for(let e=i;e<c;e+=i)(s=t[e])<n&&(n=s),(l=t[e+1])<r&&(r=l),s>o&&(o=s),l>a&&(a=l);h=0!==(h=Math.max(o-n,a-r))?32767/h:0}return Ug(p,d,i,n,r,h,0),d}};function Bg(t,e,i,n,r){let o,a;if(r===fm(t,e,i,n)>0)for(o=e;o<i;o+=n)a=cm(o,t[o],t[o+1],a);else for(o=i-n;o>=e;o-=n)a=cm(o,t[o],t[o+1],a);return a&&nm(a,a.next)&&(pm(a),a=a.next),a}function Fg(t,e){if(!t)return t;e||(e=t);let i,n=t;do{if(i=!1,n.steiner||!nm(n,n.next)&&0!==im(n.prev,n,n.next))n=n.next;else{if(pm(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function Ug(t,e,i,n,r,o,a){if(!t)return;!a&&o&&Jg(t,n,r,o);let s,l,h=t;for(;t.prev!==t.next;)if(s=t.prev,l=t.next,o?Vg(t,n,r,o):zg(t))e.push(s.i/i|0),e.push(t.i/i|0),e.push(l.i/i|0),pm(t),t=l.next,h=l.next;else if((t=l)===h){a?1===a?Ug(t=jg(Fg(t),e,i),e,i,n,r,o,2):2===a&&Gg(t,e,i,n,r,o):Ug(Fg(t),e,i,n,r,o,1);break}}function zg(t){let e=t.prev,i=t,n=t.next;if(im(e,i,n)>=0)return!1;let r=e.x,o=i.x,a=n.x,s=e.y,l=i.y,h=n.y,u=r<o?r<a?r:a:o<a?o:a,c=s<l?s<h?s:h:l<h?l:h,p=r>o?r>a?r:a:o>a?o:a,d=s>l?s>h?s:h:l>h?l:h,f=n.next;for(;f!==e;){if(f.x>=u&&f.x<=p&&f.y>=c&&f.y<=d&&tm(r,s,o,l,a,h,f.x,f.y)&&im(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Vg(t,e,i,n){let r=t.prev,o=t,a=t.next;if(im(r,o,a)>=0)return!1;let s=r.x,l=o.x,h=a.x,u=r.y,c=o.y,p=a.y,d=s<l?s<h?s:h:l<h?l:h,f=u<c?u<p?u:p:c<p?c:p,g=s>l?s>h?s:h:l>h?l:h,m=u>c?u>p?u:p:c>p?c:p,v=Qg(d,f,e,i,n),y=Qg(g,m,e,i,n),_=t.prevZ,x=t.nextZ;for(;_&&_.z>=v&&x&&x.z<=y;){if(_.x>=d&&_.x<=g&&_.y>=f&&_.y<=m&&_!==r&&_!==a&&tm(s,u,l,c,h,p,_.x,_.y)&&im(_.prev,_,_.next)>=0||(_=_.prevZ,x.x>=d&&x.x<=g&&x.y>=f&&x.y<=m&&x!==r&&x!==a&&tm(s,u,l,c,h,p,x.x,x.y)&&im(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;_&&_.z>=v;){if(_.x>=d&&_.x<=g&&_.y>=f&&_.y<=m&&_!==r&&_!==a&&tm(s,u,l,c,h,p,_.x,_.y)&&im(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;x&&x.z<=y;){if(x.x>=d&&x.x<=g&&x.y>=f&&x.y<=m&&x!==r&&x!==a&&tm(s,u,l,c,h,p,x.x,x.y)&&im(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function jg(t,e,i){let n=t;do{let r=n.prev,o=n.next.next;!nm(r,o)&&rm(r,n,n.next,o)&&lm(r,o)&&lm(o,r)&&(e.push(r.i/i|0),e.push(n.i/i|0),e.push(o.i/i|0),pm(n),pm(n.next),n=t=o),n=n.next}while(n!==t);return Fg(n)}function Gg(t,e,i,n,r,o){let a=t;do{let t=a.next.next;for(;t!==a.prev;){if(a.i!==t.i&&em(a,t)){let s=um(a,t);return a=Fg(a,a.next),s=Fg(s,s.next),Ug(a,e,i,n,r,o,0),void Ug(s,e,i,n,r,o,0)}t=t.next}a=a.next}while(a!==t)}function Hg(t,e,i,n){let r,o,a,s,l,h=[];for(r=0,o=e.length;r<o;r++)(l=Bg(t,a=e[r]*n,s=r<o-1?e[r+1]*n:t.length,n,!1))===l.next&&(l.steiner=!0),h.push($g(l));for(h.sort(Wg),r=0;r<h.length;r++)i=Xg(h[r],i);return i}function Wg(t,e){return t.x-e.x}function Xg(t,e){let i=Yg(t,e);if(!i)return e;let n=um(i,t);return Fg(n,n.next),Fg(i,i.next)}function Yg(t,e){let i,n=e,r=-1/0,o=t.x,a=t.y;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){let t=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=o&&t>r&&(r=t,i=n.x<n.next.x?n:n.next,t===o))return i}n=n.next}while(n!==e);if(!i)return null;let s,l=i,h=i.x,u=i.y,c=1/0;n=i;do{o>=n.x&&n.x>=h&&o!==n.x&&tm(a<u?o:r,a,h,u,a<u?r:o,a,n.x,n.y)&&(s=Math.abs(a-n.y)/(o-n.x),lm(n,t)&&(s<c||s===c&&(n.x>i.x||n.x===i.x&&Zg(i,n)))&&(i=n,c=s)),n=n.next}while(n!==l);return i}function Zg(t,e){return im(t.prev,t,e.prev)<0&&im(e.next,t,t.next)<0}function Jg(t,e,i,n){let r=t;do{0===r.z&&(r.z=Qg(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,Kg(r)}function Kg(t){let e,i,n,r,o,a,s,l,h=1;do{for(i=t,t=null,o=null,a=0;i;){for(a++,n=i,s=0,e=0;e<h&&(s++,n=n.nextZ);e++);for(l=h;s>0||l>0&&n;)0!==s&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,s--):(r=n,n=n.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;i=n}o.nextZ=null,h*=2}while(a>1);return t}function Qg(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function $g(t){let e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function tm(t,e,i,n,r,o,a,s){return(r-a)*(e-s)>=(t-a)*(o-s)&&(t-a)*(n-s)>=(i-a)*(e-s)&&(i-a)*(o-s)>=(r-a)*(n-s)}function em(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!sm(t,e)&&(lm(t,e)&&lm(e,t)&&hm(t,e)&&(im(t.prev,t,e.prev)||im(t,e.prev,e))||nm(t,e)&&im(t.prev,t,t.next)>0&&im(e.prev,e,e.next)>0)}function im(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function nm(t,e){return t.x===e.x&&t.y===e.y}function rm(t,e,i,n){let r=am(im(t,e,i)),o=am(im(t,e,n)),a=am(im(i,n,t)),s=am(im(i,n,e));return!!(r!==o&&a!==s||0===r&&om(t,i,e)||0===o&&om(t,n,e)||0===a&&om(i,t,n)||0===s&&om(i,e,n))}function om(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function am(t){return t>0?1:t<0?-1:0}function sm(t,e){let i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&rm(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}function lm(t,e){return im(t.prev,t,t.next)<0?im(t,e,t.next)>=0&&im(t,t.prev,e)>=0:im(t,e,t.prev)<0||im(t,t.next,e)<0}function hm(t,e){let i=t,n=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}function um(t,e){let i=new dm(t.i,t.x,t.y),n=new dm(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function cm(t,e,i,n){let r=new dm(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function pm(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function dm(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function fm(t,e,i,n){let r=0;for(let o=e,a=i-n;o<i;o+=n)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}(0,r.a)(Bg,"linkedList"),(0,r.a)(Fg,"filterPoints"),(0,r.a)(Ug,"earcutLinked"),(0,r.a)(zg,"isEar"),(0,r.a)(Vg,"isEarHashed"),(0,r.a)(jg,"cureLocalIntersections"),(0,r.a)(Gg,"splitEarcut"),(0,r.a)(Hg,"eliminateHoles"),(0,r.a)(Wg,"compareX"),(0,r.a)(Xg,"eliminateHole"),(0,r.a)(Yg,"findHoleBridge"),(0,r.a)(Zg,"sectorContainsSector"),(0,r.a)(Jg,"indexCurve"),(0,r.a)(Kg,"sortLinked"),(0,r.a)(Qg,"zOrder"),(0,r.a)($g,"getLeftmost"),(0,r.a)(tm,"pointInTriangle"),(0,r.a)(em,"isValidDiagonal"),(0,r.a)(im,"area"),(0,r.a)(nm,"equals"),(0,r.a)(rm,"intersects"),(0,r.a)(om,"onSegment"),(0,r.a)(am,"sign"),(0,r.a)(sm,"intersectsPolygon"),(0,r.a)(lm,"locallyInside"),(0,r.a)(hm,"middleInside"),(0,r.a)(um,"splitPolygon"),(0,r.a)(cm,"insertNode"),(0,r.a)(pm,"removeNode"),(0,r.a)(dm,"Node"),(0,r.a)(fm,"signedArea");var gm=class t{static area(t){let e=t.length,i=0;for(let n=e-1,r=0;r<e;n=r++)i+=t[n].x*t[r].y-t[r].x*t[n].y;return.5*i}static isClockWise(e){return t.area(e)<0}static triangulateShape(t,e){let i=[],n=[],r=[];vm(t),ym(i,t);let o=t.length;e.forEach(vm);for(let s=0;s<e.length;s++)n.push(o),o+=e[s].length,ym(i,e[s]);let a=kg.triangulate(i,n);for(let s=0;s<a.length;s+=3)r.push(a.slice(s,s+3));return r}};(0,r.a)(gm,"ShapeUtils");var mm=gm;function vm(t){let e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function ym(t,e){for(let i=0;i<e.length;i++)t.push(e[i].x),t.push(e[i].y)}(0,r.a)(vm,"removeDupEndPts"),(0,r.a)(ym,"addContour");var _m=class t extends ls{constructor(t=new Dg([new Tr(.5,.5),new Tr(-.5,.5),new Tr(-.5,-.5),new Tr(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];let i=this,n=[],o=[];for(let r=0,s=t.length;r<s;r++)a(t[r]);function a(t){let a,s,l,h,u,c=[],p=void 0!==e.curveSegments?e.curveSegments:12,d=void 0!==e.steps?e.steps:1,f=void 0!==e.depth?e.depth:1,g=void 0===e.bevelEnabled||e.bevelEnabled,m=void 0!==e.bevelThickness?e.bevelThickness:.2,v=void 0!==e.bevelSize?e.bevelSize:m-.1,y=void 0!==e.bevelOffset?e.bevelOffset:0,_=void 0!==e.bevelSegments?e.bevelSegments:3,x=e.extrudePath,b=void 0!==e.UVGenerator?e.UVGenerator:bm,w=!1;x&&(a=x.getSpacedPoints(d),w=!0,g=!1,s=x.computeFrenetFrames(d,!1),l=new ho,h=new ho,u=new ho),g||(_=0,m=0,v=0,y=0);let E=t.extractPoints(p),M=E.shape,S=E.holes;if(!mm.isClockWise(M)){M=M.reverse();for(let t=0,e=S.length;t<e;t++){let e=S[t];mm.isClockWise(e)&&(S[t]=e.reverse())}}let T=mm.triangulateShape(M,S),C=M;for(let e=0,i=S.length;e<i;e++){let t=S[e];M=M.concat(t)}function A(t,e,i){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().addScaledVector(e,i)}(0,r.a)(A,"scalePt2");let P=M.length,I=T.length;function L(t,e,i){let n,r,o,a=t.x-e.x,s=t.y-e.y,l=i.x-t.x,h=i.y-t.y,u=a*a+s*s,c=a*h-s*l;if(Math.abs(c)>Number.EPSILON){let c=Math.sqrt(u),p=Math.sqrt(l*l+h*h),d=e.x-s/c,f=e.y+a/c,g=((i.x-h/p-d)*h-(i.y+l/p-f)*l)/(a*h-s*l),m=(n=d+a*g-t.x)*n+(r=f+s*g-t.y)*r;if(m<=2)return new Tr(n,r);o=Math.sqrt(m/2)}else{let t=!1;a>Number.EPSILON?l>Number.EPSILON&&(t=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(t=!0):Math.sign(s)===Math.sign(h)&&(t=!0),t?(n=-s,r=a,o=Math.sqrt(u)):(n=a,r=s,o=Math.sqrt(u/2))}return new Tr(n/o,r/o)}(0,r.a)(L,"getBevelVec");let O=[];for(let e=0,i=C.length,n=i-1,r=e+1;e<i;e++,n++,r++)n===i&&(n=0),r===i&&(r=0),O[e]=L(C[e],C[n],C[r]);let N,q=[],R=O.concat();for(let e=0,i=S.length;e<i;e++){let t=S[e];N=[];for(let e=0,i=t.length,n=i-1,r=e+1;e<i;e++,n++,r++)n===i&&(n=0),r===i&&(r=0),N[e]=L(t[e],t[n],t[r]);q.push(N),R=R.concat(N)}for(let e=0;e<_;e++){let t=e/_,i=m*Math.cos(t*Math.PI/2),n=v*Math.sin(t*Math.PI/2)+y;for(let e=0,r=C.length;e<r;e++){let t=A(C[e],O[e],n);U(t.x,t.y,-i)}for(let e=0,r=S.length;e<r;e++){let t=S[e];N=q[e];for(let e=0,r=t.length;e<r;e++){let r=A(t[e],N[e],n);U(r.x,r.y,-i)}}}let D=v+y;for(let e=0;e<P;e++){let t=g?A(M[e],R[e],D):M[e];w?(h.copy(s.normals[0]).multiplyScalar(t.x),l.copy(s.binormals[0]).multiplyScalar(t.y),u.copy(a[0]).add(h).add(l),U(u.x,u.y,u.z)):U(t.x,t.y,0)}for(let e=1;e<=d;e++)for(let t=0;t<P;t++){let i=g?A(M[t],R[t],D):M[t];w?(h.copy(s.normals[e]).multiplyScalar(i.x),l.copy(s.binormals[e]).multiplyScalar(i.y),u.copy(a[e]).add(h).add(l),U(u.x,u.y,u.z)):U(i.x,i.y,f/d*e)}for(let e=_-1;e>=0;e--){let t=e/_,i=m*Math.cos(t*Math.PI/2),n=v*Math.sin(t*Math.PI/2)+y;for(let e=0,r=C.length;e<r;e++){let t=A(C[e],O[e],n);U(t.x,t.y,f+i)}for(let e=0,r=S.length;e<r;e++){let t=S[e];N=q[e];for(let e=0,r=t.length;e<r;e++){let r=A(t[e],N[e],n);w?U(r.x,r.y+a[d-1].y,a[d-1].x+i):U(r.x,r.y,f+i)}}}function k(){let t=n.length/3;if(g){let t=0,e=P*t;for(let i=0;i<I;i++){let t=T[i];z(t[2]+e,t[1]+e,t[0]+e)}e=P*(t=d+2*_);for(let i=0;i<I;i++){let t=T[i];z(t[0]+e,t[1]+e,t[2]+e)}}else{for(let t=0;t<I;t++){let e=T[t];z(e[2],e[1],e[0])}for(let t=0;t<I;t++){let e=T[t];z(e[0]+P*d,e[1]+P*d,e[2]+P*d)}}i.addGroup(t,n.length/3-t,0)}function B(){let t=n.length/3,e=0;F(C,e),e+=C.length;for(let i=0,n=S.length;i<n;i++){let t=S[i];F(t,e),e+=t.length}i.addGroup(t,n.length/3-t,1)}function F(t,e){let i=t.length;for(;--i>=0;){let n=i,r=i-1;r<0&&(r=t.length-1);for(let t=0,i=d+2*_;t<i;t++){let i=P*t,o=P*(t+1);V(e+n+i,e+r+i,e+r+o,e+n+o)}}}function U(t,e,i){c.push(t),c.push(e),c.push(i)}function z(t,e,r){j(t),j(e),j(r);let o=n.length/3,a=b.generateTopUV(i,n,o-3,o-2,o-1);G(a[0]),G(a[1]),G(a[2])}function V(t,e,r,o){j(t),j(e),j(o),j(e),j(r),j(o);let a=n.length/3,s=b.generateSideWallUV(i,n,a-6,a-3,a-2,a-1);G(s[0]),G(s[1]),G(s[3]),G(s[1]),G(s[2]),G(s[3])}function j(t){n.push(c[3*t+0]),n.push(c[3*t+1]),n.push(c[3*t+2])}function G(t){o.push(t.x),o.push(t.y)}k(),B(),(0,r.a)(k,"buildLidFaces"),(0,r.a)(B,"buildSideFaces"),(0,r.a)(F,"sidewalls"),(0,r.a)(U,"v"),(0,r.a)(z,"f3"),(0,r.a)(V,"f4"),(0,r.a)(j,"addVertex"),(0,r.a)(G,"addUV")}this.setAttribute("position",new $a(n,3)),this.setAttribute("uv",new $a(o,2)),this.computeVertexNormals(),(0,r.a)(a,"addShape")}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){let t=super.toJSON();return wm(this.parameters.shapes,this.parameters.options,t)}static fromJSON(e,i){let n=[];for(let t=0,o=e.shapes.length;t<o;t++){let r=i[e.shapes[t]];n.push(r)}let r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new Ag[r.type]).fromJSON(r)),new t(n,e.options)}};(0,r.a)(_m,"ExtrudeGeometry");var xm=_m,bm={generateTopUV:function(t,e,i,n,r){let o=e[3*i],a=e[3*i+1],s=e[3*n],l=e[3*n+1],h=e[3*r],u=e[3*r+1];return[new Tr(o,a),new Tr(s,l),new Tr(h,u)]},generateSideWallUV:function(t,e,i,n,r,o){let a=e[3*i],s=e[3*i+1],l=e[3*i+2],h=e[3*n],u=e[3*n+1],c=e[3*n+2],p=e[3*r],d=e[3*r+1],f=e[3*r+2],g=e[3*o],m=e[3*o+1],v=e[3*o+2];return Math.abs(s-u)<Math.abs(a-h)?[new Tr(a,1-l),new Tr(h,1-c),new Tr(p,1-f),new Tr(g,1-v)]:[new Tr(s,1-l),new Tr(u,1-c),new Tr(d,1-f),new Tr(m,1-v)]}};function wm(t,e,i){if(i.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){let e=t[n];i.shapes.push(e.uuid)}else i.shapes.push(t.uuid);return i.options=Object.assign({},e),void 0!==e.extrudePath&&(i.options.extrudePath=e.extrudePath.toJSON()),i}(0,r.a)(wm,"toJSON$1");var Em=class t extends ls{constructor(t=new Sg(new ho(-1,-1,0),new ho(-1,1,0),new ho(1,1,0)),e=64,i=1,n=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:n,closed:o};let a=t.computeFrenetFrames(e,o);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;let s=new ho,l=new ho,h=new Tr,u=new ho,c=[],p=[],d=[],f=[];function g(){for(let t=0;t<e;t++)m(t);m(!1===o?e:0),y(),v()}function m(r){u=t.getPointAt(r/e,u);let o=a.normals[r],h=a.binormals[r];for(let t=0;t<=n;t++){let e=t/n*Math.PI*2,r=Math.sin(e),a=-Math.cos(e);l.x=a*o.x+r*h.x,l.y=a*o.y+r*h.y,l.z=a*o.z+r*h.z,l.normalize(),p.push(l.x,l.y,l.z),s.x=u.x+i*l.x,s.y=u.y+i*l.y,s.z=u.z+i*l.z,c.push(s.x,s.y,s.z)}}function v(){for(let t=1;t<=e;t++)for(let e=1;e<=n;e++){let i=(n+1)*(t-1)+(e-1),r=(n+1)*t+(e-1),o=(n+1)*t+e,a=(n+1)*(t-1)+e;f.push(i,r,a),f.push(r,o,a)}}function y(){for(let t=0;t<=e;t++)for(let i=0;i<=n;i++)h.x=t/e,h.y=i/n,d.push(h.x,h.y)}g(),this.setIndex(f),this.setAttribute("position",new $a(c,3)),this.setAttribute("normal",new $a(p,3)),this.setAttribute("uv",new $a(d,2)),(0,r.a)(g,"generateBufferData"),(0,r.a)(m,"generateSegment"),(0,r.a)(v,"generateIndices"),(0,r.a)(y,"generateUVs")}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){let t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(e){return new t((new Ag[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}};(0,r.a)(Em,"TubeGeometry");var Mm=Em,Sm=class extends Us{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}};(0,r.a)(Sm,"RawShaderMaterial");var Tm=Sm,Cm=class extends qa{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ua(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ua(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Dn,this.normalScale=new Tr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ni,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}};(0,r.a)(Cm,"MeshLambertMaterial");var Am=Cm;function Pm(t,e,i){return Lm(t)?new t.constructor(t.subarray(e,void 0!==i?i:t.length)):t.slice(e,i)}function Im(t,e,i){return!t||!i&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function Lm(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(0,r.a)(Pm,"arraySlice"),(0,r.a)(Im,"convertArray"),(0,r.a)(Lm,"isTypedArray");var Om=class{constructor(t,e,i,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){let e=this.parameterPositions,i=this._cachedIndex,n=e[i],r=e[i-1];t:{e:{let o;i:{n:if(!(t<n)){for(let o=i+2;;){if(void 0===n){if(t<r)break n;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(r=n,t<(n=e[++i]))break e}o=e.length;break i}if(t>=r)break t;{let a=e[1];t<a&&(i=2,r=a);for(let o=i-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(i===o)break;if(n=r,t>=(r=e[--i-1]))break e}o=i,i=0}}for(;i<o;){let n=i+o>>>1;t<e[n]?o=n:i=n+1}if(n=e[i],void 0===(r=e[i-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===n)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,t,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){let e=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=t*n;for(let o=0;o!==n;++o)e[o]=i[r+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}};(0,r.a)(Om,"Interpolant");var Nm=Om,qm=class extends Nm{constructor(t,e,i,n){super(t,e,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Pn,endingEnd:Pn}}intervalChanged_(t,e,i){let n=this.parameterPositions,r=t-2,o=t+1,a=n[r],s=n[o];if(void 0===a)switch(this.getSettings_().endingStart){case In:r=t,a=2*e-i;break;case Ln:a=e+n[r=n.length-2]-n[r+1];break;default:r=t,a=i}if(void 0===s)switch(this.getSettings_().endingEnd){case In:o=t,s=2*i-e;break;case Ln:o=1,s=i+n[1]-n[0];break;default:o=t-1,s=e}let l=.5*(i-e),h=this.valueSize;this._weightPrev=l/(e-a),this._weightNext=l/(s-i),this._offsetPrev=r*h,this._offsetNext=o*h}interpolate_(t,e,i,n){let r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=s-a,h=this._offsetPrev,u=this._offsetNext,c=this._weightPrev,p=this._weightNext,d=(i-e)/(n-e),f=d*d,g=f*d,m=-c*g+2*c*f-c*d,v=(1+c)*g+(-1.5-2*c)*f+(-.5+c)*d+1,y=(-1-p)*g+(1.5+p)*f+.5*d,_=p*g-p*f;for(let x=0;x!==a;++x)r[x]=m*o[h+x]+v*o[l+x]+y*o[s+x]+_*o[u+x];return r}};(0,r.a)(qm,"CubicInterpolant");var Rm=qm,Dm=class extends Nm{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t,e,i,n){let r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=s-a,h=(i-e)/(n-e),u=1-h;for(let c=0;c!==a;++c)r[c]=o[l+c]*u+o[s+c]*h;return r}};(0,r.a)(Dm,"LinearInterpolant");var km=Dm,Bm=class extends Nm{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t){return this.copySampleValue_(t-1)}};(0,r.a)(Bm,"DiscreteInterpolant");var Fm=Bm,Um=class{constructor(t,e,i,n){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Im(e,this.TimeBufferType),this.values=Im(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(t){let e,i=t.constructor;if(i.toJSON!==this.toJSON)e=i.toJSON(t);else{e={name:t.name,times:Im(t.times,Array),values:Im(t.values,Array)};let i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i)}return e.type=t.ValueTypeName,e}InterpolantFactoryMethodDiscrete(t){return new Fm(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new km(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Rm(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case Tn:e=this.InterpolantFactoryMethodDiscrete;break;case Cn:e=this.InterpolantFactoryMethodLinear;break;case An:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){let e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Tn;case this.InterpolantFactoryMethodLinear:return Cn;case this.InterpolantFactoryMethodSmooth:return An}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){let e=this.times;for(let i=0,n=e.length;i!==n;++i)e[i]+=t}return this}scale(t){if(1!==t){let e=this.times;for(let i=0,n=e.length;i!==n;++i)e[i]*=t}return this}trim(t,e){let i=this.times,n=i.length,r=0,o=n-1;for(;r!==n&&i[r]<t;)++r;for(;-1!==o&&i[o]>e;)--o;if(++o,0!==r||o!==n){r>=o&&(r=(o=Math.max(o,1))-1);let t=this.getValueSize();this.times=Pm(i,r,o),this.values=Pm(this.values,r*t,o*t)}return this}validate(){let t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);let i=this.times,n=this.values,r=i.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let a=0;a!==r;a++){let e=i[a];if("number"==typeof e&&isNaN(e)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,e),t=!1;break}if(null!==o&&o>e){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,e,o),t=!1;break}o=e}if(void 0!==n&&Lm(n))for(let a=0,s=n.length;a!==s;++a){let e=n[a];if(isNaN(e)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,e),t=!1;break}}return t}optimize(){let t=Pm(this.times),e=Pm(this.values),i=this.getValueSize(),n=this.getInterpolation()===An,r=t.length-1,o=1;for(let a=1;a<r;++a){let r=!1,s=t[a];if(s!==t[a+1]&&(1!==a||s!==t[0]))if(n)r=!0;else{let t=a*i,n=t-i,o=t+i;for(let a=0;a!==i;++a){let i=e[t+a];if(i!==e[n+a]||i!==e[o+a]){r=!0;break}}}if(r){if(a!==o){t[o]=t[a];let n=a*i,r=o*i;for(let t=0;t!==i;++t)e[r+t]=e[n+t]}++o}}if(r>0){t[o]=t[r];for(let t=r*i,n=o*i,a=0;a!==i;++a)e[n+a]=e[t+a];++o}return o!==t.length?(this.times=Pm(t,0,o),this.values=Pm(e,0,o*i)):(this.times=t,this.values=e),this}clone(){let t=Pm(this.times,0),e=Pm(this.values,0),i=new(0,this.constructor)(this.name,t,e);return i.createInterpolant=this.createInterpolant,i}};(0,r.a)(Um,"KeyframeTrack");var zm=Um;zm.prototype.TimeBufferType=Float32Array,zm.prototype.ValueBufferType=Float32Array,zm.prototype.DefaultInterpolation=Cn;var Vm=class extends zm{};(0,r.a)(Vm,"BooleanKeyframeTrack");var jm=Vm;jm.prototype.ValueTypeName="bool",jm.prototype.ValueBufferType=Array,jm.prototype.DefaultInterpolation=Tn,jm.prototype.InterpolantFactoryMethodLinear=void 0,jm.prototype.InterpolantFactoryMethodSmooth=void 0;var Gm=class extends zm{};(0,r.a)(Gm,"ColorKeyframeTrack");var Hm=Gm;Hm.prototype.ValueTypeName="color";var Wm=class extends zm{};(0,r.a)(Wm,"NumberKeyframeTrack");var Xm=Wm;Xm.prototype.ValueTypeName="number";var Ym=class extends Nm{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t,e,i,n){let r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(i-e)/(n-e),l=t*a;for(let h=l+a;l!==h;l+=4)so.slerpFlat(r,0,o,l-a,o,l,s);return r}};(0,r.a)(Ym,"QuaternionLinearInterpolant");var Zm=Ym,Jm=class extends zm{InterpolantFactoryMethodLinear(t){return new Zm(this.times,this.values,this.getValueSize(),t)}};(0,r.a)(Jm,"QuaternionKeyframeTrack");var Km=Jm;Km.prototype.ValueTypeName="quaternion",Km.prototype.DefaultInterpolation=Cn,Km.prototype.InterpolantFactoryMethodSmooth=void 0;var Qm=class extends zm{};(0,r.a)(Qm,"StringKeyframeTrack");var $m=Qm;$m.prototype.ValueTypeName="string",$m.prototype.ValueBufferType=Array,$m.prototype.DefaultInterpolation=Tn,$m.prototype.InterpolantFactoryMethodLinear=void 0,$m.prototype.InterpolantFactoryMethodSmooth=void 0;var tv=class extends zm{};(0,r.a)(tv,"VectorKeyframeTrack");var ev=tv;ev.prototype.ValueTypeName="vector";var iv={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},nv=class{constructor(t,e,i){let n,r=this,o=!1,a=0,s=0,l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){s++,!1===o&&void 0!==r.onStart&&r.onStart(t,a,s),o=!0},this.itemEnd=function(t){a++,void 0!==r.onProgress&&r.onProgress(t,a,s),a===s&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return n?n(t):t},this.setURLModifier=function(t){return n=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){let e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,i=l.length;e<i;e+=2){let i=l[e],n=l[e+1];if(i.global&&(i.lastIndex=0),i.test(t))return n}return null}}};(0,r.a)(nv,"LoadingManager");var rv=nv,ov=new rv,av=class{constructor(t){this.manager=void 0!==t?t:ov,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){let i=this;return new Promise(function(n,r){i.load(t,n,e,r)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}};(0,r.a)(av,"Loader");var sv=av,lv=class extends sv{constructor(t){super(t)}load(t,e,i,n){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);let o=this,a=iv.get(t);if(void 0!==a)return o.manager.itemStart(t),setTimeout(function(){e&&e(a),o.manager.itemEnd(t)},0),a;let s=Lr("img");function l(){u(),iv.add(t,this),e&&e(this),o.manager.itemEnd(t)}function h(e){u(),n&&n(e),o.manager.itemError(t),o.manager.itemEnd(t)}function u(){s.removeEventListener("load",l,!1),s.removeEventListener("error",h,!1)}return(0,r.a)(l,"onImageLoad"),(0,r.a)(h,"onImageError"),(0,r.a)(u,"removeEventListeners"),s.addEventListener("load",l,!1),s.addEventListener("error",h,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),o.manager.itemStart(t),s.src=t,s}};(0,r.a)(lv,"ImageLoader");var hv=lv,uv=class extends sv{constructor(t){super(t)}load(t,e,i,n){let r=new Zr,o=new hv(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(t){r.image=t,r.needsUpdate=!0,void 0!==e&&e(r)},i,n),r}};(0,r.a)(uv,"TextureLoader");var cv=uv,pv=class extends ya{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Ua(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){let e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}};(0,r.a)(pv,"Light");var dv=pv,fv=new Go,gv=new ho,mv=new ho,vv=class{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Tr(512,512),this.map=null,this.mapPass=null,this.matrix=new Go,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new sl,this._frameExtents=new Tr(1,1),this._viewportCount=1,this._viewports=[new Kr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){let e=this.camera,i=this.matrix;gv.setFromMatrixPosition(t.matrixWorld),e.position.copy(gv),mv.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(mv),e.updateMatrixWorld(),fv.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(fv),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(fv)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){let t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}};(0,r.a)(vv,"LightShadow");var yv=vv,_v=class extends yv{constructor(){super(new Qu(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}};(0,r.a)(_v,"DirectionalLightShadow");var xv=_v,bv=class extends dv{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ya.DEFAULT_UP),this.updateMatrix(),this.target=new ya,this.shadow=new xv}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}};(0,r.a)(bv,"DirectionalLight");var wv=bv,Ev=class extends dv{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}};(0,r.a)(Ev,"AmbientLight");var Mv=Ev,Sv=class extends ls{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){let t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}};(0,r.a)(Sv,"InstancedBufferGeometry");var Tv=Sv,Cv=class{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Pv(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let e=Pv();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}};(0,r.a)(Cv,"Clock");var Av=Cv;function Pv(){return(typeof performance>"u"?Date:performance).now()}(0,r.a)(Pv,"now");var Iv="\\[\\]\\.:\\/",Lv=new RegExp("["+Iv+"]","g"),Ov="[^"+Iv+"]",Nv="[^"+Iv.replace("\\.","")+"]",qv=/((?:WC+[\/:])*)/.source.replace("WC",Ov),Rv=/(WCOD+)?/.source.replace("WCOD",Nv),Dv=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ov),kv=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ov),Bv=new RegExp("^"+qv+Rv+Dv+kv+"$"),Fv=["material","materials","bones","map"],Uv=class{constructor(t,e,i){let n=i||jv.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,n)}getValue(t,e){this.bind();let i=this._targetGroup.nCachedObjects_,n=this._bindings[i];void 0!==n&&n.getValue(t,e)}setValue(t,e){let i=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(t,e)}bind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}};(0,r.a)(Uv,"Composite");var zv=Uv,Vv=class t{constructor(e,i,n){this.path=i,this.parsedPath=n||t.parseTrackName(i),this.node=t.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,i,n){return e&&e.isAnimationObjectGroup?new t.Composite(e,i,n):new t(e,i,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Lv,"")}static parseTrackName(t){let e=Bv.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);let i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){let t=i.nodeName.substring(n+1);-1!==Fv.indexOf(t)&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=t)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){let i=t.skeleton.getBoneByName(e);if(void 0!==i)return i}if(t.children){let i=(0,r.a)(function(t){for(let n=0;n<t.length;n++){let r=t[n];if(r.name===e||r.uuid===e)return r;let o=i(r.children);if(o)return o}return null},"searchNodeSubtree"),n=i(t.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){let i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)t[e++]=i[n]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){let i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=t[e++]}_setValue_array_setNeedsUpdate(t,e){let i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){let i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let e=this.node,i=this.parsedPath,n=i.objectName,r=i.propertyName,o=i.propertyIndex;if(e||(e=t.findNode(this.rootNode,i.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let t=i.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let i=0;i<e.length;i++)if(e[i].name===t){t=i;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==t){if(void 0===e[t])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[t]}}let a=e[r];if(void 0===a){let t=i.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+t+"."+r+" but it wasn't found.",e)}let s=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[o]&&(o=e.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};(0,r.a)(Vv,"PropertyBinding");var jv=Vv;jv.Composite=zv,jv.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},jv.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},jv.prototype.GetterByBindingType=[jv.prototype._getValue_direct,jv.prototype._getValue_array,jv.prototype._getValue_arrayElement,jv.prototype._getValue_toArray],jv.prototype.SetterByBindingTypeAndVersioning=[[jv.prototype._setValue_direct,jv.prototype._setValue_direct_setNeedsUpdate,jv.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[jv.prototype._setValue_array,jv.prototype._setValue_array_setNeedsUpdate,jv.prototype._setValue_array_setMatrixWorldNeedsUpdate],[jv.prototype._setValue_arrayElement,jv.prototype._setValue_arrayElement_setNeedsUpdate,jv.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[jv.prototype._setValue_fromArray,jv.prototype._setValue_fromArray_setNeedsUpdate,jv.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var Gv=new Float32Array(1),Hv=class t{constructor(t){this.value=t}clone(){return new t(void 0===this.value.clone?this.value:this.value.clone())}};(0,r.a)(Hv,"Uniform");var Wv=Hv,Xv=class{constructor(t,e,i=0,n=1/0){this.ray=new Vo(t,e),this.near=i,this.far=n,this.camera=null,this.layers=new na,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t,e=!0,i=[]){return Jv(t,this,i,e),i.sort(Zv),i}intersectObjects(t,e=!0,i=[]){for(let n=0,r=t.length;n<r;n++)Jv(t[n],this,i,e);return i.sort(Zv),i}};(0,r.a)(Xv,"Raycaster");var Yv=Xv;function Zv(t,e){return t.distance-e.distance}function Jv(t,e,i,n){if(t.layers.test(e.layers)&&t.raycast(e,i),!0===n){let n=t.children;for(let t=0,r=n.length;t<r;t++)Jv(n[t],e,i,!0)}}(0,r.a)(Zv,"ascSort"),(0,r.a)(Jv,"intersectObject");var Kv=class extends Vf{constructor(t=10,e=10,i=4473924,n=8947848){i=new Ua(i),n=new Ua(n);let r=e/2,o=t/e,a=t/2,s=[],l=[];for(let u=0,c=0,p=-a;u<=e;u++,p+=o){s.push(-a,0,p,a,0,p),s.push(p,0,-a,p,0,a);let t=u===r?i:n;t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3}let h=new ls;h.setAttribute("position",new $a(s,3)),h.setAttribute("color",new $a(l,3)),super(h,new Lf({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}};(0,r.a)(Kv,"GridHelper");var Qv=Kv,$v=new fo,ty=class extends Vf{constructor(t,e=16776960){let i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),r=new ls;r.setIndex(new Xa(i,1)),r.setAttribute("position",new Xa(n,3)),super(r,new Lf({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&$v.setFromObject(this.object),$v.isEmpty())return;let e=$v.min,i=$v.max,n=this.geometry.attributes.position,r=n.array;r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=e.x,r[4]=i.y,r[5]=i.z,r[6]=e.x,r[7]=e.y,r[8]=i.z,r[9]=i.x,r[10]=e.y,r[11]=i.z,r[12]=i.x,r[13]=i.y,r[14]=e.z,r[15]=e.x,r[16]=i.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=i.x,r[22]=e.y,r[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}};(0,r.a)(ty,"BoxHelper");var ey=ty,iy=class{constructor(){this.type="ShapePath",this.color=new Ua,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new Og,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,i,n){return this.currentPath.quadraticCurveTo(t,e,i,n),this}bezierCurveTo(t,e,i,n,r,o){return this.currentPath.bezierCurveTo(t,e,i,n,r,o),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(t){let e=[];for(let i=0,n=t.length;i<n;i++){let n=t[i],r=new Dg;r.curves=n.curves,e.push(r)}return e}function i(t,e){let i=e.length,n=!1;for(let r=i-1,o=0;o<i;r=o++){let i=e[r],a=e[o],s=a.x-i.x,l=a.y-i.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(i=e[o],s=-s,a=e[r],l=-l),t.y<i.y||t.y>a.y)continue;if(t.y===i.y){if(t.x===i.x)return!0}else{let e=l*(t.x-i.x)-s*(t.y-i.y);if(0===e)return!0;if(e<0)continue;n=!n}}else{if(t.y!==i.y)continue;if(a.x<=t.x&&t.x<=i.x||i.x<=t.x&&t.x<=a.x)return!0}}return n}(0,r.a)(e,"toShapesNoHoles"),(0,r.a)(i,"isPointInsidePolygon");let n=mm.isClockWise,o=this.subPaths;if(0===o.length)return[];let a,s,l,h=[];if(1===o.length)return s=o[0],(l=new Dg).curves=s.curves,h.push(l),h;let u=!n(o[0].getPoints());u=t?!u:u;let c,p,d=[],f=[],g=[],m=0;f[m]=void 0,g[m]=[];for(let r=0,v=o.length;r<v;r++)a=n(c=(s=o[r]).getPoints()),(a=t?!a:a)?(!u&&f[m]&&m++,f[m]={s:new Dg,p:c},f[m].s.curves=s.curves,u&&m++,g[m]=[]):g[m].push({h:s,p:c[0]});if(!f[0])return e(o);if(f.length>1){let t=!1,e=0;for(let i=0,n=f.length;i<n;i++)d[i]=[];for(let n=0,r=f.length;n<r;n++){let r=g[n];for(let o=0;o<r.length;o++){let a=r[o],s=!0;for(let r=0;r<f.length;r++)i(a.p,f[r].p)&&(n!==r&&e++,s?(s=!1,d[r].push(a)):t=!0);s&&d[n].push(a)}}e>0&&!1===t&&(g=d)}for(let r=0,v=f.length;r<v;r++){l=f[r].s,h.push(l),p=g[r];for(let t=0,e=p.length;t<e;t++)l.holes.push(p[t].h)}return h}};(0,r.a)(iy,"ShapePath");var ny=iy,ry=class extends cl{constructor(t,e,i,n){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(t,e,i,n)}};(0,r.a)(ry,"PlaneBufferGeometry");var oy=ry;typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:me}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=me),(0,n.a)(),(0,n.a)();var ay=" ",sy=class t{static get separator(){return ay}static set separator(t){ay=t}static parse(t){if(!isNaN(parseFloat(t))&&isFinite(t))return Number(t);let e=String(t).trim().replace(/^-/,"").replace(/[NSEW]$/i,"").split(/[^0-9.,]+/);if(""==e[e.length-1]&&e.splice(e.length-1),""==e)return NaN;let i=null;switch(e.length){case 3:i=e[0]/1+e[1]/60+e[2]/3600;break;case 2:i=e[0]/1+e[1]/60;break;case 1:i=e[0];break;default:return NaN}return/^-|[WS]$/i.test(t.trim())&&(i=-i),Number(i)}static toDms(e,i="d",n){if(isNaN(e)||"string"==typeof e&&""==e.trim()||"boolean"==typeof e||e==1/0||null==e)return null;if(void 0===n)switch(i){case"d":case"deg":n=4;break;case"dm":case"deg+min":n=2;break;case"dms":case"deg+min+sec":n=0;break;default:i="d",n=4}e=Math.abs(e);let r=null,o=null,a=null,s=null;switch(i){default:case"d":case"deg":(o=e.toFixed(n))<100&&(o="0"+o),o<10&&(o="0"+o),r=o+"°";break;case"dm":case"deg+min":o=Math.floor(e),60==(a=(60*e%60).toFixed(n))&&(a=(0).toFixed(n),o++),a<10&&(a="0"+a),r=(o=("000"+o).slice(-3))+"°"+t.separator+a+"′";break;case"dms":case"deg+min+sec":o=Math.floor(e),a=Math.floor(3600*e/60)%60,60==(s=(3600*e%60).toFixed(n))&&(s=(0).toFixed(n),a++),60==a&&(a=0,o++),o=("000"+o).slice(-3),a=("00"+a).slice(-2),s<10&&(s="0"+s),r=o+"°"+t.separator+a+"′"+t.separator+s+"″"}return r}static toLat(e,i,n){let r=t.toDms(t.wrap90(e),i,n);return null===r?"–":r.slice(1)+t.separator+(e<0?"S":"N")}static toLon(e,i,n){let r=t.toDms(t.wrap180(e),i,n);return null===r?"–":r+t.separator+(e<0?"W":"E")}static toBrng(e,i,n){let r=t.toDms(t.wrap360(e),i,n);return null===r?"–":r.replace("360","0")}static fromLocale(t){let e=123456.789.toLocaleString(),i={thousands:e.slice(3,4),decimal:e.slice(7,8)};return t.replace(i.thousands,"⁜").replace(i.decimal,".").replace("⁜",",")}static toLocale(t){let e=123456.789.toLocaleString(),i={thousands:e.slice(3,4),decimal:e.slice(7,8)};return t.replace(/,([0-9])/,"⁜$1").replace(".",i.decimal).replace("⁜",i.thousands)}static compassPoint(e,i=3){if(![1,2,3].includes(Number(i)))throw new RangeError("invalid precision ‘".concat(i,"’"));e=t.wrap360(e);let n=4*2**(i-1);return["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"][Math.round(e*n/360)%n*16/n]}static wrap360(t){return 0<=t&&t<360?t:(t%360+360)%360}static wrap180(t){return-180<t&&t<=180?t:(t+540)%360-180}static wrap90(t){return-90<=t&&t<=90?t:Math.abs((t%360+270)%360-180)-90}};(0,r.a)(sy,"Dms");var ly=sy;Number.prototype.toRadians=function(){return this*Math.PI/180},Number.prototype.toDegrees=function(){return 180*this/Math.PI};var hy=ly,uy=Math.PI,cy=class t{constructor(t,e){if(isNaN(t))throw new TypeError("invalid lat ‘".concat(t,"’"));if(isNaN(e))throw new TypeError("invalid lon ‘".concat(e,"’"));this._lat=hy.wrap90(Number(t)),this._lon=hy.wrap180(Number(e))}get lat(){return this._lat}get latitude(){return this._lat}set lat(t){if(this._lat=isNaN(t)?hy.wrap90(hy.parse(t)):hy.wrap90(Number(t)),isNaN(this._lat))throw new TypeError("invalid lat ‘".concat(t,"’"))}set latitude(t){if(this._lat=isNaN(t)?hy.wrap90(hy.parse(t)):hy.wrap90(Number(t)),isNaN(this._lat))throw new TypeError("invalid latitude ‘".concat(t,"’"))}get lon(){return this._lon}get lng(){return this._lon}get longitude(){return this._lon}set lon(t){if(this._lon=isNaN(t)?hy.wrap180(hy.parse(t)):hy.wrap180(Number(t)),isNaN(this._lon))throw new TypeError("invalid lon ‘".concat(t,"’"))}set lng(t){if(this._lon=isNaN(t)?hy.wrap180(hy.parse(t)):hy.wrap180(Number(t)),isNaN(this._lon))throw new TypeError("invalid lng ‘".concat(t,"’"))}set longitude(t){if(this._lon=isNaN(t)?hy.wrap180(hy.parse(t)):hy.wrap180(Number(t)),isNaN(this._lon))throw new TypeError("invalid longitude ‘".concat(t,"’"))}static get metresToKm(){return.001}static get metresToMiles(){return 1/1609.344}static get metresToNauticalMiles(){return 1/1852}static parse(...e){if(0==e.length)throw new TypeError("invalid (empty) point");if(null===e[0]||null===e[1])throw new TypeError("invalid (null) point");let i,n;if(2==e.length&&([i,n]=e,i=hy.wrap90(hy.parse(i)),n=hy.wrap180(hy.parse(n)),isNaN(i)||isNaN(n)))throw new TypeError("invalid point ‘".concat(e.toString(),"’"));if(1==e.length&&"string"==typeof e[0]&&([i,n]=e[0].split(","),i=hy.wrap90(hy.parse(i)),n=hy.wrap180(hy.parse(n)),isNaN(i)||isNaN(n)))throw new TypeError("invalid point ‘".concat(e[0],"’"));if(1==e.length&&"object"==typeof e[0]){let t=e[0];if("Point"==t.type&&Array.isArray(t.coordinates)?[n,i]=t.coordinates:(null!=t.latitude&&(i=t.latitude),null!=t.lat&&(i=t.lat),null!=t.longitude&&(n=t.longitude),null!=t.lng&&(n=t.lng),null!=t.lon&&(n=t.lon),i=hy.wrap90(hy.parse(i)),n=hy.wrap180(hy.parse(n))),isNaN(i)||isNaN(n))throw new TypeError("invalid point ‘".concat(JSON.stringify(e[0]),"’"))}if(isNaN(i)||isNaN(n))throw new TypeError("invalid point ‘".concat(e.toString(),"’"));return new t(i,n)}distanceTo(e,i=6371e3){if(e instanceof t||(e=t.parse(e)),isNaN(i))throw new TypeError("invalid radius ‘".concat(i,"’"));let n=i,r=this.lat.toRadians(),o=this.lon.toRadians(),a=e.lat.toRadians(),s=a-r,l=e.lon.toRadians()-o,h=Math.sin(s/2)*Math.sin(s/2)+Math.cos(r)*Math.cos(a)*Math.sin(l/2)*Math.sin(l/2);return n*(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)))}initialBearingTo(e){if(e instanceof t||(e=t.parse(e)),this.equals(e))return NaN;let i=this.lat.toRadians(),n=e.lat.toRadians(),r=(e.lon-this.lon).toRadians(),o=Math.cos(i)*Math.sin(n)-Math.sin(i)*Math.cos(n)*Math.cos(r),a=Math.sin(r)*Math.cos(n),s=Math.atan2(a,o).toDegrees();return hy.wrap360(s)}finalBearingTo(e){e instanceof t||(e=t.parse(e));let i=e.initialBearingTo(this)+180;return hy.wrap360(i)}midpointTo(e){e instanceof t||(e=t.parse(e));let i=this.lat.toRadians(),n=this.lon.toRadians(),r=e.lat.toRadians(),o=(e.lon-this.lon).toRadians(),a=Math.cos(i),s=Math.sin(i),l={x:a+Math.cos(r)*Math.cos(o),y:0+Math.cos(r)*Math.sin(o),z:s+Math.sin(r)},h=Math.atan2(l.z,Math.sqrt(l.x*l.x+l.y*l.y)),u=n+Math.atan2(l.y,l.x),c=h.toDegrees(),p=u.toDegrees();return new t(c,p)}intermediatePointTo(e,i){if(e instanceof t||(e=t.parse(e)),this.equals(e))return new t(this.lat,this.lon);let n=this.lat.toRadians(),r=this.lon.toRadians(),o=e.lat.toRadians(),a=e.lon.toRadians(),s=o-n,l=a-r,h=Math.sin(s/2)*Math.sin(s/2)+Math.cos(n)*Math.cos(o)*Math.sin(l/2)*Math.sin(l/2),u=2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),c=Math.sin((1-i)*u)/Math.sin(u),p=Math.sin(i*u)/Math.sin(u),d=c*Math.cos(n)*Math.cos(r)+p*Math.cos(o)*Math.cos(a),f=c*Math.cos(n)*Math.sin(r)+p*Math.cos(o)*Math.sin(a),g=c*Math.sin(n)+p*Math.sin(o),m=Math.atan2(g,Math.sqrt(d*d+f*f)),v=Math.atan2(f,d),y=m.toDegrees(),_=v.toDegrees();return new t(y,_)}destinationPoint(e,i,n=6371e3){let r=e/n,o=Number(i).toRadians(),a=this.lat.toRadians(),s=this.lon.toRadians(),l=Math.sin(a)*Math.cos(r)+Math.cos(a)*Math.sin(r)*Math.cos(o),h=Math.asin(l),u=Math.sin(o)*Math.sin(r)*Math.cos(a),c=Math.cos(r)-Math.sin(a)*l,p=s+Math.atan2(u,c),d=h.toDegrees(),f=p.toDegrees();return new t(d,f)}static intersection(e,i,n,r){if(e instanceof t||(e=t.parse(e)),n instanceof t||(n=t.parse(n)),isNaN(i))throw new TypeError("invalid brng1 ‘".concat(i,"’"));if(isNaN(r))throw new TypeError("invalid brng2 ‘".concat(r,"’"));let o=e.lat.toRadians(),a=e.lon.toRadians(),s=n.lat.toRadians(),l=n.lon.toRadians(),h=Number(i).toRadians(),u=Number(r).toRadians(),c=s-o,p=l-a,d=2*Math.asin(Math.sqrt(Math.sin(c/2)*Math.sin(c/2)+Math.cos(o)*Math.cos(s)*Math.sin(p/2)*Math.sin(p/2)));if(Math.abs(d)<Number.EPSILON)return new t(e.lat,e.lon);let f=(Math.sin(s)-Math.sin(o)*Math.cos(d))/(Math.sin(d)*Math.cos(o)),g=(Math.sin(o)-Math.sin(s)*Math.cos(d))/(Math.sin(d)*Math.cos(s)),m=Math.acos(Math.min(Math.max(f,-1),1)),v=Math.acos(Math.min(Math.max(g,-1),1)),y=h-(Math.sin(l-a)>0?m:2*uy-m),_=(Math.sin(l-a)>0?2*uy-v:v)-u;if(0==Math.sin(y)&&0==Math.sin(_)||Math.sin(y)*Math.sin(_)<0)return null;let x=-Math.cos(y)*Math.cos(_)+Math.sin(y)*Math.sin(_)*Math.cos(d),b=Math.atan2(Math.sin(d)*Math.sin(y)*Math.sin(_),Math.cos(_)+Math.cos(y)*x),w=Math.asin(Math.min(Math.max(Math.sin(o)*Math.cos(b)+Math.cos(o)*Math.sin(b)*Math.cos(h),-1),1)),E=a+Math.atan2(Math.sin(h)*Math.sin(b)*Math.cos(o),Math.cos(b)-Math.sin(o)*Math.sin(w)),M=w.toDegrees(),S=E.toDegrees();return new t(M,S)}crossTrackDistanceTo(e,i,n=6371e3){e instanceof t||(e=t.parse(e)),i instanceof t||(i=t.parse(i));let r=n;if(this.equals(e))return 0;let o=e.distanceTo(this,r)/r,a=e.initialBearingTo(this).toRadians(),s=e.initialBearingTo(i).toRadians();return Math.asin(Math.sin(o)*Math.sin(a-s))*r}alongTrackDistanceTo(e,i,n=6371e3){e instanceof t||(e=t.parse(e)),i instanceof t||(i=t.parse(i));let r=n;if(this.equals(e))return 0;let o=e.distanceTo(this,r)/r,a=e.initialBearingTo(this).toRadians(),s=e.initialBearingTo(i).toRadians(),l=Math.asin(Math.sin(o)*Math.sin(a-s));return Math.acos(Math.cos(o)/Math.abs(Math.cos(l)))*Math.sign(Math.cos(s-a))*r}maxLatitude(t){let e=Number(t).toRadians(),i=this.lat.toRadians();return Math.acos(Math.abs(Math.sin(e)*Math.cos(i))).toDegrees()}static crossingParallels(t,e,i){if(t.equals(e))return null;let n=Number(i).toRadians(),r=t.lat.toRadians(),o=t.lon.toRadians(),a=e.lat.toRadians(),s=e.lon.toRadians()-o,l=Math.sin(r)*Math.cos(a)*Math.cos(n)*Math.sin(s),h=Math.sin(r)*Math.cos(a)*Math.cos(n)*Math.cos(s)-Math.cos(r)*Math.sin(a)*Math.cos(n),u=Math.cos(r)*Math.cos(a)*Math.sin(n)*Math.sin(s);if(u*u>l*l+h*h)return null;let c=Math.atan2(-h,l),p=Math.acos(u/Math.sqrt(l*l+h*h)),d=o+c+p,f=(o+c-p).toDegrees(),g=d.toDegrees();return{lon1:hy.wrap180(f),lon2:hy.wrap180(g)}}rhumbDistanceTo(e,i=6371e3){e instanceof t||(e=t.parse(e));let n=i,r=this.lat.toRadians(),o=e.lat.toRadians(),a=o-r,s=Math.abs(e.lon-this.lon).toRadians();Math.abs(s)>uy&&(s=s>0?-(2*uy-s):2*uy+s);let l=Math.log(Math.tan(o/2+uy/4)/Math.tan(r/2+uy/4)),h=Math.abs(l)>1e-11?a/l:Math.cos(r);return Math.sqrt(a*a+h*h*s*s)*n}rhumbBearingTo(e){if(e instanceof t||(e=t.parse(e)),this.equals(e))return NaN;let i=this.lat.toRadians(),n=e.lat.toRadians(),r=(e.lon-this.lon).toRadians();Math.abs(r)>uy&&(r=r>0?-(2*uy-r):2*uy+r);let o=Math.log(Math.tan(n/2+uy/4)/Math.tan(i/2+uy/4)),a=Math.atan2(r,o).toDegrees();return hy.wrap360(a)}rhumbDestinationPoint(e,i,n=6371e3){let r=this.lat.toRadians(),o=this.lon.toRadians(),a=Number(i).toRadians(),s=e/n,l=s*Math.cos(a),h=r+l;Math.abs(h)>uy/2&&(h=h>0?uy-h:-uy-h);let u=Math.log(Math.tan(h/2+uy/4)/Math.tan(r/2+uy/4)),c=Math.abs(u)>1e-11?l/u:Math.cos(r),p=o+s*Math.sin(a)/c,d=h.toDegrees(),f=p.toDegrees();return new t(d,f)}rhumbMidpointTo(e){e instanceof t||(e=t.parse(e));let i=this.lat.toRadians(),n=this.lon.toRadians(),r=e.lat.toRadians(),o=e.lon.toRadians();Math.abs(o-n)>uy&&(n+=2*uy);let a=(i+r)/2,s=Math.tan(uy/4+i/2),l=Math.tan(uy/4+r/2),h=Math.tan(uy/4+a/2),u=((o-n)*Math.log(h)+n*Math.log(l)-o*Math.log(s))/Math.log(l/s);isFinite(u)||(u=(n+o)/2);let c=a.toDegrees(),p=u.toDegrees();return new t(c,p)}static areaOf(t,e=6371e3){let i=e,n=t[0].equals(t[t.length-1]);n||t.push(t[0]);let r=t.length-1,o=0;for(let s=0;s<r;s++){let e=t[s].lat.toRadians(),i=t[s+1].lat.toRadians(),n=(t[s+1].lon-t[s].lon).toRadians();o+=2*Math.atan2(Math.tan(n/2)*(Math.tan(e/2)+Math.tan(i/2)),1+Math.tan(e/2)*Math.tan(i/2))}(function(t){let e=0,i=t[0].initialBearingTo(t[1]);for(let n=0;n<t.length-1;n++){let r=t[n].initialBearingTo(t[n+1]),o=t[n].finalBearingTo(t[n+1]);e+=(r-i+540)%360-180,e+=(o-r+540)%360-180,i=o}return e+=(t[0].initialBearingTo(t[1])-i+540)%360-180,Math.abs(e)<90})(t)&&(o=Math.abs(o)-2*uy);let a=Math.abs(o*i*i);return n||t.pop(),a}equals(e){return e instanceof t||(e=t.parse(e)),!(Math.abs(this.lat-e.lat)>Number.EPSILON||Math.abs(this.lon-e.lon)>Number.EPSILON)}toGeoJSON(){return{type:"Point",coordinates:[this.lon,this.lat]}}toString(t="d",e){if(!["d","dm","dms","n"].includes(t))throw new RangeError("invalid format ‘".concat(t,"’"));if("n"==t)return null==e&&(e=4),"".concat(this.lat.toFixed(e),",").concat(this.lon.toFixed(e));let i=hy.toLat(this.lat,t,e),n=hy.toLon(this.lon,t,e);return"".concat(i,", ").concat(n)}};(0,r.a)(cy,"LatLonSpherical");var py=cy;(0,n.a)();var dy="mi-debug",fy=exports.E_SDK_LOG_LEVEL=(t=>(t[t.LOG=0]="LOG",t[t.WARN=1]="WARN",t[t.ERROR=2]="ERROR",t[t.SILENT=3]="SILENT",t))(fy||{});function gy(t){0<=t&&t<=3&&(my.logState=t)}(0,r.a)(gy,"setLoggerLevel");var my={logState:0,log(...t){this.logState<=0&&console.log("[MappedInJS]",...t)},warn(...t){this.logState<=1&&console.warn("[MappedInJS]",...t)},error(...t){this.logState<=2&&console.error("[MappedInJS]",...t)},assert(...t){console.assert(...t)},time(t){console.time(t)},timeEnd(t){console.timeEnd(t)}},vy=my;(0,n.a)(),(0,n.a)();var yy,_y,xy,by=[0,4,6,8,10],wy=(0,r.a)(()=>{let t=new Array(16).fill(0),e=4294967296*Math.random();for(let n=0;n<t.length;n++)n>0&&!(3&n)&&(e=4294967296*Math.random()),t[n]=e>>>((3&n)<<3)&255;let i=t.map(t=>t.toString(16).padStart(2,"0"));return i[6]="4"+i[6][1],i[8]=["8","9","a","b"].includes(i[7][0])?i[7]:"a"+i[7][1],by.map((t,e)=>i.slice(t,e===by.length-1?void 0:by[e+1]).join("")).join("-")},"randomId"),Ey="mi-session-data",My="mi-local-data",Sy=class t{constructor(){(0,r.h)(this,_y,void 0),(0,r.h)(this,xy,void 0);try{let t=sessionStorage.getItem(Ey);(0,r.i)(this,_y,t?JSON.parse(t):{id:wy()})}catch{(0,r.i)(this,_y,{id:wy()})}try{let t=localStorage.getItem(My);(0,r.i)(this,xy,t?JSON.parse(t):{deviceId:wy()})}catch{(0,r.i)(this,xy,{deviceId:wy()})}(0,r.g)(this,_y).id||((0,r.g)(this,_y).id=wy()),(0,r.g)(this,xy).deviceId||((0,r.g)(this,xy).deviceId=wy())}static getInstance(){return(0,r.g)(this,yy)||(0,r.i)(this,yy,new t),(0,r.g)(this,yy)}static ___clearInstance(){(0,r.i)(this,yy,void 0)}saveSessionData(t,e){(0,r.g)(this,_y)[t]=e;try{return sessionStorage.setItem(Ey,JSON.stringify((0,r.g)(this,_y))),!0}catch{return!1}}loadSessionData(t){let e=(0,r.g)(this,_y)[t];if(null!=e)return e}saveLocalData(t,e){(0,r.g)(this,xy)[t]=e;try{return localStorage.setItem(My,JSON.stringify((0,r.g)(this,xy))),!0}catch{return!1}}loadLocalData(t){let e=(0,r.g)(this,xy)[t];if(null!=e)return e}};yy=new WeakMap,_y=new WeakMap,xy=new WeakMap,(0,r.a)(Sy,"SafeStorage"),(0,r.h)(Sy,yy,void 0);var Ty=Sy,Cy=(0,r.e)(o());function Ay(t){t&&(t.map&&(t.map.dispose(),t.map=void 0),t.dispose())}function Py(){return Ty.getInstance().loadLocalData("deviceId")}function Iy(){return Ty.getInstance().loadSessionData("id")}function Ly(t){return"string"==typeof t?t:t.id}function Oy(t,e){return null==e?t:"string"==typeof t?e.find(function(e){return e.id==t}):t}function Ny(t,e){for(let i=0;i<e.length;i++)t.push(e[i])}function qy(t){if(t.scale||t.x_scale)return 1/(t.scale||t.x_scale);let e;try{let n=t.georeference[0],r=t.georeference[2],o=new py(n.target.x,n.target.y),a=new py(r.target.x,r.target.y),s=o.distanceTo(a),l=n.control.x-r.control.x,h=n.control.y-r.control.y;e=Math.sqrt(l*l+h*h)/s}catch(i){e=1,vy.warn(i),vy.warn("Couldn't georeference "+(t.name||t.shortName||t.id)+". Probably not enough geocoordinates.")}return e}function Ry(t){let e;try{let n=t.georeference[0],r=t.georeference[2],o=new py(n.target.x,n.target.y),a=new py(r.target.x,r.target.y);e=-((o.finalBearingTo(a)+0)*Math.PI/180-Math.atan2(r.control.y-n.control.y,r.control.x-n.control.x)-Math.PI/2)}catch(i){e=0,vy.warn(i),vy.warn("Couldn't georeference "+(t.name||t.shortName||t.id)+". Probably not enough geocoordinates.")}return e}function Dy(t,e,i){let n,o,a,s=null,l=0;i||(i={});let h=(0,r.a)(function(){l=!1===i.leading?0:Date.now(),s=null,a=t.apply(n,o),s||(n=o=null)},"later");return function(){let r=Date.now();!l&&!1===i.leading&&(l=r);let u=e-(r-l);return n=this,o=arguments,u<=0||u>e?(s&&(clearTimeout(s),s=null),l=r,a=t.apply(n,o),s||(n=o=null)):!s&&!1!==i.trailing&&(s=setTimeout(h,u)),a}}function ky(t,e,i){let n,o=0;return function(){let a=this,s=arguments;1===++o&&!0===i&&t.apply(a,s);let l=(0,r.a)(function(){(!i||o>1)&&t.apply(a,s),n=null,o=0},"later");clearTimeout(n),n=setTimeout(l,e)}}function By(t){return t.reduce((t,e)=>t.includes(e)?t:[...t,e],[])}function Fy(t,e,i){let n=t*(Math.PI/180)/2,r=e/2;return i*Math.tan(n)/r}function Uy(t,e,i){let n=[t],r=(e.x-t.x)/i,o=(e.y-t.y)/i,a=(e.z-t.z)/i;for(let s=1;s<i;s++){let e=t.clone(),i=new ho(s*r,s*o,s*a);e.add(i),n.push(e)}return n.push(e),n}(0,r.a)(Ay,"scrubMaterial"),(0,r.a)(Py,"getDeviceID"),(0,r.a)(Iy,"getSessionID"),(0,r.a)(Ly,"getObjectId"),(0,r.a)(Oy,"getObject"),(0,r.a)(Ny,"appendItems"),(0,r.a)(qy,"getMapScale"),(0,r.a)(Ry,"getNorth"),(0,r.a)(Dy,"throttle"),(0,r.a)(ky,"debounce"),(0,r.a)(By,"uniq"),(0,r.a)(Fy,"getProjectionScaleFactor"),(0,r.a)(Uy,"splitLine");var zy=(0,r.a)((t,e)=>{if("string"==typeof t){if(null==e||!Array.isArray(e.polygons))return null;t=e.polygons.find(function(e){return e.id==t})}let i=null;if(null!=t&&null!=t.locations&&t.locations.length>0){i=t.locations[0];for(let e=0,n=t.locations.length;e<n;e++){let n=t.locations[e];for(;null!=n.parent;)(n=n.parent).polygons.includes(t)&&(i=n);if(null==n.parent&&n.polygons.includes(t))return n}}return i},"getPrimaryLocationForPolygon"),Vy=(0,r.a)((t,e)=>{let i,n=t.venue.defaultMap;if(e&&e.firstMap){let t=Ly(e.firstMap);null==t?vy.warn("Invalid map id provided to 'firstMap' option. Ignoring."):n=t}if(n)for(let r=0,o=t.maps.length;r<o;++r)if(t.maps[r].id===n){i=t.maps[r];break}if(!i){let e=t.maps[0];for(let i of t.maps.slice(1))e=Math.abs(i.elevation)===Math.abs(e.elevation)?i.elevation>e.elevation?i:e:Math.abs(i.elevation)<Math.abs(e.elevation)?i:e;i=e}return i},"determineStartingMap");function jy(t,e=0){let i=3735928559^e,n=1103547991^e;for(let r,o=0;o<t.length;o++)r=t.charCodeAt(o),i=Math.imul(i^r,2654435761),n=Math.imul(n^r,1597334677);return i=Math.imul(i^i>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),4294967296*(2097151&(n=Math.imul(n^n>>>16,2246822507)^Math.imul(i^i>>>13,3266489909)))+(i>>>0)}function Gy(t,e){let i=t.getCenter(new ho),n=t.getSize(new ho),{x:r,y:o,z:a}=n,s=r*e,l=o*e,h=a*e,u=i.x-s/2,c=i.x+s/2,p=i.y-l/2,d=i.y+l/2,f=i.z-h/2,g=i.z+h/2;return new fo({x:u,y:p,z:f},{x:c,y:d,z:g})}function Hy({from:t,to:e,duration:i=300,easing:n=Cy.default.Easing.Quadratic.Out,delay:o=0,onUpdate:a=(0,r.a)(t=>{},"onUpdate"),onStart:s=(0,r.a)(()=>{},"onStart"),onComplete:l=(0,r.a)(()=>{},"onComplete")}){let h=new Cy.default.Tween(t).to(e,i).easing(n).delay(o).onStart(s).onUpdate(t=>{a(t)});return{start:t=>new Promise(e=>{h.onComplete(()=>{l(),e()}).start(),t.tryRendering()})}}(0,r.a)(jy,"cyrb53"),(0,r.a)(Gy,"addMarginMultiplierToBoundingBox"),(0,r.a)(Hy,"tweenPromise");var Wy=(0,r.a)(t=>t,"linearEase"),Xy=(0,r.a)(t=>t*t,"quadEaseIn");function Yy(t,e,i,n,r,o=Wy){return n+o(((t=Math.max(e,Math.min(t,i)))-Math.min(e,i))/Math.abs(i-e))*(r-n)}function Zy(t,e,i,n=Xy){if(e.length!==i.length)throw new Error("Input and output ranges must have the same number of values.");t=Math.max(e[0],Math.min(t,e[e.length-1]));let r=0;for(;r<e.length-1&&t>e[r+1];)r++;let o=n((t-e[r])/(e[r+1]-e[r]));return i[r]+o*(i[r+1]-i[r])}(0,r.a)(Yy,"interpolate"),(0,r.a)(Zy,"interpolateMulti");var Jy=(0,r.e)(u());(0,n.a)();var Ky=(0,r.e)(c());(0,n.a)(),(0,n.a)(),(0,n.a)();var Qy=(0,r.e)($());(0,n.a)();var $y=class{constructor({origin:t,destination:e,vortex:i,elevationDelta:n=0,distance:o=0,angle:a=0,pathWeight:s=0}){let l,h;if((0,r.f)(this,"origin"),(0,r.f)(this,"destination"),(0,r.f)(this,"vortex"),(0,r.f)(this,"distance"),(0,r.f)(this,"angle"),(0,r.f)(this,"weight"),this.origin=t,this.destination=e,this.vortex=i,this.distance=o,this.angle=a,i)this.distance=0,this.angle=0,l=void 0!==i.weight&&i.weight>0?i.weight:"elevator"===i.type?2e3:1e3,h=i.multiplier&&i.multiplier>=1?i.multiplier:1,this.weight=n*h+l;else{let t=s||e.weight;l=t&&t>=0?t:0,h=e.multiplier&&e.multiplier>=1?e.multiplier:1,this.weight=this.distance*h+l}if(isNaN(this.angle))throw new Error("nan angle")}};(0,r.a)($y,"Edge");var t_=$y,e_=t_;function i_(t){if(t.scale||t.x_scale)return 1/(t.scale||t.x_scale||1);try{if(!t.georeference)throw new Error("map ".concat(t.name||t.shortName||t.id," does not have a georeference field"));if(t.georeference.length<3)throw new Error("map ".concat(t.name||t.shortName||t.id," has less than 3 georeference points, we require at least 3 for proper map scaling"));let e=t.georeference[0],i=t.georeference[2],n=(0,Qy.getDistance)({latitude:e.target.x,longitude:e.target.y},{latitude:i.target.x,longitude:i.target.y}),r=e.control.x-i.control.x,o=e.control.y-i.control.y;return Math.sqrt(r*r+o*o)/n}catch(t){return vy.error(t),1}}function n_(t,e){let i=t.x-e.x,n=t.y-e.y;return(Math.atan2(n,i)+2.5*Math.PI)%(2*Math.PI)}(0,r.a)(i_,"getMapScale"),(0,r.a)(n_,"getAngle");var r_=class{constructor({nodes:t,vortexes:e,maps:i,showVortexNames:n=!1}){(0,r.f)(this,"edges"),(0,r.f)(this,"nodesById"),(0,r.f)(this,"mapsById"),this.edges={},this.mapsById=i.map(t=>({...t,_scale:i_(t)})).reduce((t,e)=>(t[e.id]=e,t),{});let o=t.filter(t=>!!this.mapsById[t.map]).map(t=>({...t,paths:t.paths?t.paths.filter(({map:e})=>e===t.map):[]}));this.nodesById=o.reduce((t,e)=>(t[e.id]=e,t),{});for(let r in this.nodesById)this.nodesById.hasOwnProperty(r)&&(this.nodesById[r].paths=this.nodesById[r].paths.filter(({node:t})=>!!this.nodesById[t]));let a=e.map(t=>({...t,name:n?t.name:t.type,nodes:t.nodes?t.nodes.filter(t=>!!this.nodesById[t]):[]}));o.forEach(t=>{this.edges[t.id]=t.paths.map(({node:e,weight:i})=>{let n=this.nodesById[e];return new e_({angle:n_(t,n),destination:n,distance:this.getDistance(t,n),origin:t,pathWeight:i})})}),a.forEach(t=>{if(null==t.nodes||0===t.nodes.length)return;let e=0;for(;e<t.nodes.length-1;){let i=this.nodesById[t.nodes[e]];if(e++,null==i)continue;let n=e;for(;n<t.nodes.length;){let e=this.nodesById[t.nodes[n]];if(n++,null==e)continue;let r=this.mapsById[i.map].elevation||0,o=this.mapsById[e.map].elevation||0,a=Math.abs(r-o);this.edges[i.id].push(new e_({destination:e,elevationDelta:a,origin:i,vortex:t})),this.edges[e.id].push(new e_({destination:i,elevationDelta:a,origin:e,vortex:t}))}}})}aStar({originIds:t,destinationNodeIds:e,accessible:i,includedVortexIds:n,excludedVortexIds:r}){let o=t.map(t=>this.nodesById[t]).filter(t=>t),a=e.map(t=>this.nodesById[t]).filter(t=>t);if(0===o.length||0===a.length)return[];let s=[],l={},h={};for(o.forEach(t=>{let e=this.getShortestEuclideanDistance(t,a);s.push({origin:t,priority:e}),l[t.id]=null,h[t.id]=0}),s.sort((t,e)=>t.priority-e.priority);s.length>0;){let t=s[0];if(a.includes(t.origin)){let e=[],i=l[t.origin.id];for(;null!=i;){e.push(i);let t=l[i.origin.id];i=null!=t?t:null}return e.reverse()}for(let e of this.edges[t.origin.id]){let o=e.vortex&&!1===e.vortex.accessible||!1===e.origin.accessible||!1===e.destination.accessible,u=e.vortex&&(n&&!n.has(e.vortex.id)||r&&r.has(e.vortex.id));if(i&&o||u)continue;let c=h[t.origin.id]+e.weight;if(null==h[e.destination.id]||c<h[e.destination.id]){h[e.destination.id]=c;let t=c+this.getShortestEuclideanDistance(e.destination,a);s.push({origin:e.destination,priority:t}),l[e.destination.id]=e}}s.splice(0,1),s.sort((t,e)=>t.priority-e.priority)}return[]}getDistance(t,e){let i,n=t.x-e.x,r=t.y-e.y,o=n*n+r*r;return i=null==this.mapsById[t.map]?1:this.mapsById[t.map]._scale,Math.sqrt(o)/i}getShortestEuclideanDistance(t,e){return e.reduce((e,i)=>{let n=this.getDistance(t,i);return Math.min(e,n)},Number.MAX_VALUE)}};(0,r.a)(r_,"NavigationGraph");var o_=r_,a_=o_;(0,n.a)(),(0,n.a)();var s_=exports.ACTION_TYPE=(t=>(t.DEPARTURE="Departure",t.TAKEVORTEX="TakeVortex",t.EXITVORTEX="ExitVortex",t.TURN="Turn",t.ARRIVAL="Arrival",t))(s_||{}),l_=exports.BEARING_TYPE=(t=>(t.STRAIGHT="Straight",t.RIGHT="Right",t.SLIGHTRIGHT="SlightRight",t.LEFT="Left",t.SLIGHTLEFT="SlightLeft",t))(l_||{});function h_(t){switch(t){case"down":case"up":return"".concat(t," ");default:return""}}(0,r.a)(h_,"vortexDirectionTest");var u_=class{constructor({origin:t,action:e,distance:i,atLocation:n,instruction:o}){(0,r.f)(this,"node"),(0,r.f)(this,"instruction"),(0,r.f)(this,"action"),(0,r.f)(this,"atLocation"),(0,r.f)(this,"type"),(0,r.f)(this,"distance",0),this.node=t,this.action=e,this.distance=i||0,this.atLocation=n,this.instruction="",o?this.instruction=o:(null!=e&&"Departure"===e.type?this.instruction=null!=n?"Depart from ".concat(n.name):"Depart from current location":null!=e&&"Arrival"===e.type?this.instruction=null!=n?"Arrive at ".concat(n.name):"Arrive at destination":null!=e&&"TakeVortex"===e.type?this.instruction="Take ".concat(n&&n.name," ").concat(h_(e.direction),"to ").concat(e.toMap.name):null!=e&&"ExitVortex"===e.type?this.instruction="Exit ".concat(n&&n.name," at ").concat(e.toMap.name):null!=e&&"bearing"in e&&"Right"===e.bearing?this.instruction="Turn right":null!=e&&"bearing"in e&&"SlightRight"===e.bearing?this.instruction="Turn slightly right":null!=e&&"bearing"in e&&"Straight"===e.bearing?this.instruction="Head straight":null!=e&&"bearing"in e&&"SlightLeft"===e.bearing?this.instruction="Turn slightly left":null!=e&&"bearing"in e&&"Left"===e.bearing&&(this.instruction="Turn left"),null!=e&&"Turn"===e.type&&n&&(this.instruction+=" at ".concat(n.name)))}};(0,r.a)(u_,"Directive");var c_=u_,p_=c_;function d_(t,e,i,n){if(!(t&&e&&i&&n))return null;let r=t.x,o=t.y,a=e.x,s=e.y,l=i.x,h=i.y,u=n.x,c=n.y;if(r===a&&o===s||l===u&&h===c)return null;let p=(c-h)*(a-r)-(u-l)*(s-o);if(0===p)return null;let d=((u-l)*(o-h)-(c-h)*(r-l))/p,f=((a-r)*(o-h)-(s-o)*(r-l))/p;return d<0||d>1||f<0||f>1?null:{x:r+d*(a-r),y:o+d*(s-o)}}function f_(t,e,i){if(t.x===e.x)return[{x:t.x+i,y:t.y},{x:e.x+i,y:e.y}];if(t.y===e.y)return[{x:t.x,y:t.y+i},{x:e.x,y:e.y+i}];let n=-1/((e.y-t.y)/(e.x-t.x)),r=i*Math.sqrt(1/(1+n*n)),o=n*r;return[{x:t.x+r,y:t.y+o},{x:e.x+r,y:e.y+o}]}function g_(t,e,i=[],n=0){let r=!0;return i.forEach(i=>{if(n>0){let o=f_(t,e,-n),a=f_(t,e,n);if(d_(o[0],o[1],i[0],i[1])||d_(a[0],a[1],i[0],i[1]))return void(r=!1)}else if(d_(t,e,i[0],i[1]))return void(r=!1)}),r}(0,n.a)(),(0,r.a)(d_,"getLineIntersection"),(0,r.a)(f_,"getOffsetLine"),(0,r.a)(g_,"hasLineOfSight");var m_=.1*Math.PI;function v_(t,e){return((e-t+Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI)-Math.PI}(0,r.a)(v_,"differenceBetweenAngles");var y_=class{constructor({locations:t,nodes:e,vortexes:i,maps:n,polygons:o,showVortexNames:a}){(0,r.f)(this,"graph"),(0,r.f)(this,"locationsByNodeId"),(0,r.f)(this,"geometryEdgesByMapId",new Map),this.graph=new a_({maps:n,nodes:e,showVortexNames:a,vortexes:i}),this.locationsByNodeId=t.reduce((t,e)=>(e.nodes&&e.nodes.forEach(i=>{t[i.node]=e}),e.polygons&&e.polygons.forEach(i=>{i.entrances&&i.entrances.forEach(i=>{t[i]=e})}),t),{}),o&&o.forEach(t=>{this.geometryEdgesByMapId.has(t.map)||this.geometryEdgesByMapId.set(t.map,[]),t.vertexes.forEach((e,i)=>{t.vertexes[i+1]?this.geometryEdgesByMapId.get(t.map).push([e,t.vertexes[i+1]]):this.geometryEdgesByMapId.get(t.map).push([e,t.vertexes[0]])})})}getClosestLocationInRay(t,e=.5*Math.PI,i=10){let n=0,r=0,o=t;for(;Math.abs(n)<e&&r<i;){let t=this.graph.edges[o.destination.id],a=null,s=0;for(let e of t)if(e.distance>0)if(null!=a){let t=-v_(o.angle,e.angle);Math.abs(t)<Math.abs(s)&&(a=e,s=t)}else a=e,s=-v_(o.angle,e.angle);if(null==a)return null;{if(Math.abs(s)>=e||(n+=s,r+=a.distance,Math.abs(n)>=e||r>i))return null;let t=this.locationsByNodeId[a.destination.id];if(null!=t)return t;o=a}}return null}getDirections({originIds:t,destinationNodeIds:e,accessible:i,departFrom:n,arriveAt:r,includedVortexIds:o,excludedVortexIds:a,simplify:s}){var l,h,u;let c=this.graph.aStar({originIds:t,destinationNodeIds:e,accessible:i,includedVortexIds:o,excludedVortexIds:a});if(0===c.length)return{distance:0,instructions:[new p_({distance:0,instruction:"No Valid Path Available"})],path:[]};let p=0,d=[],f=[];if(null!=s&&s.enabled){let t=null!=(l=null==s?void 0:s.bufferRadius)?l:1.8,e=[c[0]];for(let r=1;r<c.length;r++){if(c[r].origin.map!==c[r-1].origin.map){let i=null!=(h=this.geometryEdgesByMapId.get(c[r-1].origin.map))?h:[];f.push(...this.simplifySteps(e,i,t)),e=[c[r]]}e.push(c[r])}let i=c[c.length-1],n=null!=(u=this.geometryEdgesByMapId.get(i.origin.map))?u:[];f.push(...this.simplifySteps(e,n,t)),c=f}for(let w=0;w<c.length;w++)d.push(c[w].origin);d.push(c[c.length-1].destination);let g=[],m=null,v=null,y=0,_=0;for(let w=0;w<c.length;w++){let t=c[w],e=t.origin,i=t.destination;if(p+=t.distance,y+=(null==v?void 0:v.distance)||0,0===w&&g.push(new p_({action:{type:"Departure"},atLocation:n,distance:0,origin:e})),null!=t.vortex){let n=this.graph.mapsById[e.map],r=this.graph.mapsById[i.map],o="none";if(null!=n.elevation&&null!=r.elevation){let t=n.elevation-r.elevation;t>0?o="down":t<0&&(o="up")}g.push(new p_({action:{direction:o,fromMap:n,toMap:r,type:"TakeVortex"},atLocation:t.vortex,distance:y,origin:e})),_+=y,y=0}else if(null!=m&&null!=v)if(null!=v.vortex){let t=this.graph.mapsById[m.map],i=this.graph.mapsById[v.destination.map];g.push(new p_({action:{fromMap:t,toMap:i,type:"ExitVortex"},atLocation:v.vortex,distance:y,origin:e})),_+=y,y=0}else{let i=this.graph.edges[e.id].filter(e=>e.destination!==m&&e.destination!==t.destination);if(i.length>0){let n=-v_(v.angle,t.angle),r=i.reduce((e,i)=>{let n=-v_(t.angle,i.angle);return Math.min(e,Math.abs(n))},Math.PI);if(Math.abs(n)>=m_||Math.abs(r)<=m_){let t;t=n<=-Math.PI/4?"Right":n<=-m_?"SlightRight":n<=m_?"Straight":n<=Math.PI/4?"SlightLeft":"Left";let i=this.locationsByNodeId[e.id];if(i||(i=this.getClosestLocationInRay(v,.5*Math.PI,10)),null!=i){let n=new p_({action:{bearing:t,referencePosition:"At",type:"Turn"},atLocation:i,distance:y,origin:e});n.type=t,g.push(n)}else g.push(new p_({action:{bearing:t,referencePosition:"At",type:"Turn"},distance:y,origin:e}));_+=y,y=0}}}w===c.length-1&&(g.push(new p_({action:{type:"Arrival"},atLocation:r,distance:p-_<0?0:p-_,origin:t.destination})),_+=y,y=0),m=e,v=t}let x=[],b=null;for(let w=g.length-1;w>=0;w--){let t=g[w],{action:e}=t;e&&"TakeVortex"===e.type?(b=t.node,x.unshift(t)):e&&"Turn"===e.type&&null!=b?this.graph.getDistance(t.node,b)>5&&x.unshift(t):x.unshift(t)}return{distance:p,instructions:x,path:d}}simplifySteps(t,e,i){if(t.length<3)return t;let n=[t[0]],r=1;for(let o=r+2;o<t.length;o++)if(!g_(t[r].origin,t[o].origin,e,i)){let e=o-1;n.push(new e_({...t[r],destination:t[e].origin,distance:this.graph.getDistance(t[r].origin,t[e].origin),angle:n_(t[r].origin,t[e].origin)})),r=e}return n.push(new e_({...t[r],destination:t[t.length-1].origin,distance:this.graph.getDistance(t[r].origin,t[t.length-1].origin),angle:n_(t[r].origin,t[t.length-1].origin)}),t[t.length-1]),n}};(0,r.a)(y_,"Navigator");var __=y_,x_=__;(0,n.a)(),(0,n.a)();var b_,w_,E_,M_,S_,T_=class{constructor(t){(0,r.h)(this,w_),(0,r.h)(this,M_),(0,r.h)(this,b_,void 0),(0,r.i)(this,b_,t)}directionsTo(t,e){let i=(0,r.g)(this,b_).analytics;return t instanceof FT?0===t.destinations.length?[]:(i.getDirections(this,t.destinations[t.destinations.length-1]),(0,r.k)(this,M_,S_).call(this,t,e)):(i.getDirections(this,t),(0,r.k)(this,w_,E_).call(this,t,e))}distanceTo(t,e){let i=(0,r.k)(this,w_,E_).call(this,t,e);return(null==i?void 0:i.distance)||0}};b_=new WeakMap,w_=new WeakSet,E_=(0,r.a)(function(t,e){let i=HC(this),n=HC(t),o=(0,r.g)(this,b_).navigator.getDirections({originIds:i,destinationNodeIds:n,accessible:(null==e?void 0:e.accessible)||!1,includedVortexIds:null!=e&&e.includedVortexIds?new Set(e.includedVortexIds):void 0,excludedVortexIds:null!=e&&e.excludedVortexIds?new Set(e.excludedVortexIds):void 0,simplify:null==e?void 0:e.simplify});return new kT((0,r.g)(this,b_),o)},"#directionsToSingleDestination"),M_=new WeakSet,S_=(0,r.a)(function(t,e){let i,n=[],o=HC(this);for(let a=0;a<t.destinations.length;a++){i=HC(t.destinations[a]);let s=(0,r.g)(this,b_).navigator.getDirections({originIds:o,destinationNodeIds:i,includedVortexIds:null!=e&&e.includedVortexIds?new Set(e.includedVortexIds):void 0,excludedVortexIds:null!=e&&e.excludedVortexIds?new Set(e.excludedVortexIds):void 0,accessible:(null==e?void 0:e.accessible)||!1,simplify:null==e?void 0:e.simplify}),l=new kT((0,r.g)(this,b_),s);n.push(l),o=0===l.path.length?i:[l.path[l.path.length-1].id]}return n},"#directionsToDestinationSet"),(0,r.a)(T_,"MappedinNavigatable");var C_=exports.MappedinNavigatable=T_;(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)();var A_=(0,r.a)(function(t,e){return(A_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},"extendStatics");function P_(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}A_(t,e),(0,r.a)(i,"__"),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(0,r.a)(P_,"__extends");var I_=(0,r.a)(function(){return(I_=Object.assign||(0,r.a)(function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},"__assign")).apply(this,arguments)},"__assign");function L_(t,e,i,n){function o(t){return t instanceof i?t:new i(function(e){e(t)})}return(0,r.a)(o,"adopt"),new(i||(i=Promise))(function(i,a){function s(t){try{h(n.next(t))}catch(t){a(t)}}function l(t){try{h(n.throw(t))}catch(t){a(t)}}function h(t){t.done?i(t.value):o(t.value).then(s,l)}(0,r.a)(s,"fulfilled"),(0,r.a)(l,"rejected"),(0,r.a)(h,"step"),h((n=n.apply(t,e||[])).next())})}function O_(t,e){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(r=2&s[0]?n.return:s[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,s[1])).done)return r;switch(n=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}function N_(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function q_(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,o=i.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return a}(0,r.a)(L_,"__awaiter"),(0,r.a)(O_,"__generator"),(0,r.a)(N_,"__values"),(0,r.a)(q_,"__read"),(0,n.a)(),(0,n.a)(),(0,n.a)();var R_,D_,k_,B_,F_,U_,z_,V_,j_=(0,r.a)(function(){return(j_=Object.assign||(0,r.a)(function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},"__assign")).apply(this,arguments)},"__assign");function G_(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]])}return i}function H_(t,e,i,n){function o(t){return t instanceof i?t:new i(function(e){e(t)})}return(0,r.a)(o,"adopt"),new(i||(i=Promise))(function(i,a){function s(t){try{h(n.next(t))}catch(t){a(t)}}function l(t){try{h(n.throw(t))}catch(t){a(t)}}function h(t){t.done?i(t.value):o(t.value).then(s,l)}(0,r.a)(s,"fulfilled"),(0,r.a)(l,"rejected"),(0,r.a)(h,"step"),h((n=n.apply(t,e||[])).next())})}function W_(t,e){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(r=2&s[0]?n.return:s[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,s[1])).done)return r;switch(n=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}function X_(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Y_(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,o=i.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return a}function Z_(t,e,i){if(i||2===arguments.length)for(var n,r=0,o=e.length;r<o;r++)(n||!(r in e))&&(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))}(0,r.a)(G_,"__rest"),(0,r.a)(H_,"__awaiter"),(0,r.a)(W_,"__generator"),(0,r.a)(X_,"__values"),(0,r.a)(Y_,"__read"),(0,r.a)(Z_,"__spreadArray"),(0,n.a)(),(0,n.a)(),(0,n.a)(),function(t){t.US="US",t.EU="EU"}(R_||(R_={})),(0,n.a)(),function(t){t.SET="$set",t.SET_ONCE="$setOnce",t.ADD="$add",t.APPEND="$append",t.PREPEND="$prepend",t.REMOVE="$remove",t.PREINSERT="$preInsert",t.POSTINSERT="$postInsert",t.UNSET="$unset",t.CLEAR_ALL="$clearAll"}(D_||(D_={})),function(t){t.REVENUE_PRODUCT_ID="$productId",t.REVENUE_QUANTITY="$quantity",t.REVENUE_PRICE="$price",t.REVENUE_TYPE="$revenueType",t.REVENUE="$revenue"}(k_||(k_={})),function(t){t.IDENTIFY="$identify",t.GROUP_IDENTIFY="$groupidentify",t.REVENUE="revenue_amount"}(B_||(B_={})),(0,n.a)(),function(t){t[t.None=0]="None",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Verbose=3]="Verbose",t[t.Debug=4]="Debug"}(F_||(F_={})),(0,n.a)(),function(t){t.BEFORE="before",t.ENRICHMENT="enrichment",t.DESTINATION="destination"}(U_||(U_={})),(0,n.a)(),function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.PayloadTooLarge="payload_too_large",t.Invalid="invalid",t.Failed="failed",t.Timeout="Timeout",t.SystemError="SystemError"}(z_||(z_={})),(0,n.a)(),function(t){t.XHR="xhr",t.SendBeacon="beacon",t.Fetch="fetch"}(V_||(V_={})),(0,n.a)(),(0,n.a)();var J_="-",K_="AMP",Q_="".concat(K_,"_unsent"),$_="https://api2.amplitude.com/2/httpapi",tx="https://api.eu.amplitude.com/2/httpapi",ex="https://api2.amplitude.com/batch",ix="https://api.eu.amplitude.com/batch";(0,n.a)();var nx=1e3,rx=(0,r.a)(function(t){if(Object.keys(t).length>nx)return!1;for(var e in t){var i=t[e];if(!ox(e,i))return!1}return!0},"isValidObject"),ox=(0,r.a)(function(t,e){var i,n;if("string"!=typeof t)return!1;if(Array.isArray(e)){var r=!0;try{for(var o=X_(e),a=o.next();!a.done;a=o.next()){var s=a.value;if(Array.isArray(s))return!1;if("object"==typeof s)r=r&&rx(s);else if(!["number","string"].includes(typeof s))return!1;if(!r)return!1}}catch(t){i={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}}else{if(null==e)return!1;if("object"==typeof e)return rx(e);if(!["number","string","boolean"].includes(typeof e))return!1}return!0},"isValidProperties"),ax=function(){function t(){this._propertySet=new Set,this._properties={}}return(0,r.a)(t,"Identify"),t.prototype.getUserProperties=function(){return j_({},this._properties)},t.prototype.set=function(t,e){return this._safeSet(D_.SET,t,e),this},t.prototype.setOnce=function(t,e){return this._safeSet(D_.SET_ONCE,t,e),this},t.prototype.append=function(t,e){return this._safeSet(D_.APPEND,t,e),this},t.prototype.prepend=function(t,e){return this._safeSet(D_.PREPEND,t,e),this},t.prototype.postInsert=function(t,e){return this._safeSet(D_.POSTINSERT,t,e),this},t.prototype.preInsert=function(t,e){return this._safeSet(D_.PREINSERT,t,e),this},t.prototype.remove=function(t,e){return this._safeSet(D_.REMOVE,t,e),this},t.prototype.add=function(t,e){return this._safeSet(D_.ADD,t,e),this},t.prototype.unset=function(t){return this._safeSet(D_.UNSET,t,J_),this},t.prototype.clearAll=function(){return this._properties={},this._properties[D_.CLEAR_ALL]=J_,this},t.prototype._safeSet=function(t,e,i){if(this._validate(t,e,i)){var n=this._properties[t];return void 0===n&&(n={},this._properties[t]=n),n[e]=i,this._propertySet.add(e),!0}return!1},t.prototype._validate=function(t,e,i){return void 0===this._properties[D_.CLEAR_ALL]&&!this._propertySet.has(e)&&(t===D_.ADD?"number"==typeof i:t===D_.UNSET||t===D_.REMOVE||ox(e,i))},t}(),sx=(0,r.a)(function(t,e,i){return j_(j_(j_({},"string"==typeof t?{event_type:t}:t),i),e&&{event_properties:e})},"createTrackEvent"),lx=(0,r.a)(function(t,e){return j_(j_({},e),{event_type:B_.IDENTIFY,user_properties:t.getUserProperties()})},"createIdentifyEvent"),hx=(0,r.a)(function(t,e,i,n){var r;return j_(j_({},n),{event_type:B_.GROUP_IDENTIFY,group_properties:i.getUserProperties(),groups:(r={},r[t]=e,r)})},"createGroupIdentifyEvent"),ux=(0,r.a)(function(t,e,i){var n,r=new ax;return r.set(t,e),j_(j_({},i),{event_type:B_.IDENTIFY,user_properties:r.getUserProperties(),groups:(n={},n[t]=e,n)})},"createGroupEvent"),cx=(0,r.a)(function(t,e){return j_(j_({},e),{event_type:B_.REVENUE,event_properties:t.getEventProperties()})},"createRevenueEvent");(0,n.a)(),(0,n.a)();var px=(0,r.a)(function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=z_.Unknown),{event:t,code:e,message:i}},"buildResult"),dx=function(){function t(){this.queue=[],this.applying=!1,this.plugins=[]}return(0,r.a)(t,"Timeline"),t.prototype.register=function(t,e){return H_(this,void 0,void 0,function(){return W_(this,function(i){switch(i.label){case 0:return[4,t.setup(e)];case 1:return i.sent(),this.plugins.push(t),[2]}})})},t.prototype.deregister=function(t){return this.plugins.splice(this.plugins.findIndex(function(e){return e.name===t}),1),Promise.resolve()},t.prototype.reset=function(){this.applying=!1,this.plugins=[]},t.prototype.push=function(t){var e=this;return new Promise(function(i){e.queue.push([t,i]),e.scheduleApply(0)})},t.prototype.scheduleApply=function(t){var e=this;this.applying||(this.applying=!0,setTimeout(function(){e.apply(e.queue.shift()).then(function(){e.applying=!1,e.queue.length>0&&e.scheduleApply(0)})},t))},t.prototype.apply=function(t){return H_(this,void 0,void 0,function(){var e,i,n,r,o,a,s,l,h,u,c,p,d,f,g,m,v,y;return W_(this,function(_){switch(_.label){case 0:if(!t)return[2];e=Y_(t,1),i=e[0],n=Y_(t,2),r=n[1],o=this.plugins.filter(function(t){return t.type===U_.BEFORE}),_.label=1;case 1:_.trys.push([1,6,7,8]),a=X_(o),s=a.next(),_.label=2;case 2:return s.done?[3,5]:[4,s.value.execute(j_({},i))];case 3:i=_.sent(),_.label=4;case 4:return s=a.next(),[3,2];case 5:return[3,8];case 6:return l=_.sent(),g={error:l},[3,8];case 7:try{s&&!s.done&&(m=a.return)&&m.call(a)}finally{if(g)throw g.error}return[7];case 8:h=this.plugins.filter(function(t){return t.type===U_.ENRICHMENT}),_.label=9;case 9:_.trys.push([9,14,15,16]),u=X_(h),c=u.next(),_.label=10;case 10:return c.done?[3,13]:[4,c.value.execute(j_({},i))];case 11:i=_.sent(),_.label=12;case 12:return c=u.next(),[3,10];case 13:return[3,16];case 14:return p=_.sent(),v={error:p},[3,16];case 15:try{c&&!c.done&&(y=u.return)&&y.call(u)}finally{if(v)throw v.error}return[7];case 16:return d=this.plugins.filter(function(t){return t.type===U_.DESTINATION}),f=d.map(function(t){var e=j_({},i);return t.execute(e).catch(function(t){return px(e,0,String(t))})}),Promise.all(f).then(function(t){var e=Y_(t,1)[0];r(e)}),[2]}})})},t.prototype.flush=function(){return H_(this,void 0,void 0,function(){var t,e,i,n=this;return W_(this,function(r){switch(r.label){case 0:return t=this.queue,this.queue=[],[4,Promise.all(t.map(function(t){return n.apply(t)}))];case 1:return r.sent(),e=this.plugins.filter(function(t){return t.type===U_.DESTINATION}),i=e.map(function(t){return t.flush&&t.flush()}),[4,Promise.all(i)];case 2:return r.sent(),[2]}})})},t}();(0,n.a)();var fx="Event tracked successfully",gx="Unexpected error occurred",mx="Event rejected due to exceeded retry count",vx="Event skipped due to optOut config",yx="Event rejected due to missing API key",_x="Invalid API key",xx="Client not initialized",bx=function(){function t(t){void 0===t&&(t="$default"),this.initializing=!1,this.q=[],this.dispatchQ=[],this.logEvent=this.track.bind(this),this.timeline=new dx,this.name=t}return(0,r.a)(t,"AmplitudeCore"),t.prototype._init=function(t){return H_(this,void 0,void 0,function(){return W_(this,function(e){switch(e.label){case 0:return this.config=t,this.timeline.reset(),[4,this.runQueuedFunctions("q")];case 1:return e.sent(),[2]}})})},t.prototype.runQueuedFunctions=function(t){return H_(this,void 0,void 0,function(){var e,i,n,r,o,a;return W_(this,function(s){switch(s.label){case 0:e=this[t],this[t]=[],s.label=1;case 1:s.trys.push([1,6,7,8]),i=X_(e),n=i.next(),s.label=2;case 2:return n.done?[3,5]:[4,(0,n.value)()];case 3:s.sent(),s.label=4;case 4:return n=i.next(),[3,2];case 5:return[3,8];case 6:return r=s.sent(),o={error:r},[3,8];case 7:try{n&&!n.done&&(a=i.return)&&a.call(i)}finally{if(o)throw o.error}return[7];case 8:return[2]}})})},t.prototype.track=function(t,e,i){var n=sx(t,e,i);return this.dispatch(n)},t.prototype.identify=function(t,e){var i=lx(t,e);return this.dispatch(i)},t.prototype.groupIdentify=function(t,e,i,n){var r=hx(t,e,i,n);return this.dispatch(r)},t.prototype.setGroup=function(t,e,i){var n=ux(t,e,i);return this.dispatch(n)},t.prototype.revenue=function(t,e){var i=cx(t,e);return this.dispatch(i)},t.prototype.add=function(t){return H_(this,void 0,void 0,function(){return W_(this,function(e){return this.config?[2,this.timeline.register(t,this.config)]:(this.q.push(this.add.bind(this,t)),[2])})})},t.prototype.remove=function(t){return H_(this,void 0,void 0,function(){return W_(this,function(e){return this.config?[2,this.timeline.deregister(t)]:(this.q.push(this.remove.bind(this,t)),[2])})})},t.prototype.dispatchWithCallback=function(t,e){if(!this.config)return e(px(t,0,xx));this.process(t).then(e)},t.prototype.dispatch=function(t){return H_(this,void 0,void 0,function(){var e=this;return W_(this,function(i){return this.config?[2,this.process(t)]:[2,new Promise(function(i){e.dispatchQ.push(e.dispatchWithCallback.bind(e,t,i))})]})})},t.prototype.process=function(t){return H_(this,void 0,void 0,function(){var e,i,n;return W_(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),this.config.optOut?[2,px(t,0,vx)]:[4,this.timeline.push(t)];case 1:return 200===(n=r.sent()).code?this.config.loggerProvider.log(n.message):this.config.loggerProvider.error(n.message),[2,n];case 2:return e=r.sent(),i=String(e),this.config.loggerProvider.error(i),[2,n=px(t,0,i)];case 3:return[2]}})})},t.prototype.setOptOut=function(t){this.config?this.config.optOut=!!t:this.q.push(this.setOptOut.bind(this,!!t))},t.prototype.flush=function(){return this.timeline.flush()},t}();(0,n.a)();var wx=function(){function t(){this.productId="",this.quantity=1,this.price=0}return(0,r.a)(t,"Revenue"),t.prototype.setProductId=function(t){return this.productId=t,this},t.prototype.setQuantity=function(t){return t>0&&(this.quantity=t),this},t.prototype.setPrice=function(t){return this.price=t,this},t.prototype.setRevenueType=function(t){return this.revenueType=t,this},t.prototype.setRevenue=function(t){return this.revenue=t,this},t.prototype.setEventProperties=function(t){return rx(t)&&(this.properties=t),this},t.prototype.getEventProperties=function(){var t=this.properties?j_({},this.properties):{};return t[k_.REVENUE_PRODUCT_ID]=this.productId,t[k_.REVENUE_QUANTITY]=this.quantity,t[k_.REVENUE_PRICE]=this.price,t[k_.REVENUE_TYPE]=this.revenueType,t[k_.REVENUE]=this.revenue,t},t}();(0,n.a)(),(0,n.a)();var Ex=(0,r.a)(function(t,e){var i=Math.max(e,1);return t.reduce(function(t,e,n){var r=Math.floor(n/i);return t[r]||(t[r]=[]),t[r].push(e),t},[])},"chunk");(0,n.a)(),(0,n.a)();var Mx="Amplitude Logger ",Sx=function(){function t(){this.logLevel=F_.None}return(0,r.a)(t,"Logger"),t.prototype.disable=function(){this.logLevel=F_.None},t.prototype.enable=function(t){void 0===t&&(t=F_.Warn),this.logLevel=t},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.logLevel<F_.Verbose||console.log("".concat(Mx,"[Log]: ").concat(t.join(" ")))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.logLevel<F_.Warn||console.warn("".concat(Mx,"[Warn]: ").concat(t.join(" ")))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.logLevel<F_.Error||console.error("".concat(Mx,"[Error]: ").concat(t.join(" ")))},t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.logLevel<F_.Debug||console.log("".concat(Mx,"[Debug]: ").concat(t.join(" ")))},t}(),Tx=(0,r.a)(function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,logLevel:F_.Warn,loggerProvider:new Sx,optOut:!1,serverUrl:$_,serverZone:R_.US,useBatch:!1}},"getDefaultConfig"),Cx=function(){function t(t){var e,i,n;this._optOut=!1;var r=Tx();this.apiKey=t.apiKey,this.flushIntervalMillis=t.flushIntervalMillis||r.flushIntervalMillis,this.flushMaxRetries=t.flushMaxRetries||r.flushMaxRetries,this.flushQueueSize=t.flushQueueSize||r.flushQueueSize,this.loggerProvider=t.loggerProvider||r.loggerProvider,this.logLevel=null!==(e=t.logLevel)&&void 0!==e?e:r.logLevel,this.minIdLength=t.minIdLength,this.plan=t.plan,this.ingestionMetadata=t.ingestionMetadata,this.optOut=null!==(i=t.optOut)&&void 0!==i?i:r.optOut,this.serverUrl=t.serverUrl,this.serverZone=t.serverZone||r.serverZone,this.storageProvider=t.storageProvider,this.transportProvider=t.transportProvider,this.useBatch=null!==(n=t.useBatch)&&void 0!==n?n:r.useBatch,this.loggerProvider.enable(this.logLevel);var o=Px(t.serverUrl,t.serverZone,t.useBatch);this.serverZone=o.serverZone,this.serverUrl=o.serverUrl}return(0,r.a)(t,"Config"),Object.defineProperty(t.prototype,"optOut",{get:function(){return this._optOut},set:function(t){this._optOut=t},enumerable:!1,configurable:!0}),t}(),Ax=(0,r.a)(function(t,e){return t===R_.EU?e?ix:tx:e?ex:$_},"getServerUrl"),Px=(0,r.a)(function(t,e,i){if(void 0===t&&(t=""),void 0===e&&(e=Tx().serverZone),void 0===i&&(i=Tx().useBatch),t)return{serverUrl:t,serverZone:void 0};var n=[R_.US,R_.EU].includes(e)?e:Tx().serverZone;return{serverZone:n,serverUrl:Ax(n,i)}},"createServerConfig"),Ix=function(){function t(){this.name="amplitude",this.type=U_.DESTINATION,this.retryTimeout=1e3,this.throttleTimeout=3e4,this.storageKey="",this.scheduled=null,this.queue=[]}return(0,r.a)(t,"Destination"),t.prototype.setup=function(t){var e;return H_(this,void 0,void 0,function(){var i,n=this;return W_(this,function(r){switch(r.label){case 0:return this.config=t,this.storageKey="".concat(Q_,"_").concat(this.config.apiKey.substring(0,10)),[4,null===(e=this.config.storageProvider)||void 0===e?void 0:e.get(this.storageKey)];case 1:return i=r.sent(),this.saveEvents(),i&&i.length>0&&Promise.all(i.map(function(t){return n.execute(t)})).catch(),[2,Promise.resolve(void 0)]}})})},t.prototype.execute=function(t){var e=this;return new Promise(function(i){var n={event:t,attempts:0,callback:function(t){return i(t)},timeout:0};e.addToQueue(n)})},t.prototype.addToQueue=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e.filter(function(e){return e.attempts<t.config.flushMaxRetries?(e.attempts+=1,!0):(t.fulfillRequest([e],500,mx),!1)}).forEach(function(e){t.queue=t.queue.concat(e),0!==e.timeout?setTimeout(function(){e.timeout=0,t.schedule(0)},e.timeout):t.schedule(t.config.flushIntervalMillis)}),this.saveEvents()},t.prototype.schedule=function(t){var e=this;this.scheduled||(this.scheduled=setTimeout(function(){e.flush(!0).then(function(){e.queue.length>0&&e.schedule(t)})},t))},t.prototype.flush=function(t){return void 0===t&&(t=!1),H_(this,void 0,void 0,function(){var e,i,n,r=this;return W_(this,function(o){switch(o.label){case 0:return e=[],i=[],this.queue.forEach(function(t){return 0===t.timeout?e.push(t):i.push(t)}),this.queue=i,this.scheduled&&(clearTimeout(this.scheduled),this.scheduled=null),n=Ex(e,this.config.flushQueueSize),[4,Promise.all(n.map(function(e){return r.send(e,t)}))];case 1:return o.sent(),[2]}})})},t.prototype.send=function(t,e){return void 0===e&&(e=!0),H_(this,void 0,void 0,function(){var i,n,r,o,a;return W_(this,function(s){switch(s.label){case 0:if(!this.config.apiKey)return[2,this.fulfillRequest(t,400,yx)];i={api_key:this.config.apiKey,events:t.map(function(t){var e=t.event;return e.extra,G_(e,["extra"])}),options:{min_id_length:this.config.minIdLength}},s.label=1;case 1:return s.trys.push([1,3,,4]),n=Px(this.config.serverUrl,this.config.serverZone,this.config.useBatch).serverUrl,[4,this.config.transportProvider.send(n,i)];case 2:if(null===(r=s.sent()))return this.fulfillRequest(t,0,gx),[2];if(!e){if("body"in r){o="";try{o=JSON.stringify(r.body,null,2)}catch{}this.fulfillRequest(t,r.statusCode,"".concat(r.status,": ").concat(o))}else this.fulfillRequest(t,r.statusCode,r.status);return[2]}return this.handleReponse(r,t),[3,4];case 3:return a=s.sent(),this.fulfillRequest(t,0,String(a)),[3,4];case 4:return[2]}})})},t.prototype.handleReponse=function(t,e){switch(t.status){case z_.Success:this.handleSuccessResponse(t,e);break;case z_.Invalid:this.handleInvalidResponse(t,e);break;case z_.PayloadTooLarge:this.handlePayloadTooLargeResponse(t,e);break;case z_.RateLimit:this.handleRateLimitResponse(t,e);break;default:this.handleOtherReponse(e)}},t.prototype.handleSuccessResponse=function(t,e){this.fulfillRequest(e,t.statusCode,fx)},t.prototype.handleInvalidResponse=function(t,e){var i=this;if(t.body.missingField||t.body.error.startsWith(_x))this.fulfillRequest(e,t.statusCode,t.body.error);else{var n=Z_(Z_(Z_(Z_([],Y_(Object.values(t.body.eventsWithInvalidFields)),!1),Y_(Object.values(t.body.eventsWithMissingFields)),!1),Y_(Object.values(t.body.eventsWithInvalidIdLengths)),!1),Y_(t.body.silencedEvents),!1).flat(),r=new Set(n),o=e.filter(function(e,n){if(!r.has(n))return!0;i.fulfillRequest([e],t.statusCode,t.body.error)});this.addToQueue.apply(this,Z_([],Y_(o),!1))}},t.prototype.handlePayloadTooLargeResponse=function(t,e){1!==e.length?(this.config.flushQueueSize/=2,this.addToQueue.apply(this,Z_([],Y_(e),!1))):this.fulfillRequest(e,t.statusCode,t.body.error)},t.prototype.handleRateLimitResponse=function(t,e){var i=this,n=Object.keys(t.body.exceededDailyQuotaUsers),r=Object.keys(t.body.exceededDailyQuotaDevices),o=t.body.throttledEvents,a=new Set(n),s=new Set(r),l=new Set(o),h=e.filter(function(e,n){if(!(e.event.user_id&&a.has(e.event.user_id)||e.event.device_id&&s.has(e.event.device_id)))return l.has(n)&&(e.timeout=i.throttleTimeout),!0;i.fulfillRequest([e],t.statusCode,t.body.error)});this.addToQueue.apply(this,Z_([],Y_(h),!1))},t.prototype.handleOtherReponse=function(t){var e=this;this.addToQueue.apply(this,Z_([],Y_(t.map(function(t){return t.timeout=t.attempts*e.retryTimeout,t})),!1))},t.prototype.fulfillRequest=function(t,e,i){this.saveEvents(),t.forEach(function(t){return t.callback(px(t.event,e,i))})},t.prototype.saveEvents=function(){if(this.config.storageProvider){var t=Array.from(this.queue.map(function(t){return t.event}));this.config.storageProvider.set(this.storageKey,t)}},t}();(0,n.a)();var Lx=(0,r.a)(function(t){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return{promise:t.apply(void 0,Z_([],Y_(e),!1))}}},"returnWrapper");(0,n.a)();var Ox=(0,r.a)(function(t){return void 0===t&&(t=0),((new Error).stack||"").split("\n").slice(2+t).map(function(t){return t.trim()})},"getStacktrace"),Nx=(0,r.a)(function(t){return function(){var e=j_({},t.config);return{logger:e.loggerProvider,logLevel:e.logLevel}}},"getClientLogConfig"),qx=(0,r.a)(function(t,e){var i,n;e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"");try{for(var r=X_(e.split(".")),o=r.next();!o.done;o=r.next()){var a=o.value;if(!(a in t))return;t=t[a]}}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return t},"getValueByStringPath"),Rx=(0,r.a)(function(t,e){return function(){var i,n,r={};try{for(var o=X_(e),a=o.next();!a.done;a=o.next()){var s=a.value;r[s]=qx(t,s)}}catch(t){i={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return r}},"getClientStates"),Dx=(0,r.a)(function(t,e,i,n,r){return void 0===r&&(r=null),function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var s=i(),l=s.logger,h=s.logLevel;if(h&&h<F_.Debug||!h||!l)return t.apply(r,o);var u={type:"invoke public method",name:e,args:o,stacktrace:Ox(1),time:{start:(new Date).toISOString()},states:{}};n&&u.states&&(u.states.before=n());var c=t.apply(r,o);return c&&c.promise?c.promise.then(function(){n&&u.states&&(u.states.after=n()),u.time&&(u.time.end=(new Date).toISOString()),l.debug(JSON.stringify(u,null,2))}):(n&&u.states&&(u.states.after=n()),u.time&&(u.time.end=(new Date).toISOString()),l.debug(JSON.stringify(u,null,2))),c}},"debugWrapper");(0,n.a)();var kx=(0,r.a)(function(t){return t?(t^16*Math.random()>>t/4).toString(16):(String(1e7)+String(-1e3)+String(-4e3)+String(-8e3)+String(-1e11)).replace(/[018]/g,kx)},"UUID");(0,n.a)();var Bx=function(){function t(){this.memoryStorage=new Map}return(0,r.a)(t,"MemoryStorage"),t.prototype.isEnabled=function(){return H_(this,void 0,void 0,function(){return W_(this,function(t){return[2,!0]})})},t.prototype.get=function(t){return H_(this,void 0,void 0,function(){return W_(this,function(e){return[2,this.memoryStorage.get(t)]})})},t.prototype.getRaw=function(t){return H_(this,void 0,void 0,function(){var e;return W_(this,function(i){switch(i.label){case 0:return[4,this.get(t)];case 1:return[2,(e=i.sent())?JSON.stringify(e):void 0]}})})},t.prototype.set=function(t,e){return H_(this,void 0,void 0,function(){return W_(this,function(i){return this.memoryStorage.set(t,e),[2]})})},t.prototype.remove=function(t){return H_(this,void 0,void 0,function(){return W_(this,function(e){return this.memoryStorage.delete(t),[2]})})},t.prototype.reset=function(){return H_(this,void 0,void 0,function(){return W_(this,function(t){return this.memoryStorage.clear(),[2]})})},t}();(0,n.a)();var Fx=function(){function t(){}return(0,r.a)(t,"BaseTransport"),t.prototype.send=function(t,e){return Promise.resolve(null)},t.prototype.buildResponse=function(t){var e,i,n,r,o,a,s,l,h,u,c,p,d,f,g,m,v,y,_,x,b,w;if("object"!=typeof t)return null;var E=t.code||0,M=this.buildStatus(E);switch(M){case z_.Success:return{status:M,statusCode:E,body:{eventsIngested:null!==(e=t.events_ingested)&&void 0!==e?e:0,payloadSizeBytes:null!==(i=t.payload_size_bytes)&&void 0!==i?i:0,serverUploadTime:null!==(n=t.server_upload_time)&&void 0!==n?n:0}};case z_.Invalid:return{status:M,statusCode:E,body:{error:null!==(r=t.error)&&void 0!==r?r:"",missingField:null!==(o=t.missing_field)&&void 0!==o?o:"",eventsWithInvalidFields:null!==(a=t.events_with_invalid_fields)&&void 0!==a?a:{},eventsWithMissingFields:null!==(s=t.events_with_missing_fields)&&void 0!==s?s:{},eventsWithInvalidIdLengths:null!==(l=t.events_with_invalid_id_lengths)&&void 0!==l?l:{},epsThreshold:null!==(h=t.eps_threshold)&&void 0!==h?h:0,exceededDailyQuotaDevices:null!==(u=t.exceeded_daily_quota_devices)&&void 0!==u?u:{},silencedDevices:null!==(c=t.silenced_devices)&&void 0!==c?c:[],silencedEvents:null!==(p=t.silenced_events)&&void 0!==p?p:[],throttledDevices:null!==(d=t.throttled_devices)&&void 0!==d?d:{},throttledEvents:null!==(f=t.throttled_events)&&void 0!==f?f:[]}};case z_.PayloadTooLarge:return{status:M,statusCode:E,body:{error:null!==(g=t.error)&&void 0!==g?g:""}};case z_.RateLimit:return{status:M,statusCode:E,body:{error:null!==(m=t.error)&&void 0!==m?m:"",epsThreshold:null!==(v=t.eps_threshold)&&void 0!==v?v:0,throttledDevices:null!==(y=t.throttled_devices)&&void 0!==y?y:{},throttledUsers:null!==(_=t.throttled_users)&&void 0!==_?_:{},exceededDailyQuotaDevices:null!==(x=t.exceeded_daily_quota_devices)&&void 0!==x?x:{},exceededDailyQuotaUsers:null!==(b=t.exceeded_daily_quota_users)&&void 0!==b?b:{},throttledEvents:null!==(w=t.throttled_events)&&void 0!==w?w:[]}};case z_.Timeout:default:return{status:M,statusCode:E}}},t.prototype.buildStatus=function(t){return t>=200&&t<300?z_.Success:429===t?z_.RateLimit:413===t?z_.PayloadTooLarge:408===t?z_.Timeout:t>=400&&t<500?z_.Invalid:t>=500?z_.Failed:z_.Unknown},t}();(0,n.a)(),(0,n.a)(),(0,n.a)();var Ux=(0,r.a)(function(t,e){return(Ux=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},"extendStatics");function zx(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}Ux(t,e),(0,r.a)(i,"__"),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(0,r.a)(zx,"__extends");var Vx=(0,r.a)(function(){return(Vx=Object.assign||(0,r.a)(function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},"__assign")).apply(this,arguments)},"__assign");function jx(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]])}return i}function Gx(t,e,i,n){function o(t){return t instanceof i?t:new i(function(e){e(t)})}return(0,r.a)(o,"adopt"),new(i||(i=Promise))(function(i,a){function s(t){try{h(n.next(t))}catch(t){a(t)}}function l(t){try{h(n.throw(t))}catch(t){a(t)}}function h(t){t.done?i(t.value):o(t.value).then(s,l)}(0,r.a)(s,"fulfilled"),(0,r.a)(l,"rejected"),(0,r.a)(h,"step"),h((n=n.apply(t,e||[])).next())})}function Hx(t,e){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(r=2&s[0]?n.return:s[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,s[1])).done)return r;switch(n=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}function Wx(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,o=i.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return a}(0,r.a)(jx,"__rest"),(0,r.a)(Gx,"__awaiter"),(0,r.a)(Hx,"__generator"),(0,r.a)(Wx,"__read"),(0,n.a)(),(0,n.a)();var Xx=(0,r.a)(function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:typeof e<"u"?e:void 0},"getGlobalScope"),Yx=(0,r.a)(function(){var t,e=Xx();return null!==(t=null==e?void 0:e.location)&&void 0!==t&&t.search?e.location.search.substring(1).split("&").filter(Boolean).reduce(function(t,e){var i=e.split("=",2),n=Zx(i[0]),r=Zx(i[1]);return r&&(t[n]=r),t},{}):{}},"getQueryParams"),Zx=(0,r.a)(function(t){void 0===t&&(t="");try{return decodeURIComponent(t)}catch{return""}},"tryDecodeURIComponent");(0,n.a)();var Jx="utm_campaign",Kx="utm_content",Qx="utm_id",$x="utm_medium",tb="utm_source",eb="utm_term",ib="dclid",nb="fbclid",rb="gbraid",ob="gclid",ab="ko_click_id",sb="msclkid",lb="ttclid",hb="twclid",ub="wbraid",cb="EMPTY",pb={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,msclkid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},db="MKTG",fb=function(){function t(){}return(0,r.a)(t,"CampaignParser"),t.prototype.parse=function(){return Gx(this,void 0,void 0,function(){return Hx(this,function(t){return[2,Vx(Vx(Vx(Vx({},pb),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},t.prototype.getUtmParam=function(){var t=Yx();return{utm_campaign:t[Jx],utm_content:t[Kx],utm_id:t[Qx],utm_medium:t[$x],utm_source:t[tb],utm_term:t[eb]}},t.prototype.getReferrer=function(){var t,e,i={referrer:void 0,referring_domain:void 0};try{i.referrer=document.referrer||void 0,i.referring_domain=null!==(e=null===(t=i.referrer)||void 0===t?void 0:t.split("/")[2])&&void 0!==e?e:void 0}catch{}return i},t.prototype.getClickIds=function(){var t,e=Yx();return(t={})[ib]=e[ib],t[nb]=e[nb],t[rb]=e[rb],t[ob]=e[ob],t[ab]=e[ab],t[sb]=e[sb],t[lb]=e[lb],t[hb]=e[hb],t[ub]=e[ub],t},t}();(0,n.a)(),(0,n.a)();var gb=(0,r.a)(function(t,e,i){return void 0===e&&(e=""),void 0===i&&(i=10),[K_,e,t.substring(0,i)].filter(Boolean).join("_")},"getCookieName"),mb=(0,r.a)(function(t){return"".concat(K_.toLowerCase(),"_").concat(t.substring(0,6))},"getOldCookieName"),vb=function(){function t(t,e){var i,n;this.storage=e.storage,this.storageKey=gb(t,db),this.parser=new fb,this.track=e.track,this.onNewCampaign=e.onNewCampaign,this.disabled=!!e.disabled,this.trackNewCampaigns=!!e.trackNewCampaigns,this.trackPageViews=!!e.trackPageViews,this.excludeReferrers=null!==(i=e.excludeReferrers)&&void 0!==i?i:[],typeof location<"u"&&this.excludeReferrers.unshift(location.hostname),this.initialEmptyValue=null!==(n=e.initialEmptyValue)&&void 0!==n?n:cb}return(0,r.a)(t,"CampaignTracker"),t.prototype.isNewCampaign=function(t,e,i){void 0===i&&(i=!1),t.referrer;var n=t.referring_domain,r=jx(t,["referrer","referring_domain"]),o=e||{},a=(o.referrer,o.referring_domain),s=jx(o,["referrer","referring_domain"]);if(t.referring_domain&&this.excludeReferrers.includes(t.referring_domain))return!1;var l=JSON.stringify(r)!==JSON.stringify(s),h=i?yb(n||"")!==yb(a||""):n!==a;return!e||l||h},t.prototype.saveCampaignToStorage=function(t){return Gx(this,void 0,void 0,function(){return Hx(this,function(e){switch(e.label){case 0:return[4,this.storage.set(this.storageKey,t)];case 1:return e.sent(),[2]}})})},t.prototype.getCampaignFromStorage=function(){return Gx(this,void 0,void 0,function(){return Hx(this,function(t){switch(t.label){case 0:return[4,this.storage.get(this.storageKey)];case 1:return[2,t.sent()]}})})},t.prototype.createCampaignEvent=function(t){var e=this,i=Vx(Vx({},pb),t),n=Object.entries(i).reduce(function(t,i){var n=Wx(i,2),r=n[0],o=n[1];return t.setOnce("initial_".concat(r),o||e.initialEmptyValue),o?t.set(r,o):t.unset(r)},new ax),r={event_type:"Page View",event_properties:{page_title:typeof document<"u"&&document.title||"",page_location:typeof location<"u"&&location.href||"",page_path:typeof location<"u"&&location.pathname||""}};return Vx(Vx({},lx(n)),this.trackPageViews&&r)},t.prototype.send=function(t){return Gx(this,void 0,void 0,function(){var e,i;return Hx(this,function(n){switch(n.label){case 0:return this.disabled?[2]:[4,this.parser.parse()];case 1:return e=n.sent(),[4,this.getCampaignFromStorage()];case 2:if(i=n.sent(),!t){if(!this.trackNewCampaigns||!this.isNewCampaign(e,i))return[2];this.onNewCampaign(e)}return[4,this.track(this.createCampaignEvent(e))];case 3:return n.sent(),[4,this.saveCampaignToStorage(e)];case 4:return n.sent(),[2]}})})},t}(),yb=(0,r.a)(function(t){var e=t.split(".");return e.length<=2?t:e.slice(e.length-2,e.length).join(".")},"domainWithoutSubdomain");(0,n.a)();var _b=function(){function t(t){this.options=Vx({},t)}return(0,r.a)(t,"CookieStorage"),t.prototype.isEnabled=function(){return Gx(this,void 0,void 0,function(){var e,i,n;return Hx(this,function(r){switch(r.label){case 0:if(!Xx())return[2,!1];e=String(Date.now()),i=new t(this.options),n="AMP_TEST",r.label=1;case 1:return r.trys.push([1,4,5,7]),[4,i.set(n,e)];case 2:return r.sent(),[4,i.get(n)];case 3:return[2,r.sent()===e];case 4:return r.sent(),[2,!1];case 5:return[4,i.remove(n)];case 6:return r.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(t){return Gx(this,void 0,void 0,function(){var e;return Hx(this,function(i){switch(i.label){case 0:return[4,this.getRaw(t)];case 1:if(!(e=i.sent()))return[2,void 0];try{try{e=decodeURIComponent(atob(e))}catch{}return[2,JSON.parse(e)]}catch{return[2,void 0]}return[2]}})})},t.prototype.getRaw=function(t){var e;return Gx(this,void 0,void 0,function(){var i,n,r;return Hx(this,function(o){return i=Xx(),n=null!==(e=null==i?void 0:i.document.cookie.split("; "))&&void 0!==e?e:[],(r=n.find(function(e){return 0===e.indexOf(t+"=")}))?[2,r.substring(t.length+1)]:[2,void 0]})})},t.prototype.set=function(t,e){var i;return Gx(this,void 0,void 0,function(){var n,r,o,a,s,l;return Hx(this,function(h){try{n=null!==(i=this.options.expirationDays)&&void 0!==i?i:0,o=void 0,(r=null!==e?n:-1)&&((a=new Date).setTime(a.getTime()+24*r*60*60*1e3),o=a),s="".concat(t,"=").concat(btoa(encodeURIComponent(JSON.stringify(e)))),o&&(s+="; expires=".concat(o.toUTCString())),s+="; path=/",this.options.domain&&(s+="; domain=".concat(this.options.domain)),this.options.secure&&(s+="; Secure"),this.options.sameSite&&(s+="; SameSite=".concat(this.options.sameSite)),(l=Xx())&&(l.document.cookie=s)}catch{}return[2]})})},t.prototype.remove=function(t){return Gx(this,void 0,void 0,function(){return Hx(this,function(e){switch(e.label){case 0:return[4,this.set(t,null)];case 1:return e.sent(),[2]}})})},t.prototype.reset=function(){return Gx(this,void 0,void 0,function(){return Hx(this,function(t){return[2]})})},t}();(0,n.a)();var xb=function(){function t(t,e){this.storage=t,this.storageKey=gb(e),this.cache={optOut:!1}}return(0,r.a)(t,"SessionManager"),t.prototype.load=function(){var t;return Gx(this,void 0,void 0,function(){var e;return Hx(this,function(i){switch(i.label){case 0:return e=this,[4,this.storage.get(this.storageKey)];case 1:return e.cache=null!==(t=i.sent())&&void 0!==t?t:{optOut:!1},[2,this]}})})},t.prototype.setSession=function(t){this.cache=Vx(Vx({},this.cache),t),this.storage.set(this.storageKey,this.cache)},t.prototype.getSessionId=function(){return this.cache.sessionId},t.prototype.setSessionId=function(t){this.setSession({sessionId:t})},t.prototype.getDeviceId=function(){return this.cache.deviceId},t.prototype.setDeviceId=function(t){this.setSession({deviceId:t})},t.prototype.getUserId=function(){return this.cache.userId},t.prototype.setUserId=function(t){this.setSession({userId:t})},t.prototype.getLastEventTime=function(){return this.cache.lastEventTime},t.prototype.setLastEventTime=function(t){this.setSession({lastEventTime:t})},t.prototype.getOptOut=function(){return this.cache.optOut},t.prototype.setOptOut=function(t){this.setSession({optOut:t})},t.prototype.getLastEventId=function(){return this.cache.lastEventId},t.prototype.setLastEventId=function(t){this.setSession({lastEventId:t})},t}();(0,n.a)();var bb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zx(e,t),(0,r.a)(e,"FetchTransport"),e.prototype.send=function(t,e){return Gx(this,void 0,void 0,function(){var i,n;return Hx(this,function(r){switch(r.label){case 0:if(typeof fetch>"u")throw new Error("FetchTransport is not supported");return i={headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(e),method:"POST"},[4,fetch(t,i)];case 1:return[4,r.sent().json()];case 2:return n=r.sent(),[2,this.buildResponse(n)]}})})},e}(Fx);(0,n.a)(),(0,n.a)();var wb=(0,r.e)(tt()),Eb=function(){function t(){this.ua=new wb.UAParser(typeof navigator<"u"?navigator.userAgent:null).getResult()}return(0,r.a)(t,"ApplicationContextProviderImpl"),t.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:Tb(),platform:"Web",os:Mb(this.ua),deviceModel:Sb(this.ua)}},t}(),Mb=(0,r.a)(function(t){var e,i;return[null===(e=t.browser)||void 0===e?void 0:e.name,null===(i=t.browser)||void 0===i?void 0:i.major].filter(function(t){return null!=t}).join(" ")},"getOs"),Sb=(0,r.a)(function(t){var e;return null===(e=t.os)||void 0===e?void 0:e.name},"getDeviceModel"),Tb=(0,r.a)(function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},"getLanguage"),Cb=function(){function t(){this.queue=[]}return(0,r.a)(t,"EventBridgeImpl"),t.prototype.logEvent=function(t){this.receiver?this.receiver(t):this.queue.length<512&&this.queue.push(t)},t.prototype.setEventReceiver=function(t){this.receiver=t,this.queue.length>0&&(this.queue.forEach(function(e){t(e)}),this.queue=[])},t}(),Ab=(0,r.a)(function(){return(Ab=Object.assign||(0,r.a)(function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},"__assign")).apply(this,arguments)},"__assign"),Pb=(0,r.a)(function(t,e){var i=typeof t;if(i!==typeof e)return!1;for(var n=0,r=["string","number","boolean","undefined"];n<r.length;n++)if(r[n]===i)return t===e;if(null==t&&null==e)return!0;if(null==t||null==e||t.length!==e.length)return!1;var o=Array.isArray(t),a=Array.isArray(e);if(o!==a)return!1;if(!o||!a){var s=Object.keys(t).sort(),l=Object.keys(e).sort();if(!Pb(s,l))return!1;var h=!0;return Object.keys(t).forEach(function(i){Pb(t[i],e[i])||(h=!1)}),h}for(var u=0;u<t.length;u++)if(!Pb(t[u],e[u]))return!1;return!0},"isEqual"),Ib="$set",Lb="$unset",Ob="$clearAll";Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),i=e.length,n=new Array(i);i--;)n[i]=[e[i],t[e[i]]];return n});var Nb=function(){function t(){this.identity={userProperties:{}},this.listeners=new Set}return(0,r.a)(t,"IdentityStoreImpl"),t.prototype.editIdentity=function(){var t=this,e=Ab({},this.identity.userProperties),i=Ab(Ab({},this.identity),{userProperties:e});return{setUserId:function(t){return i.userId=t,this},setDeviceId:function(t){return i.deviceId=t,this},setUserProperties:function(t){return i.userProperties=t,this},updateUserProperties:function(t){for(var e=i.userProperties||{},n=0,r=Object.entries(t);n<r.length;n++){var o=r[n],a=o[0],s=o[1];switch(a){case Ib:for(var l=0,h=Object.entries(s);l<h.length;l++){var u=h[l],c=u[0],p=u[1];e[c]=p}break;case Lb:for(var d=0,f=Object.keys(s);d<f.length;d++)delete e[c=f[d]];break;case Ob:e={}}}return i.userProperties=e,this},commit:function(){return t.setIdentity(i),this}}},t.prototype.getIdentity=function(){return Ab({},this.identity)},t.prototype.setIdentity=function(t){var e=Ab({},this.identity);this.identity=Ab({},t),Pb(e,this.identity)||this.listeners.forEach(function(e){e(t)})},t.prototype.addIdentityListener=function(t){this.listeners.add(t)},t.prototype.removeIdentityListener=function(t){this.listeners.delete(t)},t}(),qb=typeof globalThis<"u"?globalThis:typeof e<"u"?e:self,Rb=function(){function t(){this.identityStore=new Nb,this.eventBridge=new Cb,this.applicationContextProvider=new Eb}return(0,r.a)(t,"AnalyticsConnector"),t.getInstance=function(e){return qb.analyticsConnectorInstances||(qb.analyticsConnectorInstances={}),qb.analyticsConnectorInstances[e]||(qb.analyticsConnectorInstances[e]=new t),qb.analyticsConnectorInstances[e]},t}(),Db=(0,r.a)(function(){return Rb.getInstance("$default_instance")},"getAnalyticsConnector");(0,n.a)();var kb=function(){function t(){this.name="identity",this.type=U_.BEFORE,this.identityStore=Db().identityStore}return(0,r.a)(t,"IdentityEventSender"),t.prototype.execute=function(t){return Gx(this,void 0,void 0,function(){var e;return Hx(this,function(i){return(e=t.user_properties)&&this.identityStore.editIdentity().updateUserProperties(e).commit(),[2,t]})})},t.prototype.setup=function(t){return Promise.resolve(void 0)},t}();(0,n.a)();var Bb=(0,r.a)(function(){var t,e,i,n;if(typeof navigator>"u")return"";var r=navigator.userLanguage;return null!==(n=null!==(i=null!==(e=null===(t=navigator.languages)||void 0===t?void 0:t[0])&&void 0!==e?e:navigator.language)&&void 0!==i?i:r)&&void 0!==n?n:""},"getLanguage");(0,n.a)();var Fb=(0,r.a)(function(t,e){for(var i=0;i<e.length;i++){var n=e[i],r=n.name,o=n.args,a=n.resolve,s=t&&t[r];if("function"==typeof s){var l=s.apply(t,o);"function"==typeof a&&a(null==l?void 0:l.promise)}}return t},"convertProxyObjectToRealObject"),Ub=(0,r.a)(function(t){return t&&void 0!==t._q},"isInstanceProxy");(0,n.a)();var zb=(0,r.e)(tt());(0,n.a)();var Vb="1.6.8",jb="Web",Gb="$remote",Hb=function(){function t(){var t;this.name="context",this.type=U_.BEFORE,this.eventId=0,this.library="amplitude-ts/".concat(Vb),typeof navigator<"u"&&(t=navigator.userAgent),this.uaResult=new zb.default(t).getResult()}return(0,r.a)(t,"Context"),t.prototype.setup=function(t){return this.config=t,Promise.resolve(void 0)},t.prototype.execute=function(t){return L_(this,void 0,void 0,function(){var e,i,n,r,o;return O_(this,function(a){return this.isSessionValid()||(this.config.sessionId=Date.now()),this.config.lastEventTime=Date.now(),e=(new Date).getTime(),i=this.uaResult.browser.name,n=this.uaResult.browser.version,r=this.uaResult.device.model||this.uaResult.os.name,o=this.uaResult.device.vendor,[2,I_(I_(I_(I_(I_(I_(I_(I_(I_(I_(I_(I_({user_id:this.config.userId,device_id:this.config.deviceId,session_id:this.config.sessionId,time:e},this.config.appVersion&&{app_version:this.config.appVersion}),this.config.trackingOptions.platform&&{platform:jb}),this.config.trackingOptions.osName&&{os_name:i}),this.config.trackingOptions.osVersion&&{os_version:n}),this.config.trackingOptions.deviceManufacturer&&{device_manufacturer:o}),this.config.trackingOptions.deviceModel&&{device_model:r}),this.config.trackingOptions.language&&{language:Bb()}),this.config.trackingOptions.ipAddress&&{ip:Gb}),{insert_id:kx(),partner_id:this.config.partnerId,plan:this.config.plan}),this.config.ingestionMetadata&&{ingestion_metadata:{source_name:this.config.ingestionMetadata.sourceName,source_version:this.config.ingestionMetadata.sourceVersion}}),t),{event_id:this.eventId++,library:this.library})]})})},t.prototype.isSessionValid=function(){var t=this.config.lastEventTime||Date.now();return Date.now()-t<this.config.sessionTimeout},t}();(0,n.a)(),(0,n.a)();var Wb=function(){function t(){}return(0,r.a)(t,"LocalStorage"),t.prototype.isEnabled=function(){return L_(this,void 0,void 0,function(){var e,i,n;return O_(this,function(r){switch(r.label){case 0:if(!Xx())return[2,!1];e=String(Date.now()),i=new t,n="AMP_TEST",r.label=1;case 1:return r.trys.push([1,4,5,7]),[4,i.set(n,e)];case 2:return r.sent(),[4,i.get(n)];case 3:return[2,r.sent()===e];case 4:return r.sent(),[2,!1];case 5:return[4,i.remove(n)];case 6:return r.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(t){return L_(this,void 0,void 0,function(){var e;return O_(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.getRaw(t)];case 1:return(e=i.sent())?[2,JSON.parse(e)]:[2,void 0];case 2:return i.sent(),[2,void 0];case 3:return[2]}})})},t.prototype.getRaw=function(t){var e;return L_(this,void 0,void 0,function(){return O_(this,function(i){return[2,(null===(e=Xx())||void 0===e?void 0:e.localStorage.getItem(t))||void 0]})})},t.prototype.set=function(t,e){var i;return L_(this,void 0,void 0,function(){return O_(this,function(n){try{null===(i=Xx())||void 0===i||i.localStorage.setItem(t,JSON.stringify(e))}catch{}return[2]})})},t.prototype.remove=function(t){var e;return L_(this,void 0,void 0,function(){return O_(this,function(i){try{null===(e=Xx())||void 0===e||e.localStorage.removeItem(t)}catch{}return[2]})})},t.prototype.reset=function(){var t;return L_(this,void 0,void 0,function(){return O_(this,function(e){try{null===(t=Xx())||void 0===t||t.localStorage.clear()}catch{}return[2]})})},t}();(0,n.a)();var Xb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={done:4},e}return P_(e,t),(0,r.a)(e,"XHRTransport"),e.prototype.send=function(t,e){return L_(this,void 0,void 0,function(){var i=this;return O_(this,function(n){return[2,new Promise(function(n,r){typeof XMLHttpRequest>"u"&&r(new Error("XHRTransport is not supported."));var o=new XMLHttpRequest;o.open("POST",t,!0),o.onreadystatechange=function(){if(o.readyState===i.state.done)try{var t=o.responseText,e=JSON.parse(t),a=i.buildResponse(e);n(a)}catch(t){r(t)}},o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Accept","*/*"),o.send(JSON.stringify(e))})]})})},e}(Fx);(0,n.a)();var Yb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return P_(e,t),(0,r.a)(e,"SendBeaconTransport"),e.prototype.send=function(t,e){return L_(this,void 0,void 0,function(){var i=this;return O_(this,function(n){return[2,new Promise(function(n,r){var o=Xx();if(null==o||!o.navigator.sendBeacon)throw new Error("SendBeaconTransport is not supported");try{var a=JSON.stringify(e);return n(o.navigator.sendBeacon(t,JSON.stringify(e))?i.buildResponse({code:200,events_ingested:e.events.length,payload_size_bytes:a.length,server_upload_time:Date.now()}):i.buildResponse({code:500}))}catch(t){r(t)}})]})})},e}(Fx),Zb=(0,r.a)(function(){var t=new Bx;return{cookieExpiration:365,cookieSameSite:"Lax",cookieSecure:!1,cookieStorage:t,disableCookies:!1,domain:"",sessionManager:new xb(t,""),sessionTimeout:18e5,storageProvider:new Bx,trackingOptions:{deviceManufacturer:!0,deviceModel:!0,ipAddress:!0,language:!0,osName:!0,osVersion:!0,platform:!0},transportProvider:new bb}},"getDefaultConfig"),Jb=function(t){function e(e,i,n){var r,o,a,s,l,h,u,c,p,d,f,g,m=this,v=Zb();return(m=t.call(this,I_(I_({flushIntervalMillis:1e3,flushMaxRetries:5,flushQueueSize:30},n),{apiKey:e,storageProvider:null!==(r=null==n?void 0:n.storageProvider)&&void 0!==r?r:v.storageProvider,transportProvider:null!==(o=null==n?void 0:n.transportProvider)&&void 0!==o?o:v.transportProvider}))||this).cookieStorage=null!==(a=null==n?void 0:n.cookieStorage)&&void 0!==a?a:v.cookieStorage,m.sessionManager=null!==(s=null==n?void 0:n.sessionManager)&&void 0!==s?s:v.sessionManager,m.sessionTimeout=null!==(l=null==n?void 0:n.sessionTimeout)&&void 0!==l?l:v.sessionTimeout,m.appVersion=null==n?void 0:n.appVersion,m.attribution=null==n?void 0:n.attribution,m.cookieExpiration=null!==(h=null==n?void 0:n.cookieExpiration)&&void 0!==h?h:v.cookieExpiration,m.cookieSameSite=null!==(u=null==n?void 0:n.cookieSameSite)&&void 0!==u?u:v.cookieSameSite,m.cookieSecure=null!==(c=null==n?void 0:n.cookieSecure)&&void 0!==c?c:v.cookieSecure,m.deviceId=null==n?void 0:n.deviceId,m.disableCookies=null!==(p=null==n?void 0:n.disableCookies)&&void 0!==p?p:v.disableCookies,m.domain=null!==(d=null==n?void 0:n.domain)&&void 0!==d?d:v.domain,m.lastEventTime=null!==(f=m.lastEventTime)&&void 0!==f?f:null==n?void 0:n.lastEventTime,m.optOut=!(null==n||!n.optOut),m.partnerId=null==n?void 0:n.partnerId,m.sessionId=null==n?void 0:n.sessionId,m.trackingOptions=null!==(g=null==n?void 0:n.trackingOptions)&&void 0!==g?g:v.trackingOptions,m.userId=i,m}return P_(e,t),(0,r.a)(e,"BrowserConfig"),Object.defineProperty(e.prototype,"deviceId",{get:function(){return this.sessionManager.getDeviceId()},set:function(t){this.sessionManager.setDeviceId(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return this.sessionManager.getUserId()},set:function(t){this.sessionManager.setUserId(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this.sessionManager.getSessionId()},set:function(t){this.sessionManager.setSessionId(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"optOut",{get:function(){return this.sessionManager.getOptOut()},set:function(t){var e;null===(e=this.sessionManager)||void 0===e||e.setOptOut(!!t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventTime",{get:function(){return this.sessionManager.getLastEventTime()},set:function(t){this.sessionManager.setLastEventTime(t)},enumerable:!1,configurable:!0}),e}(Cx),Kb=(0,r.a)(function(t,e,i){return L_(void 0,void 0,void 0,function(){var n,r,o,a,s,l,h,u,c,p,d,f,g,m,v,y,_;return O_(this,function(x){switch(x.label){case 0:return n=Zb(),null!==(g=null==i?void 0:i.domain)&&void 0!==g?(o=g,[3,3]):[3,1];case 1:return[4,nw()];case 2:o=x.sent(),x.label=3;case 3:return r=o,[4,Qb(I_(I_({},i),{domain:r}))];case 4:return a=x.sent(),s=gb(t),[4,a.get(s)];case 5:return l=x.sent(),h=Yx(),[4,new xb(a,t).load()];case 6:return u=x.sent(),c=Jb.bind,p=[void 0,t,null!=e?e:null==l?void 0:l.userId],d=[I_({},i)],f={cookieStorage:a,sessionManager:u,deviceId:ew(null==l?void 0:l.deviceId,null==i?void 0:i.deviceId,h.deviceId),domain:r,optOut:null!==(m=null==i?void 0:i.optOut)&&void 0!==m?m:!(null==l||!l.optOut)},[4,a.get(s)];case 7:return f.sessionId=null!==(y=null===(v=x.sent())||void 0===v?void 0:v.sessionId)&&void 0!==y?y:null==i?void 0:i.sessionId,[4,tw(i)];case 8:return[2,new(c.apply(Jb,p.concat([I_.apply(void 0,d.concat([(f.storageProvider=x.sent(),f.trackingOptions=I_(I_({},n.trackingOptions),null==i?void 0:i.trackingOptions),f.transportProvider=null!==(_=null==i?void 0:i.transportProvider)&&void 0!==_?_:iw(null==i?void 0:i.transport),f)]))])))]}})})},"useBrowserConfig"),Qb=(0,r.a)(function(t,e){return void 0===e&&(e=Zb()),L_(void 0,void 0,void 0,function(){var i,n,r;return O_(this,function(o){switch(o.label){case 0:return i=I_(I_({},e),t),n=null==t?void 0:t.cookieStorage,(r=!n)?[3,2]:[4,n.isEnabled()];case 1:r=!o.sent(),o.label=2;case 2:return r?[2,$b(i)]:[2,n]}})})},"createCookieStorage"),$b=(0,r.a)(function(t){return L_(void 0,void 0,void 0,function(){var e,i;return O_(this,function(n){switch(n.label){case 0:return e=new _b({domain:t.domain,expirationDays:t.cookieExpiration,sameSite:t.cookieSameSite,secure:t.cookieSecure}),(i=t.disableCookies)?[3,2]:[4,e.isEnabled()];case 1:i=!n.sent(),n.label=2;case 2:return i?[4,(e=new Wb).isEnabled()]:[3,4];case 3:n.sent()||(e=new Bx),n.label=4;case 4:return[2,e]}})})},"createFlexibleStorage"),tw=(0,r.a)(function(t){return L_(void 0,void 0,void 0,function(){var e,i,n,r,o,a,s;return O_(this,function(l){switch(l.label){case 0:if(t&&Object.prototype.hasOwnProperty.call(t,"storageProvider")&&!t.storageProvider)return[3,9];l.label=1;case 1:l.trys.push([1,7,8,9]),e=N_([null==t?void 0:t.storageProvider,new Wb]),i=e.next(),l.label=2;case 2:return i.done?[3,6]:(n=i.value,(r=n)?[4,n.isEnabled()]:[3,4]);case 3:r=l.sent(),l.label=4;case 4:if(r)return[2,n];l.label=5;case 5:return i=e.next(),[3,2];case 6:return[3,9];case 7:return o=l.sent(),a={error:o},[3,9];case 8:try{i&&!i.done&&(s=e.return)&&s.call(e)}finally{if(a)throw a.error}return[7];case 9:return[2,void 0]}})})},"createEventsStorage"),ew=(0,r.a)(function(t,e,i){return e||i||t||kx()},"createDeviceId"),iw=(0,r.a)(function(t){return t===V_.XHR?new Xb:t===V_.SendBeacon?new Yb:Zb().transportProvider},"createTransport"),nw=(0,r.a)(function(t){return L_(void 0,void 0,void 0,function(){var e,i,n,r,o,a,s;return O_(this,function(l){switch(l.label){case 0:return[4,(new _b).isEnabled()];case 1:if(!l.sent()||!t&&typeof location>"u")return[2,""];for(e=null!=t?t:location.hostname,i=e.split("."),n=[],r="AMP_TLDTEST",o=i.length-2;o>=0;--o)n.push(i.slice(o).join("."));o=0,l.label=2;case 2:return o<n.length?(a=n[o],[4,(s=new _b({domain:"."+a})).set(r,1)]):[3,7];case 3:return l.sent(),[4,s.get(r)];case 4:return l.sent()?[4,s.remove(r)]:[3,6];case 5:return l.sent(),[2,"."+a];case 6:return o++,[3,2];case 7:return[2,""]}})})},"getTopLevelDomain");(0,n.a)();var rw=(0,r.a)(function(t,e){return L_(void 0,void 0,void 0,function(){var i,n,r,o,a,s,l,h,u;return O_(this,function(c){switch(c.label){case 0:return[4,(i=new _b).isEnabled()];case 1:return(!c.sent()||null!=e&&e.disableCookies)&&(i=new Wb),[4,i.isEnabled()];case 2:return c.sent()?(n=mb(t),[4,i.getRaw(n)]):[2,{optOut:!1}];case 3:return(r=c.sent())?[4,i.remove(n)]:[2,{optOut:!1}];case 4:return c.sent(),o=q_(r.split("."),5),a=o[0],s=o[1],l=o[2],h=o[3],u=o[4],[2,{deviceId:a,userId:aw(s),sessionId:ow(h),lastEventTime:ow(u),optOut:!!l}]}})})},"parseOldCookies"),ow=(0,r.a)(function(t){var e=parseInt(t,32);if(!isNaN(e))return e},"parseTime"),aw=(0,r.a)(function(t){if(atob&&escape&&t)try{return decodeURIComponent(escape(atob(t)))}catch{return}},"decode"),sw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return P_(e,t),(0,r.a)(e,"AmplitudeBrowser"),e.prototype.init=function(e,i,n){var r,o,a;return void 0===e&&(e=""),L_(this,void 0,void 0,function(){var s,l,h,u,c=this;return O_(this,function(p){switch(p.label){case 0:return this.initializing?[2]:(this.initializing=!0,[4,rw(e,n)]);case 1:return s=p.sent(),[4,Kb(e,i||s.userId,I_(I_({},n),{deviceId:null!==(r=s.deviceId)&&void 0!==r?r:null==n?void 0:n.deviceId,sessionId:null!==(o=s.sessionId)&&void 0!==o?o:null==n?void 0:n.sessionId,optOut:null!==(a=null==n?void 0:n.optOut)&&void 0!==a?a:s.optOut,lastEventTime:s.lastEventTime}))];case 2:return l=p.sent(),[4,t.prototype._init.call(this,l)];case 3:return p.sent(),h=!this.config.lastEventTime,(!this.config.sessionId||this.config.lastEventTime&&Date.now()-this.config.lastEventTime>this.config.sessionTimeout)&&(this.setSessionId(Date.now()),h=!0),(u=Db()).eventBridge.setEventReceiver(function(t){c.track(t.eventType,t.eventProperties)}),u.identityStore.setIdentity({userId:this.config.userId,deviceId:this.config.deviceId}),[4,this.add(new Hb)];case 4:return p.sent(),[4,this.add(new kb)];case 5:return p.sent(),[4,this.add(new Ix)];case 6:return p.sent(),this.initializing=!1,[4,this.runAttributionStrategy(l.attribution,h)];case 7:return p.sent(),[4,this.runQueuedFunctions("dispatchQ")];case 8:return p.sent(),[2]}})})},e.prototype.runAttributionStrategy=function(t,e){return void 0===e&&(e=!1),L_(this,void 0,void 0,function(){var i,n,r;return O_(this,function(o){switch(o.label){case 0:return i=this.track.bind(this),n=this.setSessionId.bind(this,Date.now()),[4,$b(this.config)];case 1:return r=o.sent(),[4,new vb(this.config.apiKey,I_(I_({},t),{storage:r,track:i,onNewCampaign:n})).send(e)];case 2:return o.sent(),[2]}})})},e.prototype.getUserId=function(){var t;return null===(t=this.config)||void 0===t?void 0:t.userId},e.prototype.setUserId=function(t){this.config?this.config.userId=t:this.q.push(this.setUserId.bind(this,t))},e.prototype.getDeviceId=function(){var t;return null===(t=this.config)||void 0===t?void 0:t.deviceId},e.prototype.setDeviceId=function(t){this.config?this.config.deviceId=t:this.q.push(this.setDeviceId.bind(this,t))},e.prototype.reset=function(){this.setUserId(void 0),this.setDeviceId(kx())},e.prototype.getSessionId=function(){var t;return null===(t=this.config)||void 0===t?void 0:t.sessionId},e.prototype.setSessionId=function(t){this.config?(this.config.sessionId=t,this.config.lastEventTime=void 0):this.q.push(this.setSessionId.bind(this,t))},e.prototype.setTransport=function(t){this.config?this.config.transportProvider=iw(t):this.q.push(this.setTransport.bind(this,t))},e.prototype.identify=function(e,i){if(Ub(e)){var n=e._q;e._q=[],e=Fb(new ax,n)}return null!=i&&i.user_id&&this.setUserId(i.user_id),null!=i&&i.device_id&&this.setDeviceId(i.device_id),t.prototype.identify.call(this,e,i)},e.prototype.groupIdentify=function(e,i,n,r){if(Ub(n)){var o=n._q;n._q=[],n=Fb(new ax,o)}return t.prototype.groupIdentify.call(this,e,i,n,r)},e.prototype.revenue=function(e,i){if(Ub(e)){var n=e._q;e._q=[],e=Fb(new wx,n)}return t.prototype.revenue.call(this,e,i)},e}(bx),lw=(0,r.a)(function(){var t=new sw;return{init:Dx(Lx(t.init.bind(t)),"init",Nx(t),Rx(t,["config"])),add:Dx(Lx(t.add.bind(t)),"add",Nx(t),Rx(t,["config.apiKey","timeline.plugins"])),remove:Dx(Lx(t.remove.bind(t)),"remove",Nx(t),Rx(t,["config.apiKey","timeline.plugins"])),track:Dx(Lx(t.track.bind(t)),"track",Nx(t),Rx(t,["config.apiKey","timeline.queue.length"])),logEvent:Dx(Lx(t.logEvent.bind(t)),"logEvent",Nx(t),Rx(t,["config.apiKey","timeline.queue.length"])),identify:Dx(Lx(t.identify.bind(t)),"identify",Nx(t),Rx(t,["config.apiKey","timeline.queue.length"])),groupIdentify:Dx(Lx(t.groupIdentify.bind(t)),"groupIdentify",Nx(t),Rx(t,["config.apiKey","timeline.queue.length"])),setGroup:Dx(Lx(t.setGroup.bind(t)),"setGroup",Nx(t),Rx(t,["config.apiKey","timeline.queue.length"])),revenue:Dx(Lx(t.revenue.bind(t)),"revenue",Nx(t),Rx(t,["config.apiKey","timeline.queue.length"])),flush:Dx(Lx(t.flush.bind(t)),"flush",Nx(t),Rx(t,["config.apiKey","timeline.queue.length"])),getUserId:Dx(t.getUserId.bind(t),"getUserId",Nx(t),Rx(t,["config","config.userId"])),setUserId:Dx(t.setUserId.bind(t),"setUserId",Nx(t),Rx(t,["config","config.userId"])),getDeviceId:Dx(t.getDeviceId.bind(t),"getDeviceId",Nx(t),Rx(t,["config","config.deviceId"])),setDeviceId:Dx(t.setDeviceId.bind(t),"setDeviceId",Nx(t),Rx(t,["config","config.deviceId"])),reset:Dx(t.reset.bind(t),"reset",Nx(t),Rx(t,["config","config.userId","config.deviceId"])),getSessionId:Dx(t.getSessionId.bind(t),"getSessionId",Nx(t),Rx(t,["config"])),setSessionId:Dx(t.setSessionId.bind(t),"setSessionId",Nx(t),Rx(t,["config"])),setOptOut:Dx(t.setOptOut.bind(t),"setOptOut",Nx(t),Rx(t,["config"])),setTransport:Dx(t.setTransport.bind(t),"setTransport",Nx(t),Rx(t,["config"]))}},"createInstance"),hw=lw(),uw=hw.add,cw=hw.flush,pw=hw.getDeviceId,dw=hw.getSessionId,fw=hw.getUserId,gw=hw.groupIdentify,mw=hw.identify,vw=hw.init,yw=hw.logEvent,_w=hw.remove,xw=hw.reset,bw=hw.revenue,ww=hw.setDeviceId,Ew=hw.setGroup,Mw=hw.setOptOut,Sw=hw.setSessionId,Tw=hw.setTransport,Cw=hw.setUserId,Aw=hw.track,Pw={production:"40ead723d18886045e302513245edb27",development:""},Iw={plan:{version:"22",branch:"main",source:"websdk",versionId:"197467d1-8926-452d-a088-b3817cbac89f"},ingestionMetadata:{sourceName:"browser-typescript-ampli",sourceVersion:"2.0.0"}},Lw=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","Analytics:categorySelected-call"),this.event_properties=t}};(0,r.a)(Lw,"AnalyticsCategorySelectedCall");var Ow=Lw,Nw=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","Analytics:locationSelected-call"),this.event_properties=t}};(0,r.a)(Nw,"AnalyticsLocationSelectedCall");var qw=Nw,Rw=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","BlueDot:disable-call"),this.event_properties=t}};(0,r.a)(Rw,"BlueDotDisableCall");var Dw=Rw,kw=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","BlueDot:enable-call"),this.event_properties=t}};(0,r.a)(kw,"BlueDotEnableCall");var Bw=kw,Fw=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","BlueDot:off-call"),this.event_properties=t}};(0,r.a)(Fw,"BlueDotOffCall");var Uw=Fw,zw=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","BlueDot:on-call"),this.event_properties=t}};(0,r.a)(zw,"BlueDotOnCall");var Vw=zw,jw=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","Camera:animate-call"),this.event_properties=t}};(0,r.a)(jw,"CameraAnimateCall");var Gw=jw,Hw=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","Camera:cancelAnimation-call"),this.event_properties=t}};(0,r.a)(Hw,"CameraCancelAnimationCall");var Ww=Hw,Xw=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","Camera:focusOn-call"),this.event_properties=t}};(0,r.a)(Xw,"CameraFocusOnCall");var Yw=Xw,Zw=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","Camera:getSafeAreaInsets-call"),this.event_properties=t}};(0,r.a)(Zw,"CameraGetSafeAreaInsetsCall");var Jw=Zw,Kw=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","Camera:interaction.disable-call"),this.event_properties=t}};(0,r.a)(Kw,"CameraInteractionDisableCall");var Qw=Kw,$w=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","Camera:interaction.enable-call"),this.event_properties=t}};(0,r.a)($w,"CameraInteractionEnableCall");var tE=$w,eE=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","Camera:set-call"),this.event_properties=t}};(0,r.a)(eE,"CameraSetCall");var iE=eE,nE=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","Camera:setSafeAreaInsets-call"),this.event_properties=t}};(0,r.a)(nE,"CameraSetSafeAreaInsetsCall");var rE=nE,oE=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","Camera:translate-call"),this.event_properties=t}};(0,r.a)(oE,"CameraTranslateCall");var aE=oE,sE=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","FlatLabels:add-call"),this.event_properties=t}};(0,r.a)(sE,"FlatLabelsAddCall");var lE=sE,hE=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","FlatLabels:labelAllLocations-call"),this.event_properties=t}};(0,r.a)(hE,"FlatLabelsLabelAllLocationsCall");var uE=hE,cE=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","FlatLabels:remove-call"),this.event_properties=t}};(0,r.a)(cE,"FlatLabelsRemoveCall");var pE=cE,dE=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","FlatLabels:removeAll-call"),this.event_properties=t}};(0,r.a)(dE,"FlatLabelsRemoveAllCall");var fE=dE,gE=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","FlatLabels:setAppearance-call"),this.event_properties=t}};(0,r.a)(gE,"FlatLabelsSetAppearanceCall");var mE=gE,vE=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","FloatingLabels:add-call"),this.event_properties=t}};(0,r.a)(vE,"FloatingLabelsAddCall");var yE=vE,_E=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","FloatingLabels:labelAllLocations-call"),this.event_properties=t}};(0,r.a)(_E,"FloatingLabelsLabelAllLocationsCall");var xE=_E,bE=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","FloatingLabels:remove-call"),this.event_properties=t}};(0,r.a)(bE,"FloatingLabelsRemoveCall");var wE=bE,EE=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","FloatingLabels:removeAll-call"),this.event_properties=t}};(0,r.a)(EE,"FloatingLabelsRemoveAllCall");var ME=EE,SE=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","FloatingLabels:resetPriority-call"),this.event_properties=t}};(0,r.a)(SE,"FloatingLabelsResetPriorityCall");var TE=SE,CE=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","FloatingLabels:setAppearance-call"),this.event_properties=t}};(0,r.a)(CE,"FloatingLabelsSetAppearanceCall");var AE=CE,PE=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","FloatingLabels:setPriority-call"),this.event_properties=t}};(0,r.a)(PE,"FloatingLabelsSetPriorityCall");var IE=PE,LE=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","global:getVenue-call"),this.event_properties=t}};(0,r.a)(LE,"GlobalGetVenueCall");var OE=LE,NE=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","global:getVenueMVF-call"),this.event_properties=t}};(0,r.a)(NE,"GlobalGetVenueMvfCall");var qE=NE,RE=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","global:showVenue-call"),this.event_properties=t}};(0,r.a)(RE,"GlobalShowVenueCall");var DE=RE,kE=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","Journey:clear-call"),this.event_properties=t}};(0,r.a)(kE,"JourneyClearCall");var BE=kE,FE=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","Journey:draw-call"),this.event_properties=t}};(0,r.a)(FE,"JourneyDrawCall");var UE=FE,zE=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","Journey:setStep-call"),this.event_properties=t}};(0,r.a)(zE,"JourneySetStepCall");var VE=zE,jE=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","Mappedin:getCollectionItemById-call"),this.event_properties=t}};(0,r.a)(jE,"MappedinGetCollectionItemByIdCall");var GE=jE,HE=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MappedinCoordinate:absoluteDistanceTo-call"),this.event_properties=t}};(0,r.a)(HE,"MappedinCoordinateAbsoluteDistanceToCall");var WE=HE,XE=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MappedinCoordinate:nearestNode-call"),this.event_properties=t}};(0,r.a)(XE,"MappedinCoordinateNearestNodeCall");var YE=XE,ZE=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MappedinLocation:clone-call"),this.event_properties=t}};(0,r.a)(ZE,"MappedinLocationCloneCall");var JE=ZE,KE=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MappedinLocation:directionsTo-call"),this.event_properties=t}};(0,r.a)(KE,"MappedinLocationDirectionsToCall");var QE=KE,$E=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MappedinLocation:distanceTo-call"),this.event_properties=t}};(0,r.a)($E,"MappedinLocationDistanceToCall");var tM=$E,eM=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MappedinMap:createCoordinate-call"),this.event_properties=t}};(0,r.a)(eM,"MappedinMapCreateCoordinateCall");var iM=eM,nM=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MappedinMap:createCoordinateByXY-call"),this.event_properties=t}};(0,r.a)(nM,"MappedinMapCreateCoordinateByXyCall");var rM=nM,oM=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MappedinMap:getNorth-call"),this.event_properties=t}};(0,r.a)(oM,"MappedinMapGetNorthCall");var aM=oM,sM=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MappedinNode:directionsTo-call"),this.event_properties=t}};(0,r.a)(sM,"MappedinNodeDirectionsToCall");var lM=sM,hM=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MappedinNode:distanceTo-call"),this.event_properties=t}};(0,r.a)(hM,"MappedinNodeDistanceToCall");var uM=hM,cM=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MappedinPolygon:directionsTo-call"),this.event_properties=t}};(0,r.a)(cM,"MappedinPolygonDirectionsToCall");var pM=cM,dM=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MappedinPolygon:distanceTo-call"),this.event_properties=t}};(0,r.a)(dM,"MappedinPolygonDistanceToCall");var fM=dM,gM=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MappedinVenue:metadata-read"),this.event_properties=t}};(0,r.a)(gM,"MappedinVenueMetadataRead");var mM=gM,vM=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:addInteractivePolygon-call"),this.event_properties=t}};(0,r.a)(vM,"MapViewAddInteractivePolygonCall");var yM=vM,_M=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:addInteractivePolygonsForAllLocations-call"),this.event_properties=t}};(0,r.a)(_M,"MapViewAddInteractivePolygonsForAllLocationsCall");var xM=_M,bM=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:clearPolygonColor-call"),this.event_properties=t}};(0,r.a)(bM,"MapViewClearPolygonColorCall");var wM=bM,EM=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:createCustomTooltip-call"),this.event_properties=t}};(0,r.a)(EM,"MapViewCreateCustomTooltipCall");var MM=EM,SM=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:createMarker-call"),this.event_properties=t}};(0,r.a)(SM,"MapViewCreateMarkerCall");var TM=SM,CM=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:createTooltip-call"),this.event_properties=t}};(0,r.a)(CM,"MapViewCreateTooltipCall");var AM=CM,PM=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:destroy-call"),this.event_properties=t}};(0,r.a)(PM,"MapViewDestroyCall");var IM=PM,LM=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:disableImageFlippingForAllPolygons-call"),this.event_properties=t}};(0,r.a)(LM,"MapViewDisableImageFlippingForAllPolygonsCall");var OM=LM,NM=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:drawPath-call"),this.event_properties=t}};(0,r.a)(NM,"MapViewDrawPathCall");var qM=NM,RM=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:enableImageFlippingForAllLocations-call"),this.event_properties=t}};(0,r.a)(RM,"MapViewEnableImageFlippingForAllLocationsCall");var DM=RM,kM=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:enableImageFlippingForPolygon-call"),this.event_properties=t}};(0,r.a)(kM,"MapViewEnableImageFlippingForPolygonCall");var BM=kM,FM=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:getNearestNodeByScreenCoordinates-call"),this.event_properties=t}};(0,r.a)(FM,"MapViewGetNearestNodeByScreenCoordinatesCall");var UM=FM,zM=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:getPolygonAtCoordinate-call"),this.event_properties=t}};(0,r.a)(zM,"MapViewGetPolygonAtCoordinateCall");var VM=zM,jM=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:getPrimaryLocationForPolygon-call"),this.event_properties=t}};(0,r.a)(jM,"MapViewGetPrimaryLocationForPolygonCall");var GM=jM,HM=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:labelAllLocations-call"),this.event_properties=t}};(0,r.a)(HM,"MapViewLabelAllLocationsCall");var WM=HM,XM=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:removeAllInteractivePolygons-call"),this.event_properties=t}};(0,r.a)(XM,"MapViewRemoveAllInteractivePolygonsCall");var YM=XM,ZM=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:removeAllMarkers-call"),this.event_properties=t}};(0,r.a)(ZM,"MapViewRemoveAllMarkersCall");var JM=ZM,KM=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:removeAllPaths-call"),this.event_properties=t}};(0,r.a)(KM,"MapViewRemoveAllPathsCall");var QM=KM,$M=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:removeAllTooltips-call"),this.event_properties=t}};(0,r.a)($M,"MapViewRemoveAllTooltipsCall");var tS=$M,eS=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:removeInteractivePolygon-call"),this.event_properties=t}};(0,r.a)(eS,"MapViewRemoveInteractivePolygonCall");var iS=eS,nS=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:removeMarker-call"),this.event_properties=t}};(0,r.a)(nS,"MapViewRemoveMarkerCall");var rS=nS,oS=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:removePath-call"),this.event_properties=t}};(0,r.a)(oS,"MapViewRemovePathCall");var aS=oS,sS=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:removeTooltip-call"),this.event_properties=t}};(0,r.a)(sS,"MapViewRemoveTooltipCall");var lS=sS,hS=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:setBackgroundColor-call"),this.event_properties=t}};(0,r.a)(hS,"MapViewSetBackgroundColorCall");var uS=hS,cS=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:setHoverColor-call"),this.event_properties=t}};(0,r.a)(cS,"MapViewSetHoverColorCall");var pS=cS,dS=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:setMap-call"),this.event_properties=t}};(0,r.a)(dS,"MapViewSetMapCall");var fS=dS,gS=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:setPolygonColor-call"),this.event_properties=t}};(0,r.a)(gS,"MapViewSetPolygonColorCall");var mS=gS,vS=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","MapView:setState-call"),this.event_properties=t}};(0,r.a)(vS,"MapViewSetStateCall");var yS=vS,_S=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","metrics:mapLoad-event"),this.event_properties=t}};(0,r.a)(_S,"MetricsMapLoadEvent");var xS=_S,bS=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","OfflineSearch:addQuery-call"),this.event_properties=t}};(0,r.a)(bS,"OfflineSearchAddQueryCall");var wS=bS,ES=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","OfflineSearch:constructor-call"),this.event_properties=t}};(0,r.a)(ES,"OfflineSearchConstructorCall");var MS=ES,SS=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","OfflineSearch:search-call"),this.event_properties=t}};(0,r.a)(SS,"OfflineSearchSearchCall");var TS=SS,CS=class{constructor(t){this.event_properties=t,(0,r.f)(this,"event_type","OfflineSearch:suggest-call"),this.event_properties=t}};(0,r.a)(CS,"OfflineSearchSuggestCall");var AS=CS,PS=(0,r.a)(()=>({promise:Promise.resolve()}),"getVoidPromiseResult"),IS=class{constructor(){(0,r.f)(this,"disabled",!1),(0,r.f)(this,"amplitude")}get client(){return this.isInitializedAndEnabled(),this.amplitude}get isLoaded(){return null!=this.amplitude}isInitializedAndEnabled(){return this.amplitude?!this.disabled:(console.error("ERROR: Ampli is not yet initialized. Have you called ampli.load() on app start?"),!1)}load(t){var e,i;if(this.disabled=null!=(e=t.disabled)&&e,this.amplitude)return console.warn("WARNING: Ampli is already intialized. Ampli.load() should be called once at application startup."),PS();let n=null;if(t.client&&"apiKey"in t.client?n=t.client.apiKey:"environment"in t&&(n=Pw[t.environment]),t.client&&"instance"in t.client)this.amplitude=t.client.instance;else{if(n)return this.amplitude=lw(),this.amplitude.init(n,void 0,{...Iw,...null!=(null==t?void 0:t.client)&&"configuration"in t.client?null==(i=t.client)?void 0:i.configuration:{}});console.error("ERROR: ampli.load() requires 'environment', 'client.apiKey', or 'client.instance'")}return PS()}identify(t,e,i){if(!this.isInitializedAndEnabled())return PS();t&&(i={...i,user_id:t});let n=new ax,r=e;if(null!=r)for(let[o,a]of Object.entries(r))n.set(o,a);return this.amplitude.identify(n,i)}track(t,e){return this.isInitializedAndEnabled()?this.amplitude.track(t,void 0,e):PS()}analyticsCategorySelectedCall(t,e){return this.track(new Ow(t),e)}analyticsLocationSelectedCall(t,e){return this.track(new qw(t),e)}blueDotDisableCall(t,e){return this.track(new Dw(t),e)}blueDotEnableCall(t,e){return this.track(new Bw(t),e)}blueDotOffCall(t,e){return this.track(new Uw(t),e)}blueDotOnCall(t,e){return this.track(new Vw(t),e)}cameraAnimateCall(t,e){return this.track(new Gw(t),e)}cameraCancelAnimationCall(t,e){return this.track(new Ww(t),e)}cameraFocusOnCall(t,e){return this.track(new Yw(t),e)}cameraGetSafeAreaInsetsCall(t,e){return this.track(new Jw(t),e)}cameraInteractionDisableCall(t,e){return this.track(new Qw(t),e)}cameraInteractionEnableCall(t,e){return this.track(new tE(t),e)}cameraSetCall(t,e){return this.track(new iE(t),e)}cameraSetSafeAreaInsetsCall(t,e){return this.track(new rE(t),e)}cameraTranslateCall(t,e){return this.track(new aE(t),e)}flatLabelsAddCall(t,e){return this.track(new lE(t),e)}flatLabelsLabelAllLocationsCall(t,e){return this.track(new uE(t),e)}flatLabelsRemoveCall(t,e){return this.track(new pE(t),e)}flatLabelsRemoveAllCall(t,e){return this.track(new fE(t),e)}flatLabelsSetAppearanceCall(t,e){return this.track(new mE(t),e)}floatingLabelsAddCall(t,e){return this.track(new yE(t),e)}floatingLabelsLabelAllLocationsCall(t,e){return this.track(new xE(t),e)}floatingLabelsRemoveCall(t,e){return this.track(new wE(t),e)}floatingLabelsRemoveAllCall(t,e){return this.track(new ME(t),e)}floatingLabelsResetPriorityCall(t,e){return this.track(new TE(t),e)}floatingLabelsSetAppearanceCall(t,e){return this.track(new AE(t),e)}floatingLabelsSetPriorityCall(t,e){return this.track(new IE(t),e)}globalGetVenueCall(t,e){return this.track(new OE(t),e)}globalGetVenueMvfCall(t,e){return this.track(new qE(t),e)}globalShowVenueCall(t,e){return this.track(new DE(t),e)}journeyClearCall(t,e){return this.track(new BE(t),e)}journeyDrawCall(t,e){return this.track(new UE(t),e)}journeySetStepCall(t,e){return this.track(new VE(t),e)}mappedinGetCollectionItemByIdCall(t,e){return this.track(new GE(t),e)}mappedinCoordinateAbsoluteDistanceToCall(t,e){return this.track(new WE(t),e)}mappedinCoordinateNearestNodeCall(t,e){return this.track(new YE(t),e)}mappedinLocationCloneCall(t,e){return this.track(new JE(t),e)}mappedinLocationDirectionsToCall(t,e){return this.track(new QE(t),e)}mappedinLocationDistanceToCall(t,e){return this.track(new tM(t),e)}mappedinMapCreateCoordinateCall(t,e){return this.track(new iM(t),e)}mappedinMapCreateCoordinateByXyCall(t,e){return this.track(new rM(t),e)}mappedinMapGetNorthCall(t,e){return this.track(new aM(t),e)}mappedinNodeDirectionsToCall(t,e){return this.track(new lM(t),e)}mappedinNodeDistanceToCall(t,e){return this.track(new uM(t),e)}mappedinPolygonDirectionsToCall(t,e){return this.track(new pM(t),e)}mappedinPolygonDistanceToCall(t,e){return this.track(new fM(t),e)}mappedinVenueMetadataRead(t,e){return this.track(new mM(t),e)}mapViewAddInteractivePolygonCall(t,e){return this.track(new yM(t),e)}mapViewAddInteractivePolygonsForAllLocationsCall(t,e){return this.track(new xM(t),e)}mapViewClearPolygonColorCall(t,e){return this.track(new wM(t),e)}mapViewCreateCustomTooltipCall(t,e){return this.track(new MM(t),e)}mapViewCreateMarkerCall(t,e){return this.track(new TM(t),e)}mapViewCreateTooltipCall(t,e){return this.track(new AM(t),e)}mapViewDestroyCall(t,e){return this.track(new IM(t),e)}mapViewDisableImageFlippingForAllPolygonsCall(t,e){return this.track(new OM(t),e)}mapViewDrawPathCall(t,e){return this.track(new qM(t),e)}mapViewEnableImageFlippingForAllLocationsCall(t,e){return this.track(new DM(t),e)}mapViewEnableImageFlippingForPolygonCall(t,e){return this.track(new BM(t),e)}mapViewGetNearestNodeByScreenCoordinatesCall(t,e){return this.track(new UM(t),e)}mapViewGetPolygonAtCoordinateCall(t,e){return this.track(new VM(t),e)}mapViewGetPrimaryLocationForPolygonCall(t,e){return this.track(new GM(t),e)}mapViewLabelAllLocationsCall(t,e){return this.track(new WM(t),e)}mapViewRemoveAllInteractivePolygonsCall(t,e){return this.track(new YM(t),e)}mapViewRemoveAllMarkersCall(t,e){return this.track(new JM(t),e)}mapViewRemoveAllPathsCall(t,e){return this.track(new QM(t),e)}mapViewRemoveAllTooltipsCall(t,e){return this.track(new tS(t),e)}mapViewRemoveInteractivePolygonCall(t,e){return this.track(new iS(t),e)}mapViewRemoveMarkerCall(t,e){return this.track(new rS(t),e)}mapViewRemovePathCall(t,e){return this.track(new aS(t),e)}mapViewRemoveTooltipCall(t,e){return this.track(new lS(t),e)}mapViewSetBackgroundColorCall(t,e){return this.track(new uS(t),e)}mapViewSetHoverColorCall(t,e){return this.track(new pS(t),e)}mapViewSetMapCall(t,e){return this.track(new fS(t),e)}mapViewSetPolygonColorCall(t,e){return this.track(new mS(t),e)}mapViewSetStateCall(t,e){return this.track(new yS(t),e)}metricsMapLoadEvent(t,e){return this.track(new xS(t),e)}offlineSearchAddQueryCall(t,e){return this.track(new wS(t),e)}offlineSearchConstructorCall(t,e){return this.track(new MS(t),e)}offlineSearchSearchCall(t,e){return this.track(new TS(t),e)}offlineSearchSuggestCall(t,e){return this.track(new AS(t),e)}};(0,r.a)(IS,"Ampli");var LS=IS,OS=new LS;(0,n.a)();var NS,qS,RS,DS,kS,BS,FS,US,zS,VS,jS,GS,HS,WS,XS=(0,r.e)(et()),YS=(0,r.e)(it()),ZS=(0,r.e)(nt()),JS="5.23.0",KS="https://api2.amplitude.com/2/httpapi",QS="https://api2.amplitude.com/batch",$S="__unspecified__",tT={branch:"main",version:"0",source:"websdk"},eT=class t{constructor(){(0,r.h)(this,BS),(0,r.h)(this,US),(0,r.h)(this,VS),(0,r.h)(this,GS),(0,r.h)(this,RS,{}),(0,r.h)(this,DS,!1),(0,r.h)(this,kS,void 0),(0,r.h)(this,WS,(0,r.a)(async t=>{oT(t.type)&&(window.removeEventListener("visibilitychange",(0,r.g)(this,WS)),window.removeEventListener("pagehide",(0,r.g)(this,WS)),window.removeEventListener("beforeunload",(0,r.g)(this,WS)),window.removeEventListener("unload",(0,r.g)(this,WS)),await this.sendAllPendingEvents())},"#handlePageUnload")),null==(0,r.g)(t,qS)&&(0,r.i)(t,qS,JS),null!=navigator.userAgent&&(0,r.i)(this,kS,new ZS.UAParser(navigator.userAgent).getResult())}static setContext(e){(0,r.i)(t,NS,e)}static setVersion(e){(0,r.i)(t,qS,e)}addPendingEvent(e){var i;if(null==(0,r.g)(t,NS))return;let n=e.event_type;if(!(0,r.k)(this,US,zS).call(this,e))return;null==e.event_properties&&(e.event_properties={});let o=(0,r.g)(this,RS)[n];(0,YS.default)(e.event_properties,null!=(i=null==o?void 0:o.event_properties)?i:{}),(0,r.g)(this,RS)[n]=e}async sendAllPendingEvents(){if(null==(0,r.g)(t,NS)||Object.keys((0,r.g)(this,RS)).length<1)return;if((0,r.g)(this,DS))return void vy.warn("The current batch of analytics is already sending. Wait until this finishes before trying to send again.");let e=[];for(let t in(0,r.g)(this,RS)){let i=(0,r.g)(this,RS)[t],n=(0,r.k)(this,VS,jS).call(this,i);null!=n&&e.push(n)}if(!(e.length<1))try{(0,r.i)(this,DS,!0),200===(await(0,r.k)(this,GS,HS).call(this,QS,e)).status&&(0,r.i)(this,RS,{})}catch(t){vy.warn("Error sending batch product analytics!",t)}finally{(0,r.i)(this,DS,!1)}}async load(){if(!OS.isLoaded){let{promise:t}=OS.load({environment:"production",client:{configuration:{trackingOptions:{osName:!0}}}});t.then(()=>{window.addEventListener("pagehide",(0,r.g)(this,WS)),window.addEventListener("beforeunload",(0,r.g)(this,WS)),window.addEventListener("unload",(0,r.g)(this,WS)),window.addEventListener("visibilitychange",(0,r.g)(this,WS))})}}async sendEventNow(e){if(null==(0,r.g)(t,NS))return;let i=(0,r.k)(this,VS,jS).call(this,e);if(null!=i)try{await(0,r.k)(this,GS,HS).call(this,KS,[i])}catch(t){vy.warn("Error sending single product analytics event!",t)}}};NS=new WeakMap,qS=new WeakMap,RS=new WeakMap,DS=new WeakMap,kS=new WeakMap,BS=new WeakSet,FS=(0,r.a)(function(t){let e=t.event_type;return null!=(0,r.g)(this,RS)[e]},"#isEventTypePending"),US=new WeakSet,zS=(0,r.a)(function(t){if(!(0,r.k)(this,BS,FS).call(this,t))return!0;let e=t.event_type,i=(0,r.g)(this,RS)[e];return!(0,XS.default)(i.event_properties,t.event_properties)},"#didEventPropertiesChange"),VS=new WeakSet,jS=(0,r.a)(function(t){var e,i,n,o,a,s,l,h,u,c,p,d,f,g,m,v,y;if(null!=(0,r.g)(eT,NS))return null==(null==(e=t.event_properties)?void 0:e.venue)&&vy.warn("Error processing product analytics event! Unspecified venue slug",t),null==Iw.plan&&vy.warn("Error processing product analytics event! Unknown coinfiguration plan",t),{event_type:t.event_type,session_id:null!=(i=OS.client.getSessionId())?i:Iy(),device_id:null!=(n=OS.client.getDeviceId())?n:Py(),plan:{branch:null!=(a=null==(o=Iw.plan)?void 0:o.branch)?a:tT.branch,version:null!=(l=null==(s=Iw.plan)?void 0:s.version)?l:tT.version,source:null!=(u=null==(h=Iw.plan)?void 0:h.source)?u:tT.source},os_name:null==(c=(0,r.g)(this,kS))?void 0:c.browser.name,os_version:null==(p=(0,r.g)(this,kS))?void 0:p.browser.version,device_manufacturer:null==(d=(0,r.g)(this,kS))?void 0:d.device.vendor,device_model:null==(f=(0,r.g)(this,kS))?void 0:f.device.model,event_properties:{...t.event_properties,context:(0,r.g)(eT,NS),sdk_version:(0,r.g)(eT,qS),browser_name:null==(g=(0,r.g)(this,kS))?void 0:g.browser.name,browser_version:null==(m=(0,r.g)(this,kS))?void 0:m.browser.version,venue:null!=(y=null==(v=t.event_properties)?void 0:v.venue)?y:$S},time:t.time}},"#makeBatchFormattedEvent"),GS=new WeakSet,HS=(0,r.a)(async function(t,e){return await Fk()(t,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify({api_key:Pw.production,events:e})})},"#batchSend"),WS=new WeakMap,(0,r.a)(eT,"ProductAnalytics"),(0,r.h)(eT,NS,void 0),(0,r.h)(eT,qS,void 0);var iT=eT,nT=new iT,rT=nT;function oT(t){return"beforeunload"===t||"pagehide"===t||"unload"===t||"hidden"===document.visibilityState}(0,r.a)(oT,"areWeLeavingThePage");var aT,sT,lT,hT,uT=class t extends C_{constructor(t,e){super(t),(0,r.h)(this,aT,void 0),(0,r.h)(this,sT,void 0),(0,r.h)(this,lT,{}),(0,r.f)(this,"id",""),(0,r.f)(this,"x",0),(0,r.f)(this,"y",0),(0,r.f)(this,"operationHours"),(0,r.f)(this,"externalId"),(0,r.h)(this,hT,void 0),(0,r.i)(this,aT,t),(0,r.i)(this,sT,e);let i=Object.assign({},e);delete i.map,Object.assign(this,i)}get map(){let t=(0,r.g)(this,lT).map;if(typeof t<"u")return t;let e=(0,r.g)(this,aT).getCollectionItemById("maps",(0,r.g)(this,sT).map);return(0,r.g)(this,lT).map=e,e}get lat(){var t;let e=(0,r.g)(this,lT).cachedLatLon;if(null!=e)return e.lat;let i=null==(t=(0,r.g)(this,aT)._mapsById)?void 0:t[this.map.id];if(null==i)throw new Error("Map not found");return(0,r.g)(this,lT).cachedLatLon=i.createCoordinateByXY(this.x,this.y),(0,r.g)(this,lT).cachedLatLon.lat}get lon(){var t;let e=(0,r.g)(this,lT).cachedLatLon;if(null!=e)return e.lon;let i=null==(t=(0,r.g)(this,aT)._mapsById)?void 0:t[this.map.id];if(null==i)throw new Error("Map not found");return(0,r.g)(this,lT).cachedLatLon=i.createCoordinateByXY(this.x,this.y),(0,r.g)(this,lT).cachedLatLon.lon}get paths(){let t=(0,r.g)(this,lT).paths;if(typeof t<"u")return t;let e=[],i=(0,r.g)(this,aT)._nodesById,n=(0,r.g)(this,hT);if(Array.isArray(n))for(let r=0,o=n.length;r<o;++r){let t=i[n[r].node];null!=t&&e.push(t)}return(0,r.g)(this,lT).paths=e,e}set paths(t){(0,r.i)(this,hT,t)}get locations(){var t,e,i;let n=(0,r.g)(this,lT).locations;if(typeof n<"u")return n;let o=[],a=null!=(i=null==(e=null==(t=bA.instances.get((0,r.g)(this,aT)))?void 0:t.locationsByMapId)?void 0:e.get(this.map.id))?i:[],s=this.id;for(let r=0,l=a.length;r<l;++r){let t=a[r],e=t.nodes;if(Array.isArray(e))for(let i=0,n=e.length;i<n;++i)if(e[i].id===s){o.push(t);break}}return(0,r.g)(this,lT).locations=o,o}get polygon(){var t,e,i;let n=(0,r.g)(this,lT).polygon;if(typeof n<"u")return n;let o,a=null!=(i=null==(e=null==(t=bA.instances.get((0,r.g)(this,aT)))?void 0:t.polygonsByMapId)?void 0:e.get(this.map.id))?i:[],s=this.id;for(let r=0,l=a.length;r<l;++r){let t=a[r];t.entrances.map(t=>t.id).includes(s)&&(o=t)}return(0,r.g)(this,lT).polygon=o,o}static hydrate(e,i){return e.map(e=>new t(i,e))}static async fetch(e){let i=e.options.things.nodes.slice();e.options.things.maps&&VC(i,"map"),["weight","multiplier","accessible"].forEach(function(t){VC(i,t)});let n={fields:i,venue:e.options.venue};try{return(await BC(e.options,"node",n)).map(i=>new t(e,i))}catch(t){return vy.error("Fetch Nodes:",t),[]}}directionsTo(t,e){let i=t instanceof FT,n=(0,r.g)(this,aT).venue.slug,o=new lM({with_destination_set:i||void 0,venue:n});return rT.addPendingEvent(o),super.directionsTo(t,e)}distanceTo(t,e){let i=(0,r.g)(this,aT).venue.slug;return rT.addPendingEvent(new uM({venue:i})),super.distanceTo(t,e)}toJSON(){return(0,r.g)(this,sT)}};aT=new WeakMap,sT=new WeakMap,lT=new WeakMap,hT=new WeakMap,(0,r.a)(uT,"MappedinNode");var cT=exports.MappedinNode=uT;(0,n.a)();var pT,dT,fT,gT,mT=class t extends C_{constructor(t,e){super(t),(0,r.h)(this,pT,void 0),(0,r.h)(this,dT,void 0),(0,r.h)(this,fT,{}),(0,r.f)(this,"geometry"),(0,r.f)(this,"perspectives"),(0,r.f)(this,"image"),(0,r.f)(this,"holes"),(0,r.f)(this,"textures"),(0,r.f)(this,"material"),(0,r.f)(this,"label"),(0,r.f)(this,"id",""),(0,r.f)(this,"layer"),(0,r.f)(this,"layerId"),(0,r.f)(this,"name"),(0,r.f)(this,"externalId"),(0,r.f)(this,"vertexes"),(0,r.f)(this,"center"),(0,r.f)(this,"canvasBounds"),(0,r.f)(this,"categoryRank"),(0,r.h)(this,gT,void 0),(0,r.i)(this,pT,t),(0,r.i)(this,dT,e);let i=Object.assign({},e);delete i.map,Object.assign(this,i)}get map(){let t=(0,r.g)(this,fT).map;if(typeof t<"u")return t;let e=(0,r.g)(this,pT).getCollectionItemById("maps",(0,r.g)(this,dT).map);return(0,r.g)(this,fT).map=e,e}get locations(){var t,e;let i=(0,r.g)(this,fT).locations;if(typeof i<"u")return i;let n=[],o=null!=(e=null==(t=bA.instances.get((0,r.g)(this,pT)))?void 0:t.locationsByMapId.get(this.map.id))?e:[],{id:a}=this;for(let r=0,s=o.length;r<s;++r){let t=o[r],e=t.polygons;if(Array.isArray(e))for(let i=0,r=e.length;i<r;++i)if(e[i].id===a){n.push(t);break}}return(0,r.g)(this,fT).locations=n,n}get entrances(){let t=(0,r.g)(this,fT).entrances;if(typeof t<"u")return t;let e=[],i=(0,r.g)(this,gT),n=(0,r.g)(this,pT)._nodesById;if(Array.isArray(i)){for(let t=0,r=i.length;t<r;++t){let r=n[i[t].id];null!=r&&e.push(r)}return(0,r.g)(this,fT).entrances=e,e}return[]}set entrances(t){(0,r.i)(this,gT,t)}get rank(){let t=(0,r.g)(this,fT).rank;if(typeof t<"u")return t;let{rankings:e}=(0,r.g)(this,pT);if(!e||!e.polygons)return null;let i=e.polygons.find(t=>t.polygonId===this.id);return i?((0,r.g)(this,fT).rank={score:i.score,node:i.entranceNodeId},{score:i.score,node:i.entranceNodeId}):((0,r.g)(this,fT).rank=null,null)}static hydrate(e,i){return e.map(e=>new t(i,e))}static async fetch(e){let i=e.options.things.polygons.slice();e.options.things.maps&&VC(i,"map"),e.options.things.nodes&&VC(i,"entrances");let n={fields:i,venue:e.options.venue};try{return(await BC(e.options,"polygon",n)).map(i=>new t(e,i))}catch(t){return vy.error("Fetch Polygons:",t),[]}}directionsTo(t,e){let i=t instanceof FT,n=(0,r.g)(this,pT).venue.slug,o=new pM({with_destination_set:i||void 0,venue:n});return rT.addPendingEvent(o),super.directionsTo(t,e)}distanceTo(t,e){let i=(0,r.g)(this,pT).venue.slug;return rT.addPendingEvent(new fM({venue:i})),super.distanceTo(t,e)}toJSON(){return(0,r.g)(this,dT)}};pT=new WeakMap,dT=new WeakMap,fT=new WeakMap,gT=new WeakMap,(0,r.a)(mT,"MappedinPolygon");var vT=exports.MappedinPolygon=mT;(0,n.a)();var yT=0,_T="9999-12-31T00:00:00.000Z";function xT(t,e,i=new Date){if(!t.states)return;let n=i||new Date,r=t.states.find(t=>{let e=new Date(t.start||yT),i=new Date(t.end||_T);return e<n&&i>n});return r?e.find(t=>t.value===r.type):void 0}(0,r.a)(xT,"getCurrentLocationState");var bT,wT,ET,MT,ST,TT,CT=class t extends C_{constructor(t,e){super(t),(0,r.h)(this,bT,void 0),(0,r.h)(this,wT,void 0),(0,r.h)(this,ET,{}),(0,r.f)(this,"states"),(0,r.f)(this,"id",""),(0,r.f)(this,"name",""),(0,r.f)(this,"type",""),(0,r.f)(this,"description"),(0,r.f)(this,"sortOrder"),(0,r.f)(this,"logo"),(0,r.f)(this,"phone"),(0,r.f)(this,"social"),(0,r.f)(this,"color"),(0,r.f)(this,"shortName"),(0,r.f)(this,"detailsUrl"),(0,r.f)(this,"tags"),(0,r.f)(this,"toMap"),(0,r.f)(this,"externalId"),(0,r.f)(this,"showLabelWhenImagePresent"),(0,r.f)(this,"showSmartLabelWhenImagePresent"),(0,r.f)(this,"picture"),(0,r.f)(this,"operationHours"),(0,r.f)(this,"siblingGroups"),(0,r.f)(this,"gallery"),(0,r.f)(this,"amenity"),(0,r.h)(this,MT,void 0),(0,r.h)(this,ST,[]),(0,r.h)(this,TT,void 0),(0,r.i)(this,bT,t),(0,r.i)(this,wT,e);let i=Object.assign({},e);delete i.categories,Object.assign(this,i)}get polygons(){let t=(0,r.g)(this,ET).polygons;if(typeof t<"u")return t;let e=[],i=(0,r.g)(this,MT),n=(0,r.g)(this,bT)._polygonsById;if(Array.isArray(i))for(let r=0,o=i.length;r<o;++r){let t=n[i[r].id];null!=t&&e.push(t)}return(0,r.g)(this,ET).polygons=e,e}set polygons(t){(0,r.i)(this,MT,t)}get nodes(){let t=(0,r.g)(this,ET).nodes;if(typeof t<"u")return t;let e=[],i=(0,r.g)(this,ST),n=(0,r.g)(this,bT)._nodesById;if(i&&i.length)for(let r=0,o=i.length;r<o;++r){let t=n[i[r].node];null!=t&&e.push(t)}return(0,r.g)(this,ET).nodes=e,e}set nodes(t){(0,r.i)(this,ST,t)}get parent(){let t=(0,r.g)(this,ET).parent;if(typeof t<"u")return t;let e,i=(0,r.g)(this,bT)._locationsById,n=(0,r.g)(this,TT);return void 0!==n&&(e=i[n]),(0,r.g)(this,ET).parent=e,e}set parent(t){(0,r.i)(this,TT,t)}get categories(){let t=(0,r.g)(this,ET).categories;if(typeof t<"u")return t;let e=[];return(0,r.g)(this,wT).categories.forEach(t=>{let i=(0,r.g)(this,bT).getCollectionItemById("categories",t);i&&e.push(i)}),(0,r.g)(this,ET).categories=e,e}get state(){return xT(this,(0,r.g)(this,bT).locationStates)}clone(){let e=(0,r.g)(this,bT).venue.slug;return rT.addPendingEvent(new JE({venue:e})),new t((0,r.g)(this,bT),(0,r.g)(this,wT))}get nodeOperationHours(){let t=(0,r.g)(this,ET).nodeOperationHours;if(typeof t<"u")return t;if(null==this.nodes)return{};let e=(0,r.g)(this,wT).nodes.reduce((t,e)=>(null!=e.operationHours&&(t[e.node]=e.operationHours),t),{});return(0,r.g)(this,ET).nodeOperationHours=e,e}static hydrate(e,i){return e.map(e=>new t(i,e))}static async fetch(e){let i=e.options.things.locations.slice();e.options.things.categories&&VC(i,"categories"),e.options.things.nodes&&VC(i,"nodes"),e.options.things.polygons&&VC(i,"polygons"),e.options.things.locationStates&&VC(i,"states");let n={fields:i,venue:e.options.venue};try{let i=await BC(e.options,"location",n);return e.options.includeHidden||(i=i.filter(t=>!t.hidden)),i.map(i=>new t(e,i))}catch(t){return vy.error("Fetch Locations:",t),[]}}directionsTo(t,e){let i=t instanceof FT,n=(0,r.g)(this,bT).venue.slug,o=new QE({with_destination_set:i||void 0,venue:n});return rT.addPendingEvent(o),super.directionsTo(t,e)}distanceTo(t,e){let i=(0,r.g)(this,bT).venue.slug;return rT.addPendingEvent(new tM({venue:i})),super.distanceTo(t,e)}toJSON(){let t=(0,r.g)(this,wT);return delete t.color,t}};bT=new WeakMap,wT=new WeakMap,ET=new WeakMap,MT=new WeakMap,ST=new WeakMap,TT=new WeakMap,(0,r.a)(CT,"MappedinLocation");var AT=exports.MappedinLocation=CT;(0,n.a)();var PT,IT,LT,OT=class t{constructor(t,e){(0,r.h)(this,PT,void 0),(0,r.h)(this,IT,{}),(0,r.h)(this,LT,void 0),(0,r.f)(this,"name"),(0,r.f)(this,"externalId"),(0,r.f)(this,"parents"),(0,r.f)(this,"id"),(0,r.f)(this,"icon"),(0,r.f)(this,"iconFromDefaultList"),(0,r.f)(this,"sortOrder"),this.id=e.id,(0,r.i)(this,LT,e),(0,r.i)(this,PT,t),Object.assign(this,e)}get locations(){var t;let e=(0,r.g)(this,IT).locations;if(typeof e<"u")return e;let i=[],{locations:n}=(0,r.g)(this,PT),{id:o}=this;for(let r=0,a=n.length;r<a;++r){let e=n[r],a=e.categories;if(Array.isArray(a))for(let n=0,r=a.length;n<r;++n)if((null==(t=a[n])?void 0:t.id)===o){i.push(e);break}}return(0,r.g)(this,IT).locations=i,i}get children(){var t;let e=(0,r.g)(this,IT).children;if(typeof e<"u")return e;let{categories:i}=(0,r.g)(this,PT),{id:n}=this,o=[];for(let r=0;r<i.length;r++)n&&null!=(t=i[r].parents)&&t.includes(n)&&o.push(i[r]);return(0,r.g)(this,IT).children=o,o}static hydrate(e,i){return e.map(e=>new t(i,e))}static async fetch(e){let i={fields:e.options.things.categories,venue:e.options.venue};try{return(await BC(e.options,"category",i)).map(i=>new t(e,i))}catch(t){return vy.error("Fetch Categories:",t),[]}}toJSON(){return(0,r.g)(this,LT)}};PT=new WeakMap,IT=new WeakMap,LT=new WeakMap,(0,r.a)(OT,"MappedinCategory");var NT=exports.MappedinCategory=OT;(0,n.a)();var qT,RT,DT=class{constructor(t,e){(0,r.h)(this,qT,void 0),(0,r.h)(this,RT,void 0),(0,r.f)(this,"distance",0),(0,r.f)(this,"path",[]),(0,r.f)(this,"instructions",[]),(0,r.i)(this,RT,t),(0,r.i)(this,qT,e),this.distance=e.distance,this.instructions=e.instructions.map(t=>{var e,i,n,o,a,s,l,h,u,c,p,d;let f={...t,action:{...t.action},atLocation:null!=(e=t.atLocation)&&e.id?null==(n=null==(i=(0,r.g)(this,RT))?void 0:i._vortexesById)?void 0:n[t.atLocation.id]:void 0,node:null!=(o=t.node)&&o.id?null==(s=null==(a=(0,r.g)(this,RT))?void 0:a._nodesById)?void 0:s[t.node.id]:void 0};if("TakeVortex"===(null==(l=f.action)?void 0:l.type)||"ExitVortex"===(null==(h=f.action)?void 0:h.type)){let t=null==(c=(0,r.g)(this,RT)._mapsById)?void 0:c[null==(u=f.action)?void 0:u.fromMap.id],e=null==(d=(0,r.g)(this,RT)._mapsById)?void 0:d[null==(p=f.action)?void 0:p.toMap.id];t&&e&&(f.action.fromMap=t,f.action.toMap=e)}return f}),this.path=e.path.reduce((t,{id:e})=>{var i,n;let o=null==(n=null==(i=(0,r.g)(this,RT))?void 0:i._nodesById)?void 0:n[e];return o&&t.push(o),t},[])}toJSON(){return(0,r.g)(this,qT)}};qT=new WeakMap,RT=new WeakMap,(0,r.a)(DT,"MappedinDirections");var kT=exports.MappedinDirections=DT;(0,n.a)();var BT=class{constructor(t){(0,r.f)(this,"destinations",[]),this.destinations=t}};(0,r.a)(BT,"MappedinDestinationSet");var FT=exports.MappedinDestinationSet=BT;(0,n.a)();var UT,zT=class t{constructor(t){(0,r.f)(this,"id",""),(0,r.h)(this,UT,void 0),(0,r.f)(this,"accessible"),(0,r.f)(this,"name"),(0,r.f)(this,"type"),(0,r.f)(this,"weight"),(0,r.f)(this,"multiplier"),(0,r.f)(this,"nodes"),(0,r.i)(this,UT,t),Object.assign(this,t)}static hydrate(e){return e.map(e=>new t(e))}static async fetch(e){let i=e.options.things.vortexes.slice();["name","type","accessible","weight","multiplier","nodes"].forEach(function(t){VC(i,t)});let n={fields:i,venue:e.options.venue};try{return(await BC(e.options,"vortex",n)).map(e=>new t(e))}catch(t){return vy.error("Fetch Vortexes:",t),[]}}toJSON(){return(0,r.g)(this,UT)}};UT=new WeakMap,(0,r.a)(zT,"MappedinVortex");var VT=exports.MappedinVortex=zT;(0,n.a)();var jT,GT,HT,WT,XT=class t{constructor(t,e){(0,r.h)(this,jT,void 0),(0,r.h)(this,GT,void 0),(0,r.h)(this,HT,void 0),(0,r.h)(this,WT,{}),(0,r.f)(this,"defaultMap",""),(0,r.f)(this,"address",""),(0,r.f)(this,"city",""),(0,r.f)(this,"countrycode",""),(0,r.f)(this,"externalId",""),(0,r.f)(this,"id",""),(0,r.f)(this,"latitude"),(0,r.f)(this,"logo"),(0,r.f)(this,"longitude"),(0,r.f)(this,"name",""),(0,r.f)(this,"operationHours"),(0,r.f)(this,"postal",""),(0,r.f)(this,"slug",""),(0,r.f)(this,"state",""),(0,r.f)(this,"telephone",""),(0,r.f)(this,"tzid",""),(0,r.f)(this,"tzidOverride",""),(0,r.f)(this,"utcOffset",""),(0,r.f)(this,"website",""),(0,r.f)(this,"secureContentStorage",!1),(0,r.f)(this,"defaultLanguage"),(0,r.f)(this,"languages",[]),(0,r.f)(this,"topLocations",[]),(0,r.i)(this,GT,t),(0,r.i)(this,jT,e),Object.assign(this,e)}get metadata(){return rT.addPendingEvent(new mM({venue:this.slug})),(0,r.g)(this,HT)}set metadata(t){(0,r.i)(this,HT,t)}static hydrate(e,i){return new t(i,e)}static async fetch(e){let i={fields:e.options.things.venue,slug:e.options.venue,limit:1};try{let n=await BC(e.options,"venue",i);return new t(e,Array.isArray(n)?n[0]:n)}catch(t){return vy.error("Fetch Venue:",t),{}}}get isMultiBuilding(){if(null==(0,r.g)(this,WT).isMultiBuilding){let t=(0,r.g)(this,GT).maps,e=t.reduce((t,e)=>t.add(e.elevation),new Set),i=t.length!==e.size;(0,r.g)(this,WT).isMultiBuilding=i}return(0,r.g)(this,WT).isMultiBuilding}toJSON(){return(0,r.g)(this,jT)}};jT=new WeakMap,GT=new WeakMap,HT=new WeakMap,WT=new WeakMap,(0,r.a)(XT,"MappedinVenue");var YT=exports.MappedinVenue=XT;(0,n.a)();var ZT,JT=class t{constructor(t){(0,r.f)(this,"id",""),(0,r.h)(this,ZT,void 0),(0,r.i)(this,ZT,t),Object.assign(this,t)}static hydrate(e){return e.map(e=>new t(e))}static async fetch(e){let i={fields:e.options.things.themes.slice(),venue:e.options.venue};try{return(await BC(e.options,"apollo-theme",i)).map(e=>new t(e))}catch(t){return vy.error("Fetch Theme:",t),[]}}toJSON(){return(0,r.g)(this,ZT)}};ZT=new WeakMap,(0,r.a)(JT,"MappedinTheme");var KT=JT;(0,n.a)();var QT,$T=class t{constructor(t){(0,r.h)(this,QT,void 0),(0,r.f)(this,"polygons",[]),(0,r.i)(this,QT,t),Object.assign(this,t)}static hydrate(e){return new t(e)}static async fetch(e){try{let i=await FC({...e.options,secure:!1},"smart-labels/polygon-label-ranking",{venue:e.options.venue},!0);return new t(i)}catch(t){return vy.error("Fetch Rankings:",t),null}}toJSON(){return(0,r.g)(this,QT)}};QT=new WeakMap,(0,r.a)($T,"MappedinRankings");var tC=exports.MappedinRankings=$T;(0,n.a)(),(0,n.a)();var eC,iC,nC,rC=class t{constructor(t,e){(0,r.h)(this,eC,void 0),(0,r.h)(this,iC,void 0),(0,r.h)(this,nC,{}),(0,r.f)(this,"id",""),(0,r.f)(this,"type",""),(0,r.f)(this,"name",""),(0,r.f)(this,"description"),(0,r.f)(this,"image"),(0,r.f)(this,"startDate"),(0,r.f)(this,"endDate"),(0,r.f)(this,"showDate"),(0,r.i)(this,iC,e),(0,r.i)(this,eC,t),Object.assign(this,e)}location(){let t=(0,r.g)(this,nC).location;if(typeof t<"u")return t;let e,i=(0,r.g)(this,eC)._locationsById,n=(0,r.g)(this,iC).location;if(null!=n){let t=i[n];null!=t&&(e=t)}return(0,r.g)(this,nC).location=e,e}static hydrate(e,i){return e.map(e=>new t(i,e))}static async fetch(e){let i=e.options.things.events.slice();e.options.things.locations&&VC(i,"location");let n={fields:i,venue:e.options.venue,activeAtOrAfter:Date.now()};try{return(await BC(e.options,"event",n)).map(i=>new t(e,i))}catch(t){return vy.error("Fetch Events:",t),[]}}toJSON(){return(0,r.g)(this,iC)}};eC=new WeakMap,iC=new WeakMap,nC=new WeakMap,(0,r.a)(rC,"MappedinEvent");var oC=exports.MappedinEvent=rC;(0,n.a)();var aC,sC=class t{constructor(t){(0,r.h)(this,aC,void 0),(0,r.f)(this,"id",""),(0,r.f)(this,"name",""),(0,r.f)(this,"value",""),(0,r.i)(this,aC,t),Object.assign(this,t)}static hydrate(e){return e.map(e=>new t(e))}static async fetch(e){let i={fields:e.options.things.locationStates.slice(),venue:e.options.venue};try{return(await BC(e.options,"location-state",i)).map(e=>new t(e))}catch(t){return vy.error("Fetch Location States:",t),[]}}toJSON(){return(0,r.g)(this,aC)}};aC=new WeakMap,(0,r.a)(sC,"MappedinLocationState");var lC=exports.MappedinLocationState=sC;(0,n.a)();var hC,uC,cC,pC=class t{constructor(t,e){(0,r.h)(this,hC,void 0),(0,r.h)(this,uC,{}),(0,r.h)(this,cC,void 0),(0,r.f)(this,"id",""),(0,r.f)(this,"group",""),(0,r.f)(this,"name",""),(0,r.f)(this,"shortName",""),(0,r.f)(this,"elevation",0),(0,r.f)(this,"subtitle"),(0,r.f)(this,"scale",0),(0,r.f)(this,"layers"),(0,r.f)(this,"x_scale"),(0,r.f)(this,"perspectiveId"),(0,r.f)(this,"scene"),(0,r.f)(this,"width",0),(0,r.f)(this,"height",0),(0,r.f)(this,"georeference",[]),(0,r.f)(this,"_scale",0),(0,r.i)(this,hC,t),(0,r.i)(this,cC,e),Object.assign(this,e),this._scale=GC(this),this.scale=this.x_scale||1/this._scale}get polygons(){var t,e,i;return null!=(i=null==(e=null==(t=bA.instances.get((0,r.g)(this,hC)))?void 0:t.polygonsByMapId)?void 0:e.get(this.id))?i:[]}get locations(){var t,e,i;return null!=(i=null==(e=null==(t=bA.instances.get((0,r.g)(this,hC)))?void 0:t.locationsByMapId)?void 0:e.get(this.id))?i:[]}get nodes(){var t,e,i;return null!=(i=null==(e=null==(t=bA.instances.get((0,r.g)(this,hC)))?void 0:t.nodesByMapId)?void 0:e.get(this.id))?i:[]}get mapGroup(){let t=(0,r.g)(this,uC).mapGroup;if(typeof t<"u")return t;let e=this.group,i=e&&(0,r.g)(this,hC)._mapGroupsById[e]||null;return(0,r.g)(this,uC).mapGroup=i,i}createCoordinateByXY(t,e){return new PC({x:t,y:e,map:this,mappedin:(0,r.g)(this,hC)})}createCoordinate(t,e){return new PC({lat:t,lon:e,map:this,mappedin:(0,r.g)(this,hC)})}getNorth(){let t;try{let i=this.georeference[0],n=this.georeference[2],r=new py(i.target.x,i.target.y),o=new py(n.target.x,n.target.y);t=-((r.finalBearingTo(o)+0)*Math.PI/180-Math.atan2(n.control.y-i.control.y,n.control.x-i.control.x)-Math.PI/2)}catch(e){t=0,vy.warn(e),vy.warn("Couldn't georeference ".concat(this.name||this.shortName||this.id,". Probably not enough geocoordinates."))}return t}static hydrate(e,i){return e.map(e=>new t(i,e))}static async fetch(e){var i;let n=e.options.things.maps.slice();e.options.perspective&&VC(n,"perspectives"),e.options.things.mapGroups&&VC(n,"group"),VC(n,"elevation"),VC(n,"x_scale"),VC(n,"scale"),VC(n,"georeference");let o={fields:n,perspective:e.options.perspective,venue:e.options.venue};try{let s=await BC(e.options,"map",o),l=(0,r.a)(t=>{let e=a.layers.find(e=>e.id===t);e?e.visible=!0:a.layers.push({id:t,visible:!0})},"setVisibleLayer");for(let r=0,o=s.length;r<o;++r){var a=s[r];if(a){let t=a.perspective;null!=t&&(a.perspectiveId=t.id,n.indexOf("scene")>-1&&(a.scene=t.scene),t.layers?(a.layers.forEach(t=>{t.visible=!1}),t.layers.forEach(l)):a.layers.forEach(t=>{t.visible=!0})),delete a.perspective}if(e.options.preloadMapGeometry&&null!=(i=a.scene)&&i.polygons&&"string"==typeof a.scene.polygons){let t=await Fk()(a.scene.polygons);a.scene.polygons=await t.json()}s[r]=new t(e,a)}return s}catch(t){return vy.error("Fetch Maps:",t),[]}}toJSON(){return(0,r.g)(this,cC)}};hC=new WeakMap,uC=new WeakMap,cC=new WeakMap,(0,r.a)(pC,"MappedinMap");var dC=exports.MappedinMap=pC;(0,n.a)();var fC,gC,mC,vC,yC,_C,xC,bC,wC,EC,MC,SC,TC,CC,AC=class{constructor(t){(0,r.h)(this,fC),(0,r.h)(this,mC),(0,r.h)(this,xC),(0,r.h)(this,wC),(0,r.f)(this,"map"),(0,r.h)(this,yC,{}),(0,r.h)(this,_C,void 0),(0,r.h)(this,MC,void 0),(0,r.h)(this,SC,void 0),(0,r.h)(this,TC,void 0),(0,r.h)(this,CC,void 0);let{map:e,mappedin:i}=t;null!=t.lat&&null!=t.lon&&((0,r.i)(this,MC,t.lat),(0,r.i)(this,SC,t.lon)),null!=t.x&&null!=t.y&&((0,r.i)(this,TC,t.x),(0,r.i)(this,CC,t.y)),this.map=e,(0,r.i)(this,_C,i)}get x(){return(0,r.k)(this,mC,vC).call(this,"x")}get y(){return(0,r.k)(this,mC,vC).call(this,"y")}get lat(){return(0,r.k)(this,fC,gC).call(this,"lat")}get lon(){return(0,r.k)(this,fC,gC).call(this,"lon")}absoluteDistanceTo(t){return jC([t.lat,t.lon],[this.lat,this.lon])}get nearestNode(){let t=(0,r.g)(this,yC).nearestNode;if(typeof t<"u")return t;let e=bA.instances.get((0,r.g)(this,_C)).findNearestNodeOnMap(this.map.id,this);return(0,r.g)(this,yC).nearestNode=e,e}toJSON(){return{x:this.x,y:this.y,map:this.map,lat:this.lat,lon:this.lon}}};fC=new WeakSet,gC=(0,r.a)(function(t){if(typeof(0,r.g)(this,MC)<"u"&&typeof(0,r.g)(this,SC)<"u")return(0,r.g)(this,"lat"===t?MC:SC);if(typeof(0,r.g)(this,TC)<"u"&&typeof(0,r.g)(this,CC)<"u"){let[e,i]=(0,r.k)(this,wC,EC).call(this,(0,r.g)(this,TC),(0,r.g)(this,CC));return(0,r.i)(this,MC,e),(0,r.i)(this,SC,i),(0,r.g)(this,"lat"===t?MC:SC)}throw Error("MappedinCoordinate is missing x and y")},"#getLatLon"),mC=new WeakSet,vC=(0,r.a)(function(t){if((0,r.g)(this,TC)&&(0,r.g)(this,CC))return(0,r.g)(this,"x"===t?TC:CC);if(null!=(0,r.g)(this,MC)&&null!=(0,r.g)(this,SC)){let[e,i]=(0,r.k)(this,xC,bC).call(this,(0,r.g)(this,MC),(0,r.g)(this,SC));return(0,r.i)(this,TC,e),(0,r.i)(this,CC,i),(0,r.g)(this,"x"===t?TC:CC)}throw Error("MappedinCoordinate is missing lat and lon")},"#getXY"),yC=new WeakMap,_C=new WeakMap,xC=new WeakSet,bC=(0,r.a)(function(t,e){let i=this.map.georeference[0],n=new py(i.target.x,i.target.y),r=new py(t,e),o=n.distanceTo(r),a=(n.finalBearingTo(r)+360)%360*Math.PI/180||0,s=o*(1/this.map.scale),l=a+this.map.getNorth(),h=Math.sin(l)*s,u=Math.cos(l)*s;return[i.control.x+h,i.control.y-u]},"#latLonToXY"),wC=new WeakSet,EC=(0,r.a)(function(t,e){let i,n=this.map.georeference[0],r=new py(n.target.x,n.target.y),o=t-n.control.x,a=n.control.y-e,s=Math.atan2(o,a);i=0===o&&0===a?0:0===o?a:o/Math.sin(s);let l=s-this.map.getNorth(),h=i/this.map._scale,u=r.destinationPoint(h,180*l/Math.PI);return[u.lat,u.lon]},"#xyToLatLon"),MC=new WeakMap,SC=new WeakMap,TC=new WeakMap,CC=new WeakMap,(0,r.a)(AC,"MappedinCoordinate");var PC=exports.MappedinCoordinate=AC;(0,n.a)();var IC,LC,OC,NC=class t{constructor(t,e){(0,r.h)(this,IC,void 0),(0,r.h)(this,LC,void 0),(0,r.h)(this,OC,{}),(0,r.f)(this,"id",""),(0,r.f)(this,"name",""),(0,r.i)(this,LC,e),(0,r.i)(this,IC,t),Object.assign(this,e)}get maps(){let t=(0,r.g)(this,OC).maps;if(typeof t<"u")return t;let e=[],{maps:i}=(0,r.g)(this,IC),{id:n}=(0,r.g)(this,LC);for(let r=0,o=i.length;r<o;++r){let t=i[r];t.group===n&&e.push(t)}return(0,r.g)(this,OC).maps=e,e}static hydrate(e,i){return e.map(e=>new t(i,e))}static async fetch(e){let i={fields:e.options.things.mapGroups.slice(),venue:e.options.venue};try{return(await BC(e.options,"map-group",i)).map(i=>new t(e,i))}catch(t){return vy.error("Fetch Map Groups:",t),[]}}toJSON(){return(0,r.g)(this,LC)}};IC=new WeakMap,LC=new WeakMap,OC=new WeakMap,(0,r.a)(NC,"MappedinMapGroup");var qC=exports.MappedinMapGroup=NC;function RC(t){return/^[\da-f]{24}$/i.test(t)}function DC(t,e=!1){let i="";if(null!=t){let n="?",r=e?Object.keys(t).filter(t=>!["slug","venue"].includes(t)):Object.keys(t);for(let e=0,o=r.length;e<o;++e){let o=r[e],a=t[o];null!=a&&(i+="".concat(n+encodeURIComponent(o),"=").concat(encodeURIComponent(a)),n="&")}}return i}function kC(t,e,i,n=!1){var r,o;return n?"".concat(t.supplementaryUrl).concat(e,"?venue=").concat(i.venue||i.slug):null!=(r=t.baseUrl)&&r.includes("gateway")?"".concat(t.baseUrl).concat(e,"/").concat(i.venue||i.slug).concat(DC(i,null==(o=t.baseUrl)?void 0:o.includes("gateway"))):t.baseUrl+e+DC(i)}async function BC(t,e,i,n=!1){return FC(t,e,i,n,!0)}async function FC(t,e,i,n=!1,r=!1){let o=kC(t,e,i,n),a=await zC(t,o,n);if(!r&&Array.isArray(a)){if(1===a.length)return a[0];throw new Error("Invalid response object")}return a}function UC(t,e,i=!1){let n={language:t.language,clientId:t.clientId,clientSecret:t.clientSecret};i&&delete n.language,n.language&&(e+="&lang=".concat(encodeURIComponent(n.language)));let{headers:r}=t;r["Content-Type"]=r["Content-Type"]||"text/json",t.accessToken?r.Authorization="Bearer ".concat(t.accessToken):t.noAuth||t.clientId&&t.clientSecret&&(r["x-mappedin-key"]=btoa(t.clientId),r["x-mappedin-secret"]=btoa(t.clientSecret)),n.language&&(r["Accept-Language"]=n.language);let o={method:"GET",headers:r};return t.secure&&(e+="&withcdntoken"),{req:o,url:e}}async function zC(t,e,i=!1){let n=UC(t,e,i),r=await Fk()(n.url,n.req);if(!r.ok)throw new Error("".concat(r.status," ").concat(r.statusText));return r.json()}function VC(t,e){t.indexOf(e)<0&&t.push(e)}function jC([t,e],[i,n]){let r=new py(t,e),o=new py(i,n);return r.distanceTo(o)}function GC(t){if(t.scale||t.x_scale)return 1/(t.scale||t.x_scale);let e;try{let n=t.georeference[0],r=t.georeference[2],o=new py(n.target.x,n.target.y),a=new py(r.target.x,r.target.y),s=o.distanceTo(a),l=n.control.x-r.control.x,h=n.control.y-r.control.y;e=Math.sqrt(l*l+h*h)/s}catch(i){e=1,vy.warn(i),vy.warn("Couldn't georeference ".concat(t.name||t.shortName||t.id,". Probably not enough geocoordinates."))}return e}function HC(t){var e;return t instanceof vT?t.entrances.map(t=>t.id):t instanceof AT?(null==(e=t.nodes)?void 0:e.map(t=>t.id))||[]:[t.id]}async function WC(t){let e={},{maps:i,images:n,scenes:r,polygons:o}=t;if(null!=n)try{let i=Object.keys(n).map(t=>fetch("data:image/png;base64,".concat(n[t])).then(t=>t.blob()).then(i=>{e[t]=i}).catch(t=>{vy.error(t)}));await Promise.all(i)}catch(t){vy.error(t)}return i.forEach(t=>{var i;(null!=(i=t.scene)&&i.polygons||r[t.id])&&(null!=r&&r[t.id]&&(t.scene||(t.scene={}),Object.defineProperty(t.scene,"polygons",{get:()=>r[t.id]})),null!=n&&(t.scene.images=t.scene.images.map(({filename:t})=>({filename:t,url:e[t]})),t.scene.polygons.forEach(t=>{var i,n;if(null!=(i=null==t?void 0:t.image)&&i.url&&null!=(n=null==t?void 0:t.image)&&n.url){let i=t.image.url.split("/"),n=e[i[i.length-1]];n&&(t.image.url=n)}})))}),null!=n&&o.forEach(t=>{var i;if(null!=(i=null==t?void 0:t.image)&&i.url){let i=t.image.url.split("/"),n=e[i[i.length-1]];n&&(t.image.url=n)}}),null!=t.images&&delete t.images,null!=t.scenes&&delete t.scenes,t}function XC(t,e,i){let n;return function(...o){let a=this,s=(0,r.a)(function(){n=null,i||t.apply(a,o)},"later"),l=i&&!n;clearTimeout(n),n=setTimeout(s,e),l&&t.apply(a,o)}}function YC(t,e,i,n=0){if(!t||t<=0)return 0;let r=0;n>=0&&n<=1&&(r=n/10);let o=1+(i-t)/(i-e)+r;return Math.max(1+1e-5,Math.min(2-1e-5,o))}function ZC(t){let e=+this._x.call(null,t),i=+this._y.call(null,t);return JC(this.cover(e,i),e,i,t)}function JC(t,e,i,n){if(isNaN(e)||isNaN(i))return t;var r,o,a,s,l,h,u,c,p,d=t._root,f={data:n},g=t._x0,m=t._y0,v=t._x1,y=t._y1;if(!d)return t._root=f,t;for(;d.length;)if((h=e>=(o=(g+v)/2))?g=o:v=o,(u=i>=(a=(m+y)/2))?m=a:y=a,r=d,!(d=d[c=u<<1|h]))return r[c]=f,t;if(s=+t._x.call(null,d.data),l=+t._y.call(null,d.data),e===s&&i===l)return f.next=d,r?r[c]=f:t._root=f,t;do{r=r?r[c]=new Array(4):t._root=new Array(4),(h=e>=(o=(g+v)/2))?g=o:v=o,(u=i>=(a=(m+y)/2))?m=a:y=a}while((c=u<<1|h)==(p=(l>=a)<<1|s>=o));return r[p]=d,r[c]=f,t}function KC(t){var e,i,n,r,o=t.length,a=new Array(o),s=new Array(o),l=1/0,h=1/0,u=-1/0,c=-1/0;for(i=0;i<o;++i)isNaN(n=+this._x.call(null,e=t[i]))||isNaN(r=+this._y.call(null,e))||(a[i]=n,s[i]=r,n<l&&(l=n),n>u&&(u=n),r<h&&(h=r),r>c&&(c=r));if(l>u||h>c)return this;for(this.cover(l,h).cover(u,c),i=0;i<o;++i)JC(this,a[i],s[i],t[i]);return this}function QC(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var i=this._x0,n=this._y0,r=this._x1,o=this._y1;if(isNaN(i))r=(i=Math.floor(t))+1,o=(n=Math.floor(e))+1;else{for(var a,s,l=r-i||1,h=this._root;i>t||t>=r||n>e||e>=o;)switch(s=(e<n)<<1|t<i,a=new Array(4),a[s]=h,h=a,l*=2,s){case 0:r=i+l,o=n+l;break;case 1:i=r-l,o=n+l;break;case 2:r=i+l,n=o-l;break;case 3:i=r-l,n=o-l}this._root&&this._root.length&&(this._root=h)}return this._x0=i,this._y0=n,this._x1=r,this._y1=o,this}function $C(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t}function tA(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function eA(t,e,i,n,r){this.node=t,this.x0=e,this.y0=i,this.x1=n,this.y1=r}function iA(t,e,i){var n,r,o,a,s,l,h,u=this._x0,c=this._y0,p=this._x1,d=this._y1,f=[],g=this._root;for(g&&f.push(new eA(g,u,c,p,d)),null==i?i=1/0:(u=t-i,c=e-i,p=t+i,d=e+i,i*=i);l=f.pop();)if(!(!(g=l.node)||(r=l.x0)>p||(o=l.y0)>d||(a=l.x1)<u||(s=l.y1)<c))if(g.length){var m=(r+a)/2,v=(o+s)/2;f.push(new eA(g[3],m,v,a,s),new eA(g[2],r,v,m,s),new eA(g[1],m,o,a,v),new eA(g[0],r,o,m,v)),(h=(e>=v)<<1|t>=m)&&(l=f[f.length-1],f[f.length-1]=f[f.length-1-h],f[f.length-1-h]=l)}else{var y=t-+this._x.call(null,g.data),_=e-+this._y.call(null,g.data),x=y*y+_*_;if(x<i){var b=Math.sqrt(i=x);u=t-b,c=e-b,p=t+b,d=e+b,n=g.data}}return n}function nA(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,i,n,r,o,a,s,l,h,u,c,p,d=this._root,f=this._x0,g=this._y0,m=this._x1,v=this._y1;if(!d)return this;if(d.length)for(;;){if((h=o>=(s=(f+m)/2))?f=s:m=s,(u=a>=(l=(g+v)/2))?g=l:v=l,e=d,!(d=d[c=u<<1|h]))return this;if(!d.length)break;(e[c+1&3]||e[c+2&3]||e[c+3&3])&&(i=e,p=c)}for(;d.data!==t;)if(n=d,!(d=d.next))return this;return(r=d.next)&&delete d.next,n?(r?n.next=r:delete n.next,this):e?(r?e[c]=r:delete e[c],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(i?i[p]=d:this._root=d),this):(this._root=r,this)}function rA(t){for(var e=0,i=t.length;e<i;++e)this.remove(t[e]);return this}function oA(){return this._root}function aA(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t}function sA(t){var e,i,n,r,o,a,s=[],l=this._root;for(l&&s.push(new eA(l,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(l=e.node,n=e.x0,r=e.y0,o=e.x1,a=e.y1)&&l.length){var h=(n+o)/2,u=(r+a)/2;(i=l[3])&&s.push(new eA(i,h,u,o,a)),(i=l[2])&&s.push(new eA(i,n,u,h,a)),(i=l[1])&&s.push(new eA(i,h,r,o,u)),(i=l[0])&&s.push(new eA(i,n,r,h,u))}return this}function lA(t){var e,i=[],n=[];for(this._root&&i.push(new eA(this._root,this._x0,this._y0,this._x1,this._y1));e=i.pop();){var r=e.node;if(r.length){var o,a=e.x0,s=e.y0,l=e.x1,h=e.y1,u=(a+l)/2,c=(s+h)/2;(o=r[0])&&i.push(new eA(o,a,s,u,c)),(o=r[1])&&i.push(new eA(o,u,s,l,c)),(o=r[2])&&i.push(new eA(o,a,c,u,h)),(o=r[3])&&i.push(new eA(o,u,c,l,h))}n.push(e)}for(;e=n.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this}function hA(t){return t[0]}function uA(t){return arguments.length?(this._x=t,this):this._x}function cA(t){return t[1]}function pA(t){return arguments.length?(this._y=t,this):this._y}function dA(t,e,i){var n=new fA(null==e?hA:e,null==i?cA:i,NaN,NaN,NaN,NaN);return null==t?n:n.addAll(t)}function fA(t,e,i,n,r,o){this._x=t,this._y=e,this._x0=i,this._y0=n,this._x1=r,this._y1=o,this._root=void 0}function gA(t){for(var e={data:t.data},i=e;t=t.next;)i=i.next={data:t.data};return e}(0,n.a)(),(0,r.a)(RC,"isGatewayKey"),(0,r.a)(DC,"stringifyQuery"),(0,r.a)(kC,"buildUrl"),(0,r.a)(BC,"getArray"),(0,r.a)(FC,"getObject"),(0,r.a)(UC,"constructParamsForRequest"),(0,r.a)(zC,"generateAPIRequest"),(0,r.a)(VC,"addToSet"),(0,r.a)(jC,"getDistanceBetweenLatLon"),(0,r.a)(GC,"getMapScale"),(0,r.a)(HC,"getNodesForNavigatable"),(0,r.a)(WC,"populateBundledImagesAsBlobs"),(0,r.a)(XC,"debounce"),(0,r.a)(YC,"normalizeCategoryRank"),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,r.a)(ZC,"default"),(0,r.a)(JC,"add"),(0,r.a)(KC,"addAll"),(0,n.a)(),(0,r.a)(QC,"default"),(0,n.a)(),(0,r.a)($C,"default"),(0,n.a)(),(0,r.a)(tA,"default"),(0,n.a)(),(0,n.a)(),(0,r.a)(eA,"default"),(0,r.a)(iA,"default"),(0,n.a)(),(0,r.a)(nA,"default"),(0,r.a)(rA,"removeAll"),(0,n.a)(),(0,r.a)(oA,"default"),(0,n.a)(),(0,r.a)(aA,"default"),(0,n.a)(),(0,r.a)(sA,"default"),(0,n.a)(),(0,r.a)(lA,"default"),(0,n.a)(),(0,r.a)(hA,"defaultX"),(0,r.a)(uA,"default"),(0,n.a)(),(0,r.a)(cA,"defaultY"),(0,r.a)(pA,"default"),(0,r.a)(dA,"quadtree"),(0,r.a)(fA,"Quadtree"),(0,r.a)(gA,"leaf_copy");var mA=dA.prototype=fA.prototype;mA.copy=function(){var t,e,i=new fA(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return i;if(!n.length)return i._root=gA(n),i;for(t=[{source:n,target:i._root=new Array(4)}];n=t.pop();)for(var r=0;r<4;++r)(e=n.source[r])&&(e.length?t.push({source:e,target:n.target[r]=new Array(4)}):n.target[r]=gA(e));return i},mA.add=ZC,mA.addAll=KC,mA.cover=QC,mA.data=$C,mA.extent=tA,mA.find=iA,mA.remove=nA,mA.removeAll=rA,mA.root=oA,mA.size=aA,mA.visit=sA,mA.visitAfter=lA,mA.x=uA,mA.y=pA;var vA,yA,_A=class t{constructor(t){(0,r.h)(this,vA,void 0),(0,r.f)(this,"categories"),(0,r.f)(this,"locations"),(0,r.f)(this,"vortexes"),(0,r.f)(this,"maps"),(0,r.f)(this,"nodes"),(0,r.f)(this,"polygons"),(0,r.f)(this,"events"),(0,r.f)(this,"mapGroups"),(0,r.f)(this,"locationStates"),(0,r.f)(this,"rankings"),(0,r.f)(this,"languages",{}),(0,r.h)(this,yA,{}),(0,r.i)(this,vA,t)}get polygonsByMapId(){if((0,r.g)(this,yA).polygonsByMapId)return(0,r.g)(this,yA).polygonsByMapId;let t,e={};for(let n=0,o=(0,r.g)(this,vA).polygons.length;n<o;++n)e[(t=(0,r.g)(this,vA).polygons[n]).map.id]||(e[t.map.id]=[]),e[t.map.id].push(t);let i=Object.entries(e).reduce((t,[e,i])=>(t.set(e,i),t),new Map);return(0,r.g)(this,yA).polygonsByMapId=i,(0,r.g)(this,yA).polygonsByMapId}get nodesByMapId(){if((0,r.g)(this,yA).nodesByMapId)return(0,r.g)(this,yA).nodesByMapId;let t,e={};for(let n=0,o=(0,r.g)(this,vA).nodes.length;n<o;++n)e[(t=(0,r.g)(this,vA).nodes[n]).map.id]||(e[t.map.id]=[]),e[t.map.id].push(t);let i=Object.entries(e).reduce((t,[e,i])=>(t.set(e,i),t),new Map);return(0,r.g)(this,yA).nodesByMapId=i,(0,r.g)(this,yA).nodesByMapId}findNearestNodeOnMap(t,e){var i;if((0,r.g)(this,yA).nodeTreesByMap||((0,r.g)(this,yA).nodeTreesByMap=new Map),!(0,r.g)(this,yA).nodeTreesByMap.has(t)){let e=null!=(i=this.nodesByMapId.get(t))?i:[],n=dA();n.x(t=>t.x),n.y(t=>t.y),n.addAll(e),(0,r.g)(this,yA).nodeTreesByMap.set(t,n)}return(0,r.g)(this,yA).nodeTreesByMap.get(t).find(e.x,e.y)}get locationsByMapId(){if((0,r.g)(this,yA).locationsByMapId)return(0,r.g)(this,yA).locationsByMapId;let t,e={};for(let n=0,o=(0,r.g)(this,vA).locations.length;n<o;++n){t=(0,r.g)(this,vA).locations[n];for(let i=0,n=t.polygons.length;i<n;++i)e[t.polygons[i].map.id]||(e[t.polygons[i].map.id]=[]),e[t.polygons[i].map.id].push(t)}let i=Object.entries(e).reduce((t,[e,i])=>(t.set(e,i),t),new Map);return(0,r.g)(this,yA).locationsByMapId=i,(0,r.g)(this,yA).locationsByMapId}static create(e){return t.instances.has(e)||t.instances.set(e,new t(e)),t.instances.get(e)}static clear(){t.instances.clear()}static clearInstance(e){t.instances.has(e)&&t.instances.delete(e)}};vA=new WeakMap,yA=new WeakMap,(0,r.a)(_A,"MappedinCache"),(0,r.f)(_A,"instances",new Map);var xA=_A,bA=xA,wA=exports.MappedinCollectionType=(t=>(t.CATEGORY="categories",t.EVENT="events",t.LOCATION="locations",t.MAPGROUP="mapGroups",t.MAP="maps",t.NODE="nodes",t.POLYGON="polygons",t.VORTEX="vortexes",t))(wA||{}),EA={categories:NT,locations:AT,vortexes:VT,maps:dC,nodes:cT,polygons:vT,venue:YT,events:oC,mapGroups:qC,themes:KT,locationStates:lC,rankings:tC};(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)();var MA=6371008.8,SA={centimeters:100*MA,centimetres:100*MA,degrees:MA/111325,feet:3.28084*MA,inches:39.37*MA,kilometers:MA/1e3,kilometres:MA/1e3,meters:MA,metres:MA,miles:MA/1609.344,millimeters:1e3*MA,millimetres:1e3*MA,nauticalmiles:MA/1852,radians:1,yards:1.0936*MA},TA={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/MA,yards:1.0936133};function CA(t,e,i){void 0===i&&(i={});var n={type:"Feature"};return(0===i.id||i.id)&&(n.id=i.id),i.bbox&&(n.bbox=i.bbox),n.properties=e||{},n.geometry=t,n}function AA(t,e,i){if(void 0===i&&(i={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!BA(t[0])||!BA(t[1]))throw new Error("coordinates must contain numbers");return CA({type:"Point",coordinates:t},e,i)}function PA(t,e,i){void 0===i&&(i={});for(var n=0,r=t;n<r.length;n++){var o=r[n];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return CA({type:"Polygon",coordinates:t},e,i)}function IA(t,e,i){if(void 0===i&&(i={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return CA({type:"LineString",coordinates:t},e,i)}function LA(t,e){void 0===e&&(e={});var i={type:"FeatureCollection"};return e.id&&(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.features=t,i}function OA(t,e,i){return void 0===i&&(i={}),CA({type:"MultiLineString",coordinates:t},e,i)}function NA(t,e,i){return void 0===i&&(i={}),CA({type:"MultiPoint",coordinates:t},e,i)}function qA(t,e){void 0===e&&(e="kilometers");var i=SA[e];if(!i)throw new Error(e+" units is invalid");return t*i}function RA(t,e){void 0===e&&(e="kilometers");var i=SA[e];if(!i)throw new Error(e+" units is invalid");return t/i}function DA(t){return t%(2*Math.PI)*180/Math.PI}function kA(t){return t%360*Math.PI/180}function BA(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function FA(t,e,i){if(null!==t)for(var n,r,o,a,s,l,h,u,c=0,p=0,d=t.type,f="FeatureCollection"===d,g="Feature"===d,m=f?t.features.length:1,v=0;v<m;v++){s=(u=!!(h=f?t.features[v].geometry:g?t.geometry:t)&&"GeometryCollection"===h.type)?h.geometries.length:1;for(var y=0;y<s;y++){var _=0,x=0;if(null!==(a=u?h.geometries[y]:h)){l=a.coordinates;var b=a.type;switch(c=!i||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,v,_,x))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(!1===e(l[n],p,v,_,x))return!1;p++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(r=0;r<l[n].length-c;r++){if(!1===e(l[n][r],p,v,_,x))return!1;p++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for(x=0,r=0;r<l[n].length;r++){for(o=0;o<l[n][r].length-c;o++){if(!1===e(l[n][r][o],p,v,_,x))return!1;p++}x++}_++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===FA(a.geometries[n],e,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function UA(t,e,i,n){var r=i;return FA(t,function(t,n,o,a,s){r=0===n&&void 0===i?t:e(r,t,n,o,a,s)},n),r}function zA(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var i=0;i<t.features.length&&!1!==e(t.features[i],i);i++);}function VA(t,e){var i,n,r,o,a,s,l,h,u,c,p=0,d="FeatureCollection"===t.type,f="Feature"===t.type,g=d?t.features.length:1;for(i=0;i<g;i++){for(s=d?t.features[i].geometry:f?t.geometry:t,h=d?t.features[i].properties:f?t.properties:{},u=d?t.features[i].bbox:f?t.bbox:void 0,c=d?t.features[i].id:f?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,r=0;r<a;r++)if(null!==(o=l?s.geometries[r]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,h,u,c))return!1;break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(!1===e(o.geometries[n],p,h,u,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,h,u,c))return!1;p++}}function jA(t,e){VA(t,function(t,i,n,r,o){var a,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==e(CA(t,n,{bbox:r,id:o}),i,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++){var h=t.coordinates[l];if(!1===e(CA({type:a,coordinates:h},n),i,l))return!1}})}function GA(t,e){jA(t,function(t,i,n){var r=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var a,s=0,l=0,h=0;if(!1===FA(t,function(o,u,c,p,d){if(void 0===a||i>s||p>l||d>h)return a=o,s=i,l=p,h=d,void(r=0);var f=IA([a,o],t.properties);if(!1===e(f,i,n,d,r))return!1;r++,a=o}))return!1}}})}function HA(t,e,i){var n=i,r=!1;return GA(t,function(t,o,a,s,l){n=!1===r&&void 0===i?t:e(n,t,o,a,s,l),r=!0}),n}function WA(t){var e=[1/0,1/0,-1/0,-1/0];return FA(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}(0,r.a)(CA,"feature"),(0,r.a)(AA,"point"),(0,r.a)(PA,"polygon"),(0,r.a)(IA,"lineString"),(0,r.a)(LA,"featureCollection"),(0,r.a)(OA,"multiLineString"),(0,r.a)(NA,"multiPoint"),(0,r.a)(qA,"radiansToLength"),(0,r.a)(RA,"lengthToRadians"),(0,r.a)(DA,"radiansToDegrees"),(0,r.a)(kA,"degreesToRadians"),(0,r.a)(BA,"isNumber"),(0,r.a)(FA,"coordEach"),(0,r.a)(UA,"coordReduce"),(0,r.a)(zA,"featureEach"),(0,r.a)(VA,"geomEach"),(0,r.a)(jA,"flattenEach"),(0,r.a)(GA,"segmentEach"),(0,r.a)(HA,"segmentReduce"),(0,r.a)(WA,"bbox"),WA.default=WA;var XA=WA;function YA(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ZA(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function JA(t,e,i){if(!t)throw new Error("No feature passed");if(!i)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+i+": must be a "+e+", given "+t.geometry.type)}function KA(t){return"Feature"===t.type?t.geometry:t}function QA(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,r.a)(YA,"getCoord"),(0,r.a)(ZA,"getCoords"),(0,r.a)(JA,"featureOf"),(0,r.a)(KA,"getGeom"),(0,r.a)(QA,"getType");var $A=(0,r.e)(rt(),1);(0,n.a)();var tP=(0,r.e)(ut(),1);function eP(t,e,i){if(void 0===i&&(i={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var n=YA(t),r=KA(e),o=r.type,a=e.bbox,s=r.coordinates;if(a&&!1===nP(n,a))return!1;"Polygon"===o&&(s=[s]);for(var l=!1,h=0;h<s.length&&!l;h++)if(iP(n,s[h][0],i.ignoreBoundary)){for(var u=!1,c=1;c<s[h].length&&!u;)iP(n,s[h][c],!i.ignoreBoundary)&&(u=!0),c++;u||(l=!0)}return l}function iP(t,e,i){var n=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var r=0,o=e.length-1;r<e.length;o=r++){var a=e[r][0],s=e[r][1],l=e[o][0],h=e[o][1];if(t[1]*(a-l)+s*(l-t[0])+h*(t[0]-a)==0&&(a-t[0])*(l-t[0])<=0&&(s-t[1])*(h-t[1])<=0)return!i;s>t[1]!=h>t[1]&&t[0]<(l-a)*(t[1]-s)/(h-s)+a&&(n=!n)}return n}function nP(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}function rP(t,e,i){void 0===i&&(i={});var n=YA(t),r=YA(e),o=kA(r[1]-n[1]),a=kA(r[0]-n[0]),s=kA(n[1]),l=kA(r[1]),h=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(s)*Math.cos(l);return qA(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),i.units)}(0,n.a)(),(0,n.a)(),(0,r.a)(eP,"booleanPointInPolygon"),(0,r.a)(iP,"inRing"),(0,r.a)(nP,"inBBox"),(0,n.a)(),(0,n.a)(),(0,r.a)(rP,"distance");var oP=rP;(0,n.a)();var aP=function(){function t(t,e,i){this.a=t,this.b=e,this.c=i;var n,r,o=e.x-t.x,a=e.y-t.y,s=i.x-t.x,l=i.y-t.y,h=o*(t.x+e.x)+a*(t.y+e.y),u=s*(t.x+i.x)+l*(t.y+i.y),c=2*(o*(i.y-e.y)-a*(i.x-e.x));this.x=(l*h-a*u)/c,this.y=(o*u-s*h)/c,n=this.x-t.x,r=this.y-t.y,this.r=n*n+r*r}return(0,r.a)(t,"Triangle"),t}();(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)();var sP=new ArrayBuffer(16),lP=new Float64Array(sP),hP=new Uint32Array(sP);(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)();var uP=(0,r.e)(pt(),1);(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)();var cP=function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var i=this.points[e],n=this.points[e+1];this.centers.push({x:(i.x+n.x)/2,y:(i.y+n.y)/2,z:(i.z+n.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){var r=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,a=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+a)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return(0,r.a)(t,"Spline"),t.prototype.cacheSteps=function(t){var e=[],i=this.pos(0);e.push(0);for(var n=0;n<this.duration;n+=10){var r=this.pos(n);Math.sqrt((r.x-i.x)*(r.x-i.x)+(r.y-i.y)*(r.y-i.y)+(r.z-i.z)*(r.z-i.z))>t&&(e.push(n),i=r)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),i=this.pos(t-10);return{angle:180*Math.atan2(e.y-i.y,e.x-i.x)/3.14,speed:Math.sqrt((i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y)+(i.z-e.z)*(i.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var i=e/this.duration;if(i>=1)return this.points[this.length-1];var n=Math.floor((this.points.length-1)*i);return pP((this.length-1)*i-n,this.points[n],this.controls[n][1],this.controls[n+1][0],this.points[n+1])},t}();function pP(t,e,i,n,r){var o=dP(t);return{x:r.x*o[0]+n.x*o[1]+i.x*o[2]+e.x*o[3],y:r.y*o[0]+n.y*o[1]+i.y*o[2]+e.y*o[3],z:r.z*o[0]+n.z*o[1]+i.z*o[2]+e.z*o[3]}}function dP(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}function fP(t,e){void 0===e&&(e={});var i=Number(t[0]),n=Number(t[1]),r=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[i,n];return PA([[a,[r,n],[r,o],[i,o],a]],e.properties,{bbox:t,id:e.id})}function gP(t){return fP(XA(t))}(0,r.a)(pP,"bezier"),(0,r.a)(dP,"B"),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,r.a)(fP,"bboxPolygon"),(0,r.a)(gP,"envelope");var mP=gP;function vP(t,e,i,n){void 0===n&&(n={});var r=YA(t),o=kA(r[0]),a=kA(r[1]),s=kA(i),l=RA(e,n.units),h=Math.asin(Math.sin(a)*Math.cos(l)+Math.cos(a)*Math.sin(l)*Math.cos(s));return AA([DA(o+Math.atan2(Math.sin(s)*Math.sin(l)*Math.cos(a),Math.cos(l)-Math.sin(a)*Math.sin(h))),DA(h)],n.properties)}function yP(t,e,i){if(void 0===i&&(i={}),!0===i.final)return _P(t,e);var n=YA(t),r=YA(e),o=kA(n[0]),a=kA(r[0]),s=kA(n[1]),l=kA(r[1]),h=Math.sin(a-o)*Math.cos(l),u=Math.cos(s)*Math.sin(l)-Math.sin(s)*Math.cos(l)*Math.cos(a-o);return DA(Math.atan2(h,u))}function _P(t,e){var i=yP(e,t);return(i+180)%360}function xP(t,e){void 0===e&&(e={});var i=XA(t);return AA([(i[0]+i[2])/2,(i[1]+i[3])/2],e.properties,e)}(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,r.a)(vP,"destination"),(0,n.a)(),(0,n.a)(),(0,r.a)(yP,"bearing"),(0,r.a)(_P,"calculateFinalBearing"),(0,n.a)(),(0,r.a)(xP,"center");var bP=xP;(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)();var wP=(0,r.e)((0,i.b)(),1);function EP(t){if(!t)throw new Error("geojson is required");var e=[];return jA(t,function(t){MP(t,e)}),LA(e)}function MP(t,e){var i=[],n=t.geometry;if(null!==n){switch(n.type){case"Polygon":i=ZA(n);break;case"LineString":i=[ZA(n)]}i.forEach(function(i){SP(i,t.properties).forEach(function(t){t.id=e.length,e.push(t)})})}}function SP(t,e){var i=[];return t.reduce(function(t,n){var r=IA([t,n],e);return r.bbox=TP(t,n),i.push(r),n}),i}function TP(t,e){var i=t[0],n=t[1],r=e[0],o=e[1];return[i<r?i:r,n<o?n:o,i>r?i:r,n>o?n:o]}(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,r.a)(EP,"lineSegment"),(0,r.a)(MP,"lineSegmentFeature"),(0,r.a)(SP,"createSegments"),(0,r.a)(TP,"bbox");var CP=EP,AP=(0,r.e)(vt(),1);function PP(t,e){var i={},n=[];if("LineString"===t.type&&(t=CA(t)),"LineString"===e.type&&(e=CA(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var r=IP(t,e);return r&&n.push(r),LA(n)}var o=(0,AP.default)();return o.load(CP(e)),zA(CP(t),function(t){zA(o.search(t),function(e){var r=IP(t,e);if(r){var o=ZA(r).join(",");i[o]||(i[o]=!0,n.push(r))}})}),LA(n)}function IP(t,e){var i=ZA(t),n=ZA(e);if(2!==i.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==n.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var r=i[0][0],o=i[0][1],a=i[1][0],s=i[1][1],l=n[0][0],h=n[0][1],u=n[1][0],c=n[1][1],p=(c-h)*(a-r)-(u-l)*(s-o);if(0===p)return null;var d=((u-l)*(o-h)-(c-h)*(r-l))/p,f=((a-r)*(o-h)-(s-o)*(r-l))/p;return d>=0&&d<=1&&f>=0&&f<=1?AA([r+d*(a-r),o+d*(s-o)]):null}(0,r.a)(PP,"lineIntersect"),(0,r.a)(IP,"intersects");var LP=PP;function OP(t,e,i){void 0===i&&(i={});var n=AA([1/0,1/0],{dist:1/0}),r=0;return jA(t,function(t){for(var o=ZA(t),a=0;a<o.length-1;a++){var s=AA(o[a]);s.properties.dist=oP(e,s,i);var l=AA(o[a+1]);l.properties.dist=oP(e,l,i);var h=oP(s,l,i),u=Math.max(s.properties.dist,l.properties.dist),c=yP(s,l),p=vP(e,u,c+90,i),d=vP(e,u,c-90,i),f=LP(IA([p.geometry.coordinates,d.geometry.coordinates]),IA([s.geometry.coordinates,l.geometry.coordinates])),g=null;f.features.length>0&&((g=f.features[0]).properties.dist=oP(e,g,i),g.properties.location=r+oP(s,g,i)),s.properties.dist<n.properties.dist&&((n=s).properties.index=a,n.properties.location=r),l.properties.dist<n.properties.dist&&((n=l).properties.index=a+1,n.properties.location=r+h),g&&g.properties.dist<n.properties.dist&&((n=g).properties.index=a),r+=h}}),n}(0,r.a)(OP,"nearestPointOnLine");var NP=OP;(0,n.a)(),(0,n.a)(),(0,n.a)();var qP=(0,r.e)(rt(),1);function RP(t,e){return void 0===e&&(e={}),HA(t,function(t,i){var n=i.geometry.coordinates;return t+oP(n[0],n[1],e)},0)}function DP(t,e,i){var n=ZA(i);if("LineString"!==QA(i))throw new Error("line must be a LineString");for(var r,o=NP(i,t),a=NP(i,e),s=[(r=o.properties.index<=a.properties.index?[o,a]:[a,o])[0].geometry.coordinates],l=r[0].properties.index+1;l<r[1].properties.index+1;l++)s.push(n[l]);return s.push(r[1].geometry.coordinates),IA(s,i.properties)}(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,r.a)(RP,"length"),(0,n.a)(),(0,r.a)(DP,"lineSlice");var kP=DP;function BP(t,e,i){void 0===i&&(i={});for(var n=YA(t),r=ZA(e),o=0;o<r.length-1;o++){var a=!1;if(i.ignoreEndVertices&&(0===o&&(a="start"),o===r.length-2&&(a="end"),0===o&&o+1===r.length-1&&(a="both")),FP(r[o],r[o+1],n,a,typeof i.epsilon>"u"?null:i.epsilon))return!0}return!1}function FP(t,e,i,n,r){var o=i[0],a=i[1],s=t[0],l=t[1],h=e[0],u=e[1],c=h-s,p=u-l,d=(i[0]-s)*p-(i[1]-l)*c;if(null!==r){if(Math.abs(d)>r)return!1}else if(0!==d)return!1;return n?"start"===n?Math.abs(c)>=Math.abs(p)?c>0?s<o&&o<=h:h<=o&&o<s:p>0?l<a&&a<=u:u<=a&&a<l:"end"===n?Math.abs(c)>=Math.abs(p)?c>0?s<=o&&o<h:h<o&&o<=s:p>0?l<=a&&a<u:u<a&&a<=l:"both"===n&&(Math.abs(c)>=Math.abs(p)?c>0?s<o&&o<h:h<o&&o<s:p>0?l<a&&a<u:u<a&&a<l):Math.abs(c)>=Math.abs(p)?c>0?s<=o&&o<=h:h<=o&&o<=s:p>0?l<=a&&a<=u:u<=a&&a<=l}(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,r.a)(BP,"booleanPointOnLine"),(0,r.a)(FP,"isPointOnLineSegment");var UP=BP;(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)();var zP=(0,r.e)(pt(),1);(0,n.a)();var VP=Math.PI/180,jP=180/Math.PI,GP=(0,r.a)(function(t,e){this.lon=t,this.lat=e,this.x=VP*t,this.y=VP*e},"Coord");GP.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},GP.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new GP(e,t)};var HP=(0,r.a)(function(){this.coords=[],this.length=0},"LineString");HP.prototype.move_to=function(t){this.length++,this.coords.push(t)};var WP=(0,r.a)(function(t){this.properties=t||{},this.geometries=[]},"Arc");WP.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},WP.prototype.wkt=function(){for(var t="",e="LINESTRING(",i=(0,r.a)(function(t){e+=t[0]+" "+t[1]+","},"collect"),n=0;n<this.geometries.length;n++){if(0===this.geometries[n].coords.length)return"LINESTRING(empty)";this.geometries[n].coords.forEach(i),t+=e.substring(0,e.length-1)+")"}return t};var XP=(0,r.a)(function(t,e,i){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new GP(t.x,t.y),this.end=new GP(e.x,e.y),this.properties=i||{};var n=this.start.x-this.end.x,r=this.start.y-this.end.y,o=Math.pow(Math.sin(r/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(n/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)},"GreatCircle");XP.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),i=Math.sin(t*this.g)/Math.sin(this.g),n=e*Math.cos(this.start.y)*Math.cos(this.start.x)+i*Math.cos(this.end.y)*Math.cos(this.end.x),r=e*Math.cos(this.start.y)*Math.sin(this.start.x)+i*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+i*Math.sin(this.end.y),a=jP*Math.atan2(o,Math.sqrt(Math.pow(n,2)+Math.pow(r,2)));return[jP*Math.atan2(r,n),a]},XP.prototype.Arc=function(t,e){var i=[];if(!t||t<=2)i.push([this.start.lon,this.start.lat]),i.push([this.end.lon,this.end.lat]);else for(var n=1/(t-1),r=0;r<t;++r){var o=n*r,a=this.interpolate(o);i.push(a)}for(var s=!1,l=0,h=e&&e.offset?e.offset:10,u=180-h,c=-180+h,p=360-h,d=1;d<i.length;++d){var f=i[d-1][0],g=i[d][0],m=Math.abs(g-f);m>p&&(g>u&&f<c||f>u&&g<c)?s=!0:m>l&&(l=m)}var v=[];if(s&&l<h){var y=[];v.push(y);for(var _=0;_<i.length;++_){var x=parseFloat(i[_][0]);if(_>0&&Math.abs(x-i[_-1][0])>p){var b=parseFloat(i[_-1][0]),w=parseFloat(i[_-1][1]),E=parseFloat(i[_][0]),M=parseFloat(i[_][1]);if(b>-180&&b<c&&180===E&&_+1<i.length&&i[_-1][0]>-180&&i[_-1][0]<c){y.push([-180,i[_][1]]),_++,y.push([i[_][0],i[_][1]]);continue}if(b>u&&b<180&&-180===E&&_+1<i.length&&i[_-1][0]>u&&i[_-1][0]<180){y.push([180,i[_][1]]),_++,y.push([i[_][0],i[_][1]]);continue}if(b<c&&E>u){var S=b;b=E,E=S;var T=w;w=M,M=T}if(b>u&&E<c&&(E+=360),b<=180&&E>=180&&b<E){var C=(180-b)/(E-b),A=C*M+(1-C)*w;y.push([i[_-1][0]>u?180:-180,A]),(y=[]).push([i[_-1][0]>u?-180:180,A]),v.push(y)}else y=[],v.push(y);y.push([x,i[_][1]])}else y.push([i[_][0],i[_][1]])}}else{var P=[];v.push(P);for(var I=0;I<i.length;++I)P.push([i[I][0],i[I][1]])}for(var L=new WP(this.properties),O=0;O<v.length;++O){var N=new HP;L.geometries.push(N);for(var q=v[O],R=0;R<q.length;++R)N.move_to(q[R])}return L},(0,n.a)();var YP=(0,r.e)(vt(),1);(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)();var ZP=(0,r.e)(vt(),1),JP=(0,r.e)(Zt(),1);(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)();var KP=(0,r.e)(rt(),1),QP=[],$P=[],tI=[],eI=[],iI=[],nI=[],rI=[],oI=[],aI=[],sI=[],lI=[],hI=[],uI=[],cI=[],pI=[],dI=[],fI=[],gI=[],mI=[],vI=[],yI=[],_I=[],xI=[],bI=[];rI[85]=sI[85]=-1,oI[85]=lI[85]=0,aI[85]=hI[85]=1,mI[85]=_I[85]=1,vI[85]=xI[85]=0,yI[85]=bI[85]=1,QP[85]=eI[85]=0,$P[85]=iI[85]=-1,tI[85]=pI[85]=0,dI[85]=uI[85]=0,fI[85]=cI[85]=1,nI[85]=gI[85]=1,_I[1]=_I[169]=0,xI[1]=xI[169]=-1,bI[1]=bI[169]=0,uI[1]=uI[169]=-1,cI[1]=cI[169]=0,pI[1]=pI[169]=0,sI[4]=sI[166]=0,lI[4]=lI[166]=-1,hI[4]=hI[166]=1,dI[4]=dI[166]=1,fI[4]=fI[166]=0,gI[4]=gI[166]=0,rI[16]=rI[154]=0,oI[16]=oI[154]=1,aI[16]=aI[154]=1,eI[16]=eI[154]=1,iI[16]=iI[154]=0,nI[16]=nI[154]=1,mI[64]=mI[106]=0,vI[64]=vI[106]=1,yI[64]=yI[106]=0,QP[64]=QP[106]=-1,$P[64]=$P[106]=0,tI[64]=tI[106]=1,mI[2]=mI[168]=0,vI[2]=vI[168]=-1,yI[2]=yI[168]=1,_I[2]=_I[168]=0,xI[2]=xI[168]=-1,bI[2]=bI[168]=0,uI[2]=uI[168]=-1,cI[2]=cI[168]=0,pI[2]=pI[168]=0,dI[2]=dI[168]=-1,fI[2]=fI[168]=0,gI[2]=gI[168]=1,rI[8]=rI[162]=0,oI[8]=oI[162]=-1,aI[8]=aI[162]=0,sI[8]=sI[162]=0,lI[8]=lI[162]=-1,hI[8]=hI[162]=1,uI[8]=uI[162]=1,cI[8]=cI[162]=0,pI[8]=pI[162]=1,dI[8]=dI[162]=1,fI[8]=fI[162]=0,gI[8]=gI[162]=0,rI[32]=rI[138]=0,oI[32]=oI[138]=1,aI[32]=aI[138]=1,sI[32]=sI[138]=0,lI[32]=lI[138]=1,hI[32]=hI[138]=0,QP[32]=QP[138]=1,$P[32]=$P[138]=0,tI[32]=tI[138]=0,eI[32]=eI[138]=1,iI[32]=iI[138]=0,nI[32]=nI[138]=1,_I[128]=_I[42]=0,xI[128]=xI[42]=1,bI[128]=bI[42]=1,mI[128]=mI[42]=0,vI[128]=vI[42]=1,yI[128]=yI[42]=0,QP[128]=QP[42]=-1,$P[128]=$P[42]=0,tI[128]=tI[42]=1,eI[128]=eI[42]=-1,iI[128]=iI[42]=0,nI[128]=nI[42]=0,sI[5]=sI[165]=-1,lI[5]=lI[165]=0,hI[5]=hI[165]=0,_I[5]=_I[165]=1,xI[5]=xI[165]=0,bI[5]=bI[165]=0,dI[20]=dI[150]=0,fI[20]=fI[150]=1,gI[20]=gI[150]=1,eI[20]=eI[150]=0,iI[20]=iI[150]=-1,nI[20]=nI[150]=1,rI[80]=rI[90]=-1,oI[80]=oI[90]=0,aI[80]=aI[90]=1,mI[80]=mI[90]=1,vI[80]=vI[90]=0,yI[80]=yI[90]=1,uI[65]=uI[105]=0,cI[65]=cI[105]=1,pI[65]=pI[105]=0,QP[65]=QP[105]=0,$P[65]=$P[105]=-1,tI[65]=tI[105]=0,rI[160]=rI[10]=-1,oI[160]=oI[10]=0,aI[160]=aI[10]=1,sI[160]=sI[10]=-1,lI[160]=lI[10]=0,hI[160]=hI[10]=0,_I[160]=_I[10]=1,xI[160]=xI[10]=0,bI[160]=bI[10]=0,mI[160]=mI[10]=1,vI[160]=vI[10]=0,yI[160]=yI[10]=1,dI[130]=dI[40]=0,fI[130]=fI[40]=1,gI[130]=gI[40]=1,uI[130]=uI[40]=0,cI[130]=cI[40]=1,pI[130]=pI[40]=0,QP[130]=QP[40]=0,$P[130]=$P[40]=-1,tI[130]=tI[40]=0,eI[130]=eI[40]=0,iI[130]=iI[40]=-1,nI[130]=nI[40]=1,sI[37]=sI[133]=0,lI[37]=lI[133]=1,hI[37]=hI[133]=1,_I[37]=_I[133]=0,xI[37]=xI[133]=1,bI[37]=bI[133]=0,QP[37]=QP[133]=-1,$P[37]=$P[133]=0,tI[37]=tI[133]=0,eI[37]=eI[133]=1,iI[37]=iI[133]=0,nI[37]=nI[133]=0,dI[148]=dI[22]=-1,fI[148]=fI[22]=0,gI[148]=gI[22]=0,_I[148]=_I[22]=0,xI[148]=xI[22]=-1,bI[148]=bI[22]=1,mI[148]=mI[22]=0,vI[148]=vI[22]=1,yI[148]=yI[22]=1,eI[148]=eI[22]=-1,iI[148]=iI[22]=0,nI[148]=nI[22]=1,rI[82]=rI[88]=0,oI[82]=oI[88]=-1,aI[82]=aI[88]=1,dI[82]=dI[88]=1,fI[82]=fI[88]=0,gI[82]=gI[88]=1,uI[82]=uI[88]=-1,cI[82]=cI[88]=0,pI[82]=pI[88]=1,mI[82]=mI[88]=0,vI[82]=vI[88]=-1,yI[82]=yI[88]=0,rI[73]=rI[97]=0,oI[73]=oI[97]=1,aI[73]=aI[97]=0,sI[73]=sI[97]=0,lI[73]=lI[97]=-1,hI[73]=hI[97]=0,uI[73]=uI[97]=1,cI[73]=cI[97]=0,pI[73]=pI[97]=0,QP[73]=QP[97]=1,$P[73]=$P[97]=0,tI[73]=tI[97]=1,rI[145]=rI[25]=0,oI[145]=oI[25]=-1,aI[145]=aI[25]=0,uI[145]=uI[25]=1,cI[145]=cI[25]=0,pI[145]=pI[25]=1,_I[145]=_I[25]=0,xI[145]=xI[25]=1,bI[145]=bI[25]=1,eI[145]=eI[25]=-1,iI[145]=iI[25]=0,nI[145]=nI[25]=0,sI[70]=sI[100]=0,lI[70]=lI[100]=1,hI[70]=hI[100]=0,dI[70]=dI[100]=-1,fI[70]=fI[100]=0,gI[70]=gI[100]=1,mI[70]=mI[100]=0,vI[70]=vI[100]=-1,yI[70]=yI[100]=1,QP[70]=QP[100]=1,$P[70]=$P[100]=0,tI[70]=tI[100]=0,sI[101]=sI[69]=0,lI[101]=lI[69]=1,hI[101]=hI[69]=0,QP[101]=QP[69]=1,$P[101]=$P[69]=0,tI[101]=tI[69]=0,_I[149]=_I[21]=0,xI[149]=xI[21]=1,bI[149]=bI[21]=1,eI[149]=eI[21]=-1,iI[149]=iI[21]=0,nI[149]=nI[21]=0,dI[86]=dI[84]=-1,fI[86]=fI[84]=0,gI[86]=gI[84]=1,mI[86]=mI[84]=0,vI[86]=vI[84]=-1,yI[86]=yI[84]=1,rI[89]=rI[81]=0,oI[89]=oI[81]=-1,aI[89]=aI[81]=0,uI[89]=uI[81]=1,cI[89]=cI[81]=0,pI[89]=pI[81]=1,rI[96]=rI[74]=0,oI[96]=oI[74]=1,aI[96]=aI[74]=0,sI[96]=sI[74]=-1,lI[96]=lI[74]=0,hI[96]=hI[74]=1,mI[96]=mI[74]=1,vI[96]=vI[74]=0,yI[96]=yI[74]=0,QP[96]=QP[74]=1,$P[96]=$P[74]=0,tI[96]=tI[74]=1,rI[24]=rI[146]=0,oI[24]=oI[146]=-1,aI[24]=aI[146]=1,dI[24]=dI[146]=1,fI[24]=fI[146]=0,gI[24]=gI[146]=1,uI[24]=uI[146]=0,cI[24]=cI[146]=1,pI[24]=pI[146]=1,eI[24]=eI[146]=0,iI[24]=iI[146]=-1,nI[24]=nI[146]=0,sI[6]=sI[164]=-1,lI[6]=lI[164]=0,hI[6]=hI[164]=1,dI[6]=dI[164]=-1,fI[6]=fI[164]=0,gI[6]=gI[164]=0,_I[6]=_I[164]=0,xI[6]=xI[164]=-1,bI[6]=bI[164]=1,mI[6]=mI[164]=1,vI[6]=vI[164]=0,yI[6]=yI[164]=0,uI[129]=uI[41]=0,cI[129]=cI[41]=1,pI[129]=pI[41]=1,_I[129]=_I[41]=0,xI[129]=xI[41]=1,bI[129]=bI[41]=0,QP[129]=QP[41]=-1,$P[129]=$P[41]=0,tI[129]=tI[41]=0,eI[129]=eI[41]=0,iI[129]=iI[41]=-1,nI[129]=nI[41]=0,dI[66]=dI[104]=0,fI[66]=fI[104]=1,gI[66]=gI[104]=0,uI[66]=uI[104]=-1,cI[66]=cI[104]=0,pI[66]=pI[104]=1,mI[66]=mI[104]=0,vI[66]=vI[104]=-1,yI[66]=yI[104]=0,QP[66]=QP[104]=0,$P[66]=$P[104]=-1,tI[66]=tI[104]=1,rI[144]=rI[26]=-1,oI[144]=oI[26]=0,aI[144]=aI[26]=0,_I[144]=_I[26]=1,xI[144]=xI[26]=0,bI[144]=bI[26]=1,mI[144]=mI[26]=0,vI[144]=vI[26]=1,yI[144]=yI[26]=1,eI[144]=eI[26]=-1,iI[144]=iI[26]=0,nI[144]=nI[26]=1,sI[36]=sI[134]=0,lI[36]=lI[134]=1,hI[36]=hI[134]=1,dI[36]=dI[134]=0,fI[36]=fI[134]=1,gI[36]=gI[134]=0,QP[36]=QP[134]=0,$P[36]=$P[134]=-1,tI[36]=tI[134]=1,eI[36]=eI[134]=1,iI[36]=iI[134]=0,nI[36]=nI[134]=0,rI[9]=rI[161]=-1,oI[9]=oI[161]=0,aI[9]=aI[161]=0,sI[9]=sI[161]=0,lI[9]=lI[161]=-1,hI[9]=hI[161]=0,uI[9]=uI[161]=1,cI[9]=cI[161]=0,pI[9]=pI[161]=0,_I[9]=_I[161]=1,xI[9]=xI[161]=0,bI[9]=bI[161]=1,rI[136]=0,oI[136]=1,aI[136]=1,sI[136]=0,lI[136]=1,hI[136]=0,dI[136]=-1,fI[136]=0,gI[136]=1,uI[136]=-1,cI[136]=0,pI[136]=0,_I[136]=0,xI[136]=-1,bI[136]=0,mI[136]=0,vI[136]=-1,yI[136]=1,QP[136]=1,$P[136]=0,tI[136]=0,eI[136]=1,iI[136]=0,nI[136]=1,rI[34]=0,oI[34]=-1,aI[34]=0,sI[34]=0,lI[34]=-1,hI[34]=1,dI[34]=1,fI[34]=0,gI[34]=0,uI[34]=1,cI[34]=0,pI[34]=1,_I[34]=0,xI[34]=1,bI[34]=1,mI[34]=0,vI[34]=1,yI[34]=0,QP[34]=-1,$P[34]=0,tI[34]=1,eI[34]=-1,iI[34]=0,nI[34]=0,rI[35]=0,oI[35]=1,aI[35]=1,sI[35]=0,lI[35]=-1,hI[35]=1,dI[35]=1,fI[35]=0,gI[35]=0,uI[35]=-1,cI[35]=0,pI[35]=0,_I[35]=0,xI[35]=-1,bI[35]=0,mI[35]=0,vI[35]=1,yI[35]=0,QP[35]=-1,$P[35]=0,tI[35]=1,eI[35]=1,iI[35]=0,nI[35]=1,rI[153]=0,oI[153]=1,aI[153]=1,uI[153]=-1,cI[153]=0,pI[153]=0,_I[153]=0,xI[153]=-1,bI[153]=0,eI[153]=1,iI[153]=0,nI[153]=1,sI[102]=0,lI[102]=-1,hI[102]=1,dI[102]=1,fI[102]=0,gI[102]=0,mI[102]=0,vI[102]=1,yI[102]=0,QP[102]=-1,$P[102]=0,tI[102]=1,rI[155]=0,oI[155]=-1,aI[155]=0,uI[155]=1,cI[155]=0,pI[155]=1,_I[155]=0,xI[155]=1,bI[155]=1,eI[155]=-1,iI[155]=0,nI[155]=0,sI[103]=0,lI[103]=1,hI[103]=0,dI[103]=-1,fI[103]=0,gI[103]=1,mI[103]=0,vI[103]=-1,yI[103]=1,QP[103]=1,$P[103]=0,tI[103]=0,rI[152]=0,oI[152]=1,aI[152]=1,dI[152]=-1,fI[152]=0,gI[152]=1,uI[152]=-1,cI[152]=0,pI[152]=0,_I[152]=0,xI[152]=-1,bI[152]=0,mI[152]=0,vI[152]=-1,yI[152]=1,eI[152]=1,iI[152]=0,nI[152]=1,rI[156]=0,oI[156]=-1,aI[156]=1,dI[156]=1,fI[156]=0,gI[156]=1,uI[156]=-1,cI[156]=0,pI[156]=0,_I[156]=0,xI[156]=-1,bI[156]=0,mI[156]=0,vI[156]=1,yI[156]=1,eI[156]=-1,iI[156]=0,nI[156]=1,rI[137]=0,oI[137]=1,aI[137]=1,sI[137]=0,lI[137]=1,hI[137]=0,uI[137]=-1,cI[137]=0,pI[137]=0,_I[137]=0,xI[137]=-1,bI[137]=0,QP[137]=1,$P[137]=0,tI[137]=0,eI[137]=1,iI[137]=0,nI[137]=1,rI[139]=0,oI[139]=1,aI[139]=1,sI[139]=0,lI[139]=-1,hI[139]=0,uI[139]=1,cI[139]=0,pI[139]=0,_I[139]=0,xI[139]=1,bI[139]=0,QP[139]=-1,$P[139]=0,tI[139]=0,eI[139]=1,iI[139]=0,nI[139]=1,rI[98]=0,oI[98]=-1,aI[98]=0,sI[98]=0,lI[98]=-1,hI[98]=1,dI[98]=1,fI[98]=0,gI[98]=0,uI[98]=1,cI[98]=0,pI[98]=1,mI[98]=0,vI[98]=1,yI[98]=0,QP[98]=-1,$P[98]=0,tI[98]=1,rI[99]=0,oI[99]=1,aI[99]=0,sI[99]=0,lI[99]=-1,hI[99]=1,dI[99]=1,fI[99]=0,gI[99]=0,uI[99]=-1,cI[99]=0,pI[99]=1,mI[99]=0,vI[99]=-1,yI[99]=0,QP[99]=1,$P[99]=0,tI[99]=1,sI[38]=0,lI[38]=-1,hI[38]=1,dI[38]=1,fI[38]=0,gI[38]=0,_I[38]=0,xI[38]=1,bI[38]=1,mI[38]=0,vI[38]=1,yI[38]=0,QP[38]=-1,$P[38]=0,tI[38]=1,eI[38]=-1,iI[38]=0,nI[38]=0,sI[39]=0,lI[39]=1,hI[39]=1,dI[39]=-1,fI[39]=0,gI[39]=0,_I[39]=0,xI[39]=-1,bI[39]=1,mI[39]=0,vI[39]=1,yI[39]=0,QP[39]=-1,$P[39]=0,tI[39]=1,eI[39]=1,iI[39]=0,nI[39]=0;var wI=(0,r.a)(function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},"p00"),EI=(0,r.a)(function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},"p01"),MI=(0,r.a)(function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},"p02"),SI=(0,r.a)(function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},"p03"),TI=(0,r.a)(function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},"p04"),CI=(0,r.a)(function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},"p05"),AI=(0,r.a)(function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},"p06"),PI=(0,r.a)(function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},"p07"),II=(0,r.a)(function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},"p08"),LI=(0,r.a)(function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},"p09"),OI=(0,r.a)(function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},"p10"),NI=(0,r.a)(function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},"p11"),qI=(0,r.a)(function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},"p12"),RI=(0,r.a)(function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},"p13"),DI=(0,r.a)(function(){return[[0,0],[0,1],[1,1],[1,0]]},"p14"),kI=(0,r.a)(function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},"p15"),BI=(0,r.a)(function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},"p16"),FI=(0,r.a)(function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},"p17"),UI=(0,r.a)(function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},"p18"),zI=(0,r.a)(function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},"p19"),VI=(0,r.a)(function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},"p20"),jI=(0,r.a)(function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},"p21"),GI=(0,r.a)(function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},"p22"),HI=(0,r.a)(function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},"p23"),WI=(0,r.a)(function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},"p24"),XI=(0,r.a)(function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},"p25"),YI=(0,r.a)(function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},"p26"),ZI=(0,r.a)(function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},"p27"),JI=(0,r.a)(function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},"p28"),KI=(0,r.a)(function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},"p29"),QI=(0,r.a)(function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},"p30"),$I=(0,r.a)(function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},"p31"),tL=(0,r.a)(function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},"p32"),eL=(0,r.a)(function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},"p33"),iL=(0,r.a)(function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},"p34"),nL=(0,r.a)(function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},"p35"),rL=(0,r.a)(function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},"p36"),oL=(0,r.a)(function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},"p37"),aL=(0,r.a)(function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},"p38"),sL=(0,r.a)(function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},"p39"),lL=[],hL=[],uL=[],cL=[],pL=[],dL=[],fL=[],gL=[];cL[1]=pL[1]=18,cL[169]=pL[169]=18,uL[4]=hL[4]=12,uL[166]=hL[166]=12,lL[16]=gL[16]=4,lL[154]=gL[154]=4,dL[64]=fL[64]=22,dL[106]=fL[106]=22,uL[2]=dL[2]=17,cL[2]=pL[2]=18,uL[168]=dL[168]=17,cL[168]=pL[168]=18,lL[8]=cL[8]=9,hL[8]=uL[8]=12,lL[162]=cL[162]=9,hL[162]=uL[162]=12,lL[32]=gL[32]=4,hL[32]=fL[32]=1,lL[138]=gL[138]=4,hL[138]=fL[138]=1,pL[128]=gL[128]=21,dL[128]=fL[128]=22,pL[42]=gL[42]=21,dL[42]=fL[42]=22,hL[5]=pL[5]=14,hL[165]=pL[165]=14,uL[20]=gL[20]=6,uL[150]=gL[150]=6,lL[80]=dL[80]=11,lL[90]=dL[90]=11,cL[65]=fL[65]=3,cL[105]=fL[105]=3,lL[160]=dL[160]=11,hL[160]=pL[160]=14,lL[10]=dL[10]=11,hL[10]=pL[10]=14,uL[130]=gL[130]=6,cL[130]=fL[130]=3,uL[40]=gL[40]=6,cL[40]=fL[40]=3,hL[101]=fL[101]=1,hL[69]=fL[69]=1,pL[149]=gL[149]=21,pL[21]=gL[21]=21,uL[86]=dL[86]=17,uL[84]=dL[84]=17,lL[89]=cL[89]=9,lL[81]=cL[81]=9,lL[96]=fL[96]=0,hL[96]=dL[96]=15,lL[74]=fL[74]=0,hL[74]=dL[74]=15,lL[24]=uL[24]=8,cL[24]=gL[24]=7,lL[146]=uL[146]=8,cL[146]=gL[146]=7,hL[6]=dL[6]=15,uL[6]=pL[6]=16,hL[164]=dL[164]=15,uL[164]=pL[164]=16,cL[129]=gL[129]=7,pL[129]=fL[129]=20,cL[41]=gL[41]=7,pL[41]=fL[41]=20,uL[66]=fL[66]=2,cL[66]=dL[66]=19,uL[104]=fL[104]=2,cL[104]=dL[104]=19,lL[144]=pL[144]=10,dL[144]=gL[144]=23,lL[26]=pL[26]=10,dL[26]=gL[26]=23,hL[36]=gL[36]=5,uL[36]=fL[36]=2,hL[134]=gL[134]=5,uL[134]=fL[134]=2,lL[9]=pL[9]=10,hL[9]=cL[9]=13,lL[161]=pL[161]=10,hL[161]=cL[161]=13,hL[37]=gL[37]=5,pL[37]=fL[37]=20,hL[133]=gL[133]=5,pL[133]=fL[133]=20,uL[148]=pL[148]=16,dL[148]=gL[148]=23,uL[22]=pL[22]=16,dL[22]=gL[22]=23,lL[82]=uL[82]=8,cL[82]=dL[82]=19,lL[88]=uL[88]=8,cL[88]=dL[88]=19,lL[73]=fL[73]=0,hL[73]=cL[73]=13,lL[97]=fL[97]=0,hL[97]=cL[97]=13,lL[145]=cL[145]=9,pL[145]=gL[145]=21,lL[25]=cL[25]=9,pL[25]=gL[25]=21,hL[70]=fL[70]=1,uL[70]=dL[70]=17,hL[100]=fL[100]=1,uL[100]=dL[100]=17,lL[34]=cL[34]=9,hL[34]=uL[34]=12,pL[34]=gL[34]=21,dL[34]=fL[34]=22,lL[136]=gL[136]=4,hL[136]=fL[136]=1,uL[136]=dL[136]=17,cL[136]=pL[136]=18,lL[35]=gL[35]=4,hL[35]=uL[35]=12,cL[35]=pL[35]=18,dL[35]=fL[35]=22,lL[153]=gL[153]=4,cL[153]=pL[153]=18,hL[102]=uL[102]=12,dL[102]=fL[102]=22,lL[155]=cL[155]=9,pL[155]=gL[155]=23,hL[103]=fL[103]=1,uL[103]=dL[103]=17,lL[152]=gL[152]=4,uL[152]=dL[152]=17,cL[152]=pL[152]=18,lL[156]=uL[156]=8,cL[156]=pL[156]=18,dL[156]=gL[156]=23,lL[137]=gL[137]=4,hL[137]=fL[137]=1,cL[137]=pL[137]=18,lL[139]=gL[139]=4,hL[139]=cL[139]=13,pL[139]=fL[139]=20,lL[98]=cL[98]=9,hL[98]=uL[98]=12,dL[98]=fL[98]=22,lL[99]=fL[99]=0,hL[99]=uL[99]=12,cL[99]=dL[99]=19,hL[38]=uL[38]=12,pL[38]=gL[38]=21,dL[38]=fL[38]=22,hL[39]=gL[39]=5,uL[39]=pL[39]=16,dL[39]=fL[39]=22;var mL=[];function vL(t){return(t>0)-(t<0)||+t}function yL(t,e,i){var n=e[0]-t[0],r=e[1]-t[1],o=i[0]-e[0];return vL(n*(i[1]-e[1])-o*r)}function _L(t,e){var i=t.geometry.coordinates[0].map(function(t){return t[0]}),n=t.geometry.coordinates[0].map(function(t){return t[1]}),r=e.geometry.coordinates[0].map(function(t){return t[0]}),o=e.geometry.coordinates[0].map(function(t){return t[1]});return Math.max.apply(null,i)===Math.max.apply(null,r)&&Math.max.apply(null,n)===Math.max.apply(null,o)&&Math.min.apply(null,i)===Math.min.apply(null,r)&&Math.min.apply(null,n)===Math.min.apply(null,o)}function xL(t,e){return e.geometry.coordinates[0].every(function(e){return eP(AA(e),t)})}function bL(t,e){return t[0]===e[0]&&t[1]===e[1]}mL[1]=mL[169]=wI,mL[4]=mL[166]=EI,mL[16]=mL[154]=MI,mL[64]=mL[106]=SI,mL[168]=mL[2]=TI,mL[162]=mL[8]=CI,mL[138]=mL[32]=AI,mL[42]=mL[128]=PI,mL[5]=mL[165]=II,mL[20]=mL[150]=LI,mL[80]=mL[90]=OI,mL[65]=mL[105]=NI,mL[160]=mL[10]=qI,mL[130]=mL[40]=RI,mL[85]=DI,mL[101]=mL[69]=kI,mL[149]=mL[21]=BI,mL[86]=mL[84]=FI,mL[89]=mL[81]=UI,mL[96]=mL[74]=zI,mL[24]=mL[146]=VI,mL[6]=mL[164]=jI,mL[129]=mL[41]=GI,mL[66]=mL[104]=HI,mL[144]=mL[26]=WI,mL[36]=mL[134]=XI,mL[9]=mL[161]=YI,mL[37]=mL[133]=ZI,mL[148]=mL[22]=JI,mL[82]=mL[88]=KI,mL[73]=mL[97]=QI,mL[145]=mL[25]=$I,mL[70]=mL[100]=tL,mL[34]=function(t){return[PI(t),CI(t)]},mL[35]=eL,mL[136]=function(t){return[AI(t),TI(t)]},mL[153]=function(t){return[MI(t),wI(t)]},mL[102]=function(t){return[EI(t),SI(t)]},mL[155]=iL,mL[103]=nL,mL[152]=function(t){return[MI(t),TI(t)]},mL[156]=rL,mL[137]=function(t){return[AI(t),wI(t)]},mL[139]=oL,mL[98]=function(t){return[CI(t),SI(t)]},mL[99]=aL,mL[38]=function(t){return[EI(t),PI(t)]},mL[39]=sL,(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,r.a)(vL,"mathSign"),(0,r.a)(yL,"orientationIndex"),(0,r.a)(_L,"envelopeIsEqual"),(0,r.a)(xL,"envelopeContains"),(0,r.a)(bL,"coordinatesEqual");var wL=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return(0,r.a)(t,"Node"),t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==t.from.id})},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==t.to.id})},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,i){var n=e.to,r=i.to;if(n.coordinates[0]-t.coordinates[0]>=0&&r.coordinates[0]-t.coordinates[0]<0)return 1;if(n.coordinates[0]-t.coordinates[0]<0&&r.coordinates[0]-t.coordinates[0]>=0)return-1;if(n.coordinates[0]-t.coordinates[0]==0&&r.coordinates[0]-t.coordinates[0]==0)return n.coordinates[1]-t.coordinates[1]>=0||r.coordinates[1]-t.coordinates[1]>=0?n.coordinates[1]-r.coordinates[1]:r.coordinates[1]-n.coordinates[1];var o=yL(t.coordinates,n.coordinates,r.coordinates);return o<0?1:o>0?-1:Math.pow(n.coordinates[0]-t.coordinates[0],2)+Math.pow(n.coordinates[1]-t.coordinates[1],2)-(Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2))}),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}(),EL=wL;(0,n.a)();var ML=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return(0,r.a)(t,"Edge"),t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return IA([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return yL(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}(),SL=ML;(0,n.a)();var TL=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return(0,r.a)(t,"EdgeRing"),t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce(function(e,i,n){return i.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=n),e},0),i=(0===e?this.length:e)-1,n=(e+1)%this.length,r=yL(this.edges[i].from.coordinates,this.edges[e].from.coordinates,this.edges[n].from.coordinates);return 0===r?this.edges[i].from.coordinates[0]>this.edges[n].from.coordinates[0]:r>0},t.prototype.toMultiPoint=function(){return NA(this.edges.map(function(t){return t.from.coordinates}))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(t){return t.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=PA([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=mP(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var i,n,o=t.getEnvelope();return e.forEach(function(e){var a=e.getEnvelope();if(n&&(i=n.getEnvelope()),!_L(a,o)&&xL(a,o)){for(var s=t.map(function(t){return t.from.coordinates}),l=void 0,h=(0,r.a)(function(t){e.some(function(e){return bL(t,e.from.coordinates)})||(l=t)},"_loop_1"),u=0,c=s;u<c.length;u++)h(c[u]);l&&e.inside(AA(l))&&(!n||xL(i,a))&&(n=e)}}),n},t.prototype.inside=function(t){return eP(t,this.toPolygon())},t}(),CL=TL;function AL(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(0,r.a)(AL,"validateGeoJson");var PL=function(){function t(){this.edges=[],this.nodes={}}return(0,r.a)(t,"Graph"),t.fromGeoJson=function(e){AL(e);var i=new t;return jA(e,function(t){JA(t,"LineString","Graph::fromGeoJson"),UA(t,function(t,e){if(t){var n=i.getNode(t),r=i.getNode(e);i.addEdge(n,r)}return e})}),i},t.prototype.getNode=function(t){var e=EL.buildId(t),i=this.nodes[e];return i||(i=this.nodes[e]=new EL(t)),i},t.prototype.addEdge=function(t,e){var i=new SL(t,e),n=i.getSymetric();this.edges.push(i),this.edges.push(n)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(e){return t.nodes[e]}).forEach(function(e){return t._removeIfDangle(e)})},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var i=t.getOuterEdges().map(function(t){return t.to});this.removeNode(t),i.forEach(function(t){return e._removeIfDangle(t)})}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))})},t.prototype._computeNextCWEdges=function(t){var e=this;typeof t>"u"?Object.keys(this.nodes).forEach(function(t){return e._computeNextCWEdges(e.nodes[t])}):t.getOuterEdges().forEach(function(e,i){t.getOuterEdge((0===i?t.getOuterEdges().length:i)-1).symetric.next=e})},t.prototype._computeNextCCWEdges=function(t,e){for(var i,n,r=t.getOuterEdges(),o=r.length-1;o>=0;--o){var a=r[o],s=a.symetric,l=void 0,h=void 0;a.label===e&&(l=a),s.label===e&&(h=s),l&&h&&(h&&(n=h),l&&(n&&(n.next=l,n=void 0),i||(i=l)))}n&&(n.next=i)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach(function(i){if(!(i.label>=0)){t.push(i);var n=i;do{n.label=e,n=n.next}while(!i.isEqual(n));e++}}),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(t){t.label=void 0}),this._findLabeledEdgeRings().forEach(function(e){t._findIntersectionNodes(e).forEach(function(i){t._computeNextCCWEdges(i,e.label)})});var e=[];return this.edges.forEach(function(i){i.ring||e.push(t._findEdgeRing(i))}),e},t.prototype._findIntersectionNodes=function(t){var e=[],i=t,n=(0,r.a)(function(){var n=0;i.from.getOuterEdges().forEach(function(e){e.label===t.label&&++n}),n>1&&e.push(i.from),i=i.next},"_loop_1");do{n()}while(!t.isEqual(i));return e},t.prototype._findEdgeRing=function(t){var e=t,i=new CL;do{i.push(e),e.ring=i,e=e.next}while(!t.isEqual(e));return i},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach(function(t){return e.removeEdge(t)}),t.innerEdges.forEach(function(t){return e.removeEdge(t)}),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(e){return!e.isEqual(t)}),t.deleteEdge()},t}();(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)();var IL=(0,r.e)(Jt(),1);(0,n.a)();var LL=(0,r.e)(Jt(),1);(0,n.a)(),(0,n.a)();var OL=(0,r.e)(ee(),1);(0,n.a)();var NL=(0,r.e)(re(),1);function qL(t){for(var e=t,i=[];e.parent;)i.unshift(e),e=e.parent;return i}function RL(){return new FL(function(t){return t.f})}(0,n.a)(),(0,n.a)(),(0,r.a)(qL,"pathTo"),(0,r.a)(RL,"getHeap");var DL={search:function(t,e,i,n){t.cleanDirty();var r=(n=n||{}).heuristic||DL.heuristics.manhattan,o=n.closest||!1,a=RL(),s=e;for(e.h=r(e,i),a.push(e);a.size()>0;){var l=a.pop();if(l===i)return qL(l);l.closed=!0;for(var h=t.neighbors(l),u=0,c=h.length;u<c;++u){var p=h[u];if(!p.closed&&!p.isWall()){var d=l.g+p.getCost(l),f=p.visited;(!f||d<p.g)&&(p.visited=!0,p.parent=l,p.h=p.h||r(p,i),p.g=d,p.f=p.g+p.h,t.markDirty(p),o&&(p.h<s.h||p.h===s.h&&p.g<s.g)&&(s=p),f?a.rescoreElement(p):a.push(p))}}}return o?qL(s):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var i=Math.sqrt(2),n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return 1*(n+r)+(i-2)*Math.min(n,r)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function kL(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var i=0;i<t.length;i++){this.grid[i]=[];for(var n=0,r=t[i];n<r.length;n++){var o=new BL(i,n,r[n]);this.grid[i][n]=o,this.nodes.push(o)}}this.init()}function BL(t,e,i){this.x=t,this.y=e,this.weight=i}function FL(t){this.content=[],this.scoreFunction=t}function UL(){this._=null}function zL(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function VL(t,e){var i=e,n=e.R,r=i.U;r?r.L===i?r.L=n:r.R=n:t._=n,n.U=r,i.U=n,i.R=n.L,i.R&&(i.R.U=i),n.L=i}function jL(t,e){var i=e,n=e.L,r=i.U;r?r.L===i?r.L=n:r.R=n:t._=n,n.U=r,i.U=n,i.L=n.R,i.L&&(i.L.U=i),n.R=i}function GL(t){for(;t.L;)t=t.L;return t}(0,r.a)(kL,"Graph"),kL.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)DL.cleanNode(this.nodes[t])},kL.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)DL.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},kL.prototype.markDirty=function(t){this.dirtyNodes.push(t)},kL.prototype.neighbors=function(t){var e=[],i=t.x,n=t.y,r=this.grid;return r[i-1]&&r[i-1][n]&&e.push(r[i-1][n]),r[i+1]&&r[i+1][n]&&e.push(r[i+1][n]),r[i]&&r[i][n-1]&&e.push(r[i][n-1]),r[i]&&r[i][n+1]&&e.push(r[i][n+1]),this.diagonal&&(r[i-1]&&r[i-1][n-1]&&e.push(r[i-1][n-1]),r[i+1]&&r[i+1][n-1]&&e.push(r[i+1][n-1]),r[i-1]&&r[i-1][n+1]&&e.push(r[i-1][n+1]),r[i+1]&&r[i+1][n+1]&&e.push(r[i+1][n+1])),e},kL.prototype.toString=function(){for(var t,e,i,n,r=[],o=this.grid,a=0,s=o.length;a<s;a++){for(t=[],i=0,n=(e=o[a]).length;i<n;i++)t.push(e[i].weight);r.push(t.join(" "))}return r.join("\n")},(0,r.a)(BL,"GridNode"),BL.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},BL.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},BL.prototype.isWall=function(){return 0===this.weight},(0,r.a)(FL,"BinaryHeap"),FL.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),i=this.content.pop();e!==this.content.length-1&&(this.content[e]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var i=(t+1>>1)-1,n=this.content[i];if(!(this.scoreFunction(e)<this.scoreFunction(n)))break;this.content[i]=e,this.content[t]=n,t=i}},bubbleUp:function(t){for(var e=this.content.length,i=this.content[t],n=this.scoreFunction(i);;){var r,o=t+1<<1,a=o-1,s=null;if(a<e){var l=this.content[a];(r=this.scoreFunction(l))<n&&(s=a)}if(o<e){var h=this.content[o];this.scoreFunction(h)<(null===s?n:r)&&(s=o)}if(null===s)break;this.content[t]=this.content[s],this.content[s]=i,t=s}}},(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,r.a)(UL,"RedBlackTree"),(0,r.a)(zL,"RedBlackNode"),UL.prototype={constructor:UL,insert:function(t,e){var i,n,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;i=t}else this._?(t=GL(this._),e.P=null,e.N=t,t.P=t.L=e,i=t):(e.P=e.N=null,this._=e,i=null);for(e.L=e.R=null,e.U=i,e.C=!0,t=e;i&&i.C;)i===(n=i.U).L?(r=n.R)&&r.C?(i.C=r.C=!1,n.C=!0,t=n):(t===i.R&&(VL(this,i),i=(t=i).U),i.C=!1,n.C=!0,jL(this,n)):(r=n.L)&&r.C?(i.C=r.C=!1,n.C=!0,t=n):(t===i.L&&(jL(this,i),i=(t=i).U),i.C=!1,n.C=!0,VL(this,n)),i=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,i,n,r=t.U,o=t.L,a=t.R;if(i=o?a?GL(a):o:a,r?r.L===t?r.L=i:r.R=i:this._=i,o&&a?(n=i.C,i.C=t.C,i.L=o,o.U=i,i!==a?(r=i.U,i.U=t.U,t=i.R,r.L=t,i.R=a,a.U=i):(i.U=r,r=i,t=i.R)):(n=t.C,t=i),t&&(t.U=r),!n){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,VL(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){(!e.R||!e.R.C)&&(e.L.C=!1,e.C=!0,jL(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,VL(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,jL(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){(!e.L||!e.L.C)&&(e.R.C=!1,e.C=!0,VL(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,jL(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}},(0,r.a)(VL,"RedBlackRotateLeft"),(0,r.a)(jL,"RedBlackRotateRight"),(0,r.a)(GL,"RedBlackFirst");var HL=UL;function WL(t,e,i,n){var r=[null,null],o=xO.push(r)-1;return r.left=t,r.right=e,i&&YL(r,t,e,i),n&&YL(r,e,t,n),yO[t.index].halfedges.push(o),yO[e.index].halfedges.push(o),r}function XL(t,e,i){var n=[e,i];return n.left=t,n}function YL(t,e,i,n){t[0]||t[1]?t.left===i?t[1]=n:t[0]=n:(t[0]=n,t.left=e,t.right=i)}function ZL(t,e,i,n,r){var o,a=t[0],s=t[1],l=a[0],h=a[1],u=0,c=1,p=s[0]-l,d=s[1]-h;if(o=e-l,p||!(o>0)){if(o/=p,p<0){if(o<u)return;o<c&&(c=o)}else if(p>0){if(o>c)return;o>u&&(u=o)}if(o=n-l,p||!(o<0)){if(o/=p,p<0){if(o>c)return;o>u&&(u=o)}else if(p>0){if(o<u)return;o<c&&(c=o)}if(o=i-h,d||!(o>0)){if(o/=d,d<0){if(o<u)return;o<c&&(c=o)}else if(d>0){if(o>c)return;o>u&&(u=o)}if(o=r-h,d||!(o<0)){if(o/=d,d<0){if(o>c)return;o>u&&(u=o)}else if(d>0){if(o<u)return;o<c&&(c=o)}return!(u>0)&&!(c<1)||(u>0&&(t[0]=[l+u*p,h+u*d]),c<1&&(t[1]=[l+c*p,h+c*d])),!0}}}}}function JL(t,e,i,n,r){var o=t[1];if(o)return!0;var a,s,l=t[0],h=t.left,u=t.right,c=h[0],p=h[1],d=u[0],f=u[1],g=(c+d)/2,m=(p+f)/2;if(f===p){if(g<e||g>=n)return;if(c>d){if(l){if(l[1]>=r)return}else l=[g,i];o=[g,r]}else{if(l){if(l[1]<i)return}else l=[g,r];o=[g,i]}}else if(s=m-(a=(c-d)/(f-p))*g,a<-1||a>1)if(c>d){if(l){if(l[1]>=r)return}else l=[(i-s)/a,i];o=[(r-s)/a,r]}else{if(l){if(l[1]<i)return}else l=[(r-s)/a,r];o=[(i-s)/a,i]}else if(p<f){if(l){if(l[0]>=n)return}else l=[e,a*e+s];o=[n,a*n+s]}else{if(l){if(l[0]<e)return}else l=[n,a*n+s];o=[e,a*e+s]}return t[0]=l,t[1]=o,!0}function KL(t,e,i,n){for(var r,o=xO.length;o--;)JL(r=xO[o],t,e,i,n)&&ZL(r,t,e,i,n)&&(Math.abs(r[0][0]-r[1][0])>bO||Math.abs(r[0][1]-r[1][1])>bO)||delete xO[o]}function QL(t){return yO[t.index]={site:t,halfedges:[]}}function $L(t,e){var i=t.site,n=e.left,r=e.right;return i===r&&(r=n,n=i),r?Math.atan2(r[1]-n[1],r[0]-n[0]):(i===n?(n=e[1],r=e[0]):(n=e[0],r=e[1]),Math.atan2(n[0]-r[0],r[1]-n[1]))}function tO(t,e){return e[+(e.left!==t.site)]}function eO(t,e){return e[+(e.left===t.site)]}function iO(){for(var t,e,i,n,r=0,o=yO.length;r<o;++r)if((t=yO[r])&&(n=(e=t.halfedges).length)){var a=new Array(n),s=new Array(n);for(i=0;i<n;++i)a[i]=i,s[i]=$L(t,xO[e[i]]);for(a.sort(function(t,e){return s[e]-s[t]}),i=0;i<n;++i)s[i]=e[a[i]];for(i=0;i<n;++i)e[i]=s[i]}}function nO(t,e,i,n){var r,o,a,s,l,h,u,c,p,d,f,g,m=yO.length,v=!0;for(r=0;r<m;++r)if(o=yO[r]){for(a=o.site,s=(l=o.halfedges).length;s--;)xO[l[s]]||l.splice(s,1);for(s=0,h=l.length;s<h;)f=(d=eO(o,xO[l[s]]))[0],g=d[1],c=(u=tO(o,xO[l[++s%h]]))[0],p=u[1],(Math.abs(f-c)>bO||Math.abs(g-p)>bO)&&(l.splice(s,0,xO.push(XL(a,d,Math.abs(f-t)<bO&&n-g>bO?[t,Math.abs(c-t)<bO?p:n]:Math.abs(g-n)<bO&&i-f>bO?[Math.abs(p-n)<bO?c:i,n]:Math.abs(f-i)<bO&&g-e>bO?[i,Math.abs(c-i)<bO?p:e]:Math.abs(g-e)<bO&&f-t>bO?[Math.abs(p-e)<bO?c:t,e]:null))-1),++h);h&&(v=!1)}if(v){var y,_,x,b=1/0;for(r=0,v=null;r<m;++r)(o=yO[r])&&(x=(y=(a=o.site)[0]-t)*y+(_=a[1]-e)*_)<b&&(b=x,v=o);if(v){var w=[t,e],E=[t,n],M=[i,n],S=[i,e];v.halfedges.push(xO.push(XL(a=v.site,w,E))-1,xO.push(XL(a,E,M))-1,xO.push(XL(a,M,S))-1,xO.push(XL(a,S,w))-1)}}for(r=0;r<m;++r)(o=yO[r])&&(o.halfedges.length||delete yO[r])}(0,n.a)(),(0,n.a)(),(0,r.a)(WL,"createEdge"),(0,r.a)(XL,"createBorderEdge"),(0,r.a)(YL,"setEdgeEnd"),(0,r.a)(ZL,"clipEdge"),(0,r.a)(JL,"connectEdge"),(0,r.a)(KL,"clipEdges"),(0,r.a)(QL,"createCell"),(0,r.a)($L,"cellHalfedgeAngle"),(0,r.a)(tO,"cellHalfedgeStart"),(0,r.a)(eO,"cellHalfedgeEnd"),(0,r.a)(iO,"sortCellHalfedges"),(0,r.a)(nO,"clipCells"),(0,n.a)();var rO,oO=[];function aO(){zL(this),this.x=this.y=this.arc=this.site=this.cy=null}function sO(t){var e=t.P,i=t.N;if(e&&i){var n=e.site,r=t.site,o=i.site;if(n!==o){var a=r[0],s=r[1],l=n[0]-a,h=n[1]-s,u=o[0]-a,c=o[1]-s,p=2*(l*c-h*u);if(!(p>=-wO)){var d=l*l+h*h,f=u*u+c*c,g=(c*d-h*f)/p,m=(l*f-u*d)/p,v=oO.pop()||new aO;v.arc=t,v.site=r,v.x=g+a,v.y=(v.cy=m+s)+Math.sqrt(g*g+m*m),t.circle=v;for(var y=null,_=_O._;_;)if(v.y<_.y||v.y===_.y&&v.x<=_.x){if(!_.L){y=_.P;break}_=_.L}else{if(!_.R){y=_;break}_=_.R}_O.insert(y,v),y||(rO=v)}}}}function lO(t){var e=t.circle;e&&(e.P||(rO=e.N),_O.remove(e),oO.push(e),zL(e),t.circle=null)}(0,r.a)(aO,"Circle"),(0,r.a)(sO,"attachCircle"),(0,r.a)(lO,"detachCircle");var hO=[];function uO(){zL(this),this.edge=this.site=this.circle=null}function cO(t){var e=hO.pop()||new uO;return e.site=t,e}function pO(t){lO(t),vO.remove(t),hO.push(t),zL(t)}function dO(t){var e=t.circle,i=e.x,n=e.cy,r=[i,n],o=t.P,a=t.N,s=[t];pO(t);for(var l=o;l.circle&&Math.abs(i-l.circle.x)<bO&&Math.abs(n-l.circle.cy)<bO;)o=l.P,s.unshift(l),pO(l),l=o;s.unshift(l),lO(l);for(var h=a;h.circle&&Math.abs(i-h.circle.x)<bO&&Math.abs(n-h.circle.cy)<bO;)a=h.N,s.push(h),pO(h),h=a;s.push(h),lO(h);var u,c=s.length;for(u=1;u<c;++u)h=s[u],l=s[u-1],YL(h.edge,l.site,h.site,r);l=s[0],(h=s[c-1]).edge=WL(l.site,h.site,null,r),sO(l),sO(h)}function fO(t){for(var e,i,n,r,o=t[0],a=t[1],s=vO._;s;)if((n=gO(s,a)-o)>bO)s=s.L;else{if(!((r=o-mO(s,a))>bO)){n>-bO?(e=s.P,i=s):r>-bO?(e=s,i=s.N):e=i=s;break}if(!s.R){e=s;break}s=s.R}QL(t);var l=cO(t);if(vO.insert(e,l),e||i){if(e===i)return lO(e),i=cO(e.site),vO.insert(l,i),l.edge=i.edge=WL(e.site,l.site),sO(e),void sO(i);if(!i)return void(l.edge=WL(e.site,l.site));lO(e),lO(i);var h=e.site,u=h[0],c=h[1],p=t[0]-u,d=t[1]-c,f=i.site,g=f[0]-u,m=f[1]-c,v=2*(p*m-d*g),y=p*p+d*d,_=g*g+m*m,x=[(m*y-d*_)/v+u,(p*_-g*y)/v+c];YL(i.edge,h,f,x),l.edge=WL(h,t,null,x),i.edge=WL(t,f,null,x),sO(e),sO(i)}}function gO(t,e){var i=t.site,n=i[0],r=i[1],o=r-e;if(!o)return n;var a=t.P;if(!a)return-1/0;var s=(i=a.site)[0],l=i[1],h=l-e;if(!h)return s;var u=s-n,c=1/o-1/h,p=u/h;return c?(-p+Math.sqrt(p*p-2*c*(u*u/(-2*h)-l+h/2+r-o/2)))/c+n:(n+s)/2}function mO(t,e){var i=t.N;if(i)return gO(i,e);var n=t.site;return n[1]===e?n[0]:1/0}(0,r.a)(uO,"Beach"),(0,r.a)(cO,"createBeach"),(0,r.a)(pO,"detachBeach"),(0,r.a)(dO,"removeBeach"),(0,r.a)(fO,"addBeach"),(0,r.a)(gO,"leftBreakPoint"),(0,r.a)(mO,"rightBreakPoint");var vO,yO,_O,xO,bO=1e-6,wO=1e-12;function EO(t,e,i){return(t[0]-i[0])*(e[1]-t[1])-(t[0]-e[0])*(i[1]-t[1])}function MO(t,e){return e[1]-t[1]||e[0]-t[0]}function SO(t,e){var i,n,r,o=t.sort(MO).pop();for(xO=[],yO=new Array(t.length),vO=new HL,_O=new HL;;)if(r=rO,o&&(!r||o[1]<r.y||o[1]===r.y&&o[0]<r.x))(o[0]!==i||o[1]!==n)&&(fO(o),i=o[0],n=o[1]),o=t.pop();else{if(!r)break;dO(r.arc)}if(iO(),e){var a=+e[0][0],s=+e[0][1],l=+e[1][0],h=+e[1][1];KL(a,s,l,h),nO(a,s,l,h)}this.edges=xO,this.cells=yO,vO=_O=xO=yO=null}(0,r.a)(EO,"triangleArea"),(0,r.a)(MO,"lexicographic"),(0,r.a)(SO,"Diagram"),SO.prototype={constructor:SO,polygons:function(){var t=this.edges;return this.cells.map(function(e){var i=e.halfedges.map(function(i){return tO(e,t[i])});return i.data=e.site.data,i})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(i,n){if(o=(r=i.halfedges).length)for(var r,o,a,s=i.site,l=-1,h=e[r[o-1]],u=h.left===s?h.right:h.left;++l<o;)a=u,u=(h=e[r[l]]).left===s?h.right:h.left,a&&u&&n<a.index&&n<u.index&&EO(s,a,u)<0&&t.push([s.data,a.data,u.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,i){for(var n,r,o=this,a=o._found||0,s=o.cells.length;!(r=o.cells[a]);)if(++a>=s)return null;var l=t-r.site[0],h=e-r.site[1],u=l*l+h*h;do{r=o.cells[n=a],a=null,r.halfedges.forEach(function(i){var n=o.edges[i],s=n.left;if(s!==r.site&&s||(s=n.right)){var l=t-s[0],h=e-s[1],c=l*l+h*h;c<u&&(u=c,a=s.index)}})}while(null!==a);return o._found=n,null==i||u<=i*i?r.site:null}},(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)();var TO=(0,r.e)(oe(),1);(0,n.a)();var CO=(0,r.e)(ae(),1);function AO(){return new PO}function PO(){this.reset()}(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,r.a)(AO,"default"),(0,r.a)(PO,"Adder"),PO.prototype={constructor:PO,reset:function(){this.s=this.t=0},add:function(t){LO(IO,t,this.t),LO(this,IO.s,this.s),this.s?this.t+=IO.t:this.s=IO.t},valueOf:function(){return this.s}};var IO=new PO;function LO(t,e,i){var n=t.s=e+i,r=n-e,o=n-r;t.t=e-o+(i-r)}(0,r.a)(LO,"add"),(0,n.a)();var OO=1e-6,NO=Math.PI,qO=NO/2,RO=NO/4,DO=2*NO,kO=180/NO,BO=NO/180,FO=Math.abs,UO=Math.atan,zO=Math.atan2,VO=Math.cos,jO=Math.exp,GO=Math.log,HO=Math.sin,WO=Math.sqrt,XO=Math.tan;function YO(t){return t>1?0:t<-1?NO:Math.acos(t)}function ZO(t){return t>1?qO:t<-1?-qO:Math.asin(t)}function JO(){}function KO(t,e){t&&$O.hasOwnProperty(t.type)&&$O[t.type](t,e)}(0,r.a)(YO,"acos"),(0,r.a)(ZO,"asin"),(0,n.a)(),(0,r.a)(JO,"noop"),(0,n.a)(),(0,r.a)(KO,"streamGeometry");var QO={Feature:function(t,e){KO(t.geometry,e)},FeatureCollection:function(t,e){for(var i=t.features,n=-1,r=i.length;++n<r;)KO(i[n].geometry,e)}},$O={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)t=i[n],e.point(t[0],t[1],t[2])},LineString:function(t,e){tN(t.coordinates,e,0)},MultiLineString:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)tN(i[n],e,0)},Polygon:function(t,e){eN(t.coordinates,e)},MultiPolygon:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)eN(i[n],e)},GeometryCollection:function(t,e){for(var i=t.geometries,n=-1,r=i.length;++n<r;)KO(i[n],e)}};function tN(t,e,i){var n,r=-1,o=t.length-i;for(e.lineStart();++r<o;)n=t[r],e.point(n[0],n[1],n[2]);e.lineEnd()}function eN(t,e){var i=-1,n=t.length;for(e.polygonStart();++i<n;)tN(t[i],e,1);e.polygonEnd()}function iN(t,e){t&&QO.hasOwnProperty(t.type)?QO[t.type](t,e):KO(t,e)}(0,r.a)(tN,"streamLine"),(0,r.a)(eN,"streamPolygon"),(0,r.a)(iN,"default");var nN=AO(),rN=AO();function oN(t){return[zO(t[1],t[0]),ZO(t[2])]}function aN(t){var e=t[0],i=t[1],n=VO(i);return[n*VO(e),n*HO(e),HO(i)]}function sN(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function lN(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function hN(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function uN(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function cN(t){var e=WO(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}(0,n.a)(),(0,n.a)(),(0,r.a)(oN,"spherical"),(0,r.a)(aN,"cartesian"),(0,r.a)(sN,"cartesianDot"),(0,r.a)(lN,"cartesianCross"),(0,r.a)(hN,"cartesianAddInPlace"),(0,r.a)(uN,"cartesianScale"),(0,r.a)(cN,"cartesianNormalizeInPlace");var pN=AO();function dN(t,e){function i(i,n){return i=t(i,n),e(i[0],i[1])}return(0,r.a)(i,"compose"),t.invert&&e.invert&&(i.invert=function(i,n){return(i=e.invert(i,n))&&t.invert(i[0],i[1])}),i}function fN(t,e){return[t>NO?t-DO:t<-NO?t+DO:t,e]}function gN(t,e,i){return(t%=DO)?e||i?dN(vN(t),yN(e,i)):vN(t):e||i?yN(e,i):fN}function mN(t){return function(e,i){return[(e+=t)>NO?e-DO:e<-NO?e+DO:e,i]}}function vN(t){var e=mN(t);return e.invert=mN(-t),e}function yN(t,e){var i=VO(t),n=HO(t),o=VO(e),a=HO(e);function s(t,e){var r=VO(e),s=VO(t)*r,l=HO(t)*r,h=HO(e),u=h*i+s*n;return[zO(l*o-u*a,s*i-h*n),ZO(u*o+l*a)]}return(0,r.a)(s,"rotation"),s.invert=function(t,e){var r=VO(e),s=VO(t)*r,l=HO(t)*r,h=HO(e),u=h*o-l*a;return[zO(l*o+h*a,s*i+u*n),ZO(u*i-s*n)]},s}function _N(t,e,i,n,r,o){if(i){var a=VO(e),s=HO(e),l=n*i;null==r?(r=e+n*DO,o=e-l/2):(r=xN(a,r),o=xN(a,o),(n>0?r<o:r>o)&&(r+=n*DO));for(var h,u=r;n>0?u>o:u<o;u-=l)h=oN([a,-s*VO(u),-s*HO(u)]),t.point(h[0],h[1])}}function xN(t,e){(e=aN(e))[0]-=t,cN(e);var i=YO(-e[1]);return((-e[2]<0?-i:i)+DO-OO)%DO}function bN(){var t,e=[];return{point:function(e,i){t.push([e,i])},lineStart:function(){e.push(t=[])},lineEnd:JO,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}}function wN(t,e,i,n,r,o){var a,s=t[0],l=t[1],h=0,u=1,c=e[0]-s,p=e[1]-l;if(a=i-s,c||!(a>0)){if(a/=c,c<0){if(a<h)return;a<u&&(u=a)}else if(c>0){if(a>u)return;a>h&&(h=a)}if(a=r-s,c||!(a<0)){if(a/=c,c<0){if(a>u)return;a>h&&(h=a)}else if(c>0){if(a<h)return;a<u&&(u=a)}if(a=n-l,p||!(a>0)){if(a/=p,p<0){if(a<h)return;a<u&&(u=a)}else if(p>0){if(a>u)return;a>h&&(h=a)}if(a=o-l,p||!(a<0)){if(a/=p,p<0){if(a>u)return;a>h&&(h=a)}else if(p>0){if(a<h)return;a<u&&(u=a)}return h>0&&(t[0]=s+h*c,t[1]=l+h*p),u<1&&(e[0]=s+u*c,e[1]=l+u*p),!0}}}}}function EN(t,e){return FO(t[0]-e[0])<OO&&FO(t[1]-e[1])<OO}function MN(t,e,i,n){this.x=t,this.z=e,this.o=i,this.e=n,this.v=!1,this.n=this.p=null}function SN(t,e,i,n,r){var o,a,s=[],l=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,i,n=t[0],a=t[e];if(EN(n,a)){for(r.lineStart(),o=0;o<e;++o)r.point((n=t[o])[0],n[1]);return void r.lineEnd()}s.push(i=new MN(n,t,null,!0)),l.push(i.o=new MN(n,null,i,!1)),s.push(i=new MN(a,t,null,!1)),l.push(i.o=new MN(a,null,i,!0))}}),s.length){for(l.sort(e),TN(s),TN(l),o=0,a=l.length;o<a;++o)l[o].e=i=!i;for(var h,u,c=s[0];;){for(var p=c,d=!0;p.v;)if((p=p.n)===c)return;h=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(o=0,a=h.length;o<a;++o)r.point((u=h[o])[0],u[1]);else n(p.x,p.n.x,1,r);p=p.n}else{if(d)for(h=p.p.z,o=h.length-1;o>=0;--o)r.point((u=h[o])[0],u[1]);else n(p.x,p.p.x,-1,r);p=p.p}h=(p=p.o).z,d=!d}while(!p.v);r.lineEnd()}}}function TN(t){if(e=t.length){for(var e,i,n=0,r=t[0];++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function CN(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function AN(t){return 1===t.length&&(t=PN(t)),{left:function(e,i,n,r){for(null==n&&(n=0),null==r&&(r=e.length);n<r;){var o=n+r>>>1;t(e[o],i)<0?n=o+1:r=o}return n},right:function(e,i,n,r){for(null==n&&(n=0),null==r&&(r=e.length);n<r;){var o=n+r>>>1;t(e[o],i)>0?r=o:n=o+1}return n}}}function PN(t){return function(e,i){return CN(t(e),i)}}(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,r.a)(dN,"default"),(0,r.a)(fN,"rotationIdentity"),fN.invert=fN,(0,r.a)(gN,"rotateRadians"),(0,r.a)(mN,"forwardRotationLambda"),(0,r.a)(vN,"rotationLambda"),(0,r.a)(yN,"rotationPhiGamma"),(0,r.a)(_N,"circleStream"),(0,r.a)(xN,"circleRadius"),(0,n.a)(),(0,n.a)(),(0,r.a)(bN,"default"),(0,n.a)(),(0,r.a)(wN,"default"),(0,n.a)(),(0,n.a)(),(0,r.a)(EN,"default"),(0,r.a)(MN,"Intersection"),(0,r.a)(SN,"default"),(0,r.a)(TN,"link"),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,r.a)(CN,"default"),(0,n.a)(),(0,r.a)(AN,"default"),(0,r.a)(PN,"ascendingComparator");var IN=AN(CN),LN=IN.right,ON=IN.left;(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)();var NN=Array.prototype,qN=NN.slice,RN=NN.map;(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)();var DN=Math.sqrt(50),kN=Math.sqrt(10),BN=Math.sqrt(2);function FN(t){for(var e,i,n,r=t.length,o=-1,a=0;++o<r;)a+=t[o].length;for(i=new Array(a);--r>=0;)for(e=(n=t[r]).length;--e>=0;)i[--a]=n[e];return i}(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,r.a)(FN,"default"),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)();var UN=1e9,zN=-UN;function VN(t,e,i,n){function o(r,o){return t<=r&&r<=i&&e<=o&&o<=n}function a(r,o,a,l){var u=0,c=0;if(null==r||(u=s(r,a))!==(c=s(o,a))||h(r,o)<0^a>0)do{l.point(0===u||3===u?t:i,u>1?n:e)}while((u=(u+a+4)%4)!==c);else l.point(o[0],o[1])}function s(n,r){return FO(n[0]-t)<OO?r>0?0:3:FO(n[0]-i)<OO?r>0?2:1:FO(n[1]-e)<OO?r>0?1:0:r>0?3:2}function l(t,e){return h(t.x,e.x)}function h(t,e){var i=s(t,1),n=s(e,1);return i!==n?i-n:0===i?e[1]-t[1]:1===i?t[0]-e[0]:2===i?t[1]-e[1]:e[0]-t[0]}return(0,r.a)(o,"visible"),(0,r.a)(a,"interpolate"),(0,r.a)(s,"corner"),(0,r.a)(l,"compareIntersection"),(0,r.a)(h,"comparePoint"),function(s){var h,u,c,p,d,f,g,m,v,y,_,x=s,b=bN(),w={point:E,lineStart:C,lineEnd:A,polygonStart:S,polygonEnd:T};function E(t,e){o(t,e)&&x.point(t,e)}function M(){for(var e=0,i=0,r=u.length;i<r;++i)for(var o,a,s=u[i],l=1,h=s.length,c=s[0],p=c[0],d=c[1];l<h;++l)o=p,a=d,p=(c=s[l])[0],d=c[1],a<=n?d>n&&(p-o)*(n-a)>(d-a)*(t-o)&&++e:d<=n&&(p-o)*(n-a)<(d-a)*(t-o)&&--e;return e}function S(){x=b,h=[],u=[],_=!0}function T(){var t=M(),e=_&&t,i=(h=FN(h)).length;(e||i)&&(s.polygonStart(),e&&(s.lineStart(),a(null,null,1,s),s.lineEnd()),i&&SN(h,l,t,a,s),s.polygonEnd()),x=s,h=u=c=null}function C(){w.point=P,u&&u.push(c=[]),y=!0,v=!1,g=m=NaN}function A(){h&&(P(p,d),f&&v&&b.rejoin(),h.push(b.result())),w.point=E,v&&x.lineEnd()}function P(r,a){var s=o(r,a);if(u&&c.push([r,a]),y)p=r,d=a,f=s,y=!1,s&&(x.lineStart(),x.point(r,a));else if(s&&v)x.point(r,a);else{var l=[g=Math.max(zN,Math.min(UN,g)),m=Math.max(zN,Math.min(UN,m))],h=[r=Math.max(zN,Math.min(UN,r)),a=Math.max(zN,Math.min(UN,a))];wN(l,h,t,e,i,n)?(v||(x.lineStart(),x.point(l[0],l[1])),x.point(h[0],h[1]),s||x.lineEnd(),_=!1):s&&(x.lineStart(),x.point(r,a),_=!1)}g=r,m=a,v=s}return(0,r.a)(E,"point"),(0,r.a)(M,"polygonInside"),(0,r.a)(S,"polygonStart"),(0,r.a)(T,"polygonEnd"),(0,r.a)(C,"lineStart"),(0,r.a)(A,"lineEnd"),(0,r.a)(P,"linePoint"),w}}(0,r.a)(VN,"clipExtent"),(0,n.a)(),(0,n.a)();var jN=AO();function GN(t,e){var i=e[0],n=e[1],r=[HO(i),-VO(i),0],o=0,a=0;jN.reset();for(var s=0,l=t.length;s<l;++s)if(u=(h=t[s]).length)for(var h,u,c=h[u-1],p=c[0],d=c[1]/2+RO,f=HO(d),g=VO(d),m=0;m<u;++m,p=y,f=x,g=b,c=v){var v=h[m],y=v[0],_=v[1]/2+RO,x=HO(_),b=VO(_),w=y-p,E=w>=0?1:-1,M=E*w,S=M>NO,T=f*x;if(jN.add(zO(T*E*HO(M),g*b+T*VO(M))),o+=S?w+E*DO:w,S^p>=i^y>=i){var C=lN(aN(c),aN(v));cN(C);var A=lN(r,C);cN(A);var P=(S^w>=0?-1:1)*ZO(A[2]);(n>P||n===P&&(C[0]||C[1]))&&(a+=S^w>=0?1:-1)}}return(o<-OO||o<OO&&jN<-OO)^1&a}(0,r.a)(GN,"default"),(0,n.a)(),(0,n.a)();var HN=AO();function WN(t){return t}(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,r.a)(WN,"default"),(0,n.a)();var XN=AO(),YN=AO();(0,n.a)();var ZN=1/0,JN=ZN,KN=-ZN,QN=KN,$N={point:tq,lineStart:JO,lineEnd:JO,polygonStart:JO,polygonEnd:JO,result:function(){var t=[[ZN,JN],[KN,QN]];return KN=QN=-(JN=ZN=1/0),t}};function tq(t,e){t<ZN&&(ZN=t),t>KN&&(KN=t),e<JN&&(JN=e),e>QN&&(QN=e)}(0,r.a)(tq,"boundsPoint");var eq=$N;function iq(t){this._context=t}(0,n.a)(),(0,n.a)(),(0,r.a)(iq,"PathContext"),iq.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,DO)}},result:JO},(0,n.a)();var nq=AO();function rq(){this._string=[]}function oq(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function aq(t,e,i,n){return function(o,a){var s,l,h,u=e(a),c=o.invert(n[0],n[1]),p=bN(),d=e(p),f=!1,g={point:m,lineStart:y,lineEnd:_,polygonStart:function(){g.point=x,g.lineStart=b,g.lineEnd=w,l=[],s=[]},polygonEnd:function(){g.point=m,g.lineStart=y,g.lineEnd=_,l=FN(l);var t=GN(s,c);l.length?(f||(a.polygonStart(),f=!0),SN(l,lq,t,i,a)):t&&(f||(a.polygonStart(),f=!0),a.lineStart(),i(null,null,1,a),a.lineEnd()),f&&(a.polygonEnd(),f=!1),l=s=null},sphere:function(){a.polygonStart(),a.lineStart(),i(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function m(e,i){var n=o(e,i);t(e=n[0],i=n[1])&&a.point(e,i)}function v(t,e){var i=o(t,e);u.point(i[0],i[1])}function y(){g.point=v,u.lineStart()}function _(){g.point=m,u.lineEnd()}function x(t,e){h.push([t,e]);var i=o(t,e);d.point(i[0],i[1])}function b(){d.lineStart(),h=[]}function w(){x(h[0][0],h[0][1]),d.lineEnd();var t,e,i,n,r=d.clean(),o=p.result(),u=o.length;if(h.pop(),s.push(h),h=null,u){if(1&r){if((e=(i=o[0]).length-1)>0){for(f||(a.polygonStart(),f=!0),a.lineStart(),t=0;t<e;++t)a.point((n=i[t])[0],n[1]);a.lineEnd()}return}u>1&&2&r&&o.push(o.pop().concat(o.shift())),l.push(o.filter(sq))}}return(0,r.a)(m,"point"),(0,r.a)(v,"pointLine"),(0,r.a)(y,"lineStart"),(0,r.a)(_,"lineEnd"),(0,r.a)(x,"pointRing"),(0,r.a)(b,"ringStart"),(0,r.a)(w,"ringEnd"),g}}function sq(t){return t.length>1}function lq(t,e){return((t=t.x)[0]<0?t[1]-qO-OO:qO-t[1])-((e=e.x)[0]<0?e[1]-qO-OO:qO-e[1])}(0,n.a)(),(0,r.a)(rq,"PathString"),rq.prototype={_radius:4.5,_circle:oq(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=oq(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},(0,r.a)(oq,"circle"),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,r.a)(aq,"default"),(0,r.a)(sq,"validSegment"),(0,r.a)(lq,"compareIntersection");var hq=aq(function(){return!0},uq,pq,[-NO,-qO]);function uq(t){var e,i=NaN,n=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?NO:-NO,l=FO(o-i);FO(l-NO)<OO?(t.point(i,n=(n+a)/2>0?qO:-qO),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),t.point(o,n),e=0):r!==s&&l>=NO&&(FO(i-r)<OO&&(i-=r*OO),FO(o-s)<OO&&(o-=s*OO),n=cq(i,n,o,a),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),e=0),t.point(i=o,n=a),r=s},lineEnd:function(){t.lineEnd(),i=n=NaN},clean:function(){return 2-e}}}function cq(t,e,i,n){var r,o,a=HO(t-i);return FO(a)>OO?UO((HO(e)*(o=VO(n))*HO(i)-HO(n)*(r=VO(e))*HO(t))/(r*o*a)):(e+n)/2}function pq(t,e,i,n){var r;if(null==t)r=i*qO,n.point(-NO,r),n.point(0,r),n.point(NO,r),n.point(NO,0),n.point(NO,-r),n.point(0,-r),n.point(-NO,-r),n.point(-NO,0),n.point(-NO,r);else if(FO(t[0]-e[0])>OO){var o=t[0]<e[0]?NO:-NO;r=i*o/2,n.point(-o,r),n.point(0,r),n.point(o,r)}else n.point(e[0],e[1])}function dq(t,e){var i=VO(t),n=i>0,o=FO(i)>OO;function a(i,n,r,o){_N(o,t,e,r,i,n)}function s(t,e){return VO(t)*VO(e)>i}function l(t){var e,i,r,a,l;return{lineStart:function(){a=r=!1,l=1},point:function(c,p){var d,f=[c,p],g=s(c,p),m=n?g?0:u(c,p):g?u(c+(c<0?NO:-NO),p):0;if(!e&&(a=r=g)&&t.lineStart(),g!==r&&(!(d=h(e,f))||EN(e,d)||EN(f,d))&&(f[0]+=OO,f[1]+=OO,g=s(f[0],f[1])),g!==r)l=0,g?(t.lineStart(),d=h(f,e),t.point(d[0],d[1])):(d=h(e,f),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(o&&e&&n^g){var v;!(m&i)&&(v=h(f,e,!0))&&(l=0,n?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}g&&(!e||!EN(e,f))&&t.point(f[0],f[1]),e=f,r=g,i=m},lineEnd:function(){r&&t.lineEnd(),e=null},clean:function(){return l|(a&&r)<<1}}}function h(t,e,n){var r=[1,0,0],o=lN(aN(t),aN(e)),a=sN(o,o),s=o[0],l=a-s*s;if(!l)return!n&&t;var h=i*a/l,u=-i*s/l,c=lN(r,o),p=uN(r,h);hN(p,uN(o,u));var d=c,f=sN(p,d),g=sN(d,d),m=f*f-g*(sN(p,p)-1);if(!(m<0)){var v=WO(m),y=uN(d,(-f-v)/g);if(hN(y,p),y=oN(y),!n)return y;var _,x=t[0],b=e[0],w=t[1],E=e[1];b<x&&(_=x,x=b,b=_);var M=b-x,S=FO(M-NO)<OO;if(!S&&E<w&&(_=w,w=E,E=_),S||M<OO?S?w+E>0^y[1]<(FO(y[0]-x)<OO?w:E):w<=y[1]&&y[1]<=E:M>NO^(x<=y[0]&&y[0]<=b)){var T=uN(d,(-f+v)/g);return hN(T,p),[y,oN(T)]}}}function u(e,i){var r=n?t:NO-t,o=0;return e<-r?o|=1:e>r&&(o|=2),i<-r?o|=4:i>r&&(o|=8),o}return(0,r.a)(a,"interpolate"),(0,r.a)(s,"visible"),(0,r.a)(l,"clipLine"),(0,r.a)(h,"intersect"),(0,r.a)(u,"code"),aq(s,l,a,n?[0,-t]:[-NO,t-NO])}function fq(t){return function(e){var i=new gq;for(var n in t)i[n]=t[n];return i.stream=e,i}}function gq(){}function mq(t,e,i){var n=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),iN(i,t.stream(eq));var a=eq.result(),s=Math.min(n/(a[1][0]-a[0][0]),r/(a[1][1]-a[0][1])),l=+e[0][0]+(n-s*(a[1][0]+a[0][0]))/2,h=+e[0][1]+(r-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([l,h])}function vq(t,e,i){return mq(t,[[0,0],e],i)}(0,r.a)(uq,"clipAntimeridianLine"),(0,r.a)(cq,"clipAntimeridianIntersect"),(0,r.a)(pq,"clipAntimeridianInterpolate"),(0,n.a)(),(0,r.a)(dq,"default"),(0,n.a)(),(0,r.a)(fq,"transformer"),(0,r.a)(gq,"TransformStream"),gq.prototype={constructor:gq,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},(0,n.a)(),(0,r.a)(mq,"fitExtent"),(0,r.a)(vq,"fitSize"),(0,n.a)();var yq=16,_q=VO(30*BO);function xq(t,e){return+e?wq(t,e):bq(t)}function bq(t){return fq({point:function(e,i){e=t(e,i),this.stream.point(e[0],e[1])}})}function wq(t,e){function i(n,r,o,a,s,l,h,u,c,p,d,f,g,m){var v=h-n,y=u-r,_=v*v+y*y;if(_>4*e&&g--){var x=a+p,b=s+d,w=l+f,E=WO(x*x+b*b+w*w),M=ZO(w/=E),S=FO(FO(w)-1)<OO||FO(o-c)<OO?(o+c)/2:zO(b,x),T=t(S,M),C=T[0],A=T[1],P=C-n,I=A-r,L=y*P-v*I;(L*L/_>e||FO((v*P+y*I)/_-.5)>.3||a*p+s*d+l*f<_q)&&(i(n,r,o,a,s,l,C,A,S,x/=E,b/=E,w,g,m),m.point(C,A),i(C,A,S,x,b,w,h,u,c,p,d,f,g,m))}}return(0,r.a)(i,"resampleLineTo"),function(e){var n,o,a,s,l,h,u,c,p,d,f,g,m={point:v,lineStart:y,lineEnd:x,polygonStart:function(){e.polygonStart(),m.lineStart=b},polygonEnd:function(){e.polygonEnd(),m.lineStart=y}};function v(i,n){i=t(i,n),e.point(i[0],i[1])}function y(){c=NaN,m.point=_,e.lineStart()}function _(n,r){var o=aN([n,r]),a=t(n,r);i(c,p,u,d,f,g,c=a[0],p=a[1],u=n,d=o[0],f=o[1],g=o[2],yq,e),e.point(c,p)}function x(){m.point=v,e.lineEnd()}function b(){y(),m.point=w,m.lineEnd=E}function w(t,e){_(n=t,e),o=c,a=p,s=d,l=f,h=g,m.point=_}function E(){i(c,p,u,d,f,g,o,a,n,s,l,h,yq,e),m.lineEnd=x,x()}return(0,r.a)(v,"point"),(0,r.a)(y,"lineStart"),(0,r.a)(_,"linePoint"),(0,r.a)(x,"lineEnd"),(0,r.a)(b,"ringStart"),(0,r.a)(w,"ringPoint"),(0,r.a)(E,"ringEnd"),m}}(0,r.a)(xq,"default"),(0,r.a)(bq,"resampleNone"),(0,r.a)(wq,"resample");var Eq=fq({point:function(t,e){this.stream.point(t*BO,e*BO)}});function Mq(t){return Sq(function(){return t})()}function Sq(t){var e,i,n,o,a,s,l,h,u,c,p=150,d=480,f=250,g=0,m=0,v=0,y=0,_=0,x=null,b=hq,w=null,E=WN,M=.5,S=xq(A,M);function T(t){return[(t=a(t[0]*BO,t[1]*BO))[0]*p+i,n-t[1]*p]}function C(t){return(t=a.invert((t[0]-i)/p,(n-t[1])/p))&&[t[0]*kO,t[1]*kO]}function A(t,r){return[(t=e(t,r))[0]*p+i,n-t[1]*p]}function P(){a=dN(o=gN(v,y,_),e);var t=e(g,m);return i=d-t[0]*p,n=f+t[1]*p,I()}function I(){return u=c=null,T}return(0,r.a)(T,"projection"),(0,r.a)(C,"invert"),(0,r.a)(A,"projectTransform"),T.stream=function(t){return u&&c===t?u:u=Eq(b(o,S(E(c=t))))},T.clipAngle=function(t){return arguments.length?(b=+t?dq(x=t*BO,6*BO):(x=null,hq),I()):x*kO},T.clipExtent=function(t){return arguments.length?(E=null==t?(w=s=l=h=null,WN):VN(w=+t[0][0],s=+t[0][1],l=+t[1][0],h=+t[1][1]),I()):null==w?null:[[w,s],[l,h]]},T.scale=function(t){return arguments.length?(p=+t,P()):p},T.translate=function(t){return arguments.length?(d=+t[0],f=+t[1],P()):[d,f]},T.center=function(t){return arguments.length?(g=t[0]%360*BO,m=t[1]%360*BO,P()):[g*kO,m*kO]},T.rotate=function(t){return arguments.length?(v=t[0]%360*BO,y=t[1]%360*BO,_=t.length>2?t[2]%360*BO:0,P()):[v*kO,y*kO,_*kO]},T.precision=function(t){return arguments.length?(S=xq(A,M=t*t),I()):WO(M)},T.fitExtent=function(t,e){return mq(T,t,e)},T.fitSize=function(t,e){return vq(T,t,e)},(0,r.a)(P,"recenter"),(0,r.a)(I,"reset"),function(){return e=t.apply(this,arguments),T.invert=e.invert&&C,P()}}function Tq(t){return function(e,i){var n=VO(e),r=VO(i),o=t(n*r);return[o*r*HO(e),o*HO(i)]}}function Cq(t){return function(e,i){var n=WO(e*e+i*i),r=t(n),o=HO(r),a=VO(r);return[zO(e*o,n*a),ZO(n&&i*o/n)]}}(0,r.a)(Mq,"projection"),(0,r.a)(Sq,"projectionMutator"),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,r.a)(Tq,"azimuthalRaw"),(0,r.a)(Cq,"azimuthalInvert");var Aq=Tq(function(t){return WO(2/(1+t))});Aq.invert=Cq(function(t){return 2*ZO(t/2)}),(0,n.a)();var Pq=Tq(function(t){return(t=YO(t))&&t/HO(t)});function Iq(){return Mq(Pq).scale(79.4188).clipAngle(179.999)}function Lq(t,e){return[t,GO(XO((qO+e)/2))]}function Oq(t,e){return[t,e]}function Nq(t,e){var i=VO(e),n=VO(t)*i;return[i*HO(t)/n,HO(e)/n]}function qq(t,e){var i=e*e,n=i*i;return[t*(.8707-.131979*i+n*(n*(.003971*i-.001529*n)-.013791)),e*(1.007226+i*(.015085+n*(.028874*i-.044475-.005916*n)))]}function Rq(t,e){return[VO(e)*HO(t),HO(e)]}function Dq(t,e){var i=VO(e),n=1+VO(t)*i;return[i*HO(t)/n,HO(e)/n]}function kq(t,e){return[GO(XO((qO+e)/2)),-t]}function Bq(t,e,i){var n=(i=i||{}).units||"kilometers",r=i.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof i)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(r<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return VA(t,function(t){var i=Fq(t,e,n,r);i&&o.push(i)}),LA(o);case"FeatureCollection":return zA(t,function(t){var i=Fq(t,e,n,r);i&&zA(i,function(t){t&&o.push(t)})}),LA(o)}return Fq(t,e,n,r)}function Fq(t,e,i,n){var r=t.properties||{},o="Feature"===t.type?t.geometry:t;if("GeometryCollection"===o.type){var a=[];return VA(t,function(t){var r=Fq(t,e,i,n);r&&a.push(r)}),LA(a)}var s=jq(o),l={type:o.type,coordinates:zq(o.coordinates,s)},h=(new CO.GeoJSONReader).read(l),u=qA(RA(e,i),"meters"),c=CO.BufferOp.bufferOp(h,u,n);if(!Uq((c=(new CO.GeoJSONWriter).write(c)).coordinates))return CA({type:c.type,coordinates:Vq(c.coordinates,s)},r)}function Uq(t){return Array.isArray(t[0])?Uq(t[0]):isNaN(t[0])}function zq(t,e){return"object"!=typeof t[0]?e(t):t.map(function(t){return zq(t,e)})}function Vq(t,e){return"object"!=typeof t[0]?e.invert(t):t.map(function(t){return Vq(t,e)})}function jq(t){var e=bP(t).geometry.coordinates,i=[-e[0],-e[1]];return Iq().rotate(i).scale(MA)}Pq.invert=Cq(function(t){return t}),(0,r.a)(Iq,"default"),(0,n.a)(),(0,n.a)(),(0,r.a)(Lq,"mercatorRaw"),Lq.invert=function(t,e){return[t,2*UO(jO(e))-qO]},(0,n.a)(),(0,n.a)(),(0,r.a)(Oq,"equirectangularRaw"),Oq.invert=Oq,(0,n.a)(),(0,r.a)(Nq,"gnomonicRaw"),Nq.invert=Cq(UO),(0,n.a)(),(0,n.a)(),(0,r.a)(qq,"naturalEarth1Raw"),qq.invert=function(t,e){var i,n=e,r=25;do{var o=n*n,a=o*o;n-=i=(n*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(FO(i)>OO&&--r>0);return[t/(.8707+(o=n*n)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),n]},(0,n.a)(),(0,r.a)(Rq,"orthographicRaw"),Rq.invert=Cq(ZO),(0,n.a)(),(0,r.a)(Dq,"stereographicRaw"),Dq.invert=Cq(function(t){return 2*UO(t)}),(0,n.a)(),(0,r.a)(kq,"transverseMercatorRaw"),kq.invert=function(t,e){return[-e,2*UO(jO(t))-qO]},(0,r.a)(Bq,"buffer"),(0,r.a)(Fq,"bufferFeature"),(0,r.a)(Uq,"coordsIsNaN"),(0,r.a)(zq,"projectCoords"),(0,r.a)(Vq,"unprojectCoords"),(0,r.a)(jq,"defineProjection");var Gq=Bq;(0,n.a)();var Hq=(0,r.e)(oe(),1);(0,n.a)();var Wq=(0,r.e)(oe(),1);(0,n.a)();var Xq=(0,r.e)(oe(),1);(0,n.a)(),(0,n.a)();var Yq=(0,r.e)(oe(),1);(0,n.a)(),(0,n.a)(),(0,n.a)(),(0,n.a)();var Zq=1e-7,Jq=.11,Kq=["connection.json","manifest.geojson","map.geojson","node.geojson","styles.json","mapstack.geojson"];function Qq(t,e){let i=eR(e),[n,r]=t.features.reduce((t,e)=>{let[n,r]=t,o=[e],{properties:a}=e,s=(a.entrances||[]).reduce((t,e)=>(i.has(e)&&t.push(i.get(e)),t),[]);if(s.length&&(o=$q(e,s)),"LineString"===o[0].geometry.type){let t=o[0].properties.kind;n.has(t)||n.set(t,[]),n.get(t).push(...o)}else r.push(...o);return t},[new Map,[]]);return n.forEach((t,e)=>{let i={kind:e,id:t[0].properties.id,externalId:t[0].properties.externalId};if(t.length){let e=Gq(OA(t.map(({geometry:t})=>t.coordinates)),Jq,{units:"meters",steps:3});e.properties={...i,...e.properties};let n=[];n="MultiPolygon"===e.geometry.type?e.geometry.coordinates.map(t=>({...PA(t),properties:i})):[e],r=r.concat(n)}}),LA(r)}function $q(t,e){return e.reduce((t,e)=>{let i={epsilon:Zq},n=t.findIndex(t=>UP(bP(e),t,i)),r=t[n];if(r){let[i,o]=tR(r,e);t.splice(n,1,i,o)}return t},[t])}function tR(t,e){let{coordinates:i}=e.geometry,{coordinates:n}=t.geometry,r=i.map(e=>NP(t,AA(e)));return n.reduce((e,i)=>{let n=kP(AA(i),r[0],t),o=kP(AA(i),r[1],t),a=RP(n)<RP(o)?n:o;return a.properties={...t.properties,entrances:[]},e.concat([a])},[])}function eR(t){return new Map(t.features.map(t=>{let{properties:e}=t,{id:i}=e;return[i,t]}))}function iR(t){if(null==t||"object"!=typeof t)return!1;for(let e of Kq)if("Uint8Array"!==t[e][Symbol.toStringTag])return!1;return!0}function nR(t){var e;if(null==t||"object"!=typeof t)return!1;let i=["building.geojson","category.geojson","location.geojson","manifest.geojson"];for(let n of i)if("Uint8Array"!==(null==(e=null==t?void 0:t[n])?void 0:e[Symbol.toStringTag]))return!1;return!0}async function rR(t){return new Promise(async(e,i)=>{try{if(null==t||"object"!=typeof t)throw new Error("Error parsing data! Unzipping failed.");if("Uint8Array"!==t[Symbol.toStringTag])throw new Error("Unexpected file type! Unzipping failed.");let i=(await require("_bundle_loader")(require.resolve("./browser-TNMQUB7G.js"))).unzipSync(t);if(!nR(i))throw new Error("MVF is missing some expect static files. Unzipping failed.");let n={"building.geojson":i["building.geojson"],"category.geojson":i["category.geojson"],"location.geojson":i["location.geojson"],"manifest.geojson":i["manifest.geojson"],space:{},obstruction:{},node:{},level:{},connection:{}},r=Object.keys(i);for(let t of r){if(0===i[t].length)continue;let e=t.split("/");if(e.length<0)throw new Error("Encounted a file with no name! Unzipping failed.");if(e.length>2)throw new Error("Encountered unexpected nesting in MVF! Unzipping failed.");if(1!==e.length){if("image"===e[0]){vy.warn("MVF unzipping encountered an image. Ignoring as this case has not been implemented.");continue}null==n[e[0]]&&(n[e[0]]={}),n[e[0]][e[1]]=i[t]}}e(n)}catch(t){i(t)}})}async function oR(t){return new Promise(async(e,i)=>{try{if(null==t||"object"!=typeof t)throw new Error("Error parsing data! Unzipping failed.");if("Uint8Array"!==t[Symbol.toStringTag])throw new Error("Unexpected file type! Unzipping failed.");let i=(await require("_bundle_loader")(require.resolve("./browser-TNMQUB7G.js"))).unzipSync(t);if(!iR(i))throw new Error("MVF is missing some expect static files. Unzipping failed.");let n={"connection.json":i["connection.json"],"manifest.geojson":i["manifest.geojson"],"node.geojson":i["node.geojson"],"map.geojson":i["map.geojson"],"mapstack.geojson":i["mapstack.geojson"],"styles.json":i["styles.json"],space:{},obstruction:{},entrance:{}},r=Object.keys(i);for(let t of r){if(0===i[t].length)continue;let e=t.split("/");if(e.length<0)throw new Error("Encounted a file with no name! Unzipping failed.");if(e.length>2)throw new Error("Encountered unexpected nesting in MVF! Unzipping failed.");if(1!==e.length){if("image"===e[0]){vy.warn("MVF unzipping encountered an image. Ignoring as this case has not been implemented.");continue}null==n[e[0]]&&(n[e[0]]={}),n[e[0]][e[1]]=i[t]}}e(n)}catch(t){i(t)}})}function aR(t){let[e,i,n,r]=XA(t);return{minLat:i,minLong:e,maxLat:r,maxLong:n}}function sR(t){return null!=t&&(null!=t.polygons||null!=t.lineStrings)}function lR(t){let e=new Map;for(let i in t){let n=t[i];if(!sR(n))continue;let{altitude:r,color:o,height:a,opacity:s}=n;(n.polygons||n.lineStrings).forEach(t=>{e.set(t,{altitude:r,color:o,height:a,opacity:s})})}return e}function hR(t,e,i){let n=i.createGeoreferences(),r=new Set;e.forEach(t=>{t.layer&&r.add(t.layer)});let o=t.id||"",a=t.externalId||o||"",s=t.elevation||0,l=[...r].map(t=>({id:t,visible:!0})),h=1/i.mapScale;return{id:o,georeference:n,name:a,shortName:a,scene:{polygons:e},elevation:s,scale:h,x_scale:h,layers:l,width:i.widthInMapUnits,height:i.heightInMapUnits}}(0,r.a)(Qq,"processObstructions"),(0,r.a)($q,"splitObstructionByAllEntrances"),(0,r.a)(tR,"splitObstructionByEntrance"),(0,r.a)(eR,"getEntranceMap"),(0,r.a)(iR,"validateStaticMVFFiles"),(0,r.a)(nR,"validateStaticMVFv1Files"),(0,r.a)(rR,"unzipMVFv1"),(0,r.a)(oR,"unzipMVF"),(0,r.a)(aR,"getMapExtent"),(0,r.a)(sR,"isPolygonStyle"),(0,r.a)(lR,"getStylesMap"),(0,r.a)(hR,"convertMap");var uR=class{constructor(t){(0,r.f)(this,"mapExtent"),(0,r.f)(this,"stretchRatio"),(0,r.f)(this,"midLat"),(0,r.f)(this,"midLong"),(0,r.f)(this,"mapUnitRatio",1e6),(0,r.f)(this,"latDistance"),(0,r.f)(this,"longDistance"),(0,r.f)(this,"mapScale"),(0,r.f)(this,"widthInMapUnits"),(0,r.f)(this,"heightInMapUnits"),this.mapExtent=t;let{minLat:e,minLong:i,maxLat:n,maxLong:o}=t,a=(e+n)/2,s=(i+o)/2,l=new py(a,o),h=new py(a,i),u=new py(e,s),c=new py(n,s);this.latDistance=u.distanceTo(c),this.longDistance=l.distanceTo(h);let p=this.latDistance/this.longDistance,d=(n-e)/(o-i);this.stretchRatio=p/d,this.midLat=a,this.midLong=s,this.widthInMapUnits=(o-i)*this.mapUnitRatio,this.heightInMapUnits=(n-e)*this.mapUnitRatio*this.stretchRatio,this.mapScale=this.widthInMapUnits/this.longDistance}convert(t){let e=t[1],i=(t[0]-this.midLong)*this.mapUnitRatio,n=(this.midLat-e)*this.mapUnitRatio*this.stretchRatio;return{x:i+this.widthInMapUnits/2,y:n+this.heightInMapUnits/2}}createGeoreferences(){let{minLat:t,minLong:e,maxLat:i,maxLong:n}=this.mapExtent;return[[t,e],[t,n],[i,n],[i,e]].map(t=>({target:{x:t[0],y:t[1]},control:this.convert([t[1],t[0]])}))}};(0,r.a)(uR,"CoordinateConverter");var cR=uR;function pR(t,e){let i=new Map,n=[];return t.features.forEach(t=>{let e=t.properties.id;e&&!i.has(e)&&i.set(e,t)}),i.forEach((t,r)=>{let o=t.properties.map||"",a=e.get(o);if(a){let e=a.convert(t.geometry.coordinates),s=t.properties.externalId||"",l=[];t.properties.neighbors.forEach(t=>{var e;let n=null!=(e=t.weight)?e:0,r=i.get(t.id);r&&r.properties.map===o&&l.push({node:r.properties.id,map:r.properties.map,weight:n})}),n.push({id:r,map:o,externalId:s,paths:l,...e})}}),n}function dR(t,e,i){let n=[];return t.features.forEach(t=>{let r=i.convert(t.geometry.coordinates);n.push({id:t.properties.id,x:r.x,y:r.y,map:e,paths:t.properties.neighbors.map(t=>({node:t,map:e}))})}),n}(0,r.a)(pR,"convertNodes"),(0,r.a)(dR,"convertNodes_MVFv1");var fR=(0,r.a)((t,e,i,n,r)=>{let o=[];return e.features.forEach(e=>{var a;if("Point"===e.geometry.type)return;let s="desk-entrance"===(null==(a=e.properties.kind)?void 0:a.toLowerCase()),l=(s?e.properties.externalId:e.properties.id)||"",h=e.properties.externalId||"",u=i.get(l)||[];if("destinationNodes"in e.properties&&e.properties.destinationNodes.forEach(e=>{u.push({map:t,id:e})}),s&&i.set(h,u),"LineString"===e.geometry.type)return;let c=n.get(e.properties.id),p=e.geometry.coordinates[0].map(t=>r.convert(t)),d=e.properties.center?r.convert(e.properties.center):void 0,f=e.geometry.coordinates.slice(1).map(t=>t.map(t=>r.convert(t))),g=Math.max(r.widthInMapUnits,r.heightInMapUnits)/1e3,m=e.properties.kind||"",v="void"===m.toLowerCase();o.push({entrances:u,map:t,id:l,externalId:h,layer:m,geometry:{visible:!v,position:{x:0,y:0,z:((null==c?void 0:c.altitude)||0)*r.mapScale/g},scale:{x:1,y:1,z:((null==c?void 0:c.height)||1)*r.mapScale/g}},material:{color:(null==c?void 0:c.color)||"#000000"},vertexes:p,center:d,holes:f})}),o},"generateMappedinPolygons"),gR=(0,r.a)((t,e,i)=>{let n=[];return e.features.forEach(e=>{if(!e.geometry.coordinates[0].forEach)return;let r=e.properties,o=e.geometry.coordinates[0].map(t=>i.convert(t)),a=e.geometry.coordinates.slice(1).map(t=>t.map(t=>i.convert(t))),s=Math.max(i.widthInMapUnits,i.heightInMapUnits)/1e3,l=[];"entrances"in e.properties&&e.properties.entrances.forEach(t=>l.push({id:"n_"+t.id,map:t.level})),n.push({entrances:null!=l?l:[],map:t,id:e.properties.id||"",externalId:e.properties.externalId||"",layer:e.properties.layer||"Polygon",geometry:{visible:!0,position:{x:0,y:0,z:((null==r?void 0:r.altitude)||0)*i.mapScale/s},scale:{x:1,y:1,z:((null==r?void 0:r.height)||1)*i.mapScale/s}},material:{color:(null==r?void 0:r.color)||"#000000"},vertexes:o,holes:a})}),n},"generateMappedinPolygons_MVFv1");function mR(t,e,i,n,r,o){let a=fR(t,i,n,r,o),s=fR(t,e,n,r,o);return a.concat(s)}function vR(t){let e=[];return t.forEach(t=>{var i;e.push({id:t.id||"",name:t.externalId||"",type:t.type||"",weight:1e3,multiplier:1,nodes:t.nodes||[],accessible:null!=(i=t.accessible)&&i})}),e}function yR(t){let e=new Map;return t.features.forEach(t=>{var i,n,r,o,a,s,l;let h="",u=["n_".concat(t.properties.id)];t.properties.destinations.forEach(t=>{let e=t.split("-");h=e[0],u.push("n_".concat(e[1]))});let c=null!=(n=null==(i=e.get(h))?void 0:i.nodes)?n:[],p=new Set([...c,...u]);e.set(h,{id:h,name:null!=(r=t.properties.name)?r:"",type:null!=(o=t.properties.type)?o:"",weight:null!=(a=t.properties.weight)?a:1e3,multiplier:null!=(s=t.properties.multiplier)?s:1,nodes:Array.from(p),accessible:null!=(l=t.properties.accessible)&&l})}),Array.from(e.values())}function _R(t){let e=new TextDecoder,i=e.decode.bind(e);try{let e={"connection.json":JSON.parse(i(t["connection.json"])),"manifest.geojson":JSON.parse(i(t["manifest.geojson"])),"styles.json":JSON.parse(i(t["styles.json"])),"map.geojson":JSON.parse(i(t["map.geojson"])),"mapstack.geojson":JSON.parse(i(t["mapstack.geojson"])),"node.geojson":JSON.parse(i(t["node.geojson"])),obstruction:{},space:{},entrance:{},annotation:{}};if(null!=t.annotation){let n=Object.keys(t.annotation);for(let r of n){let n=r.replace(/\.json|\.geojson/g,"");e.annotation[n]=JSON.parse(i(t.annotation[r]))}}let n=Object.keys(t.space);for(let a of n){let n=a.replace(/\.json|\.geojson/g,"");e.space[n]=JSON.parse(i(t.space[a]))}let r=Object.keys(t.obstruction);for(let a of r){let n=a.replace(/\.json|\.geojson/g,"");e.obstruction[n]=JSON.parse(i(t.obstruction[a]))}let o=Object.keys(t.entrance);for(let a of o){let n=a.replace(/\.json|\.geojson/g,"");e.entrance[n]=JSON.parse(i(t.entrance[a]))}return e}catch(t){throw vy.error(t),new Error("MVF parsing failed! Probably encountered a bad file.")}}function xR(t){let e=new TextDecoder,i=e.decode.bind(e);try{let e={"manifest.geojson":JSON.parse(i(t["manifest.geojson"])),"building.geojson":JSON.parse(i(t["building.geojson"])),"category.geojson":JSON.parse(i(t["category.geojson"])),"location.geojson":JSON.parse(i(t["location.geojson"])),obstruction:{},space:{},level:{},node:{},connection:{}},n=Object.keys(t.space);for(let l of n){let n=l.replace(/\.json|\.geojson/g,"");e.space[n]=JSON.parse(i(t.space[l]))}let r=Object.keys(t.obstruction);for(let l of r){let n=l.replace(/\.json|\.geojson/g,"");e.obstruction[n]=JSON.parse(i(t.obstruction[l]))}let o=Object.keys(t.node);for(let l of o){let n=l.replace(/\.json|\.geojson/g,"");e.node[n]=JSON.parse(i(t.node[l]))}let a=Object.keys(t.level);for(let l of a){let n=l.replace(/\.json|\.geojson/g,"");e.level[n]=JSON.parse(i(t.level[l]))}let s=Object.keys(t.connection);for(let l of s){let n=l.replace(/\.json|\.geojson/g,"");e.connection[n]=JSON.parse(i(t.connection[l]))}return e}catch(t){throw vy.error(t),new Error("MVF parsing failed! Probably encountered a bad file.")}}function bR(t,e){return"location-".concat(t,"-").concat(e.properties.externalId.toLowerCase().replace(" ","-"))}function wR(t,e){var i;let n=new Set;if("entrance"===t)n.add("Entrance");else if("obstruction"===t){let t=e.properties.kind;null!=t&&t.length>0&&n.add(t),e.properties.footprintComponent&&n.add("Exterior")}else if("space"===t){let t=e.properties.kind;null!=t&&t.length>0&&n.add("default"===t?"Room":t);let r=null!=(i=e.properties.tags)?i:[];if(r.length>0)for(let e of r)n.add(e)}return Array.from(n).filter(t=>t.length>0)}function ER(t){return"category-".concat(t.toLowerCase().replace(" ","-"))}function MR(t,e,i){let n=wR(t,e);for(let r of n){let t=ER(r);null==i[t]&&(i[t]={id:t,name:r})}}function SR(t,e,i,n){var r;if(null==e.properties.externalId||0===e.properties.externalId.length||"obstruction"===t&&"desks"!==(null==(r=e.properties.kind)?void 0:r.toLowerCase()))return;let o=null==e.properties.externalId?"":e.properties.externalId,a=bR(t,e);if(null==n[a]){let t={id:a,type:"",name:o,nodes:[],polygons:[],categories:[]};n[a]=t}if("space"===t||"obstruction"===t){let t={map:i.id,id:e.properties.id};n[a].polygons.push(t)}if("destinationNodes"in e.properties&&e.properties.destinationNodes.forEach(t=>{let e={map:i.id,node:t};n[a].nodes.push(e)}),"node"in e.properties&&e.properties.node){let t={map:i.id,node:e.properties.node};n[a].nodes.push(t)}let s=wR(t,e);for(let l of s){let t=ER(l);n[a].categories.push(t)}}function TR(t,e=new Map){var i,n,r,o,a,s,l,h,u;let c={},p={},{space:d,"map.geojson":f,entrance:g,obstruction:m}=t;for(let v of f){let t=null!=(n=null==(i=d[v.id])?void 0:i.features)?n:[],f=null!=(o=null==(r=g[v.id])?void 0:r.features)?o:[],y=null!=(s=null==(a=m[v.id])?void 0:a.features)?s:[];for(let e of t)"Polygon"===e.geometry.type&&"hallway"!==(null==(l=e.properties.kind)?void 0:l.toLowerCase())&&(MR("space",e,p),SR("space",e,v,c));let _=new Map;for(let e of f)_.set(e.properties.id,e),e.properties.externalId&&(MR("entrance",e,p),SR("entrance",e,v,c));let x={type:"Feature",geometry:{type:"LineString",coordinates:[]},properties:{id:"footprintComponent",externalId:"footprintComponent",node:void 0,metadata:void 0}};SR("entrance",x,v,c);for(let i of y){if(MR("obstruction",i,p),SR("obstruction",i,v,c),i.properties.footprintComponent){let t=i.properties.entrances;for(let e of t){let t=_.get(e);t&&SR("entrance",{...t,properties:{...t.properties,externalId:x.properties.externalId}},v,c)}}if("desks"===(null==(h=i.properties.kind)?void 0:h.toLowerCase())&&i.properties.externalId.length>0){let t=null!=(u=e.get(i.properties.id))?u:[];for(let e of t){let t=bR("obstruction",i);null!=c[t]&&c[t].nodes.push({map:e.map,node:e.id})}}}}return{locations:Object.values(c),categories:Object.values(p)}}function CR(t){var e,i,n,r,o,a,s,l,h,u;let c=null!=(e=t.obstruction)?e:[],p=null!=(i=t.space)?i:[],d=null!=(n=t.entrance)?n:[],f=null!=(r=t["mapstack.geojson"])?r:[],g=null!=(o=t["map.geojson"])?o:[],m=null!=(a=t["styles.json"])?a:{},v=null!=(s=t["manifest.geojson"])?s:{},y=null!=(l=t["node.geojson"])?l:[],_=null!=(h=t["connection.json"])?h:[],x={},b=new Map,w=[],E=lR(m),M=new Map,S=new Map;g.forEach(t=>{let e=t.id;e&&!S.has(e)&&S.set(e,t)}),f.forEach(({maps:t})=>{t.forEach(t=>{if(!S.has(t))return;let e=Qq(c[t],d[t]);if(e.features.length){let i=aR(e),n=new cR(i);b.set(t,n),x[t]=mR(t,e,p[t],M,E,n),w.push(hR(S.get(t),x[t],n))}})});let T=Object.values(x).flat(),C=vR(_),A=pR(y,b),P=v.features[0],I=P.properties.name,L=P.geometry.coordinates[0],O=P.geometry.coordinates[1],N=(null==(u=w[0])?void 0:u.id)||"",{locations:q,categories:R}=TR(t,M);return{polygons:T,venue:{name:I,latitude:O,longitude:L,defaultMap:N},maps:w,vortexes:C,nodes:A,locations:q,mapGroups:[],locationStates:[],categories:R,themes:[],imageBinaries:new Map}}function AR(t){var e,i,n,r,o,a,s;let l=null!=(e=t.obstruction)?e:{},h=null!=(i=t.space)?i:{},u=null!=(n=t.node)?n:{},c=null!=(r=t.level)?r:{},p=null!=(o=t["manifest.geojson"])?o:{},d=null!=(a=t.connection)?a:{},f={},g=new Map,m=[],v=[],y=[];Object.keys(c).forEach(t=>{let e=Qq(l[t],{type:"FeatureCollection",features:[]});if(e.features.length){let i=aR(e),n=new cR(i);g.set(t,n);let r=gR(t,h[t],n),o=gR(t,e,n);f[t]=r.concat(o),v=v.concat(dR(u[t],t,n)),m.push(PR(c[t],f[t],n))}y=y.concat(yR(d[t]))});let _=Object.values(f).flat(),x=p.features[0],b=x.properties.name,w=x.geometry.coordinates[0],E=x.geometry.coordinates[1],M=(null==(s=m[0])?void 0:s.id)||"",S=new Map;_.forEach(t=>S.set(t.id,t));let T=[],C=t["location.geojson"].features.map(t=>{if(t.properties.spaces){let e=t.properties.spaces.map(t=>t.id).map(t=>S.get(t)).filter(t=>t);if(e){let t=[];e.forEach(e=>{t.push(...e.entrances.map(t=>({node:t.id,map:t.level})))}),T=t}}return{...t.properties,nodes:T,polygons:t.properties.spaces}}),A=t["category.geojson"].features.map(t=>t.properties);return{polygons:_,venue:{name:b,latitude:E,longitude:w,defaultMap:M},maps:m,vortexes:y,nodes:v,locations:C,mapGroups:[],locationStates:[],categories:A,themes:[],imageBinaries:new Map}}function PR(t,e,i){let n=i.createGeoreferences(),r=new Set,o=t.features[0].properties;e.forEach(t=>{t.layer&&r.add(t.layer)});let a=[...r].map(t=>({id:t,visible:!0})),s=1/i.mapScale;return{id:o.id,georeference:n,name:o.name,shortName:o.abbreviation||o.name,scene:{polygons:e},elevation:o.elevation,scale:s,x_scale:s,layers:a,width:i.widthInMapUnits,height:i.heightInMapUnits}}(0,r.a)(mR,"convertPolygons"),(0,r.a)(vR,"convertVortexes"),(0,r.a)(yR,"convertVortexes_MVFv1"),(0,r.a)(_R,"parseMVF"),(0,r.a)(xR,"parseMVFv1"),(0,r.a)(bR,"getLocationId"),(0,r.a)(wR,"getFeatureCategories"),(0,r.a)(ER,"getCategoryIdFromName"),(0,r.a)(MR,"mutateCategoriesWithNewFeature"),(0,r.a)(SR,"mutateLocationsWithNewFeature"),(0,r.a)(TR,"createMetaDataFromMVF"),(0,r.a)(CR,"convertMVFToMappedin"),(0,r.a)(AR,"convertMVFv1ToMappedin"),(0,r.a)(PR,"convertMap_MVFv1"),(0,n.a)();var IR=class{constructor(){(0,r.f)(this,"_subscribers",{})}publish(t,e){!this._subscribers||!this._subscribers[t]||this._subscribers[t].forEach(function(t){"function"==typeof t&&t(e)})}on(t,e){this._subscribers||(this._subscribers={}),this._subscribers[t]=this._subscribers[t]||[],this._subscribers[t].push(e)}off(t,e){if(!this._subscribers||null==this._subscribers[t])return;let i=this._subscribers[t].indexOf(e);-1!==i&&this._subscribers[t].splice(i,1)}destroy(){this._subscribers={}}};(0,r.a)(IR,"PubSub");var LR,OR,NR,qR,RR,DR,kR,BR,FR=IR,UR={supplementaryUrl:"https://api-gateway.mappedin.com/analytics/",headers:{},accessToken:"",clientId:"",noAuth:!1,includeHidden:!0,clientSecret:"",apiGateway:"",authorization:"",perspective:"Website",language:"",things:{},venue:""},zR=class extends FR{constructor(t){super(),(0,r.h)(this,RR),(0,r.h)(this,kR),(0,r.f)(this,"perspective"),(0,r.f)(this,"things"),(0,r.f)(this,"options"),(0,r.h)(this,LR,void 0),(0,r.h)(this,OR,""),(0,r.f)(this,"updatedAt"),(0,r.f)(this,"categories",[]),(0,r.f)(this,"locations",[]),(0,r.f)(this,"vortexes",[]),(0,r.f)(this,"maps",[]),(0,r.f)(this,"nodes",[]),(0,r.f)(this,"polygons",[]),(0,r.f)(this,"venue",{}),(0,r.f)(this,"events",[]),(0,r.f)(this,"mapGroups",[]),(0,r.f)(this,"themes",[]),(0,r.f)(this,"locationStates",[]),(0,r.f)(this,"rankings"),(0,r.f)(this,"currentLanguage"),(0,r.h)(this,NR,{}),(0,r.f)(this,"_categoriesById"),(0,r.f)(this,"_locationsById"),(0,r.f)(this,"_vortexesById"),(0,r.f)(this,"_mapsById"),(0,r.f)(this,"_nodesById"),(0,r.f)(this,"_polygonsById"),(0,r.f)(this,"_eventsById"),(0,r.f)(this,"_mapGroupsById"),(0,r.f)(this,"_locationStatesById"),(0,r.f)(this,"_locationRankingsById"),(0,r.f)(this,"_rankingsById"),(0,r.f)(this,"_categoriesByExternalId"),(0,r.f)(this,"_locationsByExternalId"),(0,r.f)(this,"_vortexesByExternalId"),(0,r.f)(this,"_mapsByExternalId"),(0,r.f)(this,"_nodesByExternalId"),(0,r.f)(this,"_polygonsByExternalId"),(0,r.f)(this,"_eventsByExternalId"),(0,r.f)(this,"_mapGroupsByExternalId"),(0,r.f)(this,"_locationStatesByExternalId"),(0,r.f)(this,"_locationRankingsByExternalId"),(0,r.f)(this,"_rankingsByExternalId"),(0,r.h)(this,qR,void 0),(0,r.f)(this,"images"),(0,r.f)(this,"imageBinaries"),(0,r.f)(this,"scenes"),(0,r.f)(this,"analytics"),(0,r.f)(this,"navigator"),this.options=t,(0,r.i)(this,LR,bA.create(this));let e=bB.create({...t,testMode:!(null!=t&&t.emitAnalyticsEvents)});this.analytics={locationSelected:e.locationSelected,categorySelected:e.categorySelected,getDirections:e.getDirections},globalThis.MappedinDebug||(globalThis.MappedinDebug={enable(){globalThis.sessionStorage.setItem(dy,"true")}})}generateGetters(t){try{for(let e=0,i=t.length;e<i;++e){let i=t[e];Array.isArray(this[i])&&(Object.defineProperty(this,"_".concat(i,"ByExternalId"),{configurable:!0,get(){let t=(0,r.g)(this,LR)[i];if(null!=t)return t;let e={};return this[i].forEach(t=>e[t.externalId]=t),(0,r.g)(this,LR)[i]=e,e}}),Object.defineProperty(this,"_".concat(i,"ById"),{configurable:!0,get(){let t=(0,r.g)(this,LR)[i];if(null!=t)return t;let e={};return this[i].forEach(t=>e[t.id]=t),(0,r.g)(this,LR)[i]=e,e}}))}return this}catch(t){throw new Error("Unable to generate getters, "+t)}}getCollectionItemById(t,e){let i="_".concat(t,"ById"),n="_".concat(t,"ByExternalId"),r=this[i];return null!=r&&null!=r[e]||null!=(r=this[n])&&null!=r[e]?r[e]:null}async hydrateFromMVF(t){let e=CR(t);return this.hydrate(e)}async hydrateFromMVFv1(t){let e=AR(t);return this.hydrate(e)}async changeLanguage(t,e=!0){var i;if(this.currentLanguage.code!==t){if(null==(i=this.venue.languages)||!i.find(e=>e.code===t))return void vy.error("Language ".concat(t," not found in venue ").concat(this.venue.slug));if(e&&!(0,r.g)(this,NR)[this.currentLanguage.code]&&((0,r.g)(this,NR)[this.currentLanguage.code]=JSON.stringify(this.toJSON())),bA.clearInstance(this),(0,r.i)(this,LR,bA.create(this)),this.currentLanguage=this.venue.languages.find(e=>e.code===t),null!=(0,r.g)(this,NR)[t]){let e=JSON.parse((0,r.g)(this,NR)[t]);await this.hydrate(e)}else this.options.language=this.currentLanguage.code,await this.fetch();this.publish(0,this.currentLanguage)}}async hydrate(t,e){let i;if("string"==typeof t)try{(0,r.i)(this,OR,t),i=JSON.parse(t)}catch(t){return void vy.error("Unable to parse JSON",t)}else i=t,(0,r.i)(this,OR,JSON.stringify(i));let n=Object.keys(i);for(let r=0,l=n.length;r<l;++r){let t=n[r],e=i[t];null!=EA[t]&&"function"==typeof EA[t].hydrate&&(this[t]=EA[t].hydrate(e,this))}e&&await WC(i);let{images:o,scenes:a,imageBinaries:s}=i;this.images=o,this.scenes=a,this.imageBinaries=s,this.generateGetters(n),(0,r.k)(this,RR,DR).call(this),this.initNavigator()}async fetch(){"vortexes"in this.options.things||(this.options.things.vortexes=["name","type","accessible","weight","multiplier","nodes"]),"locationStates"in this.options.things||(this.options.things.locationStates=["name","id","value"]),RC(this.options.clientId)||this.options.things.rankings&&delete this.options.things.rankings;let{things:t}=this.options,e=[],i=Object.keys(t);for(let n=0,r=i.length;n<r;++n){let t=i[n];EA[t]&&e.push(EA[t].fetch(this).then(e=>(this[t]=e,Promise.resolve())))}return e.push(FC(this.options,"cdn-access-token",{venue:this.options.venue},!1).then(t=>(0,r.i)(this,qR,t.token),()=>Promise.resolve())),this.generateGetters(i),Promise.all(e).then(()=>{var t;this.currentLanguage=this.currentLanguage||(null==(t=this.venue.languages)?void 0:t.find(t=>t.code===this.options.language))||this.venue.defaultLanguage,(0,r.k)(this,RR,DR).call(this),this.initNavigator()})}initNavigator(){this.navigator=new x_({locations:this.locations.map(t=>t.toJSON()),nodes:this.nodes.map(t=>t.toJSON()),vortexes:this.vortexes.map(t=>t.toJSON()),maps:this.maps.map(t=>t.toJSON()),polygons:this.polygons.map(t=>t.toJSON())})}toJSON(){var t;let e={};for(let n in EA)Array.isArray(this[n])&&(e[n]=this[n].map(t=>t.toJSON()));let i={...e,venue:this.venue.toJSON()};return null!=this.rankings&&(i.rankings=null==(t=this.rankings)?void 0:t.toJSON()),delete i.locationRankings,i}toString(){return(0,r.g)(this,OR)||JSON.stringify(this.toJSON())}};LR=new WeakMap,OR=new WeakMap,NR=new WeakMap,qR=new WeakMap,RR=new WeakSet,DR=(0,r.a)(function(){(0,r.g)(this,qR)&&this.maps.forEach(t=>{var e;null!=(e=t.scene)&&e.polygons&&(t.scene.polygons+="?".concat((0,r.g)(this,qR)))}),(0,r.k)(this,kR,BR).call(this)},"#transformData"),kR=new WeakSet,BR=(0,r.a)(function(){let t=this.categories.filter(t=>t.sortOrder).map(t=>t.sortOrder);if(t.length<=0)return;let e=Math.min(...t),i=Math.max(...t);this.polygons.forEach(t=>{var n,r;let o=zy(t,this);if(o){let a=o.categories.filter(t=>t.sortOrder).map(t=>t.sortOrder);if(a.length>0){let o=Math.min(...a);t.categoryRank=YC(o,e,i,null!=(r=null==(n=t.rank)?void 0:n.score)?r:0)}}})},"#applyCategoryRankToPolygons"),(0,r.a)(zR,"Mappedin");var VR=exports.Mappedin=zR;(0,n.a)();var jR={venue:["slug","name","defaultMap","metadata","countrycode","tzid","logo","externalId","secureContentStorage","languages","topLocations","defaultLanguage"],nodes:["externalId","x","y","paths","accessible","operationHours"],vortexes:["externalId","nodes","types","accessible"],polygons:["vertexes","geometry","canvasBounds","layer","externalId","entrances","material"],locations:["externalId","name","type","picture","description","icon","logo","sortOrder","phone","operationHours","social","color","toMap","tags","shortName","detailsUrl","locationState","metadata","siblingGroups","gallery","showSmartLabelWhenImagePresent","amenity"],categories:["name","color","sortOrder","parents","icon","iconFromDefaultList"],maps:["name","subtitle","elevation","height","width","layers","shortName","scene","group","x_scale"],mapGroups:["name"],themes:["name","themeData"],rankings:["polygons"]};(0,n.a)(),(0,n.a)();var GR=(0,r.a)(function(){return(GR=Object.assign||(0,r.a)(function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},"__assign")).apply(this,arguments)},"__assign");function HR(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function WR(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,o=i.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return a}(0,r.a)(HR,"__values"),(0,r.a)(WR,"__read");var XR,YR="ENTRIES",ZR="KEYS",JR="VALUES",KR="",QR=function(){function t(t,e){var i=t._tree,n=Array.from(i.keys());this.set=t,this._type=e,this._path=n.length>0?[{node:i,keys:n}]:[]}return(0,r.a)(t,"TreeIterator"),t.prototype.next=function(){var t=this.dive();return this.backtrack(),t},t.prototype.dive=function(){if(0===this._path.length)return{done:!0,value:void 0};var t=$R(this._path),e=t.node,i=t.keys;if($R(i)===KR)return{done:!1,value:this.result()};var n=e.get($R(i));return this._path.push({node:n,keys:Array.from(n.keys())}),this.dive()},t.prototype.backtrack=function(){if(0!==this._path.length){var t=$R(this._path).keys;t.pop(),!(t.length>0)&&(this._path.pop(),this.backtrack())}},t.prototype.key=function(){return this.set._prefix+this._path.map(function(t){var e=t.keys;return $R(e)}).filter(function(t){return t!==KR}).join("")},t.prototype.value=function(){return $R(this._path).node.get(KR)},t.prototype.result=function(){switch(this._type){case JR:return this.value();case ZR:return this.key();default:return[this.key(),this.value()]}},t.prototype[Symbol.iterator]=function(){return this},t}(),$R=(0,r.a)(function(t){return t[t.length-1]},"last$1"),tD=(0,r.a)(function(t,e,i){var n=new Map;if(void 0===e)return n;for(var r=e.length+1,o=r+i,a=new Uint8Array(o*r).fill(i+1),s=0;s<r;++s)a[s]=s;for(var l=1;l<o;++l)a[l*r]=l;return eD(t,e,i,n,a,1,r,""),n},"fuzzySearch"),eD=(0,r.a)(function(t,e,i,n,r,o,a,s){var l,h,u=o*a;try{t:for(var c=HR(t.keys()),p=c.next();!p.done;p=c.next()){var d=p.value;if(d===KR){var f=r[u-1];f<=i&&n.set(s,[t.get(d),f])}else{for(var g=o,m=0;m<d.length;++m,++g){for(var v=d[m],y=a*g,_=y-a,x=r[y],b=Math.max(0,g-i-1),w=Math.min(a-1,g+i),E=b;E<w;++E){var M=v!==e[E],S=r[_+E]+ +M,T=r[_+E+1]+1,C=r[y+E]+1,A=r[y+E+1]=Math.min(S,T,C);A<x&&(x=A)}if(x>i)continue t}eD(t.get(d),e,i,n,r,g,a,s+d)}}}catch(t){l={error:t}}finally{try{p&&!p.done&&(h=c.return)&&h.call(c)}finally{if(l)throw l.error}}},"recurse"),iD=function(){function t(t,e){void 0===t&&(t=new Map),void 0===e&&(e=""),this._size=void 0,this._tree=t,this._prefix=e}return(0,r.a)(t,"SearchableMap"),t.prototype.atPrefix=function(e){var i,n;if(!e.startsWith(this._prefix))throw new Error("Mismatched prefix");var r=WR(nD(this._tree,e.slice(this._prefix.length)),2),o=r[0],a=r[1];if(void 0===o){var s=WR(hD(a),2),l=s[0],h=s[1];try{for(var u=HR(l.keys()),c=u.next();!c.done;c=u.next()){var p=c.value;if(p!==KR&&p.startsWith(h)){var d=new Map;return d.set(p.slice(h.length),l.get(p)),new t(d,e)}}}catch(t){i={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(i)throw i.error}}}return new t(o,e)},t.prototype.clear=function(){this._size=void 0,this._tree.clear()},t.prototype.delete=function(t){return this._size=void 0,aD(this._tree,t)},t.prototype.entries=function(){return new QR(this,YR)},t.prototype.forEach=function(t){var e,i;try{for(var n=HR(this),r=n.next();!r.done;r=n.next()){var o=WR(r.value,2);t(o[0],o[1],this)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}},t.prototype.fuzzyGet=function(t,e){return tD(this._tree,t,e)},t.prototype.get=function(t){var e=rD(this._tree,t);return void 0!==e?e.get(KR):void 0},t.prototype.has=function(t){var e=rD(this._tree,t);return void 0!==e&&e.has(KR)},t.prototype.keys=function(){return new QR(this,ZR)},t.prototype.set=function(t,e){if("string"!=typeof t)throw new Error("key must be a string");return this._size=void 0,oD(this._tree,t).set(KR,e),this},Object.defineProperty(t.prototype,"size",{get:function(){if(this._size)return this._size;this._size=0;for(var t=this.entries();!t.next().done;)this._size+=1;return this._size},enumerable:!1,configurable:!0}),t.prototype.update=function(t,e){if("string"!=typeof t)throw new Error("key must be a string");this._size=void 0;var i=oD(this._tree,t);return i.set(KR,e(i.get(KR))),this},t.prototype.fetch=function(t,e){if("string"!=typeof t)throw new Error("key must be a string");this._size=void 0;var i=oD(this._tree,t),n=i.get(KR);return void 0===n&&i.set(KR,n=e()),n},t.prototype.values=function(){return new QR(this,JR)},t.prototype[Symbol.iterator]=function(){return this.entries()},t.from=function(e){var i,n,r=new t;try{for(var o=HR(e),a=o.next();!a.done;a=o.next()){var s=WR(a.value,2),l=s[0],h=s[1];r.set(l,h)}}catch(t){i={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return r},t.fromObject=function(e){return t.from(Object.entries(e))},t}(),nD=(0,r.a)(function(t,e,i){var n,r;if(void 0===i&&(i=[]),0===e.length||null==t)return[t,i];try{for(var o=HR(t.keys()),a=o.next();!a.done;a=o.next()){var s=a.value;if(s!==KR&&e.startsWith(s))return i.push([t,s]),nD(t.get(s),e.slice(s.length),i)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i.push([t,e]),nD(void 0,"",i)},"trackDown"),rD=(0,r.a)(function(t,e){var i,n;if(0===e.length||null==t)return t;try{for(var r=HR(t.keys()),o=r.next();!o.done;o=r.next()){var a=o.value;if(a!==KR&&e.startsWith(a))return rD(t.get(a),e.slice(a.length))}}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}},"lookup"),oD=(0,r.a)(function(t,e){var i,n,r=e.length;t:for(var o=0;t&&o<r;){try{for(var a=(i=void 0,HR(t.keys())),s=a.next();!s.done;s=a.next()){var l=s.value;if(l!==KR&&e[o]===l[0]){for(var h=Math.min(r-o,l.length),u=1;u<h&&e[o+u]===l[u];)++u;var c=t.get(l);if(u===l.length)t=c;else{var p=new Map;p.set(l.slice(u),c),t.set(e.slice(o,o+u),p),t.delete(l),t=p}o+=u;continue t}}}catch(t){i={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}var d=new Map;return t.set(e.slice(o),d),d}return t},"createPath"),aD=(0,r.a)(function(t,e){var i=WR(nD(t,e),2),n=i[0],r=i[1];if(void 0!==n)if(n.delete(KR),0===n.size)sD(r);else if(1===n.size){var o=WR(n.entries().next().value,2),a=o[0],s=o[1];lD(r,a,s)}},"remove"),sD=(0,r.a)(function(t){if(0!==t.length){var e=WR(hD(t),2),i=e[0],n=e[1];if(i.delete(n),0===i.size)sD(t.slice(0,-1));else if(1===i.size){var r=WR(i.entries().next().value,2),o=r[0],a=r[1];o!==KR&&lD(t.slice(0,-1),o,a)}}},"cleanup"),lD=(0,r.a)(function(t,e,i){if(0!==t.length){var n=WR(hD(t),2),r=n[0],o=n[1];r.set(o+e,i),r.delete(o)}},"merge"),hD=(0,r.a)(function(t){return t[t.length-1]},"last"),uD="or",cD="and",pD="and_not",dD=function(){function t(t){if(null==(null==t?void 0:t.fields))throw new Error('MiniSearch: option "fields" must be provided');this._options=GR(GR(GR({},bD),t),{searchOptions:GR(GR({},wD),t.searchOptions||{})}),this._index=new iD,this._documentCount=0,this._documentIds=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this.addFields(this._options.fields)}return(0,r.a)(t,"MiniSearch"),t.prototype.add=function(t){var e,i,n,r,o=this._options,a=o.extractField,s=o.tokenize,l=o.processTerm,h=o.fields,u=o.idField,c=a(t,u);if(null==c)throw new Error('MiniSearch: document does not have ID field "'.concat(u,'"'));var p=this.addDocumentId(c);this.saveStoredFields(p,t);try{for(var d=HR(h),f=d.next();!f.done;f=d.next()){var g=f.value,m=a(t,g);if(null!=m){var v=s(m.toString(),g),y=this._fieldIds[g],_=new Set(v).size;this.addFieldLength(p,y,this._documentCount-1,_);try{for(var x=(n=void 0,HR(v)),b=x.next();!b.done;b=x.next()){var w=l(b.value,g);w&&this.addTerm(y,p,w)}}catch(t){n={error:t}}finally{try{b&&!b.done&&(r=x.return)&&r.call(x)}finally{if(n)throw n.error}}}}}catch(t){e={error:t}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(e)throw e.error}}},t.prototype.addAll=function(t){var e,i;try{for(var n=HR(t),r=n.next();!r.done;r=n.next()){var o=r.value;this.add(o)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}},t.prototype.addAllAsync=function(t,e){var i=this;void 0===e&&(e={});var n=e.chunkSize,r=void 0===n?10:n,o={chunk:[],promise:Promise.resolve()},a=t.reduce(function(t,e,n){var o=t.chunk,a=t.promise;return o.push(e),(n+1)%r==0?{chunk:[],promise:a.then(function(){return new Promise(function(t){return setTimeout(t,0)})}).then(function(){return i.addAll(o)})}:{chunk:o,promise:a}},o),s=a.chunk;return a.promise.then(function(){return i.addAll(s)})},t.prototype.remove=function(t){var e,i,n,r,o,a,s=this._options,l=s.tokenize,h=s.processTerm,u=s.extractField,c=s.fields,p=s.idField,d=u(t,p);if(null==d)throw new Error('MiniSearch: document does not have ID field "'.concat(p,'"'));try{for(var f=HR(this._documentIds),g=f.next();!g.done;g=f.next()){var m=WR(g.value,2),v=m[0];if(d===m[1]){try{for(var y=(n=void 0,HR(c)),_=y.next();!_.done;_=y.next()){var x=_.value,b=u(t,x);if(null!=b){var w=l(b.toString(),x),E=this._fieldIds[x],M=new Set(w).size;this.removeFieldLength(v,E,this._documentCount,M);try{for(var S=(o=void 0,HR(w)),T=S.next();!T.done;T=S.next()){var C=h(T.value,x);C&&this.removeTerm(E,v,C)}}catch(t){o={error:t}}finally{try{T&&!T.done&&(a=S.return)&&a.call(S)}finally{if(o)throw o.error}}}}}catch(t){n={error:t}}finally{try{_&&!_.done&&(r=y.return)&&r.call(y)}finally{if(n)throw n.error}}return this._storedFields.delete(v),this._documentIds.delete(v),this._fieldLength.delete(v),void(this._documentCount-=1)}}}catch(t){e={error:t}}finally{try{g&&!g.done&&(i=f.return)&&i.call(f)}finally{if(e)throw e.error}}throw new Error("MiniSearch: cannot remove document with ID ".concat(d,": it is not in the index"))},t.prototype.removeAll=function(t){var e,i;if(t)try{for(var n=HR(t),r=n.next();!r.done;r=n.next()){var o=r.value;this.remove(o)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new iD,this._documentCount=0,this._documentIds=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}},t.prototype.search=function(t,e){var i,n;void 0===e&&(e={});var r=this.executeQuery(t,e),o=[];try{for(var a=HR(r),s=a.next();!s.done;s=a.next()){var l=WR(s.value,2),h=l[0],u=l[1],c=u.score,p=u.terms,d=u.match,f=p.length,g={id:this._documentIds.get(h),score:c*f,terms:Object.keys(d),match:d};Object.assign(g,this._storedFields.get(h)),(null==e.filter||e.filter(g))&&o.push(g)}}catch(t){i={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o.sort(TD),o},t.prototype.autoSuggest=function(t,e){var i,n,r,o;void 0===e&&(e={}),e=GR(GR({},ED),e);var a=new Map;try{for(var s=HR(this.search(t,e)),l=s.next();!l.done;l=s.next()){var h=l.value,u=h.score,c=(y=h.terms).join(" ");null!=(m=a.get(c))?(m.score+=u,m.count+=1):a.set(c,{score:u,terms:y,count:1})}}catch(t){i={error:t}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}var p=[];try{for(var d=HR(a),f=d.next();!f.done;f=d.next()){var g=WR(f.value,2),m=g[0],v=g[1],y=(u=v.score,v.terms),_=v.count;p.push({suggestion:m,terms:y,score:u/_})}}catch(t){r={error:t}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}return p.sort(TD),p},Object.defineProperty(t.prototype,"documentCount",{get:function(){return this._documentCount},enumerable:!1,configurable:!0}),t.loadJSON=function(e,i){if(null==i)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return t.loadJS(JSON.parse(e),i)},t.getDefault=function(t){if(bD.hasOwnProperty(t))return fD(bD,t);throw new Error('MiniSearch: unknown option "'.concat(t,'"'))},t.loadJS=function(e,i){var n,r,o,a,s=e.index,l=e.documentCount,h=e.nextId,u=e.documentIds,c=e.fieldIds,p=e.fieldLength,d=e.averageFieldLength,f=e.storedFields,g=e.serializationVersion;if(1!==g&&2!==g)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");var m=new t(i);m._documentCount=l,m._nextId=h,m._documentIds=AD(u),m._fieldIds=c,m._fieldLength=AD(p),m._avgFieldLength=d,m._storedFields=AD(f),m._index=new iD;try{for(var v=HR(s),y=v.next();!y.done;y=v.next()){var _=WR(y.value,2),x=_[0],b=_[1],w=new Map;try{for(var E=(o=void 0,HR(Object.keys(b))),M=E.next();!M.done;M=E.next()){var S=M.value,T=b[S];1===g&&(T=T.ds),w.set(parseInt(S,10),AD(T))}}catch(t){o={error:t}}finally{try{M&&!M.done&&(a=E.return)&&a.call(E)}finally{if(o)throw o.error}}m._index.set(x,w)}}catch(t){n={error:t}}finally{try{y&&!y.done&&(r=v.return)&&r.call(v)}finally{if(n)throw n.error}}return m},t.prototype.executeQuery=function(t,e){var i=this;if(void 0===e&&(e={}),"string"!=typeof t){var n=GR(GR(GR({},e),t),{queries:void 0}),r=t.queries.map(function(t){return i.executeQuery(t,n)});return this.combineResults(r,t.combineWith)}var o=this._options,a=o.tokenize,s=o.processTerm,l=o.searchOptions,h=GR(GR({tokenize:a,processTerm:s},l),e),u=h.tokenize,c=h.processTerm,p=u(t).map(function(t){return c(t)}).filter(function(t){return!!t}).map(xD(h)).map(function(t){return i.executeQuerySpec(t,h)});return this.combineResults(p,h.combineWith)},t.prototype.executeQuerySpec=function(t,e){var i,n,r,o,a,s,l=GR(GR({},this._options.searchOptions),e),h=(l.fields||this._options.fields).reduce(function(t,e){var i;return GR(GR({},t),((i={})[e]=fD(t,e)||1,i))},l.boost||{}),u=l.boostDocument,c=l.weights,p=l.maxFuzzy,d=GR(GR({},wD.weights),c),f=d.fuzzy,g=d.prefix,m=this._index.get(t.term),v=this.termResults(t.term,t.term,1,m,h,u);if(t.prefix&&(a=this._index.atPrefix(t.term)),t.fuzzy){var y=!0===t.fuzzy?.2:t.fuzzy,_=y<1?Math.min(p,Math.round(t.term.length*y)):y;_&&(s=this._index.fuzzyGet(t.term,_))}if(a)try{for(var x=HR(a),b=x.next();!b.done;b=x.next()){var w=WR(b.value,2),E=w[0],M=w[1];if(A=E.length-t.term.length){null==s||s.delete(E);var S=g*E.length/(E.length+.3*A);this.termResults(t.term,E,S,M,h,u,v)}}}catch(t){i={error:t}}finally{try{b&&!b.done&&(n=x.return)&&n.call(x)}finally{if(i)throw i.error}}if(s)try{for(var T=HR(s.keys()),C=T.next();!C.done;C=T.next()){E=C.value;var A,P=WR(s.get(E),2),I=P[0];(A=P[1])&&(S=f*E.length/(E.length+A),this.termResults(t.term,E,S,I,h,u,v))}}catch(t){r={error:t}}finally{try{C&&!C.done&&(o=T.return)&&o.call(T)}finally{if(r)throw r.error}}return v},t.prototype.combineResults=function(t,e){if(void 0===e&&(e=uD),0===t.length)return new Map;var i=e.toLowerCase();return t.reduce(gD[i])||new Map},t.prototype.toJSON=function(){var t,e,i,n,r=[];try{for(var o=HR(this._index),a=o.next();!a.done;a=o.next()){var s=WR(a.value,2),l=s[0],h=s[1],u={};try{for(var c=(i=void 0,HR(h)),p=c.next();!p.done;p=c.next()){var d=WR(p.value,2),f=d[0],g=d[1];u[f]=Object.fromEntries(g)}}catch(t){i={error:t}}finally{try{p&&!p.done&&(n=c.return)&&n.call(c)}finally{if(i)throw i.error}}r.push([l,u])}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),index:r,serializationVersion:2}},t.prototype.termResults=function(t,e,i,n,r,o,a){var s,l,h,u,c;if(void 0===a&&(a=new Map),null==n)return a;try{for(var p=HR(Object.keys(r)),d=p.next();!d.done;d=p.next()){var f=d.value,g=r[f],m=this._fieldIds[f],v=n.get(m);if(null!=v){var y=v.size,_=this._avgFieldLength[m];try{for(var x=(h=void 0,HR(v.keys())),b=x.next();!b.done;b=x.next()){var w=b.value,E=o?o(this._documentIds.get(w),e):1;if(E){var M=v.get(w),S=this._fieldLength.get(w)[m],T=i*g*E*_D(M,y,this._documentCount,S,_),C=a.get(w);if(C){C.score+=T,MD(C.terms,t);var A=fD(C.match,e);A?A.push(f):C.match[e]=[f]}else a.set(w,{score:T,terms:[t],match:(c={},c[e]=[f],c)})}}}catch(t){h={error:t}}finally{try{b&&!b.done&&(u=x.return)&&u.call(x)}finally{if(h)throw h.error}}}}}catch(t){s={error:t}}finally{try{d&&!d.done&&(l=p.return)&&l.call(p)}finally{if(s)throw s.error}}return a},t.prototype.addTerm=function(t,e,i){var n=this._index.fetch(i,CD),r=n.get(t);if(null==r)(r=new Map).set(e,1),n.set(t,r);else{var o=r.get(e);r.set(e,(o||0)+1)}},t.prototype.removeTerm=function(t,e,i){if(this._index.has(i)){var n=this._index.fetch(i,CD),r=n.get(t);null==r||null==r.get(e)?this.warnDocumentChanged(e,t,i):r.get(e)<=1?r.size<=1?n.delete(t):r.delete(e):r.set(e,r.get(e)-1),0===this._index.get(i).size&&this._index.delete(i)}else this.warnDocumentChanged(e,t,i)},t.prototype.warnDocumentChanged=function(t,e,i){var n,r;if(null!=console&&null!=console.warn)try{for(var o=HR(Object.keys(this._fieldIds)),a=o.next();!a.done;a=o.next()){var s=a.value;if(this._fieldIds[s]===e)return void console.warn("MiniSearch: document with ID ".concat(this._documentIds.get(t),' has changed before removal: term "').concat(i,'" was not present in field "').concat(s,'". Removing a document after it has changed can corrupt the index!'))}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.addDocumentId=function(t){var e=this._nextId;return this._documentIds.set(e,t),this._documentCount+=1,this._nextId+=1,e},t.prototype.addFields=function(t){for(var e=0;e<t.length;e++)this._fieldIds[t[e]]=e},t.prototype.addFieldLength=function(t,e,i,n){var r=this._fieldLength.get(t);null==r&&this._fieldLength.set(t,r=[]),r[e]=n;var o=(this._avgFieldLength[e]||0)*i+n;this._avgFieldLength[e]=o/(i+1)},t.prototype.removeFieldLength=function(t,e,i,n){var r=this._avgFieldLength[e]*i-n;this._avgFieldLength[e]=r/(i-1)},t.prototype.saveStoredFields=function(t,e){var i,n,r=this._options,o=r.storeFields,a=r.extractField;if(null!=o&&0!==o.length){var s=this._storedFields.get(t);null==s&&this._storedFields.set(t,s={});try{for(var l=HR(o),h=l.next();!h.done;h=l.next()){var u=h.value,c=a(e,u);void 0!==c&&(s[u]=c)}}catch(t){i={error:t}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(i)throw i.error}}}},t}(),fD=(0,r.a)(function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},"getOwnProperty"),gD=((XR={})[uD]=function(t,e){var i,n;try{for(var r=HR(e.keys()),o=r.next();!o.done;o=r.next()){var a=o.value,s=t.get(a);if(null==s)t.set(a,e.get(a));else{var l=e.get(a),h=l.score,u=l.terms,c=l.match;s.score=s.score+h,s.match=Object.assign(s.match,c),SD(s.terms,u)}}}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return t},XR[cD]=function(t,e){var i,n,r=new Map;try{for(var o=HR(e.keys()),a=o.next();!a.done;a=o.next()){var s=a.value,l=t.get(s);if(null!=l){var h=e.get(s),u=h.score,c=h.terms,p=h.match;SD(l.terms,c),r.set(s,{score:l.score+u,terms:l.terms,match:Object.assign(l.match,p)})}}}catch(t){i={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return r},XR[pD]=function(t,e){var i,n;try{for(var r=HR(e.keys()),o=r.next();!o.done;o=r.next()){var a=o.value;t.delete(a)}}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return t},XR),mD=1.2,vD=.7,yD=.5,_D=(0,r.a)(function(t,e,i,n,r){return Math.log(1+(i-e+.5)/(e+.5))*(yD+t*(mD+1)/(t+mD*(1-vD+vD*n/r)))},"calcBM25Score"),xD=(0,r.a)(function(t){return function(e,i,n){return{term:e,fuzzy:"function"==typeof t.fuzzy?t.fuzzy(e,i,n):t.fuzzy||!1,prefix:"function"==typeof t.prefix?t.prefix(e,i,n):!0===t.prefix}}},"termToQuerySpec"),bD={idField:"id",extractField:function(t,e){return t[e]},tokenize:function(t,e){return t.split(PD)},processTerm:function(t,e){return t.toLowerCase()},fields:void 0,searchOptions:void 0,storeFields:[]},wD={combineWith:uD,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375}},ED={prefix:function(t,e,i){return e===i.length-1}},MD=(0,r.a)(function(t,e){t.includes(e)||t.push(e)},"assignUniqueTerm"),SD=(0,r.a)(function(t,e){var i,n;try{for(var r=HR(e),o=r.next();!o.done;o=r.next()){var a=o.value;t.includes(a)||t.push(a)}}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}},"assignUniqueTerms"),TD=(0,r.a)(function(t,e){var i=t.score;return e.score-i},"byScore"),CD=(0,r.a)(function(){return new Map},"createMap"),AD=(0,r.a)(function(t){var e,i,n=new Map;try{for(var r=HR(Object.keys(t)),o=r.next();!o.done;o=r.next()){var a=o.value;n.set(parseInt(a,10),t[a])}}catch(t){e={error:t}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}return n},"objectToNumericMap"),PD=/[\n\r -#%-*,-/:;?@[-\]_{}\u00A0\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2000-\u200A\u2010-\u2029\u202F-\u2043\u2045-\u2051\u2053-\u205F\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u3000-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]+/u;(0,n.a)();var ID=["0","1","2","3","4","5","6","7","8","9"],LD=["۱","۲","۳","۴","۵","۶","۷","۸","۹","۰"],OD=["０","１","２","３","４","５","６","７","８","９"],ND=["၀","၁","၂","၃","၄","၅","၆","၇","၈","၉"],qD=[...ID,...LD,...OD,...ND],RD=["about","after","all","also","am","an","and","another","any","are","as","at","be","because","been","before","being","between","both","but","by","came","can","come","could","did","do","each","for","from","get","got","has","had","he","have","her","here","him","himself","his","how","if","in","into","is","it","like","make","many","me","might","more","most","much","must","my","never","now","of","on","only","or","other","our","out","over","said","same","should","since","some","still","such","take","than","that","the","their","them","then","there","these","they","this","those","through","to","too","under","up","very","was","way","we","well","were","what","where","which","while","who","with","would","you","your","a","i"];(0,n.a)();var DD=32,kD=!1,BD=120,FD=0,UD=class{constructor(t){(0,r.f)(this,"_callback"),(0,r.f)(this,"_frameCount"),(0,r.f)(this,"_ordering"),(0,r.f)(this,"_supersededBy"),(0,r.f)(this,"name"),(0,r.f)(this,"_remainingFrameCount"),(0,r.f)(this,"_lastFrameTime"),(0,r.f)(this,"userdata"),this._callback=t.callback,this._frameCount=null!=t.frameCount?t.frameCount:1,this._ordering=null!=t.ordering?t.ordering:0,this._supersededBy=null!=t.supersededBy?new Set(t.supersededBy):new Set,this.name=t.name,this.userdata=t.userdata,this._remainingFrameCount=this._frameCount,this._lastFrameTime=0,kD&&vy.log("update instantiated",this.name)}getLastFrameTime(){return this._lastFrameTime}};(0,r.a)(UD,"FrameUpdate");var zD=UD,VD=class{constructor(t){if((0,r.f)(this,"_postponed"),(0,r.f)(this,"userdata"),(0,r.f)(this,"_priority"),(0,r.f)(this,"_group"),(0,r.f)(this,"name"),(0,r.f)(this,"_lastFrameTime"),(0,r.f)(this,"_callback"),(0,r.f)(this,"_complete"),(0,r.f)(this,"_scheduled"),(0,r.f)(this,"_cancelled"),null!=t.group&&null!=t.priority)throw new Error("cannot specify task priority individually within group");if(null!=t.group&&null!=t.postponeOnAdd)throw new Error("cannot specify task postpone individually within group");this._callback=t.callback,this._group=null!=t.group?t.group:null,this._priority=null!=t.priority?t.priority:0,this._postponed=null!=t.postponeOnAdd&&t.postponeOnAdd,this.name=t.name,this.userdata=t.userdata||{},this._complete=!1,this._scheduled=!1,this._cancelled=!1,this._lastFrameTime=0,kD&&vy.log("task instantiated",this.name)}isComplete(){return this._complete}getLastFrameTime(){return this._lastFrameTime}};(0,r.a)(VD,"FrameTask");var jD=VD,GD=class{constructor(t){(0,r.f)(this,"_postponed"),(0,r.f)(this,"_onComplete"),(0,r.f)(this,"_priority"),(0,r.f)(this,"userdata"),(0,r.f)(this,"name"),(0,r.f)(this,"_tasks"),(0,r.f)(this,"_scheduledTasks"),(0,r.f)(this,"_scheduled"),(0,r.f)(this,"_cancelled"),this._onComplete=null!=t.onComplete?t.onComplete:()=>{},this._priority=null!=t.priority?t.priority:0,this._postponed=null!=t.postponeOnAdd&&t.postponeOnAdd,this.name=t.name,this.userdata=t.userdata,this._tasks=new Set,this._scheduledTasks=new Set,this._scheduled=!1,this._cancelled=!1,kD&&vy.log("task group instantiated",this.name)}isComplete(){return 0===this._scheduledTasks.size}getTasks(){return Array.from(this._tasks.values())}clear(){this._tasks.clear(),this._scheduledTasks.clear()}_popTask(){for(let t of this._scheduledTasks)return this._scheduledTasks.delete(t),t}};(0,r.a)(GD,"FrameTaskGroup");var HD=GD,WD=class{constructor(t){(0,r.f)(this,"_maxMillisecondsPerFrame"),(0,r.f)(this,"_time"),this._maxMillisecondsPerFrame=null!=(null==t?void 0:t.maxMillisecondsPerFrame)?t.maxMillisecondsPerFrame:DD,this._time=0}beginFrame(){this._time=performance.now()+this._maxMillisecondsPerFrame}hasTimeRemaining(){return performance.now()<=this._time}};(0,r.a)(WD,"RealTimeTimer");var XD=WD,YD=class{constructor(t){var e;(0,r.f)(this,"_raf"),(0,r.f)(this,"_timer"),(0,r.f)(this,"_performance"),(0,r.f)(this,"_scheduledUpdatesByOrdering"),(0,r.f)(this,"_scheduledTasksByPriority"),(0,r.f)(this,"_postponedTasks"),(0,r.f)(this,"_requestAnimationFrameHandle"),(0,r.f)(this,"_updatesToRunThisFrame"),(0,r.f)(this,"_lastFrameTime",0),(0,r.f)(this,"_updatesRunLastFrame"),this._timer=null!=(null==t?void 0:t.timer)?t.timer:new XD,this._performance=null!=(null==t?void 0:t.performance)&&t.performance,this._scheduledUpdatesByOrdering=new _k,this._scheduledTasksByPriority=new _k,this._postponedTasks=new Set,this._requestAnimationFrameHandle=null,this._updatesToRunThisFrame=[],this._lastFrameTime=0,this._updatesRunLastFrame=new Set,this.update=this.update.bind(this),kD&&vy.log("task scheduler instantiated"),null!=(e=globalThis.MappedinDebug)&&e.TEST_IOS&&(this._raf=(t=>setTimeout(t,16)))}clear(){for(let t of this._scheduledTasksByPriority.values())t._cancelled=!0;for(let t of this._postponedTasks.values())t._cancelled=!0;this._scheduledUpdatesByOrdering=new _k,this._scheduledTasksByPriority=new _k,this._postponedTasks=new Set,this._lastFrameTime=0,this._updatesRunLastFrame.clear(),kD&&vy.log("task scheduler cleared")}destroy(){this.clear()}requestAnimationFrame(){null==this._requestAnimationFrameHandle&&(this._requestAnimationFrameHandle="function"==typeof this._raf?this._raf(this.update):requestAnimationFrame(this.update))}update(t){let e;this._timer.beginFrame(),this._performance&&(e=performance.now());let i=!1;kD&&(0===FD&&(i=!0),++FD,FD%=BD);let n=this._scheduledUpdatesByOrdering.keys();for(let r=n.length-1;r>=0;--r){let t=n[r];for(let e of this._scheduledUpdatesByOrdering.get(t).values())this._updatesToRunThisFrame.push(e),i&&vy.log("update scheduled to run this frame",e.name)}for(let r of this._updatesToRunThisFrame){--r._remainingFrameCount,r._remainingFrameCount<=0&&this._scheduledUpdatesByOrdering.delete(r._ordering,r),r._superseded=!1;for(let t of this._updatesToRunThisFrame)r._supersededBy.has(t)&&(r._superseded=!0,i&&vy.log("update superseded",r.name,t.name))}for(let r=0;r<this._updatesToRunThisFrame.length;++r)this._updatesToRunThisFrame[r]._superseded&&(this._updatesToRunThisFrame.splice(r,1),--r);for(let r of this._updatesToRunThisFrame){let e;this._performance&&(e=performance.now()),r._callback(t),this._performance&&(r._lastFrameTime=performance.now()-e),i&&vy.log("update completed",r.name)}this._updatesRunLastFrame.clear();for(let r of this._updatesToRunThisFrame)this._updatesRunLastFrame.add(r);if(this._updatesToRunThisFrame.splice(0,this._updatesToRunThisFrame.length),this._scheduledTasksByPriority.size>0)do{this._executeOneTask(t)}while(this._timer.hasTimeRemaining()&&this._scheduledTasksByPriority.size>0);this._performance&&(this._lastFrameTime=performance.now()-e),this._requestAnimationFrameHandle=null,(this._scheduledUpdatesByOrdering.size>0||this._scheduledTasksByPriority.size>0)&&this.requestAnimationFrame()}flushTasks(){for(;this._scheduledTasksByPriority.size>0;)this._executeOneTask(performance.now())}getLastFrameTime(){return this._lastFrameTime}getUpdatesRunLastFrame(){return this._updatesRunLastFrame}_executeOneTask(t){let e,i=this._scheduledTasksByPriority.popFromMaxKey(),n=null;vy.assert(void 0!==i),Object.getPrototypeOf(i)===HD.prototype&&(i=(n=i)._popTask()),vy.assert(void 0!==i),vy.assert(Object.getPrototypeOf(i)===jD.prototype),this._performance&&(e=performance.now()),i._callback(t),i._complete=!0,this._performance&&(i._lastFrameTime=performance.now()-e),kD&&vy.log("task completed",i.name),null!=n&&(n.isComplete()?(n.clear(),n._onComplete(),kD&&vy.log("group completed",n.name)):this._scheduledTasksByPriority.insert(n._priority,n))}scheduleUpdate(t){t._remainingFrameCount=t._frameCount,this._scheduledUpdatesByOrdering.insert(t._ordering,t),this.requestAnimationFrame()}scheduleTask(t){if(Object.getPrototypeOf(t)===HD)throw new Error("frame task groups are automatically scheduled when a task is added to them and cannot be manually scheduled: "+t.name);if(t._scheduled)throw new Error("cannot schedule already scheduled task: "+t.name);if(t._cancelled)throw new Error("cannot schedule cancelled task: "+t.name);let e=t;"_group"in t&&null!=t._group&&(t._group._tasks.add(t),t._group._scheduledTasks.add(t),e=t._group),e._postponed?this._postponedTasks.add(e):this._scheduledTasksByPriority.insert(e._priority,e),t._scheduled=!0,e._scheduled=!0,kD&&vy.log("task scheduled",t.name),this.requestAnimationFrame()}cancelUpdate(t){this._scheduledUpdatesByOrdering.delete(t._ordering,t),kD&&vy.log("update cancelled",t.name)}cancelTask(t){if(!t._scheduled)throw new Error("cannot cancel task that has not been scheduled: "+t.name);if(t._cancelled)throw new Error("cannot cancel task that has already been cancelled: "+t.name);if("_group"in t&&null!=t._group){let e=t._group.isComplete();t._group._tasks.delete(t),t._group._scheduledTasks.delete(t),t._group.isComplete()&&(this._scheduledTasksByPriority.delete(t._group._priority,t._group),e||t._group._onComplete())}else this._scheduledTasksByPriority.delete(t._priority,t),this._postponedTasks.delete(t);Object.getPrototypeOf(t)===jD.prototype?t._cancelled=!0:"clear"in t&&t.clear(),kD&&vy.log("task cancelled",t.name)}postponeTask(t){if("_group"in t&&null!=t._group)throw new Error("cannot postpone individual tasks in group: "+t.name);if(t._cancelled)throw new Error("cannot postpone cancelled task: "+t.name);if(!t._postponed){if(Object.getPrototypeOf(t)===jD.prototype){if("_complete"in t)return;if(!t._scheduled)throw new Error("cannot postpone task that has not been scheduled: "+t.name)}this._scheduledTasksByPriority.delete(t._priority,t),(Object.getPrototypeOf(t)===jD.prototype||!t.isComplete())&&this._postponedTasks.add(t),t._postponed=!0,kD&&vy.log("task postponed",t.name)}}resumeTask(t){if("_group"in t&&null!=t._group)throw new Error("cannot resume individual tasks in groups");if(t._cancelled)throw new Error("cannot resume cancelled task");if(t._postponed){if(Object.getPrototypeOf(t)===jD.prototype){if("_complete"in t&&t._complete)return;if(!t._scheduled)throw new Error("cannot resume unscheduled task")}this._postponedTasks.delete(t),(Object.getPrototypeOf(t)===jD.prototype||!t.isComplete())&&this._scheduledTasksByPriority.insert(t._priority,t),t._postponed=!1,this.requestAnimationFrame(),kD&&vy.log("task resumed",t.name)}}setTaskPriority(t,e){if(Object.getPrototypeOf(t)===jD.prototype&&!t._scheduled)throw new Error("task must be scheduled to be reprioritized");this._scheduledTasksByPriority.has(t._priority,t)&&(this._scheduledTasksByPriority.delete(t._priority,t),this._scheduledTasksByPriority.insert(e,t)),t._priority=e,kD&&vy.log("task priority changed",t.name,e)}};(0,r.a)(YD,"TaskScheduler");var ZD=YD,JD=class{constructor(){(0,r.f)(this,"_map"),(0,r.f)(this,"_size"),(0,r.f)(this,"_sortedKeys"),this._map=new Map,this._size=0,this._sortedKeys=[]}has(t,e){return null!=this._map.get(t)&&this._map.get(t).has(e)}get(t){return this._map.get(t)}insert(t,e){if(vy.assert("number"==typeof t&&Number.isFinite(t)),null==this._map.get(t)){this._map.set(t,new Set);for(let e=0;e<=this._sortedKeys.length;++e)if(e===this._sortedKeys.length||t<this._sortedKeys[e]){this._sortedKeys.splice(e,0,t);break}}this._map.get(t).has(e)||(this._map.get(t).add(e),++this._size)}delete(t,e){null!=this._map.get(t)&&this._map.get(t).has(e)&&(this._map.get(t).delete(e),--this._size,0===this._map.get(t).size&&(this._map.delete(t),this._sortedKeys.splice(this._sortedKeys.indexOf(t),1)))}pop(t){if(null!=this._map.get(t)){let e;for(e of this._map.get(t).values()){this._map.get(t).delete(e),--this._size;break}return 0===this._map.get(t).size&&(this._map.delete(t),this._sortedKeys.splice(this._sortedKeys.indexOf(t),1)),e}}popFromMaxKey(){if(this._sortedKeys.length>0)return this.pop(this._sortedKeys[this._sortedKeys.length-1])}values(){let t=this._map.keys(),e=null,i={[Symbol.iterator]:()=>i,next:()=>{if(null==e){let i=t.next();if(i.done)return i;e=this._map.get(i.value).values()}let i=e.next();for(;i.done;){let n=t.next();if(n.done)return n;i=(e=this._map.get(n.value).values()).next()}return i}};return i}keys(){return this._sortedKeys}get size(){let t=0;for(let e of this._map.values())t+=e.size;return vy.assert(t===this._size),t}};(0,r.a)(JD,"Multimap");var KD,QD,$D,tk,ek,ik,nk,rk,ok,ak,sk,lk,hk,uk,ck,pk,dk,fk,gk,mk,vk,yk,_k=JD,xk=(0,r.a)(t=>t.normalize("NFD").replace(/[\u0300-\u036f|\u2019|\u0027|\']/g,"").toLowerCase(),"removeAccents"),bk="",wk=.09,Ek=1,Mk=.025,Sk=.5,Tk=5e-4,Ck=5e-4,Ak=.01,Pk=.05,Ik=1,Lk=.01,Ok=.2,Nk={MappedinCategory:"categories",MappedinLocation:"locations"},qk={searchDescriptions:!0,searchTags:!0,searchTagsInCategories:!1,searchDescriptionsInCategories:!1,stopWords:RD,jsonIndex:void 0,useLocationRank:!0,emitAnalyticsEvents:"production"===n.b.env.NODE_ENV,constants:{PRIMARY_INDEX_FUZZYNESS:wk,PRIMARY_INDEX_WEIGHT:Ek,SECONDARY_INDEX_WEIGHT:Mk,CATEGORY_NAME_WEIGHT:Sk,LOCATION_NAME_WEIGHT:Ik,CATEGORY_LOCATION_DESCRIPTION_WEIGHT:Tk,CATEGORY_LOCATION_TAGS_WEIGHT:Ck,CATEGORY_LOCATION_NAME_WEIGHT:Ak,PRIMARY_INDEX_TAGS_NAME_WEIGHT:Pk,LOCATION_DEFAULT_RANK:Ik,RATIO_OF_FUZZY_TO_EXACT:Lk,RATIO_OF_PREFIX_TO_EXACT:Ok}},Rk=class{constructor(t,e){var i;(0,r.h)(this,vk),(0,r.h)(this,KD,void 0),(0,r.h)(this,QD,void 0),(0,r.h)(this,$D,void 0),(0,r.h)(this,tk,void 0),(0,r.h)(this,ek,void 0),(0,r.h)(this,ik,new ZD({performance:!0})),(0,r.h)(this,nk,void 0),(0,r.h)(this,rk,void 0),(0,r.h)(this,ok,new Map),(0,r.h)(this,ak,void 0),(0,r.h)(this,sk,void 0),(0,r.h)(this,lk,void 0),(0,r.f)(this,"buildIndices",(0,r.a)(()=>{var t,e;(0,r.i)(this,dk,new Promise(t=>{(0,r.i)(this,fk,t)}));let{PRIMARY_INDEX_FUZZYNESS:i,PRIMARY_INDEX_WEIGHT:n,CATEGORY_NAME_WEIGHT:o,RATIO_OF_FUZZY_TO_EXACT:a,RATIO_OF_PREFIX_TO_EXACT:s,PRIMARY_INDEX_TAGS_NAME_WEIGHT:l}=(0,r.g)(this,ek).constants,h=["object","query","weight","tag","rank"],u={fields:["query","name","tag"],storeFields:h,searchOptions:{combineWith:"OR",prefix:!0,fuzzy:i},boost:{name:n,query:n,tag:l},weights:{fuzzy:a,prefix:s},boostDocument:t=>t.includes("MappedinLocation")?n:t.includes("MappedinCategory")?o:n},c={fields:["description"],storeFields:h,searchOptions:{combineWith:"AND",prefix:!0,fuzzy:.1},processTerm:(t,e)=>{var i;return null!=(i=(0,r.g)(this,nk))&&i.has(t.toLowerCase())?null:t.toLowerCase()}},p={fields:["category.locations.description","category.locations.tags","category.locations.name"],storeFields:[...h,"ref","category.locations.tags","category.locations.name","category.locations.description"],searchOptions:{combineWith:"AND",prefix:!0,fuzzy:!1}};if(null!=(t=(0,r.g)(this,ek))&&t.jsonIndex){let{primary:t,secondary:i,extra:n}=JSON.parse(null==(e=(0,r.g)(this,ek))?void 0:e.jsonIndex);(0,r.i)(this,QD,dD.loadJS(t,u)),(0,r.i)(this,$D,dD.loadJS(i,c)),(0,r.i)(this,tk,dD.loadJS(n,p))}else(0,r.i)(this,QD,new dD(u)),(0,r.i)(this,$D,new dD(c)),(0,r.i)(this,tk,new dD(p)),(0,r.g)(this,KD).locations.forEach((0,r.g)(this,ck)),(0,r.g)(this,KD).categories.forEach((0,r.g)(this,pk));(0,r.g)(this,ik).update(performance.now())},"buildIndices")),(0,r.h)(this,hk,0),(0,r.h)(this,uk,(0,r.a)(t=>{(0,r.j)(this,hk)._++,(0,r.g)(this,ik).scheduleUpdate(new zD({name:"updateIndex",ordering:0,frameCount:1,callback:()=>{t(),(0,r.j)(this,hk)._--,0===(0,r.g)(this,hk)&&(0,r.g)(this,fk).call(this)}}))},"#addTask")),(0,r.h)(this,ck,(0,r.a)(t=>{var e,i,n;let{SECONDARY_INDEX_WEIGHT:o,LOCATION_DEFAULT_RANK:a,PRIMARY_INDEX_TAGS_NAME_WEIGHT:s}=(0,r.g)(this,ek).constants,l=a;null!=(e=(0,r.g)(this,ek))&&e.useLocationRank&&(l=Array.isArray(t.polygons)?Math.max(...t.polygons.map(t=>{var e,i;return null!=(e=t.rank)&&e.score?null==(i=t.rank)?void 0:i.score:a}),a):a),(0,r.g)(this,uk).call(this,()=>{(0,r.g)(this,QD).add({name:xk(t.name),tags:"",id:"MappedinLocation_"+t.id,weight:a,rank:l})}),null!=(i=(0,r.g)(this,ek))&&i.searchTags&&Array.isArray(t.tags)&&t.tags.forEach(e=>{(0,r.g)(this,QD).add({name:"",tag:xk(e),id:"MappedinLocation_"+t.id,weight:s,rank:l})}),null!=(n=(0,r.g)(this,ek))&&n.searchDescriptions&&(0,r.g)(this,uk).call(this,()=>(0,r.g)(this,$D).add({description:xk(t.description||""),id:"MappedinLocation_"+t.id,weight:o,rank:l}))},"#processLocation")),(0,r.h)(this,pk,(0,r.a)(t=>{var e,i;let{CATEGORY_LOCATION_DESCRIPTION_WEIGHT:n,CATEGORY_LOCATION_TAGS_WEIGHT:o,CATEGORY_LOCATION_NAME_WEIGHT:a,CATEGORY_NAME_WEIGHT:s}=(0,r.g)(this,ek).constants;(0,r.g)(this,uk).call(this,()=>(0,r.g)(this,QD).add({name:xk(t.name||""),description:"",id:"MappedinCategory_"+t.id,weight:s}));let l=t.locations.reduce((t,e)=>t+" ".concat(bk," ")+e.name,"")+" ".concat(bk);if(null!=(e=(0,r.g)(this,ek))&&e.searchDescriptionsInCategories&&t.locations.forEach(e=>{null!=e.description&&(0,r.g)(this,uk).call(this,()=>(0,r.g)(this,tk).add({id:"MappedinCategory_"+t.id,"category.locations.description":xk(e.description),ref:e.name,weight:n}))}),null!=(i=(0,r.g)(this,ek))&&i.searchTagsInCategories){let e=t.locations.reduce((t,e)=>{var i;return t+(null==(i=e.tags)?void 0:i.reduce((t,e)=>t+" ".concat(bk," ")+e,""))+" ".concat(bk)},"");(0,r.g)(this,uk).call(this,()=>(0,r.g)(this,tk).add({"category.locations.tags":xk(e),id:"MappedinCategory_"+t.id,weight:o}))}(0,r.g)(this,uk).call(this,()=>(0,r.g)(this,tk).add({"category.locations.name":xk(l),id:"MappedinCategory_"+t.id,weight:a}))},"#processCategory")),(0,r.h)(this,dk,void 0),(0,r.h)(this,fk,void 0),(0,r.h)(this,gk,(0,r.a)(t=>{var e;let i=t.score,{object:n,id:o,weight:a,rank:s}=t,[l,h]=o.split("_"),u=n||(0,r.g)(this,KD).getCollectionItemById(Nk[l],h);return s&&null!=(e=(0,r.g)(this,ek))&&e.useLocationRank&&(i+=s),a&&(i*=a),{score:i,type:l,object:u}},"#processSearchResult")),(0,r.h)(this,mk,(0,r.a)((t,e)=>{for(let i in t.match)t.match[i].forEach(n=>{let r=t.ref||t[n]||e.object[n];if("category.locations.tags"===n||"category.locations.name"===n){let e=new RegExp("[^".concat(bk,"]* ")+i+" [^".concat(bk,"]*"),"ig").exec(t[n]);null!=e&&(r=e[0].slice(1,-1))}e.matches.push({term:i,weight:t.weight,matchesOn:n,value:r})})},"#addMatches")),(0,r.i)(this,rk,bB.create({...t.options,testMode:!1===(null==e?void 0:e.emitAnalyticsEvents)})),(0,r.i)(this,ek,{...qk,...e}),(0,r.i)(this,KD,t),(0,r.i)(this,nk,new Set(null==(i=(0,r.g)(this,ek))?void 0:i.stopWords));let n=(0,r.g)(this,KD).venue.slug;(0,r.g)(this,KD).on(0,this.buildIndices),this.buildIndices(),(0,r.i)(this,ak,XC(t=>{(0,r.g)(this,rk).trackSearchSuggest({query:t}),rT.addPendingEvent(new AS({venue:n}))},300)),(0,r.i)(this,sk,XC(t=>{(0,r.g)(this,rk).trackSearch({query:t}),rT.addPendingEvent(new TS({venue:n}))},300)),(0,r.i)(this,lk,XC(()=>{rT.addPendingEvent(new wS({venue:n}))},300)),rT.addPendingEvent(new MS({search_descriptions:(0,r.g)(this,ek).searchDescriptions,search_tags:(0,r.g)(this,ek).searchTags,search_descriptions_in_categories:(0,r.g)(this,ek).searchDescriptionsInCategories,search_tags_in_categories:(0,r.g)(this,ek).searchTagsInCategories,use_location_rank:(0,r.g)(this,ek).useLocationRank,venue:n}))}async suggest(t){await(0,r.g)(this,dk);let{PRIMARY_INDEX_FUZZYNESS:e,PRIMARY_INDEX_WEIGHT:i,PRIMARY_INDEX_TAGS_NAME_WEIGHT:n,RATIO_OF_FUZZY_TO_EXACT:o,RATIO_OF_PREFIX_TO_EXACT:a}=(0,r.g)(this,ek).constants,s=(0,r.g)(this,QD).autoSuggest(t,{fields:["name","tag","query"],combineWith:"AND",prefix:!0,fuzzy:e,boost:{name:i,query:i,tag:n},weights:{fuzzy:o,prefix:a}});return(0,r.g)(this,ak).call(this,t),{total:s.length,hits:s.map(t=>({text:t.suggestion}))}}async search(t){await(0,r.g)(this,dk);let e=(0,r.k)(this,vk,yk).call(this,t);return(0,r.g)(this,sk).call(this,t),e}async toJSON(){return await(0,r.g)(this,dk),JSON.stringify({primary:(0,r.g)(this,QD),secondary:(0,r.g)(this,$D),extra:(0,r.g)(this,tk)})}async addQuery(t){let e,i,{query:n,object:o,weight:a=1}=t;await(0,r.g)(this,dk),"MappedinLocation"===(e=o instanceof AT?"MappedinLocation":o instanceof NT?"MappedinCategory":"Custom")||"MappedinCategory"===e?i=e+"_"+o.id:"string"==typeof o.id?i="Custom_"+o.id:(i=(0,r.g)(this,ok).get(o))||(i="Custom_"+wy(),(0,r.g)(this,ok).set(o,i)),(0,r.g)(this,QD).add({id:i,weight:a,object:o,query:xk(n)}),(0,r.g)(this,lk).call(this)}};KD=new WeakMap,QD=new WeakMap,$D=new WeakMap,tk=new WeakMap,ek=new WeakMap,ik=new WeakMap,nk=new WeakMap,rk=new WeakMap,ok=new WeakMap,ak=new WeakMap,sk=new WeakMap,lk=new WeakMap,hk=new WeakMap,uk=new WeakMap,ck=new WeakMap,pk=new WeakMap,dk=new WeakMap,fk=new WeakMap,gk=new WeakMap,mk=new WeakMap,vk=new WeakSet,yk=(0,r.a)(function(t){let e=[],i=xk(t);e=[...(0,r.g)(this,QD).search(i),...(0,r.g)(this,$D).search(i),...(0,r.g)(this,tk).search(i)].sort((t,e)=>e.score-t.score);let n={};for(let o of e){let t=(0,r.g)(this,gk).call(this,o);n[o.id]?n[o.id].score+=t.score:n[o.id]={...t,matches:[]},(0,r.g)(this,mk).call(this,o,n[o.id])}return Object.keys(n).map(t=>({...n[t],matches:n[t].matches.sort((t,e)=>e.weight-t.weight)})).sort((t,e)=>e.score-t.score)},"#doSearch"),(0,r.a)(Rk,"OfflineSearch");var Dk=exports.OfflineSearch=Rk;(0,n.a)();var kk=exports.MAP_RENDER_MODE=(t=>(t.MULTI_GEOMETRY="MULTI_GEOMETRY",t.SINGLE_GEOMETRY="SINGLE_GEOMETRY",t))(kk||{}),Bk=globalThis.fetch;function Fk(){if(null==Bk)throw new Error("fetch is not available in your environment. Pass your own function into `setFetch` (node-fetch, etc)");return Bk}function Uk(t){Bk=t}(0,r.a)(Fk,"isomorphicFetch"),(0,r.a)(Uk,"setFetchFn");var zk,Vk=null==(zk=null==n.b?void 0:n.b.env)?void 0:zk.npm_package_version;globalThis.btoa||(globalThis.btoa=Ky.encode);var jk=["ar"];function Gk(t){let e={...UR,things:jR,...t};return e.headers={...e.headers,"mappedin-sdk-version":Vk},t.platformString&&(e.headers={...e.headers,"mappedin-platform-version":t.platformString}),e.noAuth||(e.accessToken?e.authorization="Bearer ".concat(e.accessToken):e.clientId&&e.clientSecret&&(e.authorization="Basic ".concat(globalThis.btoa("".concat(e.clientId,":").concat(e.clientSecret))))),e}async function Hk(t){let e={emitAnalyticsEvents:!0,version:"2.0.0",...t},i=Gk({...e}),n=new VR(i),r=await Qk(i);if("1.0.0"===i.version){let t=xR(await rR(r));return n.hydrateFromMVFv1(t),n}let o=_R(await oR(r));return"function"==typeof e.onMVFParsed&&e.onMVFParsed(o),n.hydrateFromMVF(o),rT.addPendingEvent(new qE({venue:i.venue})),n}async function Wk(t){let e={emitAnalyticsEvents:!0,secure:!0,...t},i=Gk({baseUrl:"https://api-gateway.mappedin.com/",...e}),n="public/1/".concat(i.useDraftData?"draft/":""),r=new VR({...i,baseUrl:i.baseUrl+n});return await r.fetch(),e.emitAnalyticsEvents,rT.addPendingEvent(new OE({venue:i.venue})),r}(0,r.a)(Gk,"parseOptions"),(0,r.a)(Hk,"getVenueMVF"),(0,r.a)(Wk,"getVenue");var Xk={shouldPopulateBundledImagesAsBlobs:!(typeof globalThis.navigator<"u"&&"ReactNative"==globalThis.navigator.product)};async function Yk(t){let e=Gk({baseUrl:"https://api-gateway.mappedin.com/",...Xk,...t}),{url:i,updated_at:n}=await Zk(t),r=await Fk()(i,{mode:"cors"}),{data:o,format:a="jsonstring"}=await r.json();if("jsonstring"!==a)throw new Error("Unrecognized format ".concat(a));let s=new VR(e);return await s.hydrate(o,e.shouldPopulateBundledImagesAsBlobs),s.updatedAt=n,s}async function Zk(t){let e=Gk({baseUrl:"https://api-gateway.mappedin.com/",...Xk,...t}),{version:i,venue:n}=t,r="".concat(t.bundleBaseUri||e.baseUrl+"exports/legacy".concat(null!=e.language&&jk.includes(e.language)?"-"+e.language:"","/1/bundle"),"?venue=").concat(n,"&version=1.0.0");return e.language=void 0,await zC(e,r)}async function Jk(t,{url:e,updated_at:i}){let n=Gk({baseUrl:"https://api-gateway.mappedin.com/",...Xk,...t}),r=await Fk()(e,{mode:"cors"}),{data:o,format:a="jsonstring"}=await r.json();if("jsonstring"!==a)throw new Error("Unrecognized format".concat(a));let s=new VR(n);return await s.hydrate(o,n.shouldPopulateBundledImagesAsBlobs),s.updatedAt=i,s}async function Kk(t){var e;let i=Gk({baseUrl:"https://api-gateway.mappedin.com/",...UR,...t}),n="".concat(i.bundleBaseUri||i.baseUrl+"exports/mvf/1/bundle","?venue=").concat(i.venue,"&version=").concat(null!=(e=i.version)?e:"2.0.0");return i.headers["Content-Type"]="application/zip",await zC(i,n)}async function Qk(t){return new Promise(async(e,i)=>{try{let{url:i}=await Kk(t),n=await Fk()(i).then(t=>t.arrayBuffer());e(new Uint8Array(n))}catch(t){i(t)}})}async function $k(t,e=!0){let i=new VR({venue:""});return await i.hydrate(t,e),i}(0,r.a)(Yk,"getVenueBundle"),(0,r.a)(Zk,"getVenueBundleURL"),(0,r.a)(Jk,"downloadBundle"),(0,r.a)(Kk,"getVenueMVFURL"),(0,r.a)(Qk,"downloadVenueBundleMVF"),(0,r.a)($k,"hydrateVenue");var tB,eB,iB,nB,rB,oB,aB,sB,lB,hB,uB,cB,pB,dB,fB,gB=null==(tB=null==n.b?void 0:n.b.env)?void 0:tB.npm_package_version,mB=["websdk","web","webv2"],vB="websdk",yB=!1,_B=class t{constructor(t){var e;(0,r.h)(this,eB,void 0),(0,r.h)(this,iB,void 0),(0,r.h)(this,nB,void 0),(0,r.h)(this,rB,void 0),(0,r.h)(this,oB,void 0),(0,r.h)(this,aB,void 0),(0,r.h)(this,sB,void 0),(0,r.h)(this,lB,void 0),(0,r.h)(this,hB,void 0),(0,r.h)(this,uB,void 0),(0,r.h)(this,cB,void 0),(0,r.h)(this,pB,void 0),(0,r.h)(this,dB,void 0),(0,r.h)(this,fB,void 0),(0,r.i)(this,lB,t.clientId),(0,r.i)(this,hB,t.clientSecret),(0,r.i)(this,uB,t.accessToken),(0,r.i)(this,sB,t.noAuth||!1);let i="https://api-gateway.mappedin.com/track-analytics/a/";!(0,r.g)(this,sB)&&(0,r.g)(this,lB)&&!RC((0,r.g)(this,lB))&&(i="https://web-proxy.mappedin.com/a/"),(0,r.i)(this,nB,i),(0,r.i)(this,nB,(0,r.g)(this,nB)+(t.venue+"/")),(0,r.i)(this,dB,t.venue),(0,r.i)(this,iB,!1),(0,r.i)(this,eB,"boolean"==typeof t.testMode?t.testMode:"true"===(null==(e=t.testMode)?void 0:e.toLowerCase())),(0,r.i)(this,rB,mB.find(e=>e===t.context)||mB[0]),(0,r.i)(this,oB,Py()),(0,r.i)(this,aB,Iy()),(0,r.i)(this,cB,new Set),(0,r.i)(this,pB,t.platformString||""),this.locationSelected=this.locationSelected.bind(this),this.categorySelected=this.categorySelected.bind(this),this.getDirections=this.getDirections.bind(this)}static create(e){return t.instance||(t.instance=new t(e)),t.instance}track(t,e){let i={...e,g:(0,r.g)(this,iB)};(0,r.g)(this,fB)&&(i={...i,...(0,r.g)(this,fB)});let n=(0,r.g)(this,nB)+t+"?"+Jy.default.stringify(i);if(yB&&vy.log("Analytics.track",n),(0,r.g)(this,eB))return;let o={"mi-context":vB||(0,r.g)(this,rB),"mi-session":(0,r.g)(this,aB),"mi-device":(0,r.g)(this,oB),"mappedin-sdk-version":gB,"mappedin-platform-version":(0,r.g)(this,pB)};(0,r.g)(this,uB)?o.Authorization="Bearer ".concat((0,r.g)(this,uB)):(0,r.g)(this,sB)||(0,r.g)(this,hB)&&(0,r.g)(this,lB)&&(o["x-mappedin-key"]=btoa((0,r.g)(this,lB)),o["x-mappedin-secret"]=btoa((0,r.g)(this,hB))),Fk()(n,{method:"GET",mode:"cors",headers:o})}updateAnalyticsUserPosition(t){(0,r.i)(this,fB,t?{...t,bluedotTimestamp:Date.now()}:void 0)}locationSelected(t){let e=t.id||t;rT.addPendingEvent(new qw({venue:(0,r.g)(this,dB)})),this.track("select-location",{id:e})}categorySelected(t){let e=t.id||t;rT.addPendingEvent(new Ow({venue:(0,r.g)(this,dB)})),this.track("select-category",{id:e})}mapViewLoaded(t,e,i,n){this.track("load-mapview",{type:t,force:e,benchmark:i||-1,reason:n||"success"})}getDirections(t,e){let i={start:t.id,end:e.id,type:"location_to_location"};this.track("query-directions",i)}getSessionID(){return(0,r.g)(this,aB)}getDeviceID(){return(0,r.g)(this,oB)}setGeolocationMode(t){(0,r.i)(this,iB,t)}trackBlueDotEvent(e){e&&Object.values(t.BLUEDOT_EVENT).includes(e)&&!(0,r.g)(this,cB).has(e)&&(this.track(e),(0,r.g)(this,cB).add(e))}trackSearch(t){null!=t&&this.track("query-search",t)}trackSearchSuggest(t){null!=t&&this.track("query-suggest",t)}static setContext(t){let e=mB.find(e=>e===t);e&&(vB=e)}static clearContext(){vB=void 0}static destroy(){t.instance=null}};eB=new WeakMap,iB=new WeakMap,nB=new WeakMap,rB=new WeakMap,oB=new WeakMap,aB=new WeakMap,sB=new WeakMap,lB=new WeakMap,hB=new WeakMap,uB=new WeakMap,cB=new WeakMap,pB=new WeakMap,dB=new WeakMap,fB=new WeakMap,(0,r.a)(_B,"Analytics"),(0,r.f)(_B,"instance",null),(0,r.f)(_B,"BLUEDOT_EVENT",{ATTEMPT_BLUEDOT:"attempt-bluedot",FOUND_POSITION:"found-position",FOUND_FLOOR:"found-floor"});var xB=_B,bB=exports.CustomerAnalytics=xB;(0,n.a)(),(0,n.a)();var wB=(0,r.e)(o()),EB=exports.GEOLOCATION_STATUS=(t=>(t[t.SUCCESS=0]="SUCCESS",t))(EB||{}),MB=exports.COLLISION_RANKING_TIERS=(t=>(t[t.OPTIONAL_MINIMUM=0]="OPTIONAL_MINIMUM",t[t.OPTIONAL_MAXIMUM=1]="OPTIONAL_MAXIMUM",t[t.MEDIUM=2]="MEDIUM",t[t.HIGH=3]="HIGH",t[t.ALWAYS_VISIBLE=4]="ALWAYS_VISIBLE",t))(MB||{}),SB=exports.E_BLUEDOT_STATE_REASON=(t=>(t[t.OUTSIDE_MAP=0]="OUTSIDE_MAP",t[t.NO_POSITIONS_PROVIDED=1]="NO_POSITIONS_PROVIDED",t[t.GEOLOCATION_PROVIDER_ERROR=2]="GEOLOCATION_PROVIDER_ERROR",t[t.CUSTOM_GEOLOCATION_PROVIDER_ERROR=3]="CUSTOM_GEOLOCATION_PROVIDER_ERROR",t))(SB||{}),TB=exports.E_BLUEDOT_STATE=(t=>(t[t.NOT_LISTENING=0]="NOT_LISTENING",t[t.LISTENING=1]="LISTENING",t[t.HAS_POSITION=2]="HAS_POSITION",t[t.HAS_INDOOR_POSITION=3]="HAS_INDOOR_POSITION",t[t.LOCATION_UNCERTAIN=4]="LOCATION_UNCERTAIN",t))(TB||{}),CB=exports.E_BLUEDOT_MARKER_STATE=(t=>(t[t.HIDDEN=0]="HIDDEN",t[t.GHOST=1]="GHOST",t[t.NORMAL=2]="NORMAL",t[t.UNCERTAIN=3]="UNCERTAIN",t))(CB||{}),AB=exports.STATE=(t=>(t.EXPLORE="explore",t.FOLLOW="follow",t.STACKED="STACKED",t))(AB||{}),PB=exports.MARKER_ANCHOR=(t=>(t[t.CENTER=0]="CENTER",t[t.TOP=1]="TOP",t[t.LEFT=2]="LEFT",t[t.BOTTOM=3]="BOTTOM",t[t.RIGHT=4]="RIGHT",t))(PB||{}),IB=exports.E_SDK_EVENT=(t=>(t.CLICK="CLICK",t.STATE_CHANGE="STATE_CHANGE",t.POLYGON_CLICKED="POLYGON_CLICKED",t.NOTHING_CLICKED="NOTHING_CLICKED",t.MAP_CHANGED="MAP_CHANGED",t.MAP_CHANGED_WITH_REASON="MAP_CHANGED_WITH_REASON",t.OUTDOOR_VIEW_LOADED="OUTDOOR_VIEW_LOADED",t))(IB||{}),LB=exports.E_BLUEDOT_EVENT=(t=>(t.POSITION_UPDATE="POSITION_UPDATE",t.STATE_CHANGE="STATE_CHANGE",t))(LB||{}),OB=exports.E_CAMERA_EVENT=(t=>(t.USER_INTERACTION_START="USER_INTERACTION_START",t.USER_INTERACTION_END="USER_INTERACTION_END",t.ZOOM_CHANGED="ZOOM_CHANGED",t.ROTATION_CHANGED="ROTATION_CHANGED",t.TILT_CHANGED="TILT_CHANGED",t.POSITION_CHANGED="POSITION_CHANGED",t.CHANGED="CHANGED",t))(OB||{}),NB=exports.E_CAMERA_DIRECTION=(t=>(t.UP="up",t.DOWN="down",t.LEFT="left",t.RIGHT="right",t))(NB||{}),qB=exports.SAFE_AREA_INSET_TYPE=(t=>(t.PIXELS="pixels",t.PORTIONS="portions",t))(qB||{}),RB=exports.ANIMATION_TWEENS={linear:wB.default.Easing.Linear.None,"ease-in":wB.default.Easing.Quadratic.In,"ease-out":wB.default.Easing.Quadratic.Out,"ease-in-out":wB.default.Easing.Quadratic.InOut},DB=exports.CAMERA_EASING_MODE=(t=>(t.LINEAR="linear",t.EASE_IN="ease-in",t.EASE_OUT="ease-out",t.EASE_IN_OUT="ease-in-out",t))(DB||{}),kB=exports.STACKED_MAPS_STATE=(t=>(t.ACTIVE="ACTIVE",t.INACTIVE="INACTIVE",t.OVERVIEW="OVERVIEW",t.ZOOMED_IN="ZOOMED_IN",t))(kB||{}),BB=exports.E_MAP_CHANGED_REASON=(t=>(t.DYNAMIC_FOCUS_USER_INTERACTION="dynamic-focus-user-interaction",t.BLUE_DOT_LEVEL_TRANSITION="blue-dot-level-transition",t.JOURNEY_CONNECTION_CLICK="journey-connection-click",t))(BB||{});(0,n.a)(),(0,n.a)();var FB={margin:6,text:{numLines:2,lineHeight:1.2,size:11.5,maxWidth:150,foregroundColor:"white",backgroundColor:"#333"},marker:{size:5,foregroundColor:{active:"white",inactive:void 0},backgroundColor:{active:"#333",inactive:void 0}}},UB=exports.labelThemes={lightOnDark:{...FB,text:{...FB.text,foregroundColor:"white",backgroundColor:"#333"},marker:{...FB.marker,foregroundColor:{active:"white",inactive:void 0},backgroundColor:{active:"#333",inactive:void 0}}},darkOnLight:{...FB,text:{...FB.text,foregroundColor:"#333",backgroundColor:"white"},marker:{...FB.marker,foregroundColor:{active:"#333",inactive:void 0},backgroundColor:{active:"white",inactive:void 0}}}};(0,n.a)(),(0,n.a)();var zB=!1,VB=class{constructor(){(0,r.f)(this,"textureLoader",new cv)}async loadMapPolygons(t){return zB&&vy.log("loading map: ",t.scene.polygons),(await Fk()(t.scene.polygons)).json()}loadImage(t){return new Promise((e,i)=>{zB&&vy.log("loading image: ",t),this.textureLoader.load(t,t=>{t.colorSpace=Fn,e(t)},()=>{},i)})}};(0,r.a)(VB,"DefaultAssetManager");var jB=exports.AssetManager=VB,GB=class{constructor(){(0,r.f)(this,"defaultExtrudeSettings",{amount:10,bevelEnabled:!1}),(0,r.f)(this,"materials",{}),(0,r.f)(this,"scale",100),(0,r.f)(this,"assetManager",new jB),(0,r.f)(this,"overlayHeight",.15)}setAssetManager(t){this.assetManager=t}load(t,e,i){if("string"==typeof t)return this.assetManager.loadMapPolygons(e).then(t=>null==t||0===t.length?Promise.reject("No polygons found for venue"):this._build(t,e,i)).catch(t=>Promise.reject(t));try{return this._build(t,e,i)}catch(t){return Promise.reject(t)}}_build(t,e,i){let n=new Set;e.layers.forEach(t=>{!1!==t.visible&&n.add(t.id)});let r=new Fd,o=t.map(t=>{let o=t.layer||"Polygon",a=/__.*__/.exec(o);return n.has(o)||a?new iV(t,e,r,this.assetManager,i):null}).filter(t=>t);return Promise.resolve({container:r,elements:o,visibleLayers:n})}};(0,r.a)(GB,"JSONSceneLoader");var HB=GB,WB=new HB;(0,n.a)();var XB=(t=>(t.ANIMATED="animated",t.ALWAYS_ON_TOP="always_on_top",t.ALL="all",t.TWEEN="tween",t.COMPOSITE="composite",t))(XB||{}),YB=XB;(0,n.a)();var ZB=0,JB=!1,KB=class{constructor(t,e){(0,r.f)(this,"core"),(0,r.f)(this,"currentScene"),(0,r.f)(this,"processedMapObjects",new Set),this.core=t,JB&&this.renderGrid(),this.transitionTo(e).then(()=>{this.core.publish(0)}).catch(t=>{vy.error(t)})}get currentMap(){return this.currentScene.currentMap}renderGrid(){var t=new Qv(1e4,10);t.setColors(233696766,14606046),t.position.z=-10,t.rotation.x=Math.PI/2,this.core.scene.add(t)}async transitionTo(t,e){this.core.publish(6);let i=this.currentScene;t.transitionOptions=e||{},t.currentMap=(null==e?void 0:e.activeMap)||t.maps[0],this.currentScene=t;let n=await t.preRender(e);t.mapObjectsArray=await Promise.all(n);let r=[],o=[],a=!1;if(i){a=i.currentMap.mapGroup!==t.currentMap.mapGroup;for(let t of i.mapObjects.values())r.push(t.fadeOut(void 0,{onComplete:()=>{t.onInvisible(),i.object.remove(t.object)},duration:ZB}))}for(let s of t.mapObjects.values())t.object.add(null==s?void 0:s.object),s.object.position.z=0,o.push(s.fadeIn(void 0,{onComplete:()=>{s.onVisible()},duration:ZB}));this.core.tryRendering(),await Promise.all(r.map(t=>t.start())),this.core.scene.add(t.object),await Promise.all([...o.map(t=>t.start()),t.focusOnCurrentMap(a?{...e,autoFocusOnActiveMap:!0}:void 0,null==i)]),null!=i&&this.core.scene.remove(i.object),t.postRender(),this.core.publish(7),null==i&&this.core.publish(0)}};(0,r.a)(KB,"SceneManager");var QB=KB,$B=QB;(0,n.a)();var tF=class{constructor(t,e){(0,r.f)(this,"dynamicFocusScene"),(0,r.f)(this,"core"),(0,r.f)(this,"panBounds"),(0,r.f)(this,"mapShouldSetOnUserInteraction",!0),this.core=t,this.dynamicFocusScene=new yV(t,e),this.core.controls.dispatcher.addEventListener(this.core.controls.CAMERA_EVENTS.CHANGE_EVENT.type,()=>{this.update()}),this.core.controls.dispatcher.addEventListener(this.core.controls.CAMERA_EVENTS.ZOOM_END_EVENT.type,()=>{this.determineTargetMap()}),this.core.controls.dispatcher.addEventListener(this.core.controls.CAMERA_EVENTS.MULTI_END_EVENT.type,()=>{this.determineTargetMap()}),this.core.controls.dispatcher.addEventListener(this.core.controls.CAMERA_EVENTS.PAN_END_EVENT.type,()=>{this.determineTargetMap()}),this.transitionTo().then(()=>{this.core.publish(0)})}get currentScene(){return{resize:this.dynamicFocusScene.resize,currentMap:this.dynamicFocusScene.currentMap,mapObjects:this.core.mapObjects}}get currentMap(){return this.dynamicFocusScene.currentMap}determineTargetMap(){let t=this.dynamicFocusScene.determineCurrentMap();this.mapShouldSetOnUserInteraction&&this.dynamicFocusScene.setMap(t,!0),this.update()}update(){this.core.taskScheduler.scheduleTask(new jD({name:"setDynamicFocusOpacities",callback:()=>{let t=this.dynamicFocusScene.determineBuildingsInView();this.dynamicFocusScene.setOpacities(t,this.dynamicFocusScene.currentMap)}}))}async transitionTo(t){if(this.dynamicFocusScene.loaded||(await this.dynamicFocusScene.load(),this.core.scene.add(this.dynamicFocusScene.object)),null!=t){let e=t.maps[0],i=this.dynamicFocusScene.buildings.find(t=>t.mapGroup.id===e.mapGroup.id);null!=i&&await i.setMap(e),this.dynamicFocusScene.setMap(e),this.update()}}};(0,r.a)(tF,"DynamicFocusSceneManager");var eF=tF,iF=eF;function nF(t,e=!1){let i=null!==t[0].index,n=new Set(Object.keys(t[0].attributes)),r=new Set(Object.keys(t[0].morphAttributes)),o={},a={},s=t[0].morphTargetsRelative,l=new ls,h=0;for(let u=0;u<t.length;++u){let c=t[u],p=0;if(i!==(null!==c.index))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let t in c.attributes){if(!n.has(t))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+'. All geometries must have compatible attributes; make sure "'+t+'" attribute exists among all geometries, or in none of them.'),null;void 0===o[t]&&(o[t]=[]),o[t].push(c.attributes[t]),p++}if(p!==n.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". Make sure all geometries have the same number of attributes."),null;if(s!==c.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let t in c.morphAttributes){if(!r.has(t))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===a[t]&&(a[t]=[]),a[t].push(c.morphAttributes[t])}if(e){let t;if(i)t=c.index.count;else{if(void 0===c.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". The geometry must have either an index or a position attribute"),null;t=c.attributes.position.count}l.addGroup(h,t,u),h+=t}}if(i){let e=0,i=[];for(let n=0;n<t.length;++n){let r=t[n].index;for(let t=0;t<r.count;++t)i.push(r.getX(t)+e);e+=t[n].attributes.position.count}l.setIndex(i)}for(let u in o){let t=rF(o[u]);if(!t)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+u+" attribute."),null;l.setAttribute(u,t)}for(let u in a){let t=a[u][0].length;if(0===t)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[u]=[];for(let e=0;e<t;++e){let t=[];for(let n=0;n<a[u].length;++n)t.push(a[u][n][e]);let i=rF(t);if(!i)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+u+" morphAttribute."),null;l.morphAttributes[u].push(i)}}return l}function rF(t){let e,i,n,r=0;for(let s=0;s<t.length;++s){let o=t[s];if(o.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===e&&(e=o.array.constructor),e!==o.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===i&&(i=o.itemSize),i!==o.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===n&&(n=o.normalized),n!==o.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;r+=o.array.length}let o=new e(r),a=0;for(let s=0;s<t.length;++s)o.set(t[s].array,a),a+=t[s].array.length;return new Xa(o,i,n)}(0,n.a)(),(0,n.a)(),(0,r.a)(nF,"mergeGeometries"),(0,r.a)(rF,"mergeAttributes"),(0,n.a)();var oF=class{constructor(){(0,r.f)(this,"_subscribers",{})}publish(t,e){!this._subscribers||!this._subscribers[t]||this._subscribers[t].forEach(function(t){"function"==typeof t&&t(e)})}on(t,e){this._subscribers||(this._subscribers={}),this._subscribers[t]=this._subscribers[t]||[],this._subscribers[t].push(e)}off(t,e){if(!this._subscribers||null==this._subscribers[t])return;let i=this._subscribers[t].indexOf(e);-1!==i&&this._subscribers[t].splice(i,1)}destroy(){this._subscribers={}}};(0,r.a)(oF,"PubSub");var aF=oF;function sF(t){let e=new aF;Object.assign(e,t);for(let i in t)if(null!=i){let n=t[i];if("function"==typeof n)continue;e["_".concat(i)]=n,Object.defineProperty(e,i,{get:()=>e["_".concat(i)],set(t){let n=e["_".concat(i)];e["_".concat(i)]=t,e.publish("".concat(i,"Changed"),{oldValue:n,newValue:e[i]})}})}return e}(0,r.a)(sF,"tinyObservable");var lF=(0,r.e)(o()),hF={VISIBLE_MAP_HIGH:5,VISIBLE_MAP_LOW:4,VISIBLE_MAP_MARKER:3,ASYNC_MAP_HIGH:2,ASYNC_MAP_LOW:1,ASYNC_MAP_MARKER:0,MAP_LOADED:-1},uF={MAP_ELEMENT:0,BUILDING_OUTLINE:1,MAP_HOVER:2,POLYGON_IMAGE:3};function cF(t){let e=[],i=[];for(let n=0;n<t.length;n++){let{zoomLevel:r,opacity:o}=t[n];e.push(r),i.push(o)}return{inputZoomLevel:e,outputOpacity:i}}function pF(t,e){var i,n,r;null!=(r=null==(n=null==(i=t.map)?void 0:i.image)?void 0:n.src)&&r.includes(".png")||1!==e?t.transparent=!0:t.transparent=!1}(0,r.a)(cF,"convertToShortHandInterpolation"),(0,r.a)(pF,"setTransparency");var dF,fF=new ya,gF=1,mF=!1,vF={Floor:1,Wall:2,"Outer Wall":2.2,Anchors:4,Anchor:4,"Anchor Store":4,Polygon:5,Kiosks:6,"Inner Wall":7,"Non Public":7.5},yF=(0,r.a)(t=>{if(vF[t.layer])return vF[t.layer];let e=t.geometry.scale,i=t.geometry.position;return 100+(e?e.z:1)+(i?i.z:0)},"calculateScore"),_F=class{constructor(t,e,i,n){(0,r.f)(this,"mergedObjectsGroup",new Fd),(0,r.f)(this,"hoverObjectsGroup",new Fd),(0,r.f)(this,"objectsByMaterials",new Map),(0,r.f)(this,"hoverableMeshChildren",[]),(0,r.f)(this,"_isVisible",!1),(0,r.f)(this,"needsUpdate",!1),(0,r.f)(this,"userData",{}),(0,r.f)(this,"opacity",1),this.mapObject=t,this.core=t.core,this.name=e,this.layers=i,this.isVisible=n}set isVisible(t){t!==this._isVisible&&(this._isVisible=t,this.core.publish(32,this.mapObject))}get isVisible(){return this._isVisible}dispose(){this.hoverObjectsGroup.clear(),this.mergedObjectsGroup.children.forEach(t=>{t.userData.merged&&t.destroy()}),this.objectsByMaterials.clear()}setOpacity(t){var e,i;this.opacity=t;for(let{material:n}of[...this.mergedObjectsGroup.children,...this.hoverableMeshChildren]){let r=Yy(t,0,1,0,null!=(i=null==(e=n.userData)?void 0:e.originalOpacity)?i:1);pF(n,r),n.opacity=r,n.needsUpdate=!0}0===t?(this.hoverObjectsGroup.visible=!1,this.mergedObjectsGroup.visible=!1):(this.hoverObjectsGroup.visible=!0,this.mergedObjectsGroup.visible=!0)}};(0,r.a)(_F,"LayerGroup");var xF=_F,bF=class extends aF{constructor(t,e,i,n,o={}){super(),(0,r.f)(this,"_flippableImagedById",{}),(0,r.f)(this,"_started",!1),(0,r.f)(this,"_loaderPromise",null),(0,r.f)(this,"_promiseResolve",null),(0,r.f)(this,"imageMeshesById",{}),(0,r.f)(this,"visible",!1),(0,r.f)(this,"objectsDictionary",{}),(0,r.f)(this,"north",null),(0,r.f)(this,"mapScale",null),(0,r.f)(this,"object",new ya),(0,r.f)(this,"labels",new Set),(0,r.f)(this,"tooltips",new Set),(0,r.f)(this,"markers",new Set),(0,r.f)(this,"box",new fo),(0,r.f)(this,"textObjects",[]),(0,r.f)(this,"labelBatchCreator",null),(0,r.f)(this,"imagesToFlip",[]),(0,r.f)(this,"seenByCamera",!1),(0,r.f)(this,"threeJSMarkers",new Map),(0,r.f)(this,"layerGroups",new Map),(0,r.f)(this,"loadedLayerNames",[]),this.core=n,this.mapClass=t,this.polygonMeshesById=e,this._showCount=i,this.loadMethod="json",this.loadAsync=o.async,this._taskScheduler=o.taskScheduler,this.id=this.mapClass.id,this.mapRenderingStrategy=(null==o?void 0:o.mapRenderStrategy)||"SINGLE_GEOMETRY",this._highPriorityTasks=new HD({name:"_highPriorityTasks",onComplete:this._checkIfLoaded.bind(this),priority:!this.visible&&this.loadAsync?hF.ASYNC_MAP_HIGH:hF.VISIBLE_MAP_HIGH,postponeOnAdd:!this.visible&&!this.loadAsync}),this._lowPriorityTasks=new HD({name:"_lowPriorityTasks",onComplete:this._checkIfLoaded.bind(this),priority:!this.visible&&this.loadAsync?hF.ASYNC_MAP_LOW:hF.VISIBLE_MAP_LOW,postponeOnAdd:!this.visible&&!this.loadAsync}),this._markerTasks=new HD({name:"_markerTasks",priority:!this.visible&&this.loadAsync?hF.ASYNC_MAP_MARKER:hF.VISIBLE_MAP_MARKER,postponeOnAdd:!this.visible}),this._mapLoadedTasks=new HD({name:"_mapLoadedTasks",priority:hF.MAP_LOADED,postponeOnAdd:!this.isReady()}),this._visibilityLatch=null,this._objLoadedComplete=!1,this._loaderPromise=new Promise((t,e)=>{this._promiseResolve=t,dF=e}),this._objLoaded=this._objLoaded.bind(this),this._objLoadedMerged=this._objLoadedMerged.bind(this),this.enableImageFlipping=this.enableImageFlipping.bind(this),this.destroy=this.destroy.bind(this),this.core.on(32,()=>{this.needsUpdate=!0})}fade(t,{direction:e="in",onComplete:i=(0,r.a)(()=>{},"onComplete"),duration:n=300}){let o="string"==typeof t?[this.layerGroups.get(t)]:this.layerGroups,a={};return o.forEach(t=>{a[t.name]=t.opacity}),{start:()=>new Promise(t=>{Hy({from:{opacity:"in"===e?0:1},to:{opacity:"in"===e?1:0},duration:n,onStart:()=>{"out"===e&&o.forEach(t=>{t.isVisible=!1})},onComplete:()=>{"in"===e&&o.forEach(t=>{t.isVisible=!0}),i(),t()},onUpdate:({opacity:t})=>{o.forEach(i=>{let n,r=a[i.name];n="in"===e?Yy(t,0,1,r,1):Yy(t,0,1,0,r),i.setOpacity(n)}),this.core.tryRendering()}}).start(this.core),this.core.tryRendering()})}}fadeIn(t=this.layerGroups.keys(),e={onComplete:()=>{},duration:300}){return this.fade(t,{direction:"in",onComplete:null==e?void 0:e.onComplete,duration:null==e?void 0:e.duration})}fadeOut(t=this.layerGroups.keys(),e={onComplete:()=>{},duration:300}){return this.fade(t,{direction:"out",onComplete:null==e?void 0:e.onComplete,duration:null==e?void 0:e.duration})}renderLayerGroup(t=[],e=[]){let i=wy();Array.from(this.layerGroups.values()).forEach(t=>{t.isVisible=!1,this.object.remove(t.mergedObjectsGroup),this.object.remove(t.hoverObjectsGroup),t.dispose()});let n=this.processLayerGroup(i,t,e);this.layerGroups.clear(),this.layerGroups.set(i,n),n.isVisible=!0,this.object.add(n.mergedObjectsGroup),this.object.add(n.hoverObjectsGroup),this.needsUpdate=!0}processLayers(t,e=[],i=[]){let n=[];return n=0===e.length&&0===i.length?[]:e.length>0?t.filter(t=>e.includes(t)):[...t],i.length>0&&(n=n.filter(t=>!i.includes(t))),n}processLayerGroup(t=wy(),e=[],i=[],n=!0,r=this.loadedElements,o=uF.MAP_ELEMENT){var a;let s,l=this.processLayers([...this.loadedLayerNames,...e],e,i);if(0===l.length&&0===r.length)return new xF(this,t,[],n);for(let h of r){if(this.layerGroups.has(t)?s=this.layerGroups.get(t):((s=new xF(this,t,By(l),n)).visible=n,s.mergedObjectsGroup.name=this.mapClass.id,this.layerGroups.set(t,s)),h&&h.visible&&l.includes(h.polygon.layer)){s.objectsByMaterials.has(h.material)?s.objectsByMaterials.get(h.material).push(h):s.objectsByMaterials.set(h.material,[h]);let e=h.material.clone();e.userData={layer:t},h.mesh.material=e,h.mesh.visible=!1,h.mesh.material.transparent=!0,h.mesh.renderOrder=uF.MAP_HOVER,s.hoverObjectsGroup.add(h.mesh),s.hoverableMeshChildren.push(h.mesh)}h&&h.imageMesh&&l.includes(h.polygon.layer)&&(h.imageMesh.material.userData={layer:t},h.imageMesh.renderOrder=uF.POLYGON_IMAGE,s.mergedObjectsGroup.add(h.imageMesh))}for(let[h,u]of s.objectsByMaterials){let t=nF(u.map(t=>t.geometry),!1),e=h.clone();e.userData={...e.userData,layer:s.name,originalOpacity:null!=(a=e.opacity)?a:1},pF(e,e.userData.originalOpacity);let i=new Cs(t,e);i.renderOrder=o,s.mergedObjectsGroup.add(i)}return!1===n&&s.setOpacity(0),this.loadedLayerNames=By([...this.loadedLayerNames,...e]),s}get hoverableMeshChildren(){if(this.needsUpdate){this._hoverableMeshChildren=[];for(let t of this.layerGroups.values())t.isVisible&&this._hoverableMeshChildren.push(...t.hoverableMeshChildren);this.needsUpdate=!1}return this._hoverableMeshChildren}async _objLoadedMerged(t){if(t.elements){this.elements=t.elements;let e=Object.values(this.elements),i=new ho(1/0,1/0,0),n=new ho(-1/0,-1/0,0);this.boundingBox={min:i,max:n},t=t.container,this.object.children,this.object=t,this.object.userData.type="mappedin_map",this.object.userData.mapId=this.mapClass.id,await Promise.all(e.map(t=>{let e=t.getBoundingBox();return i.min(e.min),n.max(e.max),this.loadedLayerNames.includes(t.polygon.layer)||this.loadedLayerNames.push(t.polygon.layer),t.load()})).then(t=>{var e,i,n,r,o,a,s,l,h,u,c,p,d;let f;if(t.forEach(t=>{if(t.imageVisible){let e=t.imageMesh;if(this.imageMeshesById[e.name]=e,t.on("texture-loaded",t=>{this.core.publish(1,t)}),t.polygon.image){let e=null!=t.polygon.image.rotation?t.polygon.image.rotation.z:0;this.core._imageFlippingEnabled&&this.enableImageFlipping(t.polygon.id,e*(Math.PI/180))}}t.mesh&&(this.objectsDictionary[t.polygon.id]=t.mesh,this.polygonMeshesById[t.polygon.id]=t.mesh)}),this.loadedElements=t,null!=(null==(i=null==(e=this.core.options)?void 0:e.dynamicFocus)?void 0:i.baseMap))if((null==(r=null==(n=this.core.options)?void 0:n.dynamicFocus)?void 0:r.baseMap)===this.mapClass){let t=[];for(let e of this.loadedElements){let i=this.core.venue.getCollectionItemById("polygons",e.polygon.id),n=null==(o=null==i?void 0:i.locations)?void 0:o.find(t=>null!=t.toMap),r=n?this.core.venue.mapGroups.find(t=>t.maps.map(t=>t.id).includes(n.toMap)):null;if(r){let t="building-outline-".concat(r.id),i=this.processLayerGroup(t,this.loadedLayerNames,[],!0,[e],uF.BUILDING_OUTLINE);i.userData={toMapId:n.toMap,mapGroupId:r.id},this.layerGroups.set(t,i),this.object.add(i.mergedObjectsGroup),this.object.add(i.hoverObjectsGroup)}else t.push(e)}t.length>0?f=this.processLayerGroup("default",this.loadedLayerNames,[],!0,t):(f=new xF(this,"default",this.loadedLayerNames,!0)).isVisible=!0}else f=this.processLayerGroup("default",this.loadedLayerNames,[],!1,this.loadedElements);else if(Array.isArray(null==(a=this.core.options)?void 0:a.layerGroups)){let t=null==(s=this.core.options)?void 0:s.layerGroups.flatMap(t=>t.layers);f=this.processLayerGroup("default",void 0,t,!0);for(let e of null==(l=this.core.options)?void 0:l.layerGroups){let t=wy(),i=this.processLayerGroup(t,e.layers,void 0,null==(h=e.visible)||h,this.loadedElements);if(null!=(null==e?void 0:e.opacityInterpolation)&&i.visible){let t=e.opacityInterpolation;Array.isArray(e.opacityInterpolation)&&(t=cF(e.opacityInterpolation)),null==(null==t?void 0:t.inputZoomLevel)||null==(null==t?void 0:t.outputOpacity)?vy.error("Invalid opacity interpolation"):i.interpolationFn=(e=>Zy(e,t.inputZoomLevel,t.outputOpacity))}i.isVisible&&(this.layerGroups.set(t,i),this.object.add(i.mergedObjectsGroup),this.object.add(i.hoverObjectsGroup))}}else if(Array.isArray(null==(c=null==(u=this.core.options)?void 0:u.loadOptions)?void 0:c.outdoorGeometryLayers)&&(null==(d=null==(p=this.core.options)?void 0:p.loadOptions)?void 0:d.outdoorGeometryLayers.length)>0){f=this.processLayerGroup("default",this.loadedLayerNames,this.core.options.loadOptions.outdoorGeometryLayers,!0,this.loadedElements);let t=this.processLayerGroup("outdoor-geometry",this.core.options.loadOptions.outdoorGeometryLayers,[],!0,this.loadedElements);this.layerGroups.set("outdoor-geometry",t),this.object.add(t.mergedObjectsGroup),this.object.add(t.hoverObjectsGroup)}else f=this.processLayerGroup("default",this.loadedLayerNames,[],!0,this.loadedElements);this.layerGroups.set("default",f),this.object.add(f.mergedObjectsGroup),this.object.add(f.hoverObjectsGroup),this.needsUpdate=!0,this._promiseResolve(this)}).catch(t=>{throw vy.error(t),new Error("Error loading map using SINGLE_GEOMETRY strategy")}),this._objLoadedComplete=!0,this._onRootObjectCreated(),this._checkIfLoaded()}return this._promiseResolve(this)}_objLoaded(t){if(t.elements){this.elements=t.elements;let e=Object.values(this.elements);this.loadAsync&&e.sort((t,e)=>(null==t.sortScore&&(t.sortScore=yF(t.polygon)),null==e.sortScore&&(e.sortScore=yF(e.polygon)),e.sortScore-t.sortScore));let i=new ho(1/0,1/0,0),n=new ho(-1/0,-1/0,0);for(let t of e){let e=t.getBoundingBox();i.min(e.min),n.max(e.max),this.loadAsync?this._addPendingHighPriorityTask("addPolygon",()=>this._addElementToScene(t)):this._addElementToScene(t)}this.boundingBox={min:i,max:n},t=t.container}let e=t.children;for(let i=0,n=e.length;i<n;++i){let t=e[i];this.objectsDictionary[t.name]=t,this.polygonMeshesById[t.name]=t}return this.object=t,this.object.userData.type="mappedin_map",this.object.userData.mapId=this.mapClass.id,this._objLoadedComplete=!0,this._onRootObjectCreated(),this._checkIfLoaded(),this._promiseResolve(this)}loadPolygonNow(t){if(!this.elements)return;let e=this.elements[t];e&&this._addElementToScene(e)}_addElementToScene(t){if(!this.objectsDictionary[t.polygon.id]){if(t.imageVisible&&t.on("texture-loaded",t=>{this.core.publish(1,t)}),t.mesh){let e=t.mesh;this.objectsDictionary[e.name]=e,this.polygonMeshesById[e.name]=e}if(t.imageMesh){let e=t.imageMesh;this.imageMeshesById[e.name]=e,this.objectsDictionary[e.name]=e,this.polygonMeshesById[e.name]=e}if(t.polygon.image){let e=null!=t.polygon.image.rotation?t.polygon.image.rotation.z:0;this.core._imageFlippingEnabled&&this.enableImageFlipping(t.polygon.id,e*(Math.PI/180))}}}load(){if(!this._started){this._started=!0;try{let t=mF&&this.core.venue.polygons.filter(t=>t.map.id===this.mapClass.id),e=this.mapClass.scene.polygons;if("json"!==this.loadMethod&&void 0!==this.loadMethod||!e&&!t)throw new Error("Error parsing JSON scene");{let i=e||t;this.loadMethodUsed="JSON - "+(e?"published":"live"),WB.load(i,this.mapClass,this.mapRenderingStrategy).then("MULTI_GEOMETRY"===this.mapRenderingStrategy?this._objLoaded:this._objLoadedMerged)}}catch{dF("ERROR: No 3D files for map "+(this.mapClass.name||this.mapClass.shortName||this.mapClass.id||this.mapClass))}}return this._loaderPromise}_dispose(t){let e=t;for(let i=e.children.length-1;i>=0;i--)this._dispose(e.children[i]);e.destroy(),delete this.objectsDictionary[e.name],delete this.polygonMeshesById[e.name]}destroy(){for(let t of this.hoverableMeshChildren)t.destroy();this.removeLabels(),this._removeThreeJSMarkers(),this.disableAllImageFlipping(),this.elements=[],this._dispose(this.object),this.objectsDictionary={},this.polygonMeshesById={}}add(t){fF.add(t),this.load().then(()=>{1===fF.children.filter(e=>e.uuid===t.uuid).length&&this.object.add(t)})}getPositionLatLon(t,e){let i=this.mapClass.createCoordinate(t,e);return this.core.convertTo3DMapPosition(i)}addToObject(t){t.applyMatrix4((new Go).copy(this.object.matrix).invert());let e=1/this.object.scale.x;t.scale.set(e,e,e),this.object.add(t)}translateChild(t,e){t.position.set(e.x,e.y,e.z),t.applyMatrix4((new Go).copy(this.object.matrix).invert());let i=1/this.object.scale.x;t.scale.set(i,i,i)}getMapScale(){return null==this.mapScale&&(this.mapScale=qy(this.mapClass)),this.mapScale}getNorth(){return null==this.north&&(this.north=Ry(this.mapClass)),this.north}enableImageFlipping(t,e){if(e=e||0,!this._flippableImagedById[t]&&this.object&&Object.keys(this.object).length>0){let i=this.object.getObjectByName(t+"_image");if(i){let n=new sV({image:i,rotation:e});this.imagesToFlip.push(n),this.core.publish(4),this.core.publish(2),this._flippableImagedById[t]=!0}}}disableAllImageFlipping(){for(let t=0,e=this.imagesToFlip.length;t<e;t++)this.imagesToFlip[t].reset();this.imagesToFlip=[],this._flippableImagedById={}}isReady(){return(this.loadAsync?this._highPriorityTasks.isComplete():this.isFullyLoaded())&&this._objLoadedComplete}isFullyLoaded(){return this._highPriorityTasks.isComplete()&&this._lowPriorityTasks.isComplete()}onVisible(){!0!==this._visibilityLatch&&(this.loadAsync?(this._taskScheduler.setTaskPriority(this._highPriorityTasks,hF.VISIBLE_MAP_HIGH),this._taskScheduler.setTaskPriority(this._lowPriorityTasks,hF.VISIBLE_MAP_LOW),this._taskScheduler.resumeTask(this._markerTasks)):(this._taskScheduler.resumeTask(this._highPriorityTasks),this._taskScheduler.resumeTask(this._lowPriorityTasks),this._taskScheduler.resumeTask(this._markerTasks)),this._visibilityLatch=!0);for(let t in this.imageMeshesById)this.imageMeshesById[t].visible=!0;for(let t of this.object.children)"path"===t.name&&(t.visible=!0);this.visible=!0,this.core.publish(8)}onInvisible(){!1!==this._visibilityLatch&&(this.loadAsync?(this._taskScheduler.setTaskPriority(this._highPriorityTasks,hF.ASYNC_MAP_HIGH),this._taskScheduler.setTaskPriority(this._lowPriorityTasks,hF.ASYNC_MAP_LOW),this._taskScheduler.postponeTask(this._markerTasks)):(this._taskScheduler.postponeTask(this._highPriorityTasks),this._taskScheduler.postponeTask(this._lowPriorityTasks),this._taskScheduler.postponeTask(this._markerTasks)),this._visibilityLatch=!1);for(let t in this.imageMeshesById)this.imageMeshesById[t].visible=!1;for(let t of this.object.children)"path"===t.name&&(t.visible=!1);this.visible=!1,this.core.publish(8)}addPendingMarkerTask(t,e){this._taskScheduler.scheduleTask(new jD({name:"addMarker",group:this._markerTasks,callback:e,userdata:{marker:t}}))}addPendingLowPriorityTask(t,e){this._taskScheduler.scheduleTask(new jD({name:t,group:this._lowPriorityTasks,callback:e}))}addPendingMapLoadedTask(t,e){this._taskScheduler.scheduleTask(new jD({name:t,group:this._mapLoadedTasks,callback:e})),this._checkIfLoaded()}_addPendingHighPriorityTask(t,e){this._taskScheduler.scheduleTask(new jD({name:t,group:this._highPriorityTasks,callback:e}))}addThreeJSMarker(t){if(!(t.object instanceof ya))throw new Error("threeJSMarker `object` must be an instance of `Object3D`");let e=new MF({mapId:this.id,object:t.object}),i={object:t.object};return t.object.layers.set(CF.ANIMATED),null!=t.position&&t.object.position.copy(t.position),null!=t.rotation&&t.object.rotation.copy(t.rotation),null!=t.scale&&t.object.scale.copy(t.scale),this.threeJSMarkers.set(e,i),this._objLoadedComplete?this.addToObject(i.object):this.load().then(()=>{e._deleted||this.addToObject(i.object)}),e}removeThreeJSMarker(t){let e=this.threeJSMarkers.get(t);return null!=e&&(t._deleted=!0,this.threeJSMarkers.delete(t),this._objLoadedComplete&&this.object.remove(e.object),t._destroy(),!0)}_removeThreeJSMarkers(){if(this._objLoadedComplete)for(let[t,e]of this.threeJSMarkers.entries())this.object.remove(e.object),t._destroy();this.threeJSMarkers.clear()}removeLabels(){if(this.labels.forEach(t=>{t.disable(),t.removeSelf()}),this.labels=new Set,Array.isArray(this.textObjects)){for(let t=0,e=this.textObjects.length;t<e;++t){let e=this.textObjects[t];e.removeSelf(!0),e=void 0}this.textObjects=[]}}_checkIfLoaded(){this.isReady()&&this._taskScheduler.scheduleTask(new jD({name:"onMapLoaded",callback:()=>{this._taskScheduler.resumeTask(this._mapLoadedTasks),this.mapLoaded&&typeof this.mapLoaded==typeof Function&&(this.mapLoaded(),this.mapLoaded=null)}}))}_onRootObjectCreated(){for(let t in this.threeJSMarkers.values())this.object.add(t.object)}_popinChildObjects(){this.loadAsync||"SINGLE_GEOMETRY"===this.mapRenderingStrategy||this.object.traverse(t=>{0==t.children.length&&"Mesh"==t.type&&t.material.map&&(t.visible=!1,this._addPendingHighPriorityTask("addPolygon",()=>{t.visible=!0,this._showCount>=gF&&(this._showCount=0,this.core.publish(3)),this._showCount++}))})}};(0,r.a)(bF,"MapObject");var wF=bF,EF=class{constructor({mapId:t,object:e}){this._mapId=t,this._object=e}get object(){return this._object}_destroy(){this._mapId=null,this._object=null}};(0,r.a)(EF,"ThreeJSMarkerHandle");var MF=EF,SF=wF;(0,n.a)();var TF={STATIC:0,ANIMATED:1,ALWAYS_ON_TOP:2},CF=TF;(0,n.a)();var AF=!1,PF=class extends jB{constructor(t){super(),(0,r.f)(this,"venueData"),this.venueData=t}async loadMapPolygons(t){return AF&&vy.log("loading map: ",t.id),Promise.resolve(this.venueData.scenes[t.id])}async loadImage(t){return new Promise((e,i)=>{let n=t.split("/"),r=n[n.length-1],o="data:image/png;base64,"+this.venueData.images[r];this.textureLoader.load(o,t=>{t.colorSpace=Fn,e(t)},()=>{},i)})}};(0,r.a)(PF,"BundleAssetManager");var IF=exports.BundleAssetManager=PF;(0,n.a)();var LF="precision mediump float;\n\nuniform sampler2D textureLabel;\n\nvarying vec2 vUV;\nvarying vec3 vColor;\n\nvoid main() {\n\tgl_FragColor = texture2D(textureLabel, vUV);\n\tgl_FragColor.rgb = vColor;\n}",OF="attribute vec2 position;\nattribute vec3 origin;\nattribute vec2 size;\nattribute float rotation;\nattribute vec4 uv;\nattribute vec3 color;\n\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 modelMatrix;\n\nvarying vec2 vUV;\nvarying vec3 vColor;\n\nvoid main() {\n\tvec4 mapDirectionVector = vec4(0, 1, 0, 0) * viewMatrix * modelMatrix;\n\tfloat mapDirection = atan(mapDirectionVector.y, mapDirectionVector.x);\n\n\tfloat cosRotation = cos(rotation);\n\tfloat sinRotation = sin(rotation);\n\n\tmat4 rotationMatrix = mat4(\n\t\tvec4(cosRotation, -sinRotation, 0.0, 0.0),\n\t\tvec4(sinRotation, cosRotation, 0.0, 0.0),\n\t\tvec4(0.0, 0.0, 1.0, 0.0),\n\t\tvec4(0.0, 0.0, 0.0, 1.0)\n\t);\n\n\tmat4 translate = mat4(\n\t\tvec4(1, 0, 0, 0),\n\t\tvec4(0, 1, 0, 0),\n\t\tvec4(0, 0, 1, 0),\n\t\tvec4(origin, 1)\n\t);\n\n\tgl_Position = projectionMatrix *\n\t              viewMatrix *\n\t              modelMatrix *\n\t              translate *\n\t              rotationMatrix *\n\t              (vec4(position * size - vec2(0, size.y / 2.0), 0, 1));\n\n\n\tvec2 uvStart = uv.xy;\n\tvec2 uvSize = uv.zw;\n\n\tif (sin(mapDirection + rotation) > 0.0) {\n\t\tvUV = position * uvSize + vec2(uvStart.x, uvStart.y - uvSize.y);\n\t} else {\n\t\tvUV = (vec2(1, 1) - position) * uvSize + vec2(uvStart.x, uvStart.y - uvSize.y);\t\t\n\t}\n\n\tvColor = color;\n} ",NF={MARGIN:2,HEIGHT_MARGIN:.5,SIZE:1.2},qF=56,RF=qF/NF.SIZE,DF=qF/2,kF=1/DF,BF=64,FF=16,UF=4,zF=class{constructor(){this.x=0,this.y=0,this.width=0,this.height=0,this.layer=null,this.index=null}layout(t,e,i,n,r,o){let a,s=this.canvasBounds.rotation*Math.PI/180,l=this.width*this.pixelsPerMu,h=this.height*this.pixelsPerMu;"left"==this.canvasBounds.align?a=this.margin:"right"==this.canvasBounds.align?a=this.canvasBounds.maxWidth-l-this.margin:"center"==this.canvasBounds.align&&(a=(this.canvasBounds.maxWidth-l-this.margin)/2);let u=a*Math.cos(s),c=-a*Math.sin(s),p=this.index;e.setXYZ(p,this.canvasBounds.x-t.width/2+u,-this.canvasBounds.y+t.height/2+c,this.z+.1),i.setXY(p,l,h),n.setX(p,s);let d=this.layer.canvas;r.setXYZW(p,this.x/d.width,1-this.y/d.height,this.width/d.width,this.height/d.height),o.setXYZ(p,this.color.r,this.color.g,this.color.b),e.needsUpdate=!0,i.needsUpdate=!0,n.needsUpdate=!0,r.needsUpdate=!0,o.needsUpdate=!0}};(0,r.a)(zF,"Label");var VF=zF,jF=class t{constructor(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}leftOverSpace(t){return this.width<t.width||this.height<t.height?null:this.height*(this.width-t.width)+this.width*(this.height-t.height)}split(e,i,n){e.x=this.x,e.y=this.y,this.width-e.height<FF&&this.height-e.height<FF?i.splice(n,1):this.width===e.width?i.splice(n,1,new t(this.x,this.y+e.height,this.width,this.height-e.height)):this.height===e.height?i.splice(n,1,new t(this.x+e.width,this.y,this.width-e.width,this.height)):i.splice(n,1,new t(this.x+e.width,this.y,this.width-e.width,e.height),new t(this.x,this.y+e.height,this.width,this.height-e.height))}};(0,r.a)(jF,"Slot");var GF=jF,HF=class{constructor(t,e,i,n){let r=5;for(;Math.pow(2,r)<n;)r+=1;for(n=Math.pow(2,r),r=10;Math.pow(2,r)<i;)r+=1;i=Math.pow(2,r),this.atlas=t,this.map=e,this.canvasWidth=i,this.canvasHeight=n,this.canvas=document.createElement("canvas"),this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.context=this.canvas.getContext("2d"),this.context.textBaseline="bottom",this.spaces=[new GF(0,0,this.canvas.width,this.canvas.height)],this.free=[],this.labels=[],this.count=BF;let o=new Float32Array(3*this.count),a=new Float32Array(2*this.count),s=new Float32Array(this.count),l=new Float32Array(4*this.count),h=new Float32Array(3*this.count);this.uv=new Pf(l,4,!1,1),this.uv.set(l),this.uv.needsUpdate=!0,this.origin=new Pf(o,3,!1,1),this.origin.set(o),this.origin.needsUpdate=!0,this.size=new Pf(a,2,!1,1),this.size.set(a),this.size.needsUpdate=!0,this.rotation=new Pf(s,1,!1,1),this.rotation.set(s),this.rotation.needsUpdate=!0,this.color=new Pf(h,3,!0,1),this.color.set(h),this.color.needsUpdate=!0;for(let c=0;c<this.count;c++)this.zero(c);let u=new Float32Array([0,0,0,0,1,0,1,1,0,1,0,0]);this.geometry=new Tv,this.geometry.setIndex([0,3,1,3,2,1]),this.geometry.setAttribute("position",new Xa(u,3)),this.geometry.setAttribute("size",this.size),this.geometry.setAttribute("origin",this.origin),this.geometry.setAttribute("rotation",this.rotation),this.geometry.setAttribute("uv",this.uv),this.geometry.setAttribute("color",this.color),this.texture=new Gf(this.canvas),this.texture.anisotropy=16,this.material=new Tm,this.material.vertexShader=OF,this.material.fragmentShader=LF,this.material.uniforms={textureLabel:{value:this.texture}},this.material.transparent=!0,this.mesh=new Cs(this.geometry,this.material),this.obj=new ya,this.obj.add(this.mesh),this.obj.frustumCulled=!1,this.mesh.frustumCulled=!1,this.map.add(this.obj)}space(){return this.spaces.map(t=>t.width*t.height).reduce((t,e)=>t+e)}zero(t){this.origin.array[3*t+0]=0,this.origin.array[3*t+1]=0,this.origin.array[3*t+2]=0,this.size.array[2*t+0]=0,this.size.array[2*t+1]=0,this.rotation.array[t]=0,this.uv.array[4*t+0]=0,this.uv.array[4*t+1]=0,this.uv.array[4*t+2]=0,this.uv.array[4*t+3]=0,this.color.array[3*t+0]=0,this.color.array[3*t+1]=0,this.color.array[3*t+2]=0,this.origin.needsUpdate=!0,this.size.needsUpdate=!0,this.rotation.needsUpdate=!0,this.uv.needsUpdate=!0,this.color.needsUpdate=!0}findSpace(t){if(0!=this.free.length&&this.labels.length==this.count)return!1;let e=-1;for(let i=0;i<this.spaces.length;i++){let n=this.spaces[i].leftOverSpace(t);null!==n&&(-1===e||this.spaces[i].leftOverSpace(t)<n)&&(e=i)}return-1!==e&&(this.spaces[e].split(t,this.spaces,e),t.layer=this,0===this.free.length?(t.index=this.labels.length,this.labels.push(t)):(t.index=this.free.pop(),this.labels[t.index]=t)),-1!=e}remove(t){if(void 0===t.index)return;this.zero(t.index),this.context.clearRect(t.x,t.y,t.width,t.height),this.spaces.push(new GF(t.x,t.y,t.width,t.height)),this.free.push(t.index),this.labels[t.index]=null;let e=!0;for(let i of this.labels)if(!(e=e&&null!=i))break;e&&this.atlas.removeLayer(this)}render(t){this.context.save(),this.context.rect(t.x+1,t.y+1,t.width-2,t.height-2),this.context.clip(),this.context.font=t.size+"px "+t.font;for(let e of t.lines)this.context.fillText(e.text,e.x+t.x+UF,e.y+t.y+e.height+UF);this.texture.needsUpdate=!0,this.context.restore()}onWebGLContextRestored(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.context=this.canvas.getContext("2d"),this.context.textBaseline="bottom",this.texture=new Gf(this.canvas),this.texture.anisotropy=16,this.material.uniforms.textureLabel.value=this.texture;for(let t of this.labels)null!=t&&this.render(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.texture.dispose()}};(0,r.a)(HF,"AtlasLayer");var WF=HF,XF=class{constructor(){this.layers=[],this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d")}addLabel(t,e,i,n,r,o){let a=0,s=0;for(let u of e)s=Math.max(Math.ceil(u.width+u.x),s),a=Math.max(Math.ceil(u.height+u.y),a);let l,h=new VF;h.map=t,h.width=s+2*UF,h.height=a+2*UF,h.lines=e,h.font=i,h.size=n,h.canvasBounds=r.canvasBounds,h.margin=r.margin,h.heightMargin=r.heightMargin,h.pixelsPerMu=o,h.z=r.height,h.view=r,h.color=r.color;for(let u of this.layers)if((l=u).map===t){if(l.findSpace(h))break;l=null}else l=null;if(null==l){if(l=new WF(this,t,h.width,h.height),this.layers.push(l),!l.findSpace(h))return;this.layers.sort((t,e)=>e.space()-t.space())}return l.render(h),h.layout(t.mapClass,l.origin,l.size,l.rotation,l.uv,l.color),h.layer=l,h}removeLayer(t){let e=this.layers.indexOf(t);-1!=e&&this.layers.splice(e,1)}measure(t,e,i){return this.context.font=i+"px "+e,this.context.measureText(t)}onWebGLContextRestored(){for(let t of this.layers)t.onWebGLContextRestored()}dispose(){for(let t of this.layers)t.dispose()}};(0,r.a)(XF,"Atlas");var YF=XF,ZF=class{constructor(t,e,i,n,o,a,s,l,h){(0,r.f)(this,"setHoverColor",(0,r.a)(t=>{this.hoverColor=new Ua(t)},"setHoverColor"));let u=Oy(t.polygon,e.polygons);this.id=u.id,this.text=(t.shortText||t.text).trim(),this.stateText=t.stateText?" ("+t.stateText+")":"",this.fullText=this.stateText?this.text+this.stateText:this.text,this.font=t.font||n,this.atlas=h,this.canvasBounds=t.canvasBounds||u.canvasBounds,this.mapScale=i.getMapScale()||1,this.margin=(t.margin||NF.MARGIN)*this.mapScale,this.heightMargin=(t.heightMargin||NF.HEIGHT_MARGIN)*this.mapScale,this.scaleMin=t.scaleMin||.25,this.scaleStep=t.scaleStep>0?t.scaleStep:.25,this.multiline=null==t.multiline||t.multiline,this.height=Number(t.height)||null,this.polygonMeshesById=o,this.polyId=t.polygonId||Ly(t.polygon,e.polygons),this.map=i,this.color=new Ua(t.color||l.colors.text||"#000000"),this.hoverColor=new Ua(t.hoverColor||this.color),this.baseColor=this.color,this.hideOnCreate=!1,this.hoverLabelText=t.text.trim(),this.fontSize=t.fontSize*this.mapScale||t.size*RF||qF,this.hoverLabelMode=t.hoverLabelMode3D||tU.MODES.ALL,this.hoverLabelClass=t.hoverLabelClass||"mMapviewHoverLabel",this.showHoverLabel=this.hoverLabelMode==tU.MODES.ALL||this.hoverLabelMode==tU.MODES.NO_TEXT_LABEL_ONLY,this.hoverIfLabelFails=this.hoverLabelMode==tU.MODES.ALL||this.hoverLabelMode==tU.MODES.NO_TEXT_LABEL_ONLY,this.textLabelsByPolygonId=a,this.map.textObjects.push(this)}create(){let t=this;if(this.doNotCreate)return;if(null==t.canvasBounds)return t.invalid=!0,t.message="No Canvas Bounds. Can't draw text '"+t.text+"'",void(t.showHoverLabel=t.hoverIfLabelFails);t.showHoverLabel=this.hoverLabelMode==tU.MODES.ALL;let e=kF*this.mapScale,i=DF/this.mapScale,n=[this.text];this.stateText.length&&n.unshift(this.fullText);for(let s of n){let e=s.split(" ").map(function(e){return{width:t.atlas.measure(e,t.font,t.fontSize).width,word:e}}),n=(this.canvasBounds.maxWidth-2*this.margin)*i,l=(this.canvasBounds.maxHeight-2*this.heightMargin)*i,h=(1-this.scaleMin)/this.scaleStep,u=0,c=this.atlas.measure(" ",this.font,this.fontSize).width,p=QF(this.fontSize+"px "+this.font);for(let t=0,i=e.length;t<i;t++){let i=e[t].width,r=Math.ceil((i-n)/(i*this.scaleStep));u=Math.max(r,u)}if(null==this.height)if(this.polygonMeshesById[this.polyId]){let t=this.polygonMeshesById[this.polyId];t.geometry.boundingBox||t.geometry.computeBoundingBox(),this.height=t.geometry.boundingBox.max.z+t.position.z}else this.height=0;var r,o,a;let d=this.scaleStep;t:for(o=u;o<=h;o++){a=1-o*d;let t=e[0].width*a;r=[{text:e[0].word,width:t,height:p*a,x:0,y:0}];for(let i=1;i<e.length;i++){let o=e[i],s=(o.width+c)*a;if(t+s<n)r[r.length-1].text+=" "+o.word,r[r.length-1].width+=s,t+=s;else{if(!this.multiline)continue t;r[r.length-1].width=t,t=o.width*a,r.push({text:o.word,width:t,height:p*a,x:0,y:r[r.length-1].height+r[r.length-1].y})}}if(r.length*p*a<=l){this.invalid=!1;break}}if(0==this.invalid)break}if(0==this.invalid){let t=r.map(t=>Math.ceil(t.width)).reduce((t,e)=>Math.max(t,e));for(let e of r)e.x=(t-e.width)/2;this.label=this.atlas.addLabel(this.map,r,this.font,this.fontSize*a,this,e)}this.created=!0}flipIfNeeded(t){}removeSelf(t){this.created?(null!=this.label&&(this.label.layer.remove(this.label),this.label=null),t||(this.map.textObjects=this.map.textObjects.filter(t=>t!=this),Object.keys(this.textLabelsByPolygonId).forEach(t=>{this.textLabelsByPolygonId[t]==this&&delete this.textLabelsByPolygonId[t]}))):this.doNotCreate=!0}setColor(t){var e;let i=new Ua(t),n=this.color.equals(i),r=!(null==(e=this.label)||!e.layer);this.color=i,!n&&r&&(this.label.color=this.color,this.label.layout(this.map.mapClass,this.label.layer.origin,this.label.layer.size,this.label.layer.rotation,this.label.layer.uv,this.label.layer.color))}clearColor(){this.setColor(this.baseColor)}hide(){this.label?this.label.layer.zero(this.label.index):this.hideOnCreate=!0}show(){if(this.label){let t=this.label.layer,e=this.map;this.label.layout(e.mapClass,t.origin,t.size,t.rotation,t.uv,t.color)}else this.hideOnCreate=!1}toString(){return this.hoverLabelText}};(0,r.a)(ZF,"FlatLabel");var JF=ZF,KF=new Map,QF=(0,r.a)(function(t){let e=KF[t];if(null!=e)return e;let i=document.createElement("span");i.textContent="Hg",i.style.font=t;let n=document.createElement("div");n.style.cssText="display: inline-block; width: 1px; height: 0px;";let r=document.createElement("div");r.appendChild(i),r.appendChild(n),document.body.appendChild(r);try{var o=i.getBoundingClientRect()}finally{r.remove()}return null!=o.height&&(KF[t]=o.height,e=o.height),e},"getTextHeight");(0,n.a)();var $F=(0,r.a)(function(t){let e,i,n=this,r=document.createElement("div");r.style.display="none!important",r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.pointerEvents="none",this.hovering=!1,t.appendChild(r),this.show=function(t){n.hovering||n.setPosition(e,i),n.hovering=!0,r.style.removeProperty("display"),r.textContent=t.toString(),r.className=t.hoverLabelClass},this.hide=function(){n.hovering&&(n.hovering=!1,r.style.setProperty("display","none","important"),r.textContent="")},this.setZIndex=function(t){r.style.zIndex=t},this.setPosition=function(o,a){e=o,i=a,n.hovering&&(a-r.clientHeight>0?(a-=r.clientHeight,o+r.clientWidth>t.clientWidth&&(o-=r.clientWidth)):o=o-r.clientWidth-10,r.style.transform="translate("+o+"px, "+a+"px)")},this.destroy=function(){t.removeChild(r)}},"HoverLabel");$F.MODES={NONE:1,NO_TEXT_LABEL_ONLY:2,ALL:3};var tU=$F;(0,n.a)();var eU=class{constructor(t){(0,r.f)(this,"__engine"),(0,r.f)(this,"_initialRank",0),(0,r.f)(this,"screenPosition",[0,0]),(0,r.f)(this,"enabled",!1),(0,r.f)(this,"options",{}),(0,r.f)(this,"mapId",""),(0,r.f)(this,"id","0"),(0,r.f)(this,"action",0),(0,r.f)(this,"getBoundingBoxForCurrentStrategy"),(0,r.f)(this,"rank",0),(0,r.f)(this,"visible",!1),(0,r.f)(this,"offscreen",!1),(0,r.f)(this,"position",null),(0,r.f)(this,"dimensions",{width:0,height:0}),(0,r.f)(this,"layer",""),(0,r.f)(this,"_bboxes");let{rank:e}=t;null!=t.polygon&&(this.layer=t.polygon.layer),this._initialRank=e,this.rank=e}flipIfNeeded(){}setPosition(t,e=!0){var i;let n={nodeOrCoordinate:t,height:null==(i=this.position)?void 0:i.height};this.mapId=t.map.id,this.position=n,null!=this.__engine&&e&&this.__engine.update()}setPriority(t){this.rank=t,null!=this.__engine&&this.__engine.debouncedUpdate()}setAction(t){this.action=t}resetPriority(){this.rank!==this._initialRank&&this.setPriority(this._initialRank)}promote(){}demote(){}get strategies(){return[]}removeSelf(){this.__engine=void 0}enable(){this.enabled=!0}disable(){this.enabled=!1}colliderDidUpdatePosition(t){this.screenPosition=t}colliderDidNotFindAHome(){this.visible=!1}colliderDidMount(){this.dimensions={width:0,height:0}}colliderDidUpdateVisiblity(){}};(0,r.a)(eU,"BaseCollider");var iU=eU,nU=iU;(0,n.a)(),(0,n.a)();var rU,oU,aU,sU,lU,hU,uU,cU,pU,dU,fU,gU,mU,vU,yU,_U=(0,r.a)(function(){let t,e;return()=>{if((!e||!e)&&((t=document.createElement("canvas")).width=500*devicePixelRatio,t.height=500*devicePixelRatio,t.style.width="500px",t.style.height="500px",e=t.getContext("2d")),!e)throw new Error("Could not get 2D context");return{measureCanvas:t,measureCanvasContext:e}}},"createMeasureCanvasContext")(),xU=(0,r.a)((t,e,i,n=2,r=1.2,o={strokeText:!0})=>{let a="bold ".concat(e*devicePixelRatio,"px 'InterUI-Regular', Helvetica Neue, Arial, sans-serif"),{measureCanvasContext:s}=_U();s.font=a;let l=[],h=t.split(" "),u=0,c=0,p=0;for(;c<h.length;){let t=h[c];if(u===n&&u>0){l[u-1]+="...";break}if(null==l[u]&&(l[u]=t,c++),1===h.length){l[u]=t;break}if(null==h[c])break;let{width:e}=s.measureText(l[u]+" "+h[c]);e<=i?(l[u]+=" "+h[c],c++):u++}l.forEach(t=>{let{width:e}=s.measureText(t);p=Math.max(e,p)});let d=e*devicePixelRatio*r,f=l.length*d;return{maxWidth:p,maxHeight:f,lines:l.length,draw:(t,e,i)=>{1===l.length?(o.strokeText&&t.strokeText(l[0],e,i),t.fillText(l[0],e,i)):(o.strokeText&&(t.strokeText(l[0],e,i-d/2),t.strokeText(l[1],e,i+d/2)),t.fillText(l[0],e,i-d/2),t.fillText(l[1],e,i+d/2))}}},"shaveText"),bU=(0,r.e)(se()),wU=(0,r.e)(le()),EU=(0,r.a)(t=>t*devicePixelRatio,"dp"),MU=2.5,SU=4,TU=6,CU=10,AU=4,PU=.5,IU=6.5,LU=4.5,OU=2.5,NU=2,qU=5,RU={heightAbovePolygon:0,scale:devicePixelRatio,appearance:UB.darkOnLight},DU="Smart Labels do not support setting and clearing colors. Re-label the polygon with desired colors instead",kU=class t extends nU{constructor(e,i){if(super(e),(0,r.h)(this,oU),(0,r.h)(this,pU),(0,r.h)(this,fU),(0,r.f)(this,"lines",0),(0,r.f)(this,"contextConfigured",!1),(0,r.f)(this,"fillText"),(0,r.f)(this,"newStyle",{pinVisibility:1}),(0,r.f)(this,"style",{top:0,left:0,textLabelVisible:!0,pinVisibility:1,textAlign:"left"}),(0,r.f)(this,"setColor",(0,r.a)(()=>{vy.warn(DU)},"setColor")),(0,r.f)(this,"clearColor",(0,r.a)(()=>{},"clearColor")),(0,r.f)(this,"zoomProportion",0),(0,r.f)(this,"_cache",{}),(0,r.f)(this,"appearance"),(0,r.f)(this,"mapView"),(0,r.f)(this,"position"),(0,r.h)(this,rU,!1),(0,r.h)(this,sU,!0),(0,r.h)(this,lU,void 0),(0,r.h)(this,hU,void 0),(0,r.h)(this,cU,void 0),(0,r.h)(this,mU,void 0),(0,r.h)(this,vU,void 0),(0,r.h)(this,yU,!1),null==(0,r.g)(t,uU)&&(0,r.i)(t,uU,{}),this.id=e.id,this.mapView=i,this.options=(0,wU.default)({},{text:e.shortText||e.text||""},e,RU),null!=e.rank&&e.rank>0)this.rank=e.rank,this._initialRank=e.rank;else{let e="test"===n.b.env.NODE_ENV?t.testId:Math.random();t.testId++,this.rank=e,this._initialRank=e}let{mapId:o,position:a}=this.options;this.position=a,e.stateText&&(this.options.text+=" (".concat(e.stateText,")")),this.mapId=o;let{appearance:s}=this.options;this.appearance={margin:s.margin,text:{lineHeight:s.lineHeight,numLines:s.text.numLines,size:s.text.size,maxWidth:s.text.maxWidth,foregroundColor:s.text.foregroundColor,backgroundColor:s.text.backgroundColor},marker:{size:s.marker.size,foregroundColor:{active:s.marker.foregroundColor.active,inactive:s.marker.foregroundColor.inactive||(0,bU.default)(s.marker.foregroundColor.active).setAlpha(.5).toRgbString()},backgroundColor:{active:s.marker.backgroundColor.active,inactive:s.marker.backgroundColor.inactive||(0,bU.default)(s.marker.backgroundColor.active).setAlpha(.5).toRgbString()},icon:s.marker.icon,iconSize:s.marker.iconSize||CU,iconVisibilityThreshold:null==s.marker.iconVisibilityThreshold?PU:s.marker.iconVisibilityThreshold}},this.appearance.marker.icon&&((0,r.i)(this,rU,!0),(0,r.k)(this,pU,dU).call(this))}enable(t=!0){super.enable(),t&&null!=this.__engine&&this.__engine.debouncedUpdate()}get totalTextBoxHeight(){let{height:t}=this.dimensions;return t+2*MU}get totalTextBoxWidth(){let{width:t}=this.dimensions;return t+2*MU}get totalMarkerSize(){return(0,r.g)(this,sU)&&((0,r.i)(this,lU,(0,r.g)(this,vU)/devicePixelRatio+OU),(0,r.i)(this,sU,!1)),(0,r.g)(this,lU)}get strategies(){let{width:t,height:e}=this.dimensions,{margin:i}=this.appearance;(0,r.k)(this,oU,aU).call(this);let n=Math.max(TU,i),o=(0,r.g)(this,yU)?n/2:0,a=[{name:"RIGHT",getBoundingBox:({x:i,y:r})=>{let o=Math.max(this.totalMarkerSize,e);return[r-o/2-n,r+o/2+n,i-this.totalMarkerSize/2-n,i+this.totalMarkerSize+t+n]},onStrategySelected:t=>{this.newStyle=Object.assign({},t.style,{textAlign:"right",pinVisibility:1,top:-this.totalTextBoxHeight/2,left:this.totalMarkerSize/2+SU/2,textLabelVisible:!0,cachedSymbol:this.getCachedSymbol("RIGHT","left",0)})}},{name:"LEFT",getBoundingBox:({x:i,y:r})=>{let o=Math.max(this.totalMarkerSize,e);return[r-o/2-n,r+o/2+n,i-this.totalMarkerSize-t-n,i+this.totalMarkerSize/2+n]},onStrategySelected:e=>{this.newStyle=Object.assign({},e.style,{textAlign:"right",pinVisibility:1,top:-this.totalTextBoxHeight/2,left:-this.totalTextBoxWidth-this.totalMarkerSize/2-SU/2,textLabelVisible:!0,cachedSymbol:this.getCachedSymbol("LEFT","right",EU(t))})}},{name:"TOP",getBoundingBox:({x:i,y:r})=>[r-(e+this.totalMarkerSize)-n,r+this.totalMarkerSize/2+n,i-t/2-n,i+t/2+n],onStrategySelected:e=>{this.newStyle=Object.assign({},e.style,{pinVisibility:1,textAlign:"center",textLabelVisible:!0,top:-this.totalTextBoxHeight-this.totalMarkerSize/2-SU/2,left:-this.totalTextBoxWidth/2,cachedSymbol:this.getCachedSymbol("TOP","center",EU(t/2))})}},{name:iY,getBoundingBox:({x:t,y:e})=>[e-this.totalMarkerSize/2-o,e+this.totalMarkerSize/2+o,t-this.totalMarkerSize/2-o,t+this.totalMarkerSize/2+o],onStrategySelected:t=>{this.newStyle=Object.assign({},t.style,{pinVisibility:.5,textLabelVisible:!1})}}];return""===this.options.text?[{name:"ICON_ONLY",getBoundingBox:({x:t,y:e})=>[e-this.totalMarkerSize/2-n/2,e+this.totalMarkerSize/2+n/2,t-this.totalMarkerSize/2-n/2,t+this.totalMarkerSize/2+n/2],onStrategySelected:t=>{this.newStyle=Object.assign({},t.style,{pinVisibility:1,textLabelVisible:!1})}}]:a}getCachedSymbol(t,e,i){let{width:n,height:r}=this.dimensions;if(null==this._cache[t]){let o,a=n+2*MU,s=r+2*MU;null!=window.OffscreenCanvas?o=new OffscreenCanvas(EU(a+MU),EU(s+MU)):((o=document.createElement("canvas")).width=EU(a+MU),o.height=EU(s+MU),o.style.width=a+"px",o.style.height=s+"px");let l=o.getContext("2d"),{size:h}=this.options.appearance.text;l.textAlign=e,l.font="bold ".concat(h*devicePixelRatio,"px 'InterUI-Regular', Helvetica Neue, Arial, sans-serif"),l.textBaseline="middle",l.lineJoin="miter",l.miterLimit=2,l.strokeStyle="white",l.lineWidth=EU(MU),l.fillStyle=this.appearance.text.foregroundColor,l.strokeStyle=this.appearance.text.backgroundColor,this.fillText&&"function"==typeof this.fillText&&this.fillText(l,i+EU(MU),EU(s+MU/2)/2),this._cache[t]=o}return this._cache[t]}invalidate(){this._cache={},this.colliderDidMount()}colliderDidMount(){let{size:t,maxWidth:e,numLines:i,lineHeight:n}=this.appearance.text,r=this.options.text||"",{draw:o,lines:a,maxWidth:s,maxHeight:l}=xU(r,t,EU(e),i,n);this.fillText=o,this.lines=a,this.dimensions={width:s/devicePixelRatio,height:l/devicePixelRatio}}colliderDidUpdatePosition(t){this.screenPosition=t}colliderDidUpdateVisiblity(){(0,r.k)(this,oU,aU).call(this),1===this.action?this.visible=!0:this.visible=!1,this.action=0,this.style=this.newStyle}colliderDidGoOutsideGrid(){}colliderDidNotFindAHome(){this.action=2}disable(t=!0){super.disable(),this.visible=!1,t&&null!=this.__engine&&this.__engine.debouncedUpdate()}get pinCanvasSize(){return 2*this.totalMarkerSize}draw(e){var i;if(!this.visible)return;let[n,o]=this.screenPosition,{pinVisibility:a,textLabelVisible:s,top:l,left:h,textAlign:u,cachedSymbol:c}=this.style,p=EU(n),d=EU(o),{marker:f}=this.appearance,{foregroundColor:g,backgroundColor:m}=f,v=jy("".concat(g.active,"-").concat(g.inactive,"-").concat(m.active,"-").concat(m.inactive,"-").concat((0,r.g)(this,vU)));if((0,r.g)(t,uU)[v]){let i=1===a?(0,r.g)(t,uU)[v][0]:(0,r.g)(t,uU)[v][1];e.drawImage(i,p-EU(this.pinCanvasSize/2),d-EU(this.pinCanvasSize/2))}else{e.lineWidth=EU(4);let i=(0,r.k)(this,fU,gU).call(this,(0,r.g)(this,vU),this.appearance.marker.backgroundColor.active,this.appearance.marker.foregroundColor.active),n=(0,r.k)(this,fU,gU).call(this,(0,r.g)(this,yU)?(0,r.g)(this,vU):EU(LU),this.appearance.marker.backgroundColor.inactive,this.appearance.marker.foregroundColor.inactive);(0,r.g)(t,uU)[v]=[i,n]}if((0,r.g)(this,yU)){let n=EU(this.appearance.marker.iconSize);null==(i=t.imagePromiseCache[(0,r.g)(this,cU)])||i.then(t=>{e.drawImage(t,p-n/2,d-n/2,n,n)})}(0,r.g)(this,hU)!==u&&(e.textAlign=u,(0,r.i)(this,hU,u)),s&&null!=c&&(e.shadowColor="transparent",e.drawImage(c,p+EU(h),d+EU(l)))}};rU=new WeakMap,oU=new WeakSet,aU=(0,r.a)(function(){if((0,r.g)(this,mU)!==this.mapView.currentScale){let{iconVisibilityThreshold:t=PU}=this.appearance.marker;this.mapView.currentScale<=t&&typeof this.appearance.marker.iconSize<"u"&&(0,r.g)(this,rU)?((0,r.i)(this,vU,EU(this.appearance.marker.iconSize+AU)),(0,r.i)(this,yU,!0)):((0,r.i)(this,yU,!1),(0,r.i)(this,vU,EU(IU))),(0,r.i)(this,mU,this.mapView.currentScale)}(0,r.i)(this,sU,!0)},"#calculateMarkerSize"),sU=new WeakMap,lU=new WeakMap,hU=new WeakMap,uU=new WeakMap,cU=new WeakMap,pU=new WeakSet,dU=(0,r.a)(function(){let t=jy(this.appearance.marker.icon);(0,r.i)(this,cU,t),kU.imagePromiseCache[t]||(kU.imagePromiseCache[t]=fetch("data:image/svg+xml;base64, ".concat(btoa(this.appearance.marker.icon))).then(t=>t.blob()).then(t=>new Promise(e=>{let i=new Image;i.onload=function(){e(i)},i.src=URL.createObjectURL(t)})))},"#cacheImage"),fU=new WeakSet,gU=(0,r.a)(function(t,e,i){let n,r=EU(this.pinCanvasSize);null!=window.OffscreenCanvas?n=new OffscreenCanvas(r,r):((n=document.createElement("canvas")).width=r,n.height=r,n.style.width=r/devicePixelRatio+"px",n.style.height=r/devicePixelRatio+"px");let o=n.getContext("2d");return o.shadowColor="rgba(0,0,0,0.3)",o.shadowOffsetY=EU(NU),o.shadowBlur=EU(qU),o.beginPath(),o.arc(r/2,r/2,t/2+EU(OU)/2,0,2*Math.PI),o.fillStyle=e,o.fill(),o.beginPath(),o.arc(r/2,r/2,t/2,0,2*Math.PI),o.shadowColor="transparent",o.fillStyle=i,o.fill(),n},"#createPinCanvas"),mU=new WeakMap,vU=new WeakMap,yU=new WeakMap,(0,r.a)(kU,"FloatingLabel"),(0,r.f)(kU,"testId",0),(0,r.h)(kU,uU,void 0),(0,r.f)(kU,"imagePromiseCache",{});var BU=kU,FU=BU;(0,n.a)();var UU,zU,VU=class extends nU{constructor(){super(...arguments),(0,r.f)(this,"contentEl",document.createElement("div")),(0,r.f)(this,"containerEl",document.createElement("div")),(0,r.f)(this,"ready",!1),(0,r.h)(this,UU,[0,0]),(0,r.h)(this,zU,!1)}removeSelf(){var t,e;if(null!=this.__engine&&null!=(null==(t=this.containerEl)?void 0:t.parentElement)&&(null==(e=this.containerEl)?void 0:e.parentElement)===this.__engine.collisionEngineContainerEl)try{this.containerEl.parentElement.removeChild(this.containerEl)}catch(t){vy.warn("error removing collider from dom",t)}this.__engine=void 0,this.containerEl=null,this.contentEl=null}enable(){!this.__engine||!this.containerEl||(this.enabled=!0,this.containerEl.style.opacity="0",this.__engine.collisionEngineContainerEl.appendChild(this.containerEl),this.updateDimensionsImmediately())}disable(){if(this.__engine&&this.containerEl&&(this.enabled=!1,this.ready=!1,this.containerEl.style.opacity="0",null!=this.containerEl.parentElement&&this.containerEl.parentElement===this.__engine.collisionEngineContainerEl))try{this.containerEl.parentElement.removeChild(this.containerEl)}catch(t){vy.warn("error removing collider from dom",t)}}colliderDidGoOffscreen(){this.visible=!1,this.containerEl&&(this.containerEl.style.opacity="0")}colliderDidNotFindAHome(){this.visible=!1}colliderDidUpdatePosition(t){this.containerEl&&(this.enabled&&!this.ready&&(this.containerEl.style.opacity="1",this.ready=!0),((0,r.g)(this,UU)[0]!==t[0]||(0,r.g)(this,UU)[1]!==t[1])&&this.visible&&(this.containerEl.style.transform="translate3D(".concat(t[0],"px, ").concat(t[1],"px, ").concat(t[1],"px)"),(0,r.i)(this,UU,t)))}updateDimensions(){(0,r.i)(this,zU,!0),this.visible&&(this.updateDimensionsImmediately(),(0,r.i)(this,zU,!1))}updateDimensionsImmediately(){if((0,r.g)(this,zU)&&this.containerEl){let{width:t,height:e}=this.containerEl.getBoundingClientRect();this.dimensions={width:t,height:e},Object.assign(this.containerEl,{width:t+"px",height:e+"px"}),(0,r.i)(this,zU,!1),null!=this.__engine&&this.__engine.debouncedUpdate()}}colliderDidMount(){this.updateDimensions()}colliderDidUpdateVisiblity(){this.containerEl&&(this.containerEl.style.opacity=this.visible?"1":"0"),this.visible&&(0,r.g)(this,zU)&&this.updateDimensionsImmediately()}};UU=new WeakMap,zU=new WeakMap,(0,r.a)(VU,"HTMLCollider");var jU=VU,GU=jU;(0,n.a)();var HU=(0,r.e)(o()),WU={};function XU(t,e){var i;return null!=(null==(i=WU[t.id])?void 0:i[e])||(null==WU[t.id]&&(WU[t.id]={}),t.polygons.forEach(e=>{e.entrances.forEach(i=>{WU[t.id][i.id]=e})})),WU[t.id][e]}(0,r.a)(XU,"getPolygonByNodeId");var YU,ZU=class{constructor(t){(0,r.h)(this,YU,void 0),(0,r.i)(this,YU,t)}get id(){return(0,r.g)(this,YU).id}get containerEl(){return(0,r.g)(this,YU).containerEl}get contentEl(){return(0,r.g)(this,YU).contentEl}update(){(0,r.g)(this,YU).updateDimensions()}};YU=new WeakMap,(0,r.a)(ZU,"Marker");var JU,KU=ZU,QU=class{constructor(t){(0,r.h)(this,JU,void 0),(0,r.f)(this,"markersMap"),(0,r.f)(this,"animations"),(0,r.i)(this,JU,t),this.markersMap=new Map,this.animations=new Map}create(t,e,i){if(null==(0,r.g)(this,JU).currentMap)throw new Error("Unable to retrieve the current map");let n=(0,r.g)(this,JU).mapObjects.get(t.map.id||(0,r.g)(this,JU).currentMap),o=0;if(t instanceof cT){let e=XU(n.mapClass,t.id);null!=e&&(o=e.geometry.scale.z*Math.max(n.mapClass.width,n.mapClass.height)/1e3)}return new uz({...i,collisionRank:null==i?void 0:i.rank,contentHtml:e,mapId:n.id,position:{nodeOrCoordinate:t,height:o}})}addInternal(t,e,i){if(null==(0,r.g)(this,JU).currentMap)throw new Error("Unable to retrieve the current map");let n=this.create(t,e,i);return(0,r.g)(this,JU).smartCollisionEngine.add(n.id,n),n}add(t,e,i){if(null==(0,r.g)(this,JU).currentMap)throw new Error("Unable to retrieve the current map");let n=(0,r.g)(this,JU).mapObjects.get(t.map.id||(0,r.g)(this,JU).currentMap),o=this.create(t,e,i);(0,r.g)(this,JU).smartCollisionEngine.add(o.id,o),n.markers.add(o),(0,r.g)(this,JU).taskScheduler.scheduleTask(new jD({name:"addMarker",callback:()=>{(0,r.g)(this,JU).visibleMapsInCurrentScene.map(t=>t.id).includes(o.mapId)&&(o.enable(),(0,r.g)(this,JU).smartCollisionEngine.debouncedUpdate())}})),(0,r.g)(this,JU).tryRendering();let a=new KU(o);return this.markersMap.set(o.id,{marker:a,internalMarker:o}),a}updateMap(t,e,i){var n,o;null==(n=(0,r.g)(this,JU).mapObjects.get(e))||n.markers.delete(t),null==(o=(0,r.g)(this,JU).mapObjects.get(i))||o.markers.add(t),(0,r.g)(this,JU).smartCollisionEngine.updateMap(t.id,e,i),(0,r.g)(this,JU).visibleMapsInCurrentScene.map(t=>t.id).includes(t.mapId)?t.enable():t.disable()}setPosition(t,e,i){var n,o;let a;if("string"==typeof t?a=null==(n=this.markersMap.get(t))?void 0:n.internalMarker:t instanceof KU?a=null==(o=this.markersMap.get(t.id))?void 0:o.internalMarker:t instanceof uz&&(a=t),!a)return;let s=a.position.nodeOrCoordinate;s.map.id!==e.map.id&&this.updateMap(a,s.map.id,e.map.id),a.setPosition(e,i),(0,r.g)(this,JU).tryRendering(YB.ALL)}animate(t,e,i){var n;let o="string"==typeof t?t:t.id,a=null==(n=this.markersMap.get(o))?void 0:n.internalMarker;if(!a)return Promise.resolve();let s=this.animations.get(o);s&&(s.tween.stop(),s.resolver(),this.animations.delete(o));let l,h=a.position.nodeOrCoordinate,u={lat:h.lat,lon:h.lon},c={lat:e.lat,lon:e.lon},p=(null==i?void 0:i.easing)&&RB[i.easing]||HU.default.Easing.Cubic.InOut,d=new HU.default.Tween(u).to(c,(null==i?void 0:i.duration)||1e3).easing(p).onUpdate(t=>{let i=e.map.createCoordinate(t.lat,t.lon);this.setPosition(a,i)}).onComplete(()=>{this.animations.delete(o),l()}).start();h.map.id!==e.map.id&&this.updateMap(a,h.map.id,e.map.id);let f=new Promise(t=>{l=t,this.animations.set(o,{tween:d,resolver:l})});return(0,r.g)(this,JU).tryRendering(),f}remove(t){let e="string"==typeof t?t:t.id;(0,r.g)(this,JU).smartCollisionEngine.remove(e),(0,r.g)(this,JU).smartCollisionEngine.debouncedUpdate(),(0,r.g)(this,JU).tryRendering(),this.markersMap.delete(e)}removeAll(){Array.from((0,r.g)(this,JU).mapObjects.values()).forEach(t=>{t.markers.forEach(t=>{(0,r.g)(this,JU).smartCollisionEngine.remove(t.id)})}),(0,r.g)(this,JU).smartCollisionEngine.update(),(0,r.g)(this,JU).tryRendering(),this.markersMap=new Map}};JU=new WeakMap,(0,r.a)(QU,"MarkersController");var $U=QU,tz=$U;(0,n.a)();var ez,iz,nz={top:!0,left:!0,topLeft:!0,right:!0,topRight:!0,bottom:!0,bottomLeft:!0,bottomRight:!0},rz=class t extends GU{constructor(e){super(e),(0,r.f)(this,"className","top"),(0,r.f)(this,"_el",null),(0,r.f)(this,"style",{}),(0,r.f)(this,"position"),(0,r.f)(this,"containerClassesLength"),(0,r.f)(this,"updateClassName",(0,r.a)(t=>{if(!this.containerEl)return;let e=this.containerEl.classList.item(this.containerClassesLength);e&&this.containerEl.classList.remove(e),this.containerEl.classList.add("tooltip--anchor-".concat(t)),(0,r.i)(this,iz,t)},"updateClassName")),(0,r.h)(this,ez,"-1"),(0,r.h)(this,iz,"");let{html:i,contentHtml:n,text:o,position:a,selector:s,map:l,padding:h=0,collisionRank:u=3,defaultAnchorType:c="top",enabledAnchorTypes:p,interactive:d=!1}=e,f=t.getContainerElClasses(d);if(this.containerClassesLength=f.split(" ").length,this.position=a,!this.containerEl)return;this.containerEl.innerHTML=i||'<div class="'.concat(f,'"><div class="mappedin-tooltip__content" style="padding: ').concat(h,'px">').concat(o||n,"</div></div>"),this.rank=u,this.mapId=l,this.id=wy();let g=i?s:".mappedin-tooltip";this.containerEl=g?this.containerEl.querySelector(g):null,this.containerEl&&(this.contentEl=this.containerEl.firstElementChild),this._el=this.contentEl,this.options={collisionRank:u,padding:h/Math.SQRT2,defaultAnchorType:c,enabledAnchorTypes:{...nz,...p},interactive:d}}get strategies(){let{width:t,height:e}=this.dimensions,{padding:i}=this.options,n=i/2;return[{name:"top",getBoundingBox:({x:n,y:r})=>[r-e-i,r-i,n-t/2,n+t/2+i/2],onStrategySelected:()=>{this.style.top=-e-i+"px",this.style.left=-t/2+"px",this.className="top"}},{name:"right",getBoundingBox:({x:n,y:r})=>[r-e/2-i/2,r+e/2+i/2,n+i,n+i+t],onStrategySelected:()=>{this.style.top=-e/2+"px",this.style.left=i+"px",this.className="right"}},{name:"left",getBoundingBox:({x:n,y:r})=>[r-e/2,r+e/2,n-t-i,n],onStrategySelected:()=>{this.style.top=-e/2+"px",this.style.left=-t-i+"px",this.className="left"}},{name:"bottom",getBoundingBox:({x:n,y:r})=>[r+i,r+i+e,n-t/2,n+t/2],onStrategySelected:()=>{this.style.top=i+"px",this.style.left=-t/2+"px",this.className="bottom"}},{name:"bottomLeft",getBoundingBox:({x:r,y:o})=>[o+n+i,o+n+e+i,r-t-n,r-n],onStrategySelected:()=>{this.style.top=i+"px",this.style.left=-t-i+"px",this.className="bottom-left"}},{name:"bottomRight",getBoundingBox:({x:r,y:o})=>[o+n,o+n+e+i,r+n,r+n+t+i],onStrategySelected:()=>{this.style.top=i+"px",this.style.left=i+"px",this.className="bottom-right"}},{name:"topLeft",getBoundingBox:({x:i,y:r})=>[r-e-n,r-n,i-t-n,i-n],onStrategySelected:()=>{this.style.top=-e-i+"px",this.style.left=-t-i+"px",this.className="top-left"}},{name:"topRight",getBoundingBox:({x:r,y:o})=>[o-e-n,o-n,r+n+i,r+n+t+i],onStrategySelected:()=>{this.style.top=-e-i+"px",this.style.left=i+"px",this.className="top-right"}}].filter(t=>!0===this.options.enabledAnchorTypes[t.name])}colliderDidMount(){this.updateDimensions()}updateDimensionsImmediately(){super.updateDimensionsImmediately(),(0,r.i)(this,iz,""),(0,r.i)(this,ez,"-1")}setAction(t){super.setAction(t),this.visible=1===t}colliderDidNotFindAHome(){4===this.options.collisionRank?this.visible=!0:this.setAction(2)}colliderDidGoOffscreen(){}colliderDidUpdateVisiblity(){let t=1===this.action?"1":"0";this.containerEl&&((0,r.g)(this,ez)!=t&&(this.containerEl.style.opacity=t),"0"===t?this.updateInteractive(!1):this.updateInteractive(!this.options.interactive),(0,r.g)(this,iz)!==this.className&&(this.updateClassName(this.className),!0===this.visible&&(this.updateDimensionsImmediately(),Object.assign(this.containerEl.style,this.style))))}updateInteractive(t){if(!this.containerEl)return;let e=this.containerEl.classList.item(1);if(!e)return;let i=t?"pointer-events-auto":"pointer-events-none";e!==i&&this.containerEl.classList.replace(e,i)}static getContainerElClasses(t){return"mappedin-tooltip ".concat(t?"pointer-events-none":"pointer-events-auto")}};ez=new WeakMap,iz=new WeakMap,(0,r.a)(rz,"SmartTooltip");var oz=rz,az=oz;(0,n.a)();var sz={anchor:0},lz=class extends GU{constructor(t){super(t),(0,r.f)(this,"_el",null),(0,r.f)(this,"style",{}),(0,r.f)(this,"polygon"),(0,r.f)(this,"position");let{contentHtml:e,position:i,mapId:n,id:o,collisionRank:a=3}=t;this.position=i,this.containerEl&&(this.containerEl.innerHTML='<div class="mappedin-marker__wrapper"><div class="mappedin-marker">'.concat(e,"</div></div>"),this.rank=a,this.mapId=n,this.id="string"==typeof o?o:wy(),this.containerEl=this.containerEl.querySelector(".mappedin-marker"),this.contentEl=this.containerEl?this.containerEl.firstElementChild:null,this._el=this.contentEl,this.options={...sz,...t})}get strategies(){let{width:t,height:e}=this.dimensions;return[{name:"center",getBoundingBox:({x:i,y:n})=>{let r=n-e/2,o=n+e/2,a=i-t/2,s=i+t/2;switch(this.options.anchor){case 1:r=n-e,o=n;break;case 3:r=n,o=n+e;break;case 2:a=i-t,s=i;break;case 4:a=i,s=i+t}return[r,o,a,s]},onStrategySelected:()=>{let i=-e/2+"px",n=-t/2+"px";switch(this.style.top=i,this.style.left=n,this.options.anchor){case 1:this.style.top=-e+"px";break;case 3:this.style.top="0px";break;case 2:this.style.left=-t+"px";break;case 4:this.style.left="0px";break;default:this.style.top=i,this.style.left=n}}}]}colliderDidMount(){this.updateDimensions()}setAction(t){super.setAction(t),this.visible=1===t}colliderDidNotFindAHome(){this.setAction(2)}colliderDidUpdatePosition(t){super.colliderDidUpdatePosition(t)}colliderDidGoOffscreen(){}colliderDidUpdateVisiblity(){this.containerEl&&(this.containerEl.style.opacity=1===this.action?"1":"0"),super.colliderDidUpdateVisiblity(),!0===this.visible&&this.containerEl&&Object.assign(this.containerEl.style,this.style)}};(0,r.a)(lz,"InternalMarker");var hz=lz,uz=hz;(0,n.a)(),(0,n.a)();var cz=500,pz="ease-out",dz=.6,fz=void 0,gz=7.9,mz=1;function vz(t,e){let i=t.getCenter(new ho),n=t.getSize(new ho),{x:r,y:o,z:a}=n,s=r*e,l=o*e,h=a*e,u=i.x-s/2,c=i.x+s/2,p=i.y-l/2,d=i.y+l/2,f=i.z-h/2,g=i.z+h/2;return new fo({x:u,y:p,z:f},{x:c,y:d,z:g})}function yz(t,e){let{margin:i,radius:n}=e,r=t.boundingBox,o=vz(new fo(r.min,r.max).clone().applyMatrix4(t.object.matrix),null!=i?i:1),a={min:o.min,max:o.max,margin:i,radius:n,center:o.getCenter(new ho)};a.min.z=(a.max.z+a.min.z)/2,a.max.z=a.min.z;let s=(a.max.x+a.min.x)/2,l=(a.max.y+a.min.y)/2,h=(a.max.z,a.min.z,Math.sqrt((a.max.x-s)**2+(a.max.y-l)**2));return a.radius=h,a.center=o.getCenter(new ho),a}(0,r.a)(vz,"addMarginMultiplierToBoundingBox"),(0,r.a)(yz,"getPanBoundsForObject");var _z,xz=class{constructor(t,e){(0,r.f)(this,"maps"),(0,r.h)(this,_z,void 0),(0,r.f)(this,"mapObjectsArray",[]),(0,r.f)(this,"transitionOptions"),(0,r.f)(this,"object",new ya),(0,r.f)(this,"currentMap"),(0,r.f)(this,"mapObjects",new Map),(0,r.i)(this,_z,e),this.object.userData.name="mappedin-scene",this.maps=t.sort((t,e)=>t.elevation-e.elevation),t.forEach(t=>{let e=(0,r.g)(this,_z).mapObjects.get(t.id);this.mapObjects.set(t.id,e)}),this.object.position.set(0,0,0)}get mapObjectsByMapGroup(){let t=Array.from(this.mapObjects.values());return 0===t.filter(t=>{var e;return null==(e=t.mapClass.mapGroup)?void 0:e.id}).length?{_:t}:Array.from(this.mapObjects.values()).reduce((t,e)=>(t[e.mapClass.mapGroup.id]?t[e.mapClass.mapGroup.id].push(e):t[e.mapClass.mapGroup.id]=[e],t),{})}determineMapPositionAndRotation(t){var e,i;let n=(null==(e=(0,r.g)(this,_z).referenceMap)?void 0:e.scale)||1,o=t.scale||1,a=(null==(i=(0,r.g)(this,_z).referenceMap)?void 0:i.getNorth())||0,s=t.getNorth()||0,{x:l,y:h}=t.georeference[0].target,{x:u,y:c}=t.georeference[2].target,p=new py(l,h),d=new py(u,c),{lat:f,lon:g}=p.midpointTo(d),m=(0,r.g)(this,_z).referenceMap.createCoordinate(f,g),{x:v,y:y}=(0,r.g)(this,_z).convertTo3DMapPosition(m),_=o/n;return{position:[v,y,0],scale:[_,_,_],rotation:[0,0,s-a]}}async prepare(t,e){this.transitionOptions=e||{},this.currentMap=(null==e?void 0:e.activeMap)||this.maps[0],t.currentScene=this;let i=await this.preRender(e);this.mapObjectsArray=await Promise.all(i)}resize(){}focusOnCurrentMap(t,e){return new Promise(i=>{var n,o,a,s,l,h;let u=this.mapObjects.get(this.currentMap.id);u.object.updateMatrixWorld();let c=(0,r.g)(this,_z).loadOptions&&(0,r.g)(this,_z).loadOptions.zoomOverrides&&(0,r.g)(this,_z).loadOptions.zoomOverrides.zoomMultiplier||gz,p=u.getMapScale()*u.object.scale.x;(0,r.g)(this,_z).controls.zoomFactor=p/c;let d=yz(u,(0,r.g)(this,_z).controls.panBounds);(0,r.g)(this,_z).controls.panBounds=d;let f=null==(n=null==t?void 0:t.focusOn)?void 0:n.targets,g=(null==(o=null==t?void 0:t.focusOn)?void 0:o.options)||{},m={boundingBox:d},v=null!=(a=null==g?void 0:g.rotation)?a:fz,y=null==g?void 0:g.tilt,_=null!=(s=null==g?void 0:g.easing)?s:pz,x=null!=(l=null==g?void 0:g.duration)?l:cz,{min:b,max:w}=d,E=[new ho(b.x,b.y,b.z),new ho(b.x,w.y,b.z),new ho(w.x,b.y,b.z),new ho(w.x,w.y,b.z),new ho(b.x,b.y,w.z),new ho(b.x,w.y,w.z),new ho(w.x,b.y,w.z),new ho(w.x,w.y,w.z)],{zoom:M}=(0,r.g)(this,_z).getCameraFrameForPoints(E,1,1,(0,r.g)(this,_z).cachedPadding,!1);(0,r.g)(this,_z).controls.restrictZoomLimits(M),(0,r.g)(this,_z).controls.expandZoomLimits(M),e?((0,r.g)(this,_z).controls.setMulti(d.center,M,fz,dz),i(void 0)):null!=t&&t.autoFocusOnActiveMap?(null!=f&&(m={...f,points:(null==(h=null==f?void 0:f.coordinates)?void 0:h.map(t=>(0,r.g)(this,_z).convertTo3DMapPosition({x:t.x,y:t.y})))||[]}),(0,r.g)(this,_z).focusOn({...m,...g,duration:x,rotation:v,doNotEmitFocusOnEvent:!0,focusZoomFactor:1,minZoom:null==g?void 0:g.minZoom,padding:g.safeAreaInsets,tilt:y,curve:RB[_],callback:()=>{i(void 0)},cancelledCallback:()=>{i(void 0)}})):((0,r.g)(this,_z).tryRendering(),i(void 0))})}async preRender(t){this.currentMap=(null==t?void 0:t.activeMap)||this.maps[0],this.transitionOptions=t;let e=[];for(let i in this.mapObjectsByMapGroup)this.mapObjectsByMapGroup[i].forEach(t=>{e.push(t.load().then(()=>{if(!(0,r.g)(this,_z).sceneManager.processedMapObjects.has(t)){let{position:e,rotation:i,scale:n}=this.determineMapPositionAndRotation(t.mapClass);t.object.position.set(...e),t.object.rotation.set(...i),t.object.scale.set(...n),t.box=(new fo).setFromObject(t.object),t.object.name=t.mapClass.id,(0,r.g)(this,_z).sceneManager.processedMapObjects.add(t)}return t}).catch(t=>{vy.error(t)}))});return e}unmount(){}postRender(){(0,r.g)(this,_z).imageFlippingEnabled&&(this.mapObjectsArray.forEach(t=>{var e;null==(e=(0,r.g)(this,_z).imageFlippingCache[t.id])||e.forEach(([e,i])=>{t.enableImageFlipping(e,i)})}),(0,r.g)(this,_z).publish(4,!0))}};_z=new WeakMap,(0,r.a)(xz,"MapViewScene");var bz=xz,wz=bz;(0,n.a)();var Ez,Mz=(0,r.e)(o()),Sz=!1,Tz=2e3,Cz=2e3,Az=(0,r.a)(([t,e],[i,n])=>{let o={x:t,y:e},a=i,s=n;function l(t,e){let i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)}return(0,r.a)(l,"distanceBetweenPoints"),l({x:(o.x+a)/2,y:(o.y+s)/2},o)},"getRadiusOfSquare"),Pz=(0,r.a)(t=>{let e=new ho,i=new ho;for(let a of t)e.min(a),i.max(a);let n=new ls,r=new Xa(new Float32Array(24),3);for(let a=0;a<8;a++){let e=t[a].clone();r.setXYZ(a,e.x,e.y,e.z)}n.setAttribute("position",r);let o=new Xa(new Uint16Array([0,2,1,0,3,2,1,6,5,1,2,6,5,7,4,5,6,7,4,3,0,4,7,3,3,6,2,3,7,6,0,5,4,0,1,5]),1);return n.setIndex(o),n},"createBoxFromPoints"),Iz=50,Lz=class extends wz{constructor(t,e){var i,n;super(t,e),(0,r.h)(this,Ez,void 0),(0,r.f)(this,"containerBoxHelper"),(0,r.f)(this,"viewportBox"),(0,r.f)(this,"currentMapWrapperMesh"),(0,r.f)(this,"currentMapWrapperBoxHelper"),(0,r.f)(this,"viewportMesh"),(0,r.f)(this,"stackContainerMesh"),(0,r.f)(this,"currentMinTilt"),(0,r.f)(this,"hasOutdoorGeometry",!1),(0,r.f)(this,"scrollToMap",(0,r.a)(async(t,e=500)=>new Promise(i=>{let n=this.mapObjects.get(t.id);new Mz.default.Tween({z:(0,r.g)(this,Ez).controls.getPedestal()}).to({z:n.object.position.z},e).easing(Mz.default.Easing.Quadratic.InOut).onUpdate(({z:t})=>{(0,r.g)(this,Ez).controls.setPedestal(t)}).onComplete(()=>{(0,r.g)(this,Ez).controls.setPedestal((0,r.g)(this,Ez).controls.getPedestal(),!0),(0,r.g)(this,Ez).tryRendering(),i(void 0)}).start()}),"scrollToMap")),(0,r.f)(this,"updateFrame",(0,r.a)(t=>{let e=this.containerBoxHelper.max.z,i=this.containerBoxHelper.min.z;t.pedestal<e&&t.pedestal>i&&(this.currentMapWrapperMesh.position.z=t.pedestal,this.viewportMesh.position.z=t.pedestal,this.currentMapWrapperBoxHelper.setFromObject(this.currentMapWrapperMesh),this.viewportBox.setFromObject(this.viewportMesh),this.mapObjects.forEach(t=>{t.box.setFromObject(t.object),(this.currentMapWrapperBoxHelper.containsBox(t.box)||this.currentMapWrapperBoxHelper.intersectsBox(t.box))&&this.currentMap!==t.mapClass&&(this.currentMap=t.mapClass,(0,r.g)(this,Ez).publish(5,t.mapClass))}),(0,r.g)(this,Ez).controls.orbit.position.z=t.pedestal,(0,r.g)(this,Ez).tryRendering())},"updateFrame")),(0,r.f)(this,"labels",new Map),(0,r.f)(this,"createMapLabels",(0,r.a)(()=>{for(let t of this.mapObjects.values()){let e=t.object.position.clone(),i=Az([this.containerBoxHelper.min.x,this.containerBoxHelper.min.y],[this.containerBoxHelper.max.x,this.containerBoxHelper.max.y]),n=Math.PI/4,o=new ho(Math.cos(n)*i,Math.sin(n)*i,0),a=(0,r.g)(this,Ez).cameraObject,s=new ho;a.getWorldDirection(s);let l=(new so).setFromUnitVectors(o.clone().normalize(),s.clone().cross(new ho(0,0,-1)).normalize()),h=e.clone().add(o.clone().applyQuaternion(l));h.z=t.object.position.z;let u=new Ls(100,100,100),c=new ja({color:"red"});new Cs(u,c).position.copy(h);let p=(0,r.g)(this,Ez).markers.addInternal((0,r.g)(this,Ez).convert3DMapPositionToCoordinate(h,t.mapClass),"<div style=\"color: #333333; text-shadow: 0px 0px #efefef;font-family: 'Lato', sans-serif; font-size: 24px; font-weight: 300; line-height: 58px;\">".concat(t.mapClass.shortName,"</div>"),{rank:4});p.enable(),this.labels.set(t,[o,e,p])}(0,r.g)(this,Ez).controls.dispatcher.addEventListener((0,r.g)(this,Ez).controls.CAMERA_EVENTS.CHANGE_EVENT.type,this.updateLabels)},"createMapLabels")),(0,r.f)(this,"updateLabels",(0,r.a)(()=>{let t=(0,r.g)(this,Ez).cameraObject;t.updateMatrixWorld(!0),t.updateProjectionMatrix();for(let[e,[i,n,o]]of this.labels){let a=new ho;t.getWorldDirection(a);let s=(new so).setFromUnitVectors(i.clone().normalize(),a.clone().cross(new ho(0,0,-1)).normalize()),l=n.clone().add(i.clone().applyQuaternion(s));(0,r.g)(this,Ez).markers.setPosition(o,(0,r.g)(this,Ez).convert3DMapPositionToCoordinate(l,e.mapClass),!1)}},"updateLabels")),(0,r.f)(this,"destroyLabels",(0,r.a)(()=>{(0,r.g)(this,Ez).controls.dispatcher.removeEventListener((0,r.g)(this,Ez).controls.CAMERA_EVENTS.CHANGE_EVENT.type,this.updateLabels);for(let[t,e,i]of this.labels.values())(0,r.g)(this,Ez).smartCollisionEngine.remove(i.id);(0,r.g)(this,Ez).smartCollisionEngine.update(),this.labels=new Map,(0,r.g)(this,Ez).tryRendering()},"destroyLabels")),(0,r.i)(this,Ez,e),this.object.position.set(0,0,0);let o=null==(n=null==(i=(0,r.g)(this,Ez).options)?void 0:i.loadOptions)?void 0:n.outdoorGeometryLayers;this.hasOutdoorGeometry=Array.isArray(o)&&o.length>0}lockControls(){(0,r.g)(this,Ez).controls.enablePedestal=!0,(0,r.g)(this,Ez).controls.enableRotate=!0,(0,r.g)(this,Ez).controls.enablePan=!1,(0,r.g)(this,Ez).controls.enableZoom=!1;let{minTilt:t}=(0,r.g)(this,Ez).controls;this.currentMinTilt=t,(0,r.g)(this,Ez).controls.minTilt=mz}unlockControls(){var t;(0,r.g)(this,Ez).controls.enablePedestal=!1,(0,r.g)(this,Ez).controls.enableRotate=!0,(0,r.g)(this,Ez).controls.enablePan=!0,(0,r.g)(this,Ez).controls.enableZoom=!0,(0,r.g)(this,Ez).controls.minTilt=null!=(t=this.currentMinTilt)?t:(0,r.g)(this,Ez).controls.minTilt}createStackBoundingBox(){var t,e;let i=new ey(this.object,"rgba(160, 160, 160)");Sz&&(0,r.g)(this,Ez).scene.add(i);let n=(new fo).setFromObject(i),o=(null!=(e=null==(t=this.transitionOptions)?void 0:t.verticalDistanceBetweenMaps)?e:Iz)/(0,r.g)(this,Ez).venue.maps[0].scale,a=this.computeMapZ(this.mapObjectsArray[0],0,this.transitionOptions),s=this.computeMapZ(this.mapObjectsArray[this.mapObjectsArray.length-1],this.mapObjectsArray.length-1,this.transitionOptions),l=[new ho(n.min.x,n.min.y,a),new ho(n.min.x,n.max.y,a),new ho(n.max.x,n.min.y,a),new ho(n.max.x,n.max.y,a),new ho(n.min.x,n.min.y,s),new ho(n.min.x,n.max.y,s),new ho(n.max.x,n.min.y,s),new ho(n.max.x,n.max.y,s)],h=new Cs(Pz(l),new ja({color:"blue",wireframe:!0}));Sz&&(0,r.g)(this,Ez).scene.add(h);let u=[new ho(n.min.x,n.min.y,-o/2),new ho(n.min.x,n.max.y,-o/2),new ho(n.max.x,n.min.y,-o/2),new ho(n.max.x,n.max.y,-o/2),new ho(n.min.x,n.min.y,o/2),new ho(n.min.x,n.max.y,o/2),new ho(n.max.x,n.min.y,o/2),new ho(n.max.x,n.max.y,o/2)],c=new Cs(Pz(u),new ja({color:"red",wireframe:!0}));c.visible=!1,c.applyMatrix4(this.object.matrixWorld);let p=[new ho(n.min.x,n.min.y,-550),new ho(n.min.x,n.max.y,-550),new ho(n.max.x,n.min.y,-550),new ho(n.max.x,n.max.y,-550),new ho(n.min.x,n.min.y,550),new ho(n.min.x,n.max.y,550),new ho(n.max.x,n.min.y,550),new ho(n.max.x,n.max.y,550)],d=new Cs(Pz(p),new ja({color:"blue",wireframe:!0}));d.visible=!1,d.applyMatrix4(this.object.matrixWorld),this.viewportBox=(new fo).setFromObject(d),(0,r.g)(this,Ez).scene.add(d);let f=(new fo).setFromObject(c);(0,r.g)(this,Ez).scene.add(c),this.stackContainerMesh=h,this.containerBoxHelper=(new fo).setFromObject(h),this.currentMapWrapperMesh=c,Sz&&(this.currentMapWrapperMesh.visible=!0),this.currentMapWrapperBoxHelper=f,this.viewportMesh=d;let g=(0,r.g)(this,Ez).controls.getPedestal();this.currentMapWrapperMesh.position.z=g,this.viewportMesh.position.z=g,this.currentMapWrapperBoxHelper.setFromObject(this.currentMapWrapperMesh),this.viewportBox.setFromObject(this.viewportMesh)}focusOnStackBox(t){return new Promise(e=>{var i,n,o,a,s;let l=(null==(i=null==t?void 0:t.focusOn)?void 0:i.options)||{},h=null!=(n=null==l?void 0:l.rotation)?n:fz,u=null!=(o=null==l?void 0:l.tilt)?o:mz,c=null!=(a=null==l?void 0:l.easing)?a:pz,p=null!=(s=null==l?void 0:l.duration)?s:cz;(0,r.g)(this,Ez).focusOn({...l,boundingBox:this.currentMapWrapperBoxHelper,duration:p,rotation:h,padding:l.safeAreaInsets,tilt:u,focusZoomFactor:1,curve:RB[c],callback:()=>{e(void 0)}})})}unmount(){this.unlockControls(),(0,r.g)(this,Ez).controls.dispatcher.removeEventListener((0,r.g)(this,Ez).controls.CAMERA_EVENTS.PEDESTAL_CHANGE_EVENT.type,this.updateFrame),(0,r.g)(this,Ez).scene.remove(this.currentMapWrapperMesh),(0,r.g)(this,Ez).scene.remove(this.viewportMesh),(0,r.g)(this,Ez).scene.remove(this.currentMapWrapperBoxHelper),(0,r.g)(this,Ez).scene.remove(this.viewportBox),(0,r.g)(this,Ez).scene.remove(this.stackContainerMesh),this.destroyLabels()}computeMapZ(t,e,i){var n;return(null!=e?e:t.mapClass.elevation)*((null!=(n=null==i?void 0:i.verticalDistanceBetweenMaps)?n:Iz)/(0,r.g)(this,Ez).referenceMap.scale)}async prepare(t,e){await super.prepare(t,e)}postRender(){super.postRender(),this.createMapLabels(),(0,r.g)(this,Ez).cameraObject.updateProjectionMatrix(),(0,r.g)(this,Ez).controls.dispatcher.addEventListener((0,r.g)(this,Ez).controls.CAMERA_EVENTS.PEDESTAL_CHANGE_EVENT.type,this.updateFrame)}expandMaps(t,e){var i,n;let o=this.mapObjects.get(this.currentMap.id),a=(null==(n=null==(i=null==e?void 0:e.focusOn)?void 0:i.options)?void 0:n.duration)||Cz,s=t.flatMap((t,i)=>{if(t===o&&this.hasOutdoorGeometry)return[t.fadeOut("outdoor-geometry")];let n=this.computeMapZ(t,i,e);this.object.add(t.object);let s=[Hy({from:{z:o.object.position.z},to:{z:n},duration:a,onUpdate:({z:e})=>{t.object.position.z=e,(0,r.g)(this,Ez).tryRendering()}}),t.fadeIn("default")];return this.hasOutdoorGeometry&&s.push(t.fadeOut("outdoor-geometry")),s});return{start:()=>Promise.all(s.map(t=>t.start((0,r.g)(this,Ez))))}}contractMaps(t=this.mapObjects.get(this.currentMap.id)){var e,i;let n=this.mapObjectsArray,o=this.transitionOptions,a=(null==(i=null==(e=null==o?void 0:o.focusOn)?void 0:e.options)?void 0:i.duration)||Tz,s=n.flatMap(e=>t===e?{start:()=>Promise.resolve()}:[Hy({from:{z:e.object.position.z},to:{z:t.object.position.z},duration:a,onUpdate:({z:t})=>{e.object.position.z=t,(0,r.g)(this,Ez).tryRendering()}}),e.fadeOut()]);return{start:()=>Promise.all(s.map(t=>t.start((0,r.g)(this,Ez))))}}resize(){this.focusOnStackBox({focusOn:{options:{tilt:(0,r.g)(this,Ez).controls.getTilt(),rotation:(0,r.g)(this,Ez).controls.getRotation()}}})}};Ez=new WeakMap,(0,r.a)(Lz,"MapViewStackScene");var Oz=Lz,Nz=Oz;(0,n.a)(),(0,n.a)();var qz=class extends xm{constructor(t,e={}){let i=e.font;if(void 0===i)super();else{let n=i.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),super(n,e)}this.type="TextGeometry"}};(0,r.a)(qz,"TextGeometry");var Rz=qz,Dz=(0,r.e)(he());(0,n.a)();var kz=(0,r.e)(ue());function Bz(t){this.name="JSClipperError",this.message=t,this.stack=(new Error).stack}(0,r.a)(Bz,"JSClipperError"),Bz.prototype=Error.prototype,kz.default.Error=function(t){throw new Bz(t)};var Fz=kz.default;(0,n.a)(),(0,n.a)();var Uz=class{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100){let i=[],n=Vz(t,e,this.data);for(let r=0,o=n.length;r<o;r++)i.push(...n[r].toShapes());return i}};(0,r.a)(Uz,"Font");var zz=Uz;function Vz(t,e,i){let n=Array.from(t),r=e/i.resolution,o=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*r,a=[],s=0,l=0;for(let h=0;h<n.length;h++){let t=n[h];if("\n"===t)s=0,l-=o;else{let e=jz(t,r,s,l,i);s+=e.offsetX,a.push(e.path)}}return a}function jz(t,e,i,n,r){let o=r.glyphs[t]||r.glyphs["?"];if(!o)return void console.error('THREE.Font: character "'+t+'" does not exists in font family '+r.familyName+".");let a,s,l,h,u,c,p,d,f=new ny;if(o.o){let t=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let r=0,o=t.length;r<o;)switch(t[r++]){case"m":a=t[r++]*e+i,s=t[r++]*e+n,f.moveTo(a,s);break;case"l":a=t[r++]*e+i,s=t[r++]*e+n,f.lineTo(a,s);break;case"q":l=t[r++]*e+i,h=t[r++]*e+n,u=t[r++]*e+i,c=t[r++]*e+n,f.quadraticCurveTo(u,c,l,h);break;case"b":l=t[r++]*e+i,h=t[r++]*e+n,u=t[r++]*e+i,c=t[r++]*e+n,p=t[r++]*e+i,d=t[r++]*e+n,f.bezierCurveTo(u,c,p,d,l,h)}}return{offsetX:o.ha*e,path:f}}(0,r.a)(Vz,"createPaths"),(0,r.a)(jz,"createPath");var Gz={glyphs:{0:{ha:765,x_min:66,x_max:700,o:"m 700 497 q 683 282 700 377 q 627 121 665 187 q 528 21 589 56 q 382 -14 468 -14 q 242 21 302 -14 q 144 121 183 56 q 86 282 105 187 q 66 497 66 377 q 84 712 66 617 q 139 872 101 807 q 236 972 176 938 q 382 1007 296 1007 q 522 973 463 1007 q 621 873 582 939 q 680 713 661 808 q 700 497 700 618 m 192 497 q 202 319 192 395 q 235 193 212 243 q 293 117 257 142 q 382 92 330 92 q 471 117 434 92 q 531 192 507 142 q 565 318 554 242 q 575 497 575 395 q 565 675 575 599 q 531 801 554 751 q 471 876 507 851 q 382 901 434 901 q 293 876 330 901 q 235 801 257 851 q 202 675 212 751 q 192 497 192 599 z "},1:{ha:765,x_min:121,x_max:482,o:"m 482 0 l 363 0 l 363 619 q 363 682 363 648 q 365 748 363 715 q 367 811 366 781 q 368 864 368 841 q 348 843 357 852 q 330 826 339 834 q 311 809 321 818 q 286 787 300 800 l 186 705 l 121 789 l 380 991 l 482 991 l 482 0 z "},2:{ha:765,x_min:65,x_max:684,o:"m 684 0 l 65 0 l 65 106 l 302 364 q 393 465 353 419 q 461 553 433 510 q 505 641 490 597 q 519 736 519 684 q 508 806 519 776 q 475 858 496 837 q 425 890 454 880 q 359 901 395 901 q 243 875 295 901 q 144 808 191 849 l 75 889 q 134 935 102 913 q 201 972 165 956 q 277 997 237 987 q 361 1006 317 1006 q 478 987 426 1006 q 568 935 531 969 q 624 851 604 901 q 644 741 644 802 q 626 631 644 683 q 577 528 608 578 q 502 427 545 477 q 407 321 458 376 l 216 118 l 216 113 l 684 113 l 684 0 z "},3:{ha:765,x_min:56,x_max:682,o:"m 652 760 q 636 669 652 710 q 592 599 621 629 q 525 550 564 569 q 437 522 486 530 l 437 518 q 620 442 557 503 q 682 282 682 380 q 660 163 682 217 q 593 69 638 109 q 480 8 549 30 q 318 -14 412 -14 q 179 -2 244 -14 q 56 40 113 9 l 56 155 q 183 107 115 124 q 315 90 252 90 q 423 104 378 90 q 498 142 469 117 q 542 204 528 168 q 555 286 555 241 q 537 365 555 332 q 486 419 519 398 q 405 451 453 441 q 297 461 357 461 l 207 461 l 207 564 l 297 564 q 395 577 352 564 q 466 616 437 591 q 510 675 495 641 q 525 751 525 710 q 513 814 525 787 q 478 862 500 842 q 425 891 456 881 q 355 901 393 901 q 228 879 283 901 q 122 819 172 856 l 60 904 q 117 943 85 925 q 186 976 149 962 q 266 998 223 989 q 355 1006 308 1006 q 484 987 429 1006 q 576 936 539 969 q 633 858 614 903 q 652 760 652 813 z "},4:{ha:765,x_min:16,x_max:737,o:"m 737 222 l 593 222 l 593 0 l 473 0 l 473 222 l 16 222 l 16 330 l 465 997 l 593 997 l 593 335 l 737 335 l 737 222 m 473 335 l 473 576 q 474 656 473 614 q 477 738 475 698 q 480 812 478 777 q 482 869 481 846 l 476 869 q 464 839 471 856 q 449 806 457 823 q 431 774 440 789 q 415 747 422 758 l 136 335 l 473 335 z "},5:{ha:765,x_min:89,x_max:688,o:"m 370 608 q 495 590 437 608 q 596 534 553 571 q 663 444 639 498 q 688 318 688 389 q 665 179 688 241 q 596 75 642 117 q 484 9 551 32 q 330 -14 417 -14 q 262 -10 296 -14 q 198 0 229 -7 q 139 16 167 6 q 89 40 111 26 l 89 157 q 141 129 111 141 q 205 109 172 117 q 272 96 238 100 q 334 92 305 92 q 429 104 387 92 q 500 143 471 117 q 545 210 530 170 q 561 304 561 250 q 501 453 561 401 q 328 504 441 504 q 288 502 309 504 q 245 498 267 500 q 204 492 224 495 q 171 486 185 489 l 110 525 l 147 991 l 615 991 l 615 879 l 254 879 l 228 595 q 285 604 250 599 q 370 608 321 608 z "},6:{ha:765,x_min:77,x_max:701,o:"m 77 424 q 84 566 77 495 q 109 701 91 636 q 158 821 127 766 q 237 918 189 877 q 353 982 286 959 q 510 1006 420 1006 q 538 1005 523 1006 q 570 1003 554 1004 q 601 999 586 1001 q 627 993 615 996 l 627 888 q 573 900 603 896 q 514 904 543 904 q 407 889 453 904 q 326 848 360 875 q 270 785 292 822 q 233 704 247 749 q 212 610 218 660 q 203 505 205 559 l 211 505 q 244 551 224 530 q 289 588 263 572 q 347 612 315 603 q 419 621 379 621 q 536 601 484 621 q 625 542 588 581 q 681 447 661 503 q 701 319 701 391 q 680 180 701 242 q 620 76 659 119 q 525 9 581 33 q 400 -14 469 -14 q 273 13 332 -14 q 170 94 214 39 q 102 230 127 148 q 77 424 77 312 m 399 90 q 473 104 439 90 q 531 146 507 118 q 569 217 555 174 q 582 319 582 260 q 571 405 582 367 q 537 469 559 442 q 481 509 515 495 q 403 524 448 524 q 320 508 357 524 q 256 466 282 492 q 215 408 229 441 q 200 343 200 376 q 213 253 200 298 q 250 172 225 208 q 312 113 275 136 q 399 90 349 90 z "},7:{ha:765,x_min:61,x_max:699,o:"m 191 0 l 572 879 l 61 879 l 61 991 l 699 991 l 699 893 l 322 0 l 191 0 z "},8:{ha:765,x_min:72,x_max:694,o:"m 383 1007 q 491 992 440 1007 q 579 947 541 977 q 640 873 618 918 q 663 768 663 828 q 649 686 663 723 q 612 620 635 650 q 555 567 588 591 q 485 525 523 544 q 562 478 524 504 q 629 420 600 452 q 676 348 659 388 q 694 258 694 308 q 672 145 694 196 q 608 60 649 95 q 510 5 567 24 q 383 -14 452 -14 q 251 5 309 -14 q 153 57 193 23 q 93 141 113 92 q 72 253 72 191 q 87 345 72 304 q 128 418 102 385 q 189 475 154 450 q 264 519 224 500 q 201 565 231 541 q 151 621 172 590 q 117 688 130 651 q 104 770 104 725 q 127 873 104 829 q 189 947 150 918 q 278 992 227 977 q 383 1007 328 1007 m 193 252 q 204 185 193 216 q 238 134 215 155 q 296 101 261 113 q 380 89 332 89 q 464 101 428 89 q 525 135 500 113 q 562 188 549 157 q 574 257 574 219 q 561 321 574 292 q 523 374 547 349 q 463 420 498 398 q 386 463 429 441 l 366 472 q 237 379 280 431 q 193 252 193 326 m 382 904 q 268 868 310 904 q 225 764 225 832 q 237 697 225 725 q 270 648 249 669 q 320 609 291 626 q 385 575 350 591 q 446 608 417 590 q 496 648 475 625 q 530 699 517 670 q 542 764 542 727 q 499 868 542 832 q 382 904 456 904 z "},9:{ha:765,x_min:72,x_max:697,o:"m 697 568 q 690 426 697 497 q 665 291 683 355 q 616 171 647 227 q 536 74 585 115 q 421 10 488 33 q 264 -14 354 -14 q 235 -13 251 -14 q 204 -11 220 -12 q 174 -7 189 -9 q 147 -1 159 -5 l 147 104 q 201 92 171 96 q 260 87 231 87 q 410 119 351 87 q 504 206 469 151 q 553 333 538 260 q 571 486 568 406 l 562 486 q 530 441 549 462 q 485 404 511 420 q 427 380 459 389 q 354 371 394 371 q 237 391 290 371 q 149 450 185 411 q 92 544 112 488 q 72 672 72 600 q 93 811 72 749 q 154 917 115 873 q 249 983 193 960 q 374 1006 304 1006 q 501 979 442 1006 q 604 899 560 953 q 672 762 647 844 q 697 568 697 680 m 375 901 q 301 888 334 901 q 243 846 267 874 q 205 774 218 817 q 192 672 192 731 q 203 587 192 625 q 237 523 214 549 q 293 482 259 496 q 371 468 326 468 q 454 484 417 468 q 518 525 492 500 q 559 583 545 551 q 574 648 574 616 q 561 739 574 694 q 524 820 549 784 q 462 879 499 857 q 375 901 425 901 z "}," ":{ha:361,x_min:0,x_max:0,o:""},"!":{ha:374,x_min:100,x_max:272,o:"m 228 281 l 146 281 l 111 991 l 262 991 l 228 281 m 100 75 q 106 119 100 101 q 125 148 113 137 q 152 164 136 159 q 186 170 168 170 q 219 164 203 170 q 247 148 235 159 q 265 119 258 137 q 272 75 272 101 q 265 32 272 50 q 247 3 258 14 q 219 -14 235 -9 q 186 -20 203 -20 q 152 -14 168 -20 q 125 3 136 -9 q 106 32 113 14 q 100 75 100 50 z "},'"':{ha:558,x_min:90,x_max:468,o:"m 224 991 l 196 633 l 118 633 l 90 991 l 224 991 m 468 991 l 440 633 l 363 633 l 335 991 l 468 991 z "},"#":{ha:897,x_min:35,x_max:863,o:"m 667 606 l 624 383 l 814 383 l 814 290 l 606 290 l 550 0 l 450 0 l 507 290 l 310 290 l 254 0 l 157 0 l 210 290 l 35 290 l 35 383 l 228 383 l 272 606 l 86 606 l 86 699 l 289 699 l 345 991 l 444 991 l 389 699 l 587 699 l 644 991 l 742 991 l 685 699 l 863 699 l 863 606 l 667 606 m 328 383 l 525 383 l 568 606 l 371 606 l 328 383 z "},$:{ha:765,x_min:83,x_max:668,o:"m 668 302 q 651 216 668 255 q 603 149 634 178 q 526 102 571 121 q 424 75 481 83 l 424 -81 l 330 -81 l 330 69 q 262 72 296 69 q 195 81 227 75 q 134 96 162 87 q 83 117 105 105 l 83 233 q 135 211 106 222 q 197 191 165 200 q 264 177 230 182 q 330 171 298 171 l 330 465 q 225 508 270 486 q 152 559 181 530 q 109 625 123 588 q 94 713 94 663 q 111 796 94 758 q 158 862 127 833 q 233 908 189 890 q 330 932 277 926 l 330 1054 l 424 1054 l 424 935 q 549 917 492 931 q 652 882 606 903 l 607 783 q 522 814 569 800 q 424 832 474 828 l 424 546 q 529 503 484 525 q 606 452 575 480 q 652 388 637 424 q 668 302 668 351 m 549 302 q 542 343 549 325 q 520 377 535 362 q 482 406 506 393 q 424 431 458 418 l 424 178 q 518 220 487 187 q 549 302 549 254 m 214 711 q 219 668 214 687 q 239 632 225 648 q 275 604 252 616 q 330 579 297 591 l 330 829 q 242 788 270 819 q 214 711 214 758 z "},"%":{ha:1146,x_min:69,x_max:1076,o:"m 170 696 q 194 528 170 584 q 272 472 218 472 q 378 696 378 472 q 272 918 378 918 q 194 863 218 918 q 170 696 170 808 m 478 696 q 466 564 478 623 q 429 466 454 506 q 365 405 404 426 q 272 383 326 383 q 184 405 222 383 q 121 466 146 426 q 82 564 95 506 q 69 696 69 623 q 81 827 69 769 q 118 924 93 884 q 181 985 142 964 q 272 1006 219 1006 q 361 985 323 1006 q 426 924 399 964 q 465 827 452 884 q 478 696 478 769 m 768 298 q 792 131 768 186 q 871 75 817 75 q 977 298 977 75 q 871 521 977 521 q 792 466 817 521 q 768 298 768 410 m 1076 298 q 1064 167 1076 225 q 1027 69 1053 109 q 963 8 1002 29 q 871 -14 924 -14 q 783 8 821 -14 q 719 69 745 29 q 681 167 694 109 q 668 298 668 225 q 680 429 668 372 q 716 527 692 487 q 780 587 741 566 q 871 608 818 608 q 960 587 922 608 q 1024 527 998 566 q 1063 429 1050 487 q 1076 298 1076 372 m 903 991 l 353 0 l 245 0 l 796 991 l 903 991 z "},"&":{ha:975,x_min:74,x_max:953,o:"m 286 790 q 292 745 286 767 q 308 701 297 723 q 337 656 319 679 q 379 608 355 633 q 448 653 419 632 q 496 696 477 674 q 525 741 515 718 q 534 793 534 765 q 526 838 534 817 q 502 873 517 859 q 463 897 486 888 q 412 905 441 905 q 320 875 354 905 q 286 790 286 845 m 378 96 q 450 103 417 96 q 512 125 484 111 q 565 157 541 138 q 611 196 589 175 l 349 472 q 286 428 313 450 q 240 382 259 407 q 212 329 222 358 q 203 262 203 300 q 215 195 203 226 q 249 142 227 164 q 304 108 271 120 q 378 96 336 96 m 74 258 q 87 353 74 311 q 127 428 101 394 q 191 491 153 462 q 277 549 229 520 q 235 599 256 573 q 200 655 215 625 q 175 718 184 684 q 165 790 165 751 q 182 881 165 841 q 231 950 199 922 q 310 992 263 978 q 416 1007 357 1007 q 517 992 473 1007 q 592 950 562 978 q 640 881 623 922 q 656 790 656 841 q 639 710 656 747 q 593 641 622 673 q 528 583 565 610 q 450 532 491 556 l 689 279 q 722 319 707 299 q 748 363 736 340 q 769 412 760 386 q 785 471 778 439 l 909 471 q 885 388 899 426 q 853 317 871 351 q 813 255 836 284 q 765 199 791 227 l 953 0 l 800 0 l 686 117 q 621 62 653 86 q 551 21 588 38 q 473 -4 515 5 q 378 -14 431 -14 q 250 4 307 -14 q 154 57 193 22 q 95 143 115 92 q 74 258 74 193 z "},"'":{ha:314,x_min:90,x_max:224,o:"m 224 991 l 196 633 l 118 633 l 90 991 l 224 991 z "},"(":{ha:418,x_min:56,x_max:376,o:"m 56 380 q 68 548 56 465 q 105 708 80 630 q 169 857 130 785 q 260 991 207 928 l 376 991 q 232 704 281 861 q 183 382 183 547 q 196 221 183 301 q 232 64 208 141 q 292 -84 256 -12 q 375 -220 328 -156 l 260 -220 q 169 -89 207 -159 q 105 57 130 -19 q 68 215 80 134 q 56 380 56 296 z "},")":{ha:418,x_min:41,x_max:363,o:"m 363 380 q 351 215 363 296 q 313 57 338 134 q 249 -89 288 -19 q 158 -220 211 -159 l 43 -220 q 125 -84 90 -156 q 186 64 161 -12 q 222 221 210 141 q 235 382 235 301 q 186 704 235 547 q 41 991 137 861 l 158 991 q 249 857 211 928 q 313 708 288 785 q 351 548 338 630 q 363 380 363 465 z "},"*":{ha:765,x_min:56,x_max:708,o:"m 450 1055 l 421 789 l 690 864 l 708 733 l 452 714 l 618 493 l 497 428 l 378 671 l 271 428 l 146 493 l 310 714 l 56 733 l 75 864 l 340 789 l 311 1055 l 450 1055 z "},"+":{ha:765,x_min:69,x_max:696,o:"m 332 439 l 69 439 l 69 541 l 332 541 l 332 804 l 433 804 l 433 541 l 696 541 l 696 439 l 433 439 l 433 178 l 332 178 l 332 439 z "},",":{ha:347,x_min:43,x_max:256,o:"m 245 161 l 256 146 q 233 68 246 109 q 204 -16 220 26 q 171 -99 188 -58 q 136 -179 153 -141 l 43 -179 q 63 -93 53 -138 q 82 -4 73 -48 q 98 83 91 41 q 111 161 106 125 l 245 161 z "},"-":{ha:447,x_min:56,x_max:392,o:"m 56 315 l 56 429 l 392 429 l 392 315 l 56 315 z "},".":{ha:372,x_min:100,x_max:272,o:"m 100 75 q 106 119 100 101 q 125 148 113 137 q 152 164 136 159 q 186 170 168 170 q 219 164 203 170 q 247 148 235 159 q 265 119 258 137 q 272 75 272 101 q 265 32 272 50 q 247 3 258 14 q 219 -14 235 -9 q 186 -20 203 -20 q 152 -14 168 -20 q 125 3 136 -9 q 106 32 113 14 q 100 75 100 50 z "},"/":{ha:518,x_min:14,x_max:504,o:"m 504 991 l 135 0 l 14 0 l 383 991 l 504 991 z "},":":{ha:372,x_min:100,x_max:272,o:"m 100 75 q 106 119 100 101 q 125 148 113 137 q 152 164 136 159 q 186 170 168 170 q 219 164 203 170 q 247 148 235 159 q 265 119 258 137 q 272 75 272 101 q 265 32 272 50 q 247 3 258 14 q 219 -14 235 -9 q 186 -20 203 -20 q 152 -14 168 -20 q 125 3 136 -9 q 106 32 113 14 q 100 75 100 50 m 100 669 q 106 714 100 696 q 125 743 113 732 q 152 759 136 754 q 186 764 168 764 q 219 759 203 764 q 247 743 235 754 q 265 714 258 732 q 272 669 272 696 q 265 627 272 644 q 247 597 258 609 q 219 581 235 586 q 186 575 203 575 q 152 581 168 575 q 125 597 136 586 q 106 627 113 609 q 100 669 100 644 z "},";":{ha:372,x_min:43,x_max:272,o:"m 245 161 l 256 146 q 233 68 246 109 q 204 -16 220 26 q 171 -99 188 -58 q 136 -179 153 -141 l 43 -179 q 63 -93 53 -138 q 82 -4 73 -48 q 98 83 91 41 q 111 161 106 125 l 245 161 m 100 669 q 106 714 100 696 q 125 743 113 732 q 152 759 136 754 q 186 764 168 764 q 219 759 203 764 q 247 743 235 754 q 265 714 258 732 q 272 669 272 696 q 265 627 272 644 q 247 597 258 609 q 219 581 235 586 q 186 575 203 575 q 152 581 168 575 q 125 597 136 586 q 106 627 113 609 q 100 669 100 644 z "},"<":{ha:765,x_min:69,x_max:696,o:"m 696 161 l 69 449 l 69 518 l 696 844 l 696 736 l 197 489 l 696 271 l 696 161 z "},"=":{ha:765,x_min:69,x_max:696,o:"m 69 578 l 69 679 l 696 679 l 696 578 l 69 578 m 69 300 l 69 401 l 696 401 l 696 300 l 69 300 z "},">":{ha:765,x_min:69,x_max:696,o:"m 69 271 l 568 489 l 69 736 l 69 844 l 696 518 l 696 449 l 69 161 l 69 271 z "},"?":{ha:591,x_min:25,x_max:546,o:"m 191 281 l 191 306 q 196 376 191 345 q 214 434 201 407 q 250 487 227 461 q 306 542 272 513 q 361 592 338 570 q 399 638 385 615 q 421 689 414 662 q 428 751 428 715 q 418 811 428 784 q 388 857 408 838 q 340 887 369 876 q 273 897 311 897 q 166 880 217 897 q 68 839 115 862 l 25 937 q 144 986 80 966 q 273 1006 208 1006 q 387 988 336 1006 q 473 939 437 971 q 527 859 508 906 q 546 753 546 812 q 537 672 546 707 q 509 606 528 636 q 464 547 491 575 q 400 486 437 518 q 342 433 365 456 q 307 389 320 410 q 290 345 294 368 q 285 293 285 323 l 285 281 l 191 281 m 158 75 q 165 119 158 101 q 183 148 172 137 q 210 164 195 159 q 244 170 226 170 q 278 164 262 170 q 305 148 294 159 q 323 119 317 137 q 330 75 330 101 q 323 32 330 50 q 305 3 317 14 q 278 -14 294 -9 q 244 -20 262 -20 q 210 -14 226 -20 q 183 3 195 -9 q 165 32 172 14 q 158 75 158 50 z "},"@":{ha:1203,x_min:74,x_max:1129,o:"m 1129 496 q 1123 411 1129 454 q 1104 331 1116 369 q 1072 259 1091 292 q 1027 202 1053 227 q 968 164 1001 178 q 896 150 935 150 q 841 160 865 150 q 798 187 816 170 q 769 226 781 204 q 754 272 758 248 l 751 272 q 721 224 739 247 q 679 185 703 202 q 624 159 654 169 q 558 150 594 150 q 466 169 506 150 q 397 222 425 188 q 355 304 370 256 q 340 411 340 353 q 360 536 340 479 q 418 635 380 593 q 509 699 456 676 q 629 722 563 722 q 690 720 660 722 q 749 712 721 717 q 800 702 777 707 q 839 690 823 696 l 823 408 q 822 384 823 393 q 822 370 822 375 q 822 361 822 364 q 822 357 822 359 q 829 298 822 321 q 848 261 836 275 q 874 242 859 248 q 904 237 888 237 q 959 258 935 237 q 999 314 983 279 q 1023 397 1015 349 q 1031 497 1031 444 q 1002 668 1031 593 q 921 795 972 743 q 799 873 869 846 q 644 900 728 900 q 442 862 530 900 q 295 757 355 825 q 205 597 236 690 q 175 395 175 505 q 202 213 175 292 q 280 79 229 134 q 409 -3 332 25 q 586 -31 486 -31 q 668 -26 627 -31 q 746 -13 708 -21 q 817 6 783 -5 q 880 28 851 16 l 880 -68 q 749 -109 822 -94 q 587 -123 675 -123 q 371 -89 466 -123 q 209 12 275 -54 q 109 173 143 78 q 74 390 74 269 q 114 628 74 517 q 228 819 154 738 q 408 945 302 899 q 644 991 513 991 q 839 957 750 991 q 992 859 928 923 q 1093 703 1057 795 q 1129 496 1129 611 m 449 408 q 483 278 449 318 q 575 237 517 237 q 639 253 612 237 q 682 296 665 268 q 708 363 699 324 q 720 449 717 402 l 729 621 q 684 630 710 626 q 629 635 658 635 q 545 615 579 635 q 489 564 511 595 q 458 491 468 532 q 449 408 449 450 z "},A:{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 z "},B:{ha:863,x_min:135,x_max:786,o:"m 135 991 l 406 991 q 558 978 492 991 q 669 936 625 965 q 736 858 713 906 q 758 741 758 810 q 745 662 758 699 q 707 597 732 625 q 645 551 682 570 q 561 526 608 532 l 561 519 q 649 496 608 511 q 720 454 690 481 q 768 387 751 427 q 786 288 786 346 q 764 166 786 220 q 700 76 742 113 q 599 20 659 39 q 464 0 539 0 l 135 0 l 135 991 m 261 571 l 427 571 q 522 581 484 571 q 585 611 561 591 q 619 662 608 631 q 629 732 629 692 q 577 848 629 813 q 412 884 525 884 l 261 884 l 261 571 m 261 465 l 261 107 l 441 107 q 542 121 501 107 q 607 159 582 134 q 642 217 631 183 q 653 293 653 252 q 642 363 653 331 q 605 417 631 395 q 538 453 580 440 q 433 465 496 465 l 261 465 z "},C:{ha:838,x_min:85,x_max:798,o:"m 538 895 q 406 867 465 895 q 306 788 347 840 q 241 663 264 736 q 218 496 218 589 q 238 326 218 400 q 298 201 258 252 q 398 123 338 150 q 538 97 458 97 q 652 109 598 97 q 760 136 707 121 l 760 26 q 707 8 733 16 q 651 -4 680 1 q 590 -11 623 -9 q 517 -14 557 -14 q 324 23 406 -14 q 190 127 243 60 q 111 288 136 194 q 85 497 85 382 q 114 703 85 610 q 201 864 144 797 q 343 968 258 931 q 538 1006 428 1006 q 677 991 611 1006 q 798 947 744 976 l 745 842 q 652 879 702 863 q 538 895 602 895 z "},D:{ha:950,x_min:135,x_max:865,o:"m 865 505 q 833 285 865 380 q 739 127 800 191 q 587 32 677 64 q 383 0 497 0 l 135 0 l 135 991 l 411 991 q 599 960 515 991 q 742 868 683 929 q 833 715 801 806 q 865 505 865 625 m 732 501 q 709 672 732 600 q 644 791 687 745 q 539 861 602 838 q 397 884 477 884 l 261 884 l 261 109 l 371 109 q 641 208 550 109 q 732 501 732 307 z "},E:{ha:733,x_min:135,x_max:650,o:"m 650 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 574 l 624 574 l 624 464 l 261 464 l 261 111 l 650 111 l 650 0 z "},F:{ha:682,x_min:135,x_max:650,o:"m 261 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 530 l 624 530 l 624 419 l 261 419 l 261 0 z "},G:{ha:958,x_min:85,x_max:859,o:"m 530 524 l 859 524 l 859 37 q 783 16 821 25 q 705 0 745 6 q 621 -10 665 -7 q 526 -14 577 -14 q 338 22 420 -14 q 199 124 256 58 q 114 284 143 190 q 85 497 85 379 q 117 708 85 614 q 211 868 149 802 q 363 970 273 935 q 570 1006 454 1006 q 714 991 645 1006 q 843 947 783 976 l 794 838 q 742 859 770 849 q 684 877 713 869 q 622 890 654 885 q 559 895 591 895 q 413 867 477 895 q 306 788 349 840 q 241 663 263 736 q 218 496 218 589 q 237 334 218 408 q 296 208 256 261 q 401 126 337 155 q 557 97 466 97 q 611 99 587 97 q 657 103 636 100 q 697 110 678 106 q 733 117 715 113 l 733 412 l 530 412 l 530 524 z "},H:{ha:974,x_min:135,x_max:839,o:"m 839 0 l 713 0 l 713 463 l 261 463 l 261 0 l 135 0 l 135 991 l 261 991 l 261 574 l 713 574 l 713 991 l 839 991 l 839 0 z "},I:{ha:471,x_min:56,x_max:415,o:"m 415 0 l 56 0 l 56 69 l 172 97 l 172 895 l 56 922 l 56 991 l 415 991 l 415 922 l 298 895 l 298 97 l 415 69 l 415 0 z "},J:{ha:376,x_min:-125,x_max:252,o:"m -20 -264 q -80 -259 -54 -264 q -125 -248 -106 -255 l -125 -139 q -75 -149 -102 -145 q -18 -153 -49 -153 q 32 -146 7 -153 q 78 -123 58 -140 q 112 -76 99 -106 q 125 0 125 -46 l 125 991 l 252 991 l 252 14 q 232 -110 252 -58 q 176 -196 212 -162 q 91 -247 140 -231 q -20 -264 41 -264 z "},K:{ha:804,x_min:135,x_max:804,o:"m 804 0 l 661 0 l 355 473 l 261 396 l 261 0 l 135 0 l 135 991 l 261 991 l 261 496 l 343 610 l 650 991 l 791 991 l 439 559 l 804 0 z "},L:{ha:682,x_min:135,x_max:650,o:"m 135 0 l 135 991 l 261 991 l 261 113 l 650 113 l 650 0 l 135 0 z "},M:{ha:1208,x_min:135,x_max:1074,o:"m 545 0 l 244 868 l 239 868 q 245 768 243 818 q 250 679 248 726 q 252 593 252 631 l 252 0 l 135 0 l 135 991 l 322 991 l 602 183 l 606 183 l 886 991 l 1074 991 l 1074 0 l 947 0 l 947 602 q 949 682 947 637 q 952 769 950 728 q 957 867 955 817 l 951 867 l 648 0 l 545 0 z "},N:{ha:1013,x_min:135,x_max:878,o:"m 878 0 l 732 0 l 244 821 l 239 821 q 245 717 243 768 q 250 625 248 673 q 252 538 252 576 l 252 0 l 135 0 l 135 991 l 279 991 l 765 175 l 770 175 q 765 277 768 227 q 763 321 764 298 q 761 367 762 344 q 760 410 760 389 q 760 449 760 431 l 760 991 l 878 991 l 878 0 z "},O:{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 z "},P:{ha:800,x_min:135,x_max:729,o:"m 729 701 q 710 583 729 640 q 649 482 692 526 q 536 412 606 438 q 363 386 466 386 l 261 386 l 261 0 l 135 0 l 135 991 l 380 991 q 537 972 471 991 q 646 916 603 953 q 709 825 688 879 q 729 701 729 770 m 261 493 l 349 493 q 459 504 412 493 q 537 539 506 515 q 583 601 568 563 q 599 694 599 640 q 543 837 599 791 q 370 884 488 884 l 261 884 l 261 493 z "},Q:{ha:1029,x_min:85,x_max:945,o:"m 945 497 q 928 332 945 408 q 879 194 911 255 q 799 87 847 132 q 688 17 751 43 q 763 -95 717 -47 q 871 -184 810 -144 l 789 -281 q 660 -164 719 -231 q 567 -11 602 -97 q 542 -13 555 -12 q 515 -14 528 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 z "},R:{ha:819,x_min:135,x_max:803,o:"m 261 410 l 261 0 l 135 0 l 135 991 l 376 991 q 643 922 557 991 q 729 710 729 852 q 712 607 729 651 q 668 531 696 563 q 606 479 641 500 q 533 444 570 458 l 803 0 l 654 0 l 416 410 l 261 410 m 261 517 l 372 517 q 476 529 433 517 q 546 564 519 541 q 586 622 574 587 q 599 704 599 657 q 585 787 599 753 q 543 842 571 821 q 472 874 515 864 q 370 884 429 884 l 261 884 l 261 517 z "},S:{ha:721,x_min:71,x_max:657,o:"m 657 265 q 634 148 657 199 q 567 60 610 96 q 461 5 524 24 q 321 -14 399 -14 q 180 -2 245 -14 q 71 33 115 10 l 71 154 q 123 133 94 143 q 185 114 153 122 q 252 101 218 106 q 321 96 287 96 q 481 136 429 96 q 533 253 533 177 q 523 317 533 290 q 489 367 513 344 q 422 411 464 389 q 318 457 381 432 q 213 509 258 481 q 140 572 169 537 q 97 652 111 608 q 83 754 83 697 q 105 861 83 814 q 166 940 127 907 q 260 989 205 972 q 380 1006 315 1006 q 526 990 461 1006 q 640 951 590 975 l 595 846 q 495 880 551 865 q 379 895 439 895 q 251 856 296 895 q 205 753 205 818 q 216 686 205 714 q 250 635 226 658 q 312 592 273 612 q 408 550 351 572 q 516 500 470 526 q 594 441 563 474 q 641 366 625 409 q 657 265 657 323 z "},T:{ha:721,x_min:14,x_max:707,o:"m 424 0 l 297 0 l 297 880 l 14 880 l 14 991 l 707 991 l 707 880 l 424 880 l 424 0 z "},U:{ha:970,x_min:125,x_max:844,o:"m 844 993 l 844 350 q 822 206 844 273 q 754 91 800 140 q 641 14 709 42 q 481 -14 573 -14 q 328 13 394 -14 q 216 87 261 39 q 148 202 171 135 q 125 353 125 270 l 125 991 l 252 991 l 252 346 q 310 162 252 227 q 488 97 369 97 q 591 115 548 97 q 663 167 635 134 q 704 246 690 200 q 718 347 718 292 l 718 993 l 844 993 z "},V:{ha:789,x_min:0,x_max:789,o:"m 654 991 l 789 991 l 457 0 l 330 0 l 0 991 l 134 991 l 334 363 q 368 244 353 301 q 393 136 382 186 q 419 244 404 186 q 456 367 435 301 l 654 991 z "},W:{ha:1227,x_min:14,x_max:1214,o:"m 549 991 l 682 991 l 838 411 q 858 335 848 373 q 876 261 867 297 q 891 194 884 226 q 901 136 897 162 q 908 193 904 162 q 918 257 912 223 q 929 325 923 290 q 943 393 936 360 l 1079 991 l 1214 991 l 965 0 l 838 0 l 665 636 q 647 707 656 671 q 631 776 638 744 q 615 848 623 813 q 600 777 608 814 q 585 707 593 745 q 567 632 576 669 l 403 0 l 275 0 l 14 991 l 147 991 l 298 389 q 313 324 307 357 q 326 257 320 290 q 336 193 332 224 q 345 136 341 162 q 353 195 348 161 q 365 264 358 228 q 379 339 372 301 q 396 410 387 376 l 549 991 z "},X:{ha:760,x_min:0,x_max:760,o:"m 760 0 l 616 0 l 376 431 l 127 0 l 0 0 l 307 518 l 21 991 l 155 991 l 380 612 l 607 991 l 736 991 l 450 522 l 760 0 z "},Y:{ha:732,x_min:0,x_max:732,o:"m 366 490 l 596 991 l 732 991 l 429 386 l 429 0 l 302 0 l 302 379 l 0 991 l 138 991 l 366 490 z "},Z:{ha:749,x_min:56,x_max:693,o:"m 693 0 l 56 0 l 56 98 l 538 879 l 69 879 l 69 991 l 679 991 l 679 893 l 197 113 l 693 113 l 693 0 z "},"[":{ha:421,x_min:111,x_max:386,o:"m 386 -220 l 111 -220 l 111 991 l 386 991 l 386 890 l 235 890 l 235 -118 l 386 -118 l 386 -220 z "},"\\":{ha:518,x_min:16,x_max:505,o:"m 136 991 l 505 0 l 385 0 l 16 991 l 136 991 z "},"]":{ha:421,x_min:35,x_max:310,o:"m 35 -118 l 186 -118 l 186 890 l 35 890 l 35 991 l 310 991 l 310 -220 l 35 -220 l 35 -118 z "},"^":{ha:739,x_min:28,x_max:711,o:"m 28 372 l 339 999 l 408 999 l 711 372 l 602 372 l 374 871 l 137 372 l 28 372 z "},_:{ha:571,x_min:-3,x_max:574,o:"m 574 -220 l -3 -220 l -3 -125 l 574 -125 l 574 -220 z "},"`":{ha:802,x_min:267,x_max:533,o:"m 533 842 l 452 842 q 400 889 428 861 q 346 947 372 917 q 299 1004 320 977 q 267 1050 277 1031 l 267 1064 l 415 1064 q 440 1014 426 1041 q 471 959 455 986 q 503 905 486 931 q 533 860 519 880 l 533 842 z "},a:{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 z "},b:{ha:814,x_min:118,x_max:737,o:"m 454 758 q 570 734 518 758 q 660 661 623 709 q 717 541 696 612 q 737 374 737 469 q 717 206 737 278 q 660 85 696 134 q 570 11 623 36 q 454 -14 518 -14 q 382 -5 414 -14 q 323 19 349 4 q 277 53 297 33 q 241 94 257 73 l 233 94 l 208 0 l 118 0 l 118 1055 l 241 1055 l 241 800 q 241 750 241 777 q 239 700 240 723 q 236 647 237 673 l 241 647 q 277 691 257 671 q 322 726 296 711 q 381 750 349 741 q 454 758 414 758 m 431 656 q 340 638 376 656 q 282 586 304 621 q 251 498 260 551 q 241 374 241 445 q 251 252 241 305 q 282 162 260 199 q 340 107 304 126 q 432 89 377 89 q 567 163 524 89 q 610 375 610 237 q 567 586 610 516 q 431 656 524 656 z "},c:{ha:643,x_min:77,x_max:596,o:"m 403 -14 q 275 8 334 -14 q 171 76 215 29 q 102 194 127 122 q 77 368 77 267 q 102 549 77 475 q 173 670 128 623 q 279 737 218 716 q 408 758 339 758 q 512 747 461 758 q 596 718 562 735 l 559 614 q 525 627 544 621 q 486 638 506 633 q 446 647 465 644 q 408 650 426 650 q 253 582 302 650 q 204 370 204 513 q 253 160 204 227 q 403 94 302 94 q 502 107 458 94 q 583 136 547 119 l 583 26 q 505 -3 547 7 q 403 -14 463 -14 z "},d:{ha:814,x_min:77,x_max:696,o:"m 578 100 l 572 100 q 537 56 557 77 q 491 20 517 35 q 433 -5 465 4 q 359 -14 400 -14 q 244 11 296 -14 q 155 84 192 35 q 97 204 117 132 q 77 371 77 276 q 97 539 77 467 q 155 660 117 611 q 244 733 192 709 q 359 758 296 758 q 432 749 399 758 q 491 726 465 741 q 537 691 517 711 q 572 650 557 671 l 581 650 q 576 694 578 673 q 574 730 575 711 q 572 760 572 749 l 572 1055 l 696 1055 l 696 0 l 596 0 l 578 100 m 383 89 q 470 104 435 89 q 528 152 506 120 q 561 232 550 184 q 572 343 571 279 l 572 371 q 563 493 572 439 q 532 582 554 546 q 473 637 510 618 q 382 656 437 656 q 247 582 290 656 q 204 370 204 508 q 247 158 204 228 q 383 89 290 89 z "},e:{ha:743,x_min:77,x_max:673,o:"m 412 -14 q 276 12 338 -14 q 170 85 214 37 q 101 204 125 133 q 77 367 77 275 q 99 532 77 459 q 162 655 121 604 q 259 732 203 705 q 385 758 316 758 q 505 734 452 758 q 596 666 559 710 q 653 561 633 623 q 673 425 673 500 l 673 349 l 204 349 q 259 156 208 218 q 414 94 311 94 q 478 98 448 94 q 535 107 507 101 q 588 124 562 114 q 640 146 614 134 l 640 36 q 587 14 613 23 q 533 -2 561 4 q 476 -11 506 -8 q 412 -14 447 -14 m 382 656 q 259 603 304 656 q 207 449 214 550 l 541 449 q 531 533 541 495 q 503 599 522 572 q 454 641 484 626 q 382 656 424 656 z "},f:{ha:457,x_min:20,x_max:510,o:"m 441 652 l 275 652 l 275 0 l 151 0 l 151 652 l 20 652 l 20 703 l 151 749 l 151 814 q 166 934 151 886 q 211 1010 182 982 q 281 1051 239 1039 q 376 1063 323 1063 q 450 1055 416 1063 q 510 1038 484 1047 l 478 942 q 432 955 457 949 q 380 961 408 961 q 334 955 353 961 q 301 932 314 948 q 282 887 288 916 q 275 815 275 859 l 275 745 l 441 745 l 441 652 z "},g:{ha:720,x_min:25,x_max:692,o:"m 692 745 l 692 668 l 558 650 q 590 589 577 626 q 603 505 603 552 q 587 410 603 454 q 539 334 571 366 q 459 284 507 302 q 349 267 412 267 q 319 267 334 267 q 294 269 304 267 q 272 254 283 262 q 251 235 260 245 q 236 210 242 224 q 231 180 231 197 q 239 151 231 162 q 261 134 247 140 q 294 125 275 127 q 334 123 313 123 l 453 123 q 559 107 516 123 q 630 64 603 92 q 670 0 658 37 q 682 -78 682 -37 q 660 -185 682 -138 q 593 -266 638 -233 q 478 -316 547 -298 q 314 -334 408 -334 q 187 -319 241 -334 q 97 -278 133 -305 q 43 -213 61 -251 q 25 -126 25 -174 q 38 -55 25 -85 q 74 -1 52 -24 q 126 35 96 21 q 187 57 155 50 q 140 98 159 70 q 122 161 122 125 q 144 233 122 203 q 212 292 165 263 q 159 325 183 304 q 118 374 135 347 q 93 434 102 401 q 83 501 83 467 q 100 609 83 562 q 151 690 117 656 q 233 741 184 723 q 349 758 283 758 q 400 754 374 758 q 446 745 427 751 l 692 745 m 142 -122 q 151 -169 142 -147 q 179 -206 159 -191 q 232 -231 199 -222 q 314 -240 265 -240 q 503 -201 440 -240 q 566 -89 566 -162 q 557 -38 566 -58 q 531 -7 549 -18 q 481 8 512 4 q 407 12 451 12 l 288 12 q 238 7 264 12 q 191 -14 212 1 q 156 -55 170 -28 q 142 -122 142 -81 m 204 505 q 241 389 204 427 q 345 351 277 351 q 447 389 412 351 q 482 507 482 427 q 447 630 482 591 q 343 669 411 669 q 240 629 276 669 q 204 505 204 588 z "},h:{ha:818,x_min:118,x_max:707,o:"m 583 0 l 583 479 q 548 612 583 568 q 436 656 512 656 q 344 638 381 656 q 284 586 307 621 q 251 501 261 551 q 241 386 241 451 l 241 0 l 118 0 l 118 1055 l 241 1055 l 241 742 l 236 644 l 243 644 q 283 695 260 673 q 334 730 307 716 q 393 751 362 745 q 457 758 425 758 q 644 693 581 758 q 707 486 707 629 l 707 0 l 583 0 z "},i:{ha:359,x_min:109,x_max:253,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 m 109 946 q 129 1005 109 987 q 180 1023 150 1023 q 209 1019 195 1023 q 232 1005 222 1015 q 247 981 241 996 q 253 946 253 966 q 232 887 253 907 q 180 868 210 868 q 129 887 150 868 q 109 946 109 906 z "},j:{ha:359,x_min:-46,x_max:253,o:"m 45 -334 q -9 -329 12 -334 q -46 -317 -31 -324 l -46 -216 q -10 -227 -28 -223 q 32 -231 8 -231 q 66 -225 50 -231 q 93 -207 81 -220 q 112 -172 105 -194 q 118 -115 118 -150 l 118 745 l 241 745 l 241 -107 q 230 -201 241 -159 q 194 -272 218 -243 q 133 -318 170 -302 q 45 -334 96 -334 m 109 946 q 129 1005 109 987 q 180 1023 150 1023 q 209 1019 195 1023 q 232 1005 222 1015 q 247 981 241 996 q 253 946 253 966 q 232 887 253 907 q 180 868 210 868 q 129 887 150 868 q 109 946 109 906 z "},k:{ha:689,x_min:118,x_max:684,o:"m 232 385 l 323 500 l 522 745 l 665 745 l 393 422 l 684 0 l 542 0 l 314 342 l 240 286 l 240 0 l 118 0 l 118 1055 l 240 1055 l 240 571 l 229 385 l 232 385 z "},l:{ha:359,x_min:118,x_max:241,o:"m 241 0 l 118 0 l 118 1055 l 241 1055 l 241 0 z "},m:{ha:1244,x_min:118,x_max:1133,o:"m 1010 0 l 1010 479 q 976 612 1010 568 q 871 656 942 656 q 787 640 821 656 q 730 593 752 624 q 698 516 708 562 q 688 411 688 471 l 688 0 l 564 0 l 564 479 q 530 612 564 568 q 425 656 496 656 q 338 638 373 656 q 281 586 302 621 q 251 501 260 551 q 241 386 241 451 l 241 0 l 118 0 l 118 745 l 218 745 l 236 644 l 243 644 q 281 695 259 673 q 331 730 304 716 q 388 751 357 745 q 449 758 418 758 q 584 728 530 758 q 664 635 638 699 l 669 635 q 712 690 687 667 q 766 728 736 713 q 828 751 795 743 q 895 758 861 758 q 1073 693 1013 758 q 1133 486 1133 629 l 1133 0 l 1010 0 z "},n:{ha:818,x_min:118,x_max:707,o:"m 583 0 l 583 479 q 548 612 583 568 q 436 656 512 656 q 344 638 381 656 q 284 586 307 621 q 251 501 261 551 q 241 386 241 451 l 241 0 l 118 0 l 118 745 l 218 745 l 236 644 l 243 644 q 283 695 260 673 q 334 730 307 716 q 393 751 362 745 q 457 758 425 758 q 644 693 581 758 q 707 486 707 629 l 707 0 l 583 0 z "},o:{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 z "},p:{ha:814,x_min:118,x_max:737,o:"m 454 -14 q 382 -5 414 -14 q 323 19 349 4 q 277 53 297 33 q 241 94 257 73 l 233 94 q 237 50 235 71 q 240 14 239 33 q 241 -16 241 -5 l 241 -334 l 118 -334 l 118 745 l 218 745 l 236 644 l 241 644 q 277 689 257 668 q 322 725 296 709 q 381 749 349 740 q 454 758 414 758 q 570 734 518 758 q 660 661 623 709 q 717 541 696 612 q 737 374 737 469 q 717 206 737 278 q 660 85 696 134 q 570 11 623 36 q 454 -14 518 -14 m 431 656 q 343 640 379 656 q 286 593 308 625 q 253 513 264 561 q 241 401 243 466 l 241 374 q 251 252 241 305 q 282 162 260 199 q 340 107 304 126 q 432 89 377 89 q 567 163 524 89 q 610 375 610 237 q 567 586 610 516 q 431 656 524 656 z "},q:{ha:814,x_min:77,x_max:696,o:"m 383 89 q 470 104 435 89 q 528 152 506 120 q 561 232 550 184 q 572 343 571 279 l 572 371 q 563 493 572 439 q 532 582 554 546 q 473 637 510 618 q 382 656 437 656 q 247 582 290 656 q 204 370 204 508 q 247 158 204 228 q 383 89 290 89 m 359 -14 q 244 11 296 -14 q 155 84 192 35 q 97 204 117 132 q 77 371 77 276 q 97 539 77 467 q 155 660 117 611 q 244 733 192 709 q 359 758 296 758 q 432 749 399 758 q 490 725 465 740 q 536 689 516 709 q 572 644 557 668 l 578 644 l 596 745 l 696 745 l 696 -334 l 572 -334 l 572 -16 q 574 17 572 -3 q 576 55 575 37 q 581 100 578 77 l 572 100 q 537 56 557 77 q 491 20 517 35 q 433 -5 465 4 q 359 -14 400 -14 z "},r:{ha:554,x_min:118,x_max:526,o:"m 440 758 q 484 756 460 758 q 526 751 509 755 l 510 637 q 471 643 491 641 q 433 646 451 646 q 355 628 391 646 q 295 579 320 611 q 255 502 269 547 q 241 401 241 456 l 241 0 l 118 0 l 118 745 l 218 745 l 233 608 l 239 608 q 275 665 256 637 q 318 712 294 692 q 372 746 342 733 q 440 758 402 758 z "},s:{ha:627,x_min:61,x_max:564,o:"m 564 204 q 544 109 564 150 q 487 41 524 68 q 398 0 450 14 q 281 -14 346 -14 q 154 -2 207 -14 q 61 33 101 10 l 61 146 q 108 124 82 135 q 162 106 134 114 q 221 93 191 98 q 281 87 251 87 q 356 95 325 87 q 406 116 387 102 q 434 150 425 130 q 443 195 443 170 q 436 233 443 216 q 411 266 429 250 q 362 300 393 283 q 282 338 331 317 q 194 379 233 359 q 128 425 155 399 q 86 483 101 450 q 72 561 72 515 q 91 645 72 608 q 143 707 109 682 q 224 745 177 732 q 330 758 272 758 q 451 744 396 758 q 554 707 505 730 l 511 607 q 421 641 467 627 q 326 656 374 656 q 224 633 257 656 q 191 568 191 610 q 198 527 191 545 q 225 494 206 509 q 276 462 244 478 q 355 427 308 446 q 443 386 404 406 q 508 340 481 366 q 549 282 535 315 q 564 204 564 250 z "},t:{ha:471,x_min:22,x_max:444,o:"m 343 87 q 371 89 355 87 q 400 92 386 90 q 426 97 414 94 q 444 102 438 100 l 444 8 q 422 0 435 4 q 392 -7 408 -4 q 358 -12 376 -10 q 323 -14 340 -14 q 245 -3 281 -14 q 183 35 210 8 q 142 106 157 61 q 127 220 127 151 l 127 652 l 22 652 l 22 707 l 127 760 l 180 916 l 252 916 l 252 745 l 439 745 l 439 652 l 252 652 l 252 220 q 273 121 252 154 q 343 87 294 87 z "},u:{ha:818,x_min:111,x_max:700,o:"m 600 0 l 582 100 l 575 100 q 535 49 558 71 q 484 14 511 28 q 425 -7 456 0 q 361 -14 393 -14 q 252 2 299 -14 q 174 51 205 18 q 127 136 143 84 q 111 258 111 187 l 111 745 l 235 745 l 235 265 q 271 133 235 177 q 382 89 307 89 q 474 106 437 89 q 534 158 511 124 q 567 243 557 193 q 576 358 576 293 l 576 745 l 700 745 l 700 0 l 600 0 z "},v:{ha:665,x_min:0,x_max:665,o:"m 254 0 l 0 745 l 127 745 l 262 330 q 280 273 270 308 q 300 201 290 237 q 319 132 311 164 q 330 82 328 99 l 335 82 q 347 132 338 99 q 365 201 355 164 q 385 273 375 237 q 403 330 395 308 l 538 745 l 665 745 l 411 0 l 254 0 z "},w:{ha:1036,x_min:14,x_max:1022,o:"m 684 0 l 570 418 q 563 445 567 430 q 555 477 559 460 q 546 512 551 494 q 538 547 542 530 q 518 628 528 586 l 514 628 q 496 546 505 585 q 480 476 488 512 q 464 415 471 440 l 347 0 l 204 0 l 14 745 l 143 745 l 232 349 q 245 282 239 318 q 258 212 252 247 q 269 146 264 177 q 277 96 274 115 l 281 96 q 290 143 284 113 q 303 205 296 172 q 317 270 310 238 q 332 325 325 302 l 453 745 l 586 745 l 703 325 q 716 271 709 302 q 732 207 724 239 q 745 145 739 175 q 754 96 751 115 l 758 96 q 765 143 760 113 q 775 208 769 172 q 788 280 781 243 q 803 349 795 317 l 896 745 l 1022 745 l 829 0 l 684 0 z "},x:{ha:694,x_min:24,x_max:669,o:"m 277 382 l 37 745 l 178 745 l 347 467 l 517 745 l 657 745 l 416 382 l 669 0 l 529 0 l 347 296 l 164 0 l 24 0 l 277 382 z "},y:{ha:679,x_min:7,x_max:672,o:"m 7 745 l 135 745 l 281 329 q 300 272 290 302 q 318 212 310 242 q 333 155 327 182 q 342 103 339 127 l 346 103 q 357 149 349 120 q 373 211 364 178 q 392 276 382 244 q 410 330 402 308 l 545 745 l 672 745 l 378 -97 q 337 -196 359 -152 q 286 -270 315 -239 q 217 -317 256 -300 q 123 -334 178 -334 q 62 -330 88 -334 q 18 -322 37 -326 l 18 -224 q 54 -230 33 -227 q 100 -232 76 -232 q 156 -224 132 -232 q 197 -201 180 -216 q 228 -165 215 -186 q 250 -115 240 -143 l 289 -7 l 7 745 z "},z:{ha:612,x_min:56,x_max:557,o:"m 557 0 l 56 0 l 56 85 l 419 652 l 78 652 l 78 745 l 545 745 l 545 646 l 189 93 l 557 93 l 557 0 z "},"{":{ha:492,x_min:41,x_max:457,o:"m 339 -11 q 347 -64 339 -43 q 371 -97 355 -85 q 408 -113 386 -109 q 457 -118 430 -117 l 457 -220 q 360 -208 405 -219 q 284 -173 316 -197 q 233 -111 252 -149 q 215 -21 215 -74 l 215 205 q 171 304 215 275 q 41 334 126 334 l 41 439 q 171 468 126 439 q 215 567 215 497 l 215 793 q 233 883 215 846 q 284 944 252 920 q 360 980 316 968 q 457 991 405 991 l 457 890 q 408 885 430 890 q 371 869 386 881 q 347 837 355 857 q 339 783 339 816 l 339 558 q 299 445 339 487 q 180 390 258 404 l 180 382 q 299 327 258 368 q 339 214 339 286 l 339 -11 z "},"|":{ha:765,x_min:332,x_max:433,o:"m 332 1055 l 433 1055 l 433 -334 l 332 -334 l 332 1055 z "},"}":{ha:492,x_min:35,x_max:450,o:"m 153 214 q 193 327 153 286 q 311 382 233 368 l 311 390 q 193 445 233 404 q 153 558 153 487 l 153 783 q 144 837 153 816 q 121 869 136 857 q 84 885 106 881 q 35 890 62 890 l 35 991 q 131 980 87 991 q 208 944 176 968 q 258 883 240 920 q 277 793 277 846 l 277 567 q 288 507 277 532 q 321 468 299 483 q 376 446 343 452 q 450 439 408 439 l 450 334 q 321 304 366 334 q 277 205 277 275 l 277 -21 q 258 -111 277 -74 q 208 -173 240 -149 q 131 -208 176 -197 q 35 -220 87 -219 l 35 -118 q 84 -113 62 -117 q 121 -97 106 -109 q 144 -64 136 -85 q 153 -11 153 -43 l 153 214 z "},"~":{ha:765,x_min:69,x_max:696,o:"m 359 441 q 316 460 334 452 q 282 472 297 467 q 253 478 267 476 q 224 479 239 479 q 184 473 205 479 q 144 455 164 467 q 105 429 124 444 q 69 397 86 414 l 69 507 q 237 581 137 581 q 274 579 257 581 q 310 573 291 577 q 351 560 328 568 q 406 538 374 551 q 449 519 431 527 q 484 508 468 512 q 513 502 500 503 q 542 500 527 500 q 581 506 561 500 q 622 524 602 513 q 661 550 642 535 q 696 582 680 565 l 696 472 q 528 399 629 399 q 491 400 508 399 q 455 407 474 402 q 414 419 437 411 q 359 441 391 428 z "}," ":{ha:361,x_min:0,x_max:0,o:""},"¡":{ha:374,x_min:100,x_max:272,o:"m 144 458 l 227 458 l 261 -253 l 110 -253 l 144 458 m 272 664 q 266 620 272 638 q 247 591 259 602 q 220 575 235 580 q 186 570 204 570 q 153 575 168 570 q 125 591 137 580 q 106 620 113 602 q 100 664 100 638 q 106 707 100 689 q 125 736 113 724 q 153 753 137 747 q 186 758 168 758 q 220 753 204 758 q 247 736 235 747 q 266 707 259 724 q 272 664 272 689 z "},"¢":{ha:765,x_min:127,x_max:647,o:"m 635 163 q 564 134 601 144 q 475 122 526 123 l 475 -14 l 382 -14 l 382 126 q 276 160 323 135 q 196 231 229 186 q 145 343 163 276 q 127 504 127 411 q 145 668 127 600 q 196 783 163 737 q 276 855 229 829 q 382 889 323 880 l 382 1006 l 475 1006 l 475 895 q 570 881 524 892 q 647 854 616 870 l 611 750 q 576 763 595 757 q 537 775 557 770 q 497 783 517 780 q 460 786 477 786 q 304 718 353 786 q 256 505 256 649 q 305 297 256 363 q 454 231 354 231 q 554 243 509 231 q 635 272 598 256 l 635 163 z "},"£":{ha:765,x_min:46,x_max:718,o:"m 452 1004 q 583 989 524 1004 q 686 950 642 974 l 642 852 q 556 887 604 872 q 457 901 508 901 q 397 892 425 901 q 349 863 369 883 q 317 811 328 843 q 306 734 306 779 l 306 534 l 561 534 l 561 441 l 306 441 l 306 298 q 298 226 306 256 q 277 174 290 196 q 247 138 264 153 q 211 113 229 123 l 718 113 l 718 0 l 46 0 l 46 104 q 101 126 76 112 q 143 163 125 140 q 172 219 161 186 q 182 297 182 252 l 182 441 l 47 441 l 47 534 l 182 534 l 182 754 q 202 860 182 813 q 257 938 222 906 q 342 987 293 970 q 452 1004 392 1004 z "},"¤":{ha:765,x_min:83,x_max:681,o:"m 126 490 q 138 567 126 530 q 171 635 150 603 l 83 722 l 150 789 l 236 701 q 304 735 268 723 q 382 747 341 747 q 459 735 422 747 q 526 701 495 723 l 614 789 l 681 724 l 593 636 q 626 568 614 605 q 639 490 639 531 q 627 412 639 450 q 593 345 615 375 l 679 258 l 614 193 l 526 279 q 459 247 495 258 q 382 235 422 235 q 304 247 341 235 q 236 281 267 259 l 150 195 l 85 260 l 171 346 q 138 413 150 376 q 126 490 126 450 m 220 490 q 232 427 220 456 q 267 375 245 397 q 318 340 289 353 q 382 328 348 328 q 447 340 416 328 q 499 375 477 353 q 534 427 522 397 q 547 490 547 456 q 534 555 547 525 q 499 608 522 585 q 447 643 477 630 q 382 656 416 656 q 318 643 348 656 q 267 608 289 630 q 232 555 245 585 q 220 490 220 525 z "},"¥":{ha:765,x_min:20,x_max:746,o:"m 382 490 l 616 991 l 746 991 l 485 471 l 647 471 l 647 378 l 443 378 l 443 271 l 647 271 l 647 178 l 443 178 l 443 0 l 322 0 l 322 178 l 118 178 l 118 271 l 322 271 l 322 378 l 118 378 l 118 471 l 277 471 l 20 991 l 150 991 l 382 490 z "},"¦":{ha:765,x_min:332,x_max:433,o:"m 332 1055 l 433 1055 l 433 526 l 332 526 l 332 1055 m 332 196 l 433 196 l 433 -334 l 332 -334 l 332 196 z "},"§":{ha:675,x_min:82,x_max:585,o:"m 93 549 q 102 611 93 583 q 126 661 111 640 q 161 698 141 683 q 201 724 180 713 q 122 788 151 749 q 93 884 93 827 q 112 958 93 925 q 164 1015 130 991 q 245 1050 198 1038 q 351 1063 293 1063 q 470 1049 417 1063 q 572 1014 524 1036 l 534 920 q 443 952 490 939 q 347 965 395 965 q 245 945 280 965 q 211 886 211 925 q 219 852 211 868 q 247 822 227 837 q 298 791 266 807 q 378 755 330 775 q 465 714 427 736 q 530 666 503 692 q 570 607 556 640 q 585 532 585 574 q 576 468 585 496 q 554 416 568 439 q 523 376 541 393 q 486 349 505 359 q 559 286 533 323 q 585 196 585 249 q 565 110 585 148 q 508 46 545 73 q 419 7 471 20 q 301 -7 366 -7 q 175 4 228 -7 q 82 37 122 16 l 82 144 q 129 124 103 134 q 183 106 155 114 q 242 94 212 98 q 301 89 272 89 q 379 97 348 89 q 430 118 411 105 q 456 149 448 132 q 464 184 464 166 q 458 219 464 204 q 435 250 452 235 q 386 282 418 265 q 302 319 354 298 q 214 361 253 340 q 148 409 175 382 q 107 469 121 435 q 93 549 93 503 m 197 564 q 207 517 197 538 q 238 476 216 496 q 293 438 259 456 q 376 399 328 419 l 400 389 q 428 410 414 397 q 453 437 441 422 q 471 472 464 453 q 478 514 478 491 q 469 562 478 540 q 438 603 460 583 q 380 643 416 623 q 288 682 343 662 q 255 666 271 677 q 226 641 239 656 q 205 606 213 625 q 197 564 197 586 z "},"¨":{ha:802,x_min:208,x_max:593,o:"m 208 946 q 227 999 208 983 q 273 1015 246 1015 q 319 999 300 1015 q 339 946 339 982 q 319 893 339 910 q 273 876 300 876 q 227 893 246 876 q 208 946 208 910 m 463 946 q 481 999 463 983 q 528 1015 500 1015 q 552 1011 541 1015 q 573 999 564 1007 q 587 977 582 990 q 593 946 593 964 q 573 893 593 910 q 528 876 553 876 q 481 893 500 876 q 463 946 463 910 z "},"©":{ha:1156,x_min:68,x_max:1088,o:"m 604 714 q 531 699 563 714 q 477 656 499 684 q 445 587 456 628 q 433 496 433 547 q 443 402 433 443 q 474 334 453 361 q 527 291 494 306 q 604 277 559 277 q 638 279 620 277 q 676 286 656 281 q 714 295 695 290 q 750 307 733 301 l 750 218 q 717 205 734 211 q 683 194 701 199 q 644 187 665 189 q 600 184 624 184 q 479 207 531 184 q 394 271 428 229 q 342 370 359 312 q 325 497 325 427 q 343 622 325 566 q 397 720 361 679 q 485 783 433 760 q 604 806 536 806 q 692 794 647 806 q 777 764 736 783 l 734 677 q 666 705 699 695 q 604 714 633 714 m 68 496 q 86 631 68 566 q 137 753 104 696 q 217 857 170 810 q 320 936 264 903 q 442 987 377 969 q 578 1006 507 1006 q 713 987 648 1006 q 835 936 779 969 q 939 857 892 903 q 1018 753 985 810 q 1069 631 1051 696 q 1088 496 1088 566 q 1069 360 1088 425 q 1018 238 1051 295 q 939 135 985 182 q 835 56 892 89 q 713 4 779 22 q 578 -14 648 -14 q 442 4 507 -14 q 320 56 377 22 q 217 135 264 89 q 137 238 170 182 q 86 360 104 295 q 68 496 68 425 m 142 496 q 176 326 142 406 q 270 188 210 247 q 408 94 329 128 q 578 60 488 60 q 747 94 668 60 q 886 188 827 128 q 980 326 945 247 q 1014 496 1014 406 q 980 665 1014 586 q 886 804 945 745 q 747 898 827 863 q 578 932 668 932 q 408 898 488 932 q 270 804 329 863 q 176 665 210 745 q 142 496 142 586 z "},"ª":{ha:460,x_min:46,x_max:392,o:"m 330 541 l 311 596 q 286 569 299 581 q 257 549 273 557 q 222 536 241 541 q 179 532 203 532 q 125 541 150 532 q 83 567 101 549 q 56 610 66 584 q 46 671 46 636 q 94 777 46 740 q 239 817 142 813 l 306 819 l 306 840 q 285 908 306 889 q 227 928 264 928 q 163 918 194 928 q 104 893 133 908 l 72 961 q 146 991 106 979 q 227 1003 186 1003 q 352 967 311 1003 q 392 848 392 931 l 392 541 l 330 541 m 256 753 q 198 745 221 751 q 161 728 175 739 q 141 704 147 718 q 135 669 135 689 q 152 620 135 635 q 197 604 169 604 q 240 611 220 604 q 274 633 260 618 q 297 670 289 648 q 306 722 306 692 l 306 755 l 256 753 z "},"«":{ha:676,x_min:56,x_max:621,o:"m 56 375 l 265 656 l 345 603 l 183 367 l 345 131 l 265 78 l 56 357 l 56 375 m 332 375 l 542 656 l 621 603 l 460 367 l 621 131 l 542 78 l 332 357 l 332 375 z "},"¬":{ha:765,x_min:69,x_max:696,o:"m 696 541 l 696 178 l 595 178 l 595 439 l 69 439 l 69 541 l 696 541 z "},"­":{ha:447,x_min:56,x_max:392,o:"m 56 315 l 56 429 l 392 429 l 392 315 l 56 315 z "},"®":{ha:1092,x_min:61,x_max:1023,o:"m 61 494 q 124 749 61 631 q 300 933 188 866 q 543 1001 412 1001 q 785 933 673 1001 q 960 749 897 866 q 1023 494 1023 631 q 962 244 1023 361 q 789 57 901 127 q 543 -14 677 -14 q 297 56 409 -14 q 123 243 184 126 q 61 494 61 359 m 139 494 q 193 278 139 378 q 341 123 248 179 q 543 66 434 66 q 745 124 652 66 q 892 279 839 181 q 945 494 945 378 q 892 708 945 610 q 745 863 839 806 q 543 920 652 920 q 340 864 434 920 q 193 709 247 808 q 139 494 139 610 m 443 444 l 443 214 l 347 214 l 347 790 l 534 790 q 695 746 638 790 q 753 616 753 701 q 666 489 753 533 q 749 351 749 455 l 749 309 q 761 225 749 251 l 761 214 l 663 214 q 653 301 653 239 q 651 376 653 364 q 562 444 640 441 l 443 444 m 443 530 l 549 530 q 627 554 597 532 q 657 613 657 576 q 631 683 657 663 q 536 704 604 704 l 443 704 l 443 530 z "},"¯":{ha:694,x_min:-4,x_max:699,o:"m 699 1055 l -4 1055 l -4 1150 l 699 1150 l 699 1055 z "},"°":{ha:595,x_min:83,x_max:511,o:"m 83 791 q 100 874 83 836 q 146 943 117 913 q 214 989 175 972 q 297 1006 253 1006 q 380 989 341 1006 q 448 943 419 972 q 494 874 477 913 q 511 791 511 836 q 494 709 511 747 q 448 641 477 670 q 380 596 419 612 q 297 579 341 579 q 214 596 253 579 q 146 641 175 612 q 100 709 117 670 q 83 791 83 747 m 167 791 q 177 742 167 765 q 205 701 187 718 q 246 673 222 683 q 297 663 270 663 q 348 673 324 663 q 390 701 372 683 q 418 742 408 718 q 428 791 428 765 q 418 843 428 819 q 390 885 408 867 q 348 913 372 903 q 297 924 324 924 q 246 913 270 924 q 205 885 222 903 q 177 843 187 867 q 167 791 167 819 z "},"±":{ha:765,x_min:69,x_max:696,o:"m 332 439 l 69 439 l 69 541 l 332 541 l 332 804 l 433 804 l 433 541 l 696 541 l 696 439 l 433 439 l 433 178 l 332 178 l 332 439 m 69 0 l 69 102 l 696 102 l 696 0 l 69 0 z "},"²":{ha:460,x_min:33,x_max:421,o:"m 421 397 l 33 397 l 33 473 l 175 628 q 238 699 214 670 q 276 750 262 728 q 295 793 290 773 q 300 836 300 813 q 277 902 300 880 q 218 924 255 924 q 152 907 184 924 q 90 864 121 890 l 37 928 q 119 982 74 960 q 220 1004 164 1004 q 293 993 260 1004 q 349 961 326 982 q 385 908 372 939 q 397 839 397 878 q 388 776 397 805 q 359 718 378 747 q 314 658 341 689 q 253 590 288 627 l 153 484 l 421 484 l 421 397 z "},"³":{ha:460,x_min:21,x_max:418,o:"m 400 851 q 373 762 400 798 q 298 710 345 726 q 388 659 358 694 q 418 570 418 623 q 404 495 418 529 q 362 437 391 461 q 292 399 334 413 q 191 386 249 386 q 101 394 143 386 q 21 424 60 403 l 21 514 q 109 478 64 491 q 189 465 153 465 q 286 493 256 465 q 315 571 315 522 q 279 644 315 621 q 178 667 243 667 l 111 667 l 111 743 l 178 743 q 269 770 240 743 q 297 840 297 797 q 290 878 297 862 q 272 904 283 894 q 244 919 260 914 q 210 924 228 924 q 137 910 170 924 q 69 871 104 896 l 22 936 q 63 964 42 951 q 106 985 83 977 q 155 999 130 994 q 211 1004 181 1004 q 293 993 258 1004 q 353 961 329 981 q 388 912 376 941 q 400 851 400 884 z "},"´":{ha:802,x_min:267,x_max:533,o:"m 267 860 q 297 905 281 880 q 329 959 313 931 q 359 1014 345 986 q 385 1064 374 1041 l 533 1064 l 533 1050 q 501 1004 522 1031 q 453 947 479 977 q 400 889 427 917 q 349 842 372 861 l 267 842 l 267 860 z "},"µ":{ha:825,x_min:118,x_max:707,o:"m 241 265 q 277 133 241 177 q 389 89 313 89 q 481 106 444 89 q 542 158 519 124 q 574 243 564 193 q 583 358 583 293 l 583 745 l 707 745 l 707 0 l 607 0 l 589 100 l 582 100 q 500 15 549 43 q 382 -14 452 -14 q 297 2 333 -14 q 237 46 261 18 q 239 -7 238 20 q 241 -59 241 -31 q 241 -117 241 -88 l 241 -334 l 118 -334 l 118 745 l 241 745 l 241 265 z "},"¶":{ha:909,x_min:77,x_max:764,o:"m 764 -176 l 682 -176 l 682 947 l 542 947 l 542 -176 l 460 -176 l 460 379 q 361 367 418 367 q 244 384 296 367 q 154 441 191 401 q 97 547 117 481 q 77 707 77 612 q 99 873 77 806 q 161 981 121 940 q 258 1038 201 1021 q 382 1055 314 1055 l 764 1055 l 764 -176 z "},"·":{ha:372,x_min:100,x_max:272,o:"m 100 490 q 106 534 100 516 q 125 563 113 552 q 152 579 136 574 q 186 585 168 585 q 219 579 203 585 q 247 563 235 574 q 265 534 258 552 q 272 490 272 516 q 265 448 272 465 q 247 418 258 430 q 219 401 235 407 q 186 396 203 396 q 152 401 168 396 q 125 418 136 407 q 106 448 113 430 q 100 490 100 465 z "},"¸":{ha:285,x_min:24,x_max:277,o:"m 277 -195 q 229 -297 277 -260 q 79 -334 181 -334 q 49 -332 64 -334 q 24 -328 34 -330 l 24 -254 q 51 -257 34 -256 q 78 -258 67 -258 q 153 -244 126 -258 q 180 -196 180 -229 q 172 -168 180 -180 q 147 -147 163 -156 q 110 -132 132 -138 q 64 -119 89 -125 l 125 0 l 207 0 l 168 -78 q 211 -92 191 -83 q 245 -115 231 -101 q 268 -149 260 -129 q 277 -195 277 -168 z "},"¹":{ha:460,x_min:43,x_max:300,o:"m 208 991 l 300 991 l 300 397 l 201 397 l 201 747 q 202 785 201 764 q 203 825 202 805 q 205 865 204 846 q 207 899 206 884 q 184 873 197 887 q 157 848 172 860 l 93 799 l 43 864 l 208 991 z "},"º":{ha:486,x_min:45,x_max:441,o:"m 441 768 q 428 668 441 712 q 388 594 414 624 q 325 548 361 564 q 241 532 288 532 q 163 548 199 532 q 100 594 127 564 q 59 668 74 624 q 45 768 45 712 q 59 868 45 825 q 98 942 73 912 q 161 987 124 972 q 244 1003 198 1003 q 322 987 286 1003 q 385 942 359 972 q 427 868 412 912 q 441 768 441 825 m 134 768 q 159 647 134 688 q 243 606 184 606 q 326 647 300 606 q 351 768 351 688 q 326 889 351 850 q 243 928 300 928 q 159 889 184 928 q 134 768 134 850 z "},"»":{ha:676,x_min:57,x_max:623,o:"m 623 357 l 412 78 l 334 131 l 494 367 l 334 603 l 412 656 l 623 375 l 623 357 m 346 357 l 136 78 l 57 131 l 218 367 l 57 603 l 136 656 l 346 375 l 346 357 z "},"¼":{ha:1023,x_min:43,x_max:962,o:"m 208 991 l 300 991 l 300 397 l 201 397 l 201 747 q 202 785 201 764 q 203 825 202 805 q 205 865 204 846 q 207 899 206 884 q 184 873 197 887 q 157 848 172 860 l 93 799 l 43 864 l 208 991 m 815 991 l 265 0 l 159 0 l 709 991 l 815 991 m 962 131 l 878 131 l 878 1 l 781 1 l 781 131 l 526 131 l 526 206 l 782 599 l 878 599 l 878 217 l 962 217 l 962 131 m 781 217 l 781 349 q 782 411 781 378 q 785 478 783 445 q 774 458 781 471 q 760 431 768 446 q 745 404 753 417 q 730 380 736 390 l 625 217 l 781 217 z "},"½":{ha:1023,x_min:30,x_max:977,o:"m 195 991 l 287 991 l 287 397 l 189 397 l 189 747 q 189 785 189 764 q 190 825 189 805 q 192 865 191 846 q 194 899 193 884 q 172 873 184 887 q 144 848 159 860 l 80 799 l 30 864 l 195 991 m 801 991 l 251 0 l 144 0 l 694 991 l 801 991 m 977 1 l 589 1 l 589 77 l 730 231 q 793 302 769 273 q 831 354 818 331 q 850 396 845 376 q 855 439 855 416 q 833 505 855 484 q 774 527 810 527 q 708 510 739 527 q 646 467 676 493 l 593 531 q 674 586 629 564 q 775 608 720 608 q 849 596 816 608 q 905 564 882 585 q 940 512 928 543 q 953 442 953 481 q 943 379 953 408 q 915 321 933 350 q 870 261 897 292 q 808 193 843 231 l 708 87 l 977 87 l 977 1 z "},"¾":{ha:1023,x_min:21,x_max:1008,o:"m 400 851 q 373 762 400 798 q 298 710 345 726 q 388 659 358 694 q 418 570 418 623 q 404 495 418 529 q 362 437 391 461 q 292 399 334 413 q 191 386 249 386 q 101 394 143 386 q 21 424 60 403 l 21 514 q 109 478 64 491 q 189 465 153 465 q 286 493 256 465 q 315 571 315 522 q 279 644 315 621 q 178 667 243 667 l 111 667 l 111 743 l 178 743 q 269 770 240 743 q 297 840 297 797 q 290 878 297 862 q 272 904 283 894 q 244 919 260 914 q 210 924 228 924 q 137 910 170 924 q 69 871 104 896 l 22 936 q 63 964 42 951 q 106 985 83 977 q 155 999 130 994 q 211 1004 181 1004 q 293 993 258 1004 q 353 961 329 981 q 388 912 376 941 q 400 851 400 884 m 879 991 l 329 0 l 222 0 l 772 991 l 879 991 m 1008 131 l 923 131 l 923 1 l 826 1 l 826 131 l 572 131 l 572 206 l 827 599 l 923 599 l 923 217 l 1008 217 l 1008 131 m 826 217 l 826 349 q 827 411 826 378 q 830 478 828 445 q 820 458 827 471 q 806 431 813 446 q 790 404 798 417 q 776 380 782 390 l 671 217 l 826 217 z "},"¿":{ha:591,x_min:46,x_max:567,o:"m 401 458 l 401 433 q 396 363 401 394 q 377 305 391 332 q 342 252 364 277 q 286 197 320 226 q 231 147 254 170 q 193 101 208 124 q 171 51 178 77 q 164 -12 164 24 q 174 -72 164 -45 q 204 -118 184 -98 q 252 -148 223 -137 q 318 -158 281 -158 q 426 -141 375 -158 q 524 -100 477 -123 l 567 -199 q 448 -247 511 -227 q 318 -267 384 -267 q 204 -249 255 -267 q 119 -199 154 -232 q 65 -120 84 -167 q 46 -14 46 -73 q 55 68 46 33 q 82 134 64 103 q 128 193 100 164 q 192 253 155 221 q 250 306 227 283 q 285 350 272 329 q 302 394 298 371 q 307 446 307 416 l 307 458 l 401 458 m 433 664 q 427 620 433 638 q 409 591 420 602 q 381 575 397 580 q 347 570 366 570 q 314 575 330 570 q 287 591 298 580 q 268 620 275 602 q 261 664 261 638 q 268 707 261 689 q 287 736 275 724 q 314 753 298 747 q 347 758 330 758 q 381 753 366 758 q 409 736 397 747 q 427 707 420 724 q 433 664 433 689 z "},"À":{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 488 1071 l 406 1071 q 355 1118 382 1090 q 301 1176 327 1146 q 253 1233 275 1206 q 221 1279 232 1261 l 221 1293 l 370 1293 q 395 1243 380 1270 q 425 1188 410 1215 q 457 1135 441 1160 q 488 1089 473 1109 l 488 1071 z "},"Á":{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 362 1089 q 393 1135 377 1109 q 425 1188 409 1160 q 455 1243 441 1215 q 480 1293 469 1270 l 629 1293 l 629 1279 q 596 1233 618 1261 q 549 1176 575 1206 q 495 1118 523 1146 q 444 1071 468 1090 l 362 1071 l 362 1089 z "},"Â":{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 646 1071 l 564 1071 q 493 1127 530 1094 q 421 1197 456 1160 q 349 1127 385 1160 q 278 1071 313 1094 l 196 1071 l 196 1089 q 237 1135 214 1109 q 282 1188 260 1160 q 325 1243 305 1215 q 356 1293 345 1270 l 486 1293 q 517 1243 497 1270 q 560 1188 537 1215 q 606 1135 583 1160 q 646 1089 629 1109 l 646 1071 z "},"Ã":{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 524 1072 q 470 1084 496 1072 q 417 1111 443 1096 q 368 1137 391 1125 q 322 1149 344 1149 q 275 1131 292 1149 q 250 1071 259 1113 l 179 1071 q 194 1145 182 1112 q 223 1201 205 1178 q 266 1237 241 1225 q 322 1250 291 1250 q 378 1238 351 1250 q 431 1212 406 1226 q 480 1186 457 1198 q 524 1174 504 1174 q 570 1192 554 1174 q 595 1251 585 1209 l 667 1251 q 652 1178 663 1211 q 623 1121 641 1145 q 580 1085 605 1098 q 524 1072 555 1072 z "},"Ä":{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 231 1175 q 250 1228 231 1212 q 296 1244 269 1244 q 342 1228 322 1244 q 361 1175 361 1211 q 342 1122 361 1139 q 296 1105 322 1105 q 250 1122 269 1105 q 231 1175 231 1139 m 485 1175 q 504 1228 485 1212 q 550 1244 523 1244 q 575 1240 563 1244 q 595 1228 587 1236 q 610 1206 604 1219 q 615 1175 615 1194 q 595 1122 615 1139 q 550 1105 576 1105 q 504 1122 523 1105 q 485 1175 485 1139 z "},"Å":{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 575 1074 q 563 1011 575 1039 q 531 965 551 984 q 481 936 510 946 q 420 926 453 926 q 358 936 386 926 q 310 965 330 946 q 279 1011 290 984 q 269 1072 269 1038 q 279 1134 269 1107 q 310 1179 290 1160 q 358 1208 330 1198 q 420 1218 386 1218 q 481 1208 452 1218 q 530 1180 509 1198 q 563 1134 551 1161 q 575 1074 575 1107 m 496 1072 q 474 1128 496 1108 q 420 1149 453 1149 q 365 1128 386 1149 q 343 1072 343 1108 q 362 1016 343 1036 q 420 996 382 996 q 474 1016 453 996 q 496 1072 496 1036 z "},"Æ":{ha:1183,x_min:-1,x_max:1100,o:"m 1100 0 l 585 0 l 585 307 l 262 307 l 125 0 l -1 0 l 443 991 l 1100 991 l 1100 880 l 711 880 l 711 574 l 1074 574 l 1074 464 l 711 464 l 711 111 l 1100 111 l 1100 0 m 311 419 l 585 419 l 585 880 l 511 880 l 311 419 z "},"Ç":{ha:838,x_min:85,x_max:798,o:"m 538 895 q 406 867 465 895 q 306 788 347 840 q 241 663 264 736 q 218 496 218 589 q 238 326 218 400 q 298 201 258 252 q 398 123 338 150 q 538 97 458 97 q 652 109 598 97 q 760 136 707 121 l 760 26 q 707 8 733 16 q 651 -4 680 1 q 590 -11 623 -9 q 517 -14 557 -14 q 324 23 406 -14 q 190 127 243 60 q 111 288 136 194 q 85 497 85 382 q 114 703 85 610 q 201 864 144 797 q 343 968 258 931 q 538 1006 428 1006 q 677 991 611 1006 q 798 947 744 976 l 745 842 q 652 879 702 863 q 538 895 602 895 m 621 -195 q 573 -297 621 -260 q 424 -334 526 -334 q 394 -332 409 -334 q 368 -328 378 -330 l 368 -254 q 395 -257 378 -256 q 422 -258 412 -258 q 498 -244 471 -258 q 525 -196 525 -229 q 516 -168 525 -180 q 492 -147 507 -156 q 455 -132 476 -138 q 408 -119 433 -125 l 469 0 l 551 0 l 513 -78 q 555 -92 536 -83 q 590 -115 575 -101 q 613 -149 604 -129 q 621 -195 621 -168 z "},"È":{ha:733,x_min:135,x_max:650,o:"m 650 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 574 l 624 574 l 624 464 l 261 464 l 261 111 l 650 111 l 650 0 m 484 1071 l 402 1071 q 351 1118 378 1090 q 297 1176 323 1146 q 249 1233 271 1206 q 217 1279 228 1261 l 217 1293 l 366 1293 q 391 1243 376 1270 q 421 1188 406 1215 q 453 1135 437 1160 q 484 1089 469 1109 l 484 1071 z "},"É":{ha:733,x_min:135,x_max:650,o:"m 650 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 574 l 624 574 l 624 464 l 261 464 l 261 111 l 650 111 l 650 0 m 309 1089 q 340 1135 324 1109 q 372 1188 356 1160 q 402 1243 388 1215 q 427 1293 416 1270 l 576 1293 l 576 1279 q 544 1233 565 1261 q 496 1176 522 1206 q 443 1118 470 1146 q 391 1071 415 1090 l 309 1071 l 309 1089 z "},"Ê":{ha:733,x_min:135,x_max:650,o:"m 650 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 574 l 624 574 l 624 464 l 261 464 l 261 111 l 650 111 l 650 0 m 615 1071 l 533 1071 q 462 1127 498 1094 q 390 1197 425 1160 q 317 1127 353 1160 q 247 1071 281 1094 l 165 1071 l 165 1089 q 205 1135 182 1109 q 251 1188 229 1160 q 294 1243 274 1215 q 325 1293 314 1270 l 455 1293 q 486 1243 466 1270 q 529 1188 506 1215 q 575 1135 551 1160 q 615 1089 598 1109 l 615 1071 z "},"Ë":{ha:733,x_min:135,x_max:650,o:"m 650 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 574 l 624 574 l 624 464 l 261 464 l 261 111 l 650 111 l 650 0 m 201 1175 q 220 1228 201 1212 q 266 1244 239 1244 q 312 1228 292 1244 q 332 1175 332 1211 q 312 1122 332 1139 q 266 1105 292 1105 q 220 1122 239 1105 q 201 1175 201 1139 m 455 1175 q 474 1228 455 1212 q 520 1244 493 1244 q 545 1240 533 1244 q 566 1228 557 1236 q 580 1206 574 1219 q 585 1175 585 1194 q 566 1122 585 1139 q 520 1105 546 1105 q 474 1122 493 1105 q 455 1175 455 1139 z "},"Ì":{ha:471,x_min:42,x_max:415,o:"m 415 0 l 56 0 l 56 69 l 172 97 l 172 895 l 56 922 l 56 991 l 415 991 l 415 922 l 298 895 l 298 97 l 415 69 l 415 0 m 309 1071 l 227 1071 q 176 1118 203 1090 q 122 1176 148 1146 q 74 1233 96 1206 q 42 1279 53 1261 l 42 1293 l 191 1293 q 216 1243 201 1270 q 246 1188 231 1215 q 278 1135 262 1160 q 309 1089 294 1109 l 309 1071 z "},"Í":{ha:471,x_min:56,x_max:441,o:"m 415 0 l 56 0 l 56 69 l 172 97 l 172 895 l 56 922 l 56 991 l 415 991 l 415 922 l 298 895 l 298 97 l 415 69 l 415 0 m 174 1089 q 205 1135 189 1109 q 237 1188 221 1160 q 267 1243 253 1215 q 292 1293 281 1270 l 441 1293 l 441 1279 q 409 1233 430 1261 q 361 1176 387 1206 q 308 1118 335 1146 q 256 1071 280 1090 l 174 1071 l 174 1089 z "},"Î":{ha:471,x_min:12,x_max:462,o:"m 415 0 l 56 0 l 56 69 l 172 97 l 172 895 l 56 922 l 56 991 l 415 991 l 415 922 l 298 895 l 298 97 l 415 69 l 415 0 m 462 1071 l 380 1071 q 309 1127 345 1094 q 237 1197 272 1160 q 164 1127 200 1160 q 94 1071 128 1094 l 12 1071 l 12 1089 q 52 1135 29 1109 q 98 1188 75 1160 q 141 1243 121 1215 q 172 1293 161 1270 l 302 1293 q 333 1243 313 1270 q 375 1188 353 1215 q 421 1135 398 1160 q 462 1089 445 1109 l 462 1071 z "},"Ï":{ha:471,x_min:43,x_max:428,o:"m 415 0 l 56 0 l 56 69 l 172 97 l 172 895 l 56 922 l 56 991 l 415 991 l 415 922 l 298 895 l 298 97 l 415 69 l 415 0 m 43 1175 q 62 1228 43 1212 q 109 1244 81 1244 q 155 1228 135 1244 q 174 1175 174 1211 q 155 1122 174 1139 q 109 1105 135 1105 q 62 1122 81 1105 q 43 1175 43 1139 m 298 1175 q 317 1228 298 1212 q 363 1244 336 1244 q 388 1240 376 1244 q 408 1228 399 1236 q 422 1206 417 1219 q 428 1175 428 1194 q 408 1122 428 1139 q 363 1105 389 1105 q 317 1122 336 1105 q 298 1175 298 1139 z "},"Ð":{ha:950,x_min:32,x_max:865,o:"m 32 546 l 135 546 l 135 991 l 411 991 q 599 960 515 991 q 742 868 683 929 q 833 715 801 806 q 865 505 865 625 q 833 285 865 380 q 739 127 800 191 q 587 32 677 64 q 383 0 497 0 l 135 0 l 135 436 l 32 436 l 32 546 m 732 501 q 709 672 732 600 q 644 791 687 745 q 539 861 602 838 q 397 884 477 884 l 261 884 l 261 546 l 489 546 l 489 436 l 261 436 l 261 109 l 371 109 q 641 208 550 109 q 732 501 732 307 z "},"Ñ":{ha:1013,x_min:135,x_max:878,o:"m 878 0 l 732 0 l 244 821 l 239 821 q 245 717 243 768 q 250 625 248 673 q 252 538 252 576 l 252 0 l 135 0 l 135 991 l 279 991 l 765 175 l 770 175 q 765 277 768 227 q 763 321 764 298 q 761 367 762 344 q 760 410 760 389 q 760 449 760 431 l 760 991 l 878 991 l 878 0 m 614 1072 q 560 1084 587 1072 q 507 1111 533 1096 q 458 1137 481 1125 q 412 1149 434 1149 q 366 1131 382 1149 q 340 1071 349 1113 l 269 1071 q 284 1145 273 1112 q 313 1201 295 1178 q 356 1237 331 1225 q 412 1250 381 1250 q 468 1238 441 1250 q 522 1212 496 1226 q 571 1186 547 1198 q 614 1174 594 1174 q 660 1192 644 1174 q 686 1251 675 1209 l 757 1251 q 742 1178 753 1211 q 713 1121 731 1145 q 670 1085 695 1098 q 614 1072 645 1072 z "},"Ò":{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 590 1071 l 509 1071 q 457 1118 485 1090 q 403 1176 429 1146 q 356 1233 377 1206 q 323 1279 334 1261 l 323 1293 l 472 1293 q 497 1243 483 1270 q 528 1188 512 1215 q 559 1135 543 1160 q 590 1089 576 1109 l 590 1071 z "},"Ó":{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 441 1089 q 472 1135 456 1109 q 504 1188 488 1160 q 534 1243 520 1215 q 559 1293 549 1270 l 708 1293 l 708 1279 q 676 1233 697 1261 q 628 1176 654 1206 q 575 1118 602 1146 q 524 1071 547 1090 l 441 1071 l 441 1089 z "},"Ô":{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 743 1071 l 661 1071 q 590 1127 627 1094 q 518 1197 553 1160 q 446 1127 481 1160 q 375 1071 410 1094 l 293 1071 l 293 1089 q 334 1135 311 1109 q 379 1188 357 1160 q 422 1243 402 1215 q 453 1293 442 1270 l 583 1293 q 614 1243 594 1270 q 657 1188 634 1215 q 703 1135 680 1160 q 743 1089 726 1109 l 743 1071 z "},"Õ":{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 604 1072 q 550 1084 577 1072 q 498 1111 524 1096 q 448 1137 472 1125 q 403 1149 425 1149 q 356 1131 372 1149 q 330 1071 340 1113 l 260 1071 q 274 1145 263 1112 q 303 1201 286 1178 q 347 1237 321 1225 q 403 1250 372 1250 q 459 1238 431 1250 q 512 1212 486 1226 q 561 1186 538 1198 q 604 1174 585 1174 q 650 1192 635 1174 q 676 1251 666 1209 l 747 1251 q 733 1178 744 1211 q 704 1121 722 1145 q 661 1085 686 1098 q 604 1072 635 1072 z "},"Ö":{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 323 1175 q 342 1228 323 1212 q 389 1244 361 1244 q 435 1228 415 1244 q 454 1175 454 1211 q 435 1122 454 1139 q 389 1105 415 1105 q 342 1122 361 1105 q 323 1175 323 1139 m 578 1175 q 597 1228 578 1212 q 643 1244 616 1244 q 668 1240 656 1244 q 688 1228 680 1236 q 703 1206 697 1219 q 708 1175 708 1194 q 688 1122 708 1139 q 643 1105 669 1105 q 597 1122 616 1105 q 578 1175 578 1139 z "},"×":{ha:765,x_min:96,x_max:671,o:"m 311 490 l 96 707 l 167 778 l 382 562 l 600 778 l 671 708 l 453 490 l 669 273 l 600 204 l 382 419 l 167 205 l 97 275 l 311 490 z "},"Ø":{ha:1031,x_min:85,x_max:945,o:"m 882 986 l 819 885 q 913 720 881 818 q 945 497 945 621 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 297 35 387 -14 l 244 -52 l 151 1 l 212 100 q 116 269 146 168 q 85 498 85 370 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 635 993 581 1007 q 734 953 690 979 l 789 1039 l 882 986 m 218 497 q 234 337 218 408 q 282 214 250 267 l 675 854 q 604 885 642 874 q 517 896 565 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 811 497 q 751 774 811 671 l 359 136 q 430 107 391 117 q 515 97 469 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 z "},"Ù":{ha:970,x_min:125,x_max:844,o:"m 844 993 l 844 350 q 822 206 844 273 q 754 91 800 140 q 641 14 709 42 q 481 -14 573 -14 q 328 13 394 -14 q 216 87 261 39 q 148 202 171 135 q 125 353 125 270 l 125 991 l 252 991 l 252 346 q 310 162 252 227 q 488 97 369 97 q 591 115 548 97 q 663 167 635 134 q 704 246 690 200 q 718 347 718 292 l 718 993 l 844 993 m 574 1071 l 493 1071 q 441 1118 469 1090 q 388 1176 414 1146 q 340 1233 361 1206 q 308 1279 319 1261 l 308 1293 l 456 1293 q 482 1243 467 1270 q 512 1188 496 1215 q 544 1135 528 1160 q 574 1089 560 1109 l 574 1071 z "},"Ú":{ha:970,x_min:125,x_max:844,o:"m 844 993 l 844 350 q 822 206 844 273 q 754 91 800 140 q 641 14 709 42 q 481 -14 573 -14 q 328 13 394 -14 q 216 87 261 39 q 148 202 171 135 q 125 353 125 270 l 125 991 l 252 991 l 252 346 q 310 162 252 227 q 488 97 369 97 q 591 115 548 97 q 663 167 635 134 q 704 246 690 200 q 718 347 718 292 l 718 993 l 844 993 m 400 1089 q 431 1135 415 1109 q 463 1188 447 1160 q 493 1243 479 1215 q 518 1293 507 1270 l 667 1293 l 667 1279 q 634 1233 656 1261 q 587 1176 613 1206 q 533 1118 561 1146 q 482 1071 506 1090 l 400 1071 l 400 1089 z "},"Û":{ha:970,x_min:125,x_max:844,o:"m 844 993 l 844 350 q 822 206 844 273 q 754 91 800 140 q 641 14 709 42 q 481 -14 573 -14 q 328 13 394 -14 q 216 87 261 39 q 148 202 171 135 q 125 353 125 270 l 125 991 l 252 991 l 252 346 q 310 162 252 227 q 488 97 369 97 q 591 115 548 97 q 663 167 635 134 q 704 246 690 200 q 718 347 718 292 l 718 993 l 844 993 m 707 1071 l 625 1071 q 554 1127 591 1094 q 482 1197 517 1160 q 410 1127 446 1160 q 339 1071 374 1094 l 257 1071 l 257 1089 q 298 1135 275 1109 q 343 1188 321 1160 q 386 1243 366 1215 q 417 1293 406 1270 l 547 1293 q 578 1243 558 1270 q 621 1188 598 1215 q 667 1135 644 1160 q 707 1089 690 1109 l 707 1071 z "},"Ü":{ha:970,x_min:125,x_max:844,o:"m 844 993 l 844 350 q 822 206 844 273 q 754 91 800 140 q 641 14 709 42 q 481 -14 573 -14 q 328 13 394 -14 q 216 87 261 39 q 148 202 171 135 q 125 353 125 270 l 125 991 l 252 991 l 252 346 q 310 162 252 227 q 488 97 369 97 q 591 115 548 97 q 663 167 635 134 q 704 246 690 200 q 718 347 718 292 l 718 993 l 844 993 m 293 1175 q 312 1228 293 1212 q 358 1244 331 1244 q 404 1228 385 1244 q 424 1175 424 1211 q 404 1122 424 1139 q 358 1105 385 1105 q 312 1122 331 1105 q 293 1175 293 1139 m 547 1175 q 566 1228 547 1212 q 612 1244 585 1244 q 637 1240 625 1244 q 658 1228 649 1236 q 672 1206 667 1219 q 677 1175 677 1194 q 658 1122 677 1139 q 612 1105 638 1105 q 566 1122 585 1105 q 547 1175 547 1139 z "},"Ý":{ha:732,x_min:0,x_max:732,o:"m 366 490 l 596 991 l 732 991 l 429 386 l 429 0 l 302 0 l 302 379 l 0 991 l 138 991 l 366 490 m 300 1089 q 331 1135 315 1109 q 362 1188 347 1160 q 393 1243 378 1215 q 418 1293 407 1270 l 566 1293 l 566 1279 q 534 1233 555 1261 q 487 1176 513 1206 q 433 1118 460 1146 q 382 1071 406 1090 l 300 1071 l 300 1089 z "},"Þ":{ha:800,x_min:135,x_max:729,o:"m 729 530 q 710 412 729 469 q 649 311 692 355 q 536 241 606 267 q 363 215 466 215 l 261 215 l 261 0 l 135 0 l 135 991 l 261 991 l 261 821 l 380 821 q 537 801 471 821 q 646 745 603 782 q 709 654 688 708 q 729 530 729 600 m 261 322 l 349 322 q 459 333 412 322 q 537 368 506 344 q 583 430 568 392 q 599 524 599 469 q 543 667 599 621 q 370 713 488 713 l 261 713 l 261 322 z "},"ß":{ha:836,x_min:118,x_max:774,o:"m 685 854 q 670 786 685 816 q 634 731 656 755 q 588 686 613 706 q 541 647 562 665 q 505 610 519 628 q 490 571 490 591 q 495 546 490 557 q 513 521 500 534 q 550 491 526 508 q 612 449 574 475 q 680 399 650 424 q 731 347 710 375 q 763 287 751 319 q 774 212 774 254 q 755 111 774 153 q 702 40 736 68 q 620 0 667 13 q 514 -14 572 -14 q 401 -2 448 -14 q 318 33 354 10 l 318 146 q 358 124 336 135 q 404 106 380 114 q 454 93 429 98 q 505 87 480 87 q 571 96 543 87 q 616 120 598 104 q 642 157 633 135 q 650 205 650 178 q 644 250 650 230 q 624 289 638 270 q 585 328 609 308 q 522 371 560 347 q 451 421 479 398 q 404 467 422 444 q 378 513 386 490 q 371 566 371 537 q 385 629 371 602 q 420 677 399 656 q 465 717 441 699 q 511 755 490 735 q 546 797 532 774 q 559 850 559 820 q 548 899 559 878 q 517 934 537 920 q 468 955 496 948 q 406 961 440 961 q 342 955 372 961 q 290 932 313 948 q 255 887 268 916 q 241 815 241 859 l 241 0 l 118 0 l 118 814 q 139 932 118 884 q 199 1009 161 980 q 290 1050 237 1038 q 406 1063 343 1063 q 519 1050 468 1063 q 608 1011 571 1037 q 665 946 644 985 q 685 854 685 907 z "},"à":{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 460 842 l 378 842 q 327 889 355 861 q 273 947 299 917 q 225 1004 247 977 q 193 1050 204 1031 l 193 1064 l 342 1064 q 367 1014 353 1041 q 397 959 382 986 q 429 905 413 931 q 460 860 446 880 l 460 842 z "},"á":{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 302 860 q 333 905 317 880 q 365 959 349 931 q 395 1014 381 986 q 420 1064 410 1041 l 569 1064 l 569 1050 q 537 1004 558 1031 q 489 947 515 977 q 436 889 463 917 q 385 842 408 861 l 302 842 l 302 860 z "},"â":{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 605 842 l 523 842 q 452 898 488 865 q 380 968 415 930 q 307 898 343 930 q 237 842 271 865 l 155 842 l 155 860 q 195 905 172 880 q 241 959 218 931 q 284 1014 264 986 q 315 1064 304 1041 l 445 1064 q 476 1014 456 1041 q 518 959 496 986 q 565 905 541 931 q 605 860 588 880 l 605 842 z "},"ã":{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 474 843 q 420 855 447 843 q 368 881 393 867 q 318 908 342 896 q 273 920 294 920 q 226 902 242 920 q 200 842 210 884 l 130 842 q 144 916 133 882 q 173 972 155 949 q 216 1008 191 996 q 273 1021 241 1021 q 329 1009 301 1021 q 382 983 356 997 q 431 957 408 968 q 474 945 454 945 q 520 962 505 945 q 546 1022 536 980 l 617 1022 q 603 948 614 981 q 573 892 591 916 q 530 856 555 869 q 474 843 505 843 z "},"ä":{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 185 946 q 204 999 185 983 q 250 1015 223 1015 q 296 999 277 1015 q 316 946 316 982 q 296 893 316 910 q 250 876 277 876 q 204 893 223 876 q 185 946 185 910 m 439 946 q 458 999 439 983 q 505 1015 477 1015 q 529 1011 517 1015 q 550 999 541 1007 q 564 977 559 990 q 570 946 570 964 q 550 893 570 910 q 505 876 530 876 q 458 893 477 876 q 439 946 439 910 z "},"å":{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 531 989 q 519 927 531 954 q 487 880 507 899 q 437 851 466 861 q 376 842 409 842 q 314 851 342 842 q 266 880 286 861 q 235 926 246 899 q 224 987 224 953 q 235 1049 224 1022 q 266 1095 246 1076 q 314 1123 286 1114 q 376 1133 342 1133 q 437 1123 408 1133 q 486 1095 465 1114 q 519 1049 507 1076 q 531 989 531 1023 m 452 987 q 430 1044 452 1023 q 376 1064 409 1064 q 320 1044 342 1064 q 299 987 299 1023 q 318 931 299 951 q 376 911 338 911 q 430 931 409 911 q 452 987 452 951 z "},"æ":{ha:1157,x_min:64,x_max:1088,o:"m 64 208 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 503 729 447 758 q 589 637 559 701 q 680 727 623 695 q 806 758 736 758 q 924 734 871 758 q 1013 666 976 710 q 1068 561 1049 623 q 1088 425 1088 500 l 1088 349 l 632 349 q 685 156 635 218 q 835 94 735 94 q 897 98 868 94 q 952 107 926 101 q 1004 124 979 114 q 1054 146 1029 134 l 1054 36 q 1002 14 1027 23 q 950 -2 977 4 q 894 -11 923 -8 q 832 -14 865 -14 q 670 25 739 -14 q 559 142 602 64 q 511 76 536 105 q 453 27 485 47 q 381 -3 420 7 q 292 -14 342 -14 q 202 0 243 -14 q 130 40 160 13 q 81 110 99 68 q 64 208 64 151 m 192 207 q 225 115 192 144 q 311 86 258 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 m 803 656 q 685 603 728 656 q 635 449 642 550 l 954 449 q 945 533 954 495 q 918 599 937 572 q 871 641 899 626 q 803 656 842 656 z "},"ç":{ha:643,x_min:77,x_max:596,o:"m 403 -14 q 275 8 334 -14 q 171 76 215 29 q 102 194 127 122 q 77 368 77 267 q 102 549 77 475 q 173 670 128 623 q 279 737 218 716 q 408 758 339 758 q 512 747 461 758 q 596 718 562 735 l 559 614 q 525 627 544 621 q 486 638 506 633 q 446 647 465 644 q 408 650 426 650 q 253 582 302 650 q 204 370 204 513 q 253 160 204 227 q 403 94 302 94 q 502 107 458 94 q 583 136 547 119 l 583 26 q 505 -3 547 7 q 403 -14 463 -14 m 495 -195 q 447 -297 495 -260 q 298 -334 399 -334 q 268 -332 283 -334 q 242 -328 252 -330 l 242 -254 q 269 -257 252 -256 q 296 -258 286 -258 q 372 -244 345 -258 q 399 -196 399 -229 q 390 -168 399 -180 q 366 -147 381 -156 q 329 -132 350 -138 q 282 -119 307 -125 l 343 0 l 425 0 l 387 -78 q 429 -92 410 -83 q 464 -115 449 -101 q 487 -149 478 -129 q 495 -195 495 -168 z "},"è":{ha:743,x_min:77,x_max:673,o:"m 412 -14 q 276 12 338 -14 q 170 85 214 37 q 101 204 125 133 q 77 367 77 275 q 99 532 77 459 q 162 655 121 604 q 259 732 203 705 q 385 758 316 758 q 505 734 452 758 q 596 666 559 710 q 653 561 633 623 q 673 425 673 500 l 673 349 l 204 349 q 259 156 208 218 q 414 94 311 94 q 478 98 448 94 q 535 107 507 101 q 588 124 562 114 q 640 146 614 134 l 640 36 q 587 14 613 23 q 533 -2 561 4 q 476 -11 506 -8 q 412 -14 447 -14 m 382 656 q 259 603 304 656 q 207 449 214 550 l 541 449 q 531 533 541 495 q 503 599 522 572 q 454 641 484 626 q 382 656 424 656 m 460 842 l 378 842 q 327 889 355 861 q 273 947 299 917 q 225 1004 247 977 q 193 1050 204 1031 l 193 1064 l 342 1064 q 367 1014 353 1041 q 397 959 382 986 q 429 905 413 931 q 460 860 446 880 l 460 842 z "},"é":{ha:743,x_min:77,x_max:673,o:"m 412 -14 q 276 12 338 -14 q 170 85 214 37 q 101 204 125 133 q 77 367 77 275 q 99 532 77 459 q 162 655 121 604 q 259 732 203 705 q 385 758 316 758 q 505 734 452 758 q 596 666 559 710 q 653 561 633 623 q 673 425 673 500 l 673 349 l 204 349 q 259 156 208 218 q 414 94 311 94 q 478 98 448 94 q 535 107 507 101 q 588 124 562 114 q 640 146 614 134 l 640 36 q 587 14 613 23 q 533 -2 561 4 q 476 -11 506 -8 q 412 -14 447 -14 m 382 656 q 259 603 304 656 q 207 449 214 550 l 541 449 q 531 533 541 495 q 503 599 522 572 q 454 641 484 626 q 382 656 424 656 m 322 860 q 353 905 337 880 q 385 959 369 931 q 415 1014 401 986 q 440 1064 429 1041 l 589 1064 l 589 1050 q 556 1004 578 1031 q 509 947 535 977 q 455 889 483 917 q 404 842 428 861 l 322 842 l 322 860 z "},"ê":{ha:743,x_min:77,x_max:673,o:"m 412 -14 q 276 12 338 -14 q 170 85 214 37 q 101 204 125 133 q 77 367 77 275 q 99 532 77 459 q 162 655 121 604 q 259 732 203 705 q 385 758 316 758 q 505 734 452 758 q 596 666 559 710 q 653 561 633 623 q 673 425 673 500 l 673 349 l 204 349 q 259 156 208 218 q 414 94 311 94 q 478 98 448 94 q 535 107 507 101 q 588 124 562 114 q 640 146 614 134 l 640 36 q 587 14 613 23 q 533 -2 561 4 q 476 -11 506 -8 q 412 -14 447 -14 m 382 656 q 259 603 304 656 q 207 449 214 550 l 541 449 q 531 533 541 495 q 503 599 522 572 q 454 641 484 626 q 382 656 424 656 m 602 842 l 520 842 q 449 898 486 865 q 377 968 412 930 q 304 898 340 930 q 234 842 269 865 l 152 842 l 152 860 q 193 905 170 880 q 238 959 216 931 q 281 1014 261 986 q 312 1064 301 1041 l 442 1064 q 473 1014 453 1041 q 516 959 493 986 q 562 905 538 931 q 602 860 585 880 l 602 842 z "},"ë":{ha:743,x_min:77,x_max:673,o:"m 412 -14 q 276 12 338 -14 q 170 85 214 37 q 101 204 125 133 q 77 367 77 275 q 99 532 77 459 q 162 655 121 604 q 259 732 203 705 q 385 758 316 758 q 505 734 452 758 q 596 666 559 710 q 653 561 633 623 q 673 425 673 500 l 673 349 l 204 349 q 259 156 208 218 q 414 94 311 94 q 478 98 448 94 q 535 107 507 101 q 588 124 562 114 q 640 146 614 134 l 640 36 q 587 14 613 23 q 533 -2 561 4 q 476 -11 506 -8 q 412 -14 447 -14 m 382 656 q 259 603 304 656 q 207 449 214 550 l 541 449 q 531 533 541 495 q 503 599 522 572 q 454 641 484 626 q 382 656 424 656 m 182 946 q 201 999 182 983 q 248 1015 220 1015 q 294 999 274 1015 q 313 946 313 982 q 294 893 313 910 q 248 876 274 876 q 201 893 220 876 q 182 946 182 910 m 437 946 q 456 999 437 983 q 502 1015 475 1015 q 527 1011 515 1015 q 547 999 538 1007 q 562 977 556 990 q 567 946 567 964 q 547 893 567 910 q 502 876 528 876 q 456 893 475 876 q 437 946 437 910 z "},"ì":{ha:359,x_min:-23,x_max:243,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 m 243 842 l 162 842 q 111 889 138 861 q 57 947 83 917 q 9 1004 31 977 q -23 1050 -12 1031 l -23 1064 l 125 1064 q 151 1014 136 1041 q 181 959 165 986 q 213 905 197 931 q 243 860 229 880 l 243 842 z "},"í":{ha:359,x_min:118,x_max:392,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 m 125 860 q 156 905 140 880 q 188 959 172 931 q 218 1014 204 986 q 243 1064 233 1041 l 392 1064 l 392 1050 q 360 1004 381 1031 q 312 947 338 977 q 259 889 286 917 q 208 842 231 861 l 125 842 l 125 860 z "},"î":{ha:359,x_min:-45,x_max:405,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 m 405 842 l 323 842 q 252 898 288 865 q 180 968 215 930 q 107 898 143 930 q 37 842 71 865 l -45 842 l -45 860 q -5 905 -28 880 q 41 959 18 931 q 84 1014 64 986 q 115 1064 104 1041 l 245 1064 q 276 1014 256 1041 q 318 959 296 986 q 365 905 341 931 q 405 860 388 880 l 405 842 z "},"ï":{ha:359,x_min:-12,x_max:372,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 m -12 946 q 7 999 -12 983 q 53 1015 26 1015 q 99 999 79 1015 q 119 946 119 982 q 99 893 119 910 q 53 876 79 876 q 7 893 26 876 q -12 946 -12 910 m 242 946 q 261 999 242 983 q 307 1015 280 1015 q 332 1011 320 1015 q 353 999 344 1007 q 367 977 361 990 q 372 946 372 964 q 353 893 372 910 q 307 876 333 876 q 261 893 280 876 q 242 946 242 910 z "},"ð":{ha:802,x_min:75,x_max:725,o:"m 725 389 q 702 218 725 292 q 637 92 680 143 q 534 13 595 40 q 399 -14 474 -14 q 269 9 328 -14 q 166 74 210 31 q 99 180 123 117 q 75 323 75 243 q 97 467 75 404 q 158 572 118 529 q 255 636 198 614 q 383 659 312 659 q 505 638 452 659 q 586 578 557 618 l 591 581 q 530 726 570 661 q 428 846 489 791 l 254 742 l 204 819 l 351 908 q 295 946 324 927 q 235 982 267 964 l 282 1065 q 368 1019 326 1044 q 449 965 409 995 l 603 1059 l 653 982 l 521 903 q 604 806 566 859 q 668 689 642 753 q 710 551 695 626 q 725 389 725 476 m 597 357 q 586 431 597 395 q 551 495 574 467 q 490 540 527 523 q 401 557 452 557 q 312 541 349 557 q 252 496 275 526 q 217 421 228 466 q 205 319 205 377 q 217 225 205 268 q 252 153 228 183 q 313 105 276 122 q 401 89 350 89 q 552 156 506 89 q 597 357 597 224 z "},"ñ":{ha:818,x_min:118,x_max:707,o:"m 583 0 l 583 479 q 548 612 583 568 q 436 656 512 656 q 344 638 381 656 q 284 586 307 621 q 251 501 261 551 q 241 386 241 451 l 241 0 l 118 0 l 118 745 l 218 745 l 236 644 l 243 644 q 283 695 260 673 q 334 730 307 716 q 393 751 362 745 q 457 758 425 758 q 644 693 581 758 q 707 486 707 629 l 707 0 l 583 0 m 515 843 q 461 855 488 843 q 408 881 434 867 q 359 908 382 896 q 313 920 335 920 q 267 902 283 920 q 241 842 250 884 l 170 842 q 185 916 174 882 q 214 972 196 949 q 257 1008 232 996 q 313 1021 282 1021 q 369 1009 342 1021 q 422 983 397 997 q 472 957 448 968 q 515 945 495 945 q 561 962 545 945 q 587 1022 576 980 l 658 1022 q 643 948 654 981 q 614 892 632 916 q 571 856 596 869 q 515 843 546 843 z "},"ò":{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 m 506 842 l 425 842 q 373 889 401 861 q 319 947 345 917 q 272 1004 293 977 q 239 1050 250 1031 l 239 1064 l 388 1064 q 413 1014 399 1041 q 444 959 428 986 q 475 905 459 931 q 506 860 492 880 l 506 842 z "},"ó":{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 m 321 860 q 352 905 336 880 q 384 959 368 931 q 414 1014 399 986 q 439 1064 428 1041 l 587 1064 l 587 1050 q 555 1004 576 1031 q 508 947 534 977 q 454 889 481 917 q 403 842 427 861 l 321 842 l 321 860 z "},"ô":{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 m 622 842 l 540 842 q 469 898 505 865 q 397 968 432 930 q 324 898 360 930 q 254 842 288 865 l 172 842 l 172 860 q 212 905 189 880 q 258 959 235 931 q 301 1014 281 986 q 332 1064 321 1041 l 462 1064 q 493 1014 473 1041 q 535 959 513 986 q 582 905 558 931 q 622 860 605 880 l 622 842 z "},"õ":{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 m 499 843 q 445 855 472 843 q 393 881 418 867 q 343 908 367 896 q 298 920 319 920 q 251 902 267 920 q 225 842 235 884 l 155 842 q 169 916 158 882 q 198 972 180 949 q 241 1008 216 996 q 298 1021 267 1021 q 354 1009 326 1021 q 407 983 381 997 q 456 957 433 968 q 499 945 479 945 q 545 962 530 945 q 571 1022 561 980 l 642 1022 q 628 948 639 981 q 598 892 616 916 q 555 856 581 869 q 499 843 530 843 z "},"ö":{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 m 203 946 q 222 999 203 983 q 269 1015 241 1015 q 315 999 295 1015 q 334 946 334 982 q 315 893 334 910 q 269 876 295 876 q 222 893 241 876 q 203 946 203 910 m 458 946 q 477 999 458 983 q 523 1015 496 1015 q 548 1011 536 1015 q 568 999 559 1007 q 583 977 577 990 q 588 946 588 964 q 568 893 588 910 q 523 876 549 876 q 477 893 496 876 q 458 946 458 910 z "},"÷":{ha:765,x_min:69,x_max:696,o:"m 69 439 l 69 541 l 696 541 l 696 439 l 69 439 m 304 253 q 311 293 304 277 q 327 319 317 309 q 352 333 338 329 q 382 338 366 338 q 412 333 397 338 q 437 319 426 329 q 454 293 448 309 q 460 253 460 277 q 454 215 460 231 q 437 188 448 199 q 412 173 426 178 q 382 168 397 168 q 352 173 366 168 q 327 188 338 178 q 311 215 317 199 q 304 253 304 231 m 304 726 q 311 766 304 750 q 327 792 317 782 q 352 807 338 802 q 382 811 366 811 q 412 807 397 811 q 437 792 426 802 q 454 766 448 782 q 460 726 460 750 q 454 688 460 704 q 437 662 448 672 q 412 646 426 651 q 382 642 397 642 q 352 646 366 642 q 327 662 338 651 q 311 688 317 672 q 304 726 304 704 z "},"ø":{ha:802,x_min:78,x_max:726,o:"m 726 374 q 704 209 726 281 q 638 87 681 136 q 536 12 596 38 q 400 -14 475 -14 q 249 22 315 -14 l 203 -52 l 114 -1 l 168 87 q 102 209 125 136 q 78 374 78 281 q 101 537 78 466 q 165 658 123 609 q 268 733 208 707 q 404 758 329 758 q 485 748 447 758 q 557 720 524 739 l 603 793 l 692 743 l 637 656 q 703 535 680 606 q 726 374 726 465 m 205 374 q 212 272 205 317 q 233 193 218 228 l 503 632 q 457 650 483 644 q 401 656 432 656 q 251 586 297 656 q 205 374 205 515 m 599 374 q 572 549 599 481 l 302 111 q 348 94 323 100 q 403 89 372 89 q 553 160 507 89 q 599 374 599 232 z "},"ù":{ha:818,x_min:111,x_max:700,o:"m 600 0 l 582 100 l 575 100 q 535 49 558 71 q 484 14 511 28 q 425 -7 456 0 q 361 -14 393 -14 q 252 2 299 -14 q 174 51 205 18 q 127 136 143 84 q 111 258 111 187 l 111 745 l 235 745 l 235 265 q 271 133 235 177 q 382 89 307 89 q 474 106 437 89 q 534 158 511 124 q 567 243 557 193 q 576 358 576 293 l 576 745 l 700 745 l 700 0 l 600 0 m 470 842 l 389 842 q 337 889 365 861 q 283 947 309 917 q 236 1004 257 977 q 203 1050 214 1031 l 203 1064 l 352 1064 q 377 1014 363 1041 q 408 959 392 986 q 439 905 423 931 q 470 860 456 880 l 470 842 z "},"ú":{ha:818,x_min:111,x_max:700,o:"m 600 0 l 582 100 l 575 100 q 535 49 558 71 q 484 14 511 28 q 425 -7 456 0 q 361 -14 393 -14 q 252 2 299 -14 q 174 51 205 18 q 127 136 143 84 q 111 258 111 187 l 111 745 l 235 745 l 235 265 q 271 133 235 177 q 382 89 307 89 q 474 106 437 89 q 534 158 511 124 q 567 243 557 193 q 576 358 576 293 l 576 745 l 700 745 l 700 0 l 600 0 m 332 860 q 362 905 347 880 q 394 959 378 931 q 425 1014 410 986 q 450 1064 439 1041 l 598 1064 l 598 1050 q 566 1004 587 1031 q 518 947 545 977 q 465 889 492 917 q 414 842 437 861 l 332 842 l 332 860 z "},"û":{ha:818,x_min:111,x_max:700,o:"m 600 0 l 582 100 l 575 100 q 535 49 558 71 q 484 14 511 28 q 425 -7 456 0 q 361 -14 393 -14 q 252 2 299 -14 q 174 51 205 18 q 127 136 143 84 q 111 258 111 187 l 111 745 l 235 745 l 235 265 q 271 133 235 177 q 382 89 307 89 q 474 106 437 89 q 534 158 511 124 q 567 243 557 193 q 576 358 576 293 l 576 745 l 700 745 l 700 0 l 600 0 m 631 842 l 549 842 q 477 898 514 865 q 406 968 441 930 q 333 898 369 930 q 262 842 297 865 l 180 842 l 180 860 q 221 905 198 880 q 267 959 244 931 q 310 1014 290 986 q 340 1064 330 1041 l 471 1064 q 502 1014 481 1041 q 544 959 522 986 q 590 905 567 931 q 631 860 614 880 l 631 842 z "},"ü":{ha:818,x_min:111,x_max:700,o:"m 600 0 l 582 100 l 575 100 q 535 49 558 71 q 484 14 511 28 q 425 -7 456 0 q 361 -14 393 -14 q 252 2 299 -14 q 174 51 205 18 q 127 136 143 84 q 111 258 111 187 l 111 745 l 235 745 l 235 265 q 271 133 235 177 q 382 89 307 89 q 474 106 437 89 q 534 158 511 124 q 567 243 557 193 q 576 358 576 293 l 576 745 l 700 745 l 700 0 l 600 0 m 210 946 q 229 999 210 983 q 275 1015 248 1015 q 321 999 301 1015 q 340 946 340 982 q 321 893 340 910 q 275 876 301 876 q 229 893 248 876 q 210 946 210 910 m 464 946 q 483 999 464 983 q 529 1015 502 1015 q 554 1011 542 1015 q 574 999 566 1007 q 589 977 583 990 q 594 946 594 964 q 574 893 594 910 q 529 876 555 876 q 483 893 502 876 q 464 946 464 910 z "},"ý":{ha:679,x_min:7,x_max:672,o:"m 7 745 l 135 745 l 281 329 q 300 272 290 302 q 318 212 310 242 q 333 155 327 182 q 342 103 339 127 l 346 103 q 357 149 349 120 q 373 211 364 178 q 392 276 382 244 q 410 330 402 308 l 545 745 l 672 745 l 378 -97 q 337 -196 359 -152 q 286 -270 315 -239 q 217 -317 256 -300 q 123 -334 178 -334 q 62 -330 88 -334 q 18 -322 37 -326 l 18 -224 q 54 -230 33 -227 q 100 -232 76 -232 q 156 -224 132 -232 q 197 -201 180 -216 q 228 -165 215 -186 q 250 -115 240 -143 l 289 -7 l 7 745 m 276 860 q 307 905 291 880 q 339 959 323 931 q 369 1014 355 986 q 394 1064 383 1041 l 543 1064 l 543 1050 q 510 1004 532 1031 q 463 947 489 977 q 409 889 437 917 q 358 842 382 861 l 276 842 l 276 860 z "},"þ":{ha:814,x_min:118,x_max:737,o:"m 241 644 q 277 689 257 668 q 322 725 296 709 q 381 749 349 740 q 454 758 414 758 q 570 734 518 758 q 660 661 623 709 q 717 541 696 612 q 737 374 737 469 q 717 206 737 278 q 660 85 696 134 q 570 11 623 36 q 454 -14 518 -14 q 382 -5 414 -14 q 323 19 349 4 q 277 53 297 33 q 241 94 257 73 l 233 94 q 237 50 235 71 q 240 14 239 33 q 241 -16 241 -5 l 241 -334 l 118 -334 l 118 1055 l 241 1055 l 241 745 l 236 644 l 241 644 m 431 656 q 343 640 379 656 q 286 593 308 625 q 253 513 264 561 q 241 401 243 466 l 241 374 q 251 252 241 305 q 282 162 260 199 q 340 107 304 126 q 432 89 377 89 q 567 163 524 89 q 610 375 610 237 q 567 586 610 516 q 431 656 524 656 z "},"ÿ":{ha:679,x_min:7,x_max:672,o:"m 7 745 l 135 745 l 281 329 q 300 272 290 302 q 318 212 310 242 q 333 155 327 182 q 342 103 339 127 l 346 103 q 357 149 349 120 q 373 211 364 178 q 392 276 382 244 q 410 330 402 308 l 545 745 l 672 745 l 378 -97 q 337 -196 359 -152 q 286 -270 315 -239 q 217 -317 256 -300 q 123 -334 178 -334 q 62 -330 88 -334 q 18 -322 37 -326 l 18 -224 q 54 -230 33 -227 q 100 -232 76 -232 q 156 -224 132 -232 q 197 -201 180 -216 q 228 -165 215 -186 q 250 -115 240 -143 l 289 -7 l 7 745 m 155 946 q 174 999 155 983 q 220 1015 193 1015 q 266 999 246 1015 q 286 946 286 982 q 266 893 286 910 q 220 876 246 876 q 174 893 193 876 q 155 946 155 910 m 409 946 q 428 999 409 983 q 474 1015 447 1015 q 499 1011 487 1015 q 519 999 511 1007 q 534 977 528 990 q 539 946 539 964 q 519 893 539 910 q 474 876 500 876 q 428 893 447 876 q 409 946 409 910 z "},"ı":{ha:359,x_min:118,x_max:241,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 z "},"ˆ":{ha:802,x_min:175,x_max:625,o:"m 625 842 l 543 842 q 472 898 509 865 q 400 968 435 930 q 328 898 363 930 q 257 842 292 865 l 175 842 l 175 860 q 216 905 193 880 q 261 959 239 931 q 304 1014 284 986 q 335 1064 324 1041 l 465 1064 q 496 1014 476 1041 q 539 959 516 986 q 585 905 562 931 q 625 860 608 880 l 625 842 z "},"˚":{ha:802,x_min:248,x_max:554,o:"m 554 989 q 542 927 554 954 q 510 880 530 899 q 460 851 489 861 q 399 842 432 842 q 337 851 365 842 q 289 880 309 861 q 258 926 269 899 q 248 987 248 953 q 258 1049 248 1022 q 289 1095 269 1076 q 337 1123 309 1114 q 399 1133 365 1133 q 460 1123 431 1133 q 509 1095 488 1114 q 542 1049 530 1076 q 554 989 554 1023 m 475 987 q 453 1044 475 1023 q 399 1064 432 1064 q 343 1044 365 1064 q 322 987 322 1023 q 341 931 322 951 q 399 911 361 911 q 453 931 432 911 q 475 987 475 951 z "},"˜":{ha:802,x_min:175,x_max:663,o:"m 519 843 q 466 855 492 843 q 413 881 439 867 q 363 908 387 896 q 318 920 340 920 q 271 902 288 920 q 245 842 255 884 l 175 842 q 190 916 178 882 q 219 972 201 949 q 262 1008 237 996 q 318 1021 287 1021 q 374 1009 347 1021 q 427 983 401 997 q 476 957 453 968 q 519 945 500 945 q 566 962 550 945 q 591 1022 581 980 l 663 1022 q 648 948 659 981 q 619 892 637 916 q 576 856 601 869 q 519 843 551 843 z "},"–":{ha:694,x_min:56,x_max:639,o:"m 56 315 l 56 429 l 639 429 l 639 315 l 56 315 z "},"—":{ha:1389,x_min:56,x_max:1333,o:"m 56 315 l 56 429 l 1333 429 l 1333 315 l 56 315 z "},"‘":{ha:243,x_min:16,x_max:228,o:"m 25 652 l 16 667 q 38 745 25 703 q 67 828 52 786 q 100 912 83 870 q 135 991 118 954 l 228 991 q 208 905 218 950 q 189 816 198 861 q 173 730 180 772 q 160 652 165 688 l 25 652 z "},"’":{ha:243,x_min:16,x_max:228,o:"m 218 991 l 228 977 q 205 898 218 939 q 176 815 192 857 q 143 731 160 772 q 109 652 125 690 l 16 652 q 35 737 25 692 q 54 827 45 782 q 71 913 63 871 q 83 991 78 956 l 218 991 z "},"‚":{ha:347,x_min:43,x_max:256,o:"m 245 161 l 256 146 q 233 68 246 109 q 204 -16 220 26 q 171 -99 188 -58 q 136 -179 153 -141 l 43 -179 q 63 -93 53 -138 q 82 -4 73 -48 q 98 83 91 41 q 111 161 106 125 l 245 161 z "},"“":{ha:504,x_min:16,x_max:489,o:"m 286 652 l 277 667 q 299 745 286 703 q 328 828 313 786 q 361 912 344 870 q 396 991 379 954 l 489 991 q 469 905 479 950 q 450 816 459 861 q 434 730 441 772 q 421 652 427 688 l 286 652 m 25 652 l 16 667 q 38 745 25 703 q 67 828 52 786 q 100 912 83 870 q 135 991 118 954 l 228 991 q 208 905 218 950 q 189 816 198 861 q 173 730 180 772 q 160 652 165 688 l 25 652 z "},"”":{ha:504,x_min:16,x_max:489,o:"m 218 991 l 228 977 q 205 898 218 939 q 176 815 192 857 q 143 731 160 772 q 109 652 125 690 l 16 652 q 35 737 25 692 q 54 827 45 782 q 71 913 63 871 q 83 991 78 956 l 218 991 m 479 991 l 489 977 q 466 898 479 939 q 437 815 453 857 q 404 731 421 772 q 370 652 387 690 l 277 652 q 296 737 286 692 q 315 827 306 782 q 332 913 324 871 q 345 991 339 956 l 479 991 z "},"„":{ha:608,x_min:43,x_max:517,o:"m 245 161 l 256 146 q 233 68 246 109 q 204 -16 220 26 q 171 -99 188 -58 q 136 -179 153 -141 l 43 -179 q 63 -93 53 -138 q 82 -4 73 -48 q 98 83 91 41 q 111 161 106 125 l 245 161 m 507 161 l 517 146 q 494 68 507 109 q 465 -16 481 26 q 432 -99 449 -58 q 397 -179 414 -141 l 304 -179 q 324 -93 314 -138 q 343 -4 334 -48 q 359 83 352 41 q 372 161 367 125 l 507 161 z "},"•":{ha:522,x_min:102,x_max:421,o:"m 102 507 q 114 589 102 555 q 148 645 126 623 q 198 675 169 666 q 261 685 227 685 q 323 675 294 685 q 374 645 353 666 q 409 589 396 623 q 421 507 421 555 q 409 426 421 460 q 374 371 396 392 q 323 339 353 349 q 261 329 294 329 q 198 339 227 329 q 148 371 169 349 q 114 426 126 392 q 102 507 102 460 z "},"‹":{ha:400,x_min:56,x_max:345,o:"m 56 375 l 265 656 l 345 603 l 183 367 l 345 131 l 265 78 l 56 357 l 56 375 z "},"›":{ha:400,x_min:56,x_max:345,o:"m 345 357 l 135 78 l 56 131 l 216 367 l 56 603 l 135 656 l 345 375 l 345 357 z "},"⁄":{ha:180,x_min:-239,x_max:418,o:"m 418 991 l -132 0 l -239 0 l 311 991 l 418 991 z "}},familyName:"Droid Sans",ascender:1293,descender:-334,underlinePosition:-154,underlineThickness:102,boundingBox:{yMin:-492,xMin:-352,yMax:1907,xMax:1966},resolution:1e3,original_font_information:{format:0,copyright:"Digitized data copyright © 2007, Google Corporation.",fontFamily:"Droid Sans",fontSubfamily:"Regular",uniqueID:"Ascender - Droid Sans",fullName:"Droid Sans",version:"Version 1.00 build 113",postScriptName:"DroidSans",trademark:"Droid is a trademark of Google and may be registered in certain jurisdictions.",manufacturer:"Ascender Corporation",description:"Droid Sans is a humanist sans serif typeface designed for user interfaces and electronic communication.",manufacturerURL:"http://www.ascendercorp.com/",designerURL:"http://www.ascendercorp.com/typedesigners.html",licence:"Licensed under the Apache License, Version 2.0",licenceURL:"http://®www.apache.org/licenses/LICENSE-2.0",compatibleFullName:"Droid Sans"},cssFontWeight:"normal",cssFontStyle:"normal"},Hz=class{constructor(){this.fonts={},this.getFont=this.getFont.bind(this)}getFont(t){if(this.fonts[t])return this.fonts[t];if(!t)return Promise.resolve(Zz);switch(t){case"arrival":return this.fonts[t]=require("_bundle_loader")(require.resolve("./Arrival-4TTHZQOF.js")).then(t=>Yz(t)),this.fonts[t];case"chalet-parisnineteensixty":return this.fonts[t]=require("_bundle_loader")(require.resolve("./Chalet-LUA2Z236.js")).then(t=>Yz(t)),this.fonts[t];case"helvetica neue":return this.fonts[t]=require("_bundle_loader")(require.resolve("./HelveticaNeue-U3XEZDB5.js")).then(t=>Yz(t)),this.fonts[t];case"helvetiker":return this.fonts[t]=require("_bundle_loader")(require.resolve("./Helvetiker-WFBA7C7H.js")).then(t=>Yz(t)),this.fonts[t];case"lato":return this.fonts[t]=require("_bundle_loader")(require.resolve("./Lato-ZI244CQU.js")).then(t=>Yz(t)),this.fonts[t];case"myriad pro":return this.fonts[t]=require("_bundle_loader")(require.resolve("./MyriadPro-XF3IH7EM.js")).then(t=>Yz(t)),this.fonts[t];case"proxima nova medium":return this.fonts[t]=require("_bundle_loader")(require.resolve("./ProximaNova-YIIK4S37.js")).then(t=>Yz(t)),this.fonts[t];case"simon circular book":return this.fonts[t]=require("_bundle_loader")(require.resolve("./SimonCircular-NQ53YBIJ.js")).then(t=>Yz(t)),this.fonts[t];default:return Promise.resolve(Zz)}}};(0,r.a)(Hz,"FontLib");var Wz=Hz,Xz=new Wz,Yz=(0,r.a)(function(t){let e={},i={};Object.keys(Gz.glyphs).forEach(function(t){i[t]=Gz.glyphs[t]}),Object.keys(t.glyphs).forEach(function(e){i[e]=t.glyphs[e]}),Object.keys(Gz).forEach(function(t){e[t]=Gz[t]}),e.glyphs=i;let n=new zz(e);n._mSupportedCharacters=Object.keys(e.glyphs).join("");let r=n._mSupportedCharacters.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");return n._mInvalidCharacters=new RegExp("[^"+r+"]","g"),n},"createFont"),Zz=Yz(Gz);(0,n.a)();var Jz="x",Kz="y",Qz="z";function $z(t,e,i){t.computeBoundingBox();let n=t.boundingBox,o=Math.max(i.width,i.height)/1e3,a=Math.max(i.width*o,i.height*o),s={min:new ho(0,0,0),max:new ho(1,1,1).multiplyScalar(a)},l={};e.forEach(t=>{l[t.name]=t});let h,u,c=t.getAttribute("position"),p=t.getAttribute("normal"),d=t.getAttribute("uv");vy.assert(c.count==p.count),vy.assert(c.count==d.count),t.index?(vy.assert(t.index.count%3==0),h=t.index.count/3,u=(0,r.a)(function(e,i){return t.index.getX(3*e+i)},"meshIndex")):(vy.assert(c.count%3==0),h=c.count/3,u=(0,r.a)(function(t,e){return 3*t+e},"meshIndex"));let f=l.side||{},g=l.front||{},m=null!=f.repeat?f.repeat.u:1,v=null!=f.repeat?f.repeat.v:1,y=null!=f.offset?f.offset.u:1,_=null!=f.offset?f.offset.v:1,x=null!=f.rotation?f.rotation:0,b=f.useLocalScaling||!1,w=null!=g.repeat?g.repeat.u:1,E=null!=g.repeat?g.repeat.v:1,M=null!=g.offset?g.offset.u:1,S=null!=g.offset?g.offset.v:1,T=null!=g.rotation?g.rotation:0,C=g.useLocalScaling||!1;for(let r=0;r<h;++r){let t=p.getX(u(r,0))+p.getX(u(r,1))+p.getX(u(r,2)),e=p.getY(u(r,0))+p.getY(u(r,1))+p.getY(u(r,2)),i=p.getZ(u(r,0))+p.getZ(u(r,1))+p.getZ(u(r,2)),o=Math.abs(t),a=Math.abs(e),l=Math.abs(i);var A,P,I,L,O,N,q,R;o<=a&&o<=l?(A=Jz,P=a<=l?Kz:Qz):a<=o&&a<=l?(A=Kz,P=o<=l?Jz:Qz):(A=Qz,P=o<=a?Jz:Kz),A===Qz&&(A=P,P=Qz),P===Qz||A===Qz?(I=m,L=v,O=y,N=_,q=x,R=b?n:s):(I=w,L=E,O=M,N=S,q=T,R=C?n:s);let h=R.min,f=R.max,g=Math.abs(f[A]-h[A]),B=Math.abs(f[P]-h[P]),F=q*Math.PI/180||0,U=Math.cos(F),z=Math.sin(F);for(let n=0;n<3;n++){let t=c.getX(u(r,n)),e=c.getY(u(r,n)),i=c.getZ(u(r,n));var D,k;D=A===Jz?I*(t-h[A])/g+O:A===Kz?I*(e-h[A])/g+O:I*(i-h[A])/g+O,k=P===Jz?L*(t-h[P])/B+N:P===Kz?L*(e-h[P])/B+N:L*(i-h[P])/B+N;let o=(D-=.5)*U-(k-=.5)*z+.5,a=D*z+k*U+.5;d.setX(u(r,n),o),d.setY(u(r,n),a)}}t.uvsNeedUpdate=!0}(0,r.a)($z,"updateUVs");var tV=class t extends aF{constructor(e,i,n,o,a="SINGLE_GEOMETRY"){var s,l;super(),(0,r.f)(this,"polygon"),(0,r.f)(this,"mapClass"),(0,r.f)(this,"container"),(0,r.f)(this,"visible"),(0,r.f)(this,"mode"),(0,r.f)(this,"assetManager"),(0,r.f)(this,"imageVisible"),(0,r.f)(this,"labelVisible"),(0,r.f)(this,"boundingBox"),(0,r.f)(this,"polygonHeight"),(0,r.f)(this,"geometry"),(0,r.f)(this,"mesh"),(0,r.f)(this,"material"),(0,r.f)(this,"labelMesh"),(0,r.f)(this,"imageMesh"),this.mode=a,this.polygon=e,this.mapClass=i,this.container=n,this.assetManager=o;let h=!1!==e.geometry.visible,u=!0===(null==(s=e.image)?void 0:s.visible)&&(null!=e.image.url||null!=e.image.original),c=!0===(null==(l=e.label)?void 0:l.visible)&&null!=e.label.text;(h||u||c)&&t._setPolygonDefaults(e),this.visible=h,this.imageVisible=u,this.labelVisible=c,this.load=this.load.bind(this),u&&(this.imageMesh=new Cs(new cl(1,1)))}static getDefaultMaterial(){return t.defaultMaterial||(t.defaultMaterial=new Am({color:0})),t.defaultMaterial}static getWeightedCenter(t){let e=t.reduce((t,e)=>({x:t.x+e.x,y:t.y+e.y}),{x:0,y:0});return e.x/=t.length,e.y/=t.length,e}static getBoundingCentre(t){let e=1/0,i=1/0,n=-1/0,r=-1/0;return t.forEach(t=>{t.x>n&&(n=t.x),t.x<e&&(e=t.x),t.y>r&&(r=t.y),t.y<i&&(i=t.y)}),{x:(e+n)/2,y:(i+r)/2}}static _makeFromCoords(t,e,i){let n=new t;return n.moveTo(e[0].x-i.width/2,-e[0].y+i.height/2),e.slice(1).forEach(t=>n.lineTo(t.x-i.width/2,-t.y+i.height/2)),n.lineTo(e[0].x-i.width/2,-e[0].y+i.height/2),n}static _setPolygonDefaults(t){let e={visible:!0,position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:5},bevel:{size:0,thickness:0,segments:1},offset:0};return t.layer||(t.layer="Polygon"),t.geometry=(0,Dz.default)(t.geometry,e),t.geometry.bevel=(0,Dz.default)(t.geometry.bevel,e.bevel),t.image&&(t.image.position=(0,Dz.default)(t.image.position,e.position),t.image.rotation=(0,Dz.default)(t.image.rotation,e.rotation),t.image.scale=(0,Dz.default)(t.image.scale,e.scale)),t.label&&(t.label.position=(0,Dz.default)(t.label.position,e.position),t.label.rotation=(0,Dz.default)(t.label.rotation,e.rotation),t.label.scale=(0,Dz.default)(t.label.scale,e.scale),t.label.color=t.label.color||"#000000",t.label.fontSize=t.label.fontSize||20),t}getBoundingBox(){if(this.boundingBox)return this.boundingBox;let t=1/0,e=1/0,i=-1/0,n=-1/0,r=-this.mapClass.width/2,o=this.mapClass.height/2;return this.polygon.vertexes.forEach(a=>{a.x+r>i&&(i=a.x+r),a.x+r<t&&(t=a.x+r),-a.y+o>n&&(n=-a.y+o),-a.y+o<e&&(e=-a.y+o)}),this.boundingBox={min:{x:t,y:e,z:0},max:{x:i,y:n,z:0}},this.boundingBox}async load(){var e;let i=this.polygon,n=this.mapClass;if(this.visible){let r=i.vertexes,o=Math.max(n.width,n.height)/1e3;(this.imageVisible||i.geometry.offset)&&(r=t._clip(r,0),r=t._clip(r,i.geometry.offset),i.vertexes=r);let a,s=t._makeFromCoords(Dg,r,n);i.holes&&(s.holes=i.holes.map(e=>t._makeFromCoords(Og,e,n))),a=i.geometry.bevel?{bevelEnabled:!0,depth:i.geometry.scale.z*o,bevelThickness:i.geometry.bevel.thickness*i.geometry.scale.z*o,bevelSize:i.geometry.bevel.size*o,bevelSegments:i.geometry.bevel.segments||1}:{bevelEnabled:!1,depth:i.geometry.scale.z*o},this.polygonHeight=i.geometry.scale.z*Math.max(this.mapClass.width,this.mapClass.height)/1e3;let l=Array.isArray(i.textures)&&i.textures.filter(t=>t.image&&Object.keys(t.image).length).length,h=t._normalizeColor(i.material.color),u=null!=(e=i.material.opacity)?e:1;if(this.geometry=new xm(s,a),l&&Array.isArray(i.textures)){let t,e,r=i.textures.find(t=>"front"===t.name),o=i.textures.find(t=>"side"===t.name),a=o&&o.useFrontFaceImage,s=r&&r.image&&(r.image.url||r.image.original),l=o&&o.image&&(o.image.url||o.image.original);$z(this.geometry,i.textures,n),s&&((t=await this.assetManager.loadImage(s)).mapping=pi,t.wrapS=yi,t.wrapT=yi,t.anisotropy=16),!a&&l?((e=await this.assetManager.loadImage(l)).mapping=pi,e.wrapS=yi,e.wrapT=yi,e.anisotropy=16):t&&(e=t);let c={color:h,transparent:!0,opacity:u,side:u<1?Te:Me};this.material=e===t?new Am({...c,map:t}):[new Am({...c,map:t}),new Am({...c,map:e})]}else this.material=t._getMaterial(i.material.color,u,i.map);this.mesh=new Cs(this.geometry,"MULTI_GEOMETRY"===this.mode?this.material:t.hoverMeshMaterial),this.mesh.name=i.id,Array.isArray(this.mesh.material)||(this.mesh.material.needsUpdate=!0),"MULTI_GEOMETRY"===this.mode?(this.mesh.translateZ(i.geometry.position.z*o),this.container.add(this.mesh)):(this.geometry.translate(0,0,i.geometry.position.z*o),this.mesh.renderOrder=1)}return this.imageVisible||this.labelVisible?(this.imageVisible&&this._addImage(i,n),this.labelVisible&&this._addLabel(i,n),this):this}_addLabel(e,i){var n;if(null==(null==(n=null==e?void 0:e.label)?void 0:n.text))return;let r=Math.max(i.width,i.height)/1e3,o=t.getWeightedCenter(e.vertexes),a=e.label.position,s=e.label.rotation.z,l=e.label.text.split("\n");Xz.getFont(e.label.fontFamily).then(n=>{if(!e.label)return;let h={font:n,size:e.label.fontSize*r,height:t.overlayHeight,bevelEnabled:!1,curveSegments:4,align:e.label.align||"left"},u=0,c=l.reverse().map((t,e)=>(t.length>l[u].length&&(u=e),new Rz(t,h))),p=c[u],d=new Cs(p),f=(new fo).setFromObject(d).getSize(new ho).x,g=t._getMaterial(e.label.color,void 0,e.map),m=0,v=nF(l.map((t,e)=>{let i,n=c[e],r=new Cs(n,g),o=(new fo).setFromObject(r).getSize(new ho);return i="left"===h.align?0:"right"===h.align?f-o.x:(f-o.x)/2,r.position.set(i,m,0),r.geometry.translate(i,m,0),m+=1.25*h.size,r.geometry})),y=new Cs(v,g);v.computeBoundingBox();let _=v.boundingBox,x=_.max.x-_.min.x,b=_.max.y-_.min.y,w=e.geometry.position.z+e.geometry.scale.z;y.translateX(o.x-i.width/2+a.x-x/2),y.translateY(-o.y+i.height/2+a.y-b/2),y.rotation.set(0,0,s*Math.PI/180),y.translateZ((t.overlayHeight+w)*r),this.labelMesh=y,this.container.add(y)})}_addImage(e,i){var n,r;if(null==(null==e?void 0:e.image))return;let o=e.image.url||e.image.original;o instanceof Blob&&(o=URL.createObjectURL(o));let a,s=new Am({transparent:!0,depthWrite:!1,side:Te});s.userData={originalOpacity:null!=(n=s.opacity)?n:1,originalTransparency:null!=(r=s.transparent)&&r},s.alphaTest=.1,this.imageMesh.material=s,this.imageMesh.renderOrder=uF.POLYGON_IMAGE,this.imageMesh.name=e.id+"_image",this.container.add(this.imageMesh),this.imageMesh.visible=!1,t.imagesLoadingInProgress.has(o)?a=t.imagesLoadingInProgress.get(o):(a=this.assetManager.loadImage(o).then(t=>(t.anisotropy=16,[t])),t.imagesLoadingInProgress.set(o,a)),a.then(([n])=>{if(null==e.image)return;s.map=n,s.needsUpdate=!0;let r,a=this.getBoundingBox(),l=Math.max(i.width,i.height)/1e3,h=e.vertexes;r=e.image._isAbsolutelyPositioned?{x:e.image.position.x,y:e.image.position.y}:e.image.fitToBounds?t.getBoundingCentre(h):t.getWeightedCenter(h);let u=e.image.fitToBounds||e.image._isAbsolutelyPositioned?0:e.image.position.x,c=e.image.fitToBounds||e.image._isAbsolutelyPositioned?0:e.image.position.y,p=e.geometry.position.z+e.geometry.scale.z;e.image.position&&(this.imageMesh.position.x=r.x-i.width/2+u,this.imageMesh.position.y=-r.y+i.height/2+c,this.imageMesh.translateZ((p+e.image.position.z)*l)),e.image.rotation&&this.imageMesh.rotation.set(e.image.rotation.x*Math.PI/180,e.image.rotation.y*Math.PI/180,e.image.rotation.z*Math.PI/180);let d=n.image.width,f=n.image.height;"string"==typeof o&&null!=URL&&"function"==typeof URL.revokeObjectURL&&URL.revokeObjectURL(o);let g,m={x:e.image.viewBox.width,y:e.image.viewBox.height};g=!1===e.image.useLocalScaling?l:Math.min(a.max.x-a.min.x,a.max.y-a.min.y)/Math.max(m.x,m.y),e.image.fitToBounds?this.imageMesh.scale.set(a.max.x-a.min.x,a.max.y-a.min.y,1):e.image.scale&&this.imageMesh.scale.set(e.image.scale.x*g*e.image.viewBox.width,e.image.scale.y*g*e.image.viewBox.height,1),this.imageMesh.translateZ(t.overlayHeight*l),n.repeat=new Tr(e.image.viewBox.width/d,e.image.viewBox.height/f),n.offset=new Tr(0,(n.image.height-e.image.viewBox.height)/n.image.height),n.premultiplyAlpha=!0,s.blending=Oe,this.publish("texture-loaded",n)})}static _normalizeColor(t){let e=t.replace(/#/,"");return 3===e.length&&(e="".concat(e[0]).concat(e[0]).concat(e[1]).concat(e[1]).concat(e[2]).concat(e[2])),parseInt(e,16)}static _getMaterial(e,i,n){let r,o=t._normalizeColor(e),a=i<1?o+"_"+i:o;if(t.materials[n]=t.materials[n]||{},t.materials[n][a])r=t.materials[n][a];else{let e={color:o,side:i<1?Te:Me};i<1&&(e.transparent=!0,e.opacity=i),t.materials[n][a]=new Am(e),r=t.materials[n][a]}return r}static _clip(e,i){i/=2;let n=t.scale,r=e.map(t=>({X:t.x*n,Y:t.y*n}));for(let t=8;0!==t;t--){let t=new Fz.ClipperOffset;t.AddPath(r,Fz.JoinType.jtMiter,Fz.EndType.etClosedPolygon);let e=new Fz.Paths;try{if(t.Execute(e,i*n),e.length)return e[0].map(t=>({x:t.X/n,y:t.Y/n}));i/=2}catch{i/=2}}return r}};(0,r.a)(tV,"Element"),(0,r.f)(tV,"defaultMaterial"),(0,r.f)(tV,"hoverMeshMaterial",new Am({color:"#333"})),(0,r.f)(tV,"materials",{}),(0,r.f)(tV,"defaultExtrudeSettings",{depth:10,bevelEnabled:!1}),(0,r.f)(tV,"scale",100),(0,r.f)(tV,"overlayHeight",.15),(0,r.f)(tV,"imagesLoadingInProgress",new Map);var eV=tV,iV=eV;(0,n.a)(),(0,n.a)();var nV=2*Math.PI,rV=Math.PI/2,oV=1.5*Math.PI,aV=(0,r.a)(function(t){let e=t.image,i=t.rotation||0,n=e.position.clone(),o=e.rotation.z,a=i,s=(0,r.a)(function(){let t=e.geometry;t.boundingBox||t.computeBoundingBox(),i=(i+Math.PI)%nV,e.rotation.z=e.rotation.z+Math.PI,e.translateX(-2*(t.boundingBox.min.x+(t.boundingBox.max.x-t.boundingBox.min.x)/2)),e.translateY(-2*(t.boundingBox.min.y+(t.boundingBox.max.y-t.boundingBox.min.y)/2))},"flip");this.flipIfNeeded=function(t){let e=(i-t+nV)%nV;(e>rV&&e<oV||e<-rV&&e>-oV)&&s()},this.reset=function(){e.position.x=n.x,e.position.y=n.y,e.rotation.z=o,i=a}},"FlippableImage"),sV=aV;function lV(t,e){var i,n;let r=(null==(i=e.referenceMap)?void 0:i.scale)||1,o=t.scale||1,a=(null==(n=e.referenceMap)?void 0:n.getNorth())||0,s=t.getNorth()||0,{x:l,y:h}=t.georeference[0].target,{x:u,y:c}=t.georeference[2].target,p=new py(l,h),d=new py(u,c),{lat:f,lon:g}=p.midpointTo(d),m=e.referenceMap.createCoordinate(f,g),{x:v,y:y}=e.convertTo3DMapPosition(m),_=o/r;return{position:[v,y,0],scale:[_,_,_],rotation:[0,0,s-a]}}(0,n.a)(),(0,n.a)(),(0,r.a)(lV,"determineMapPositionAndRotation");var hV=class{constructor(t,e,i,n,o){(0,r.f)(this,"core"),(0,r.f)(this,"layerGroup"),(0,r.f)(this,"mapGroup"),(0,r.f)(this,"defaultMap"),(0,r.f)(this,"activeMap"),(0,r.f)(this,"visibleMap"),(0,r.f)(this,"startingMap"),(0,r.f)(this,"baseMap"),(0,r.f)(this,"object",new ya),(0,r.f)(this,"mapObjects",[]),(0,r.f)(this,"loading",!1),(0,r.f)(this,"activeMapOpacity",-1),(0,r.f)(this,"buildingOpacity",-1),(0,r.f)(this,"animating",!1),(0,r.f)(this,"processedMapObjects",new Set),(0,r.f)(this,"state","out-of-view"),this.core=t,this.mapGroup=e,this.layerGroup=i,this.startingMap=n,this.defaultMap=n,this.activeMap=n,this.baseMap=o,this.mapObjects=e.maps.map(e=>t.mapObjects.get(e.id)),i.mergedObjectsGroup.children.forEach(t=>{t.userData.building=this}),this.core.on(7,()=>{this.determineMapVisibility()})}determineMapVisibility(){for(let t of this.mapObjects)this.core.currentMap===t.mapClass.id?t.visible||t.onVisible():t.visible&&t.onInvisible()}setActiveMapOpacity(t,e){if(this.activeMapOpacity!==t){if("number"==typeof e)return void this.tweenActiveMapOpacity(t,e);this.animating||(this.activeMapOpacity=t,null!=this.visibleMap&&this.activeMapObject.layerGroups.get("default").setOpacity(t))}}tweenActiveMapOpacity(t,e=300){this.animating=!0,Hy({from:{opacity:this.activeMapOpacity},to:{opacity:t},duration:e,onUpdate:({opacity:t})=>{this.activeMapOpacity=t,null!=this.visibleMap&&this.activeMapObject.layerGroups.get("default").setOpacity(t),this.core.tryRendering()},onComplete:()=>{this.animating=!1}}).start(this.core)}setBuildingOutlineOpacity(t){this.buildingOpacity!==t&&(this.buildingOpacity=t,this.layerGroup.setOpacity(t))}get activeMapObject(){return this.core.mapObjects.get(this.activeMap.id)}get defaultMapObject(){return this.core.mapObjects.get(this.defaultMap.id)}get baseMapObject(){return this.core.mapObjects.get(this.baseMap.id)}onInView(){"in-view"!==this.state&&(this.visibleMap!==this.activeMap&&this.setMap(this.activeMap),this.state="in-view")}onOutOfView(){"out-of-view"!==this.state&&(this.visibleMap!==this.defaultMap&&(this.activeMap=this.defaultMap),this.state="out-of-view")}async setMap(t){this.loading=!0,this.visibleMap=void 0;let e=this.core.mapObjects.get(t.id);try{if(await e.load(),!this.processedMapObjects.has(e)){let{position:i,rotation:n,scale:r}=lV(t,this.core);e.object.position.set(...i),e.object.rotation.set(...n),e.object.scale.set(...r),e.box=(new fo).setFromObject(e.object),e.object.name=t.id,this.processedMapObjects.add(e)}}catch(t){vy.error(t)}this.object.children.length>0&&this.object.children.forEach(t=>{this.object.remove(t)}),-1!==this.activeMapOpacity&&e.layerGroups.get("default").setOpacity(this.activeMapOpacity),e.layerGroups.get("default").isVisible=!0,this.object.add(e.object),this.visibleMap=t,this.activeMap=t,this.determineMapVisibility(),this.loading=!1,this.core.tryRendering()}};(0,r.a)(hV,"Building");var uV=hV,cV=uV;(0,n.a)();var pV=15.8,dV=17,fV=new sl,gV=!1,mV=class{constructor(t,e){var i;(0,r.f)(this,"core"),(0,r.f)(this,"buildings",[]),(0,r.f)(this,"object"),(0,r.f)(this,"panBounds"),(0,r.f)(this,"loaded",!1),(0,r.f)(this,"baseMapObject"),(0,r.f)(this,"raycasters"),(0,r.f)(this,"baseMap"),(0,r.f)(this,"options"),(0,r.f)(this,"resize",(0,r.a)(()=>{this.buildRaycasters()},"resize")),(0,r.f)(this,"currentMap"),(0,r.f)(this,"buildingVisiblityMap",new Map),(0,r.f)(this,"buildingsByPolygonId",new Map),this.core=t,this.baseMap=e,this.baseMapObject=this.core.mapObjects.get(this.baseMap.id),this.currentMap=this.baseMap,this.options={indoorsFullyVisibleZoomLevel:dV,buildingFullyVisibleZoomLevel:pV,setMapAtZoomLevel:pV,preloadDefaultMaps:!1,baseMap:this.baseMap,...null==(i=this.core.options)?void 0:i.dynamicFocus},this.core.on(7,()=>{this.core.currentMap===this.baseMap.id?this.baseMapObject.onVisible():this.baseMapObject.onInvisible()}),this.buildRaycasters()}buildRaycasters(){let t=new Tr(this.core.canvasWidth/2,this.core.canvasHeight/2),e=new Tr(t.x/1.2,t.y/1.2),i=new Tr(t.x+(t.x-e.x),e.y),n=new Tr(e.x,t.y+(t.y-e.y)),r=new Tr(i.x,n.y);this.raycasters=[t,e,i,n,r].map((t,e)=>{if(gV){let e=document.createElement("div");e.style.position="absolute",e.style.top=t.y+"px",e.style.left=t.x+"px",e.style.width="10px",e.style.height="10px",e.style.backgroundColor="red",document.body.append(e)}let i=t.x/this.core.canvasWidth*2-1,n=-t.y/this.core.canvasHeight*2+1,r=new ho(i,n,0),o=new Yv;return o.setFromCamera(r,this.core.cameraObject),[o,r,0===e?10:1]})}updateRaycasters(){for(let[t,e]of this.raycasters)t.setFromCamera(e,this.core.cameraObject)}expandToBaseMapBounds(){this.baseMapObject.object.updateMatrixWorld();let t=this.baseMapObject.getMapScale()*this.baseMapObject.object.scale.x,e=yz(this.baseMapObject,this.core.controls.panBounds),i=this.core.loadOptions&&this.core.loadOptions.zoomOverrides&&this.core.loadOptions.zoomOverrides.zoomMultiplier||gz;this.core.controls.zoomFactor=t/i,e.center=new ho,this.panBounds=e,this.core.controls.panBounds=e;let{min:n,max:r}=e,o=[new ho(n.x,n.y,n.z),new ho(n.x,r.y,n.z),new ho(r.x,n.y,n.z),new ho(r.x,r.y,n.z),new ho(n.x,n.y,r.z),new ho(n.x,r.y,r.z),new ho(r.x,n.y,r.z),new ho(r.x,r.y,r.z)],{zoom:a}=this.core.getCameraFrameForPoints(o,1,1,this.core.cachedPadding,!1);this.core.controls.setMulti(e.center,a,fz,dz)}async load(){this.core.publish(6),await this.baseMapObject.load(),this.object=this.baseMapObject.object;let{position:t,rotation:e,scale:i}=lV(this.baseMap,this.core);this.baseMapObject.object.position.set(...t),this.baseMapObject.object.rotation.set(...e),this.baseMapObject.object.scale.set(...i),this.baseMapObject.box=(new fo).setFromObject(this.baseMapObject.object),this.baseMapObject.object.name=this.baseMap.id;let n=Array.from(this.baseMapObject.layerGroups).filter(([t])=>t.includes("building"));this.buildings=await this.createBuildings(n),this.buildings.forEach(t=>{this.object.add(t.object)}),this.expandToBaseMapBounds(),this.baseMapObject.onVisible(),this.core.publish(7),this.loaded=!0}setMap(t,e=!1){if(this.currentMap===t)return Promise.resolve();if(this.core.publish(6),t===this.baseMap)return this.currentMap=this.baseMap,e&&(this.core.setMapReason="dynamic-focus-user-interaction"),this.core.publish(7),Promise.resolve();let i=t.mapGroup;return this.buildings.find(t=>t.mapGroup.id===i.id).setMap(t).then(()=>{this.currentMap=t,e&&(this.core.setMapReason="dynamic-focus-user-interaction"),this.core.publish(7)})}get buildingsInView(){return Array.from(this.buildingVisiblityMap.entries()).filter(([t,e])=>e).map(([t,e])=>t)}determineBuildingsInView(){if(this.core.controls.getZoomLevel()<this.options.buildingFullyVisibleZoomLevel)for(let e of this.buildings)this.buildingVisiblityMap.set(e,!1);let t=this.core.cameraObject;fV.setFromProjectionMatrix((new Go).multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse));for(let e of this.buildings)for(let t of e.layerGroup.mergedObjectsGroup.children)fV.intersectsObject(t)?this.buildingVisiblityMap.set(e,!0):this.buildingVisiblityMap.set(e,!1);return this.buildingsInView}determineCurrentMap(){if(this.core.controls.getZoomLevel()<this.options.setMapAtZoomLevel)return this.baseMap;this.updateRaycasters();let t=new Map,e=Array.from(this.buildingVisiblityMap.keys()).flatMap(t=>t.layerGroup.mergedObjectsGroup.children),i=-1/0,n=null;for(let[r,o,a]of this.raycasters)r.intersectObjects(e).forEach(e=>{let r=e.object.userData.building;t.has(r)||t.set(r,0);let o=t.get(r)+a;t.set(r,o),o>i&&(n=r,i=o)});return null!=n?n.activeMap:this.currentMap}setOpacities(t=[],e){let i=this.core.controls.getZoomLevel();if(i<this.options.buildingFullyVisibleZoomLevel)return void this.buildings.forEach(t=>{t.onOutOfView(),t.setActiveMapOpacity(0),t.setBuildingOutlineOpacity(1)});let n=Yy(i,this.options.buildingFullyVisibleZoomLevel,this.options.indoorsFullyVisibleZoomLevel,0,1,Xy),r=Yy(n,0,1,0,.6,Xy),o=Yy(n,0,1,1,0,Xy);this.buildings.forEach(i=>{t.includes(i)?(i.onInView(),i.setBuildingOutlineOpacity(o),i.activeMap===e&&n>0?i.setActiveMapOpacity(n,300):i.setActiveMapOpacity(r,300)):(i.onOutOfView(),i.setActiveMapOpacity(0),i.setBuildingOutlineOpacity(1))})}async createBuildings(t){let e=[];return t.forEach(([t,i])=>{let n=this.core.venue.getCollectionItemById("maps",i.userData.toMapId),r=this.core.venue.getCollectionItemById("mapGroups",i.userData.mapGroupId),o=new cV(this.core,r,i,n,this.baseMap);e.push(o),this.buildingVisiblityMap.set(o,!1)}),this.options.preloadDefaultMaps&&await Promise.all(e.map(t=>t.setMap(t.startingMap))),e}};(0,r.a)(mV,"DynamicFocusScene");var vV=mV,yV=vV;(0,n.a)();var _V=(0,r.e)(o()),xV="attribute float pathDistance;\nattribute vec3 pathNormal;\nattribute vec3 pathTangent;\n\nuniform vec2 uvScale;\nuniform float vertexes;\nuniform float complete;\nuniform float nearRadius;\nuniform float farRadius;\nuniform float nearZoom;\nuniform float farZoom;\nuniform float pulse;\nuniform float pulseLength;\nuniform bool pulseBulge;\nuniform bool pathIsVertical;\nuniform bool displayArrowsOnPath;\nuniform vec2 cameraParameters;\nuniform float flattenFactor;\n\nvarying float zoomLevel;\nvarying float radius;\nvarying vec2 fragTexcoord;\nvarying float fragTopTextureU;\nvarying float fragPathDistance;\n\n// Map the x value from the range [xMin, xMax] to the range [yMin, yMax] using\n// linear interpolation/extrapolation.\n//\n// This performs a pure linear mapping `y = mx + b` where\n// `m = (yMax - yMin) / (xMax - xMin)`,\n// `b = -xMin * (yMax - yMin) / (xMax - xMin) + yMin`.\nfloat remap(float x, float xMin, float xMax, float yMin, float yMax) {\n\treturn (x - xMin) / (xMax - xMin) * (yMax - yMin) + yMin;\n}\n\n// Map the x value from [xMin, xMax] to the range [yMin, yMax] using linear\n// interpolation, clamping result values outside [yMin, yMax].\nfloat clampRemap(float x, float xMin, float xMax, float yMin, float yMax) {\n\treturn clamp(remap(x, xMin, xMax, yMin, yMax), yMin, yMax);\n}\n\nvoid main() {\n\tfragPathDistance = pathDistance;\n\n\t// We can get an origin point for the cross-section of the path by\n\t// subtracting the surface normal times the radius, since the surface normal\n\t// points strictly away from the centre.\n\tvec3 origin = position - nearRadius * normal;\n\n\t// Inflate the path along its surface normal to increase its radius from\n\t// `nearRadius` to `farRadius` when the camera is at `farZoom`.\n\tvec3 adjustedPosition = position;\n\tzoomLevel = clampRemap(cameraParameters.x, nearZoom, farZoom, 0.0, 1.0);\n\tadjustedPosition += normal * (farRadius - nearRadius) * zoomLevel;\n\n\t// Determine how far the path extends \"up\" or \"down\" in the direction of the\n\t// path normal.\n\tfloat height = dot(adjustedPosition - origin, pathNormal);\n\n\t// Flatten the bottom half of the path entirely so that it's flat\n\t// against the floor. This makes the path look nicer when it's\n\t// semitransparent behind opaque geometry, so you don't see it\n\t// peeking through.\n\tfloat desiredHeight = max(height, 0.0);\n\n\tdesiredHeight = desiredHeight * flattenFactor;\n\n\tfloat flattenMagnitude = height - desiredHeight;\n\tadjustedPosition = adjustedPosition - pathNormal * flattenMagnitude;\n\n\t// Transform the vertices into NDC.\n\tvec4 mvPosition = modelViewMatrix * vec4(adjustedPosition, 1.0);\n\tgl_Position = projectionMatrix * mvPosition;\n\n\tfragTexcoord = uv;\n\n\t// Compute a texture coordinate for mapping the arrow texture to the path.\n\t// We don't want to use the u-value that Three.js provides, because the\n\t// path may end up twisting arbitrarily -- but we want the arrow texture to\n\t// always be on the top of the path.\n\tvec3 bitangent = cross(normal, pathTangent);\n\tfragTopTextureU = -dot(bitangent, pathNormal) * 0.5 + 0.5;\n\n\tradius = mix(nearRadius, farRadius, zoomLevel);\n}\n",bV='#define ARROW_FADING_POINT 0.15\n\nuniform float complete;\nuniform float nearRadius;\nuniform float farRadius;\nuniform vec2 resolution;\nuniform vec2 cameraParameters;\nuniform vec3 color;\nuniform float pathLength;\nuniform bool showPulse;\nuniform vec3 pulseColor;\nuniform float pulse;\nuniform float pulseLength;\nuniform bool pathIsVertical;\nuniform bool displayArrowsOnPath;\nuniform float arrowAnimationTimer;\nuniform sampler2D arrowTexture;\n\nvarying float zoomLevel;\nvarying float radius;\nvarying vec2 fragTexcoord;\nvarying float fragTopTextureU;\nvarying float fragPathDistance;\n\n// How long the arrow should be, as a factor of `pathRadius`. Since we\'ve\n// mostly flattened the top of the path, values near 2.0 (the diameter)\n// will probably look best.\nconst float arrowLength = 2.0;\n\n// How much of a relative margin the arrow texture should have inside the\n// area laid out for it. Useful to pull the arrow away from the edges of the\n// path, which slope down.\nconst float arrowMargin = 0.1;\n\n// How many arrow-lengths of space should be between arrows on a short path.\nconst float arrowSpacingOnShortPath = 6.0;\n\n// How many arrow-lengths of space should be between arrows on a long path.\nconst float arrowSpacingOnLongPath = 7.5;\n\n// How long a path must be to be considered "long", as a factor of\n// the path radius.\nconst float longPathLength = 200.;\n\n// How long a path must be to be considered "short", as a factor of the\n// path radius.\nconst float shortPathLength = 75.;\n\n// How much of the path\'s length the fade-in should comprise when going from\n// zero opacity to full opacity.\nconst float completeLength = 0.1;\n\n// Map the x value from the range [xMin, xMax] to the range [yMin, yMax] using\n// linear interpolation/extrapolation.\n//\n// This performs a pure linear mapping `y = mx + b` where\n// `m = (yMax - yMin) / (xMax - xMin)`,\n// `b = -xMin * (yMax - yMin) / (xMax - xMin) + yMin`.\nfloat remap(float x, float xMin, float xMax, float yMin, float yMax) {\n\treturn (x - xMin) / (xMax - xMin) * (yMax - yMin) + yMin;\n}\n\n// Map the x value from [xMin, xMax] to the range [yMin, yMax] using linear\n// interpolation, clamping result values outside [yMin, yMax].\nfloat clampRemap(float x, float xMin, float xMax, float yMin, float yMax) {\n\treturn clamp(remap(x, xMin, xMax, yMin, yMax), yMin, yMax);\n}\n\nvoid main(void) {\n\t// Compute the opacity of the path based on the distance from the current\n\t// fragment to the `complete` value as it varies from 0.0 to 1.0.\n\t// Fragments that are at the `complete` value or past it will be fully\n\t// transparent, while fragments that are at `complete - completeLength`\n\t// or before it will be fully opaque. However, we adjust the `complete`\n\t// value here so that it overshoots by one full `completeLength`, so that\n\t// the entire path will be opaque when the `complete` value is at 1.0.\n\tfloat completeLocation = complete * (1.0 + completeLength);\n\tfloat completeAmount = clampRemap(\n\t\tfragPathDistance,\n\t\tcompleteLocation - completeLength,\n\t\tcompleteLocation,\n\t\t0.0,\n\t\t1.0\n\t);\n\tfloat opacity = 1.0 - smoothstep(0.0, 1.0, completeAmount);\n\n\t// 2020/01/09 Terence Dickson\n\t// When we render the background and overlay for the mapbox outdoor context\n\t// behind everything else in single-buffer rendering, the fact that the path\n\t// writes to the depth buffer means that the background and overlay will not\n\t// be drawn behind the path even when the path is still fading in. The effect\n\t// is subtle and is only visible in single-buffer rendering so this quick fix\n\t// prevents writes to the depth buffer for zero opacity fragments, which gets\n\t// rid of the most visually-offensive ghosting.\n\tif (opacity <= 0.0) {\n\t\tdiscard;\n\t}\n\n\t// Push in the texture coordinates so that they ramp up\n\t// at `arrowMargin` instead of at zero; this remapping looks somewhat\n\t// like this:\n\t// 1 ^        ___\n\t//   |       /\n\t//   |      /\n\t//   |     /\n\t//   |    /\n\t//   |___/\n\t// 0 +----------\x3e\n\t//   0   ^      1\n\t//       arrowMargin\n\t// Making the arrows narrower on the path.\n\tfloat u = fragTopTextureU;\n\tu = clamp(\n\t\tu * (1. / (1. - arrowMargin * 2.)) - (1. / (1. - arrowMargin * 2.) - 1.) / 2.,\n\t\t0.0,\n\t\t1.0\n\t);\n\n\tfloat arrowSpacing = clampRemap(\n\t\tpathLength,\n\t\tshortPathLength * radius,\n\t\tlongPathLength * radius,\n\t\tarrowSpacingOnShortPath,\n\t\tarrowSpacingOnLongPath\n\t);\n\n\t// Reduce the spacing between arrows when the camera zooms out, as increasing\n\t// the path radius will increase the arrow size and thus be able to fit\n\t// fewer arrows on in total, and this secondary movement of the arrows\n\t// "zooming off" the end of the path is unpleasant\n\tfloat expandAmount = mix(1.0, farRadius / nearRadius, zoomLevel);\n\tfloat effectiveArrowSpacing =\n\t\tarrowSpacing * 1.0 / expandAmount +\n\t\tarrowMargin * 2.0;\n\n\tfloat effectiveArrowLength = arrowLength * radius * (1. - arrowMargin * 2.0);\n\n\t// Adjust the slope of the vertical texture coordinate so that it goes\n\t// from 0 to 1 along the length of the arrow plus the spacing between\n\t// arrows, and adjust its x-intercept so that one arrow moves to the\n\t// exact position of the next arrow as `arrowAnimationTimer` goes\n\t// from 0 to 1\n\tfloat v = (\n\t\tfragTexcoord.x * (pathLength / effectiveArrowLength)\n\t\t- arrowAnimationTimer * (1. + effectiveArrowSpacing)\n\t);\n\n\t// Compute a "looping sawtooth" wave for determining the vertical texture\n\t// coordinates of the arrow texture, roughly as follows:\n\t// 3 ^              /\n\t//   |          ___/\n\t// 2 |         /\n\t//   |     ___/\n\t// 1 |    /\n\t//   |___/\n\t// 0 +---------------\x3e\n\t//   0   ^ ^\n\t//   ^   |_|\n\t//   |   effectiveArrowLength\n\t//   |___|\n\t//   effectiveArrowSpacing\n\t//\n\t// This is effectively equivalent to this sort of sawtooth wave:\n\t//   ^\n\t// 1 |    /    /    /\n\t//   |___/ ___/ ___/\n\t// 0 +---------------\x3e\n\t//\n\t// Causing the image of the arrow to repeat, with dead space (the bottom\n\t// edge of the texture stretched out) between the arrows at the provided\n\t// spacing. The reason why the "looping" design is preferred is because\n\t// it takes advantage of WebGL\'s `GL_REPEAT` texture wrapping behaviour\n\t// to avoid the discontinuity that can end up causing visual artifacts.\n\tif (mod(v, (1. + effectiveArrowSpacing)) < 1.) {\n\t\tv = v - effectiveArrowSpacing * floor(v / (1. + effectiveArrowSpacing));\n\t} else {\n\t\tv = ceil(v / (1. + effectiveArrowSpacing));\n\t}\n\n\t// Use the r-component of the texture to determine whether the arrow covers\n\t// this fragment or not\n\tvec2 sampleTexcoord = vec2(u, v);\n\tfloat arrowAmount = 0.0;\n\tvec3 secondColor = color;\n\n\tif (displayArrowsOnPath) {\n\t\tarrowAmount = texture2D(arrowTexture, sampleTexcoord).r;\n\t\tfloat delta = 1.0 - abs(fragPathDistance * 2.0 - 1.0);\n\t\tsecondColor = mix(color, pulseColor, 1.0 - smoothstep(ARROW_FADING_POINT, 0.0, delta));\n\t}\n\n\tif (showPulse) {\n\t\t// Add the pulse color to the path by determining how far the current fragment\n\t\t// is from `pulse`\n\t\tfloat pulseLocation = remap(\n\t\tpulse,\n\t\t0.0,\n\t\t1.0,\n\t\t-pulseLength,\n\t\t1.0 + pulseLength\n\t\t);\n\t\tfloat pulseDistance = smoothstep(\n\t\t0.0,\n\t\tpulseLength,\n\t\tabs(fragPathDistance - pulseLocation)\n\t\t);\n\n\t\t// Blend the pulse color to the path based on how close this fragment is to\n\t\t// the `pulse` value and whether it\'s covered by an arrow -- but if it\'s\n\t\t// covered by *both*, then we go back to using the regular path color\n\t\t// (making arrows look like "holes" when they\'re overlapping the pulse.)\n\t\tfloat pulseLevel = abs(1.0 - pulseDistance - arrowAmount);\n\n\t\tgl_FragColor = vec4(mix(color, secondColor, pulseLevel), opacity);\n\t} else if (displayArrowsOnPath) {\n\t\tgl_FragColor = vec4(mix(color, pulseColor, arrowAmount), opacity);\n\t} else {\n\t\tgl_FragColor = vec4(color, opacity);\n\t}\n\t#include <encodings_fragment>\n}';(0,n.a)();var wV,EV='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M25.86,2.59A10.12,10.12,0,0,0,22.4.65a14,14,0,0,0-8.85.14A10.33,10.33,0,0,0,10,3.1,9.78,9.78,0,0,0,7.72,6.68,10,10,0,0,0,7,11h6a6.3,6.3,0,0,1,.18-2.33,5.57,5.57,0,0,1,1-1.77,4.05,4.05,0,0,1,1.5-1.13,6.87,6.87,0,0,1,4.5-.08,4.4,4.4,0,0,1,1.6.88,3.37,3.37,0,0,1,.93,1.22A3.84,3.84,0,0,1,23,9.29a3.15,3.15,0,0,1-.38,1.5,10.54,10.54,0,0,1-1.26,1.72,18.9,18.9,0,0,1-1.78,1.8c-.71.66-1.4,1.34-2,2C16.31,17.55,14,19,14,21v6h6V23c0-.63,0-1,1-2s1.24-1.3,2-2,1.69-1.66,2.5-2.52a14,14,0,0,0,2.28-2.81,7.51,7.51,0,0,0,1.08-4.05,9.68,9.68,0,0,0-.78-3.91A8.34,8.34,0,0,0,25.86,2.59Z"/><circle cx="17" cy="33" r="3"/></svg>',MV="data:image/png;base64,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",SV='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><polygon points="36 14.99 28 7.99 28 12.99 17 12.99 17 16.99 28 16.99 28 21.99 36 14.99"/><path d="M24,29H15V7L6,2H24v9h2V0H0V29l14.94,7L15,31H26V19H24Z"/></svg>',TV='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M12.85,18.24H9.25a1.27,1.27,0,0,0-1.2,1.2v4.8c0,.43.65,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42c.43-.11,1.08-.75,1.08-1.18v-4.8A1.26,1.26,0,0,0,12.85,18.24Z"/><circle cx="11.05" cy="15.85" r="1.5"/><path d="M26.82,18.24h-3.6a1.26,1.26,0,0,0-1.2,1.2v4.8c0,.43.65,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42c.43-.11,1.08-.75,1.08-1.18v-4.8A1.27,1.27,0,0,0,26.82,18.24Z"/><circle cx="25.02" cy="15.85" r="1.5"/><path d="M19.79,18.24h-3.6a1.27,1.27,0,0,0-1.2,1.2v4.8c0,.43.66,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42A1.68,1.68,0,0,0,21,24.24v-4.8A1.26,1.26,0,0,0,19.79,18.24Z"/><path d="M18,17.35a1.5,1.5,0,1,0-1.5-1.5A1.51,1.51,0,0,0,18,17.35Z"/><path d="M28.79,10H7.27c-2.82,0-5.11,2-5.11,4.51V31.6c0,2.49,2.29,4.51,5.11,4.51H28.79c2.82,0,5.12-2,5.12-4.51V14.51C33.91,12,31.61,10,28.79,10Zm2.85,21.6a2.7,2.7,0,0,1-2.85,2.51H7.27A2.7,2.7,0,0,1,4.42,31.6V14.51A2.7,2.7,0,0,1,7.27,12H28.79a2.7,2.7,0,0,1,2.85,2.51Z"/><polygon points="27 4 26 3 24 5 24 0 22 0 22 5 20 3 19 4 23 8 27 4"/><polygon points="17 4 16 5 14 3 14 8 12 8 12 3 10 5 9 4 13 0 17 4"/></svg>',CV='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M12.85,18.24H9.25a1.27,1.27,0,0,0-1.2,1.2v4.8c0,.43.65,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42c.43-.11,1.08-.75,1.08-1.18v-4.8A1.26,1.26,0,0,0,12.85,18.24Z"/><circle cx="11.05" cy="15.85" r="1.5"/><path d="M26.82,18.24h-3.6a1.26,1.26,0,0,0-1.2,1.2v4.8c0,.43.65,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42c.43-.11,1.08-.75,1.08-1.18v-4.8A1.27,1.27,0,0,0,26.82,18.24Z"/><circle cx="25.02" cy="15.85" r="1.5"/><path d="M19.79,18.24h-3.6a1.27,1.27,0,0,0-1.2,1.2v4.8c0,.43.66,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42A1.68,1.68,0,0,0,21,24.24v-4.8A1.26,1.26,0,0,0,19.79,18.24Z"/><path d="M18,17.35a1.5,1.5,0,1,0-1.5-1.5A1.51,1.51,0,0,0,18,17.35Z"/><path d="M28.79,10H7.27c-2.82,0-5.11,2-5.11,4.51V31.6c0,2.49,2.29,4.51,5.11,4.51H28.79c2.82,0,5.12-2,5.12-4.51V14.51C33.91,12,31.61,10,28.79,10Zm2.85,21.6a2.7,2.7,0,0,1-2.85,2.51H7.27A2.7,2.7,0,0,1,4.42,31.6V14.51A2.7,2.7,0,0,1,7.27,12H28.79a2.7,2.7,0,0,1,2.85,2.51Z"/><polygon points="22 4 21 5 19 3 19 8 17 8 17 3 15 5 14 4 18 0 22 4"/></svg>',AV='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M12.85,18.24H9.25a1.27,1.27,0,0,0-1.2,1.2v4.8c0,.43.65,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42c.43-.11,1.08-.75,1.08-1.18v-4.8A1.26,1.26,0,0,0,12.85,18.24Z"/><circle cx="11.05" cy="15.85" r="1.5"/><path d="M26.82,18.24h-3.6a1.26,1.26,0,0,0-1.2,1.2v4.8c0,.43.65,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42c.43-.11,1.08-.75,1.08-1.18v-4.8A1.27,1.27,0,0,0,26.82,18.24Z"/><circle cx="25.02" cy="15.85" r="1.5"/><path d="M19.79,18.24h-3.6a1.27,1.27,0,0,0-1.2,1.2v4.8c0,.43.66,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42A1.68,1.68,0,0,0,21,24.24v-4.8A1.26,1.26,0,0,0,19.79,18.24Z"/><path d="M18,17.35a1.5,1.5,0,1,0-1.5-1.5A1.51,1.51,0,0,0,18,17.35Z"/><path d="M28.79,10H7.27c-2.82,0-5.11,2-5.11,4.51V31.6c0,2.49,2.29,4.51,5.11,4.51H28.79c2.82,0,5.12-2,5.12-4.51V14.51C33.91,12,31.61,10,28.79,10Zm2.85,21.6a2.7,2.7,0,0,1-2.85,2.51H7.27A2.7,2.7,0,0,1,4.42,31.6V14.51A2.7,2.7,0,0,1,7.27,12H28.79a2.7,2.7,0,0,1,2.85,2.51Z"/><polygon points="22 4 21 3 19 5 19 0 17 0 17 5 15 3 14 4 18 8 22 4"/></svg>',PV='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><polygon points="4 16 18 0 31.99 16 4 16"/><polygon points="31.99 20 18 36 4 20 31.99 20"/></svg>',IV='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M18,8a3,3,0,1,0-3-3A3,3,0,0,0,18,8Z"/><path d="M33,10H27a3.65,3.65,0,0,0-3,1l-2.76,2.75V12.39a2.48,2.48,0,0,0-2.46-2.47H17.22a2.48,2.48,0,0,0-2.47,2.47v7.87L9,26a3.26,3.26,0,0,1-2,1H3c-2.28,0-3,1.79-3,3.93A2.76,2.76,0,0,0,3,34H9a3.77,3.77,0,0,0,3-1L27,18a3.29,3.29,0,0,1,2.49-1h3.26A3.43,3.43,0,0,0,36,13.44C36,12.08,35,10,33,10Zm0,5H29c-1.47,0-1.92-.08-3,1L11,31a3.15,3.15,0,0,1-2,1H3c-.82,0-1-.29-1-1.16S2.12,28.9,3,29H7a3.87,3.87,0,0,0,3-1L25,13a2.72,2.72,0,0,1,2-1h6c.68,0,1,1.05,1,1.44S34,15,33,15Z"/><polygon points="30.18 26.18 26 31 26 28 24 28 24 34 31 34 31 32 28 32 31.69 27.59 30.18 26.18"/></svg>',LV='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M18,8a3,3,0,1,0-3-3A3,3,0,0,0,18,8Z"/><path d="M33,10H27a3.65,3.65,0,0,0-3,1l-2.76,2.75V12.39a2.48,2.48,0,0,0-2.46-2.47H17.22a2.48,2.48,0,0,0-2.47,2.47v7.87L9,26a3.26,3.26,0,0,1-2,1H3c-2.28,0-3,1.79-3,3.93A2.76,2.76,0,0,0,3,34H9a3.77,3.77,0,0,0,3-1L27,18a3.29,3.29,0,0,1,2.49-1h3.26A3.43,3.43,0,0,0,36,13.44C36,12.08,35,10,33,10Zm0,5H29c-1.47,0-1.92-.08-3,1L11,31a3.15,3.15,0,0,1-2,1H3c-.82,0-1-.29-1-1.16S2.12,28.9,3,29H7a3.87,3.87,0,0,0,3-1L25,13a2.72,2.72,0,0,1,2-1h6c.68,0,1,1.05,1,1.44S34,15,33,15Z"/><polygon points="25.67 34 29.84 29.18 29.84 32.18 31.84 32.18 31.84 26.18 24.84 26.18 24.84 28.18 27.84 28.18 24.16 32.58 25.67 34"/></svg>',OV='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M36,34H0L36,2ZM12,30H32V12Z"/></svg>',NV='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M36,34H0L36,2ZM12,30H32V12Z"/><polygon points="18.18 4.18 14 9 14 6 12 6 12 12 19 12 19 10 16 10 19.69 5.59 18.18 4.18"/></svg>',qV='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M36,34H0L36,2ZM12,30H32V12Z"/><polygon points="13.82 13.82 18 9 18 12 20 12 20 6 13 6 13 8 16 8 12.31 12.41 13.82 13.82"/></svg>',RV='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M10,0,26,2s-5.59,5.68-5.56,5.71C23.32,10.88,23.94,15.27,24,18V36H20V18c-.05-2.09-.54-5.32-2.47-7.53L12,16Z"/></svg>',DV='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M26,0,10,2s5.59,5.68,5.57,5.71C12.68,10.88,12.06,15.27,12,18V36h4V18c.06-2.09.54-5.32,2.47-7.53L24,16Z"/></svg>',kV='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><polygon points="35.99 2 30 2 25.99 2 25.99 6.59 25.99 8.84 24 8.84 19.99 8.84 19.99 13.43 19.99 15.67 13.99 15.67 13.99 15.69 13.99 20.27 13.99 22.52 12 22.52 7.99 22.52 7.99 27.12 7.99 29.36 0 29.36 0 33.95 7.99 33.95 11.99 33.95 12 33.95 12 27.12 13.99 27.12 18 27.12 18 22.52 18 20.27 19.99 20.27 24 20.27 24 15.67 24 13.43 25.99 13.43 30 13.43 30 8.84 30 6.59 35.99 6.59 35.99 2"/></svg>',BV='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><polygon points="30 2.03 25.99 2.03 25.99 6.63 25.99 8.87 24 8.87 19.99 8.87 19.99 13.47 19.99 15.71 13.99 15.71 13.99 15.73 13.99 20.31 13.99 22.57 12 22.57 7.99 22.57 7.99 27.16 7.99 29.4 0 29.4 0 34 7.99 34 11.99 34 12 34 12 27.16 13.99 27.16 18 27.16 18 22.57 18 20.31 19.99 20.31 24 20.31 24 15.71 24 13.47 25.99 13.47 30 13.47 30 8.87 30 6.63 35.99 6.63 35.99 2.03 30 2.03"/><polygon points="30.17 26.18 26 31 26 28 24 28 24 34 31 34 31 32 28 32 31.68 27.59 30.17 26.18"/></svg>',FV='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><polygon points="30 2.03 25.99 2.03 25.99 6.63 25.99 8.87 24 8.87 19.99 8.87 19.99 13.47 19.99 15.71 13.99 15.71 13.99 15.73 13.99 20.31 13.99 22.57 12 22.57 7.99 22.57 7.99 27.16 7.99 29.4 0 29.4 0 34 7.99 34 11.99 34 12 34 12 27.16 13.99 27.16 18 27.16 18 22.57 18 20.31 19.99 20.31 24 20.31 24 15.71 24 13.47 25.99 13.47 30 13.47 30 8.87 30 6.63 35.99 6.63 35.99 2.03 30 2.03"/><polygon points="24.83 33.82 29 29 29 32 31 32 31 26 24 26 24 28 27 28 23.32 32.41 24.83 33.82"/></svg>',UV='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M5,10,17,0V8a11,11,0,0,1,8.44,3.5c2.88,3.2,3.5,7.8,3.56,10.5V36H25V22c-.05-2.11-.54-5.61-2.53-7.82A7.1,7.1,0,0,0,17,12v8Z"/></svg>',zV='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M29,10,17,0V8a11,11,0,0,0-8.44,3.5C5.68,14.7,5.06,19.3,5,22V36H9V22c.06-2.11.54-5.61,2.53-7.82A7.1,7.1,0,0,1,17,12v8Z"/></svg>',VV='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M20,0c-5.38,0-9.79,5.34-10,12H2L12,24,22,12H14c.19-4.39,2.86-8,6-8s6,4.58,6,10V36h4V14C30,6.13,25.6,0,20,0Z"/></svg>',jV='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M21,3c-.44-.92-1-3-3-3s-2.63,2.16-3,3C15,3,2,29,2,33a2.65,2.65,0,0,0,3,3c2,0,6.1-2.2,9-4,2-1,3-2,4-2s2,1,4,2c0,0,7,4,9,4a2.65,2.65,0,0,0,3-3C34,29,21,3,21,3Z"/></svg>',GV='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M18,4A14,14,0,1,1,4,18,14,14,0,0,1,18,4m0-4A18,18,0,1,0,36,18,18,18,0,0,0,18,0Z"/><circle cx="18" cy="18" r="6"/></svg>',HV='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M18,0A13.83,13.83,0,0,0,4,14c0,4,1,9,7,12,2,1,6.15,8.67,7,10,3.38-5.44,5-9,7-10,6-3,7-8,7-12A13.83,13.83,0,0,0,18,0Zm0,19a5,5,0,1,1,5-5A5,5,0,0,1,18,19Z"/></svg>',WV='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M18,0A13.83,13.83,0,0,0,4,14c0,4,1,9,7,12,2,1,6.15,8.67,7,10,3.38-5.44,5-9,7-10,6-3,7-8,7-12A13.83,13.83,0,0,0,18,0Z"/></svg>',XV='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="25px" height="30px" viewBox="0 0 25 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 57.1 (83088) - https://sketch.com --\x3e\n    <title>Marker Pin</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <path d="M5.5,15 C6.34615385,14.1176471 7.33333333,12.9411765 8.46153846,11.4705882 C10.1538462,9.26470588 11,7.18962511 11,5.73529412 C11,2.56777864 8.53756612,0 5.5,0 C2.46243388,0 0,2.56777864 0,5.73529412 C0,7.1924534 0.846153846,9.26470588 2.53846154,11.4705882 C3.66666667,12.9411765 4.65384615,14.1176471 5.5,15 Z" id="path-1"></path>\n        <filter x="-104.5%" y="-63.3%" width="309.1%" height="259.8%" filterUnits="objectBoundingBox" id="filter-2">\n            <feMorphology radius="2" operator="dilate" in="SourceAlpha" result="shadowSpreadOuter1"></feMorphology>\n            <feOffset dx="0" dy="2" in="shadowSpreadOuter1" result="shadowOffsetOuter1"></feOffset>\n            <feGaussianBlur stdDeviation="2.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>\n            <feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite>\n            <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.2 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>\n        </filter>\n    </defs>\n    <g id="CE-1261" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Final-MVP-Markers" transform="translate(-204.000000, -523.000000)">\n            <g id="Marker-Pin" transform="translate(211.000000, 528.000000)">\n                <g id="Oval-Copy-25">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <path stroke="#FFFFFF" stroke-width="1.5" d="M4.95868222,15.5191099 C4.09118889,14.6145045 3.08708286,13.4178617 1.94340415,11.9271041 C0.219570966,9.68012899 -0.75,7.4435468 -0.75,5.73529412 C-0.75,2.16043095 2.04102866,-0.75 5.5,-0.75 C8.95897134,-0.75 11.75,2.16043095 11.75,5.73529412 C11.75,7.44173178 10.7794284,9.68143336 9.05659585,11.9271041 C7.91291714,13.4178617 6.90881111,14.6145045 6.04131778,15.5191099 L5.5,16.0835856 L4.95868222,15.5191099 Z" fill="#FFFFFF" fill-rule="evenodd"></path>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>\n',YV='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="23px" height="27px" viewBox="0 0 23 27" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 57.1 (83088) - https://sketch.com --\x3e\n    <title>Oval Copy 25</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <path d="M5.5,15 C6.34615385,14.1176471 7.33333333,12.9411765 8.46153846,11.4705882 C10.1538462,9.26470588 11,7.18962511 11,5.73529412 C11,2.56777864 8.53756612,0 5.5,0 C2.46243388,0 0,2.56777864 0,5.73529412 C0,7.1924534 0.846153846,9.26470588 2.53846154,11.4705882 C3.66666667,12.9411765 4.65384615,14.1176471 5.5,15 Z" id="path-1"></path>\n        <filter x="-90.9%" y="-53.3%" width="281.8%" height="236.1%" filterUnits="objectBoundingBox" id="filter-2">\n            <feMorphology radius="0.5" operator="dilate" in="SourceAlpha" result="shadowSpreadOuter1"></feMorphology>\n            <feOffset dx="0" dy="2" in="shadowSpreadOuter1" result="shadowOffsetOuter1"></feOffset>\n            <feGaussianBlur stdDeviation="2.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>\n            <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.2 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>\n        </filter>\n    </defs>\n    <g id="CE-1261" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Final-MVP-Markers" transform="translate(-205.000000, -524.000000)">\n            <g id="Marker-Pin" transform="translate(211.000000, 528.000000)">\n                <g id="Oval-Copy-25">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <use fill="#000000" fill-rule="evenodd" xlink:href="#path-1"></use>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>\n',ZV='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="36px" height="36px" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 57.1 (83088) - https://sketch.com --\x3e\n    <defs>\n      <filter id="f3" x="-50%" y="-50%" width="200%" height="200%">\n        <feMorphology radius="3" operator="dilate" in="SourceAlpha" result="shadowSpreadOuter1"></feMorphology>\n        <feOffset dx="0" dy="2" in="shadowSpreadOuter1" result="shadowOffsetOuter1"></feOffset>\n        <feGaussianBlur stdDeviation="2.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>\n        <feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite>\n        <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.4 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>\n      </filter>\n    </defs>\n    <circle cx="50" cy="50" r="40" fill="white" filter="url(#f3)"/>\n    <circle cx="50" cy="50" r="40" fill="white"/>\n</svg>\n',JV='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="36px" height="36px" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 57.1 (83088) - https://sketch.com --\x3e\n    <circle cx="50" cy="50" r="30" />\n</svg>\n',KV='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 468.614 468.614">\n    <g>\n        <path d="M291.299 116.517h-3.501c10.635-12.36 17.102-28.378 17.102-45.915C304.899 31.666 273.219 0 234.305 0c-38.93 0-70.584 31.666-70.584 70.602 0 17.537 6.477 33.555 17.093 45.915h-3.51c-19.645 0-35.626 15.997-35.626 35.645v117.105c0 19.648 15.982 35.633 35.626 35.633h1.372v128.07c0 20.332 10.697 35.645 24.884 35.645h61.468c14.208 0 24.908-15.312 24.908-35.645V304.9h1.363c19.642 0 35.639-15.984 35.639-35.633V152.161c-.006-19.647-15.998-35.644-35.639-35.644z" fill="#386460" />\n        <path d="M291.299 116.517h-3.501c10.635-12.36 17.102-28.378 17.102-45.915C304.899 31.666 273.219 0 234.305 0c-38.93 0-70.584 31.666-70.584 70.602 0 17.537 6.477 33.555 17.093 45.915h-3.51c-19.645 0-35.626 15.997-35.626 35.645v117.105c0 19.648 15.982 35.633 35.626 35.633h1.372v128.07c0 20.332 10.697 35.645 24.884 35.645h61.468c14.208 0 24.908-15.312 24.908-35.645V304.9h1.363c19.642 0 35.639-15.984 35.639-35.633V152.161c-.006-19.647-15.998-35.644-35.639-35.644z" style="fill:none;stroke-width:8px;stroke:white" />\n    </g>\n</svg>',QV='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\n    <g>\n        <path d="M12 0a8 8 0 00-8 8c0 1.421.382 2.75 1.031 3.906.108.192.221.381.344.563L12 24l6.625-11.531c.102-.151.19-.311.281-.469l.063-.094A7.954 7.954 0 0020 8a8 8 0 00-8-8zm0 4a4 4 0 110 8 4 4 0 010-8z" fill="#e74c3c"/>\n        <path d="M12 0a8 8 0 00-8 8c0 1.421.382 2.75 1.031 3.906.108.192.221.381.344.563L12 24l6.625-11.531c.102-.151.19-.311.281-.469l.063-.094A7.954 7.954 0 0020 8a8 8 0 00-8-8zm0 4a4 4 0 110 8 4 4 0 010-8z" style="fill:none;stroke-width:1px;stroke-linecap:round;stroke:white"/>\n        <path d="M12 3a5 5 0 100 10 5 5 0 000-10zm0 2a3 3 0 110 6 3 3 0 010-6z" fill="#c0392b"/>\n    </g>\n</svg>',$V="data:image/png;base64,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",tj=new Map([["journey-departure",KV],["journey-destination",QV],["question-mark",EV],["arrow",MV],["door",SV],["elevator",TV],["elevator-up",CV],["elevator-down",AV],["elevator-alt",PV],["escalator-down",IV],["escalator-up",LV],["ramp",OV],["ramp-down",NV],["ramp-up",qV],["sligntTurnLeft",RV],["sightTurnRight",DV],["stairs",kV],["stairs-down",BV],["stairs-up",FV],["turnLeft",UV],["turnRight",zV],["uTurn",VV],["blue-arrow",jV],["start",GV],["destination-marker-back",HV],["destination-marker-front",WV],["smart-label-pin-back",XV],["smart-label-pin-front",YV],["smart-label-circle-back",ZV],["smart-label-circle-front",JV],["logo",$V]]),ej=10,ij=new cv,nj={adjustedAltitude:!1,color:"#4b90e2",pulseColor:"#ffffff",pulseIterations:1,nearRadius:1.8,nearZoom:375,farZoom:1e4,drawDuration:1200,maxAdjustedAltitude:1/0,minAdjustedAltitude:-1/0,curve:_V.default.Easing.Cubic.InOut,displayArrowsOnPath:!1},rj={color:"#7ed321",pulseColor:"#ffffff",nearRadius:1.8,nearZoom:375,farZoom:1e4,drawDuration:800,curve:_V.default.Easing.Cubic.InOut,displayArrowsOnPath:!1},oj=2.3,aj=600,sj=class{constructor(t){(0,r.h)(this,wV,void 0),(0,r.i)(this,wV,t)}get id(){return(0,r.g)(this,wV).id}get nodes(){return(0,r.g)(this,wV).nodes}};wV=new WeakMap,(0,r.a)(sj,"Path");var lj=sj,hj=class{constructor(t,e,i){(0,r.f)(this,"id"),(0,r.f)(this,"nodes"),(0,r.f)(this,"pathSegments"),(0,r.f)(this,"options"),this.id=wy(),this.nodes=t,this.pathSegments=e,this.options=i}};(0,r.a)(hj,"InternalPath");var uj,cj,pj,dj,fj,gj,mj,vj,yj,_j,xj,bj,wj,Ej,Mj=hj,Sj=class{constructor(t){(0,r.h)(this,uj),(0,r.h)(this,pj),(0,r.h)(this,fj),(0,r.h)(this,mj),(0,r.h)(this,yj),(0,r.h)(this,xj),(0,r.h)(this,wj),(0,r.f)(this,"core"),(0,r.f)(this,"altitudeAdjustmentMap"),(0,r.f)(this,"maxAdjustedAltitude"),(0,r.f)(this,"minAdjustedAltitude"),(0,r.f)(this,"adjustedAltitude"),(0,r.f)(this,"pathSegments",new Map),(0,r.f)(this,"pathsById",new Map),(0,r.f)(this,"pathsByMeshId",new Map),(0,r.f)(this,"connectionsPathMeshes",new Fd),this.core=t,this.core.scene.add(this.connectionsPathMeshes),this.altitudeAdjustmentMap=new Map,this.adjustedAltitude=!!nj.adjustedAltitude,this.maxAdjustedAltitude=nj.maxAdjustedAltitude,this.minAdjustedAltitude=nj.minAdjustedAltitude}get altitudeAdjustment(){let t=this.core.currentMap,{mapClass:e}=this.core.mapObjects.get(t),i=e.scale,n=Math.max(e.width,e.height)/1e3;if(!this.adjustedAltitude)return 0;if(this.altitudeAdjustmentMap.has(t))return this.altitudeAdjustmentMap.get(t);let r=this.maxAdjustedAltitude/i,o=this.minAdjustedAltitude/i,a=e.polygons.reduce((t,{geometry:e,image:i,label:a})=>{var s;if(void 0!==(null==(s=null==e?void 0:e.scale)?void 0:s.z)){let s=e.scale.z*n,l=!1!==e.visible,h=!0===(null==i?void 0:i.visible)&&(null!=i.url||null!=i.original),u=!0===(null==a?void 0:a.visible)&&null!=a.text;l&&!h&&!u&&s<=r&&s>=o&&(t=Math.max(t,s))}return t},0);return this.altitudeAdjustmentMap.set(t,a),a}getPathLength(t){let e=0;for(let i=0,n=t.length-1;i<n;++i){let n=t[i],r=t[i+1];n.path.includes(r)&&(e+=Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2)))}return e}drawPath(t,e={}){let i=(0,r.k)(this,fj,gj).call(this,t,e),n=new Mj(t,i,e),o=new lj(n);return(0,r.k)(this,uj,cj).call(this,o,n),o}redrawPath(t,e={}){var i;let n=null==(i=this.pathsById.get(t.id))?void 0:i.internalPath;if(null==n)return void vy.warn("A path that does not exist cannot be redrawn.");(null==e||Object.keys(e).length<1)&&(e=n.options),n.pathSegments.forEach(t=>{(0,r.k)(this,wj,Ej).call(this,t)});let o=(0,r.k)(this,fj,gj).call(this,n.nodes,e);n.pathSegments=o,(0,r.k)(this,pj,dj).call(this,t),(0,r.k)(this,uj,cj).call(this,t,n)}removePath(t){let e;e="string"==typeof t?t:t.id;let i=this.pathsById.get(e);if(null==i)return;let n=i.internalPath.pathSegments;if(n)for(let o of n){let t=this.pathSegments.get(o.id);(0,r.k)(this,wj,Ej).call(this,t)}(0,r.k)(this,pj,dj).call(this,i.path)}hideConnectionSegments(){this.connectionsPathMeshes.children.forEach(t=>{t.visible=!1}),this.core.tryRendering()}showConnectionSegments(){this.connectionsPathMeshes.children.forEach(t=>{t.visible=!0}),this.core.tryRendering()}removeAllPaths(){for(let{path:t}of this.pathsById.values())this.removePath(t);this.pathSegments.clear(),this.core.renderer.disposeOfRenderLists(),this.core.tryRendering()}};uj=new WeakSet,cj=(0,r.a)(function(t,e){for(let i of e.pathSegments)this.pathSegments.set(i.id,i),this.pathsByMeshId.set(i.object.uuid,{path:t,internalPath:e});this.pathsById.set(e.id,{path:t,internalPath:e})},"#addPathToCache"),pj=new WeakSet,dj=(0,r.a)(function(t){let e=this.pathsById.get(t.id);if(null==e)return;let i=e.internalPath;for(let n of i.pathSegments)this.pathSegments.delete(n.id),this.pathsByMeshId.delete(n.object.uuid);this.pathsById.delete(i.id)},"#removePathFromCache"),fj=new WeakSet,gj=(0,r.a)(function(t,e={}){let i={...nj,...e,connectionPathOptions:{...rj,...e.connectionPathOptions}};this.maxAdjustedAltitude=i.maxAdjustedAltitude,this.minAdjustedAltitude=i.minAdjustedAltitude,this.adjustedAltitude=!!i.adjustedAltitude;let n=e.pulsePauseDuration||aj;null==i.connectionPathOptions.farRadius&&null!=i.connectionPathOptions.nearRadius&&(i.connectionPathOptions.farRadius=i.connectionPathOptions.nearRadius*oj),null==i.farRadius&&null!=i.nearRadius&&(i.farRadius=i.nearRadius*oj);let o,a,s,l=0,h=t.reduce((e,n,h)=>{let u=t[h+1],c=t[h-1];if(0===h)o=n.map.id;else if(n.map.id!=o||null==u){let p=null==u&&n.map.id===o?h:h-1;s=(0,r.k)(this,yj,_j).call(this,t.slice(l,p+1),o,{...i,animateDrawing:o===this.core.currentMap&&i.animateDrawing,drawDuration:o===this.core.currentMap?i.drawDuration:0}),l=h,e.push(s),null!=a&&(a.tween.chain(s.tween),a.pulseTween.chain(s.pulseTween),a.pulseTween.onComplete(a.resetPulse)),a=s,null!=c&&c.map.id!=n.map.id&&!0===i.drawConnectionSegments&&this.core.visibleMapsInCurrentScene.length>1&&this.core.stackedMaps.enabled&&(s=(0,r.k)(this,xj,bj).call(this,[c,n],i.connectionPathOptions),e.push(s),null!=a&&(a.tween.chain(s.tween),a.pulseTween.chain(s.pulseTween),a.pulseTween.onComplete(a.resetPulse)),a=s),o=n.map.id}return e},[]),u=1,c=i.pulseIterations||1/0;if(h.length>0){let t=h[0],e=h[h.length-1];t.tween.start(),t.tween.onComplete(()=>{t.pulseTween.start()}),e.endPauseTween=new _V.default.Tween({}).to({value:1},n).chain(t.pulseTween).onUpdate(()=>this.core.tryRendering(YB.TWEEN)),c>1&&e.pulseTween.chain(e.endPauseTween),e.pulseTween.onComplete(()=>{u+1>=c?h.forEach(t=>{t.pulseTween.onComplete(()=>{}),t.pulseTween.stop(),t.endPauseTween&&t.endPauseTween.stop(),t.resetPulse(),this.core.tryRendering(YB.ANIMATED)}):(e.resetPulse(),t.resetPulse()),u++})}return this.core.tryRendering(YB.ANIMATED),h},"#drawAllPathSegments"),mj=new WeakSet,vj=(0,r.a)(function(t,e,i){let n=(i=i||{}).color||"#ff834c",o=i.pulseColor||"#000000",a=void 0!==i.nearRadius?i.nearRadius:1.8,s=void 0!==i.farRadius?i.farRadius:a,l=void 0!==i.nearZoom?i.nearZoom:375,h=void 0!==i.farZoom?i.farZoom:1e4,u=void 0!==i.drawDuration?i.drawDuration:1500,c=i.curve||_V.default.Easing.Cubic.InOut,p=i.displayArrowsOnPath||!1,d=i.isConnectionPathSegment||!1,f=i.displayArrowsOnPath||i.flattenPath||!1,g=void 0===i.showPulse||i.showPulse,m=void 0===i.animateDrawing||i.animateDrawing,v=0;if(d)for(let r=1;r<t.length;++r){let e=t[r].x-t[r-1].x,i=t[r].z-t[r-1].z;v+=Math.sqrt(e*e+i*i)}else{t[0].z+=this.altitudeAdjustment;for(let e=1;e<t.length;++e){t[e].z+=this.altitudeAdjustment;let i=t[e].x-t[e-1].x,n=t[e].y-t[e-1].y,r=t[e].z-t[e-1].z;v+=Math.sqrt(i*i+n*n+r*r)}}let y=ij.load(tj.get("arrow"));y.colorSpace=Fn;let _={vertexes:{type:"f",value:1},resolution:{type:"v2",value:this.core.resolution},cameraParameters:{type:"v2",value:this.core.cameraParameters},complete:{type:"f",value:m?0:1},color:{type:"c",value:new Ua(n)},pathLength:{type:"f",value:v},nearRadius:{type:"f",value:a},farRadius:{type:"f",value:s},nearZoom:{type:"f",value:l},farZoom:{type:"f",value:h},pulseColor:{type:"c",value:new Ua(o)},pulse:{type:"f",value:0},pulseLength:{type:"f",value:.075},pulseBulge:{type:"b",value:!1},pathIsVertical:{type:"b",value:d},arrowAnimationTimer:{type:"f",value:0},arrowTexture:{type:"t",value:y},displayArrowsOnPath:{type:"b",value:p},flattenFactor:{type:"f",value:f?.05:1},showPulse:{type:"b",value:g}},x=new ng(t);x.curveType="catmullrom",x.tension=0;let b=30*e.length,w=new Mm(x,b,a,8,!1),E=new Float32Array(w.attributes.position.count);for(let r=e.length;r<E.length;r++)E[r]=r;w.setAttribute("vertexIndex",new Xa(E,1));let M=new Float32Array(w.attributes.position.count),S=new Xa(M,1);for(let r=0;r<=b;r++)for(let t=0;t<=8;++t)S.setX(9*r+t,r/b);w.setAttribute("pathDistance",S);let T=new Float32Array(3*w.attributes.normal.count),C=new Xa(T,3);for(let r=0;r<b;r++){let t=w.tangents[r];for(let e=0;e<=8;++e)C.setXYZ(9*r+e,t.x,t.y,t.z)}w.setAttribute("pathTangent",C);let A=new Float32Array(3*w.attributes.normal.count),P=new Xa(A,3);for(let r=0;r<b;r++){let t=w.tangents[r];var I,L,O;d?(I=t.x*t.y,L=t.y*t.y-1,O=t.z*t.y):(I=-t.x*t.z,L=-t.y*t.z,O=1-t.z*t.z);let e=Math.sqrt(I*I+L*L+O*O);0===e&&(e=1);let i=I/e,n=L/e,o=O/e;for(let a=0;a<=8;++a)P.setXYZ(9*r+a,i,n,o)}w.setAttribute("pathNormal",P);let N=new Us({uniforms:_,vertexShader:xV,fragmentShader:bV});N.transparent=!0,N.alphaTest=.5,_.resolution.value.x=this.core.renderer.getBufferSize().width,_.resolution.value.y=this.core.renderer.getBufferSize().height,_.vertexes.value=E.length,_.arrowTexture.value.wrapS=yi,_.arrowTexture.value.wrapT=yi,_.arrowTexture.value.anisotropy=this.core.renderer.getMaxAnisotropy();let q=new Cs(w,N),R=(0,r.a)(()=>{this.core.tryRendering(YB.ANIMATED)},"tryRenderingAnimated"),D=new _V.default.Tween(_.pulse).to({value:1},u).easing(c).onUpdate(R),k=new _V.default.Tween(_.complete).to({value:1},u).easing(c).onUpdate(R),B=new _V.default.Tween(_.arrowAnimationTimer).to({value:1},3e3).easing(_V.default.Easing.Linear.None).repeat(1/0).onUpdate(R);p&&B.start();let F={id:q.id,nodes:e,mapId:i.mapId,object:q,tween:k,pulseTween:D,arrowAnimationTween:B,reset:function(){_.complete.value=0},resetPulse:function(){_.pulse.value=0}};return N.userData={layer:d?"vertical-path":"path"},F},"#drawSegment"),yj=new WeakSet,_j=(0,r.a)(function(t,e,i={color:"#ff834c",pulseColor:"white",pulseIterations:1/0,nearRadius:1.8,nearZoom:375,farZoom:1e4,drawDuration:1500,displayArrowsOnPath:!1}){let n=i.nearRadius||2,o=i.farRadius||i.nearRadius||2,a=e?this.core.venue.maps.find(t=>t.id===e):this.core.venue.maps.find(t=>t.id===this.core.currentMap),s=(null==a?void 0:a.scale)||1;if(n/=s,o/=s,null==this.core.currentMap)throw new Error("Unable to retrieve the current map");let l=e?Ly(e):this.core.currentMap,h=[],u=n/2;for(let r=0;r<t.length;r++){let e=t[r],i=new ho(e.x-a.width/2,-e.y+a.height/2,u);h.push(i)}let c=u-.1;h.push(h[h.length-1].clone().setZ(c)),h.unshift(h[0].clone().setZ(c));let p=(0,r.k)(this,mj,vj).call(this,h,t,{...i,nearRadius:n,farRadius:o,mapId:l});p.object.name="path",p.object.layers.set(CF.ANIMATED);let d=this.core.mapObjects.get(l);return this.core.visibleMapObjectsInCurrentScene.includes(d)||(p.object.visible=!1),d.add(p.object),p},"#drawPathSegment"),xj=new WeakSet,bj=(0,r.a)(function(t,e={color:"#7dd322",pulseColor:"#ffffff",pulseIterations:1/0,nearRadius:1.8,nearZoom:375,farZoom:1e4,drawDuration:1500,curve:_V.default.Easing.Cubic.InOut,displayArrowsOnPath:!1}){let i=e.nearRadius||2,n=e.farRadius||e.nearRadius||2,o=this.core.referenceMap,a=(null==o?void 0:o.scale)||1;i/=a,n/=a;let s=Uy(this.core.convertTo3DMapPosition(t[0]),this.core.convertTo3DMapPosition(t[1]),ej),l=(0,r.k)(this,mj,vj).call(this,s,t,{...e,nearRadius:i,farRadius:n,mapId:this.core.referenceMap.id,isConnectionPathSegment:!0}),h=(new fo).setFromObject(l.object),u=new ho;return h.getCenter(u),l.object.layers.set(CF.ANIMATED),l.object.geometry.center(),l.object.position.copy(u),this.core.billboardManager.add(l.object),this.connectionsPathMeshes.add(l.object),l},"#drawConnectionPathSegment"),wj=new WeakSet,Ej=(0,r.a)(function(t){t&&(this.core.scene.remove(t.object),"function"==typeof t.object.destroy&&t.object.destroy(),t.pulseTween.stop(),t.endPauseTween&&t.endPauseTween.stop(),t.tween.stop(),t.arrowAnimationTween.stop(),t.pulseTween=void 0,t.tween=void 0,t.arrowAnimationTween=void 0,this.pathSegments.delete(t.id),this.connectionsPathMeshes.remove(t.object),this.core.billboardManager.remove(t.object))},"#removePathSegment"),(0,r.a)(Sj,"PathsController");var Tj=Sj,Cj=Tj;(0,n.a)(),(0,n.a)(),(0,n.a)();var Aj=(0,r.a)(({image:t})=>!(null==t||!t.visible||!t.url&&!t.original),"imageVisible"),Pj=(0,r.a)((t,e)=>Aj(t)&&e[t.id+"_image"],"imageVisibleAndRendered");function Ij(t,e,i,n){let r=[],o=(null==i?void 0:i.locations)||t.locations;for(let a of t.polygons){let s,[l]=a.entrances;if(l&&(null==n||!n.id||n.id===l.map.id)&&a.geometry.visible&&(s=zy(a,t))){let t=(null==i?void 0:i.createDespiteImage)||s.showLabelWhenImagePresent||s.showSmartLabelWhenImagePresent;if(Pj(a,e)&&!t||!o.includes(s))continue;let n=(null==i?void 0:i.excludeTypes)||[];if(n.length>0&&n.includes(s.type))continue;let h=Lj(a,l,s,i||{});null!=h&&r.push(h)}}return r}function Lj(t,e,i,r){var o,a,s,l,h;let u="test"===n.b.env.NODE_ENV?FU.testId:Math.random();FU.testId++;let c,p,d=i.name,f=i.shortName;return i.states&&i.states.length>0&&(c=(null==(o=i.state)?void 0:o.id)&&(null==(s=null==r?void 0:r.translationMap)?void 0:s[null==(a=i.state)?void 0:a.id])||(null==(l=i.state)?void 0:l.name)||null),r.groupRankingByCategory&&(p=null==t?void 0:t.categoryRank),{interactive:r.interactive,polygon:t,rank:p||(null==(h=t.rank)?void 0:h.score)||u,entranceNode:e,text:null==c?f||d:(f||d)+" (".concat(c,")"),appearance:r.appearance,createDespiteImage:r.createDespiteImage,map:e.map}}(0,r.a)(Ij,"createLabelObjects"),(0,r.a)(Lj,"createLabelOptionsObject");var Oj=(0,r.e)(le());(0,n.a)();var Nj=class extends FR{constructor(){var t;super(),(0,r.f)(this,"_recalculateDebounced"),(0,r.f)(this,"totalZoomLevel",0),(0,r.f)(this,"fontZoomLevel",0),(0,r.f)(this,"pageZoomLevel",0),this._recalculateDebounced=ky(this.recalculate,100),window.addEventListener("resize",()=>{this._recalculateDebounced()}),null==(t=window.visualViewport)||t.addEventListener("resize",()=>{this._recalculateDebounced()}),this.recalculate()}detectSafari(){let{userAgent:t}=navigator;return t.indexOf("Safari")>-1&&-1===t.indexOf("Chrome")}recalculate(){var t;let e=1;this.detectSafari()&&(e=Math.max(1,window.outerWidth/window.innerWidth)),this.fontZoomLevel=window.devicePixelRatio*e,this.pageZoomLevel=(null==(t=window.visualViewport)?void 0:t.scale)||1,this.totalZoomLevel=this.fontZoomLevel*this.pageZoomLevel,this.publish("FONT_ZOOM_CHANGED",this.fontZoomLevel),this.publish("PAGE_ZOOM_CHANGED",this.pageZoomLevel),this.publish("TOTAL_ZOOM_CHANGED",this.totalZoomLevel)}};(0,r.a)(Nj,"ZoomListener");var qj,Rj,Dj,kj,Bj,Fj,Uj,zj,Vj,jj,Gj,Hj,Wj,Xj,Yj,Zj,Jj,Kj,Qj,$j,tG,eG,iG,nG,rG,oG,aG,sG,lG,hG,uG,cG,pG,dG,fG,gG,mG,vG,yG,_G,xG,bG,wG,EG=Nj,MG=new EG,SG=(0,r.a)(t=>{let e=t.toJSON();return 5===Object.keys(e).length&&"lat"in e&&"lon"in e&&"map"in e&&"x"in e&&"y"in e},"isMappedinCoordinate"),TG="Adding or removing individual labels after calling labelAllLocations() may cause unexpected behaviour. We recommend adding all labels individually if more specific control is desired. https://developer.mappedin.com/web-sdk-api/v5/latest/classes/floatinglabels#add",CG=class{constructor(t){(0,r.h)(this,Dj),(0,r.h)(this,Bj),(0,r.h)(this,Uj),(0,r.h)(this,Vj),(0,r.h)(this,Gj),(0,r.h)(this,Wj),(0,r.h)(this,Yj),(0,r.h)(this,Jj),(0,r.h)(this,Qj),(0,r.h)(this,tG),(0,r.h)(this,iG),(0,r.h)(this,rG),(0,r.h)(this,aG),(0,r.h)(this,lG),(0,r.h)(this,uG),(0,r.h)(this,pG),(0,r.h)(this,fG),(0,r.h)(this,vG),(0,r.h)(this,_G),(0,r.h)(this,bG),(0,r.f)(this,"core"),(0,r.h)(this,qj,!1),(0,r.f)(this,"floatingLabels",{}),(0,r.h)(this,Rj,{}),(0,r.h)(this,mG,{}),this.core=t,t.on(8,()=>{t.visibleMapsInCurrentScene.forEach(t=>{!(0,r.g)(this,Rj)[t.id]&&(0,r.g)(this,qj)&&(0,r.k)(this,Dj,kj).call(this,t)})}),MG.on("FONT_ZOOM_CHANGED",()=>{(0,r.k)(this,Wj,Xj).call(this)})}addLabel(t,e,i){return SG(t)?(0,r.k)(this,Uj,zj).call(this,t,e,i):null!=this.core.venue.getCollectionItemById("nodes",t.id)?(0,r.k)(this,Vj,jj).call(this,t,e,i):(0,r.k)(this,Gj,Hj).call(this,t,e,i)}removeLabel(t,e=!1){if(SG(t))return(0,r.k)(this,Yj,Zj).call(this,t,e);null!=this.core.venue.getCollectionItemById("nodes",t.id)?(0,r.k)(this,Jj,Kj).call(this,t,e):(0,r.k)(this,Qj,$j).call(this,t,e),delete(0,r.g)(this,Rj)[t.map.id]}setPriority(t,e){if(SG(t))return(0,r.k)(this,tG,eG).call(this,t,e);null!=this.core.venue.getCollectionItemById("nodes",t.id)?(0,r.k)(this,iG,nG).call(this,t,e):(0,r.k)(this,rG,oG).call(this,t,e)}resetPriority(t){if(SG(t))return(0,r.k)(this,aG,sG).call(this,t);null!=this.core.venue.getCollectionItemById("nodes",t.id)?(0,r.k)(this,lG,hG).call(this,t):(0,r.k)(this,uG,cG).call(this,t)}removeAllLabels(){(0,r.i)(this,qj,!1);for(let t in this.floatingLabels)(0,r.k)(this,pG,dG).call(this,t,!0);Array.from(this.core.mapObjects.values()).forEach(t=>{t.labels.clear()}),this.floatingLabels={},(0,r.i)(this,Rj,{}),this.core.smartCollisionEngine.debouncedUpdate(),this.core.renderer.disposeOfRenderLists(),this.core.tryRendering()}setAppearance(t,e){if(SG(t))return(0,r.k)(this,vG,yG).call(this,t,e);null!=this.core.venue.getCollectionItemById("nodes",t.id)?(0,r.k)(this,_G,xG).call(this,t,e):(0,r.k)(this,bG,wG).call(this,t,e),this.core.tryRendering()}labelAllLocations(t){(0,r.i)(this,qj,!0),null!=t&&(0,r.i)(this,mG,t);let e=[];return this.core.visibleMapsInCurrentScene.forEach(t=>{!(0,r.g)(this,Rj)[t.id]&&(0,r.g)(this,qj)&&e.push(...(0,r.k)(this,Dj,kj).call(this,t))}),e}};qj=new WeakMap,Rj=new WeakMap,Dj=new WeakSet,kj=(0,r.a)(function(t){let e=Ij(this.core.venue,this.core.polygonMeshesById,(0,r.g)(this,mG),t);if(null==e)return[];let i=e.reduce((t,e)=>{let i=(0,r.k)(this,fG,gG).call(this,e,!0);return i&&t.push(i),t},[]);return this.core.taskScheduler.scheduleTask(new jD({name:"addFloatingLabel",callback:()=>{i.forEach(t=>{t.enable(!1)}),(0,r.g)(this,Rj)[t.id]=!0,this.core.determineNewLabelSize(),this.core.smartCollisionEngine.debouncedUpdate()}})),i},"#processLabelsForMap"),Bj=new WeakSet,Fj=(0,r.a)(function(t){return"label_".concat(t.map.id,"-").concat(t.lat,"-").concat(t.lon)},"#getLabelIdForCoordinate"),Uj=new WeakSet,zj=(0,r.a)(function(t,e,i){(0,r.g)(this,qj)&&vy.warn(TG);let o=(0,r.k)(this,Bj,Fj).call(this,t);this.floatingLabels[o]&&(0,r.k)(this,Yj,Zj).call(this,t);let a="test"===n.b.env.NODE_ENV?FU.testId:Math.random();FU.testId++;let s={id:o,polygon:void 0,rank:a,text:e,appearance:null==i?void 0:i.appearance,createDespiteImage:!0,coordinate:t,map:t.map,...i||{}};return(0,r.k)(this,fG,gG).call(this,s)},"#labelCoordinate"),Vj=new WeakSet,jj=(0,r.a)(function(t,e,i){var o,a,s;(0,r.g)(this,qj)&&vy.warn(TG),this.floatingLabels[t.id]&&(0,r.k)(this,Jj,Kj).call(this,t);let l,h="test"===n.b.env.NODE_ENV?FU.testId:Math.random();FU.testId++,null!=i&&i.groupRankingByCategory&&(l=null==(o=t.polygon)?void 0:o.categoryRank);let u={polygon:t.polygon,rank:l||(null==(s=null==(a=t.polygon)?void 0:a.rank)?void 0:s.score)||h,entranceNode:t,text:e,appearance:null==i?void 0:i.appearance,createDespiteImage:!0,map:t.map,...i||{}};return(0,r.k)(this,fG,gG).call(this,u)},"#labelNode"),Gj=new WeakSet,Hj=(0,r.a)(function(t,e,i){var n,o;let a=[];for(let s of t.entrances)null!=(null==(n=t.rank)?void 0:n.node)&&(null==(o=t.rank)?void 0:o.node)!=s.id||(0,r.k)(this,Vj,jj).call(this,s,e,i)&&a.push();return 0===a.length?(vy.warn("No entrances found on this polygon. Skipping."),null):a},"#labelPolygon"),Wj=new WeakSet,Xj=(0,r.a)(function(){Object.values(this.floatingLabels).forEach(t=>{t.invalidate()}),this.core.smartCollisionEngine.debouncedUpdate()},"#invalidateAll"),Yj=new WeakSet,Zj=(0,r.a)(function(t,e=!1){let i=(0,r.k)(this,Bj,Fj).call(this,t);this.core.smartCollisionEngine.remove(i),e||(delete this.floatingLabels[i],this.core.smartCollisionEngine.debouncedUpdate())},"#removeLabelCoordinate"),Jj=new WeakSet,Kj=(0,r.a)(function(t,e=!1){(0,r.g)(this,qj)&&vy.warn(TG),this.core.smartCollisionEngine.remove(t.id),e||(delete this.floatingLabels[t.id],this.core.smartCollisionEngine.debouncedUpdate())},"#removeLabelNode"),Qj=new WeakSet,$j=(0,r.a)(function(t,e=!1){t.entrances.forEach(t=>(0,r.k)(this,Jj,Kj).call(this,t,e))},"#removeLabelPolygon"),tG=new WeakSet,eG=(0,r.a)(function(t,e){let i=(0,r.k)(this,Bj,Fj).call(this,t);i in this.floatingLabels&&this.floatingLabels[i].setPriority(e)},"#setPriorityCoordinate"),iG=new WeakSet,nG=(0,r.a)(function(t,e){t.id in this.floatingLabels&&this.floatingLabels[t.id].setPriority(e)},"#setPriorityNode"),rG=new WeakSet,oG=(0,r.a)(function(t,e){t.entrances.forEach(t=>(0,r.k)(this,iG,nG).call(this,t,e))},"#setPriorityPolygon"),aG=new WeakSet,sG=(0,r.a)(function(t){let e=(0,r.k)(this,Bj,Fj).call(this,t);e in this.floatingLabels&&this.floatingLabels[e].resetPriority()},"#resetPriorityCoordinate"),lG=new WeakSet,hG=(0,r.a)(function(t){t.id in this.floatingLabels&&this.floatingLabels[t.id].resetPriority()},"#resetPriorityNode"),uG=new WeakSet,cG=(0,r.a)(function(t){t.entrances.forEach(t=>(0,r.k)(this,lG,hG).call(this,t))},"#resetPriorityPolygon"),pG=new WeakSet,dG=(0,r.a)(function(t,e=!1){this.core.smartCollisionEngine.remove(t),e||delete this.floatingLabels[t]},"#removeLabelByNode"),fG=new WeakSet,gG=(0,r.a)(function(t,e=!1){var i,n,r,o;let{polygon:a,entranceNode:s,coordinate:l,map:h}=t,u=null!=(n=null!=(i=null==a?void 0:a.map.id)?i:null==s?void 0:s.map.id)?n:h.id,c=this.core.mapObjects.get(u),p=0;null!=a&&(p=a.geometry.scale.z*Math.max(c.mapClass.width,c.mapClass.height)/1e3);let d=null!=(o=t.id)?o:null==(r=t.entranceNode)?void 0:r.id;if(null==d)throw new Error("Trying to add a floating label with no node or coordinate provided!");let f=l||s;if(!f)return null;let g=new FU({id:d,polygonHeight:p,...t,position:{nodeOrCoordinate:f,height:p},mapId:u},this.core);return this.floatingLabels[d]=g,c.labels.add(g),this.core.smartCollisionEngine.add(d,g),this.core.taskScheduler.scheduleUpdate(new zD({name:"addFloatingLabel",ordering:S0.BEFORE_CAMERA,callback:()=>{e||(g.enable(!1),this.core.determineNewLabelSize(),this.core.smartCollisionEngine.debouncedUpdate())}})),e||this.core.tryRendering(),g},"#renderLabel"),mG=new WeakMap,vG=new WeakSet,yG=(0,r.a)(function(t,e){let i=(0,r.k)(this,Bj,Fj).call(this,t),n=this.floatingLabels[i];if(!n)return void vy.warn("No label found for this node. Skipping...");this.removeLabel(t);let o={appearance:(0,Oj.default)(e,n.appearance),interactive:n.options.interactive};(0,r.k)(this,Uj,zj).call(this,t,n.options.text,o)},"#setCoordinateAppearance"),_G=new WeakSet,xG=(0,r.a)(function(t,e){let i=this.floatingLabels[t.id];if(!i)return void vy.warn("No label found for this node. Skipping...");this.removeLabel(t);let n={appearance:(0,Oj.default)(e,i.appearance),interactive:i.options.interactive};(0,r.k)(this,Vj,jj).call(this,t,i.options.text,n)},"#setNodeAppearance"),bG=new WeakSet,wG=(0,r.a)(function(t,e){for(let i of t.entrances)(0,r.k)(this,_G,xG).call(this,i,e)},"#setPolygonAppearance"),(0,r.a)(CG,"FloatingLabelsController");var AG=CG,PG=AG;function IG(t,e,i,n){let r=(null==n?void 0:n.excludeTypes)||[],o=null==n?void 0:n.sortFunction,a=((null==n?void 0:n.locations)||[]).filter(t=>-1===r.indexOf(t.type)),s=a;null!=o&&(s=a.sort(o));let l={};for(let h=0,u=s.length;h<u;++h){let r=s[h],o=r.polygons;for(let a=0,s=o.length;a<s;++a){let s=o[a];if(Pj(s,t.polygonMeshesById)||!s.geometry.visible)continue;let h=LG(o[a],r,i,t.venue,e,n);null!=h&&(l[s.id]=h)}}return Object.values(l)}function LG(t,e,i,n,r,o){var a,s,l;let h=null==o?void 0:o.sortFunction,u=(null==o?void 0:o.translationMap)||{},c=i[t.id];if(!0===c)return null;{let p=t.canvasBounds;i[t.id]=!0;let d=r,f=0;if(p){let t=p.x-d.width/2,e=-p.y+d.height/2;f=Math.sqrt(Math.pow(t,2)+Math.pow(e,2))}let g=e;if(h?i[t.id]=!0:!1===c?(g=zy(t,n.venue),i[t.id]=!0):i[t.id]=!1,null==g)return null;let m=g.name,v=g.shortName,y=t.rank,_="";return g.states&&g.states.length>0&&(_=(null==(a=g.state)?void 0:a.id)&&u[null==(s=g.state)?void 0:s.id]||(null==(l=g.state)?void 0:l.name)||""),{...null==o?void 0:o.appearance,polygon:t,text:m,shortText:v,stateText:_,distance:f,rank:y,createDispiteImage:g.showLabelWhenImagePresent}}}(0,n.a)(),(0,n.a)(),(0,r.a)(IG,"createLabelObjects"),(0,r.a)(LG,"createLabelOptionsObject");var OG,NG,qG,RG,DG,kG,BG,FG=(0,r.e)(le()),UG="Sans-Serif",zG=new YF,VG={},jG="Adding or removing individual labels after calling labelAllLocations() may cause unexpected behaviour. We recommend adding all labels individually if more specific control is desired. https://developer.mappedin.com/web-sdk-api/v5/latest/classes/flatlabels#add",GG=class{constructor(t){(0,r.h)(this,RG),(0,r.h)(this,kG),(0,r.f)(this,"core"),(0,r.h)(this,OG,!1),(0,r.h)(this,NG,{}),(0,r.h)(this,qG,{}),(0,r.f)(this,"flatLabels",{}),(0,r.f)(this,"labeledPolygons",{}),this.core=t,t.on(8,()=>{t.visibleMapsInCurrentScene.forEach(t=>{!(0,r.g)(this,NG)[t.id]&&(0,r.g)(this,OG)&&(0,r.k)(this,RG,DG).call(this,t)})})}labelAllLocations(t){(0,r.i)(this,OG,!0),null!=t&&(0,r.i)(this,qG,{...t,...null==t?void 0:t.appearance});let e=[];return this.core.visibleMapsInCurrentScene.forEach(t=>{(0,r.g)(this,NG)[t.id]||e.push(...(0,r.k)(this,RG,DG).call(this,t))}),e}labelPolygon(t,e,i){(0,r.g)(this,OG)&&vy.warn(jG);let n={polygon:"string"==typeof t?this.core.venue.getCollectionItemById("polygons",t):t,showLabelWhenImagePresent:!0,text:e,...i,...null==i?void 0:i.appearance};return(0,r.k)(this,kG,BG).call(this,n)}removeLabel(t){(0,r.g)(this,OG)&&vy.warn(jG);let e="string"==typeof t?this.core.venue.getCollectionItemById("polygons",t):t;if(!this.core.textLabelsByPolygonId[e.id])return;let i=this.core.textLabelsByPolygonId[e.id];i.removeSelf();let{textObjects:n}=this.core.mapObjects.get(i.map.mapClass.id);n.splice(n.indexOf(i),1),delete this.core.textLabelsByPolygonId[e.id],delete this.flatLabels[e.id],delete(0,r.g)(this,NG)[e.map.id],this.core.tryRendering()}setAppearance(t,e){let i=this.flatLabels[t.id];if(i){if(1===Object.keys(e).length&&null!=e.color)i.baseColor=e.color,i.setColor(e.color);else{let n=i.fullText;this.removeLabel(t),this.labelPolygon(t,n,{appearance:(0,FG.default)(e,{height:i.height,margin:i.margin/i.mapScale,color:i.color,hoverColor:i.hoverColor,fontSize:i.fontSize/i.mapScale,font:i.font,scaleMin:i.scaleMin,scaleStep:i.scaleStep})})}this.core.tryRendering()}}setHoverColorForAll(t){(0,r.g)(this,qG).appearance||((0,r.g)(this,qG).appearance={}),(0,r.g)(this,qG).appearance.hoverColor=t;for(let e in this.flatLabels)this.flatLabels.hasOwnProperty(e)&&this.flatLabels[e].setHoverColor(t)}removeAllLabels(){(0,r.i)(this,OG,!1),Array.from(this.core.mapObjects.values()).forEach(t=>{t.textObjects.forEach(t=>t.removeSelf()),t.labels.clear(),t.textObjects=[]}),this.core.textLabelsByPolygonId={},this.flatLabels={},this.labeledPolygons={},(0,r.i)(this,NG,{}),this.core.tryRendering()}};OG=new WeakMap,NG=new WeakMap,qG=new WeakMap,RG=new WeakSet,DG=(0,r.a)(function(t){var e;let i=[],n=IG(this.core,t,this.labeledPolygons,{...(0,r.g)(this,qG),locations:(null==(e=(0,r.g)(this,qG))?void 0:e.locations)||this.core.venue.getCollectionItemById("maps",t.id).locations});for(let o=0,a=n.length;o<a;++o){let t=n[o];i.push((0,r.k)(this,kG,BG).call(this,t))}return(0,r.g)(this,NG)[t.id]=!0,i},"#processLabelsForMap"),kG=new WeakSet,BG=(0,r.a)(function(t){let e=this.core.mapObjects.get(t.polygon.map.id),i=new JF(t,this.core.venue,e,UG,this.core.polygonMeshesById,this.core.textLabelsByPolygonId,VG,this.core,zG);return t.polygon&&this.core.textLabelsByPolygonId[t.polygon.id]&&this.removeLabel(t.polygon),this.flatLabels[t.polygon.id]=i,e.addPendingLowPriorityTask("addFlatLabel",()=>{i.create(),this.core.tryRendering()}),this.core.textLabelsByPolygonId[t.polygon.id]=i,i},"#renderLabel"),(0,r.a)(GG,"FlatLabelsController");var HG=GG,WG=HG;(0,n.a)();var XG,YG,ZG,JG,KG,QG,$G,tH,eH,iH=class{constructor(t){(0,r.h)(this,YG),(0,r.h)(this,JG),(0,r.h)(this,QG),(0,r.h)(this,tH),(0,r.h)(this,XG,void 0),(0,r.i)(this,XG,t)}setPolygonColor(t,e,i){if(void 0===(0,r.g)(this,XG).polygonMeshesById[t.id]){let n=Oy(t,(0,r.g)(this,XG).venue.polygons);return null!=n&&null!=n.map.id&&null!=(0,r.g)(this,XG).mapObjects.get(n.map.id).object?void(0,r.k)(this,YG,ZG).call(this,n,e,i):void vy.error("Cannot set color of polygon "+n.id+", could be bad polygon or data mismatch.")}(0,r.k)(this,JG,KG).call(this,t,e,i)}clearPolygonColor(t){var e;let i=t;"string"==typeof t&&(i=(0,r.g)(this,XG).venue.getCollectionItemById("polygons",t));let n=(0,r.g)(this,XG).polygonMeshesById[i.id];n&&(n._MIOriginalMaterial&&((n.material.length?n.material:[n.material]).forEach(t=>Ay(t)),n.material=n._MIOriginalMaterial,delete n._MIOriginalMaterial),delete(0,r.g)(this,XG).highlightedPolygons[i.id],"SINGLE_GEOMETRY"===(null==(e=(0,r.g)(this,XG).loadOptions)?void 0:e.mapRenderStrategy)&&(n.visible=!1),(0,r.g)(this,XG).tryRendering())}clearAllPolygonColors(){let t=Object.keys((0,r.g)(this,XG).highlightedPolygons);for(let e=0,i=t.length;e<i;++e){let i=t[e];this.clearPolygonColor((0,r.g)(this,XG).highlightedPolygons[i])}(0,r.g)(this,XG).highlightedPolygons={},(0,r.g)(this,XG).tryRendering(),(0,r.g)(this,XG).renderer.disposeOfRenderLists()}setPolygonOutlineColor(t){(0,r.g)(this,XG).renderer.implementation.effectComposer.setPolygonOutlineColor(t),(0,r.g)(this,XG).tryRendering()}addPolygonOutline(t){if(void 0===(0,r.g)(this,XG).polygonMeshesById[t.id]){let e=Oy(t,(0,r.g)(this,XG).venue.polygons);return void 0!==e&&null!==e.map.id&&null!==(0,r.g)(this,XG).mapObjects.get(e.map.id).object?void(0,r.k)(this,QG,$G).call(this,e):void vy.error("Cannot outline the polygon "+e.id+", could be bad polygon or data mismatch.")}(0,r.k)(this,tH,eH).call(this,t)}removePolygonOutline(t){let e=(0,r.g)(this,XG).polygonMeshesById[t.id];(0,r.g)(this,XG).outlinedPolygons.delete(t.id),(0,r.g)(this,XG).renderer.implementation.effectComposer.removeSelectionForOutline(e),(0,r.g)(this,XG).tryRendering()}removeAllPolygonOutlines(){for(let t of(0,r.g)(this,XG).outlinedPolygons.values())this.removePolygonOutline(t)}};XG=new WeakMap,YG=new WeakSet,ZG=(0,r.a)(function(t,e,i){(0,r.g)(this,XG).mapObjects.get(t.map.id).load().then(()=>{(0,r.k)(this,JG,KG).call(this,t,e,i)})},"#setPolygonColorLater"),JG=new WeakSet,KG=(0,r.a)(function(t,e,i=!0){var n;let o=(0,r.g)(this,XG).polygonMeshesById[t.id];if(null!=o){i&&((0,r.g)(this,XG).highlightedPolygons[t.id]=t.id),o._MIOriginalMaterial||(o._MIOriginalMaterial=o.material.length?[...o.material]:o.material);let a=(o.material.length?o.material:[o.material]).map(t=>{let i=t.clone();return i.color.set(e||"#4ca1fc"),i});1===a.length?o.material=a[0]:o.material=a,"SINGLE_GEOMETRY"===(null==(n=(0,r.g)(this,XG).loadOptions)?void 0:n.mapRenderStrategy)&&(o.visible=!0),(0,r.g)(this,XG).tryRendering()}else vy.error("Cannot set color of polygon "+t.id+", could be bad polygon or data mismatch.")},"#setPolygonColorNow"),QG=new WeakSet,$G=(0,r.a)(function(t){(0,r.g)(this,XG).mapObjects.get(t.map.id).load().then(()=>{(0,r.g)(this,XG).mapObjects.get(t.map.id).elements&&(0,r.g)(this,XG).mapObjects.get(t.map.id).loadPolygonNow(t.id),(0,r.k)(this,tH,eH).call(this,t)})},"#addPolygonOutlineLater"),tH=new WeakSet,eH=(0,r.a)(function(t){var e;let i=(0,r.g)(this,XG).polygonMeshesById[t.id];null!=i?((0,r.g)(this,XG).outlinedPolygons.set(t.id,t),(0,r.g)(this,XG).renderer.implementation.effectComposer.addSelectionForOutline(i),"SINGLE_GEOMETRY"===(null==(e=(0,r.g)(this,XG).loadOptions)?void 0:e.mapRenderStrategy)&&(i.visible=!0),(0,r.g)(this,XG).tryRendering()):vy.error("Cannot outline the polygon "+t.id+", could be bad polygon or data mismatch.")},"#addPolygonOutlineNow"),(0,r.a)(iH,"PolygonColorsController");var nH=iH,rH=nH;(0,n.a)();var oH,aH=class{constructor(t){(0,r.h)(this,oH,void 0),(0,r.i)(this,oH,t)}setPolygonHoverColor(t,e){let i=Ly(t);i&&((0,r.g)(this,oH).polygonHoverColorsById[i]=new Ua(e))}clearPolygonHoverColor(t){let e=Ly(t);e&&(delete(0,r.g)(this,oH).polygonHoverColorsById[e],(0,r.g)(this,oH).eventSystem.currentHover===e&&(0,r.g)(this,oH).eventSystem.onPolygonHoverOver(e))}clearAllPolygonHoverColors(){for(let t in(0,r.g)(this,oH).polygonHoverColorsById)this.clearPolygonHoverColor(t);(0,r.g)(this,oH).polygonHoverColorsById={}}};oH=new WeakMap,(0,r.a)(aH,"PolygonHoverColorsController");var sH=aH,lH=sH;(0,n.a)();var hH,uH=class{constructor(t){(0,r.h)(this,hH,void 0),(0,r.i)(this,hH,t)}addInteractivePolygon(t){let e=Ly(t);(0,r.g)(this,hH).interactivePolygons[e]=!0}addInteractivePolygonsForAllLocations(t){t||(t={});let e=t.excludeTypes||[],i=(t.locations||(0,r.g)(this,hH).venue.locations.slice()).filter(t=>!e.includes(t.type)),n={};for(let r=0,o=i.length;r<o;++r){let t=i[r].polygons;for(let e=0,i=t.length;e<i;++e){let i=t[e];n[i.id]||(n[i.id]=!0,this.addInteractivePolygon(i))}}}removeInteractivePolygon(t){let e=Ly(t);delete(0,r.g)(this,hH).interactivePolygons[e]}removeAllInteractivePolygons(){for(let t in(0,r.g)(this,hH).interactivePolygons)this.removeInteractivePolygon(t)}};hH=new WeakMap,(0,r.a)(uH,"PolygonInteractionController");var cH=uH,pH=cH;(0,n.a)();var dH,fH=class{constructor(t){(0,r.h)(this,dH,void 0),(0,r.i)(this,dH,t)}createTooltip(t,e,i){return this.createTooltipInternal({nodeOrCoordinate:t,contentHtml:e,options:i})}createCustomTooltip(t,e,i,n){return this.createTooltipInternal({nodeOrCoordinate:t,html:e,selector:i,options:n})}createTooltipInternal({nodeOrCoordinate:t,html:e,contentHtml:i,selector:n,options:o}){let a=t.map.id,s=(0,r.g)(this,dH).mapObjects.get(a),l=0;if(t instanceof cT){let e=t.polygon;null!=e&&(l=e.geometry.scale.z*Math.max(s.mapClass.width,s.mapClass.height)/1e3)}let h=new az({...o,map:a,position:{nodeOrCoordinate:t,height:l},html:e,contentHtml:i,selector:n});return(0,r.g)(this,dH).smartCollisionEngine.add(h.id,h),s.tooltips.add(h),(0,r.g)(this,dH).taskScheduler.scheduleTask(new jD({name:"addTooltip",callback:()=>{(0,r.g)(this,dH).visibleMapsInCurrentScene.map(t=>t.id).includes(h.mapId)&&(h.enable(),(0,r.g)(this,dH).smartCollisionEngine.debouncedUpdate()),(0,r.g)(this,dH).tryRendering()}})),(0,r.g)(this,dH).tryRendering(),h}removeTooltip(t){(0,r.g)(this,dH).smartCollisionEngine.remove("string"==typeof t?t:t.id),(0,r.g)(this,dH).tryRendering()}removeAllTooltips(){Array.from((0,r.g)(this,dH).mapObjects.values()).forEach(t=>{t.tooltips.forEach(t=>{(0,r.g)(this,dH).smartCollisionEngine.remove(t.id)})}),(0,r.g)(this,dH).tryRendering()}};dH=new WeakMap,(0,r.a)(fH,"TooltipsController");var gH=fH,mH=gH;(0,n.a)();var vH,yH,_H=class{constructor(t){(0,r.h)(this,vH,void 0),(0,r.h)(this,yH,void 0),(0,r.i)(this,vH,t),(0,r.i)(this,yH,new FX({scene:(0,r.g)(this,vH).scene,tryRendering:()=>(0,r.g)(this,vH).tryRendering(),getPolygonMeshFromId:t=>(0,r.g)(this,vH).polygonMeshesById[t]}))}updateClosedStateForPolygon(t){if(null==t||null==t.polygon)return;let e,i=Ly(t.polygon);if("string"!=typeof i)return void vy.error("Invalid or no polygon provided. Expecting a MappedinPolygon or a string id. Received: ".concat(t.polygon," of type ").concat(typeof t.polygon));if(null!=t.closed)e=!!t.closed;else{if(null==t.open)return;e=!t.open}let n=Oy(i,(0,r.g)(this,vH).venue.polygons).map.id||(0,r.g)(this,vH).currentMap;(0,r.g)(this,vH).mapObjects.get(n).addPendingMapLoadedTask("Set closed status of polygon ".concat(i," to ").concat(e),()=>{e?(0,r.g)(this,yH).markPolygonAsClosed(i):(0,r.g)(this,yH).markPolygonAsOpen(i)})}openAllPolygons(){[...(0,r.g)(this,vH).mapObjects.values()].reduce((t,e)=>(t.set(e,(0,r.g)(this,vH).venue.polygons.filter(t=>t.map===e.id)),t),new Map).forEach((t,e)=>{e.addPendingMapLoadedTask("Open all polygons belonging to map ".concat(e.id),()=>t.forEach(t=>(0,r.g)(this,yH).markPolygonAsOpen(t.id)))})}destroy(){(0,r.g)(this,yH).dispose()}};vH=new WeakMap,yH=new WeakMap,(0,r.a)(_H,"PolygonStatesController");var xH=_H,bH=xH;(0,n.a)();var wH,EH=class{constructor(t){(0,r.h)(this,wH,void 0),(0,r.i)(this,wH,t)}enableImageFlippingForAllLocations(t){(0,r.g)(this,wH).imageFlippingEnabled=!0,t||(t={});let e=t.excludeTypes||[],i=(t.locations||(0,r.g)(this,wH).venue.locations.slice()).filter(function(t){return-1===e.indexOf(t.type)}),n={};for(let r=0,o=i.length;r<o;++r){let t=i[r].polygons;for(let e=0,i=t.length;e<i;++e){let i=t[e];n[i.id]||(n[i.id]=!0,this.enableImageFlippingForPolygon(i))}}}enableImageFlippingForPolygon(t){let e=(0,r.g)(this,wH).mapObjects.get(t.map.id),i=0,n=(0,r.g)(this,wH).venue.maps.find(t=>t.id===(0,r.g)(this,wH).currentMap).perspectiveId;n&&t&&t.perspectives&&t.perspectives[n]&&t.perspectives[n].image&&t.perspectives[n].image.rotation&&!isNaN(t.perspectives[n].image.rotation.z)?i=t.perspectives[n].image.rotation.z*(Math.PI/180):t&&t.image&&t.image.rotation&&!isNaN(t.image.rotation.z)&&(i=t.image.rotation.z*(Math.PI/180)),(0,r.g)(this,wH).imageFlippingCache[t.map.id]=(0,r.g)(this,wH).imageFlippingCache[t.map.id]||[],(0,r.g)(this,wH).imageFlippingCache[t.map.id].push([t.id,i]),e.mapClass.id===(0,r.g)(this,wH).currentMap&&e.load().then(()=>{e.enableImageFlipping(t.id,i)})}disableImageFlippingForAllPolygons(){let t=Object.keys((0,r.g)(this,wH).mapObjects);for(let e=0,i=t.length;e<i;e++){let i=t[e];(0,r.g)(this,wH).mapObjects.get(i).disableAllImageFlipping()}}};wH=new WeakMap,(0,r.a)(EH,"PolygonImagesController");var MH=EH,SH=MH;(0,n.a)();var TH,CH,AH=class{constructor(t){(0,r.h)(this,TH,void 0),(0,r.h)(this,CH,new Set),(0,r.i)(this,TH,t)}createThreeJSMarker(t){let e=(0,r.g)(this,TH).currentMap;null!=t.mapOrMapId&&(e="string"==typeof t.mapOrMapId?t.mapOrMapId:t.mapOrMapId.id);let i=(0,r.g)(this,TH).mapObjects.get(e).addThreeJSMarker(t);return(0,r.g)(this,CH).add(i),(0,r.g)(this,TH).tryRendering(YB.ANIMATED),i}removeThreeJSMarker(t){if(null==t._mapId)return!1;let e=!1,i=(0,r.g)(this,TH).mapObjects.get(t._mapId);return i&&(e=i.removeThreeJSMarker(t)),(0,r.g)(this,TH).tryRendering(YB.ANIMATED),e}removeAllThreeJSMarkers(){(0,r.g)(this,CH).forEach(t=>{this.removeThreeJSMarker(t)})}};TH=new WeakMap,CH=new WeakMap,(0,r.a)(AH,"ThreeDMarkersController");var PH=AH,IH=PH;(0,n.a)();var LH,OH,NH,qH,RH=class extends FR{constructor(t){super(),(0,r.h)(this,NH),(0,r.f)(this,"core"),(0,r.f)(this,"blueDotCore"),(0,r.h)(this,LH,void 0),(0,r.h)(this,OH,void 0),this.core=t,(0,r.i)(this,OH,Vy(this.core.venue,this.core.options));let e=new IH(this.core);(0,r.i)(this,LH,new jW({threeDMarkerLayer:e,core:this.core})),this.core.eventSystem.setBlueDotManager((0,r.g)(this,LH)),this.blueDotCore=vW({data:this.core.venue,core:this.core,manager:(0,r.g)(this,LH)});let i=C$({core:this.core,blueDotManager:(0,r.g)(this,LH),controller:this.blueDotCore,data:this.core.venue});i.on("isFollowingChanged",({newValue:t})=>{!1===t&&"follow"===this.core.state&&(this.core.state="explore",this.core.publish(12,{state:"explore"}))}),this.core.on(14,t=>{i.isFollowing=t,this.blueDotCore.enabled&&i.isFollowing&&i.centerBlueDot()}),this.core.on(13,({x:t,y:e})=>{(0,r.g)(this,LH).publish("update-position",{x:t,y:e})});let n=ky((0,r.k)(this,NH,qH).bind(this),300);this.core.on(11,n),this.core.on(10,t=>{(0,r.g)(this,LH).setBlueDotSizeFromZoom(t)})}enable(t){this.blueDotCore.enableBlueDot(t)}disable(){this.blueDotCore.disableBlueDot()}};LH=new WeakMap,OH=new WeakMap,NH=new WeakSet,qH=(0,r.a)(function(){if(!(0,r.g)(this,LH).blueDots)return;let t=(0,r.g)(this,LH).blueDots.filter(t=>t.handle._mapId===this.core.currentMap)[0];if(null==t)return;let e=t.handle.object.position.clone(),i=this.core.mapObjects.get((0,r.g)(this,OH).id||this.core.venue.venue.defaultMap);if(!i)throw new Error("Unable to retrieve the target map");let n=e.applyMatrix4(i.object.matrix).project(this.core.cameraObject),o=(n.x+1)/2*this.core.canvasWidth,a=(1-n.y)/2*this.core.canvasHeight;(0,r.g)(this,LH).publish("update-position",{x:o,y:a})},"#publishBlueDot"),(0,r.a)(RH,"BlueDotController");var DH=RH,kH=DH;(0,n.a)(),(0,n.a)();var BH="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAkklEQVRoge3awQ3AIAxD0VAMYf+F0yUixbL8JshXuLSwIqJCwDc9QBeZEOy9p2doAQDTM7TQ2cg5Z3qGFjpHS2YjDiGDe+/0DC0cwkYpJKdnaIFMkY1kymzEIVQcwsYhbPDem56hhc5GHELGIWwcwsYhbJS+2R1CxSFsdH5iO4SMr97Y6FxPqxytVVV+HcTEIWx+9mcIqHSOm9QAAAAASUVORK5CYII=";(0,n.a)(),(0,n.a)();var FH=class{constructor(t){this.active=!1,this.positions=[],this.positionIndex=0,this.timerList=[],this.timeElapsed=0,this.startTime=void 0,this.startPos=0,this.endPos=0,this.smoothingType=void 0,this.isActive=this.isActive.bind(this),this.setCallbacks=this.setCallbacks.bind(this),this.watchPosition=this.watchPosition.bind(this),this.sendPositionResponse=this.sendPositionResponse.bind(this),this.start=this.start.bind(this),this.pause=this.pause.bind(this),this.speed=t.speed||10,window.positions&&this.setPositions(window.positions)}isActive(){return this.active}setPositions(t){this.reset(),this.positions=t,this.endPos=t.length-1}setCallbacks(t,e,i){this.successCallback=t,this.errorCallback=e,this.options=i}clearWatch(){this.reset()}watchPosition(t,e,i){this.setCallbacks(t,e,i),this.start()}sendPositionResponse(t){switch(this.timeElapsed=Date.now()-this.startTime,t.type){case"ERROR":this.errorCallback({code:t.code,message:t.message,timestamp:Date.now()});break;case"ANNOTATION":vy.log("Annotation Update: ".concat(t.annotation));break;default:this.successCallback({coords:t.coords,timestamp:t.timestamp,positionIndex:this.positionIndex})}this.positionIndex===this.endPos?this.reset():this.positionIndex+=1}start(){let t=0;this.positions[this.positionIndex-1]?t=this.positions[this.positionIndex-1].timestamp:this.positions[0].timestamp>1e6&&(t=this.positions[0].timestamp),this.startTime=Date.now(),this.positions.slice(this.positionIndex,this.endPos+1).forEach(e=>{let{timestamp:i}=e;this.timerList.push(setTimeout(()=>this.sendPositionResponse(e),(i-t)/this.speed))}),this.active=!0}pause(){this.timerList.forEach(t=>{clearTimeout(t)}),this.timerList=[],this.active=!1}reset(){this.pause(),this.positionIndex=this.startPos}};(0,r.a)(FH,"FakeGeolocation");var UH=FH,zH=UH;(0,n.a)();var VH={0:{actions:{5:1}},1:{actions:{0:2,1:3,3:4,4:0},markerState:0},2:{actions:{1:3,3:4,2:1,4:0},markerState:1},3:{actions:{0:2,3:4,2:1,4:0},markerState:2},4:{actions:{0:2,1:3,3:4,2:1,4:0},markerState:3}},jH=(0,r.a)(()=>{let t=sF({state:0,markerState:0,transition:e=>{if(null==VH[t.state])return;let i=VH[t.state].actions[e];null!=i&&t.state!==i&&(t.state=i,t.markerState=VH[t.state].markerState)},reset:()=>{t.state=0}});return t},"StateMachine"),GH=jH;(0,n.a)();var HH=(0,r.a)((t,e,i,n=1.5)=>{let r=!1;return(i?[i]:e).forEach(e=>{Math.abs(t.x)<e.width*n&&Math.abs(t.y)<e.height*n&&(r=!0)}),!r},"isOutsideMap");(0,n.a)();var WH=(0,r.e)(ce());function XH(t){return null===t||"number"==typeof t}(0,n.a)(),(0,r.a)(XH,"isValidLevel");var YH=class{constructor(t=2){this.nextLevel=void 0,this.inertia=t,this.levelConfirmations=0}_resetConfirmations(){this.levelConfirmations=0,this.nextLevel=void 0}_resetFilter(){this._resetConfirmations(),this.previousLevel=void 0}filter(t){let e=null,i=void 0===t?null:t;if(!XH(i))throw new TypeError("The argument given to filter() must be null, undefined, or a number");return null===i?this._resetFilter():(XH(this.previousLevel)&&i!==this.previousLevel?XH(this.nextLevel)&&i===this.nextLevel?this.levelConfirmations>=this.inertia?(this._resetConfirmations(),e=i):(this.levelConfirmations++,e=this.previousLevel):(this.levelConfirmations++,this.nextLevel=i,e=this.previousLevel):e=i,this.previousLevel=e),e}};(0,r.a)(YH,"LevelFilter");var ZH=YH,JH=ZH,KH=1.4,QH={NONE:"none",KALMAN:"kalman"},$H=(0,r.a)(t=>({floorLevel:t.coords.floorLevel,timestamp:t.timestamp,latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy,speed:-1,type:t.type}),"parseLocation"),tW=class{constructor(t){this.smooth=this.smooth.bind(this),this.smoothingType=window.mappedin&&window.mappedin.smoothingType||QH.KALMAN,this.lastLocation=null,this.levelFilter=t}formatLocation(t){return{type:"SUCCESS",timestamp:t.timestamp,coords:{latitude:t.latitude,longitude:t.longitude,accuracy:t.accuracy,floorLevel:this.levelFilter.filter(t.floorLevel)}}}kalman(t,e){if(e){let i=t.timestamp-e.timestamp,n=KH*i/1e3;this.latitudeKF.setProcessNoise(n),this.longitudeKF.setProcessNoise(n),this.latitudeKF.setMeasurementNoise(t.accuracy),this.longitudeKF.setMeasurementNoise(t.accuracy)}else this.latitudeKF=new WH.default({R:1,Q:t.accuracy}),this.longitudeKF=new WH.default({R:1,Q:t.accuracy});return{...t,latitude:this.latitudeKF.filter(t.latitude),longitude:this.longitudeKF.filter(t.longitude)}}setSmoothingType(t){this.smoothingType=t}smooth(t){let e;switch(this.smoothingType){case QH.KALMAN:return e=this.kalman($H(t),this.lastLocation),this.lastLocation=e,this.formatLocation(e);case QH.NONE:default:return t}}reset(){this.lastLocation=null,this.levelFilter=new JH(this.levelFilter.inertia)}};(0,r.a)(tW,"PositionSmoothing");var eW=tW,iW=eW;(0,n.a)();var nW=(0,r.a)(t=>t*Math.PI/180,"toRadians"),rW=(0,r.a)(t=>180*t/Math.PI,"toDegrees"),oW=(0,r.a)(function(){let t,e=sF({bearingExpired:!1,previousLat:null,previousLong:null,calculateHeading(t,i,n){e.previousLat||(e.previousLat=t),e.previousLong||(e.previousLong=i);let r=((e.previousLat-t)**2+(e.previousLong-i)**2)**.5,o=n&&n.coords.accuracy<20,a=parseFloat(r.toFixed(5))>0;if(o&&a){e.resetBearingExpirationTimer();let n=e.getBearing([e.previousLat,e.previousLong],[t,i]);return e.previousLat=t,e.previousLong=i,n}return!1},getBearing([t,e],[i,n]){let r=nW(t),o=nW(e),a=nW(i),s=nW(n),l=Math.sin(s-o)*Math.cos(a),h=Math.cos(r)*Math.sin(a)-Math.sin(r)*Math.cos(a)*Math.cos(s-o),u=Math.atan2(l,h);return((u=rW(u))+360)%360},resetBearingExpirationTimer(){null!==t&&e.clearBearingExpirationTimer(),t=setTimeout(()=>{e.bearingExpired=!0,e.clearBearingExpirationTimer()},5e3)},clearBearingExpirationTimer(){null!==t&&(clearTimeout(t),t=null)}});return e},"BlueDotBearing"),aW=oW,sW="#2266ff",lW=class extends aF{constructor(){super(...arguments),(0,r.f)(this,"update",(0,r.a)(t=>{this.publish(0,t)},"update")),(0,r.f)(this,"throwError",(0,r.a)(t=>{this.publish(1,t)},"throwError"))}};(0,r.a)(lW,"PositionUpdater");var hW,uW=exports.PositionUpdater=lW,cW={showBearing:!1,allowImplicitFloorLevel:!1,smoothing:!0,positionUpdater:void 0,baseColor:sW,useRotationMode:!1},pW=class extends uW{constructor(){super(...arguments),(0,r.h)(this,hW,-1)}start(t){(0,r.i)(this,hW,globalThis.navigator.geolocation.watchPosition(this.update,this.throwError,t))}stop(){globalThis.navigator.geolocation.clearWatch((0,r.g)(this,hW))}};hW=new WeakMap,(0,r.a)(pW,"GeolocationUpdater");var dW=pW,fW=3e4,gW=1e4,mW=(0,r.a)(({data:t,core:e,manager:i})=>{let n,o,a,{maps:s,venue:l}=t,h={enableHighAccuracy:!0},u=GH(),c=(0,r.a)(()=>{null!=n&&(clearTimeout(n),n=null)},"clearFallbackToGPSTimer"),p=s.length>1,d=!1,f=aW();f.on("bearingExpiredChanged",t=>{t.newValue&&(b.bearing=null,m(b.userPosition,null))});let g=(0,r.a)((t,e,i)=>{"string"==typeof t&&(y(e,i),b.stateMachine.transition(2),m(null,null))},"setError"),m=(0,r.a)((t,i,n)=>{if(b.userPosition=t,null!=i){b.userMap=i;let r=(b.userMap||e.venue.maps.find(t=>t.id===e.currentMap)).createCoordinate(t.coords.latitude,t.coords.longitude);b.nearestNode=n||r.nearestNode}b.userData={state:u.state,position:b.userPosition,map:b.userMap,bearing:b.bearing,nearestNode:b.nearestNode},e.blueDot.publish("POSITION_UPDATE",{nearestNode:b.nearestNode,bearing:b.bearing,map:b.userMap,position:b.userPosition})},"updateInternalState"),v=(0,r.a)(t=>{g("position-error",t.code,t.message),vy.warn("ERROR(".concat(t.code,"): ").concat(t.message))},"onPositionError");function y(t,i){b.state={reason:t,message:i,markerVisibility:u.markerState,name:u.state},e.blueDot.publish("STATE_CHANGE",b.state)}(0,r.a)(y,"setReason");let _=(0,r.a)((t,e)=>{let i=s,n=t.coords.latitude,r=t.coords.longitude;null!=e&&(i=s.filter(t=>t.elevation===e));let o=i.reduce((t,e)=>{let i=e.createCoordinate(n,r),o=i.nearestNode,a=e.createCoordinateByXY(o.x,o.y).absoluteDistanceTo(i);return a<t[1]?[e,a,o]:t},[i[0],1/0,null]);return{targetMap:o[0],nearestNode:o[2]}},"determineCurrentMapFromCoordinates"),x=(0,r.a)(t=>{var i,r;{let h=t.coords.floorLevel;void 0!==window.floorLevel&&(h=window.floorLevel);let g={timestamp:t.timestamp,type:t.type,coords:{accuracy:t.coords.accuracy,latitude:t.coords.latitude,longitude:t.coords.longitude,floorLevel:h}};null!=h&&(d=!0),window.mappedin&&(Array.isArray(window.mappedin.bluedotCaptureData)?window.mappedin.bluedotCaptureData.push(g):window.mappedin.bluedotCaptureData=[g]),a&&clearTimeout(a),a=setTimeout(()=>{u.transition(3),y(),b.positionSmoothing.reset(),m(b.userPosition,null)},b.locationUncertainTimeoutPeriod);let v=e.getPositionLatLon(g.coords.latitude,g.coords.longitude),x=HH(v,s);if(null==g.coords.latitude||null==g.coords.longitude)return b.positionSmoothing.reset(),void y(1);if(x)return b.positionSmoothing.reset(),b.stateMachine.transition(2),y(0),void(b.userData={state:u.state,position:null,map:null,bearing:null,nearestNode:null});let w,E=null==(i=b.enableBlueDotOptions)?void 0:i.smoothing;w=!0===E||void 0===E&&null==g.coords.floorLevel?b.positionSmoothing.smooth(g):g,h=w.coords.floorLevel;let M=w.coords.latitude,S=w.coords.longitude;if(null!=(r=b.enableBlueDotOptions)&&r.showBearing){let t=f.calculateHeading(M,S,w);!1!==t&&(b.bearing=t)}let T=null,C=null,A=l.isMultiBuilding;if(A&&"hudson-yards"!==l.slug&&null!=h){let t=_(w,h);T=t.targetMap,C=t.nearestNode}if("hudson-yards"===l.slug){let t=b.userMap;if(null==h&&HH(v,s,t,.55)&&(T=s.filter(t=>"5b5f5becadd5444692000001"===t.id)[0]),null!=h){let t=s.filter(t=>t.elevation===h);t.length>1&&(t=t.filter(t=>"5b5f20e3f3ea231068000000"===t.group)),T=t[0]}}if(!T&&null!=h){let t=s.filter(t=>t.elevation===h);1===t.length&&(T=t[0])}if(b.forceBlueDot&&b.userMap&&!d?T=b.userMap:p||(T=s[0]),T||b.forceBlueDot&&3!==u.state)u.transition(1),c();else{if(3===u.state)return o={...w},void(null==n&&(n=setTimeout(()=>{if(u.transition(0),A){let t=_(o);T=t.targetMap,C=t.nearestNode}m(o,T,C),n=null},b.fallbackToGPSTimeoutPeriod)));u.transition(0)}y(),m(w,T)}},"onPositionReceived"),b=sF({bearing:null,state:{reason:void 0,message:void 0,markerVisibility:u.markerState,name:u.state},positionUpdater:null,positionSmoothing:new iW(new JH),locationUncertainTimeoutPeriod:fW,fallbackToGPSTimeoutPeriod:gW,userMap:s.find(t=>t.id===l.defaultMap),userPosition:null,nearestNode:null,forceBlueDot:!1,userData:null,enabled:!1,stateMachine:u,enableBlueDotOptions:cW,enableBlueDot:t=>{var e,i,n,r,o;b.enableBlueDotOptions={...cW,...t},b.enabled=!0,b.enableBlueDotOptions&&b.enableBlueDotOptions.allowImplicitFloorLevel&&(b.forceBlueDot=b.enableBlueDotOptions.allowImplicitFloorLevel),null!=(null==(e=b.enableBlueDotOptions)?void 0:e.positionUpdater)?(b.positionUpdater=b.enableBlueDotOptions.positionUpdater,"function"==typeof(null==(i=null==b?void 0:b.positionUpdater)?void 0:i.start)&&(null==(n=null==b?void 0:b.positionUpdater)||n.start())):(b.positionUpdater=new dW,null==(o=null==(r=b.positionUpdater)?void 0:r.start)||o.call(r,h)),b.positionUpdater.on(0,x),b.positionUpdater.on(1,v),u.transition(5)},disableBlueDot(){var t,e,n,r;b.enabled=!1,"function"==typeof(null==(t=null==b?void 0:b.positionUpdater)?void 0:t.stop)&&(null==(e=null==b?void 0:b.positionUpdater)||e.stop()),null==(n=b.positionUpdater)||n.off(0,x),null==(r=b.positionUpdater)||r.off(1,v),u.transition(4),i.cleanup()}});return b},"BlueDot");mW.FakeGeolocation=zH;var vW=mW,yW={GHOST:"ghost",GREY:"grey",BLUE:"blue"},_W=(0,r.a)((t,e)=>new ja({color:t,transparent:!0,depthTest:!1,opacity:e}),"makeMeshBasicMaterial"),xW=(0,r.a)(t=>{let e=new Dg,i=0;for(e.moveTo(t,0);i<=2*Math.PI;)e.lineTo(Math.cos(i)*t,Math.sin(i)*t),i+=Math.PI/16;return e},"drawCircle"),bW=(0,r.a)(({baseColor:t=sW})=>({outer:{blue:_W(16777215,1),ghost:_W(16777215,.5)},inner:{blue:_W(t,1),grey:_W(14540253,1),ghost:_W(t,.5)},aura:{inner:_W(t,.2),outer:_W(t,.3)},bearing:{blue:_W(t,.7),ghost:_W(t,.4)}}),"makeMaterials"),wW=(0,r.a)((t,e)=>{let i=xW(t);if(e&&e<t){let t=xW(e);i.holes=[t]}return new xm(i,{depth:0,bevelEnabled:!1,steps:2})},"createAnnularGeometry"),EW=(0,r.a)((t,e,i)=>{let n=Math.sqrt(Math.pow(t,2)+Math.pow(e,2))/i;return n>1?n=1:n<0&&(n=0),new Tr(0,n)},"generateRadialUV"),MW=(0,r.a)(t=>({generateTopUV:(e,i,n,r,o)=>{let a=i[3*n],s=i[3*n+1],l=i[3*r],h=i[3*r+1],u=i[3*o],c=i[3*o+1];return[EW(a,s,t),EW(l,h,t),EW(u,c,t)]},generateSideWallUV:()=>[new Tr(0,1),new Tr(0,1),new Tr(0,1),new Tr(0,1)]}),"radialUVGenerator"),SW=(0,r.a)((t,e,i=0)=>{if(Math.abs(t)>=Math.PI)throw new Error("Sector angle too wide!");let n=i/Math.tan(t/2),r=i/Math.sin(t/2),o=r+e,a=10,s=new Dg;s.moveTo(r*Math.cos(t/2)-n,r*Math.sin(t/2));for(let l=0;l<a;l++)s.lineTo(o*Math.cos(t/2-t/a*l)-n,o*Math.sin(t/2-t/a*l));for(let l=0;l<a;l++)s.lineTo(i*Math.cos(Math.PI/-2+Math.PI/a*l),i*Math.sin(Math.PI/-2+Math.PI/a*l));return new xm(s,{depth:1,bevelEnabled:!1,UVGenerator:MW(e)})},"createSectorGeometry"),TW=(0,r.a)(function(t,e=0,i=0,{baseColor:n=sW}){let r,o,a=new ya,s=new ya,l=bW({baseColor:new Ua(n)});if(l.outer.grey=l.outer.blue,e>=0){let t=new qg(1,1,10,32),i=l.aura.inner;(r=new Cs(t,i)).position.set(0,0,0),r.rotation.set(Math.PI/2,0,0),r.scale.set(e,1,e),s.add(r)}let h=SW(Math.PI/6,120,30),u=l.bearing[t];u&&(new cv).load(BH,t=>{u.colorSpace=Fn,u.alphaMap=t,u.needsUpdate=!0}),(o=new Cs(h,u)).rotation.set(0,0,i),s.add(o);let c=wW(30,22.5),p=wW(22.5),d=new Cs(c,l.outer[t]),f=new Cs(p,l.inner[t]);return a.add(d),a.add(f),s.add(a),[s,a,d,f,o,r].forEach(t=>{t.renderOrder=999,t.layers.set(CF.ALWAYS_ON_TOP)}),{outerObject:s,radiusObject:r,dotObject:a,bearingObject:o}},"makeBlueDot"),CW=(0,r.a)((t,e,i)=>{let n=(e.x-i.x)**2+(e.y-i.y)**2,r=0;n&&(r=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/n),r>1&&(r=1),r<0&&(r=0);let o=e.x+r*(i.x-e.x),a=e.y+r*(i.y-e.y);return{proportion:r,distance:Math.sqrt((t.x-o)**2+(t.y-a)**2)}},"distanceToSegment"),AW=(0,r.a)((t,e)=>null!=t?PW(-t)-e+Math.PI/2:null,"getBearing"),PW=(0,r.a)(t=>t*Math.PI/180,"degToRadians"),IW=(0,r.a)((t,e)=>{let i,n,r,o=Number.MAX_SAFE_INTEGER;for(let a=0;a<t.length-1;a++){let s=t[a],l=t[a+1],h=CW(e,s,l);h.distance<=o&&(o=h.distance,n=h.proportion,r=a,i=h.proportion>.5?l:s)}return{nearestNode:i,proportion:n,index:r}},"getNearestPathSegment"),LW=(0,r.a)((t,e,i)=>{let n=[],o=[];for(let r=0;r<t.length-1;r++){let e=t[r],i=t[r+1],a=i.x-e.x,s=i.y-e.y,l=Math.atan2(a,s);n.push(l);let h=Math.sqrt(a**2+s**2);o.push(h)}let a,s=[];for(let r=0;r<n.length;r++){let e=n[r],i=o[r];null==a||Math.abs(a-e)>.2?(a=e,s.push({angle:e,distance:i,nodes:[t[r]]})):(s[s.length-1].distance+=i,s[s.length-1].nodes.push(t[r]))}s[s.length-1].nodes.push(t[t.length-1]);let l=i||100,h=(0,r.a)(()=>s.filter(t=>t.distance>=l).length,"validGroups");for(;!h();)l/=2;let u=s.find(t=>t.nodes.indexOf(e)>-1),c=s.indexOf(u);for(;c>0&&s[c].distance<l;)c-=1;return s[c].angle},"getHeadingOnPath"),OW=(0,r.a)((t,e,i,n,r=.8)=>{let o=i*(n?.05:0),a=null!=e?Math.cos(e-Math.PI/2)*o:0,s=null!=e?Math.sin(e-Math.PI/2)*o:0;return{position:{x:t.x-a,y:t.y-s},rotation:e||void 0,zoom:i,tilt:r}},"getCameraLookahead"),NW=(0,r.e)(o()),qW=2e3,RW=8,DW=65,kW=3,BW={duration:2e3,easing:NW.default.Easing.Cubic.Out};function FW(t){return"number"==typeof t&&!isNaN(t)&&t>=0}(0,r.a)(FW,"isNonNegativeNumber");var UW=(0,r.a)((t,e,i)=>t<e?t:t<i?e:t*e/i,"ledge"),zW=class extends aF{constructor({threeDMarkerLayer:t,core:e,minRadius:i=RW,maxRadius:n=DW,radiusUpdateInterval:r=kW,radiusTweenOptions:o=BW}){if(super(),this.threeDMarkerLayer=t,this.core=e,!FW(i))throw new Error("Expecting minRadius parameter to be a valid number >= 0. Provided: ".concat(i));if(this.minRadius=i,!FW(n))throw new Error("Expecting maxRadius parameter to be a valid number >= 0. Provided: ".concat(n));if(n<this.minRadius)throw new Error("Expecting maxRadius parameter to be >= minRadius parameter. Provided: ".concat(n,"; minRadius = ").concat(this.minRadius));if(this.maxRadius=n,!FW(r))throw new Error("Expecting radiusUpdateInterval parameter to be a valid number >= 0. Provided: ".concat(r));this.radiusUpdateInterval=r,this.radiusTweenOptions=o,this.state=null,this.prevRadius=null,this.radiusTween=null,this.prevBearing=null,this.bearingTween=null,this.currentX=null}computeNewRadius(t){if(!FW(t)||t<this.minRadius)return 0;if(t>=this.maxRadius)return this.maxRadius;if(0===this.radiusUpdateInterval)return t;{let e=t-this.minRadius;return e-e%this.radiusUpdateInterval+this.minRadius}}updateBlueDotSize(){this.blueDots&&this.blueDots.forEach(t=>{let e=this.core.controls.getZoomScaledMin(),i=3*e,n=5*e,r=UW(this.currentX,i,n)/2e3;t.dotObject.scale.set(r,r,r),t.bearing&&t.bearing.scale.set(r,r,r)})}setBlueDotSizeFromZoom(t){this.currentX=t,this.updateBlueDotSize()}update(t){var e;let i=t.mode||this.state.mode,n=t.mapId||t.map&&t.map.id||this.core.currentMap;null==t.bearing&&(this.prevBearing=null),this.positionTween&&this.positionTween.stop(),this.state&&(i!==this.state.mode||n!==this.state.targetMap)&&this.cleanup();let r=this.computeNewRadius(t.radius),o=this.core.mapObjects.get(n);if(!this.blueDots){let e=[];for(let n of this.core.mapObjects.values()){let r=null!=o&&n===o,a=null!=o&&o.mapClass.mapGroup.maps.includes(n.mapClass),s="OVERVIEW"===this.core.stackedMaps.currentState;if(r||!s&&a){let o=n.getPositionLatLon(t.coordinates.latitude,t.coordinates.longitude),a=n.id!==r&&i===yW.BLUE?yW.GHOST:i,s=TW(a,0,AW(t.bearing,this.core.venue.maps.find(t=>t.id===this.core.currentMap).getNorth()),{baseColor:t.baseColor});this.prevRadius=0;let l=this.threeDMarkerLayer.createThreeJSMarker({object:s.outerObject,mapOrMapId:n,position:o});e.push({handle:l,radius:s.radiusObject,dotObject:s.dotObject,bearing:s.bearingObject})}this.blueDots=e,this.currentX&&this.updateBlueDotSize()}}this.currentPositionLatLon?(this.positionTween=new NW.default.Tween(this.currentPositionLatLon).to({lat:t.coordinates.latitude,lon:t.coordinates.longitude},qW).easing(NW.default.Easing.Cubic.Out).onUpdate(t=>{this.currentPositionLatLon=t,this.blueDots.forEach(e=>{let i=e.handle._mapId,n=this.core.mapObjects.get(i),r=n.getPositionLatLon(t.lat,t.lon);n.translateChild(e.handle.object,r)}),this.core.tryRendering(YB.ALWAYS_ON_TOP)}),this.positionTween.start()):(this.currentPositionLatLon={lat:t.coordinates.latitude,lon:t.coordinates.longitude},this.blueDots.forEach(e=>{let i=e.handle._mapId,n=this.core.mapObjects.get(i),r=n.getPositionLatLon(t.coordinates.latitude,t.coordinates.longitude);n.translateChild(e.handle.object,r)})),Math.abs(r-this.prevRadius)>=Number.EPSILON&&(null!=this.radiusTween&&this.radiusTween.stop(),this.radiusTween=new NW.default.Tween({value:this.prevRadius}).to({value:r},this.radiusTweenOptions.duration).easing(this.radiusTweenOptions.easing).onUpdate(({value:t})=>{this.prevRadius=t,null!=this.blueDots&&this.blueDots.forEach(e=>{if(e.radius){let i=e.handle._mapId,n=this.core.mapObjects.get(i),r=t*n.getMapScale();e.radius.scale.set(r,1,r)}}),this.core.tryRendering(YB.ALWAYS_ON_TOP)}).start());let a=t.bearing;if(null!=t.bearing){if(null==this.prevBearing)this.prevBearing=t.bearing,this.setBearing(t.bearing);else if(Math.abs(a-this.prevBearing)>=Number.EPSILON){let t=(null!=(e=this.prevBearing)?e:a)%360,i=a%360;Math.abs(t-i)>180&&(t>i?i+=360:t+=360),this.animateBearing(t,i)}}else null!=this.blueDots&&this.blueDots.forEach(t=>{t.bearing&&(t.bearing.visible=!1)});this.state={mode:i,targetMap:n},this.core.tryRendering(YB.ALWAYS_ON_TOP)}animateBearing(t,e){this.bearingTween=new NW.default.Tween({value:t}).to({value:e},1e3).easing(NW.default.Easing.Cubic.Out).onUpdate(({value:t})=>{this.prevBearing=t,this.setBearing(t),this.core.tryRendering(YB.ALWAYS_ON_TOP)}).start()}setBearing(t){null!=this.blueDots&&this.blueDots.forEach(e=>{e.bearing&&(e.bearing.visible=!0,e.bearing.rotation.set(0,0,AW(t,this.core.venue.maps.find(t=>t.id===this.core.currentMap).getNorth())))})}getBlueDotForMap(t){if(!Array.isArray(this.blueDots))return;let e=("string"==typeof t&&t.length>0?t:"object"==typeof t?t.id:void 0)||this.core.currentMap,i=this.blueDots.filter(t=>t.handle._mapId===e);if(i.length>0){let t=new ho,e=new ho;return i[0].dotObject.updateMatrixWorld(),i[0].dotObject.getWorldPosition(t),i[0].dotObject.getWorldScale(e),e.divideScalar(2),e.setZ(0),t.sub(e),i[0].dotObject}}cleanup(){this.blueDots&&(this.blueDots.forEach(t=>{t.handle._object.children.forEach(t=>{t.geometry?t.geometry.dispose():t.children.forEach(t=>{t.geometry.dispose()})}),this.threeDMarkerLayer.removeThreeJSMarker(t.handle)}),delete this.blueDots),this.state=null,null!=this.positionTween&&this.positionTween.stop(),null!=this.radiusTween&&this.radiusTween.stop()}};(0,r.a)(zW,"BlueDotManager");var VW=zW,jW=VW;(0,n.a)();var GW,HW,WW,XW=class extends FR{constructor(t){super(),(0,r.f)(this,"core"),(0,r.f)(this,"currentAnimation"),(0,r.h)(this,GW,void 0),(0,r.h)(this,HW,void 0),(0,r.h)(this,WW,void 0),(0,r.f)(this,"interactions",{set:t=>{null!=(null==t?void 0:t.pan)&&(this.core.controls.enablePan=t.pan),null!=(null==t?void 0:t.zoom)&&(this.core.controls.enableZoom=t.zoom),null!=(null==t?void 0:t.rotationAndTilt)&&(this.core.controls.enableRotate=t.rotationAndTilt)},enable:()=>{this.core.controls.enablePan=!0,this.core.controls.enableZoom=!0,this.core.controls.enableRotate=!0},disable:()=>{this.core.controls.enablePan=!1,this.core.controls.enableZoom=!1,this.core.controls.enableRotate=!1}}),this.core=t,(0,r.i)(this,WW,!1);let e=ky(()=>{this._subscribers.CHANGED&&this.publish("CHANGED",{tilt:this.tilt,zoom:this.zoom,rotation:this.rotation,position:this.position})},0);this.core.controls.dispatcher.addEventListener("positionUpdated",()=>{this._subscribers.POSITION_CHANGED&&this.publish("POSITION_CHANGED",this.position),e()}),this.core.controls.dispatcher.addEventListener("zoomUpdated",()=>{this._subscribers.ZOOM_CHANGED&&this.publish("ZOOM_CHANGED",this.zoom),e()}),this.core.controls.dispatcher.addEventListener("rotationUpdated",()=>{this._subscribers.ROTATION_CHANGED&&this.publish("ROTATION_CHANGED",this.rotation),e()}),this.core.controls.dispatcher.addEventListener("tiltUpdated",()=>{this._subscribers.TILT_CHANGED&&this.publish("TILT_CHANGED",this.tilt),e()});let i=(0,r.a)(()=>{(0,r.g)(this,WW)||(this.publish("USER_INTERACTION_START",void 0),(0,r.i)(this,WW,!0))},"publishVoidEventStart"),n=(0,r.a)(()=>{this.publish("USER_INTERACTION_END",void 0),(0,r.i)(this,WW,!1)},"publishVoidEventEnd");this.core.controls.dispatcher.addEventListener("userPanStart",i),this.core.controls.dispatcher.addEventListener("userZoomStart",i),this.core.controls.dispatcher.addEventListener("userRotateStart",i),this.core.controls.dispatcher.addEventListener("userTiltStart",i),this.core.controls.dispatcher.addEventListener("userPedestalStart",i),this.core.controls.dispatcher.addEventListener("userDollyStart",i),this.core.controls.dispatcher.addEventListener("userPanEnd",n),this.core.controls.dispatcher.addEventListener("userPedestalEnd",n),this.core.controls.dispatcher.addEventListener("userZoomEnd",n),this.core.controls.dispatcher.addEventListener("userRotateEnd",n),this.core.controls.dispatcher.addEventListener("userDollyEnd",n),this.core.controls.dispatcher.addEventListener("userTiltEnd",n)}get zoom(){return this.core.controls.getZoom()}get rotation(){return this.core.controls.getRotation()}get tilt(){return this.core.controls.getTilt()}get minZoom(){return this.core.controls.minZoom}set minZoom(t){this.core.controls.minZoom=t}get maxZoom(){return this.core.controls.maxZoom}set maxZoom(t){this.core.controls.maxZoom=t}get maxTilt(){return this.core.controls.maxTilt}set maxTilt(t){this.core.controls.maxTilt=Math.max(0,Math.min(t,rV))}get position(){let t=this.core.controls.getPosition();return this.core.convert3DMapPositionToCoordinate(t)}setSafeAreaInsets(t){this.core.setPadding(t)}convertZoomLevelToAltitude(t){return this.core.controls.convertZoomToAltitude(t)}convertAltitudeToZoomLevel(t){return this.core.controls.convertAltitudeToZoomLevel(t)}getSafeAreaInsets(){return this.core.cachedPadding}focusOn(t,e){var i,n;if("OVERVIEW"===this.core.stackedMaps.currentState)return Promise.reject(new Error("Cannot focus on a map when in overview mode"));let o=this.core.currentMap,a=null==(n=null==(i=t.coordinates)?void 0:i.filter(t=>t.map.id===o))?void 0:n.map(t=>this.core.convertTo3DMapPosition({x:t.x,y:t.y})),s=new Promise((t,e)=>{(0,r.i)(this,GW,t),(0,r.i)(this,HW,e)});return this.core.focusOn({changeZoom:null==e?void 0:e.changeZoom,duration:null==e?void 0:e.duration,focusZoomFactor:1,curve:(null==e?void 0:e.easing)&&RB[e.easing],minZoom:null==e?void 0:e.minZoom,maxZoom:null==e?void 0:e.maxZoom,updateZoomLimits:null==e?void 0:e.updateZoomLimits,nodes:t.nodes,points:a,polygons:t.polygons,padding:null==e?void 0:e.safeAreaInsets,tilt:null==e?void 0:e.tilt,rotation:null==e?void 0:e.rotation,callback:()=>{this.currentAnimation=void 0,(0,r.g)(this,GW).call(this),(0,r.i)(this,GW,void 0),(0,r.i)(this,HW,void 0)}}),this.currentAnimation=s,s}set(t){if(!t)return;if("OVERVIEW"===this.core.stackedMaps.currentState)throw new Error("Cannot set camera on a map when in overview mode");let e,{zoom:i,rotation:n,tilt:r,position:o}=t;o&&(e=this.core.convertTo3DMapPosition(o)),this.core.controls.setMulti(e||this.core.controls.getPosition(),i,n,r)}animate(t,e){if("OVERVIEW"===this.core.stackedMaps.currentState)return Promise.reject(new Error("Cannot animate on a map when in overview mode"));let i;t.position&&(i=this.core.convertTo3DMapPosition(t.position));let n={position:i,zoom:t.zoom,tilt:t.tilt,rotation:t.rotation},o=new Promise((t,e)=>{(0,r.i)(this,GW,t),(0,r.i)(this,HW,e)});return this.core.controls.animateCamera(n,null==e?void 0:e.duration,(null==e?void 0:e.easing)&&RB[e.easing],()=>{this.currentAnimation=void 0,(0,r.g)(this,GW).call(this),(0,r.i)(this,GW,void 0),(0,r.i)(this,HW,void 0)}),this.currentAnimation=o,o}async translate(t,e,i){if("OVERVIEW"===this.core.stackedMaps.currentState)return Promise.reject(new Error("Cannot translate a map when in overview mode"));if(!t||!e||null==this.core.currentMap)return;let n=this.core.mapObjects.get(this.core.currentMap).mapClass,r=this.rotation,o=r+PW(90),a=r-PW(90),s=r+Math.PI,l=r,h=this.position,{x:u,y:c}=this.position,p=qy(n);if(1===p){u+=e*Math.cos(o),c-=e*Math.sin(o);let t=this.core.convertTo3DMapPosition(n.createCoordinateByXY(u,c)),i=this.core.convert3DMapPositionToCoordinate(t);p=e/h.absoluteDistanceTo(i)}let d=e*p;switch(t){case"up":u+=d*Math.cos(o),c-=d*Math.sin(o);break;case"down":u+=d*Math.cos(a),c-=d*Math.sin(a);break;case"left":u+=d*Math.cos(s),c-=d*Math.sin(s);break;case"right":u+=d*Math.cos(l),c-=d*Math.sin(l)}return 0!==this.tilt&&e&&await this.animate({tilt:0},i),this.animate({position:n.createCoordinateByXY(u,c)},i)}cancelAnimation(){this.currentAnimation&&(this.core.controls.cancelAnimation(),(0,r.g)(this,HW).call(this),this.currentAnimation=void 0,(0,r.i)(this,GW,void 0),(0,r.i)(this,HW,void 0))}};GW=new WeakMap,HW=new WeakMap,WW=new WeakMap,(0,r.a)(XW,"CameraController");var YW=XW,ZW=YW;(0,n.a)();var JW=(0,r.e)(pe());(0,n.a)();var KW,QW,$W,tX,eX,iX,nX,rX,oX,aX,sX,lX,hX=!1,uX=class t{constructor(e){(0,r.h)(this,KW,void 0),(0,r.h)(this,QW,void 0),(0,r.h)(this,$W,void 0),(0,r.h)(this,tX,void 0),(0,r.f)(this,"object"),(0,r.h)(this,eX,(0,r.a)((t,e)=>{if(null==(0,r.g)(this,QW))return;(0,r.g)(this,KW).cameraObject.updateMatrixWorld(),(0,r.g)(this,KW).cameraObject.updateMatrix(),(0,r.i)(this,$W,new Yv),(0,r.g)(this,$W).layers.set(CF.ALWAYS_ON_TOP);let i={x:0,y:0};i.x=t/(0,r.g)(this,KW).canvasWidth*2-1,i.y=-e/(0,r.g)(this,KW).canvasHeight*2+1;let n=new ho(i.x,i.y,0);(0,r.g)(this,$W).setFromCamera(n,(0,r.g)(this,KW).cameraObject.clone());let o=(0,r.g)(this,$W).intersectObject((0,r.g)(this,QW),!0);return o.length<1?void 0:(0,r.g)(this,KW).cameraObject.worldToLocal(o[0].point)},"#getPlanePositionAtScreenCoordinates")),(0,r.h)(this,iX,(0,r.a)((t,e)=>{let i=e.position.z;t<i?t-=i:t+=i;let n=e.fov*Math.PI/180;return 2*Math.tan(n/2)*Math.abs(t)},"#visibleHeightAtZDepth")),(0,r.h)(this,nX,(0,r.a)((t,e)=>(0,r.g)(this,iX).call(this,t,e)*e.aspect,"#visibleWidthAtZDepth")),(0,r.h)(this,rX,(0,r.a)(()=>({"top-left":{x:0,y:1},"top-right":{x:1,y:1},"bottom-left":{x:0,y:0},"bottom-right":{x:1,y:0},center:{x:.5,y:.5},top:{x:.5,y:1},bottom:{x:.5,y:0},left:{x:0,y:.5},right:{x:1,y:.5}})[t.OPTIONS.position],"#getPositionAlignedAnchor")),(0,r.h)(this,oX,(0,r.a)(()=>{let e=t.OPTIONS.padding;return{"top-left":{x:e,y:e},"top-right":{x:-e,y:e},"bottom-left":{x:e,y:-e},"bottom-right":{x:-e,y:-e},center:{x:0,y:0},top:{x:0,y:e},bottom:{x:0,y:-e},left:{x:e,y:0},right:{x:-e,y:0}}[t.OPTIONS.position]},"#getPositionAlignedPadding")),(0,r.h)(this,aX,(0,r.a)(()=>({"top-left":{x:0,y:0},"top-right":{x:(0,r.g)(this,KW).canvasWidth,y:0},"bottom-left":{x:0,y:(0,r.g)(this,KW).canvasHeight},"bottom-right":{x:(0,r.g)(this,KW).canvasWidth,y:(0,r.g)(this,KW).canvasHeight},center:{x:(0,r.g)(this,KW).canvasWidth/2,y:(0,r.g)(this,KW).canvasHeight/2},top:{x:(0,r.g)(this,KW).canvasWidth/2,y:0},bottom:{x:(0,r.g)(this,KW).canvasWidth/2,y:(0,r.g)(this,KW).canvasHeight},left:{x:0,y:(0,r.g)(this,KW).canvasHeight/2},right:{x:(0,r.g)(this,KW).canvasWidth,y:(0,r.g)(this,KW).canvasHeight/2}})[t.OPTIONS.position],"#getPositionAlignedCanvasCoordinates")),(0,r.h)(this,sX,(0,r.a)(()=>{(new cv).load(tj.get("logo"),t=>{(0,r.i)(this,tX,t);let e=(0,r.g)(this,KW).cameraObject.near+.1*((0,r.g)(this,KW).cameraObject.far-(0,r.g)(this,KW).cameraObject.near),i=(0,r.g)(this,iX).call(this,e,(0,r.g)(this,KW).cameraObject),n=(0,r.g)(this,nX).call(this,e,(0,r.g)(this,KW).cameraObject),o=Math.max(i,n),a=new cl(10*o,10*o,100,100),s=new Am({visible:hX,wireframe:!0});(0,r.i)(this,QW,new Cs(a,s)),(0,r.g)(this,QW).position.set(0,0,-1*e);let l=new uf({map:(0,r.g)(this,tX),color:"#000000"});l.opacity=.5,l.depthTest=!1,l.sizeAttenuation=!1,this.object=new Mf(l),this.object.layers.set(CF.ALWAYS_ON_TOP),(0,r.g)(this,QW).layers.set(CF.ALWAYS_ON_TOP),this.object.renderOrder=999,this.object.position.set(0,0,0),(0,r.g)(this,QW).add(this.object),(0,r.g)(this,KW).cameraObject.add((0,r.g)(this,QW)),(0,r.g)(this,lX).call(this)})},"#renderWatermark")),(0,r.h)(this,lX,(0,r.a)(()=>{if(null==this.object||null==(0,r.g)(this,tX))return;let e=(0,r.g)(this,rX).call(this);this.object.center.x=e.x,this.object.center.y=e.y;let i=(0,r.g)(this,oX).call(this),n=(0,r.g)(this,aX).call(this),o=(0,r.g)(this,eX).call(this,n.x+i.x,n.y+i.y);if(null==o)return;this.object.position.set(o.x,o.y,0);let a=15e-5*t.OPTIONS.scale,s=(0,r.g)(this,tX).image.width*a,l=(0,r.g)(this,tX).image.height*a;this.object.scale.set(s,l,1),(0,r.g)(this,KW).tryRendering(YB.ALWAYS_ON_TOP)},"#updateWatermark")),(0,r.f)(this,"show",(0,r.a)(()=>{null==this.object||null==(0,r.g)(this,QW)?(0,r.g)(this,sX).call(this):(this.object.material.visible=!0,(0,r.g)(this,lX).call(this))},"show")),(0,r.f)(this,"hide",(0,r.a)(()=>{this.object.material.visible=!1,(0,r.g)(this,KW).tryRendering(YB.ALWAYS_ON_TOP)},"hide")),(0,r.f)(this,"resize",(0,r.a)(()=>{(0,r.g)(this,lX).call(this)},"resize")),(0,r.i)(this,KW,e),t.ENABLED&&this.show()}};KW=new WeakMap,QW=new WeakMap,$W=new WeakMap,tX=new WeakMap,eX=new WeakMap,iX=new WeakMap,nX=new WeakMap,rX=new WeakMap,oX=new WeakMap,aX=new WeakMap,sX=new WeakMap,lX=new WeakMap,(0,r.a)(uX,"WatermarkController"),(0,r.f)(uX,"ENABLED",!1),(0,r.f)(uX,"OPTIONS",{padding:16,scale:1,position:"bottom-left",onClick:()=>{null!=window&&window.open("https://www.mappedin.com")}});var cX,pX=uX,dX=pX,fX=300,gX=30,mX=1.5,vX=250,yX=300,_X=50,xX=[];function bX(){xX=[],cX&&(clearTimeout(cX),cX=null)}(0,r.a)(bX,"flushTapEvents");var wX=class{constructor(t){(0,r.f)(this,"type","SINGLE"),(0,r.f)(this,"event"),(0,r.f)(this,"timestamp"),this.event=t,this.timestamp=performance.now()}};(0,r.a)(wX,"Tap");var EX=wX;function MX(t){let{position:{nodeOrCoordinate:e}}=t,i={id:t.id};return e instanceof cT?i.node=e:e instanceof PC&&(i.coordinate=e),i}function SX(t){let e=MX(t);return delete e.coordinate,{text:t.options.text,...e}}function TX(t){return t.reduce((t,e)=>(e instanceof FU?t.labels.push(SX(e)):e instanceof uz?t.markers.push(MX(e)):e instanceof az&&t.tooltips.push(MX(e)),t),{labels:[],markers:[],tooltips:[]})}(0,r.a)(MX,"getClickEventPayloadFromCollider"),(0,r.a)(SX,"getClickEventPayloadFromFloatingLabels"),(0,r.a)(TX,"categorizeColliders");var CX=class{constructor(t){(0,r.f)(this,"core"),(0,r.f)(this,"blueDotManager"),(0,r.f)(this,"rendererDomElement"),(0,r.f)(this,"currentHover",null),(0,r.f)(this,"hoverLabel"),(0,r.f)(this,"hoverColor",new Ua("#cccccc")),(0,r.f)(this,"options",{disableHover:!1}),(0,r.f)(this,"setBlueDotManager",(0,r.a)(t=>{this.blueDotManager=t},"setBlueDotManager")),(0,r.f)(this,"touchCount",0),(0,r.f)(this,"onPointerMove",(0,r.a)(t=>{t.preventDefault(),!this.core.controls.isUserInteracting()&&(this.calculateMouseCoordinates(t),("touch"!==t.pointerType||null==t.pointerType&&this.hasTouched)&&(this.doHoverEffect(),this.hoverLabel.setPosition(this.cursorPos.x,this.cursorPos.y)))},"onPointerMove")),(0,r.f)(this,"onPointerUp",(0,r.a)(t=>{if("touch"===t.pointerType&&(xX=xX.filter(t=>performance.now()-t.timestamp<yX)),"grabbing"===this.rendererDomElement.style.cursor&&(this.rendererDomElement.style.cursor="grab"),this.touchCount&&this.decrementTouches(t),t.target.parentNode!=this.core.container)return;let e=Math.sqrt(Math.pow(t.clientX-this.mouseDownStart.clientX,2)+Math.pow(t.clientY-this.mouseDownStart.clientY,2));Date.now()<this.mouseDownStart.time+fX&&e<=gX?"touch"===t.pointerType?1===xX.length&&"TWO_FINGER"===xX[0].type&&this.core.controls.enableZoom?(this.zoomOut(),bX()):1===xX.length&&"SINGLE"===xX[0].type?(null!=cX&&clearTimeout(cX),cX=setTimeout(()=>{this.handleMapClick(xX[0].event),bX()},yX)):2===xX.length&&"SINGLE"===xX[0].type&&"SINGLE"===xX[1].type&&this.core.controls.enableZoom&&(this.zoomIn(xX[1].event),bX()):this.handleMapClick(t):this.touchCount||(this.core.publish(this.core.currentInteractionEvent),this.core.currentInteractionEvent=void 0)},"onPointerUp")),(0,r.f)(this,"onPointerDown",(0,r.a)(t=>{if("pointer"!==this.rendererDomElement.style.cursor&&(this.rendererDomElement.style.cursor="grabbing"),this.mouseDownStart={time:Date.now(),clientX:t.clientX,clientY:t.clientY},this.incrementTouches(t),"touch"===t.pointerType){let e=new EX(t);xX.length>=1&&e.timestamp-xX[xX.length-1].timestamp<_X?xX[xX.length-1].type="TWO_FINGER":xX.push(e)}},"onPointerDown")),(0,r.f)(this,"incrementTouches",(0,r.a)(t=>{window.PointerEvent&&"touch"===t.pointerType&&(this.touchCount=(this.touchCount||0)+1,1===this.touchCount&&this.core.publish(27))},"incrementTouches")),(0,r.f)(this,"decrementTouches",(0,r.a)(t=>{window.PointerEvent&&"touch"===t.pointerType&&(this.touchCount--,this.touchCount||this.core.publish(28))},"decrementTouches")),(0,r.f)(this,"clearMouse",(0,r.a)(()=>{this.mouse.x=1/0,this.mouse.y=1/0},"clearMouse")),(0,r.f)(this,"getMousePos",(0,r.a)(t=>({x:t.offsetX,y:t.offsetY}),"getMousePos")),(0,r.f)(this,"getScaledMousePos",(0,r.a)(t=>({x:t.offsetX*devicePixelRatio,y:t.offsetY*devicePixelRatio}),"getScaledMousePos")),(0,r.f)(this,"cursorPos",{x:0,y:0}),(0,r.f)(this,"mouse",{x:0,y:0}),(0,r.f)(this,"mouseDownStart",{time:0,clientX:0,clientY:0}),(0,r.f)(this,"scaledCursorPos",{x:0,y:0}),(0,r.f)(this,"hasTouched",!1),(0,r.f)(this,"calculateMouseCoordinates",(0,r.a)(t=>{this.cursorPos=this.getMousePos(t),this.scaledCursorPos=this.getScaledMousePos(t),this.mouse.x=this.cursorPos.x/this.core.canvasWidth*2-1,this.mouse.y=-this.cursorPos.y/this.core.canvasHeight*2+1},"calculateMouseCoordinates")),(0,r.f)(this,"getMouseRayIntersects",(0,r.a)(t=>(E0.setFromCamera(this.mouse,this.core.cameraObject),Array.isArray(t)?E0.intersectObjects(t,!0):E0.intersectObject(t,!0)),"getMouseRayIntersects")),(0,r.f)(this,"detectCollidersUnderMouse",(0,r.a)(()=>{let{interactiveCollidersQTree:t}=this.core.smartCollisionEngine;if(null!=t){let{x:e,y:i}=this.scaledCursorPos,n=[e,i];return t.queryPoint(n).filter(t=>t.intersectsPoint(n)).map(t=>t.userData.collider)}return[]},"detectCollidersUnderMouse")),(0,r.f)(this,"detectPolygonsUnderMouse",(0,r.a)(()=>{let t=this.core.visibleMapObjectsInCurrentScene.flatMap(t=>t.hoverableMeshChildren),e=this.getMouseRayIntersects(t).map(function(t){return t.object.name});(0,JW.default)(e);let i=[];for(let n=0,r=e.length;n<r;++n){let t=e[n];t&&this.core.interactivePolygons[t]&&i.push(t)}return i},"detectPolygonsUnderMouse")),(0,r.f)(this,"detectPathsUnderMouse",(0,r.a)(()=>{var t;E0.setFromCamera(this.mouse,this.core.cameraObject),E0.layers.set(CF.ANIMATED);let e=[];this.core.paths.pathsById.forEach(({internalPath:t})=>{t.options.interactive&&t.pathSegments.forEach(t=>{let i=t.object;e.push(i)})});let i=null!=(t=E0.intersectObjects(e))?t:[];E0.layers.set(CF.STATIC);let n=new Map;return i.reduce((t,e)=>{var i;return n.has(e.object.uuid)||t.push(null==(i=this.core.paths.pathsByMeshId.get(e.object.uuid))?void 0:i.path),n.set(e.object.uuid,!0),t},[])},"detectPathsUnderMouse")),(0,r.f)(this,"detectWatermarkUnderMouse",(0,r.a)(()=>{var t;if(!dX.ENABLED||null==this.core.watermark.object)return!1;E0.setFromCamera(this.mouse,this.core.cameraObject),E0.layers.set(CF.ALWAYS_ON_TOP);let e=null!=(t=E0.intersectObject(this.core.watermark.object))?t:[];return E0.layers.set(CF.STATIC),e.length>0},"detectWatermarkUnderMouse")),(0,r.f)(this,"detectMapsUnderMouse",(0,r.a)(()=>{E0.setFromCamera(this.mouse,this.core.cameraObject);let t=Array.from(this.core.mapObjects.values()).filter(t=>{var e,i;return(null==(i=null==(e=this.core.options)?void 0:e.dynamicFocus)?void 0:i.baseMap)===t.mapClass||t.visible}).map(t=>t.object),e=E0.intersectObjects(t,!0).map(function(t){var e;return null==(e=t.object)?void 0:e.parent.name}).filter(t=>t);return(0,JW.default)(e),e.map(t=>this.core.venue.getCollectionItemById("maps",t))},"detectMapsUnderMouse")),(0,r.f)(this,"getMouseMapPosition",(0,r.a)(()=>{let t=this.getMouseRayIntersects(this.core.cameraPlane);if(t.length>0){let e=t[t.length-1],i=this.core.mapObjects.get(this.core.currentMap),n=e.point.applyMatrix4((new Go).copy(i.object.matrix).invert());return{x:n.x+i.mapClass.width/2,y:-n.y+i.mapClass.height/2}}return{x:NaN,y:NaN}},"getMouseMapPosition")),(0,r.f)(this,"checkMouseIntersectsBlueDot",(0,r.a)(()=>{if(!this.blueDotManager)return!1;let t=this.blueDotManager.getBlueDotForMap(this.core.venue.maps.find(t=>t.id===this.core.currentMap));if(t){let e=new ho,i=new ho;t.updateMatrixWorld(),t.getWorldPosition(e),t.getWorldScale(i),i.divideScalar(2),i.setZ(0),e.sub(i);let n=this.core.canvasWidth/2,r=this.core.canvasHeight/2;this.core.cameraObject.updateProjectionMatrix(),this.core.cameraObject.updateMatrixWorld(!0),e.project(this.core.cameraObject);let o={x:e.x*n+n,y:-e.y*r+r},a=Math.pow(this.cursorPos.x-o.x,2),s=Math.pow(this.cursorPos.y-o.y,2);return Math.sqrt(a+s)<=23}return!1},"checkMouseIntersectsBlueDot")),(0,r.f)(this,"doHoverEffect",(0,r.a)(()=>{if(this.options.disableHover)return;let t=this.detectPolygonsUnderMouse(),e=this.detectCollidersUnderMouse(),i=this.detectPathsUnderMouse(),n=this.detectWatermarkUnderMouse(),r=!1;for(let o=0,a=t.length;o<a;++o){let e=t[o];if(this.core.interactivePolygons[e]){if(e!=this.currentHover){this.currentHover&&(this.onPolygonHoverOut(this.currentHover),this.currentHover=null),this.core.highlightedPolygons[e]||(this.currentHover=e,this.onPolygonHoverOver(e));let t=this.core.textLabelsByPolygonId[Ly(e)];t&&t.showHoverLabel?this.hoverLabel.show(t):this.hoverLabel.hide()}r=!0;break}}r||(this.currentHover&&(this.onPolygonHoverOut(this.currentHover),this.currentHover=null),this.hoverLabel.hide()),r||e.length>0||i.length>0||n?this.rendererDomElement.style.cursor="pointer":this.rendererDomElement.style.cursor="grab"},"doHoverEffect")),(0,r.f)(this,"onPolygonHoverOut",(0,r.a)(t=>{var e;let i=this.core.polygonMeshesById[t],n=this.core.venue.getCollectionItemById("polygons",t);if(!i)return;let r=this.core.textLabelsByPolygonId[t];r&&r.setColor(r.baseColor);let o=!1;if(i._MIOriginalMaterial){let n=null!=(e=this.core.polygonHoverColorsById[t])?e:this.hoverColor,r=(i.material.length&&i.material[0]||i.material).color.getHex();n.getHex()===r&&!this.core.highlightedPolygons[t]&&(o=!0)}if(o)return this.core.polygonColors.setPolygonColor(n,n.material.color,!1),!1;r&&this.core.tryRendering()},"onPolygonHoverOut")),(0,r.f)(this,"onPolygonHoverOver",(0,r.a)(t=>{var e;let i=Ly(t),n=this.core.polygonMeshesById[i],r=this.core.textLabelsByPolygonId[i];if(!n)return;let o=null!=(e=this.core.polygonHoverColorsById[i])?e:this.hoverColor;return this.core.polygonColors.setPolygonColor(t,"#".concat(o.getHexString()),!1),r&&(r.setColor(r.hoverColor),this.core.tryRendering()),!1},"onPolygonHoverOver")),(0,r.f)(this,"setHoverColor",(0,r.a)(t=>{this.hoverColor=new Ua(t)},"setHoverColor")),this.core=t;let e=this.core.renderer.domElement();this.core.container.style.touchAction="auto",this.rendererDomElement=e,this.hoverLabel=new tU(this.core.container),this.core.on(15,this.clearMouse),this.core.on(9,()=>{this.currentHover&&(this.onPolygonHoverOut(this.currentHover),this.currentHover=null),this.hoverLabel.hovering&&this.hoverLabel.hide()}),e.addEventListener("pointerdown",this.onPointerDown,!1),e.addEventListener("pointermove",this.onPointerMove,!1),e.addEventListener("pointerup",this.onPointerUp,!1),e.addEventListener("pointercancel",this.onPointerUp,!1)}zoomOut(){this.core.controls.zoomOut(vX,RB["ease-out"])}zoomIn(t){let e=this.core.convertScreenCoordinateToMapCoordinate(t.clientX,t.clientY,this.core.venue.maps.find(t=>t.id===this.core.currentMap)),i=this.core.convertTo3DMapPosition(e),n=this.core.controls.getZoom();this.core.controls.animateCamera({position:i,zoom:n/mX},vX,RB["ease-in"])}handleMapClick(t){this.calculateMouseCoordinates(t);let e=this.detectPolygonsUnderMouse(),i=this.detectMapsUnderMouse(),n=this.detectCollidersUnderMouse(),r=this.detectPathsUnderMouse(),o=this.detectWatermarkUnderMouse(),{labels:a,markers:s,tooltips:l}=TX(n),h=this.getMouseMapPosition(),u={lat:NaN,lon:NaN};!isNaN(h.x)&&!isNaN(h.y)&&(u=this.core.venue.maps.find(t=>t.id===this.core.currentMap).createCoordinateByXY(h.x,h.y)),this.core.publish(16,{position:{latitude:u.lat,longitude:u.lon},polygons:e.filter(t=>this.core.interactivePolygons[t]).map(t=>this.core.venue.getCollectionItemById("polygons",t)),floatingLabels:a,markers:s,tooltips:l,maps:i||[],nearBlueDot:this.checkMouseIntersectsBlueDot(),paths:r}),o&&"function"==typeof dX.OPTIONS.onClick&&dX.OPTIONS.onClick();for(let c=0,p=e.length;c<p;++c){let t=e[c];if(this.core.interactivePolygons[t]&&"function"==typeof this.core.onPolygonClicked&&!this.core.onPolygonClicked(t))return}"function"==typeof this.core.onNothingClicked&&this.core.onNothingClicked()}destroy(){this.rendererDomElement.removeEventListener("pointerdown",this.onPointerDown,!1),this.rendererDomElement.removeEventListener("pointermove",this.onPointerMove,!1),this.rendererDomElement.removeEventListener("pointerup",this.onPointerUp,!1),this.rendererDomElement.removeEventListener("pointercancel",this.onPointerUp,!1)}};(0,r.a)(CX,"EventSystem");var AX=CX,PX=AX;(0,n.a)();var IX="varying vec2 vUV;\n\nvoid main() {\n   vUV = uv;\n\n   gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.0);\n}",LX='precision mediump float;\n\n// The following uniforms are documented in Mappedin.ClosedPolygonManager.js\nuniform vec3 stripe1_color;\nuniform vec3 stripe2_color;\nuniform vec2 surface_dimensions;\nuniform float stripe1_width;\nuniform float stripe1_proportion;\nuniform float stripes_direction; \n\nvarying vec2 vUV;\n\nvec4 stripes(vec2 coord) {\n   vec4 color1 = vec4(stripe1_color, 1.0);\n   vec4 color2 = vec4(stripe2_color, 1.0);\n\n   // Transform the uv to surface coordinates in world space units\n   vec2 coord_absolute = coord * surface_dimensions;\n   \n   // Compute the width of a single texture "tile"\n   // For example, if the first stripe is 10 units and it forms 25% of the tile, we know that the tile itself is 40 units wide\n   float tile_width = stripe1_width / stripe1_proportion;\n\n   // Lerp the x and y coordinates of the component using the "direction" parameter; clever way of "rotating" the stripe without using trig functions, courtesy of https://andreashackel.de/tech-art/stripes-shader-1/\n   float stripe_coord = mix(coord_absolute.x, coord_absolute.y, stripes_direction);\n\n   // Normalize the above "coordinate" to obtain its position within a single texture "tile"\n   float stripe_coord_normalized = mod(stripe_coord, tile_width) / tile_width;\n\n   // Decide which of the two stripes this coordinate belongs to!\n   return mix(color1, color2, step(1. - stripe1_proportion, stripe_coord_normalized));\n}\n\nvoid main() {   \n   gl_FragColor = vec4(stripes(vUV).rgb, 1);\n}\n';function OX(t){let e=new oy(1,1,1,1),i=500,n=500,r=new ho(0,0,0),o=0;if(null!=t&&null!=t.boundingBox&&null!=t.boundingBox.min&&null!=t.boundingBox.max){let e=new fo(t.boundingBox.min,t.boundingBox.max),a=e.getSize(new ho);i=a.x,n=a.y,e.getCenter(r),o=(isNaN(e.max.z)?0:e.max.z)+10}let a=new Us({vertexShader:IX,fragmentShader:LX,uniforms:{stripe1_color:{type:"c",value:new Ua(.91372549019,.91372549019,.91372549019)},stripe2_color:{type:"c",value:new Ua(.80784313725,.80784313725,.80784313725)},stripe1_width:{type:"f",value:7},stripe1_proportion:{type:"f",value:.3},stripes_direction:{type:"f",value:2/3},surface_dimensions:{type:"v2",value:new Tr(i,n)}}});a.transparent=!0,a.blending=Le,a.depthTest=!1,a.stencilWrite=!0,a.stencilFunc=Gn,a.stencilFuncMask=255,a.stencilRef=1,a.stencilFail=Vn,a.stencilZFail=Vn,a.stencilZPass=Vn;let s=new Cs(e,a);return s.position.set(r.x,r.y,o),s.rotation.set(0,0,0),s.scale.set(i,n,1),s}function NX(t){null!=t&&Ay(t.material)}function qX(t){return t.stencilWrite=!0,t.stencilFunc=Hn,t.stencilRef=1,t.stencilFuncMask=255,t.stencilFail=Vn,t.stencilZFail=Vn,t.stencilZPass=jn,t}function RX(t,e,i){null==e||null==i||(null!=t&&i.remove(t),i.add(e))}function DX(t,e){return Math.abs(t-e)<Number.EPSILON}(0,r.a)(OX,"makeStencilSheet"),(0,r.a)(NX,"destroyStencilSheet"),(0,r.a)(qX,"enableStencilTestingAndConfigure"),(0,r.a)(RX,"replaceObjectInScene"),(0,r.a)(DX,"almostEqual");var kX=class{constructor({scene:t,getPolygonMeshFromId:e,tryRendering:i}){this.scene=t,this.getPolygonMeshFromId=e,this.tryRendering=i,this.stencilSheet=null,this.polygonsMarkedAsClosed={}}onMapChanged(t){t.load().then(()=>{this.currentMap=t,NX(this.stencilSheet);let e=OX(t);RX(this.stencilSheet,e,this.scene),this.stencilSheet=e,this.tryRendering()})}dispose(){this.markAllPolygonsAsOpen(),NX(this.stencilSheet)}markPolygonAsClosed(t){if("string"!=typeof t||null!=this.polygonsMarkedAsClosed[t])return;let e=this.getPolygonMeshFromId(t);if(null==e||null==e.material)return;let i=e.geometry;if(vy.assert(i instanceof ls),vy.assert(null==i.index),e.material.length)return;let n={};n.geometryGroups=[...i.groups],i.clearGroups();let r=e.material,o=qX(e.material.clone());e.material=[r,o],e._MIOriginalMaterial&&(e._MIOriginalMaterial.length||(e._MIOriginalMaterial=[e._MIOriginalMaterial,qX(e._MIOriginalMaterial.clone())]));let a=i.getAttribute("normal");vy.assert(3===a.itemSize),vy.assert(a.array.length/3===a.count),vy.assert(a.count%3==0);let s=new ho(0,0,1);for(let l=0;l<a.count;l+=3){let t=(a.getX(l)+a.getX(l+1)+a.getX(l+2))/3,e=(a.getY(l)+a.getY(l+1)+a.getY(l+2))/3,n=(a.getZ(l)+a.getZ(l+1)+a.getZ(l+2))/3;DX(new ho(t,e,n).normalize().dot(s),1)?i.addGroup(l,3,1):i.addGroup(l,3,0)}this.tryRendering(),this.polygonsMarkedAsClosed[t]=n}markPolygonAsOpen(t){if("string"!=typeof t||null==this.polygonsMarkedAsClosed[t])return;let e=this.polygonsMarkedAsClosed[t],i=this.getPolygonMeshFromId(t),n=i.geometry;n.clearGroups(),e.geometryGroups.forEach(({start:t,count:e,materialIndex:i})=>n.addGroup(t,e,i)),Ay(i.material[1]),i.material=i.material[0],i._MIOriginalMaterial&&i._MIOriginalMaterial.length&&(i._MIOriginalMaterial=i._MIOriginalMaterial[0]),delete this.polygonsMarkedAsClosed[t],this.tryRendering()}markAllPolygonsAsOpen(){for(let t in this.polygonsMarkedAsClosed)this.markPolygonAsOpen(t)}};(0,r.a)(kX,"ClosedPolygonManager");var BX=kX,FX=BX;(0,n.a)();var UX=!1,zX=class{constructor(t){(0,r.f)(this,"textureLoader",new cv),(0,r.f)(this,"data"),this.data=t}async loadMapPolygons(){}loadImage(t){let e=this.data.get(t.split(/[\/\.]/)[1]);return new Promise((i,n)=>{UX&&vy.log("loading image: ",t);let r=new Blob([e]),o=URL.createObjectURL(r);this.textureLoader.load(o,t=>{t.colorSpace=Fn,i(t)},()=>{},n)})}};(0,r.a)(zX,"BinaryAssetManager");var VX=zX;(0,n.a)(),(0,n.a)();var jX=1*devicePixelRatio;function GX(t,e){return e.x+e.w<t.x+t.w&&e.x>t.x&&e.y>t.y&&e.y+e.h<t.y+t.h}function HX(t,e){let i=e.x,n=e.y,r=e.x+e.w,o=e.y+e.h,a=t.x,s=t.y,l=t.x+t.w,h=t.y+t.h;return i<l&&a<r&&n<h&&s<o}function WX(t,e){let[i,n]=e;return i>=t.x&&i<=t.x+t.w&&n>=t.y&&n<=t.y+t.h}(0,r.a)(GX,"contains"),(0,r.a)(HX,"intersects"),(0,r.a)(WX,"intersectPoint");var XX=class{constructor(t,e,i,n,o){(0,r.f)(this,"x"),(0,r.f)(this,"y"),(0,r.f)(this,"w"),(0,r.f)(this,"h"),(0,r.f)(this,"userData"),this.userData=typeof o>"u"?null:o,this.x=t-jX,this.y=e-jX,this.w=i+2*jX,this.h=n+2*jX}contains(t){return t!==this&&GX(this,t)}intersects(t){return HX(this,t)}intersectsPoint(t){return WX(this,t)}draw(t){t.fillStyle="rgba(123,222,26, 0.5)",t.fillRect(this.x,this.y,this.w,this.h)}};(0,r.a)(XX,"Rectangle");var YX=XX,ZX=class t{constructor(t,e){(0,r.f)(this,"boundary"),(0,r.f)(this,"capacity",4),(0,r.f)(this,"objects",[]),(0,r.f)(this,"topLeft"),(0,r.f)(this,"topRight"),(0,r.f)(this,"bottomLeft"),(0,r.f)(this,"bottomRight"),(0,r.f)(this,"divided",!1),(0,r.f)(this,"parent"),this.parent=e,this.boundary=t}getSize(){return this.divided?this.objects.length+this.topLeft.getSize()+this.topRight.getSize()+this.bottomLeft.getSize()+this.bottomRight.getSize():this.objects.length}subdivide(){let{x:e,y:i,w:n,h:r}=this.boundary;this.topLeft=new t(new YX(e,i,n/2,r/2),this),this.topRight=new t(new YX(e+n/2,i,n/2,r/2),this),this.bottomLeft=new t(new YX(e,i+r/2,n/2,r/2),this),this.bottomRight=new t(new YX(e+n/2,i+r/2,n/2,r/2),this),this.divided=!0}queryRect(t){let e=[];return this.boundary.intersects(t)?(e.push(...this.objects),this.divided&&(Ny(e,this.topLeft.queryRect(t)),Ny(e,this.topRight.queryRect(t)),Ny(e,this.bottomLeft.queryRect(t)),Ny(e,this.bottomRight.queryRect(t))),e):[]}queryPoint(t){let e=[];return this.boundary.intersectsPoint(t)?(e.push(...this.objects),this.divided&&(Ny(e,this.topLeft.queryPoint(t)),Ny(e,this.topRight.queryPoint(t)),Ny(e,this.bottomLeft.queryPoint(t)),Ny(e,this.bottomRight.queryPoint(t))),e):[]}insert(t){return!!this.boundary.contains(t)&&(this.objects.length<this.capacity?(this.objects.push(t),!0):(this.divided||this.subdivide(),!1===(this.topLeft.insert(t)||this.topRight.insert(t)||this.bottomLeft.insert(t)||this.bottomRight.insert(t))&&this.objects.push(t),!0))}drawObjects(t){this.objects.forEach(e=>e.draw(t)),this.divided&&(this.topLeft.drawObjects(t),this.topRight.drawObjects(t),this.bottomLeft.drawObjects(t),this.bottomRight.drawObjects(t))}draw(t){t.rect(this.boundary.x,this.boundary.y,this.boundary.w,this.boundary.h),this.divided&&(this.topLeft.draw(t),this.topRight.draw(t),this.bottomLeft.draw(t),this.bottomRight.draw(t)),t.strokeStyle="black",t.lineWidth=4,t.stroke()}};(0,r.a)(ZX,"QuadTree");var JX=ZX,KX=!1,QX=!1,$X=!1,tY=10*devicePixelRatio,eY=100,iY="LOW_PRIORITY",nY=class extends nU{get strategies(){let t=(0,r.a)(()=>{},"noop");return[{name:"left",getBoundingBox:(0,r.a)(t=>[0,t.totalHeight,-tY,5],"leftBoundingBox"),onStrategySelected:t},{name:"top",getBoundingBox:(0,r.a)(t=>[-tY,5,0,t.totalWidth],"topBoundingBox"),onStrategySelected:t},{name:"right",getBoundingBox:(0,r.a)(t=>[0,t.totalHeight,t.totalWidth-5,t.totalWidth+tY],"rightBoundingBox"),onStrategySelected:t},{name:"bottom",getBoundingBox:(0,r.a)(t=>[t.totalHeight-5,t.totalHeight+tY,0,t.totalWidth],"bottomBoundingBox"),onStrategySelected:t}]}};(0,r.a)(nY,"OffscreenCollider");var rY,oY,aY,sY,lY,hY,uY=nY,cY=(0,r.a)((t,e)=>e.length?(e.splice(dY(t,e),0,t),e):(e.push(t),e),"insertOne"),pY=(0,r.a)((t,e)=>(e.length&&e.splice(e.indexOf(t),1),e),"removeOne"),dY=(0,r.a)((t,e,i,n)=>{let r=i||0,o=n||e.length,a=Math.floor(r+(o-r)/2);return e[a].rank===t.rank?a:o-r<=1?e[a].rank<t.rank?a:a+1:e[a].rank>t.rank?dY(t,e,a,n):dY(t,e,i,a)},"locationOf"),fY=class{constructor(t){(0,r.f)(this,"colliderCanvas"),(0,r.f)(this,"debugCanvas"),(0,r.f)(this,"colliderCanvasContext"),(0,r.f)(this,"debugCanvasContext"),(0,r.f)(this,"collisionEngineContainerEl"),(0,r.f)(this,"stepsX"),(0,r.f)(this,"stepsY"),(0,r.f)(this,"totalWidth"),(0,r.f)(this,"totalHeight"),(0,r.f)(this,"project"),(0,r.f)(this,"colliders",new Map),(0,r.f)(this,"offscreenRanges",[]),(0,r.h)(this,rY,{}),(0,r.h)(this,oY,!1),(0,r.f)(this,"initialized",!1),(0,r.f)(this,"core"),(0,r.f)(this,"screen"),(0,r.f)(this,"debouncedUpdate"),(0,r.f)(this,"updateStartEvents"),(0,r.f)(this,"updateEndEvents"),(0,r.f)(this,"init",(0,r.a)((t,e)=>{this.project=e,t.appendChild(this.collisionEngineContainerEl),t.appendChild(this.colliderCanvas),this.totalWidth=t.clientWidth,this.totalHeight=t.clientHeight,this.screen=new YX(0,0,this.totalWidth,this.totalHeight),this.colliderCanvas.width=this.totalWidth*devicePixelRatio,this.colliderCanvas.height=this.totalHeight*devicePixelRatio,this.colliderCanvas.style.width=this.totalWidth+"px",this.colliderCanvas.style.height=this.totalHeight+"px",KX&&(this.debugCanvasContext=this.debugCanvas.getContext("2d"),t.appendChild(this.debugCanvas),this.debugCanvas.width=this.totalWidth,this.debugCanvas.height=this.totalHeight,this.debugCanvas.style.width=this.totalWidth+"px",this.debugCanvas.style.height=this.totalHeight+"px",this.debugCanvas.style.opacity="0.4");let i=new uY({rank:999});this.offscreenRanges=i.strategies.map(({getBoundingBox:t})=>t({x:0,y:0,totalHeight:this.totalHeight,totalWidth:this.totalWidth}).map(t=>Math.round(t))),this.initialized=!0,(0,r.g)(this,oY)||((0,r.g)(this,aY).call(this),(0,r.i)(this,oY,!0)),(0,r.g)(this,hY).call(this)},"init")),(0,r.f)(this,"handleBeginUpdate",(0,r.a)(t=>{if(!1===this.updateStartEvents[t.type])this.beginUpdate();else if(null!=t.message){let{zooming:e,rotating:i,tilting:n}=t.message;(e||i||n)&&this.beginUpdate()}},"handleBeginUpdate")),(0,r.f)(this,"handleEndUpdate",(0,r.a)(t=>{if(!1===this.updateEndEvents[t.type])this.update();else if(null!=t.message){let{zooming:e,rotating:i,tilting:n}=t.message;(e||i||n)&&this.update()}},"handleEndUpdate")),(0,r.h)(this,aY,(0,r.a)(()=>{(0,r.i)(this,oY,!0);for(let t in this.updateStartEvents)this.core.controls.dispatcher.addEventListener(t,this.handleBeginUpdate);for(let t in this.updateEndEvents)this.core.controls.dispatcher.addEventListener(t,this.handleEndUpdate);this.core.on(6,(0,r.g)(this,lY)),this.core.on(7,(0,r.g)(this,hY)),this.core.on(8,(0,r.g)(this,lY)),this.core.on(32,(0,r.g)(this,hY))},"#addListeners")),(0,r.h)(this,sY,(0,r.a)(()=>{for(let t in this.updateStartEvents)this.core.controls.dispatcher.removeEventListener(t,this.handleBeginUpdate);for(let t in this.updateEndEvents)this.core.controls.dispatcher.removeEventListener(t,this.handleEndUpdate);this.core.off(6,(0,r.g)(this,lY)),this.core.off(7,(0,r.g)(this,hY)),(0,r.i)(this,oY,!1)},"#removeListeners")),(0,r.h)(this,lY,(0,r.a)(()=>{let t=this.core.visibleMapsInCurrentScene.map(t=>t.id)||[];this.colliders.forEach(t=>{t.disable(!1)}),t.forEach(t=>{null!=(0,r.g)(this,rY)[t]&&((0,r.g)(this,rY)[t].needsSort=!0)}),this.update()},"#onSetSceneStart")),(0,r.h)(this,hY,(0,r.a)(()=>{let t=this.core.visibleMapsInCurrentScene.map(t=>t.id)||[];this.colliders.forEach(e=>{t.includes(e.mapId)&&e.enable(!1)}),t.forEach(t=>{null!=(0,r.g)(this,rY)[t]&&((0,r.g)(this,rY)[t].needsSort=!0)}),this.update()},"#onSetSceneEnd")),(0,r.f)(this,"qtree"),(0,r.f)(this,"interactiveCollidersQTree"),(0,r.f)(this,"recompute",(0,r.a)(()=>{if(!this.initialized)return;let t,e,i,[n,r,o,a]=[1/0,1/0,-1/0,-1/0],s=this.offscreenRanges.map(t=>{let e=t[3]-t[2],i=t[1]-t[0];return n=Math.min(n,t[2]),o=Math.max(o,t[3]),r=Math.min(r,t[0]),a=Math.max(a,t[1]),new YX(Math.round(t[2]*devicePixelRatio),Math.round(t[0]*devicePixelRatio),Math.round(e*devicePixelRatio),Math.round(i*devicePixelRatio))}),l=this.sortedColliders;for(let c of l)t=c.position,e=c.mapId,c.getBoundingBoxForCurrentStrategy=void 0,c.enabled&&(i=this.project(t,e),"function"==typeof c.colliderDidUpdatePosition&&c.colliderDidUpdatePosition([i.x,i.y]),c._bboxes=c.strategies.map(({name:t,getBoundingBox:e,onStrategySelected:s})=>{let l=e({x:i.x,y:i.y}),h=l[3]-l[2],u=l[1]-l[0];return n=Math.min(n,l[2]),o=Math.max(o,l[3]),r=Math.min(r,l[0]),a=Math.max(a,l[1]),null==c._bboxes&&(c._bboxes=[]),[t,new YX(Math.round(l[2]*devicePixelRatio),Math.round(l[0]*devicePixelRatio),Math.round(h*devicePixelRatio),Math.round(u*devicePixelRatio),{collider:c}),s,e]}));let h,u=new YX(Math.round(n*devicePixelRatio)-eY,Math.round(r*devicePixelRatio)-eY,Math.round(o*devicePixelRatio-n*devicePixelRatio)+2*eY,Math.round(a*devicePixelRatio-r*devicePixelRatio)+2*eY);this.qtree=new JX(u),s.forEach(t=>{this.qtree.insert(t)});for(let c=0;c<l.length;c++){let t=!1;if(null==(h=l[c])._bboxes||!h.enabled)continue;let[e,i]=[1/0,null];for(let[,n,r,o]of h._bboxes){let a=this.qtree.queryRect(n).filter(t=>n.intersects(t));if(a.length<=e&&(i=[n,r,o]),0===a.length){this.qtree.insert(n),h.getBoundingBoxForCurrentStrategy=o,t=!0,h.setAction(1),r(h);break}}if(4===h.rank&&null!=i){let[e,n,r]=i;this.qtree.insert(e),h.getBoundingBoxForCurrentStrategy=r,t=!0,h.setAction(1),n(h)}!t&&"function"==typeof h.colliderDidNotFindAHome&&h.colliderDidNotFindAHome(),"function"==typeof h.colliderDidUpdateVisiblity&&h.colliderDidUpdateVisiblity()}this.draw(),this.colliderCanvas.classList.remove("interacting")},"recompute")),(0,r.f)(this,"draw",(0,r.a)(()=>{let t=this.sortedColliders;this.colliderCanvasContext.clearRect(0,0,this.totalWidth*devicePixelRatio,this.totalHeight*devicePixelRatio);for(let e of t)e.offscreen||e instanceof FU&&e.draw(this.colliderCanvasContext);KX&&this.qtree&&(this.colliderCanvasContext.beginPath(),$X&&this.qtree.draw(this.colliderCanvasContext),this.qtree.drawObjects(this.colliderCanvasContext)),QX&&null!=this.interactiveCollidersQTree&&this.interactiveCollidersQTree.drawObjects(this.colliderCanvasContext)},"draw")),(0,r.f)(this,"reposition",(0,r.a)(()=>{var t;if(!this.initialized)return;this.interactiveCollidersQTree=new JX(new YX(0,0,this.totalWidth*devicePixelRatio,this.totalHeight*devicePixelRatio));let e,i,n,r=this.sortedColliders;for(let o of r)if(e=o.position,i=o.mapId,n=this.project(e,i),o.enabled){if("function"==typeof o.getBoundingBoxForCurrentStrategy){let[e,i,r,a]=o.getBoundingBoxForCurrentStrategy({x:n.x,y:n.y});mY(o)&&null!=(t=o.options)&&t.interactive&&this.interactiveCollidersQTree.insert(new YX(r*devicePixelRatio,e*devicePixelRatio,(a-r)*devicePixelRatio,(i-e)*devicePixelRatio,{collider:o})),HX(this.screen,{x:r,y:e,w:a-r,h:i-e})?o.offscreen=!1:o.offscreen=!0}"function"==typeof o.colliderDidUpdatePosition&&o.colliderDidUpdatePosition([n.x,n.y])}this.draw()},"reposition")),(0,r.f)(this,"add",(0,r.a)((t,e)=>{e.__engine=this,"function"==typeof e.colliderDidMount&&e.colliderDidMount(),this.colliders.set(t,e),null==(0,r.g)(this,rY)[e.mapId]&&((0,r.g)(this,rY)[e.mapId]={needsSort:!1,colliders:[]}),cY(e,(0,r.g)(this,rY)[e.mapId].colliders)},"add")),(0,r.f)(this,"remove",(0,r.a)(t=>{let e=this.colliders.get(t);null!=e&&(e.disable(),e.__engine=void 0,this.colliders.delete(t),pY(e,(0,r.g)(this,rY)[e.mapId].colliders))},"remove")),(0,r.f)(this,"updateMap",(0,r.a)((t,e,i)=>{let n=this.colliders.get(t);if(null==n)return;n.mapId=i,pY(n,(0,r.g)(this,rY)[e].colliders),null==(0,r.g)(this,rY)[i]&&((0,r.g)(this,rY)[i]={needsSort:!1,colliders:[]}),cY(n,(0,r.g)(this,rY)[i].colliders);let o=this.core.visibleMapsInCurrentScene.map(t=>t.id)||[];o.includes(e)&&n.disable(),o.includes(i)&&n.enable()},"updateMap")),(0,r.f)(this,"update",(0,r.a)(()=>{this.initialized&&((this.core.visibleMapsInCurrentScene.map(t=>t.id)||[]).forEach(t=>{(0,r.g)(this,rY)[t]&&((0,r.g)(this,rY)[t].needsSort=!0)}),this.recompute(),this.reposition())},"update")),(0,r.f)(this,"resize",(0,r.a)(t=>{this.initialized&&((0,r.g)(this,sY).call(this),this.init(t,this.project),this.update())},"resize")),(0,r.f)(this,"destroy",(0,r.a)(()=>{for(let t of Array.from(this.colliders.values()))this.remove(t.id)},"destroy")),this.core=t,this.colliderCanvas=document.createElement("canvas"),this.collisionEngineContainerEl=document.createElement("div"),KX&&(this.debugCanvas=document.createElement("canvas"),this.debugCanvas.classList.add("mappedin__smart-collision-engine-debug__container")),this.colliderCanvas.classList.add("mappedin__smart-collision-engine-debug__container"),this.collisionEngineContainerEl.classList.add("mappedin__smart-collision-engine__container"),this.colliderCanvasContext=this.colliderCanvas.getContext("2d");let{INTERACTION_EVENTS:e,CAMERA_EVENTS:i}=this.core.controls;this.updateStartEvents={[e.USER_DOLLY_START_EVENT.type]:!1,[i.ROTATE_START_EVENT.type]:!1,[i.ZOOM_START_EVENT.type]:!1,[e.USER_TILT_START_EVENT.type]:!1,[i.MULTI_START_EVENT.type]:!0,[i.PEDESTAL_START_EVENT.type]:!1},this.updateEndEvents={[e.USER_DOLLY_END_EVENT.type]:!1,[i.ROTATE_END_EVENT.type]:!1,[i.ZOOM_END_EVENT.type]:!1,[e.USER_TILT_END_EVENT.type]:!1,[i.MULTI_END_EVENT.type]:!0,[i.MULTI_CANCEL_EVENT.type]:!0,[i.PEDESTAL_END_EVENT.type]:!1},this.debouncedUpdate=ky(()=>{this.update()},10,!0)}get sortedColliders(){return this.initialized?this.core.visibleMapsInCurrentScene.flatMap(t=>{var e;return(0,r.g)(this,rY)[t.id]&&(null==(e=(0,r.g)(this,rY)[t.id].colliders)?void 0:e.length)>0&&!1===(0,r.g)(this,rY)[t.id].needsSort||(null==(0,r.g)(this,rY)[t.id]&&((0,r.g)(this,rY)[t.id]={needsSort:!0,colliders:[]}),(0,r.g)(this,rY)[t.id].colliders=Array.from(this.colliders.values()).filter(e=>{var i;return e.mapId===t.id&&(""===e.layer||(null==(i=this.core.visibleLayersInCurrentScene[e.mapId])?void 0:i.includes(e.layer)))}).sort((t,e)=>e.rank-t.rank),(0,r.g)(this,rY)[t.id].needsSort=!1),(0,r.g)(this,rY)[t.id].colliders}):[]}beginUpdate(){this.colliderCanvas.classList.add("interacting")}};rY=new WeakMap,oY=new WeakMap,aY=new WeakMap,sY=new WeakMap,lY=new WeakMap,hY=new WeakMap,(0,r.a)(fY,"SmartCollisionEngine");var gY=fY;function mY(t){return t instanceof FU||t instanceof uz||t instanceof az}(0,r.a)(mY,"isCollider");var vY=gY;(0,n.a)();var yY=class{constructor(t){(0,r.f)(this,"orbit"),(0,r.f)(this,"billboards",new Map),this.orbit=t}add(t,e="Z"){this.billboards.set(t.uuid,[t,e])}remove(t){this.billboards.delete(t.uuid)}update(){for(let[t,e]of this.billboards.values())e.includes("Z")&&(t.rotation.z=this.orbit.rotation.z)}destroy(){this.billboards.clear()}};(0,r.a)(yY,"BillboardManager");var _Y=yY,xY=_Y;(0,n.a)();var bY=(0,r.e)(le());(0,n.a)();var wY,EY="white",MY=(0,r.a)((t=1)=>'<div style="width: '.concat(32*t,"px; height: ").concat(32*t,'px;">').concat(tj.get("journey-departure"),"<div>"),"generateDepartureMarker"),SY=(0,r.a)((t=1)=>'<div style="width: '.concat(32*t,"px; height: ").concat(32*t,'px;">').concat(tj.get("journey-destination"),"</div>"),"generateDestinationMarker"),TY=(0,r.a)(t=>{let e=null==t.direction?t.type:"".concat(t.type,"-").concat(t.direction);return'<div style="width: 40px;\n            height: 40px;\n\t\t\tcursor: pointer;\n            border-radius: 50%;\n\t\t\tbackground: green;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;">\n          <svg\n            height="16"\n            viewBox="0 0 36 36"\n            width="16"\n          >\n            <g fill="'.concat(EY,'">\n              ').concat(tj.get(e),"\n            </g>\n          </svg><div>")},"defaultConnectionFn"),CY=class{constructor(t,e=TY,i){var n,o;(0,r.f)(this,"tooltip"),(0,r.f)(this,"mapId"),(0,r.f)(this,"toMapId"),(0,r.h)(this,wY,void 0),(0,r.f)(this,"handleClick",(0,r.a)(t=>{0!==t.tooltips.length&&t.tooltips.find(t=>{var e;return t.id===(null==(e=this.tooltip)?void 0:e.id)})&&("OVERVIEW"===(0,r.g)(this,wY).stackedMaps.currentState?(0,r.g)(this,wY).setMapWithReason(this.mapId,"journey-connection-click"):(0,r.g)(this,wY).setMapWithReason(this.toMapId,"journey-connection-click"))},"handleClick")),(0,r.f)(this,"determineDirection",(0,r.a)(()=>{var t,e;let{mapObjects:i}=(0,r.g)(this,wY),n=null==(t=i.get(this.mapId))?void 0:t.mapClass.elevation,o=null==(e=i.get(this.toMapId))?void 0:e.mapClass.elevation;if(n!==o)return n<o?"up":"down"},"determineDirection")),this.mapId=t.node.map.id,this.toMapId="TakeVortex"===(null==(n=t.action)?void 0:n.type)?t.action.toMap.id:t.action.fromMap.id,(0,r.i)(this,wY,i);let a=t.atLocation.type,s=this.determineDirection(),l=e({type:a,direction:s,toMapName:t.action.toMap.name,icon:tj.get(null==s?a:"".concat(a,"-").concat(s)),isEntering:"TakeVortex"===(null==(o=t.action)?void 0:o.type)});this.tooltip=i.tooltips.createTooltip(t.node,l,{collisionRank:4,padding:0,defaultAnchorType:"top",interactive:!0}),(0,r.g)(this,wY).on(16,this.handleClick),this.tooltip.updateDimensions()}destroy(){(0,r.g)(this,wY).off(16,this.handleClick),(0,r.g)(this,wY).tooltips.removeTooltip(this.tooltip),this.tooltip=null}};wY=new WeakMap,(0,r.a)(CY,"Connection");var AY,PY,IY,LY,OY,NY,qY,RY,DY,kY,BY,FY,UY,zY,VY=CY,jY={displayArrowsOnPath:!0,nearRadius:1.8,farRadius:5.4,color:"#ff834c",flattenPath:!0},GY={color:"#f5c7b3",displayArrowsOnPath:!1,flattenPath:!0,nearRadius:1.6,farRadius:4.8,showPulse:!1,animateDrawing:!1},HY={displayArrowsOnPath:!0,nearRadius:1.8,farRadius:5.4,color:"#ff834c",flattenPath:!0},WY=3,XY=class t{constructor(t,e={},i){var n,o;(0,r.f)(this,"distance",0),(0,r.f)(this,"accessible",!1),(0,r.h)(this,AY,{}),(0,r.h)(this,PY,void 0),(0,r.f)(this,"activeDirections"),(0,r.h)(this,IY,void 0),(0,r.h)(this,LY,void 0),(0,r.h)(this,OY,{}),(0,r.h)(this,NY,[]),(0,r.h)(this,qY,void 0),(0,r.h)(this,RY,[]),(0,r.h)(this,DY,new Map),(0,r.f)(this,"setStep",(0,r.a)(t=>{t!==(0,r.g)(this,LY)&&((0,r.g)(this,IY).length<2||t<0||t>(0,r.g)(this,IY).length||((0,r.g)(this,zY).call(this),(0,r.g)(this,UY).call(this),(0,r.i)(this,LY,t),this.activeDirections=(0,r.g)(this,IY)[t],(0,r.g)(this,PY).currentPath=this.activeDirections.path,(0,r.g)(this,FY).call(this),(0,r.g)(this,kY).call(this)))},"setStep")),(0,r.f)(this,"setStepByPath",(0,r.a)(t=>{let e=(0,r.g)(this,DY).get(t);if(null==e)return void vy.warn("Cannot set step. Path is not part of journey.");let i=(0,r.g)(this,IY).indexOf(e);i<0?vy.warn("There was a problem setting this step of the journey."):this.setStep(i)},"setStepByPath")),(0,r.h)(this,kY,(0,r.a)(()=>{let t=this.activeDirections.path[this.activeDirections.path.length-1],e=this.activeDirections.path[0];"string"==typeof(0,r.g)(this,OY).polygonHighlightColor&&(e.locations.forEach(t=>{t.polygons.forEach(t=>{(0,r.g)(this,PY).polygonColors.setPolygonColor(t,(0,r.g)(this,OY).polygonHighlightColor)})}),t.locations.forEach(t=>{t.polygons.forEach(t=>{(0,r.g)(this,PY).polygonColors.setPolygonColor(t,(0,r.g)(this,OY).polygonHighlightColor)})}));let i=((0,r.g)(this,IY)||[this.activeDirections]).map(t=>t.path[t.path.length-1]);null==i||i.forEach(t=>{let e=SY((0,r.g)(this,OY).scale);"function"==typeof(0,r.g)(this,OY).destinationMarkerTemplate&&((0,r.g)(this,RY)||(0,r.i)(this,RY,[]),(0,r.g)(this,RY).push((0,r.g)(this,PY).markers.add(t,(0,r.g)(this,OY).destinationMarkerTemplate({icon:e,location:t.locations[0]}),{rank:4,anchor:1})))});let n=MY((0,r.g)(this,OY).scale);"function"==typeof(0,r.g)(this,OY).departureMarkerTemplate&&(0,r.i)(this,qY,(0,r.g)(this,PY).markers.add(e,(0,r.g)(this,OY).departureMarkerTemplate({icon:n}),{rank:4,anchor:1})),(0,r.g)(this,PY).tryRendering()},"#updateForJourneyStartOrStepChange")),(0,r.h)(this,BY,(0,r.a)(()=>{if(0===(0,r.g)(this,DY).size){(0,r.g)(this,IY).forEach(t=>{if(t!==this.activeDirections){let e=(0,r.g)(this,PY).paths.drawPath(t.path,{...(0,r.g)(this,OY).inactivePathOptions});(0,r.g)(this,DY).set(e,t)}});let t=(0,r.g)(this,PY).paths.drawPath(this.activeDirections.path,{...(0,r.g)(this,OY).pathOptions});(0,r.g)(this,DY).set(t,this.activeDirections)}else{let t=this.isMultiFloor;(0,r.g)(this,DY).forEach((e,i)=>{(0,r.g)(this,PY).paths.redrawPath(i,e===this.activeDirections?{...(0,r.g)(this,OY).pathOptions,drawConnectionSegments:t,connectionPathOptions:(0,r.g)(this,OY).connectionPathOptions}:{...(0,r.g)(this,OY).inactivePathOptions,drawConnectionSegments:t,connectionPathOptions:(0,r.g)(this,OY).connectionPathOptions})})}},"#redrawAllPaths")),(0,r.h)(this,FY,(0,r.a)(()=>{this.isMultiFloor&&((0,r.g)(this,NY).forEach(t=>t.destroy()),(0,r.i)(this,NY,[]),(0,r.i)(this,NY,this.activeDirections.instructions.filter(t=>{var e,i;return"TakeVortex"===(null==(e=t.action)?void 0:e.type)||"ExitVortex"===(null==(i=t.action)?void 0:i.type)}).map(t=>new VY(t,(0,r.g)(this,OY).connectionTemplate,(0,r.g)(this,PY))).filter(t=>t))),(0,r.g)(this,BY).call(this),(0,r.g)(this,PY).tryRendering()},"#updateForMapChange")),(0,r.h)(this,UY,(0,r.a)(()=>{if(!1!==(0,r.g)(this,OY).polygonHighlightColor){let t=this.activeDirections.path[this.activeDirections.path.length-1];this.activeDirections.path[0].locations.forEach(t=>{t.polygons.forEach(t=>{(0,r.g)(this,PY).polygonColors.clearPolygonColor(t.id)})}),t.locations.forEach(t=>{t.polygons.forEach(t=>{(0,r.g)(this,PY).polygonColors.clearPolygonColor(t.id)})})}},"#unhighlightPolygons")),(0,r.h)(this,zY,(0,r.a)(()=>{(0,r.g)(this,RY).length&&(0,r.g)(this,RY).forEach(t=>{(0,r.g)(this,PY).markers.remove(t)}),(0,r.i)(this,RY,[]),null!=(0,r.g)(this,qY)&&(0,r.g)(this,PY).markers.remove((0,r.g)(this,qY)),(0,r.i)(this,qY,void 0),(0,r.g)(this,NY).forEach(t=>t.destroy()),(0,r.i)(this,NY,[])},"#removeAllMarkers")),(0,r.i)(this,PY,i),(0,r.i)(this,OY,{scale:1,polygonHighlightColor:"#7babc8",destinationMarkerTemplate:()=>SY(),departureMarkerTemplate:()=>MY(),...e,pathOptions:{...jY,...null==e?void 0:e.pathOptions},inactivePathOptions:{...GY,...null==e?void 0:e.inactivePathOptions},connectionPathOptions:{...HY,...null==e?void 0:e.connectionPathOptions}}),null!=(n=null==e?void 0:e.pathOptions)&&n.farRadius||((0,r.g)(this,OY).pathOptions.farRadius=(0,r.g)(this,OY).pathOptions.nearRadius*WY),null!=(o=null==e?void 0:e.inactivePathOptions)&&o.farRadius||((0,r.g)(this,OY).inactivePathOptions.farRadius=(0,r.g)(this,OY).inactivePathOptions.nearRadius*WY),Array.isArray(t)?((0,r.i)(this,IY,t),this.activeDirections=(0,r.g)(this,IY)[0],(0,r.i)(this,LY,0),(0,r.g)(this,PY).currentPath=t[0].path):((0,r.i)(this,IY,[t]),this.activeDirections=t,(0,r.g)(this,PY).currentPath=t.path),(0,r.i)(this,PY,i),(0,r.g)(this,PY).on(7,(0,r.g)(this,FY)),(0,r.g)(this,FY).call(this),(0,r.g)(this,kY).call(this)}get isMultiFloor(){return this.mapIdsInvolvedInJourney.length>1}get mapsInJourney(){return this.mapIdsInvolvedInJourney.map(t=>{var e;return null==(e=(0,r.g)(this,PY).mapObjects.get(t))?void 0:e.mapClass})}get buildingsInJourney(){return this.mapsInJourney.reduce((t,e)=>(t[e.mapGroup.id]||(t[e.mapGroup.id]=[]),t[e.mapGroup.id].push(e),t),{})}get mapIdsInvolvedInJourney(){let t={};(0,r.g)(this,IY).forEach(e=>{e.path.forEach(e=>t[e.map.id]=!0)});let e=Object.keys(t);return(0,r.g)(this,AY).mapsInvolvedInJourney=e,e}static create(e,i,n){return null!=t.instance&&t.instance.destroy(),t.instance=new t(e,i,n),n.publish(29),t.instance}destroy(){(0,r.g)(this,UY).call(this),(0,r.g)(this,zY).call(this),(0,r.g)(this,PY).paths.removeAllPaths(),(0,r.g)(this,PY).currentPath=void 0,(0,r.g)(this,PY).off(7,(0,r.g)(this,FY)),(0,r.g)(this,PY).publish(30),t.instance=null}};AY=new WeakMap,PY=new WeakMap,IY=new WeakMap,LY=new WeakMap,OY=new WeakMap,NY=new WeakMap,qY=new WeakMap,RY=new WeakMap,DY=new WeakMap,kY=new WeakMap,BY=new WeakMap,FY=new WeakMap,UY=new WeakMap,zY=new WeakMap,(0,r.a)(XY,"JourneyController"),(0,r.f)(XY,"instance",null);var YY,ZY=XY,JY=class{constructor(t){var e,i;(0,r.h)(this,YY,void 0),(0,r.f)(this,"options",{}),(0,r.f)(this,"enabled",!1),(0,r.f)(this,"stackScene"),(0,r.f)(this,"directions"),(0,r.f)(this,"hasOutdoorGeometry",!1),(0,r.f)(this,"needsUpdate",!1),(0,r.f)(this,"currentState","INACTIVE"),(0,r.f)(this,"mapsInJourney",[]),(0,r.f)(this,"getZoomIntoMapOptions",(0,r.a)(t=>{if("map"in t&&"nodes"in t&&"rotation"in t){let{map:e,nodes:i,rotation:n}=t;return[new wz([e],(0,r.g)(this,YY)),{activeMap:e,focusOn:{targets:{nodes:i},options:{tilt:.7,rotation:n,easing:"ease-in-out",...t.cameraTransform}}}]}},"getZoomIntoMapOptions")),(0,r.f)(this,"getDisableOptions",(0,r.a)(t=>{if("map"in t)return[new wz([t.map],(0,r.g)(this,YY)),{activeMap:t.map}]},"getDisableOptions")),(0,r.f)(this,"getShowOverviewOptions",(0,r.a)(t=>{var e;if("stackScene"in t)return[t.stackScene,{activeMap:t.stackScene.currentMap,focusOn:{options:{tilt:1.2,duration:500}},verticalDistanceBetweenMaps:null==(e=this.options)?void 0:e.verticalDistanceBetweenMaps}]},"getShowOverviewOptions")),(0,r.f)(this,"getScrollToMapOptions",(0,r.a)(t=>{if("stackScene"in t&&"map"in t&&"nodes"in t){let{stackScene:e,map:i,nodes:n}=t;return[e,{focusOn:{targets:{nodes:n},options:{tilt:.7,easing:"ease-in-out"}},activeMap:i}]}},"getScrollToMapOptions")),(0,r.f)(this,"getEnableOptions",(0,r.a)(t=>{"directions"in t&&(this.directions=t.directions,this.stackScene=new Nz(this.mapsInJourney,(0,r.g)(this,YY)))},"getEnableOptions")),(0,r.f)(this,"getShowOverviewTransition",(0,r.a)((t,e=!1)=>{var i;let[n,o]=t,a=null==(i=(0,r.g)(this,YY).sceneManager)?void 0:i.currentScene,s=n;return async()=>{(0,r.g)(this,YY).publish(6),await(0,r.g)(this,YY).tileManager.fadeOut(),await s.prepare((0,r.g)(this,YY).sceneManager,o);let t=s.mapObjects.get(s.currentMap.id);t.object.position.z=s.computeMapZ(t,s.mapObjectsArray.indexOf(t),o),a&&(null==a||a.mapObjectsArray.forEach(t=>{t.onInvisible()})),s.mapObjectsArray.forEach(t=>{t.onInvisible()}),(0,r.g)(this,YY).controls.setPedestal(t.object.position.z),(0,r.g)(this,YY).scene.add(s.object),s.object.add(t.object),this.hasOutdoorGeometry&&await Promise.all(s.mapObjectsArray.map(t=>t.fadeOut("outdoor-geometry"))),o.animate?await Promise.all([(0,r.g)(this,YY).tileManager.fadeOut()]):s.mapObjectsArray.forEach((t,e)=>{t.object.position.z=s.computeMapZ(t,e,o),s.object.add(t.object)}),s.createStackBoundingBox(),s.resize(),o.animate?(await s.focusOnStackBox({...o,autoFocusOnActiveMap:!0}),await s.expandMaps(s.mapObjectsArray,o).start()):await Promise.all([s.focusOnStackBox({...o,autoFocusOnActiveMap:!0}),...s.mapObjectsArray.map(t=>t.fadeIn("default").start()),...this.hasOutdoorGeometry?s.mapObjectsArray.map(t=>t.fadeOut("outdoor-geometry").start()):[]]),e||s.mapObjectsArray.forEach(t=>{t.onVisible()}),s.postRender(),s.lockControls(),(0,r.g)(this,YY).scene.remove(a.object),e||(0,r.g)(this,YY).publish(7)}},"getShowOverviewTransition")),(0,r.f)(this,"getZoomInToMapTransition",(0,r.a)(t=>{var e;let[i,n]=t,o=null==(e=(0,r.g)(this,YY).sceneManager)?void 0:e.currentScene;return async()=>{var t,e;(0,r.g)(this,YY).publish(6);let a=i.mapObjects.get(n.activeMap.id),s=a.object.position.z;await i.prepare((0,r.g)(this,YY).sceneManager,n),a.object.position.z=s,(0,r.g)(this,YY).paths.hideConnectionSegments(),o.destroyLabels(),i.mapObjects.forEach(t=>{i.object.add(null==t?void 0:t.object),t.onInvisible()}),o&&(null==o||o.mapObjectsArray.forEach(t=>{t.onInvisible()})),(0,r.g)(this,YY).scene.add(i.object),await Promise.all([a.fadeIn().start(),i.focusOnCurrentMap({...n,autoFocusOnActiveMap:!0}),...o.mapObjectsArray.filter(t=>t!==a).map(t=>t.fadeOut().start())]),i.mapObjectsArray.forEach(t=>{t.onVisible()}),null!=(t=(0,r.g)(this,YY).outdoorViewController)&&t.enabled&&(null==(e=(0,r.g)(this,YY).outdoorViewController)||e.show()),o.unmount(),i.postRender(),(0,r.g)(this,YY).scene.remove(o.object),(0,r.g)(this,YY).publish(7)}},"getZoomInToMapTransition")),(0,r.f)(this,"getScrollToMapTransition",(0,r.a)((t,e=!1)=>{var i;let[n,o]=t,a=null==(i=(0,r.g)(this,YY).sceneManager)?void 0:i.currentScene;return async()=>{a.currentMap=o.activeMap,await a.scrollToMap(o.activeMap),e||(0,r.g)(this,YY).publish(7)}},"getScrollToMapTransition")),(0,r.f)(this,"getDisableTransition",(0,r.a)(t=>{let[e,i]=t,n=(0,r.g)(this,YY).sceneManager.currentScene;return async()=>{var t,o,a;let s=n.mapObjects.get(n.currentMap.id);(0,r.g)(this,YY).publish(6);let l=e.mapObjects.get(i.activeMap.id);n instanceof Nz&&n.destroyLabels(),await e.prepare((0,r.g)(this,YY).sceneManager,i),n&&(null==n||n.mapObjectsArray.forEach(t=>{t.onInvisible()})),e.mapObjectsArray.forEach(t=>{t.onInvisible()}),(0,r.g)(this,YY).scene.add(e.object),e.mapObjects.forEach(t=>{e.object.add(null==t?void 0:t.object)}),(0,r.g)(this,YY).paths.hideConnectionSegments(),await Promise.all([n instanceof Nz&&n.contractMaps(s).start(),n.focusOnCurrentMap({...i,autoFocusOnActiveMap:!0})].filter(t=>t)),(0,r.g)(this,YY).scene.remove(n.object),(0,r.g)(this,YY).tryRendering(),l.object.position.z=0,(0,r.g)(this,YY).controls.setPedestal(0),e.focusOnCurrentMap({...i,focusOn:{...i.focusOn,options:{...null==(t=i.focusOn)?void 0:t.options,duration:150}},autoFocusOnActiveMap:!0}),n.unmount(),await Promise.all([(0,r.g)(this,YY).tileManager.fadeIn(),...e.mapObjectsArray.map(t=>t.fadeIn().start())]),null!=(o=(0,r.g)(this,YY).outdoorViewController)&&o.enabled&&(null==(a=(0,r.g)(this,YY).outdoorViewController)||a.show()),e.mapObjectsArray.forEach(t=>{t.onVisible()}),e.postRender(),(0,r.g)(this,YY).publish(7)}},"getDisableTransition")),(0,r.f)(this,"getEnableTransition",(0,r.a)(()=>()=>{},"getEnableTransition")),(0,r.f)(this,"states",{INACTIVE:{actions:{enable:["ACTIVE",[t=>this.getEnableOptions(t)]]}},ACTIVE:{actions:{disable:["INACTIVE",[t=>this.getDisableTransition(this.getDisableOptions(t))]],showOverview:["OVERVIEW",[t=>{let e=this.getShowOverviewOptions(t);if(null!=e&&"directions"in t&&"map"in t){let[i,n]=e;return this.getShowOverviewTransition([i,(0,bY.default)({},n,e,{activeMap:t.map,animate:!0,focusOn:{options:{tilt:1.2,duration:500}}})])}return Promise.reject()}]]}},OVERVIEW:{actions:{disable:["INACTIVE",[t=>this.getDisableTransition(this.getDisableOptions(t))]],zoomInToMap:["ZOOMED_IN",[t=>this.getScrollToMapTransition(this.getScrollToMapOptions(t),!0),t=>this.getZoomInToMapTransition(this.getZoomIntoMapOptions(t))]],scrollToMap:["OVERVIEW",[t=>this.getScrollToMapTransition(this.getScrollToMapOptions(t))]]}},ZOOMED_IN:{actions:{disable:["INACTIVE",[t=>this.getDisableTransition(this.getDisableOptions(t))]],showOverview:["OVERVIEW",[t=>this.getShowOverviewTransition(this.getShowOverviewOptions(t))]],zoomInToMap:["ZOOMED_IN",[t=>this.getShowOverviewTransition(this.getShowOverviewOptions(t),!0),t=>this.getScrollToMapTransition(this.getScrollToMapOptions(t),!0),t=>this.getZoomInToMapTransition(this.getZoomIntoMapOptions(t))]]}}}),(0,r.f)(this,"disable",(0,r.a)(()=>{(0,r.g)(this,YY).setState("explore"),this.options={};let t=this.transition(this.currentState,"disable");return null!=t?(this.enabled=!1,this.mapsInJourney=[],this.exec(t,{map:this.currentMap})):Promise.reject()},"disable")),(0,r.f)(this,"enable",(0,r.a)(t=>{if(null==ZY.instance)return Promise.reject("Can't enable stacked maps without a journey enabled");let e=this.transition(this.currentState,"enable");if(null!=e){this.options=t||{},(0,r.g)(this,YY).setState("STACKED"),this.enabled=!0;let i=ZY.instance.activeDirections;return this.mapsInJourney=ZY.instance.mapsInJourney,this.exec(e,{directions:i})}return Promise.reject()},"enable")),(0,r.f)(this,"showOverview",(0,r.a)(async()=>{let t=this.transition(this.currentState,"showOverview");return this.exec(t,{map:this.mapsInJourney.includes(this.currentMap)?this.currentMap:this.mapsInJourney[0],stackScene:this.stackScene,directions:this.directions})},"showOverview")),(0,r.f)(this,"scrollToMap",(0,r.a)(t=>{let e=this.transition(this.currentState,"scrollToMap");return this.exec(e,{stackScene:this.stackScene,map:t,rotation:void 0,nodes:this.nodesInJourney.filter(e=>e.map===t)})},"scrollToMap")),(0,r.f)(this,"zoomInToMap",(0,r.a)((t,e)=>{let i=t||this.currentMap,n=this.nodesInJourney.filter(t=>t.map===i),o=this.transition(this.currentState,"zoomInToMap");return this.exec(o,{map:t,nodes:n,stackScene:this.stackScene,rotation:(0,r.g)(this,YY).controls.getRotation(),cameraTransform:e})},"zoomInToMap")),(0,r.i)(this,YY,t);let n=null==(i=null==(e=(0,r.g)(this,YY).options)?void 0:e.loadOptions)?void 0:i.outdoorGeometryLayers;this.hasOutdoorGeometry=Array.isArray(n)&&n.length>0}transition(t,e){var i,n;let r=null==(i=this.states[t])?void 0:i.actions[e],o=null!=(n=null==r?void 0:r[0])?n:t;if(null!=o&&null!=r)return this.currentState=o,this.needsUpdate=!0,r[1];this.needsUpdate=!1}async exec(t,e){if(this.needsUpdate&&null!=t&&Array.isArray(t)&&t.filter(t=>t).length>0){for(let i of t){let t=i(e);"function"==typeof t&&await t()}return Promise.resolve()}}get nodesInJourney(){return Array.isArray(this.directions)?this.directions.map(t=>t.path).flat():this.directions.path}get currentMap(){return(0,r.g)(this,YY).venue.getCollectionItemById("maps",(0,r.g)(this,YY).currentMap)}};YY=new WeakMap,(0,r.a)(JY,"StackedMapsController");var KY=JY,QY=KY;(0,n.a)();var $Y=(0,r.e)(de());(0,n.a)(),(0,n.a)(),(0,n.a)();var tZ="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",eZ="",iZ="srgb",nZ="srgb-linear",rZ=Number(me.replace(/\D+/g,"")),oZ=rZ>=152,aZ=new Map([[On,nZ],[Nn,iZ]]),sZ=new Map([[nZ,On],[iZ,Nn]]);function lZ(t){return null===t?null:oZ?t.outputColorSpace:aZ.get(t.outputEncoding)}function hZ(t,e){null!==t&&(oZ?t.colorSpace=e:t.encoding=sZ.get(e))}(0,r.a)(lZ,"getOutputColorSpace"),(0,r.a)(hZ,"setTextureColorSpace");var uZ,cZ,pZ,dZ,fZ,gZ={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},mZ={NONE:0,DEPTH:1,CONVOLUTION:2},vZ={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},yZ={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},_Z="#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <encodings_fragment>\n}",xZ="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",bZ=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],wZ=((0,r.a)(uZ=class extends Us{constructor(t=new Kr){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Wv(null),texelSize:new Wv(new Kr),scale:new Wv(1),kernel:new Wv(0)},blending:Ce,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:_Z,vertexShader:xZ}),this.setTexelSize(t.x,t.y),this.kernelSize=yZ.MEDIUM}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.inputBuffer=t}get kernelSequence(){return bZ[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(){return this.uniforms.scale.value}setScale(t){this.uniforms.scale.value=t}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(t){this.uniforms.kernel.value=t}setKernel(t){this.kernel=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e,.5*t,.5*e)}setSize(t,e){let i=1/t,n=1/e;this.uniforms.texelSize.value.set(i,n,.5*i,.5*n)}},"KawaseBlurMaterial"),uZ),EZ="#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <encodings_fragment>\n#include <dithering_fragment>\n}",MZ=((0,r.a)(cZ=class extends Us{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Wv(null),opacity:new Wv(1)},blending:Ce,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:EZ,vertexShader:tZ})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}getOpacity(t){return this.uniforms.opacity.value}setOpacity(t){this.uniforms.opacity.value=t}},"CopyMaterial"),cZ),SZ="#include <packing>\n#include <clipping_planes_pars_fragment>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform float cameraNear;uniform float cameraFar;varying float vViewZ;varying vec4 vProjTexCoord;void main(){\n#include <clipping_planes_fragment>\nvec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);\n#if DEPTH_PACKING == 3201\nfloat fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));\n#else\nfloat fragCoordZ=texture2D(depthBuffer,projTexCoord).r;\n#endif\n#ifdef PERSPECTIVE_CAMERA\nfloat viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);\n#else\nfloat viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);\n#endif\nfloat depthTest=(-vViewZ>-viewZ)?1.0:0.0;gl_FragColor.rg=vec2(0.0,depthTest);}",TZ="#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying float vViewZ;varying vec4 vProjTexCoord;void main(){\n#include <skinbase_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <project_vertex>\nvViewZ=mvPosition.z;vProjTexCoord=gl_Position;\n#include <clipping_planes_vertex>\n}",CZ=((0,r.a)(pZ=class extends Us{constructor(t=null,e){super({name:"DepthComparisonMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Wv(null),cameraNear:new Wv(.3),cameraFar:new Wv(1e3)},blending:Ce,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:SZ,vertexShader:TZ}),this.depthBuffer=t,this.depthPacking=Rn,this.copyCameraSettings(e)}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=Rn){this.depthBuffer=t,this.depthPacking=e}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof Gs?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},"DepthComparisonMaterial"),pZ),AZ="#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#if DEPTH_PACKING == 3201\nuniform lowp sampler2D depthBuffer;\n#elif defined(GL_FRAGMENT_PRECISION_HIGH)\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#if THREE_REVISION >= 137\nvec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE gl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <encodings_fragment>\n#endif\n#include <dithering_fragment>\n}",PZ="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",IZ=((0,r.a)(dZ=class extends Us{constructor(t,e,i,n,r=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:me.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Wv(null),depthBuffer:new Wv(null),resolution:new Wv(new Tr),texelSize:new Wv(new Tr),cameraNear:new Wv(.3),cameraFar:new Wv(1e3),aspect:new Wv(1),time:new Wv(0)},blending:Ce,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:r}),t&&this.setShaderParts(t),e&&this.setDefines(e),i&&this.setUniforms(i),this.copyCameraSettings(n)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=qn){this.depthBuffer=t,this.depthPacking=e}setShaderData(t){this.setShaderParts(t.shaderParts),this.setDefines(t.defines),this.setUniforms(t.uniforms),this.setExtensions(t.extensions)}setShaderParts(t){return this.fragmentShader=AZ.replace(vZ.FRAGMENT_HEAD,t.get(vZ.FRAGMENT_HEAD)||"").replace(vZ.FRAGMENT_MAIN_UV,t.get(vZ.FRAGMENT_MAIN_UV)||"").replace(vZ.FRAGMENT_MAIN_IMAGE,t.get(vZ.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=PZ.replace(vZ.VERTEX_HEAD,t.get(vZ.VERTEX_HEAD)||"").replace(vZ.VERTEX_MAIN_SUPPORT,t.get(vZ.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(t){for(let e of t.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(t){for(let e of t.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(t){this.extensions={};for(let e of t)this.extensions[e]=!0;return this}get encodeOutput(){return void 0!==this.defines.ENCODE_OUTPUT}set encodeOutput(t){this.encodeOutput!==t&&(t?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(t){return this.encodeOutput}setOutputEncodingEnabled(t){this.encodeOutput=t}get time(){return this.uniforms.time.value}set time(t){this.uniforms.time.value=t}setDeltaTime(t){this.uniforms.time.value+=t}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof Gs?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(t,e){let i=this.uniforms;i.resolution.value.set(t,e),i.texelSize.value.set(1/t,1/e),i.aspect.value=t/e}static get Section(){return vZ}},"EffectMaterial"),dZ),LZ="uniform lowp sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)?vec2(d,0.0):vec2(0.0,d);}",OZ="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",NZ=((0,r.a)(fZ=class extends Us{constructor(t=new Tr){super({name:"OutlineMaterial",uniforms:{inputBuffer:new Wv(null),texelSize:new Wv(new Tr)},blending:Ce,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:LZ,vertexShader:OZ}),this.uniforms.texelSize.value.set(t.x,t.y),this.uniforms.maskTexture=this.uniforms.inputBuffer}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e)}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},"OutlineMaterial"),fZ),qZ=new Vs,RZ=null;function DZ(){if(null===RZ){let t=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);void 0!==(RZ=new ls).setAttribute?(RZ.setAttribute("position",new Xa(t,3)),RZ.setAttribute("uv",new Xa(e,2))):(RZ.addAttribute("position",new Xa(t,3)),RZ.addAttribute("uv",new Xa(e,2)))}return RZ}(0,r.a)(DZ,"getFullscreenTriangle");var kZ,BZ,FZ,UZ,zZ,VZ,jZ,GZ,HZ=((0,r.a)(kZ=class{constructor(t="Pass",e=new ef,i=qZ){this.name=t,this.renderer=null,this.scene=e,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){let e=this.fullscreenMaterial;null!==e&&(e.needsUpdate=!0),this.rtt=!t}}set mainScene(t){}set mainCamera(t){}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return null!==this.screen?this.screen.material:null}set fullscreenMaterial(t){let e=this.screen;null!==e?e.material=t:((e=new Cs(DZ(),t)).frustumCulled=!1,null===this.scene&&(this.scene=new ef),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,e=qn){}render(t,e,i,n,r){throw new Error("Render method not implemented!")}setSize(t,e){}initialize(t,e,i){}dispose(){for(let t of Object.keys(this)){let e=this[t];(e instanceof $r||e instanceof qa||e instanceof Zr||e instanceof HZ)&&this[t].dispose()}}},"Pass"),kZ),WZ=((0,r.a)(BZ=class extends HZ{constructor(t,e=!0){super("CopyPass"),this.fullscreenMaterial=new MZ,this.needsSwap=!1,this.renderTarget=t,void 0===t&&(this.renderTarget=new $r(1,1,{minFilter:Mi,magFilter:Mi,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(t){this.autoResize=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(t){this.autoResize=t}render(t,e,i,n,r){this.fullscreenMaterial.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){this.autoResize&&this.renderTarget.setSize(t,e)}initialize(t,e,i){void 0!==i&&(this.renderTarget.texture.type=i,i!==Ci?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":lZ(t)===iZ&&hZ(this.renderTarget.texture,iZ))}},"CopyPass"),BZ),XZ=((0,r.a)(FZ=class extends HZ{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(t,e,i,n,r){let o=t.state.buffers.stencil;o.setLocked(!1),o.setTest(!1)}},"ClearMaskPass"),FZ),YZ=new Ua,ZZ=((0,r.a)(UZ=class extends HZ{constructor(t=!0,e=!0,i=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=t,this.depth=e,this.stencil=i,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(t,e,i){this.color=t,this.depth=e,this.stencil=i}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(t){this.overrideClearColor=t}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(t){this.overrideClearAlpha=t}render(t,e,i,n,r){let o=this.overrideClearColor,a=this.overrideClearAlpha,s=t.getClearAlpha(),l=null!==o,h=a>=0;l?(t.getClearColor(YZ),t.setClearColor(o,h?a:s)):h&&t.setClearAlpha(a),t.setRenderTarget(this.renderToScreen?null:e),t.clear(this.color,this.depth,this.stencil),l?t.setClearColor(YZ,s):h&&t.setClearAlpha(s)}},"ClearPass"),UZ),JZ=-1,KZ=((0,r.a)(zZ=class extends Jn{constructor(t,e=JZ,i=JZ,n=1){super(),this.resizable=t,this.baseSize=new Tr(1,1),this.preferredSize=new Tr(e,i),this.target=this.preferredSize,this.s=n,this.effectiveSize=new Tr,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){let t=this.baseSize,e=this.preferredSize,i=this.effectiveSize,n=this.scale;e.width!==JZ?i.width=e.width:e.height!==JZ?i.width=Math.round(e.height*(t.width/Math.max(t.height,1))):i.width=Math.round(t.width*n),e.height!==JZ?i.height=e.height:e.width!==JZ?i.height=Math.round(e.width/Math.max(t.width/Math.max(t.height,1),1)):i.height=Math.round(t.height*n)}get width(){return this.effectiveSize.width}set width(t){this.preferredWidth=t}get height(){return this.effectiveSize.height}set height(t){this.preferredHeight=t}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(t){this.s!==t&&(this.s=t,this.preferredSize.setScalar(JZ),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(t){this.scale=t}get baseWidth(){return this.baseSize.width}set baseWidth(t){this.baseSize.width!==t&&(this.baseSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(t){this.baseWidth=t}get baseHeight(){return this.baseSize.height}set baseHeight(t){this.baseSize.height!==t&&(this.baseSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(t){this.baseHeight=t}setBaseSize(t,e){(this.baseSize.width!==t||this.baseSize.height!==e)&&(this.baseSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(t){this.preferredSize.width!==t&&(this.preferredSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(t){this.preferredWidth=t}get preferredHeight(){return this.preferredSize.height}set preferredHeight(t){this.preferredSize.height!==t&&(this.preferredSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(t){this.preferredHeight=t}setPreferredSize(t,e){(this.preferredSize.width!==t||this.preferredSize.height!==e)&&(this.preferredSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(t){this.s=t.scale,this.baseSize.set(t.baseWidth,t.baseHeight),this.preferredSize.set(t.preferredWidth,t.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return JZ}},"Resolution"),zZ),QZ=!1,$Z=((0,r.a)(VZ=class{constructor(t=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(t),this.meshCount=0,this.replaceMaterial=(t=>{if(t.isMesh){let e;if(t.material.flatShading)switch(t.material.side){case Te:e=this.materialsFlatShadedDoubleSide;break;case Se:e=this.materialsFlatShadedBackSide;break;default:e=this.materialsFlatShaded}else switch(t.material.side){case Te:e=this.materialsDoubleSide;break;case Se:e=this.materialsBackSide;break;default:e=this.materials}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=e[2]:t.isInstancedMesh?t.material=e[1]:t.material=e[0],++this.meshCount}})}cloneMaterial(t){if(!(t instanceof Us))return t.clone();let e=t.uniforms,i=new Map;for(let r in e){let t=e[r].value;t.isRenderTargetTexture&&(e[r].value=null,i.set(r,t))}let n=t.clone();for(let r of i)e[r[0]].value=r[1],n.uniforms[r[0]].value=r[1];return n}setMaterial(t){if(this.disposeMaterials(),this.material=t,null!==t){let e=this.materials=[this.cloneMaterial(t),this.cloneMaterial(t),this.cloneMaterial(t)];for(let i of e)i.uniforms=Object.assign({},t.uniforms),i.side=Me;e[2].skinning=!0,this.materialsBackSide=e.map(e=>{let i=this.cloneMaterial(e);return i.uniforms=Object.assign({},t.uniforms),i.side=Se,i}),this.materialsDoubleSide=e.map(e=>{let i=this.cloneMaterial(e);return i.uniforms=Object.assign({},t.uniforms),i.side=Te,i}),this.materialsFlatShaded=e.map(e=>{let i=this.cloneMaterial(e);return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(e=>{let i=this.cloneMaterial(e);return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i.side=Se,i}),this.materialsFlatShadedDoubleSide=e.map(e=>{let i=this.cloneMaterial(e);return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i.side=Te,i})}}render(t,e,i){let n=t.shadowMap.enabled;if(t.shadowMap.enabled=!1,QZ){let n=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),t.render(e,i);for(let t of n)t[0].material=t[1];this.meshCount!==n.size&&n.clear()}else{let n=e.overrideMaterial;e.overrideMaterial=this.material,t.render(e,i),e.overrideMaterial=n}t.shadowMap.enabled=n}disposeMaterials(){if(null!==this.material){let t=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let e of t)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return QZ}static set workaroundEnabled(t){QZ=t}},"OverrideMaterialManager"),VZ),tJ=((0,r.a)(jZ=class extends HZ{constructor(t,e,i=null){super("RenderPass",t,e),this.needsSwap=!1,this.clearPass=new ZZ,this.overrideMaterialManager=null===i?null:new $Z(i),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get renderToScreen(){return super.renderToScreen}set renderToScreen(t){super.renderToScreen=t,this.clearPass.renderToScreen=t}get overrideMaterial(){let t=this.overrideMaterialManager;return null!==t?t.material:null}set overrideMaterial(t){let e=this.overrideMaterialManager;null!==t?null!==e?e.setMaterial(t):this.overrideMaterialManager=new $Z(t):null!==e&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(t){this.overrideMaterial=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getSelection(){return this.selection}setSelection(t){this.selection=t}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(t){this.ignoreBackground=t}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(t){this.skipShadowMapUpdate=t}getClearPass(){return this.clearPass}render(t,e,i,n,r){let o=this.scene,a=this.camera,s=this.selection,l=a.layers.mask,h=o.background,u=t.shadowMap.autoUpdate,c=this.renderToScreen?null:e;null!==s&&a.layers.set(s.getLayer()),this.skipShadowMapUpdate&&(t.shadowMap.autoUpdate=!1),(this.ignoreBackground||null!==this.clearPass.overrideClearColor)&&(o.background=null),this.clearPass.enabled&&this.clearPass.render(t,e),t.setRenderTarget(c),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(t,o,a):t.render(o,a),a.layers.mask=l,o.background=h,t.shadowMap.autoUpdate=u}},"RenderPass"),jZ),eJ=((0,r.a)(GZ=class extends HZ{constructor(t,e,{renderTarget:i,resolutionScale:n=1,width:r=KZ.AUTO_SIZE,height:o=KZ.AUTO_SIZE,resolutionX:a=r,resolutionY:s=o}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new tJ(t,e,new Cd({depthPacking:Rn}));let l=this.renderPass;l.skipShadowMapUpdate=!0,l.ignoreBackground=!0;let h=l.clearPass;h.overrideClearColor=new Ua(16777215),h.overrideClearAlpha=1,this.renderTarget=i,void 0===this.renderTarget&&(this.renderTarget=new $r(1,1,{minFilter:bi,magFilter:bi}),this.renderTarget.texture.name="DepthPass.Target");let u=this.resolution=new KZ(this,a,s,n);u.addEventListener("change",t=>this.setSize(u.baseWidth,u.baseHeight))}set mainScene(t){this.renderPass.mainScene=t}set mainCamera(t){this.renderPass.mainCamera=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,i,n,r){let o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(t,o)}setSize(t,e){let i=this.resolution;i.setBaseSize(t,e),this.renderTarget.setSize(i.width,i.height)}},"DepthPass"),GZ),iJ=new Float32Array([255/256/256**3,255/256/65536,255/256/256,255/256]);function nJ(t,e,i){for(let n of e){let e="$1"+t+n.charAt(0).toUpperCase()+n.slice(1),r=new RegExp("([^\\.])(\\b"+n+"\\b)","g");for(let t of i.entries())null!==t[1]&&i.set(t[0],t[1].replace(r,e))}}function rJ(t,e,i){let n=e.getFragmentShader(),r=e.getVertexShader(),o=void 0!==n&&/mainImage/.test(n),a=void 0!==n&&/mainUv/.test(n);if(i.attributes|=e.getAttributes(),void 0===n)throw new Error("Missing fragment shader (".concat(e.name,")"));if(a&&i.attributes&mZ.CONVOLUTION)throw new Error("Effects that transform UVs are incompatible with convolution effects (".concat(e.name,")"));if(!o&&!a)throw new Error("Could not find mainImage or mainUv function (".concat(e.name,")"));{let s=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=i.shaderParts,h=l.get(vZ.FRAGMENT_HEAD)||"",u=l.get(vZ.FRAGMENT_MAIN_UV)||"",c=l.get(vZ.FRAGMENT_MAIN_IMAGE)||"",p=l.get(vZ.VERTEX_HEAD)||"",d=l.get(vZ.VERTEX_MAIN_SUPPORT)||"",f=new Set,g=new Set;if(a&&(u+="\t".concat(t,"MainUv(UV);\n"),i.uvTransformation=!0),null!==r&&/mainSupport/.test(r)){let e=/mainSupport *\([\w\s]*?uv\s*?\)/.test(r);d+="\t".concat(t,"MainSupport("),d+=e?"vUv);\n":");\n";for(let t of r.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(let e of t[1].split(/\s*,\s*/))i.varyings.add(e),f.add(e),g.add(e);for(let t of r.matchAll(s))g.add(t[1])}for(let t of n.matchAll(s))g.add(t[1]);for(let t of e.defines.keys())g.add(t.replace(/\([\w\s,]*\)/g,""));for(let t of e.uniforms.keys())g.add(t);g.delete("while"),g.delete("for"),g.delete("if"),e.uniforms.forEach((e,n)=>i.uniforms.set(t+n.charAt(0).toUpperCase()+n.slice(1),e)),e.defines.forEach((e,n)=>i.defines.set(t+n.charAt(0).toUpperCase()+n.slice(1),e));let m=new Map([["fragment",n],["vertex",r]]);nJ(t,g,i.defines),nJ(t,g,m),n=m.get("fragment"),r=m.get("vertex");let v=e.blendMode;if(i.blendModes.set(v.blendFunction,v),o){null!==e.inputColorSpace&&e.inputColorSpace!==i.colorSpace&&(c+=e.inputColorSpace===iZ?"color0 = LinearTosRGB(color0);\n\t":"color0 = sRGBToLinear(color0);\n\t"),e.outputColorSpace!==eZ?i.colorSpace=e.outputColorSpace:null!==e.inputColorSpace&&(i.colorSpace=e.inputColorSpace);let r=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;c+="".concat(t,"MainImage(color0, UV, "),i.attributes&mZ.DEPTH&&r.test(n)&&(c+="depth, ",i.readDepth=!0),c+="color1);\n\t";let o=t+"BlendOpacity";i.uniforms.set(o,v.opacity),c+="color0 = blend".concat(v.blendFunction,"(color0, color1, ").concat(o,");\n\n\t"),h+="uniform float ".concat(o,";\n\n")}if(h+=n+"\n",null!==r&&(p+=r+"\n"),l.set(vZ.FRAGMENT_HEAD,h),l.set(vZ.FRAGMENT_MAIN_UV,u),l.set(vZ.FRAGMENT_MAIN_IMAGE,c),l.set(vZ.VERTEX_HEAD,p),l.set(vZ.VERTEX_MAIN_SUPPORT,d),null!==e.extensions)for(let t of e.extensions)i.extensions.add(t)}}(0,r.a)(nJ,"prefixSubstrings"),(0,r.a)(rJ,"integrateEffect");var oJ,aJ,sJ,lJ,hJ,uJ,cJ,pJ,dJ,fJ,gJ,mJ=((0,r.a)(oJ=class extends HZ{constructor(t,...e){super("EffectPass"),this.fullscreenMaterial=new IZ(null,null,null,t),this.listener=(t=>this.handleEvent(t)),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(t){for(let e of this.effects)e.mainScene=t}set mainCamera(t){this.fullscreenMaterial.copyCameraSettings(t);for(let e of this.effects)e.mainCamera=t}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(t){this.fullscreenMaterial.encodeOutput=t}get dithering(){return this.fullscreenMaterial.dithering}set dithering(t){let e=this.fullscreenMaterial;e.dithering=t,e.needsUpdate=!0}setEffects(t){for(let e of this.effects)e.removeEventListener("change",this.listener);this.effects=t.sort((t,e)=>e.attributes-t.attributes);for(let e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){let t=new MJ,e=0;for(let a of this.effects)if(a.blendMode.blendFunction===gZ.DST)t.attributes|=a.getAttributes()&mZ.DEPTH;else{if(t.attributes&a.getAttributes()&mZ.CONVOLUTION)throw new Error("Convolution effects cannot be merged (".concat(a.name,")"));rJ("e"+e++,a,t)}let i=t.shaderParts.get(vZ.FRAGMENT_HEAD),n=t.shaderParts.get(vZ.FRAGMENT_MAIN_IMAGE),r=t.shaderParts.get(vZ.FRAGMENT_MAIN_UV),o=/\bblend\b/g;for(let a of t.blendModes.values())i+=a.getShaderCode().replace(o,"blend".concat(a.blendFunction))+"\n";t.attributes&mZ.DEPTH?(t.readDepth&&(n="float depth = readDepth(UV);\n\n\t"+n),this.needsDepthTexture=null===this.getDepthTexture()):this.needsDepthTexture=!1,t.colorSpace===iZ&&(n+="color0 = sRGBToLinear(color0);\n\t"),t.uvTransformation?(r="vec2 transformedUv = vUv;\n"+r,t.defines.set("UV","transformedUv")):t.defines.set("UV","vUv"),t.shaderParts.set(vZ.FRAGMENT_HEAD,i),t.shaderParts.set(vZ.FRAGMENT_MAIN_IMAGE,n),t.shaderParts.set(vZ.FRAGMENT_MAIN_UV,r);for(let[a,s]of t.shaderParts)null!==s&&t.shaderParts.set(a,s.trim().replace(/^#/,"\n#"));this.skipRendering=0===e,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(t)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(t,e=qn){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e;for(let i of this.effects)i.setDepthTexture(t,e)}render(t,e,i,n,r){for(let o of this.effects)o.update(t,e,n);if(!this.skipRendering||this.renderToScreen){let r=this.fullscreenMaterial;r.inputBuffer=e.texture,r.time+=n*this.timeScale,t.setRenderTarget(this.renderToScreen?null:i),t.render(this.scene,this.camera)}}setSize(t,e){this.fullscreenMaterial.setSize(t,e);for(let i of this.effects)i.setSize(t,e)}initialize(t,e,i){this.renderer=t;for(let n of this.effects)n.initialize(t,e,i);this.updateMaterial(),void 0!==i&&i!==Ci&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let t of this.effects)t.removeEventListener("change",this.listener),t.dispose()}handleEvent(t){"change"===t.type&&this.recompile()}},"EffectPass"),oJ),vJ=((0,r.a)(aJ=class extends HZ{constructor({kernelSize:t=yZ.MEDIUM,resolutionScale:e=.5,width:i=KZ.AUTO_SIZE,height:n=KZ.AUTO_SIZE,resolutionX:r=i,resolutionY:o=n}={}){super("KawaseBlurPass"),this.renderTargetA=new $r(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let a=this.resolution=new KZ(this,r,o,e);a.addEventListener("change",t=>this.setSize(a.baseWidth,a.baseHeight)),this._blurMaterial=new wZ,this._blurMaterial.kernelSize=t,this.copyMaterial=new MZ}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(t){this._blurMaterial=t}get dithering(){return this.copyMaterial.dithering}set dithering(t){this.copyMaterial.dithering=t}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(t){this.blurMaterial.kernelSize=t}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get scale(){return this.blurMaterial.scale}set scale(t){this.blurMaterial.scale=t}getScale(){return this.blurMaterial.scale}setScale(t){this.blurMaterial.scale=t}getKernelSize(){return this.kernelSize}setKernelSize(t){this.kernelSize=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,i,n,r){let o=this.scene,a=this.camera,s=this.renderTargetA,l=this.renderTargetB,h=this.blurMaterial,u=h.kernelSequence,c=e;this.fullscreenMaterial=h;for(let p=0,d=u.length;p<d;++p){let e=1&p?l:s;h.kernel=u[p],h.inputBuffer=c.texture,t.setRenderTarget(e),t.render(o,a),c=e}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=c.texture,t.setRenderTarget(this.renderToScreen?null:i),t.render(o,a)}setSize(t,e){let i=this.resolution;i.setBaseSize(t,e);let n=i.width,r=i.height;this.renderTargetA.setSize(n,r),this.renderTargetB.setSize(n,r),this.blurMaterial.setSize(t,e)}initialize(t,e,i){void 0!==i&&(this.renderTargetA.texture.type=i,this.renderTargetB.texture.type=i,i!==Ci?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):lZ(t)===iZ&&(hZ(this.renderTargetA.texture,iZ),hZ(this.renderTargetB.texture,iZ)))}static get AUTO_SIZE(){return KZ.AUTO_SIZE}},"KawaseBlurPass"),aJ),yJ=((0,r.a)(sJ=class extends HZ{constructor(t,e){super("MaskPass",t,e),this.needsSwap=!1,this.clearPass=new ZZ(!1,!1,!0),this.inverse=!1}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get inverted(){return this.inverse}set inverted(t){this.inverse=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(t){this.inverted=t}render(t,e,i,n,r){let o=t.getContext(),a=t.state.buffers,s=this.scene,l=this.camera,h=this.clearPass,u=this.inverted?0:1,c=1-u;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.stencil.setFunc(o.ALWAYS,u,4294967295),a.stencil.setClear(c),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?h.render(t,null):(h.render(t,e),h.render(t,i))),this.renderToScreen?(t.setRenderTarget(null),t.render(s,l)):(t.setRenderTarget(e),t.render(s,l),t.setRenderTarget(i),t.render(s,l)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(o.EQUAL,1,4294967295),a.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),a.stencil.setLocked(!0)}},"MaskPass"),sJ),_J=((0,r.a)(lJ=class extends HZ{constructor(t,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=t,this.input=e}setInput(t){this.input=t}render(t,e,i,n,r){let o=this.fullscreenMaterial.uniforms;null!==e&&void 0!==o&&void 0!==o[this.input]&&(o[this.input].value=e.texture),t.setRenderTarget(this.renderToScreen?null:i),t.render(this.scene,this.camera)}initialize(t,e,i){void 0!==i&&i!==Ci&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},"ShaderPass"),lJ),xJ=.001,bJ=1e3,wJ=((0,r.a)(hJ=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(t){typeof document<"u"&&void 0!==document.hidden&&(t?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=t)}get delta(){return this._delta*xJ}get fixedDelta(){return this._fixedDelta*xJ}set fixedDelta(t){this._fixedDelta=t*bJ}get elapsed(){return this._elapsed*xJ}update(t){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(void 0!==t?t:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}handleEvent(t){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},"Timer"),hJ),EJ=(uJ=class{constructor(t=null,{depthBuffer:e=!0,stencilBuffer:i=!1,multisampling:n=0,frameBufferType:r}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,i,r,n),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new WZ,this.depthTexture=null,this.passes=[],this.timer=new wJ,this.autoRenderToScreen=!0,this.setRenderer(t)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(t){let e=this.inputBuffer,i=this.multisampling;i>0&&t>0?(this.inputBuffer.samples=t,this.outputBuffer.samples=t,this.inputBuffer.dispose(),this.outputBuffer.dispose()):i!==t&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,t),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(t){if(this.renderer=t,null!==t){let e=t.getSize(new Tr),i=t.getContext().getContextAttributes().alpha,n=this.inputBuffer.texture.type;n===Ci&&lZ(t)===iZ&&(hZ(this.inputBuffer.texture,iZ),hZ(this.outputBuffer.texture,iZ),this.inputBuffer.dispose(),this.outputBuffer.dispose()),t.autoClear=!1,this.setSize(e.width,e.height);for(let r of this.passes)r.initialize(t,i,n)}}replaceRenderer(t,e=!0){let i=this.renderer,n=i.domElement.parentNode;return this.setRenderer(t),e&&null!==n&&(n.removeChild(i.domElement),n.appendChild(t.domElement)),i}createDepthTexture(){let t=this.depthTexture=new Gd;return this.inputBuffer.depthTexture=t,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(t.format=ji,t.type=ki):t.type=Oi,t}deleteDepthTexture(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let t of this.passes)t.setDepthTexture(null)}}createBuffer(t,e,i,n){let r=this.renderer,o=null===r?new Tr:r.getDrawingBufferSize(new Tr),a={minFilter:Mi,magFilter:Mi,stencilBuffer:e,depthBuffer:t,type:i},s=new $r(o.width,o.height,a);return n>0&&(s.ignoreDepthForMultisampleCopy=!1,s.samples=n),i===Ci&&lZ(r)===iZ&&hZ(s.texture,iZ),s.texture.name="EffectComposer.Buffer",s.texture.generateMipmaps=!1,s}setMainScene(t){for(let e of this.passes)e.mainScene=t}setMainCamera(t){for(let e of this.passes)e.mainCamera=t}addPass(t,e){let i=this.passes,n=this.renderer,r=n.getDrawingBufferSize(new Tr),o=n.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(t.setRenderer(n),t.setSize(r.width,r.height),t.initialize(n,o,a),this.autoRenderToScreen&&(i.length>0&&(i[i.length-1].renderToScreen=!1),t.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==e?i.splice(e,0,t):i.push(t),this.autoRenderToScreen&&(i[i.length-1].renderToScreen=!0),t.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){let e=this.createDepthTexture();for(t of i)t.setDepthTexture(e)}else t.setDepthTexture(this.depthTexture)}removePass(t){let e=this.passes,i=e.indexOf(t);if(-1!==i&&e.splice(i,1).length>0){if(null!==this.depthTexture){let i=(0,r.a)((t,e)=>t||e.needsDepthTexture,"reducer");e.reduce(i,!1)||(t.getDepthTexture()===this.depthTexture&&t.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&i===e.length&&(t.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){let t=this.passes;this.deleteDepthTexture(),t.length>0&&(this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!1),this.passes=[])}render(t){let e,i,n,r=this.renderer,o=this.copyPass,a=this.inputBuffer,s=this.outputBuffer,l=!1;void 0===t&&(this.timer.update(),t=this.timer.delta);for(let h of this.passes)h.enabled&&(h.render(r,a,s,t,l),h.needsSwap&&(l&&(o.renderToScreen=h.renderToScreen,e=r.getContext(),(i=r.state.buffers.stencil).setFunc(e.NOTEQUAL,1,4294967295),o.render(r,a,s,t,l),i.setFunc(e.EQUAL,1,4294967295)),n=a,a=s,s=n),h instanceof yJ?l=!0:h instanceof XZ&&(l=!1))}setSize(t,e,i){let n=this.renderer,r=n.getSize(new Tr);(void 0===t||void 0===e)&&(t=r.width,e=r.height),(r.width!==t||r.height!==e)&&n.setSize(t,e,i);let o=n.getDrawingBufferSize(new Tr);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(let a of this.passes)a.setSize(o.width,o.height)}reset(){let t=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=t}dispose(){for(let t of this.passes)t.dispose();this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},(0,r.a)(uJ,"EffectComposer"),uJ),MJ=((0,r.a)(cJ=class{constructor(){this.shaderParts=new Map([[vZ.FRAGMENT_HEAD,null],[vZ.FRAGMENT_MAIN_UV,null],[vZ.FRAGMENT_MAIN_IMAGE,null],[vZ.VERTEX_HEAD,null],[vZ.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=mZ.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=nZ}},"EffectShaderData"),cJ),SJ=(pJ=class extends Set{constructor(t,e=10){super(),this.l=e,this.exclusive=!1,void 0!==t&&this.set(t)}get layer(){return this.l}set layer(t){let e=this.l;for(let i of this)i.layers.disable(e),i.layers.enable(t);this.l=t}getLayer(){return this.layer}setLayer(t){this.layer=t}isExclusive(){return this.exclusive}setExclusive(t){this.exclusive=t}clear(){let t=this.layer;for(let e of this)e.layers.disable(t);return super.clear()}set(t){this.clear();for(let e of t)this.add(e);return this}indexOf(t){return this.has(t)?0:-1}add(t){return this.exclusive?t.layers.set(this.layer):t.layers.enable(this.layer),super.add(t)}delete(t){return this.has(t)&&t.layers.disable(this.layer),super.delete(t)}toggle(t){let e;return this.has(t)?(this.delete(t),e=!1):(this.add(t),e=!0),e}setVisible(t){for(let e of this)t?e.layers.enable(0):e.layers.disable(0);return this}},(0,r.a)(pJ,"Selection"),pJ),TJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",CJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",AJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",PJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",IJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",LJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",OJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",NJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",qJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",RJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",DJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",kJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",BJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",FJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",UJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",zJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",VJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",jJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",GJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",HJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",WJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",XJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",YJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",ZJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",JJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",KJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",QJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",$J="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",tK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",eK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",iK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",nK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",rK=new Map([[gZ.ADD,TJ],[gZ.ALPHA,CJ],[gZ.AVERAGE,AJ],[gZ.COLOR,PJ],[gZ.COLOR_BURN,IJ],[gZ.COLOR_DODGE,LJ],[gZ.DARKEN,OJ],[gZ.DIFFERENCE,NJ],[gZ.DIVIDE,qJ],[gZ.DST,null],[gZ.EXCLUSION,RJ],[gZ.HARD_LIGHT,DJ],[gZ.HARD_MIX,kJ],[gZ.HUE,BJ],[gZ.INVERT,FJ],[gZ.INVERT_RGB,UJ],[gZ.LIGHTEN,zJ],[gZ.LINEAR_BURN,VJ],[gZ.LINEAR_DODGE,jJ],[gZ.LINEAR_LIGHT,GJ],[gZ.LUMINOSITY,HJ],[gZ.MULTIPLY,WJ],[gZ.NEGATION,XJ],[gZ.NORMAL,YJ],[gZ.OVERLAY,ZJ],[gZ.PIN_LIGHT,JJ],[gZ.REFLECT,KJ],[gZ.SATURATION,QJ],[gZ.SCREEN,$J],[gZ.SOFT_LIGHT,tK],[gZ.SRC,eK],[gZ.SUBTRACT,iK],[gZ.VIVID_LIGHT,nK]]),oK=((0,r.a)(dJ=class extends Jn{constructor(t,e=1){super(),this._blendFunction=t,this.opacity=new Wv(e)}getOpacity(){return this.opacity.value}setOpacity(t){this.opacity.value=t}get blendFunction(){return this._blendFunction}set blendFunction(t){this._blendFunction=t,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(t){this.blendFunction=t}getShaderCode(){return rK.get(this.blendFunction)}},"BlendMode"),dJ),aK=((0,r.a)(fJ=class extends Jn{constructor(t,e,{attributes:i=mZ.NONE,blendFunction:n=gZ.NORMAL,defines:r=new Map,uniforms:o=new Map,extensions:a=null,vertexShader:s=null}={}){super(),this.name=t,this.renderer=null,this.attributes=i,this.fragmentShader=e,this.vertexShader=s,this.defines=r,this.uniforms=o,this.extensions=a,this.blendMode=new oK(n),this.blendMode.addEventListener("change",t=>this.setChanged()),this._inputColorSpace=nZ,this._outputColorSpace=eZ}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(t){this._inputColorSpace=t,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t,this.setChanged()}set mainScene(t){}set mainCamera(t){}getName(){return this.name}setRenderer(t){this.renderer=t}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(t){this.attributes=t,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(t){this.fragmentShader=t,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(t){this.vertexShader=t,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(t,e=qn){}update(t,e,i){}setSize(t,e){}initialize(t,e,i){}dispose(){for(let t of Object.keys(this)){let e=this[t];(e instanceof $r||e instanceof qa||e instanceof Zr||e instanceof HZ)&&this[t].dispose()}}},"Effect"),fJ),sK="#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#define QUALITY(q) ((q) < 5 ? 1.0 : ((q) > 5 ? ((q) < 10 ? 2.0 : ((q) < 11 ? 4.0 : 8.0)) : 1.5))\n#define ONE_OVER_TWELVE 0.08333333333333333\nvarying vec2 vUvDown;varying vec2 vUvUp;varying vec2 vUvLeft;varying vec2 vUvRight;varying vec2 vUvDownLeft;varying vec2 vUvUpRight;varying vec2 vUvUpLeft;varying vec2 vUvDownRight;vec4 fxaa(const in vec4 inputColor,const in vec2 uv){float lumaCenter=luminance(inputColor.rgb);float lumaDown=luminance(texture2D(inputBuffer,vUvDown).rgb);float lumaUp=luminance(texture2D(inputBuffer,vUvUp).rgb);float lumaLeft=luminance(texture2D(inputBuffer,vUvLeft).rgb);float lumaRight=luminance(texture2D(inputBuffer,vUvRight).rgb);float lumaMin=min(lumaCenter,min(min(lumaDown,lumaUp),min(lumaLeft,lumaRight)));float lumaMax=max(lumaCenter,max(max(lumaDown,lumaUp),max(lumaLeft,lumaRight)));float lumaRange=lumaMax-lumaMin;if(lumaRange<max(EDGE_THRESHOLD_MIN,lumaMax*EDGE_THRESHOLD_MAX)){return inputColor;}float lumaDownLeft=luminance(texture2D(inputBuffer,vUvDownLeft).rgb);float lumaUpRight=luminance(texture2D(inputBuffer,vUvUpRight).rgb);float lumaUpLeft=luminance(texture2D(inputBuffer,vUvUpLeft).rgb);float lumaDownRight=luminance(texture2D(inputBuffer,vUvDownRight).rgb);float lumaDownUp=lumaDown+lumaUp;float lumaLeftRight=lumaLeft+lumaRight;float lumaLeftCorners=lumaDownLeft+lumaUpLeft;float lumaDownCorners=lumaDownLeft+lumaDownRight;float lumaRightCorners=lumaDownRight+lumaUpRight;float lumaUpCorners=lumaUpRight+lumaUpLeft;float edgeHorizontal=(abs(-2.0*lumaLeft+lumaLeftCorners)+abs(-2.0*lumaCenter+lumaDownUp)*2.0+abs(-2.0*lumaRight+lumaRightCorners));float edgeVertical=(abs(-2.0*lumaUp+lumaUpCorners)+abs(-2.0*lumaCenter+lumaLeftRight)*2.0+abs(-2.0*lumaDown+lumaDownCorners));bool isHorizontal=(edgeHorizontal>=edgeVertical);float stepLength=isHorizontal?texelSize.y:texelSize.x;float luma1=isHorizontal?lumaDown:lumaLeft;float luma2=isHorizontal?lumaUp:lumaRight;float gradient1=abs(luma1-lumaCenter);float gradient2=abs(luma2-lumaCenter);bool is1Steepest=gradient1>=gradient2;float gradientScaled=0.25*max(gradient1,gradient2);float lumaLocalAverage=0.0;if(is1Steepest){stepLength=-stepLength;lumaLocalAverage=0.5*(luma1+lumaCenter);}else{lumaLocalAverage=0.5*(luma2+lumaCenter);}vec2 currentUv=uv;if(isHorizontal){currentUv.y+=stepLength*0.5;}else{currentUv.x+=stepLength*0.5;}vec2 offset=isHorizontal?vec2(texelSize.x,0.0):vec2(0.0,texelSize.y);vec2 uv1=currentUv-offset*QUALITY(0);vec2 uv2=currentUv+offset*QUALITY(0);float lumaEnd1=luminance(texture2D(inputBuffer,uv1).rgb);float lumaEnd2=luminance(texture2D(inputBuffer,uv2).rgb);lumaEnd1-=lumaLocalAverage;lumaEnd2-=lumaLocalAverage;bool reached1=abs(lumaEnd1)>=gradientScaled;bool reached2=abs(lumaEnd2)>=gradientScaled;bool reachedBoth=reached1&&reached2;if(!reached1){uv1-=offset*QUALITY(1);}if(!reached2){uv2+=offset*QUALITY(1);}if(!reachedBoth){for(int i=2;i<SAMPLES;++i){if(!reached1){lumaEnd1=luminance(texture2D(inputBuffer,uv1).rgb);lumaEnd1=lumaEnd1-lumaLocalAverage;}if(!reached2){lumaEnd2=luminance(texture2D(inputBuffer,uv2).rgb);lumaEnd2=lumaEnd2-lumaLocalAverage;}reached1=abs(lumaEnd1)>=gradientScaled;reached2=abs(lumaEnd2)>=gradientScaled;reachedBoth=reached1&&reached2;if(!reached1){uv1-=offset*QUALITY(i);}if(!reached2){uv2+=offset*QUALITY(i);}if(reachedBoth){break;}}}float distance1=isHorizontal?(uv.x-uv1.x):(uv.y-uv1.y);float distance2=isHorizontal?(uv2.x-uv.x):(uv2.y-uv.y);bool isDirection1=distance1<distance2;float distanceFinal=min(distance1,distance2);float edgeThickness=(distance1+distance2);bool isLumaCenterSmaller=lumaCenter<lumaLocalAverage;bool correctVariation1=(lumaEnd1<0.0)!=isLumaCenterSmaller;bool correctVariation2=(lumaEnd2<0.0)!=isLumaCenterSmaller;bool correctVariation=isDirection1?correctVariation1:correctVariation2;float pixelOffset=-distanceFinal/edgeThickness+0.5;float finalOffset=correctVariation?pixelOffset:0.0;float lumaAverage=ONE_OVER_TWELVE*(2.0*(lumaDownUp+lumaLeftRight)+lumaLeftCorners+lumaRightCorners);float subPixelOffset1=clamp(abs(lumaAverage-lumaCenter)/lumaRange,0.0,1.0);float subPixelOffset2=(-2.0*subPixelOffset1+3.0)*subPixelOffset1*subPixelOffset1;float subPixelOffsetFinal=subPixelOffset2*subPixelOffset2*SUBPIXEL_QUALITY;finalOffset=max(finalOffset,subPixelOffsetFinal);vec2 finalUv=uv;if(isHorizontal){finalUv.y+=finalOffset*stepLength;}else{finalUv.x+=finalOffset*stepLength;}return texture2D(inputBuffer,finalUv);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=fxaa(inputColor,uv);}",lK="varying vec2 vUvDown;varying vec2 vUvUp;varying vec2 vUvLeft;varying vec2 vUvRight;varying vec2 vUvDownLeft;varying vec2 vUvUpRight;varying vec2 vUvUpLeft;varying vec2 vUvDownRight;void mainSupport(const in vec2 uv){vUvDown=uv+vec2(0.0,-1.0)*texelSize;vUvUp=uv+vec2(0.0,1.0)*texelSize;vUvRight=uv+vec2(1.0,0.0)*texelSize;vUvLeft=uv+vec2(-1.0,0.0)*texelSize;vUvDownLeft=uv+vec2(-1.0,-1.0)*texelSize;vUvUpRight=uv+vec2(1.0,1.0)*texelSize;vUvUpLeft=uv+vec2(-1.0,1.0)*texelSize;vUvDownRight=uv+vec2(1.0,-1.0)*texelSize;}",hK=((0,r.a)(gJ=class extends aK{constructor({blendFunction:t=gZ.SRC}={}){super("FXAAEffect",sK,{vertexShader:lK,blendFunction:t,defines:new Map([["EDGE_THRESHOLD_MIN","0.0312"],["EDGE_THRESHOLD_MAX","0.125"],["SUBPIXEL_QUALITY","0.75"],["SAMPLES","12"]])})}get minEdgeThreshold(){return Number(this.defines.get("EDGE_THRESHOLD_MIN"))}set minEdgeThreshold(t){this.defines.set("EDGE_THRESHOLD_MIN",t.toFixed(12)),this.setChanged()}get maxEdgeThreshold(){return Number(this.defines.get("EDGE_THRESHOLD_MAX"))}set maxEdgeThreshold(t){this.defines.set("EDGE_THRESHOLD_MAX",t.toFixed(12)),this.setChanged()}get subpixelQuality(){return Number(this.defines.get("SUBPIXEL_QUALITY"))}set subpixelQuality(t){this.defines.set("SUBPIXEL_QUALITY",t.toFixed(12)),this.setChanged()}get samples(){return Number(this.defines.get("SAMPLES"))}set samples(t){this.defines.set("SAMPLES",t.toFixed(0)),this.setChanged()}},"FXAAEffect"),gJ),uK=new ho,cK=new Go,pK=new Ua,dK=[new Float32Array(3),new Float32Array(3)],fK=[new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3)],gK=[[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1])]],mK=[new Float32Array(2),new Float32Array(2)],vK=new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),yK=[new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125])],_K=[new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4])],xK=[new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3])],bK=new Map([[EK(0,0,0,0),new Float32Array([0,0,0,0])],[EK(0,0,0,1),new Float32Array([0,0,0,1])],[EK(0,0,1,0),new Float32Array([0,0,1,0])],[EK(0,0,1,1),new Float32Array([0,0,1,1])],[EK(0,1,0,0),new Float32Array([0,1,0,0])],[EK(0,1,0,1),new Float32Array([0,1,0,1])],[EK(0,1,1,0),new Float32Array([0,1,1,0])],[EK(0,1,1,1),new Float32Array([0,1,1,1])],[EK(1,0,0,0),new Float32Array([1,0,0,0])],[EK(1,0,0,1),new Float32Array([1,0,0,1])],[EK(1,0,1,0),new Float32Array([1,0,1,0])],[EK(1,0,1,1),new Float32Array([1,0,1,1])],[EK(1,1,0,0),new Float32Array([1,1,0,0])],[EK(1,1,0,1),new Float32Array([1,1,0,1])],[EK(1,1,1,0),new Float32Array([1,1,1,0])],[EK(1,1,1,1),new Float32Array([1,1,1,1])]]);function wK(t,e,i){return t+(e-t)*i}function EK(t,e,i,n){let r=wK(t,e,.75),o=wK(i,n,.75);return wK(r,o,.875)}(0,r.a)(wK,"lerp2"),(0,r.a)(EK,"bilinear");var MK,SK="uniform lowp sampler2D edgeTexture;uniform lowp sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;\n#ifdef USE_PATTERN\nuniform lowp sampler2D patternTexture;varying vec2 vUvPattern;\n#endif\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;\n#ifndef X_RAY\nedge.y=0.0;\n#endif\nedge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;\n#ifdef USE_PATTERN\nvec4 patternColor=texture2D(patternTexture,vUvPattern);\n#ifdef X_RAY\nfloat hiddenFactor=0.5;\n#else\nfloat hiddenFactor=0.0;\n#endif\nvisibilityFactor=(1.0-mask.y>0.0)?1.0:hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;\n#endif\nfloat alpha=max(max(edge.x,edge.y),visibilityFactor);\n#ifdef ALPHA\noutputColor=vec4(color,alpha);\n#else\noutputColor=vec4(color,max(alpha,inputColor.a));\n#endif\n}",TK="uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}",CK=((0,r.a)(MK=class extends aK{constructor(t,e,{blendFunction:i=gZ.SCREEN,patternTexture:n=null,patternScale:r=1,edgeStrength:o=1,pulseSpeed:a=0,visibleEdgeColor:s=16777215,hiddenEdgeColor:l=2230538,kernelSize:h=yZ.VERY_SMALL,blur:u=!1,xRay:c=!0,multisampling:p=0,resolutionScale:d=.5,width:f=KZ.AUTO_SIZE,height:g=KZ.AUTO_SIZE,resolutionX:m=f,resolutionY:v=g}={}){super("OutlineEffect",SK,{uniforms:new Map([["maskTexture",new Wv(null)],["edgeTexture",new Wv(null)],["edgeStrength",new Wv(o)],["visibleEdgeColor",new Wv(new Ua(s))],["hiddenEdgeColor",new Wv(new Ua(l))],["pulse",new Wv(1)],["patternScale",new Wv(r)],["patternTexture",new Wv(null)]])}),this.blendMode.addEventListener("change",t=>{this.blendMode.blendFunction===gZ.ALPHA?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA"),this.setChanged()}),this.blendMode.blendFunction=i,this.patternTexture=n,this.xRay=c,this.scene=t,this.camera=e,this.renderTargetMask=new $r(1,1),this.renderTargetMask.samples=p,this.renderTargetMask.texture.name="Outline.Mask",this.uniforms.get("maskTexture").value=this.renderTargetMask.texture,this.renderTargetOutline=new $r(1,1,{depthBuffer:!1}),this.renderTargetOutline.texture.name="Outline.Edges",this.uniforms.get("edgeTexture").value=this.renderTargetOutline.texture,this.clearPass=new ZZ,this.clearPass.overrideClearColor=new Ua(0),this.clearPass.overrideClearAlpha=1,this.depthPass=new eJ(t,e),this.maskPass=new tJ(t,e,new CZ(this.depthPass.texture,e));let y=this.maskPass.clearPass;y.overrideClearColor=new Ua(16777215),y.overrideClearAlpha=1,this.blurPass=new vJ({resolutionScale:d,resolutionX:m,resolutionY:v,kernelSize:h}),this.blurPass.enabled=u;let _=this.blurPass.resolution;_.addEventListener("change",t=>this.setSize(_.baseWidth,_.baseHeight)),this.outlinePass=new _J(new NZ),this.outlinePass.fullscreenMaterial.inputBuffer=this.renderTargetMask.texture,this.time=0,this.active=!1,this.selection=new SJ,this.selection.layer=10,this.pulseSpeed=a}set mainScene(t){this.scene=t,this.depthPass.mainScene=t,this.maskPass.mainScene=t}set mainCamera(t){this.camera=t,this.depthPass.mainCamera=t,this.maskPass.mainCamera=t,this.maskPass.overrideMaterial.copyCameraSettings(t)}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.getResolution()}get multisampling(){return this.renderTargetMask.samples}set multisampling(t){this.renderTargetMask.samples=t,this.renderTargetMask.dispose()}get patternScale(){return this.uniforms.get("patternScale").value}set patternScale(t){this.uniforms.get("patternScale").value=t}get edgeStrength(){return this.uniforms.get("edgeStrength").value}set edgeStrength(t){this.uniforms.get("edgeStrength").value=t}get visibleEdgeColor(){return this.uniforms.get("visibleEdgeColor").value}set visibleEdgeColor(t){this.uniforms.get("visibleEdgeColor").value=t}get hiddenEdgeColor(){return this.uniforms.get("hiddenEdgeColor").value}set hiddenEdgeColor(t){this.uniforms.get("hiddenEdgeColor").value=t}getBlurPass(){return this.blurPass}getSelection(){return this.selection}getPulseSpeed(){return this.pulseSpeed}setPulseSpeed(t){this.pulseSpeed=t}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get selectionLayer(){return this.selection.layer}set selectionLayer(t){this.selection.layer=t}get dithering(){return this.blurPass.dithering}set dithering(t){this.blurPass.dithering=t}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(t){this.blurPass.kernelSize=t}get blur(){return this.blurPass.enabled}set blur(t){this.blurPass.enabled=t}get xRay(){return this.defines.has("X_RAY")}set xRay(t){this.xRay!==t&&(t?this.defines.set("X_RAY","1"):this.defines.delete("X_RAY"),this.setChanged())}isXRayEnabled(){return this.xRay}setXRayEnabled(t){this.xRay=t}get patternTexture(){return this.uniforms.get("patternTexture").value}set patternTexture(t){null!==t?(t.wrapS=t.wrapT=yi,this.defines.set("USE_PATTERN","1"),this.setVertexShader(TK)):(this.defines.delete("USE_PATTERN"),this.setVertexShader(null)),this.uniforms.get("patternTexture").value=t,this.setChanged()}setPatternTexture(t){this.patternTexture=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}setSelection(t){return this.selection.set(t),this}clearSelection(){return this.selection.clear(),this}selectObject(t){return this.selection.add(t),this}deselectObject(t){return this.selection.delete(t),this}update(t,e,i){let n=this.scene,r=this.camera,o=this.selection,a=this.uniforms.get("pulse"),s=n.background,l=r.layers.mask;o.size>0?(n.background=null,a.value=1,this.pulseSpeed>0&&(a.value=.375*Math.cos(this.time*this.pulseSpeed*10)+.625),this.active=!0,this.time+=i,o.setVisible(!1),this.depthPass.render(t),o.setVisible(!0),r.layers.set(o.layer),this.maskPass.render(t,this.renderTargetMask),r.layers.mask=l,n.background=s,this.outlinePass.render(t,null,this.renderTargetOutline),this.blurPass.enabled&&this.blurPass.render(t,this.renderTargetOutline,this.renderTargetOutline)):this.active&&(this.clearPass.render(t,this.renderTargetOutline),this.active=!1)}setSize(t,e){this.blurPass.setSize(t,e),this.renderTargetMask.setSize(t,e);let i=this.resolution;i.setBaseSize(t,e);let n=i.width,r=i.height;this.depthPass.setSize(n,r),this.renderTargetOutline.setSize(n,r),this.outlinePass.fullscreenMaterial.setSize(n,r)}initialize(t,e,i){this.blurPass.initialize(t,e,Ci),void 0!==i&&(this.depthPass.initialize(t,e,i),this.maskPass.initialize(t,e,i),this.outlinePass.initialize(t,e,i))}},"OutlineEffect"),MK),AK=.5*Math.PI,PK=new ho,IK=new ho,LK=new ls;LK.setAttribute("position",new Xa(new Float32Array([-1,-1,3,-1,-1,3]),2)),LK.setAttribute("uv",new Xa(new Float32Array([0,0,2,0,0,2]),2)),LK.boundingSphere=new No,LK.computeBoundingSphere=function(){};var OK=new Qu,NK=class{constructor(t){this._mesh=new Cs(LK,t),this._mesh.frustumCulled=!1}render(t){t.render(this._mesh,OK)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}dispose(){this._mesh.material.dispose(),this._mesh.geometry.dispose()}};(0,r.a)(NK,"$e4ca8dcb0218f846$export$dcd670d73db751f5");var qK=NK,RK={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},sceneNormal:{value:null},projMat:{value:new Go},viewMat:{value:new Go},projViewMat:{value:new Go},projectionMatrixInv:{value:new Go},viewMatrixInv:{value:new Go},cameraPos:{value:new ho},resolution:{value:new Tr},time:{value:0},samples:{value:[]},samplesR:{value:[]},bluenoise:{value:null},distanceFalloff:{value:1},radius:{value:5},near:{value:.1},far:{value:1e3},logDepth:{value:!1},ortho:{value:!1},screenSpaceRadius:{value:!1}},vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n  vUv = uv;\n  gl_Position = vec4(position, 1);\n}",fragmentShader:"\n    #define SAMPLES 16\n    #define FSAMPLES 16.0\nuniform sampler2D sceneDiffuse;\nuniform sampler2D sceneNormal;\nuniform highp sampler2D sceneDepth;\nuniform mat4 projectionMatrixInv;\nuniform mat4 viewMatrixInv;\nuniform mat4 projMat;\nuniform mat4 viewMat;\nuniform mat4 projViewMat;\nuniform vec3 cameraPos;\nuniform vec2 resolution;\nuniform float time;\nuniform vec3[SAMPLES] samples;\nuniform float[SAMPLES] samplesR;\nuniform float radius;\nuniform float distanceFalloff;\nuniform float near;\nuniform float far;\nuniform bool logDepth;\nuniform bool ortho;\nuniform bool screenSpaceRadius;\nuniform sampler2D bluenoise;\n    varying vec2 vUv;\n    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)\n    {\n        return (zFar * zNear) / (zFar - d * (zFar - zNear));\n    }\n    highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {\n      return nearZ + (farZ - nearZ) * d;\n    }\n    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {\n      float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;\n      float a = farZ / (farZ - nearZ);\n      float b = farZ * nearZ / (nearZ - farZ);\n      float linDepth = a + b / depth;\n      return ortho ? linearize_depth_ortho(\n        linDepth,\n        nearZ,\n        farZ\n      ) :linearize_depth(linDepth, nearZ, farZ);\n    }\n\n    vec3 getWorldPosLog(vec3 posS) {\n      vec2 uv = posS.xy;\n      float z = posS.z;\n      float nearZ =near;\n      float farZ = far;\n      float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;\n      float a = farZ / (farZ - nearZ);\n      float b = farZ * nearZ / (nearZ - farZ);\n      float linDepth = a + b / depth;\n      vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;\n      vec4 wpos = viewMatrixInv * projectionMatrixInv * clipVec;\n      return wpos.xyz / wpos.w;\n    }\n    vec3 getWorldPos(float depth, vec2 coord) {\n      #ifdef LOGDEPTH\n        return getWorldPosLog(vec3(coord, depth));\n      #endif\n      float z = depth * 2.0 - 1.0;\n      vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);\n      vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;\n      // Perspective division\n     vec4 worldSpacePosition = viewMatrixInv * viewSpacePosition;\n     worldSpacePosition.xyz /= worldSpacePosition.w;\n      return worldSpacePosition.xyz;\n  }\n\n  vec3 computeNormal(vec3 worldPos, vec2 vUv) {\n    ivec2 p = ivec2(vUv * resolution);\n    float c0 = texelFetch(sceneDepth, p, 0).x;\n    float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;\n    float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;\n    float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;\n    float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;\n    float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;\n    float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;\n    float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;\n    float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;\n\n    float dl = abs((2.0 * l1 - l2) - c0);\n    float dr = abs((2.0 * r1 - r2) - c0);\n    float db = abs((2.0 * b1 - b2) - c0);\n    float dt = abs((2.0 * t1 - t2) - c0);\n\n    vec3 ce = getWorldPos(c0, vUv).xyz;\n\n    vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz\n                          : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;\n    vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz\n                          : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;\n\n    return normalize(cross(dpdx, dpdy));\n}\n\nvoid main() {\n      vec4 diffuse = texture2D(sceneDiffuse, vUv);\n      float depth = texture2D(sceneDepth, vUv).x;\n      if (depth == 1.0) {\n        gl_FragColor = vec4(vec3(1.0), 1.0);\n        return;\n      }\n      vec3 worldPos = getWorldPos(depth, vUv);\n    //  vec3 normal = texture2D(sceneNormal, vUv).rgb;//computeNormal(worldPos, vUv);\n      #ifdef HALFRES\n        vec3 normal = texture2D(sceneNormal, vUv).rgb;\n      #else\n        vec3 normal = computeNormal(worldPos, vUv);\n      #endif\n      vec4 noise = texture2D(bluenoise, gl_FragCoord.xy / 128.0);\n      vec3 randomVec = normalize(noise.rgb * 2.0 - 1.0);\n      vec3 tangent = normalize(randomVec - normal * dot(randomVec, normal));\n      vec3 bitangent = cross(normal, tangent);\n      mat3 tbn = mat3(tangent, bitangent, normal);\n      float occluded = 0.0;\n      float totalWeight = 0.0;\n     /* float radiusScreen = distance(\n        worldPos,\n        getWorldPos(depth, vUv + \n          vec2(48.0, 0.0) / resolution)\n      );/*vUv.x < 0.5 ? radius : min(distance(\n        worldPos,\n        getWorldPos(depth, vUv + \n          vec2(100.0, 0.0) / resolution)\n      ), radius);\n      float distanceFalloffScreen = radiusScreen * 0.2;*/\n      float radiusToUse = screenSpaceRadius ? distance(\n        worldPos,\n        getWorldPos(depth, vUv +\n          vec2(radius, 0.0) / resolution)\n      ) : radius;\n      float distanceFalloffToUse =screenSpaceRadius ?\n          radiusToUse * distanceFalloff\n      : distanceFalloff;\n      float bias = (0.1 / near) * fwidth(distance(worldPos, cameraPos)) / radiusToUse;\n      for(float i = 0.0; i < FSAMPLES; i++) {\n        vec3 sampleDirection = \n        tbn * \n        samples[int(i)];\n        ;\n        float moveAmt = samplesR[int(mod(i + noise.a * FSAMPLES, FSAMPLES))];\n        vec3 samplePos = worldPos + radiusToUse * moveAmt * sampleDirection;\n        vec4 offset = projViewMat * vec4(samplePos, 1.0);\n        offset.xyz /= offset.w;\n        offset.xyz = offset.xyz * 0.5 + 0.5;\n        float sampleDepth = textureLod(sceneDepth, offset.xy, 0.0).x;\n        /*float distSample = logDepth ? linearize_depth_log(sampleDepth, near, far) \n         (ortho ?  linearize_depth_ortho(sampleDepth, near, far) : linearize_depth(sampleDepth, near, far));*/\n        #ifdef LOGDEPTH\n        float distSample = linearize_depth_log(sampleDepth, near, far);\n        #else\n        float distSample = ortho ? linearize_depth_ortho(sampleDepth, near, far) : linearize_depth(sampleDepth, near, far);\n        #endif\n        float distWorld = ortho ? linearize_depth_ortho(offset.z, near, far) : linearize_depth(offset.z, near, far);\n        float rangeCheck = smoothstep(0.0, 1.0, distanceFalloffToUse / (abs(distSample - distWorld)));\n        vec2 diff = gl_FragCoord.xy - ( offset.xy * resolution);\n        float weight = dot(sampleDirection, normal);\n          occluded += rangeCheck * weight * \n            (distSample + bias\n               < distWorld ? 1.0 : 0.0) * (\n          (dot(\n            diff,\n            diff\n             \n            ) < 1.0 || (sampleDepth == depth) || (\n              offset.x < 0.0 || offset.x > 1.0 || offset.y < 0.0 || offset.y > 1.0\n            ) ? 0.0 : 1.0)\n          );\n          totalWeight += weight;\n      }\n      float occ = clamp(1.0 - occluded / totalWeight, 0.0, 1.0);\n      gl_FragColor = vec4(0.5 + 0.5 * normal, occ);\n}"},DK={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},tDiffuse:{value:null},projMat:{value:new Go},viewMat:{value:new Go},projectionMatrixInv:{value:new Go},viewMatrixInv:{value:new Go},cameraPos:{value:new ho},resolution:{value:new Tr},color:{value:new ho(0,0,0)},blueNoise:{value:null},downsampledDepth:{value:null},time:{value:0},intensity:{value:10},renderMode:{value:0},gammaCorrection:{value:!1},logDepth:{value:!1},ortho:{value:!1},near:{value:.1},far:{value:1e3},screenSpaceRadius:{value:!1},radius:{value:0},distanceFalloff:{value:1},fog:{value:!1},fogExp:{value:!1},fogDensity:{value:0},fogNear:{value:1/0},fogFar:{value:1/0}},vertexShader:"\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = vec4(position, 1);\n\t\t}",fragmentShader:"\n\t\tuniform sampler2D sceneDiffuse;\n    uniform sampler2D sceneDepth;\n    uniform sampler2D downsampledDepth;\n    uniform sampler2D tDiffuse;\n    uniform sampler2D blueNoise;\n    uniform vec2 resolution;\n    uniform vec3 color;\n    uniform mat4 projectionMatrixInv;\n    uniform mat4 viewMatrixInv;\n    uniform float intensity;\n    uniform float renderMode;\n    uniform float near;\n    uniform float far;\n    uniform bool gammaCorrection;\n    uniform bool logDepth;\n    uniform bool ortho;\n    uniform bool screenSpaceRadius;\n    uniform bool fog;\n    uniform bool fogExp;\n    uniform float fogDensity;\n    uniform float fogNear;\n    uniform float fogFar;\n    uniform float radius;\n    uniform float distanceFalloff;\n    uniform vec3 cameraPos;\n    varying vec2 vUv;\n    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)\n    {\n        return (zFar * zNear) / (zFar - d * (zFar - zNear));\n    }\n    highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {\n      return nearZ + (farZ - nearZ) * d;\n    }\n    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {\n      float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;\n      float a = farZ / (farZ - nearZ);\n      float b = farZ * nearZ / (nearZ - farZ);\n      float linDepth = a + b / depth;\n      return ortho ? linearize_depth_ortho(\n        linDepth,\n        nearZ,\n        farZ\n      ) :linearize_depth(linDepth, nearZ, farZ);\n    }\n    vec3 getWorldPosLog(vec3 posS) {\n        vec2 uv = posS.xy;\n        float z = posS.z;\n        float nearZ =near;\n        float farZ = far;\n        float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;\n        float a = farZ / (farZ - nearZ);\n        float b = farZ * nearZ / (nearZ - farZ);\n        float linDepth = a + b / depth;\n        vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;\n        vec4 wpos = viewMatrixInv * projectionMatrixInv * clipVec;\n        return wpos.xyz / wpos.w;\n      }\n      vec3 getWorldPos(float depth, vec2 coord) {\n       // if (logDepth) {\n        #ifdef LOGDEPTH\n          return getWorldPosLog(vec3(coord, depth));\n        #endif\n      //  }\n        float z = depth * 2.0 - 1.0;\n        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);\n        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;\n        // Perspective division\n       vec4 worldSpacePosition = viewMatrixInv * viewSpacePosition;\n       worldSpacePosition.xyz /= worldSpacePosition.w;\n        return worldSpacePosition.xyz;\n    }\n  \n    vec3 computeNormal(vec3 worldPos, vec2 vUv) {\n      ivec2 p = ivec2(vUv * resolution);\n      float c0 = texelFetch(sceneDepth, p, 0).x;\n      float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;\n      float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;\n      float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;\n      float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;\n      float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;\n      float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;\n      float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;\n      float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;\n  \n      float dl = abs((2.0 * l1 - l2) - c0);\n      float dr = abs((2.0 * r1 - r2) - c0);\n      float db = abs((2.0 * b1 - b2) - c0);\n      float dt = abs((2.0 * t1 - t2) - c0);\n  \n      vec3 ce = getWorldPos(c0, vUv).xyz;\n  \n      vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz\n                            : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;\n      vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz\n                            : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;\n  \n      return normalize(cross(dpdx, dpdy));\n  }\n\n    #include <common>\n    #include <dithering_pars_fragment>\n    void main() {\n        //vec4 texel = texture2D(tDiffuse, vUv);//vec3(0.0);\n        vec4 sceneTexel = texture2D(sceneDiffuse, vUv);\n        float depth = texture2D(\n            sceneDepth,\n            vUv\n        ).x;\n        #ifdef HALFRES \n        vec4 texel;\n        if (depth == 1.0) {\n            texel = vec4(0.0, 0.0, 0.0, 1.0);\n        } else {\n        vec3 worldPos = getWorldPos(depth, vUv);\n        vec3 normal = computeNormal(getWorldPos(depth, vUv), vUv);\n       // vec4 texel = texture2D(tDiffuse, vUv);\n       // Find closest depth;\n       float totalWeight = 0.0;\n       float radiusToUse = screenSpaceRadius ? distance(\n        worldPos,\n        getWorldPos(depth, vUv +\n          vec2(radius, 0.0) / resolution)\n      ) : radius;\n      float distanceFalloffToUse =screenSpaceRadius ?\n          radiusToUse * distanceFalloff\n      : distanceFalloff;\n        for(float x = -1.0; x <= 1.0; x++) {\n            for(float y = -1.0; y <= 1.0; y++) {\n                vec2 offset = vec2(x, y);\n                ivec2 p = ivec2(\n                    (vUv * resolution * 0.5) + offset\n                );\n                vec2 pUv = vec2(p) / (resolution * 0.5);\n                float sampleDepth = texelFetch(downsampledDepth,p, 0).x;\n                vec4 sampleInfo = texelFetch(tDiffuse, p, 0);\n                vec3 normalSample = sampleInfo.xyz * 2.0 - 1.0;\n                vec3 worldPosSample = getWorldPos(sampleDepth, pUv);\n                float tangentPlaneDist = abs(dot(worldPos - worldPosSample, normal));\n                float rangeCheck = exp(-1.0 * tangentPlaneDist * (1.0 / distanceFalloffToUse)) * max(dot(normal, normalSample), 0.0);\n                float weight = rangeCheck;\n                totalWeight += weight;\n                texel += sampleInfo * weight;\n            }\n        }\n        if (totalWeight == 0.0) {\n            texel = texture2D(tDiffuse, vUv);\n        } else {\n            texel /= totalWeight;\n        }\n    }\n        #else\n        vec4 texel = texture2D(tDiffuse, vUv);\n        #endif\n\n     \n        float finalAo = pow(texel.a, intensity);\n        float fogFactor;\n        float fogDepth = distance(\n            cameraPos,\n            getWorldPos(depth, vUv)\n        );\n        if (fog) {\n            if (fogExp) {\n                fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n            } else {\n                fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n            }\n        }\n        finalAo = mix(finalAo, 1.0, fogFactor);\n        if (renderMode == 0.0) {\n            gl_FragColor = vec4( mix(sceneTexel.rgb, color * sceneTexel.rgb, 1.0 - finalAo), sceneTexel.a);\n        } else if (renderMode == 1.0) {\n            gl_FragColor = vec4( mix(vec3(1.0), color * sceneTexel.rgb, 1.0 - finalAo), sceneTexel.a);\n        } else if (renderMode == 2.0) {\n            gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);\n        } else if (renderMode == 3.0) {\n            if (vUv.x < 0.5) {\n                gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);\n            } else if (abs(vUv.x - 0.5) < 1.0 / resolution.x) {\n                gl_FragColor = vec4(1.0);\n            } else {\n                gl_FragColor = vec4( mix(sceneTexel.rgb, color * sceneTexel.rgb, 1.0 - finalAo), sceneTexel.a);\n            }\n        } else if (renderMode == 4.0) {\n            if (vUv.x < 0.5) {\n                gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);\n            } else if (abs(vUv.x - 0.5) < 1.0 / resolution.x) {\n                gl_FragColor = vec4(1.0);\n            } else {\n                gl_FragColor = vec4( mix(vec3(1.0), color * sceneTexel.rgb, 1.0 - finalAo), sceneTexel.a);\n            }\n        }\n        #include <dithering_fragment>\n        if (gammaCorrection) {\n            gl_FragColor = LinearTosRGB(gl_FragColor);\n        }\n    }\n    "},kK={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},tDiffuse:{value:null},projMat:{value:new Go},viewMat:{value:new Go},projectionMatrixInv:{value:new Go},viewMatrixInv:{value:new Go},cameraPos:{value:new ho},resolution:{value:new Tr},time:{value:0},r:{value:5},blueNoise:{value:null},radius:{value:12},worldRadius:{value:5},index:{value:0},poissonDisk:{value:[]},distanceFalloff:{value:1},near:{value:.1},far:{value:1e3},logDepth:{value:!1},screenSpaceRadius:{value:!1}},vertexShader:"\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = vec4(position, 1.0);\n\t\t}",fragmentShader:"\n\t\tuniform sampler2D sceneDiffuse;\n    uniform highp sampler2D sceneDepth;\n    uniform sampler2D tDiffuse;\n    uniform sampler2D blueNoise;\n    uniform mat4 projectionMatrixInv;\n    uniform mat4 viewMatrixInv;\n    uniform vec2 resolution;\n    uniform float r;\n    uniform float radius;\n     uniform float worldRadius;\n    uniform float index;\n     uniform float near;\n     uniform float far;\n     uniform float distanceFalloff;\n     uniform bool logDepth;\n     uniform bool screenSpaceRadius;\n    varying vec2 vUv;\n\n    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)\n    {\n        highp float z_n = 2.0 * d - 1.0;\n        return 2.0 * zNear * zFar / (zFar + zNear - z_n * (zFar - zNear));\n    }\n    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {\n     float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;\n     float a = farZ / (farZ - nearZ);\n     float b = farZ * nearZ / (nearZ - farZ);\n     float linDepth = a + b / depth;\n     return linearize_depth(linDepth, nearZ, farZ);\n   }\n   highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {\n     return nearZ + (farZ - nearZ) * d;\n   }\n   vec3 getWorldPosLog(vec3 posS) {\n     vec2 uv = posS.xy;\n     float z = posS.z;\n     float nearZ =near;\n     float farZ = far;\n     float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;\n     float a = farZ / (farZ - nearZ);\n     float b = farZ * nearZ / (nearZ - farZ);\n     float linDepth = a + b / depth;\n     vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;\n     vec4 wpos = viewMatrixInv * projectionMatrixInv * clipVec;\n     return wpos.xyz / wpos.w;\n   }\n    vec3 getWorldPos(float depth, vec2 coord) {\n     #ifdef LOGDEPTH\n          return getWorldPosLog(vec3(coord, depth));\n     #endif\n        \n        float z = depth * 2.0 - 1.0;\n        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);\n        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;\n        // Perspective division\n       vec4 worldSpacePosition = viewMatrixInv * viewSpacePosition;\n       worldSpacePosition.xyz /= worldSpacePosition.w;\n        return worldSpacePosition.xyz;\n    }\n    #include <common>\n    #define NUM_SAMPLES 16\n    uniform vec2 poissonDisk[NUM_SAMPLES];\n    void main() {\n        const float pi = 3.14159;\n        vec2 texelSize = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n        vec2 uv = vUv;\n        vec4 data = texture2D(tDiffuse, vUv);\n        float occlusion = data.a;\n        float baseOcc = data.a;\n        vec3 normal = data.rgb * 2.0 - 1.0;\n        float count = 1.0;\n        float d = texture2D(sceneDepth, vUv).x;\n        vec3 worldPos = getWorldPos(d, vUv);\n        float size = radius;\n        float angle;\n        if (index == 0.0) {\n             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).x * PI2;\n        } else if (index == 1.0) {\n             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).y * PI2;\n        } else if (index == 2.0) {\n             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).z * PI2;\n        } else {\n             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).w * PI2;\n        }\n\n        mat2 rotationMatrix = mat2(cos(angle), -sin(angle), sin(angle), cos(angle));\n        float radiusToUse = screenSpaceRadius ? distance(\n          worldPos,\n          getWorldPos(d, vUv +\n            vec2(worldRadius, 0.0) / resolution)\n        ) : worldRadius;\n        float distanceFalloffToUse =screenSpaceRadius ?\n            radiusToUse * distanceFalloff\n        : distanceFalloff;\n\n\n        for(int i = 0; i < NUM_SAMPLES; i++) {\n            vec2 offset = (rotationMatrix * poissonDisk[i]) * texelSize * size;\n            vec4 dataSample = texture2D(tDiffuse, uv + offset);\n            float occSample = dataSample.a;\n            vec3 normalSample = dataSample.rgb * 2.0 - 1.0;\n            float dSample = texture2D(sceneDepth, uv + offset).x;\n            vec3 worldPosSample = getWorldPos(dSample, uv + offset);\n            float tangentPlaneDist = abs(dot(worldPos - worldPosSample, normal));\n            float rangeCheck = exp(-1.0 * tangentPlaneDist * (1.0 / distanceFalloffToUse)) * max(dot(normal, normalSample), 0.0) * (1.0 - abs(occSample - baseOcc));\n            occlusion += occSample * rangeCheck;\n            count += rangeCheck;\n        }\n        occlusion /= count;\n        gl_FragColor = vec4(0.5 + 0.5 * normal, occlusion);\n    }\n    "},BK={uniforms:{sceneDepth:{value:null},resolution:{value:new Tr},near:{value:.1},far:{value:1e3},viewMatrixInv:{value:new Go},projectionMatrixInv:{value:new Go},logDepth:{value:!1}},vertexShader:"\n    varying vec2 vUv;\n    void main() {\n        vUv = uv;\n        gl_Position = vec4(position, 1);\n    }",fragmentShader:"\n    uniform sampler2D sceneDepth;\n    uniform vec2 resolution;\n    uniform float near;\n    uniform float far;\n    uniform bool logDepth;\n    uniform mat4 viewMatrixInv;\n    uniform mat4 projectionMatrixInv;\n    varying vec2 vUv;\n    layout(location = 1) out vec4 gNormal;\n    vec3 getWorldPosLog(vec3 posS) {\n        vec2 uv = posS.xy;\n        float z = posS.z;\n        float nearZ =near;\n        float farZ = far;\n        float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;\n        float a = farZ / (farZ - nearZ);\n        float b = farZ * nearZ / (nearZ - farZ);\n        float linDepth = a + b / depth;\n        vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;\n        vec4 wpos = viewMatrixInv * projectionMatrixInv * clipVec;\n        return wpos.xyz / wpos.w;\n      }\n      vec3 getWorldPos(float depth, vec2 coord) {\n        if (logDepth) {\n          return getWorldPosLog(vec3(coord, depth));\n        }\n        float z = depth * 2.0 - 1.0;\n        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);\n        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;\n        // Perspective division\n       vec4 worldSpacePosition = viewMatrixInv * viewSpacePosition;\n       worldSpacePosition.xyz /= worldSpacePosition.w;\n        return worldSpacePosition.xyz;\n    }\n  \n    vec3 computeNormal(vec3 worldPos, vec2 vUv) {\n      ivec2 p = ivec2(vUv * resolution);\n      float c0 = texelFetch(sceneDepth, p, 0).x;\n      float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;\n      float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;\n      float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;\n      float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;\n      float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;\n      float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;\n      float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;\n      float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;\n  \n      float dl = abs((2.0 * l1 - l2) - c0);\n      float dr = abs((2.0 * r1 - r2) - c0);\n      float db = abs((2.0 * b1 - b2) - c0);\n      float dt = abs((2.0 * t1 - t2) - c0);\n  \n      vec3 ce = getWorldPos(c0, vUv).xyz;\n  \n      vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz\n                            : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;\n      vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz\n                            : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;\n  \n      return normalize(cross(dpdx, dpdy));\n  }\n    void main() {\n        vec2 uv = vUv - vec2(0.5) / resolution;\n        vec2 pixelSize = vec2(1.0) / resolution;\n        vec2[] uvSamples = vec2[4](\n            uv,\n            uv + vec2(pixelSize.x, 0.0),\n            uv + vec2(0.0, pixelSize.y),\n            uv + pixelSize\n        );\n        float depth00 = texture2D(sceneDepth, uvSamples[0]).r;\n        float depth10 = texture2D(sceneDepth, uvSamples[1]).r;\n        float depth01 = texture2D(sceneDepth, uvSamples[2]).r;\n        float depth11 = texture2D(sceneDepth, uvSamples[3]).r;\n        float minDepth = min(min(depth00, depth10), min(depth01, depth11));\n        float maxDepth = max(max(depth00, depth10), max(depth01, depth11));\n        float targetDepth = minDepth;\n        // Checkerboard pattern to avoid artifacts\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 2.0) > 0.5) { \n            targetDepth = maxDepth;\n        }\n        int chosenIndex = 0;\n        float[] samples = float[4](depth00, depth10, depth01, depth11);\n        for(int i = 0; i < 4; ++i) {\n            if (samples[i] == targetDepth) {\n                chosenIndex = i;\n                break;\n            }\n        }\n        gl_FragColor = vec4(samples[chosenIndex], 0.0, 0.0, 1.0);\n        gNormal = vec4(computeNormal(\n            getWorldPos(samples[chosenIndex], uvSamples[chosenIndex]), uvSamples[chosenIndex]\n        ), 0.0);\n       /* float[] samples = float[4](depth00, depth10, depth01, depth11);\n        float c = 0.25 * (depth00 + depth10 + depth01 + depth11);\n        float[] distances = float[4](depth00, depth10, depth01, depth11);\n        float maxDistance = max(max(distances[0], distances[1]), max(distances[2], distances[3]));\n\n        int remaining[3];\n        int rejected[3];\n        int i, j, k;\n\n        for(i = 0, j = 0, k = 0; i < 4; ++i) {\n            if (distances[i] < maxDistance) {\n                remaining[j++] = i;\n            } else {\n                rejected[k++] = i;\n            }\n        }\n        for(;j < 3;++j) {\n            remaining[j] = rejected[--k];\n        }\n        vec3 s = vec3(\n            samples[remaining[0]],\n            samples[remaining[1]],\n            samples[remaining[2]]\n        );\n        c = (s.x + s.y + s.z) / 3.0;\n\n        distances[0] = abs(c - s.x);\n        distances[1] = abs(c - s.y);\n        distances[2] = abs(c - s.z);\n\n        float minDistance = min(min(distances[0], distances[1]), distances[2]);\n\n        for(i = 0; i < 3; ++i) {\n            if (distances[i] == minDistance) {\n                break;\n            }\n        }*/\n      /*  gl_FragColor = vec4(samples[remaining[i]], 0.0, 0.0, 0.0);\n        gNormal = vec4(computeNormal(\n            getWorldPos(samples[remaining[i]], uvSamples[remaining[i]]), uvSamples[remaining[i]]\n        ), 0.0);*/\n    }"},FK="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",UK=Uint8Array.from(atob(FK),t=>t.charCodeAt(0));function zK(t,e,i){if(e.getQueryParameter(t,e.QUERY_RESULT_AVAILABLE)){let n=e.getQueryParameter(t,e.QUERY_RESULT)/1e6;i.lastTime=n}else setTimeout(()=>{zK(t,e,i)},1)}(0,r.a)(zK,"$87431ee93b037844$var$checkTimerQuery");var VK=class extends HZ{constructor(t,e,i=512,n=512){super(),this.width=i,this.height=n,this.clear=!0,this.camera=e,this.scene=t,this.autosetGamma=!0,this.configuration=new Proxy({aoSamples:16,aoRadius:5,denoiseSamples:8,denoiseRadius:12,distanceFalloff:1,intensity:5,denoiseIterations:2,renderMode:0,color:new Ua(0,0,0),gammaCorrection:!0,logarithmicDepthBuffer:!1,screenSpaceRadius:!1,halfRes:!1,depthAwareUpsampling:!0},{set:(t,e,i)=>{let n=t[e];return t[e]=i,"aoSamples"===e&&n!==i&&this.configureAOPass(this.configuration.logarithmicDepthBuffer),"denoiseSamples"===e&&n!==i&&this.configureDenoisePass(this.configuration.logarithmicDepthBuffer),"halfRes"===e&&n!==i&&(this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureHalfResTargets(),this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer),this.setSize(this.width,this.height)),"depthAwareUpsampling"===e&&n!==i&&this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer),"gammaCorrection"===e&&(this.autosetGamma=!1),!0}}),this.samples=[],this.samplesR=[],this.samplesDenoise=[],this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer),this.configureSampleDependentPasses(),this.configureHalfResTargets(),this.copyQuad=new qK(new Us({uniforms:{tDiffuse:{value:null}},depthWrite:!1,vertexShader:"\n            varying vec2 vUv;\n            void main() {\n                vUv = uv;\n                gl_Position = vec4(position, 1);\n            }\n            ",fragmentShader:"\n            uniform sampler2D tDiffuse;\n            varying vec2 vUv;\n            void main() {\n                gl_FragColor = texture2D(tDiffuse, vUv);\n            }\n            "})),this.writeTargetInternal=new $r(this.width,this.height,{minFilter:Mi,magFilter:Mi,depthBuffer:!1}),this.readTargetInternal=new $r(this.width,this.height,{minFilter:Mi,magFilter:Mi,depthBuffer:!1}),this.outputTargetInternal=new $r(this.width,this.height,{minFilter:Mi,magFilter:Mi,depthBuffer:!1}),this.bluenoise=new Cf(UK,128,128),this.bluenoise.colorSpace=Bn,this.bluenoise.wrapS=yi,this.bluenoise.wrapT=yi,this.bluenoise.minFilter=bi,this.bluenoise.magFilter=bi,this.bluenoise.needsUpdate=!0,this.lastTime=0,this.needsDepthTexture=!0,this.needsSwap=!0,this._r=new Tr,this._c=new Ua}configureHalfResTargets(){this.configuration.halfRes?(this.depthDownsampleTarget=new oo(this.width/2,this.height/2,2),this.depthDownsampleTarget.texture[0].format=Gi,this.depthDownsampleTarget.texture[0].type=Ni,this.depthDownsampleTarget.texture[0].minFilter=bi,this.depthDownsampleTarget.texture[0].magFilter=bi,this.depthDownsampleTarget.texture[0].depthBuffer=!1,this.depthDownsampleTarget.texture[1].format=Fi,this.depthDownsampleTarget.texture[1].type=qi,this.depthDownsampleTarget.texture[1].minFilter=bi,this.depthDownsampleTarget.texture[1].magFilter=bi,this.depthDownsampleTarget.texture[1].depthBuffer=!1,this.depthDownsampleQuad=new qK(new Us(BK))):(this.depthDownsampleTarget&&(this.depthDownsampleTarget.dispose(),this.depthDownsampleTarget=null),this.depthDownsampleQuad&&(this.depthDownsampleQuad.dispose(),this.depthDownsampleQuad=null))}configureSampleDependentPasses(){this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureDenoisePass(this.configuration.logarithmicDepthBuffer)}configureAOPass(t=!1){this.samples=this.generateHemisphereSamples(this.configuration.aoSamples),this.samplesR=this.generateHemisphereSamplesR(this.configuration.aoSamples);let e={...RK};e.fragmentShader=e.fragmentShader.replace("16",this.configuration.aoSamples).replace("16.0",this.configuration.aoSamples+".0"),t&&(e.fragmentShader="#define LOGDEPTH\n"+e.fragmentShader),this.configuration.halfRes&&(e.fragmentShader="#define HALFRES\n"+e.fragmentShader),this.effectShaderQuad?(this.effectShaderQuad.material.dispose(),this.effectShaderQuad.material=new Us(e)):this.effectShaderQuad=new qK(new Us(e))}configureDenoisePass(t=!1){this.samplesDenoise=this.generateDenoiseSamples(this.configuration.denoiseSamples,11);let e={...kK};e.fragmentShader=e.fragmentShader.replace("16",this.configuration.denoiseSamples),t&&(e.fragmentShader="#define LOGDEPTH\n"+e.fragmentShader),this.poissonBlurQuad?(this.poissonBlurQuad.material.dispose(),this.poissonBlurQuad.material=new Us(e)):this.poissonBlurQuad=new qK(new Us(e))}configureEffectCompositer(t=!1){let e={...DK};t&&(e.fragmentShader="#define LOGDEPTH\n"+e.fragmentShader),this.configuration.halfRes&&this.configuration.depthAwareUpsampling&&(e.fragmentShader="#define HALFRES\n"+e.fragmentShader),this.effectCompositerQuad?(this.effectCompositerQuad.material.dispose(),this.effectCompositerQuad.material=new Us(e)):this.effectCompositerQuad=new qK(new Us(e))}generateHemisphereSamples(t){let e=[];for(let i=0;i<t;i++){let n=2.399963*i,r=Math.sqrt(i+.5)/Math.sqrt(t),o=r*Math.cos(n),a=r*Math.sin(n),s=Math.sqrt(1-(o*o+a*a));e.push(new ho(o,a,s))}return e}generateHemisphereSamplesR(t){let e=[];for(let i=0;i<t;i++)e.push((i+1)/t);return e}generateDenoiseSamples(t,e){let i=2*Math.PI*e/t,n=1/t,r=n,o=[],a=n,s=0;for(let l=0;l<t;l++)o.push(new Tr(Math.cos(s),Math.sin(s)).multiplyScalar(Math.pow(a,.75))),a+=r,s+=i;return o}setSize(t,e){this.width=t,this.height=e;let i=this.configuration.halfRes?.5:1;this.writeTargetInternal.setSize(t*i,e*i),this.readTargetInternal.setSize(t*i,e*i),this.configuration.halfRes&&this.depthDownsampleTarget.setSize(t*i,e*i),this.outputTargetInternal.setSize(t,e)}setDepthTexture(t){this.depthTexture=t}render(t,e,i){let n,r,o,a=t.xr.enabled;t.xr.enabled=!1,t.capabilities.logarithmicDepthBuffer!==this.configuration.logarithmicDepthBuffer&&(this.configuration.logarithmicDepthBuffer=t.capabilities.logarithmicDepthBuffer,this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureDenoisePass(this.configuration.logarithmicDepthBuffer),this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer)),this.debugMode&&(null===(r=(n=t.getContext()).getExtension("EXT_disjoint_timer_query_webgl2"))&&(console.error("EXT_disjoint_timer_query_webgl2 not available, disabling debug mode."),this.debugMode=!1)),this.debugMode&&(o=n.createQuery(),n.beginQuery(r.TIME_ELAPSED_EXT,o)),this.camera.updateMatrixWorld(),this._r.set(this.width,this.height);let s=this.configuration.aoRadius;this.configuration.halfRes&&this.configuration.screenSpaceRadius&&(s*=.5),this.configuration.halfRes&&(t.setRenderTarget(this.depthDownsampleTarget),this.depthDownsampleQuad.material.uniforms.sceneDepth.value=this.depthTexture,this.depthDownsampleQuad.material.uniforms.resolution.value=this._r,this.depthDownsampleQuad.material.uniforms.near.value=this.camera.near,this.depthDownsampleQuad.material.uniforms.far.value=this.camera.far,this.depthDownsampleQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.depthDownsampleQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.depthDownsampleQuad.material.uniforms.logDepth.value=this.configuration.logarithmicDepthBuffer,this.depthDownsampleQuad.render(t)),this.effectShaderQuad.material.uniforms.sceneDiffuse.value=e.texture,this.effectShaderQuad.material.uniforms.sceneDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[0]:this.depthTexture,this.effectShaderQuad.material.uniforms.sceneNormal.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[1]:null,this.effectShaderQuad.material.uniforms.projMat.value=this.camera.projectionMatrix,this.effectShaderQuad.material.uniforms.viewMat.value=this.camera.matrixWorldInverse,this.effectShaderQuad.material.uniforms.projViewMat.value=this.camera.projectionMatrix.clone().multiply(this.camera.matrixWorldInverse.clone()),this.effectShaderQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.effectShaderQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.effectShaderQuad.material.uniforms.cameraPos.value=this.camera.getWorldPosition(new ho),this.effectShaderQuad.material.uniforms.resolution.value=this.configuration.halfRes?this._r.clone().multiplyScalar(.5).floor():this._r,this.effectShaderQuad.material.uniforms.time.value=performance.now()/1e3,this.effectShaderQuad.material.uniforms.samples.value=this.samples,this.effectShaderQuad.material.uniforms.samplesR.value=this.samplesR,this.effectShaderQuad.material.uniforms.bluenoise.value=this.bluenoise,this.effectShaderQuad.material.uniforms.radius.value=s,this.effectShaderQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.effectShaderQuad.material.uniforms.near.value=this.camera.near,this.effectShaderQuad.material.uniforms.far.value=this.camera.far,this.effectShaderQuad.material.uniforms.logDepth.value=t.capabilities.logarithmicDepthBuffer,this.effectShaderQuad.material.uniforms.ortho.value=this.camera.isOrthographicCamera,this.effectShaderQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,t.setRenderTarget(this.writeTargetInternal),this.effectShaderQuad.render(t);for(let l=0;l<this.configuration.denoiseIterations;l++)[this.writeTargetInternal,this.readTargetInternal]=[this.readTargetInternal,this.writeTargetInternal],this.poissonBlurQuad.material.uniforms.tDiffuse.value=this.readTargetInternal.texture,this.poissonBlurQuad.material.uniforms.sceneDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[0]:this.depthTexture,this.poissonBlurQuad.material.uniforms.projMat.value=this.camera.projectionMatrix,this.poissonBlurQuad.material.uniforms.viewMat.value=this.camera.matrixWorldInverse,this.poissonBlurQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.poissonBlurQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.poissonBlurQuad.material.uniforms.cameraPos.value=this.camera.getWorldPosition(new ho),this.poissonBlurQuad.material.uniforms.resolution.value=this.configuration.halfRes?this._r.clone().multiplyScalar(.5).floor():this._r,this.poissonBlurQuad.material.uniforms.time.value=performance.now()/1e3,this.poissonBlurQuad.material.uniforms.blueNoise.value=this.bluenoise,this.poissonBlurQuad.material.uniforms.radius.value=this.configuration.denoiseRadius*(this.configuration.halfRes?.5:1),this.poissonBlurQuad.material.uniforms.worldRadius.value=s,this.poissonBlurQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.poissonBlurQuad.material.uniforms.index.value=l,this.poissonBlurQuad.material.uniforms.poissonDisk.value=this.samplesDenoise,this.poissonBlurQuad.material.uniforms.near.value=this.camera.near,this.poissonBlurQuad.material.uniforms.far.value=this.camera.far,this.poissonBlurQuad.material.uniforms.logDepth.value=t.capabilities.logarithmicDepthBuffer,this.poissonBlurQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,t.setRenderTarget(this.writeTargetInternal),this.poissonBlurQuad.render(t);this.effectCompositerQuad.material.uniforms.sceneDiffuse.value=e.texture,this.effectCompositerQuad.material.uniforms.sceneDepth.value=this.depthTexture,this.effectCompositerQuad.material.uniforms.near.value=this.camera.near,this.effectCompositerQuad.material.uniforms.far.value=this.camera.far,this.effectCompositerQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.effectCompositerQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.effectCompositerQuad.material.uniforms.logDepth.value=t.capabilities.logarithmicDepthBuffer,this.effectCompositerQuad.material.uniforms.ortho.value=this.camera.isOrthographicCamera,this.effectCompositerQuad.material.uniforms.downsampledDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[0]:this.depthTexture,this.effectCompositerQuad.material.uniforms.resolution.value=this._r,this.effectCompositerQuad.material.uniforms.blueNoise.value=this.bluenoise,this.effectCompositerQuad.material.uniforms.intensity.value=this.configuration.intensity,this.effectCompositerQuad.material.uniforms.renderMode.value=this.configuration.renderMode,this.effectCompositerQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,this.effectCompositerQuad.material.uniforms.radius.value=s,this.effectCompositerQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.effectCompositerQuad.material.uniforms.gammaCorrection.value=this.autosetGamma?this.renderToScreen:this.configuration.gammaCorrection,this.effectCompositerQuad.material.uniforms.tDiffuse.value=this.writeTargetInternal.texture,this.effectCompositerQuad.material.uniforms.color.value=this._c.copy(this.configuration.color).convertSRGBToLinear(),this.effectCompositerQuad.material.uniforms.cameraPos.value=this.camera.getWorldPosition(new ho),this.effectCompositerQuad.material.uniforms.fog.value=!!this.scene.fog,this.scene.fog&&(this.scene.fog.isFog?(this.effectCompositerQuad.material.uniforms.fogExp.value=!1,this.effectCompositerQuad.material.uniforms.fogNear.value=this.scene.fog.near,this.effectCompositerQuad.material.uniforms.fogFar.value=this.scene.fog.far):this.scene.fog.isFogExp2?(this.effectCompositerQuad.material.uniforms.fogExp.value=!0,this.effectCompositerQuad.material.uniforms.fogDensity.value=this.scene.fog.density):console.error("Unsupported fog type ".concat(this.scene.fog.constructor.name," in SSAOPass."))),t.setRenderTarget(this.outputTargetInternal),this.effectCompositerQuad.render(t),t.setRenderTarget(this.renderToScreen?null:i),this.copyQuad.material.uniforms.tDiffuse.value=this.outputTargetInternal.texture,this.copyQuad.render(t),this.debugMode&&(n.endQuery(r.TIME_ELAPSED_EXT),zK(o,n,this)),t.xr.enabled=a}enableDebugMode(){this.debugMode=!0}disableDebugMode(){this.debugMode=!1}setDisplayMode(t){this.configuration.renderMode=["Combined","AO","No AO","Split","Split AO"].indexOf(t)}setQualityMode(t){"Performance"===t?(this.configuration.aoSamples=8,this.configuration.denoiseSamples=4,this.configuration.denoiseRadius=12):"Low"===t?(this.configuration.aoSamples=16,this.configuration.denoiseSamples=4,this.configuration.denoiseRadius=12):"Medium"===t?(this.configuration.aoSamples=16,this.configuration.denoiseSamples=8,this.configuration.denoiseRadius=12):"High"===t?(this.configuration.aoSamples=64,this.configuration.denoiseSamples=8,this.configuration.denoiseRadius=6):"Ultra"===t&&(this.configuration.aoSamples=64,this.configuration.denoiseSamples=16,this.configuration.denoiseRadius=6)}};(0,r.a)(VK,"$87431ee93b037844$export$2489f9981ab0fa82");var jK=VK,GK=Uint8Array.from(atob(FK),t=>t.charCodeAt(0)),HK=(0,r.e)(it()),WK="varying vec2 vUv;\n\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n\n",XK="varying vec2 vUv;\nuniform sampler2D colorTexture;\n\nvoid main() {\n\tvec4 outputColor = texture2D(colorTexture, vUv).rgba;\n\n\tgl_FragColor = outputColor;\n}\n",YK="varying vec2 vUv;\nuniform float animatedColorOpacity;\nuniform sampler2D inputBuffer;\nuniform sampler2D staticSceneDepthTexture;\nuniform sampler2D animatedSceneColorTexture;\nuniform sampler2D animatedSceneDepthTexture;\nuniform sampler2D alwaysOnBottomSceneColorTexture;\n\n// Perform alpha blending between two colors with non-premultiplied\n// alpha, and return their non-premultiplied composite.\n//\n// This corresponds to the OVER porter-duff operation, aka, standard alpha\n// blending as implemented in most image editors.\nvec4 alphaBlend(vec4 background, vec4 foreground) {\n\tvec3 resultColor = (\n\t\tforeground.rgb * foreground.a +\n\t\tbackground.rgb * background.a * (1.0 - foreground.a)\n\t);\n\tfloat resultAlpha = foreground.a + background.a * (1.0 - foreground.a);\n\treturn vec4(resultColor / resultAlpha, resultAlpha);\n}\n\nvoid main() {\n\tfloat staticDepth = texture2D(staticSceneDepthTexture, vUv).r;\n\tfloat animatedDepth = texture2D(animatedSceneDepthTexture, vUv).r;\n\n\tvec4 inputColor = texture2D(inputBuffer, vUv).rgba;\n\tvec4 animatedColor = texture2D(animatedSceneColorTexture, vUv).rgba;\n\n\tif (staticDepth < animatedDepth) {\n\t\tanimatedColor.a *= animatedColorOpacity;\n\t}\n\n\tvec4 mixedColor = alphaBlend(inputColor, animatedColor);\n\n\tgl_FragColor = mixedColor;\n}\n",ZK="varying vec2 vUv;\nuniform sampler2D inputBuffer;\nuniform sampler2D alwaysOnBottomSceneColorTexture;\nuniform sampler2D alwaysOnTopSceneColorTexture;\n\n// Assumes that the foreground (src) color is premultiplied with its alpha.\n// This corresponds to GL_ONE source factor and GL_ONE_MINUS_SRC_ALPHA for destination factor.\nvec4 alphaBlendPremultipliedAlpha(vec4 background, vec4 foreground) {\n\treturn foreground + (background * (1.0 - foreground.a));\n}\n\nvoid main() {\n\tvec4 staticSceneColor = linearToOutputTexel(texture2D(inputBuffer, vUv).rgba);\n\tvec4 outdoorViewColor = texture2D(alwaysOnBottomSceneColorTexture, vUv).rgba;\n\tvec4 alwaysOnTopColor = linearToOutputTexel(texture2D(alwaysOnTopSceneColorTexture, vUv).rgba);\n\tvec4 staticPlusOutdoor = mix(outdoorViewColor, staticSceneColor, staticSceneColor.a);\n\t\n\tgl_FragColor = alphaBlendPremultipliedAlpha(staticPlusOutdoor, alwaysOnTopColor);\n}\n",JK="varying vec2 vUv;\nuniform sampler2D staticSceneColorTexture;\n\nvoid main() {\n\tvec4 inputColor = texture2D(staticSceneColorTexture, vUv).rgba;\n\n\tgl_FragColor = inputColor;\n}\n";(0,n.a)(),(0,n.a)();var KK=(0,r.a)(function(t,e,i){this.touch=t,this.camera=e,this.cameraPlane=i,this.viewCoordinate={x:t.x,y:t.y},this.camera.updateMatrixWorld(),this.camera.updateMatrix(),this.snapHolderMatrix=this.camera.matrixWorld.clone(),this.snapCamera=this.camera.clone(),this.snapshotCameraState=function(){this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.cameraPosition=this.camera.position;let t=new ho(this.viewCoordinate.x,this.viewCoordinate.y,1);this.raycaster=this.raycaster||new Yv,this.raycaster.setFromCamera(t,this.snapCamera);let e=this.raycaster.intersectObject(this.cameraPlane,!1);this.worldCoordinate=e&&e[0]&&e[0].point,this.snapshotted=!0},this.updateAnchorState=function(t,e){this.camera=t,this.snapCamera=t.clone(),this.snapHolderMatrix=t.matrixWorld.clone(),this.updateViewCoordinate(e),this.snapshotCameraState()},this.updateViewCoordinate=function(t){this.viewCoordinate={x:t.x,y:t.y}},this.reUnproject=function(){let t=new ho(this.viewCoordinate.x,this.viewCoordinate.y,1);this.raycaster.setFromCamera(t,this.snapCamera);let e=this.raycaster.intersectObject(this.cameraPlane,!1)[0];if(e)return e.point},this.snapshotCameraState()},"TouchAnchor"),QK=KK;function $K(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}function tQ(t,e){return Math.sqrt((e.y-t.y)**2+(e.x-t.x)**2)}function eQ(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}(0,n.a)(),(0,r.a)($K,"angle"),(0,r.a)(tQ,"distance"),(0,r.a)(eQ,"average");var iQ=(0,r.a)(function(t,e){this.input1=t,this.input2=e,this.lastAngle=$K(t,e),this.lastDistance=tQ(t,e),this.totalDistance=0,this.first=t,this.second=e,this.update=function(t,e){let i=tQ(t,e);this.input1=t,this.input2=e;let n=$K(t,e);this.lastAngle=n,this.lastDistance=i,this.totalDistance+=(tQ(this.first,t)+tQ(this.second,e))/2,this.first=eQ(this.first,t),this.second=eQ(this.second,e)}},"InputSet"),nQ=iQ;(0,n.a)();var rQ=(0,r.e)(o()),oQ={SINGLE_FLOOR:"single_floor",MULTI_FLOOR:"multi_floor"},aQ=Math.PI/2,sQ=rQ.default.Easing.Quadratic.InOut;function lQ(t,e,i){null==e&&(e=t.g,i=t.b,t=t.r);let n=0,r=t;e>t&&(n=1,r=e),i>e&&i>t&&(n=2,r=i);let o=t;e<t&&(o=e),i<e&&i<t&&(o=i);let a=0,s=0,l=0;return r!==o&&(a=0===n?60/360*(e-i)/(r-o):1===n?60/360*(2+(i-t)/(r-o)):60/360*(4+(t-e)/(r-o)),s=0===r?0:(r-o)/r),[a,s,l=r]}function hQ(t,e,i){let n=360*t%360/60,r=0|n,o=n-r,a=i*(1-e),s=i*(1-e*o),l=i*(1-e*(1-o)),h=0,u=0,c=0;switch(r){case 0:h=i,u=l,c=a;break;case 1:h=s,u=i,c=a;break;case 2:h=a,u=i,c=l;break;case 3:h=a,u=s,c=i;break;case 4:h=l,u=a,c=i;break;case 5:h=i,u=a,c=s}return new Ua(h,u,c)}(0,n.a)(),(0,n.a)(),(0,r.a)(lQ,"rgb2hsv"),(0,r.a)(hQ,"hsv2rgb");var uQ=16,cQ=class{constructor({minimum:t,maximum:e,step:i,current:n,onValueChanged:r}){this._minimum=t,this._maximum=e,this._step=i,this._onValueChanged=r,this._element=document.createElement("input"),this._element.type="range",this._element.min=this._minimum,this._element.max=this._maximum,null!=this._step&&(this._element.step=this._step),this._element.value=null!=n?n:this._minimum,null!=r&&(this._element.addEventListener("input",t=>{r(this._element.value)}),r(this._element.value)),Object.assign(this._element.style,{height:uQ+"px"})}destroy(){this._element=null,Object.setPrototypeOf(this,null)}addValueChangedListener(t){this._element.addEventListener("input",e=>t(this._element.value))}setValue(t){this._element.value=t}get element(){return this._element}get value(){return this._element.value}get displayedValue(){return""+this._element.value}get height(){return uQ}};(0,r.a)(cQ,"DebugUIScalarSlider");var pQ=cQ,dQ=16,fQ=class{constructor({current:t,onValueChanged:e}){this._onValueChanged=e,this._element=document.createElement("div"),this._titleElement=document.createElement("input"),this._titleElement.type="checkbox",this._titleElement.checked=t||!1,Object.assign(this._titleElement.style,{width:dQ+"px",height:dQ+"px",margin:"0px"}),null!=e&&(this._titleElement.addEventListener("click",t=>{e(this._titleElement.checked)}),e(this._titleElement.checked))}destroy(){this._element=null,this._titleElement=null,Object.setPrototypeOf(this,null)}addValueChangedListener(t){this._titleElement.addEventListener("click",e=>t(this._titleElement.checked))}get element(){return this._element}get titleElement(){return this._titleElement}get value(){return this._titleElement.checked}get displayedValue(){return this._titleElement.checked?"true":"false"}get height(){return 0}get titleElementWidth(){return dQ}};(0,r.a)(fQ,"DebugUICheckbox");var gQ=fQ,mQ=12,vQ=2,yQ=64,_Q=16,xQ=24,bQ=48,wQ=class{constructor({current:t,onValueChanged:e}){this._onValueChanged=e,this._element=document.createElement("div"),this._titleElement=document.createElement("div"),this._color=t||new Ua,this._listeners=[],Object.assign(this._element.style,{width:"100%",height:this.height+"px"}),Object.assign(this._titleElement.style,{width:mQ-2+"px",height:mQ-2+"px","border-radius":"2px"}),this._colorPickerMain=document.createElement("canvas"),this._colorPickerMain.height=yQ-2,Object.assign(this._colorPickerMain.style,{position:"absolute",left:"0px",right:"0px",top:"0px",height:yQ-2+"px"}),this._element.appendChild(this._colorPickerMain),this._colorPickerBottomSlider=document.createElement("canvas"),this._colorPickerBottomSlider.height=_Q-2,Object.assign(this._colorPickerBottomSlider.style,{position:"absolute",left:"0px",right:"0px",top:yQ+vQ+"px",height:_Q-2+"px"}),this._element.appendChild(this._colorPickerBottomSlider),this._requestAnimationFrameHandle=null,this._requestAnimationFrameUpdate=this._requestAnimationFrameUpdate.bind(this),this._pickingMain=!1,this._pickingX=0,this._pickingY=0,this._colorPickerMain.addEventListener("pointerdown",t=>{this._pickingMain=!0,this._updateMain(t.offsetX,t.offsetY),this._notify(),this._moveListener=(t=>{let e=t.clientX-this._colorPickerMain.getBoundingClientRect().x,i=t.clientY-this._colorPickerMain.getBoundingClientRect().y;this._pickingX=Math.min(Math.max(e,0),this._colorPickerMain.clientWidth),this._pickingY=Math.min(Math.max(i,0),this._colorPickerMain.clientHeight),this._requestAnimationFrame()}),document.body.addEventListener("pointermove",this._moveListener),this._upListener=(t=>{this._pickingMain=!1,this.redraw(),document.body.removeEventListener("pointermove",this._moveListener),document.body.removeEventListener("pointerup",this._upListener),delete this._moveListener,delete this._upListener}),document.body.addEventListener("pointerup",this._upListener)}),this._pickingBottomSlider=!1,this._colorPickerBottomSlider.addEventListener("pointerdown",t=>{this._pickingBottomSlider=!0,this._updateBottomSlider(t.offsetX),this._notify(),this._bottomMoveListener=(t=>{let e=t.clientX-this._colorPickerBottomSlider.getBoundingClientRect().x;this._pickingX=Math.min(Math.max(e,0),this._colorPickerMain.clientWidth),this._requestAnimationFrame()}),document.body.addEventListener("pointermove",this._bottomMoveListener),this._bottomUpListener=(t=>{this._pickingBottomSlider=!1,this.redraw(),document.body.removeEventListener("pointermove",this._bottomMoveListener),document.body.removeEventListener("pointerup",this._bottomUpListener),delete this._bottomMoveListener,delete this._bottomUpListener}),document.body.addEventListener("pointerup",this._bottomUpListener)});let i=0,n=(0,r.a)((t,e)=>{let n=document.createElement("button");return Object.assign(n.style,{position:"absolute",top:this.height-xQ+"px",left:i+"px",height:xQ+"px",width:bQ+"px",color:"grey"}),n.innerHTML=e,i+=bQ+vQ,n.addEventListener("click",()=>{this._modeButtons[this._mode].style.color="grey",this._mode=t,n.style.color="black",this.redraw()}),this._element.appendChild(n),n},"createModeButton");this._modeButtons={},this._modeButtons.hsv=n("hsv","HSV"),this._modeButtons.svh=n("svh","SVH"),this._modeButtons.rgb=n("rgb","RGB"),this._mode="hsv",this._modeButtons.hsv.style.color="black",this._requestAnimationFrame(),this._notify()}destroy(){document.body.removeEventListener("pointermove",this._moveListener),document.body.removeEventListener("pointerup",this._upListener),document.body.removeEventListener("pointermove",this._bottomMoveListener),document.body.removeEventListener("pointerup",this._bottomUpListener),this._element=null,this._titleElement=null,this._destroyed=!0,Object.setPrototypeOf(this,null)}addValueChangedListener(t){this._listeners.push(t)}setValue(t){this._color.copy(t),this.redraw(),this._notify()}_requestAnimationFrame(){null==this._requestAnimationFrameHandle&&!this._destroyed&&(this._requestAnimationFrameHandle=requestAnimationFrame(this._requestAnimationFrameUpdate))}_requestAnimationFrameUpdate(){this._pickingMain&&(this._updateMain(this._pickingX,this._pickingY),this._notify()),this._pickingBottomSlider&&(this._updateBottomSlider(this._pickingX),this._notify()),this._requestAnimationFrameHandle=null}_notify(){null!=this._onValueChanged&&this._onValueChanged(this._color);for(let t of this._listeners)t(this._color)}_updateMain(t,e){let i=this._colorPickerMain.clientWidth,n=yQ;this._pickingX=Math.min(Math.max(t,1),i-1)-1,this._pickingY=Math.min(Math.max(e,1),n-1)-1;let r=this._pickingX/(i-1),o=this._pickingY/(n-1);if("hsv"===this._mode){let[,,t]=lQ(this._color);this._color.set(hQ(r,o,t))}else if("svh"===this._mode){let[t,,]=lQ(this._color);this._color.set(hQ(t,r,1-o))}else this._color.r=r,this._color.g=o;this.redraw()}_updateBottomSlider(t){let e=this._colorPickerBottomSlider.clientWidth;this._pickingX=Math.min(Math.max(t,1),e-1)-1;let i=this._pickingX/(e-1);if("hsv"===this._mode){let[t,e]=lQ(this._color);this._color.set(hQ(t,e,i))}else if("svh"===this._mode){let[,t,e]=lQ(this._color);this._color.set(hQ(i,t,e))}else this._color.b=i;this.redraw()}redraw(){let t=this._element.clientWidth-2,e=yQ-2,i=_Q-2;this._colorPickerMain.width!==t&&(this._colorPickerMain.width=t);let[n,r,o]=lQ(this._color),a=this._colorPickerMain.getContext("2d");for(let p=0;p<e;++p)for(let i=0;i<t;++i){if("hsv"===this._mode){let n=i/(t-1),r=p/(e-1),s=o,{r:l,g:h,b:u}=hQ(n,r,s);a.fillStyle="rgb(".concat(255*l,",").concat(255*h,",").concat(255*u,")")}else if("svh"===this._mode){let r=i/(t-1),o=1-p/(e-1),s=n,{r:l,g:h,b:u}=hQ(s,r,o);a.fillStyle="rgb(".concat(255*l,",").concat(255*h,",").concat(255*u,")")}else{let n=i/t*255,r=p/e*255,o=255*this._color.b;a.fillStyle="rgb(".concat(n,",").concat(r,",").concat(o,")")}a.fillRect(i,p,1,1)}this._pickingMain&&(a.fillStyle="rgba(0,0,0,0.5)",a.fillRect(0,this._pickingY,t,1),a.fillRect(this._pickingX,0,1,e)),this._colorPickerBottomSlider.width!==t&&(this._colorPickerBottomSlider.width=t);let s=this._colorPickerBottomSlider.getContext("2d");for(let p=0;p<t;++p){if("hsv"===this._mode){let e=n,i=r,o=p/(t-1),{r:a,g:l,b:h}=hQ(e,i,o);s.fillStyle="rgb(".concat(255*a,",").concat(255*l,",").concat(255*h,")")}else if("svh"===this._mode){let e=r,i=o,n=p/(t-1),{r:a,g:l,b:h}=hQ(n,e,i);s.fillStyle="rgb(".concat(255*a,",").concat(255*l,",").concat(255*h,")")}else{let e=255*this._color.r,i=255*this._color.g,n=p/(t-2)*255;s.fillStyle="rgb(".concat(e,",").concat(i,",").concat(n,")")}s.fillRect(p,0,1,i)}this._pickingBottomSlider&&(s.fillStyle="rgba(0,0,0,0.5)",s.fillRect(this._pickingX,0,1,i));let l=255*this._color.r,h=255*this._color.g,u=255*this._color.b,c="1px solid rgb(".concat(.9*l,",").concat(.9*h,",").concat(.9*u,")");Object.assign(this._colorPickerMain.style,{border:c}),Object.assign(this._colorPickerBottomSlider.style,{border:c}),Object.assign(this._titleElement.style,{"background-color":"rgb(".concat(l,",").concat(h,",").concat(u,")"),border:c})}get element(){return this._element}get titleElement(){return this._titleElement}get value(){return this._color}get displayedValue(){return"#"+this._color.getHexString().toUpperCase()}get height(){return yQ+vQ+_Q+vQ+xQ}get titleElementWidth(){return mQ}};(0,r.a)(wQ,"DebugUIColorPicker");var EQ=wQ,MQ=16,SQ=12,TQ=4,CQ=10,AQ=12,PQ=class{constructor({name:t}){this._name=t,this._element=document.createElement("div"),this._entries=[],this._height=AQ}destroy(){for(let t of this._entries)t.destroy();this._entries=null,this._element=null,Object.setPrototypeOf(this,null)}get element(){return this._element}get height(){return this._height}addControl(t,e,i){if(-1!==this._entries.findIndex(e=>e.name===t))return;let n=new OQ({name:t,description:e,control:i});this._entries.push(n),this._element.appendChild(n.element),null!=i.redraw&&i.redraw()}removeControl(t){let e=this._entries.findIndex(e=>e.name===t);if(-1!==e){let[t]=this._entries.splice(e,1);this._element.removeChild(t.element),t.destroy()}}_updateLayout(){this._height=0;for(let t of this._entries)t.element.style.top=this._height+"px",this._height+=t.height+AQ;Object.assign(this._element.style,{height:this._height+"px"})}};(0,r.a)(PQ,"DebugUIPanel");var IQ=PQ,LQ=class{constructor({name:t,description:e,control:i}){this._name=t,this._description=e,this._control=i,this._element=document.createElement("div"),this._element.title=e,Object.assign(this._element.style,{position:"absolute",left:"0px",right:"0px"}),this._element.appendChild(this._control.element),Object.assign(this._control.element.style,{position:"absolute",left:"0px",width:"100%",top:MQ+"px","font-size":CQ+"px"});let n=0;null!=this._control.titleElement&&(this._element.appendChild(this._control.titleElement),Object.assign(this._control.titleElement.style,{position:"absolute",left:"0px",top:"0px","font-size":CQ+"px"}),n=this._control.titleElementWidth+TQ),this._control.addValueChangedListener(t=>{this._displayedValueElement.innerHTML=NQ(this._control.displayedValue)}),this._nameElement=document.createElement("span"),this._nameElement.innerHTML=t,Object.assign(this._nameElement.style,{position:"absolute",left:n+"px",right:"0px",height:MQ+"px",color:"#666666","font-size":SQ+"px","text-align":"left","vertical-align":"middle"}),this._element.appendChild(this._nameElement),this._displayedValueElement=document.createElement("span"),this._displayedValueElement.innerHTML=NQ(this._control.displayedValue),Object.assign(this._displayedValueElement.style,{position:"absolute",left:n+"px",right:"0px",height:MQ+"px","font-size":SQ+"px","text-align":"right","vertical-align":"middle"}),this._element.appendChild(this._displayedValueElement)}destroy(){this._element=null,this._nameElement=null,this._displayedValueElement=null,this._control.destroy(),Object.setPrototypeOf(this,null)}get name(){return this._name}get element(){return this._element}get value(){return this._control.value}get height(){return this._control.height+MQ}};(0,r.a)(LQ,"DebugUIEntry");var OQ=LQ;function NQ(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}(0,r.a)(NQ,"escapeHTML");var qQ=(0,r.e)(o()),RQ=512,DQ=6371e3,kQ=0,BQ=22,FQ=17,UQ=20,zQ=-85.051129,VQ=85.051129,jQ=1e4,GQ={chain:"chain",cancel:"cancel"},HQ=new Jn,WQ=(0,r.a)(function(t,e,i,o){this.dispatcher=HQ,this.camera=t,this.canvas=e,this.elevation=t.parent,this.orbit=this.elevation.parent;let a,s=2*Math.PI,l=100;this.zoomSpeed=5,this.rotateSpeed=100,this.enabled=!0,this.enableZoom=!0,this.enablePan=!0,this.enablePedestal=!1,this.maxPedestal=1/0,this.minPedestal=-1/0,this.enableRotate=!0,this.minZoom=375,this.maxZoom=1e4,this.initialMinZoom=375,this.initialMaxZoom=1e4,this.ignoreZoomLimits=!1,this.minExpandedZoom=375,this.maxExpandedZoom=1e5,this.zoomFactor=1,this.panBounds={margin:1.25,min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0},center:{x:0,y:0},radius:200},this.minTilt=0,this.maxTilt=1.2,this.mouseButtons={ORBIT:ve.RIGHT,ZOOM:ve.MIDDLE,PAN:ve.LEFT};let h=this,u=new cl(1e6,1e6),c=new ja({color:0,visible:!1}),p=new Cs(u,c);o.on(7,()=>{var t;let e=null==(t=o.mapObjects.get(o.currentMap))?void 0:t.object;if(null!=e){let t=new ho;t.applyMatrix4(e.matrix),p.position.z=t.z}o.tryRendering()});let d=new Yv;i.add(p);let f,g=-1,m=0,v=1,y=2,_=3,x=4,b=5,w=6,E=8,M=9,S=g,T=new Tr,C=[],A={offsetLeft:0,offsetTop:0},P=new Tr,I=new Tr,L=new Tr,O=new Tr,N=new Tr,q=new Tr,R=new ho,D=new ho,k=(new Tr,new Tr,new Tr,!1),B=new Av(!0),F=0,U=!0;this.CAMERA_EVENTS={},this.CAMERA_EVENTS.CHANGE_EVENT={type:"change"},this.CAMERA_EVENTS.PAN_START_EVENT={type:"panStart"},this.CAMERA_EVENTS.PAN_END_EVENT={type:"panEnd"},this.CAMERA_EVENTS.PEDESTAL_START_EVENT={type:"pedestalStart"},this.CAMERA_EVENTS.PEDESTAL_CHANGE_EVENT={type:"pedestalChange"},this.CAMERA_EVENTS.PEDESTAL_END_EVENT={type:"pedestalEnd"},this.CAMERA_EVENTS.ROTATE_START_EVENT={type:"rotateStart"},this.CAMERA_EVENTS.ROTATE_END_EVENT={type:"rotateEnd"},this.CAMERA_EVENTS.ZOOM_START_EVENT={type:"zoomStart"},this.CAMERA_EVENTS.ZOOM_END_EVENT={type:"zoomEnd"},this.CAMERA_EVENTS.MULTI_START_EVENT={type:"multiStart"},this.CAMERA_EVENTS.MULTI_END_EVENT={type:"multiEnd"},this.CAMERA_EVENTS.MULTI_CANCEL_EVENT={type:"multiCancel"},this.INTERACTION_EVENTS={},this.INTERACTION_EVENTS.USER_PAN_START_EVENT={type:"userPanStart"},this.INTERACTION_EVENTS.USER_PEDESTAL_START_EVENT={type:"userPedestalStart"},this.INTERACTION_EVENTS.USER_ROTATE_START_EVENT={type:"userRotateStart"},this.INTERACTION_EVENTS.USER_DOLLY_START_EVENT={type:"userDollyStart"},this.INTERACTION_EVENTS.USER_ZOOM_START_EVENT={type:"userZoomStart"},this.INTERACTION_EVENTS.USER_TILT_START_EVENT={type:"userTiltStart"},this.INTERACTION_EVENTS.USER_PAN_END_EVENT={type:"userPanEnd"},this.INTERACTION_EVENTS.USER_PEDESTAL_END_EVENT={type:"userPedestalEnd"},this.INTERACTION_EVENTS.USER_ROTATE_END_EVENT={type:"userRotateEnd"},this.INTERACTION_EVENTS.USER_DOLLY_END_EVENT={type:"userDollyEnd"},this.INTERACTION_EVENTS.USER_ZOOM_END_EVENT={type:"userZoomEnd"},this.INTERACTION_EVENTS.USER_TILT_END_EVENT={type:"userTiltEnd"},this.UPDATE_EVENTS={},this.UPDATE_EVENTS.POSITION_UPDATED_EVENT={type:"positionUpdated"},this.UPDATE_EVENTS.ZOOM_UPDATED_EVENT={type:"zoomUpdated"},this.UPDATE_EVENTS.TILT_UPDATED_EVENT={type:"tiltUpdated"},this.UPDATE_EVENTS.ROTATION_UPDATED_EVENT={type:"rotationUpdated"};let z=!1,V=(0,r.a)(()=>{z=!0},"setUserInteracting"),j=(0,r.a)(()=>{z=!1},"unsetUserInteracting");for(let n in this.INTERACTION_EVENTS){let t=this.INTERACTION_EVENTS[n];t.type.endsWith("Start")&&h.dispatcher.addEventListener(t.type,V)}for(let n in this.INTERACTION_EVENTS){let t=this.INTERACTION_EVENTS[n];t.type.endsWith("End")&&h.dispatcher.addEventListener(t.type,j)}let G=(0,r.a)(t=>{h.dispatcher.dispatchEvent({...h.CAMERA_EVENTS.PEDESTAL_CHANGE_EVENT,pedestal:t,scrolledToTop:h.scrolledToTop,scrolledToBottom:h.scrolledToBottom,scrollPercent:h.scrollPercent})},"dispatchPedestalChangeEvent");function H(t,e=!1){"number"==typeof t&&!isNaN(t)&&(h.orbit.position.z=t,e&&G(t),o.tryRendering())}this.addDebugControls=function(t){t.addDebugControls({CameraControls:[{name:"Stay Inside Bounds",description:"Ensure the camera stays inside its bounds.\n\nCaution: going too far outside-of-bounds may slow renderingsignificantly.",control:new gQ({current:!0,onValueChanged:t=>{U=t}})}]})},this.removeDebugControls=function(t){t.removeDebugControls({CameraControls:["Stay Inside Bounds"]})},this.pan=function(t,e){isNaN(t)||isNaN(e)||(h.setPosition(h.orbit.position.x+t,h.orbit.position.y+e),h.dispatcher.dispatchEvent(h.UPDATE_EVENTS.POSITION_UPDATED_EVENT))},this.getPositionCoordinate=function(){return o.convert3DMapPositionToCoordinate(h.getPosition())},this.getZoomLevel=function(){return this.convertAltitudeToZoomLevel(this.getZoom())},this.setZoomLevel=function(t){this.setZoom(convertZoomToAltitude(t))},this.convertZoomToAltitude=function(t){let{lat:e}=h.getPositionCoordinate(),i=o.cameraObject.fov,n=Mr.clamp(t,kQ,BQ),r=Math.pow(2,n),a=Mr.clamp(e,zQ,VQ),s=r*RQ;return Math.cos(Mr.degToRad(a))*Math.PI*2*DQ/s*o.canvasHeight/2/Math.tan(Mr.degToRad(i)/2)/o.referenceMap.scale},this.convertAltitudeToZoomLevel=function(t){let{lat:e}=h.getPositionCoordinate(),i=o.cameraObject.fov,n=t*o.referenceMap.scale*2*Math.tan(Mr.degToRad(i)/2)/o.canvasHeight,r=2*Math.cos(Mr.degToRad(e))*Math.PI*DQ/n;return Mr.clamp(Math.log2(r/RQ),kQ,BQ)},this.setPosition=function(t,e){if(isNaN(t)||isNaN(e))return;S==g&&h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.PAN_START_EVENT);let i=t-h.panBounds.center.x,n=e-h.panBounds.center.y,r=Math.sqrt(i*i+n*n);if(U&&r>h.panBounds.radius){let t=Math.atan2(n,i),e={x:Math.cos(t)*h.panBounds.radius+h.panBounds.center.x,y:Math.sin(t)*h.panBounds.radius+h.panBounds.center.y};h.orbit.position.x=e.x,h.orbit.position.y=e.y}else h.orbit.position.x=t,h.orbit.position.y=e;h.dispatcher.dispatchEvent(h.UPDATE_EVENTS.POSITION_UPDATED_EVENT),h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.CHANGE_EVENT),S==g&&h.dispatcher.dispatchEvent(h.this.CAMERA_EVENTS.PAN_END_EVENT)},this.setRotation=function(t,e){if(isNaN(t))return;S==g&&!e&&h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.ROTATE_START_EVENT);let i=t%s;i!==h.orbit.rotation.z&&(h.orbit.rotation.z=i,e||h.dispatcher.dispatchEvent(h.UPDATE_EVENTS.ROTATION_UPDATED_EVENT)),e||h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.CHANGE_EVENT),S==g&&!e&&h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.ROTATE_END_EVENT)},this.rotate=function(t){if(isNaN(t))return;S==g&&h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.ROTATE_START_EVENT);let e=(h.orbit.rotation.z+t)%s;e!==h.orbit.rotation.z&&(h.orbit.rotation.z=e,h.dispatcher.dispatchEvent(h.UPDATE_EVENTS.ROTATION_UPDATED_EVENT)),h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.CHANGE_EVENT),S==g&&h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.ROTATE_END_EVENT)},this.setTilt=function(t,e){if(isNaN(t))return;S==g&&!e&&h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.ROTATE_START_EVENT);let i=U?Math.max(Math.min(t,h.maxTilt),h.minTilt):t;i!==h.elevation.rotation.x&&(h.elevation.rotation.x=i,e||h.dispatcher.dispatchEvent(h.UPDATE_EVENTS.TILT_UPDATED_EVENT)),e||h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.CHANGE_EVENT),S==g&&!e&&h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.ROTATE_END_EVENT)},this.tilt=function(t){if(isNaN(t))return;S==g&&h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.ROTATE_START_EVENT);let e=U?Math.max(Math.min(t+h.getTilt(),h.maxTilt),h.minTilt):t+h.getTilt();e!==h.elevation.rotation.x&&(h.elevation.rotation.x=e,h.dispatcher.dispatchEvent(h.UPDATE_EVENTS.TILT_UPDATED_EVENT)),h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.CHANGE_EVENT),S==g&&h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.ROTATE_END_EVENT)},this.setZoom=function(t){if(isNaN(t))return;S==g&&h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.ZOOM_START_EVENT);let e=U?Math.min(Math.max(t,h.getZoomScaledMin()),h.getZoomScaledMax()):t;e!==h.camera.position.z&&(h.camera.position.z=e,h.dispatcher.dispatchEvent(h.UPDATE_EVENTS.ZOOM_UPDATED_EVENT)),h.camera.near=e/l,h.camera.far=e*l,h.camera.updateProjectionMatrix(),h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.CHANGE_EVENT),S==g&&h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.ZOOM_END_EVENT)},this.zoom=function(t){if(isNaN(t))return;S==g&&h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.ZOOM_START_EVENT);let e=h.getZoom()-t;h.camera.position.z=U?Math.min(Math.max(e,h.minZoom*h.zoomFactor),h.maxZoom*h.zoomFactor):e,h.dispatcher.dispatchEvent(h.UPDATE_EVENTS.ZOOM_UPDATED_EVENT),h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.CHANGE_EVENT),S==g&&h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.ZOOM_END_EVENT)},this.zoomIn=function(t,e,i){let n=this.getZoom();this.animateCamera({zoom:n/1.5},t,e,i)},this.zoomOut=function(t,e,i){let n=this.getZoom();this.animateCamera({zoom:1.5*n},t,e,i)},this.expandZoomLimits=function(t,e){e||(e=1.2),t*e>h.maxZoom&&(h.maxZoom=Math.min(t*e,h.maxExpandedZoom)),t/e<h.minZoom&&(h.minZoom=Math.max(t/e,h.minExpandedZoom))},this.restrictZoomLimits=function(t,e){e||(e=1.2),t*e>h.initialMaxZoom&&t*e<h.maxZoom&&(h.maxZoom=Math.max(h.getZoom(),t*e)),t/e<h.initialMinZoom&&t/e>h.minZoom&&(h.minZoom=Math.min(h.getZoom(),t/e))},this.getPosition=function(){return{x:h.orbit.position.x,y:h.orbit.position.y,z:h.orbit.position.z}},this.getPedestal=function(){return h.orbit.position.z},(0,r.a)(H,"setPedestal"),Object.defineProperty(this,"setPedestal",{enumerable:!1,value:H}),Object.defineProperty(this,"scrollPercent",{get(){let t=this.minPedestal,e=this.maxPedestal,i=this.getPedestal();return i=Math.min(i,e),((i=Math.max(i,t))-t)/(e-t)*100}}),Object.defineProperty(this,"scrolledToTop",{get(){return 0===this.maxPedestal||Math.ceil(this.getPedestal())>=this.maxPedestal}}),Object.defineProperty(this,"scrolledToBottom",{get(){return 0===this.minPedestal||Math.floor(this.getPedestal())<=this.minPedestal}}),this.getRotation=function(){return h.orbit.rotation.z},this.getTilt=function(){return h.elevation.rotation.x},this.getZoom=function(){return h.camera.position.z},this.isCameraMoving=function(){return S!=g},this.isUserInteracting=function(){return z},this.getZoomScaledMin=function(){return h.minZoom*h.zoomFactor},this.getZoomScaledMax=function(){let t=h.minZoom*h.zoomFactor;return Math.max(h.maxZoom,1.5*t)};let W=(0,r.a)(function(){return qQ.default.getAll().some(function(t){return t._mMapAnimation})},"isAnimating");this.isAnimating=W;let X=new Set;function Y(t){t.isPlaying?t.stop():t.end(),X.delete(t)}function Z(t){P.set(t.clientX,t.clientY),h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.ROTATE_START_EVENT),h.dispatcher.dispatchEvent(h.INTERACTION_EVENTS.USER_ROTATE_START_EVENT)}function J(){let t=At(T);O.set(t.x,t.y),N.set(h.orbit.position.x,h.orbit.position.y),h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.PAN_START_EVENT),h.dispatcher.dispatchEvent(h.INTERACTION_EVENTS.USER_PAN_START_EVENT)}function K(t){let e={x:t.clientX,y:t.clientY};h.initialShiftPos=e,h.initialPedestal=h.getPedestal(),h.pedestalScaleFactor=Fy(h.camera.fov,h.canvas.clientHeight,h.getZoom()),h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.PEDESTAL_START_EVENT),h.dispatcher.dispatchEvent(h.INTERACTION_EVENTS.USER_PEDESTAL_START_EVENT)}function Q(t){t.clientX;let e=t.clientY,i=h.initialPedestal+h.pedestalScaleFactor*(e-h.initialShiftPos.y);U&&(i<h.minPedestal?i=Math.max(i,h.minPedestal):i>h.maxPedestal&&(i=Math.min(i,h.maxPedestal))),i!==h.getPedestal()&&G(i)}function $(t){I.set(t.clientX,t.clientY),L.subVectors(I,P),h.rotate(-L.x/h.rotateSpeed),h.setTilt(h.getTilt()-L.y/h.rotateSpeed),P.copy(I),h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.CHANGE_EVENT)}function tt(){let t=At(T);q.set(t.x,t.y),R.subVectors(q,O),h.setPosition(N.x-R.x,N.y-R.y),h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.CHANGE_EVENT)}function et(t){let e=0;return void 0!==t.wheelDelta?e=t.wheelDelta:void 0!==t.detail&&(e=-t.detail),e}function it(t){let e=et(t),i=h.getZoom();return!(e<0&&i==h.getZoomScaledMax()||e>0&&i==h.getZoomScaledMin())}function nt(t){if(h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.ZOOM_START_EVENT),!it(t))return F>0&&h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.ZOOM_END_EVENT),F=0,void(S=g);let e=h.getZoom(),i=e-et(t)*e/1e4*h.zoomSpeed;h.setZoom(i);let n=i/f;R.subVectors(D,N).multiplyScalar(1-n),h.setPosition(N.x+R.x,N.y+R.y),h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.CHANGE_EVENT)}function rt(t){if(!1!==h.enabled){if(Pt(t),t.preventDefault(),S==_&&h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.ZOOM_END_EVENT),t.button===h.mouseButtons.ORBIT){if(!1===h.enableRotate)return;Z(t),S=m}else t.button===h.mouseButtons.PAN&&(h.enablePan?(J(),S=y):h.enablePedestal&&(K(t),S=E));S!==g&&(h.canvas.addEventListener("mousemove",ot,!1),window.addEventListener("mouseup",at,!1),window.addEventListener("mouseout",at,!1))}}function ot(t){if(!1!==h.enabled)if(t.preventDefault(),Pt(t),S===m){if(!1===h.enableRotate)return;$(t)}else if(S===y){if(!1===h.enablePan)return;tt()}else S===_?(k=!0,S=g):S===E&&Q(t)}function at(){if(!1!==h.enabled){switch(document.removeEventListener("mousemove",ot,!1),window.removeEventListener("mouseup",at,!1),window.removeEventListener("mouseout",at,!1),S){case y:h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.PAN_END_EVENT),h.dispatcher.dispatchEvent(h.INTERACTION_EVENTS.USER_PAN_END_EVENT);break;case v:h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.ZOOM_END_EVENT),h.dispatcher.dispatchEvent(h.INTERACTION_EVENTS.USER_DOLLY_END_EVENT);break;case m:h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.ROTATE_END_EVENT),h.dispatcher.dispatchEvent(h.INTERACTION_EVENTS.USER_ROTATE_END_EVENT);break;case E:h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.PEDESTAL_END_EVENT),h.dispatcher.dispatchEvent(h.INTERACTION_EVENTS.USER_PEDESTAL_END_EVENT)}S=g}}(0,r.a)(Y,"completeTween"),this.cancelAnimation=function(){let t=Array.from(X),e=t[t.length-1];7===e.state&&h.dispatcher.dispatchEvent({type:h.CAMERA_EVENTS.MULTI_CANCEL_EVENT.type,message:{zooming:!0,rotating:!0,tilting:!0}}),Y(e)},this.animateCamera=function(t,e,i,r,a,s){let l={mode:GQ.cancel,...s},u={},c={},p=h.getPosition();if(null!=t.position&&(void 0!==t.position.x&&(u.x=p.x,c.x=t.position.x),void 0!==t.position.y&&(u.y=p.y,c.y=t.position.y),void 0!==t.position.z&&(u.z=p.z,c.z=t.position.z)),void 0!==t.zoom&&(u.zoom=U?Math.min(Math.max(h.getZoom(),h.getZoomScaledMin()),h.getZoomScaledMax()):h.getZoom(),h.viewState!==oQ.MULTI_FLOOR&&U?c.zoom=Math.min(Math.max(t.zoom,h.getZoomScaledMin()),h.getZoomScaledMax()):c.zoom=t.zoom),void 0!==t.rotation){let e=u.rotation=h.getRotation(),i=t.rotation%(2*Math.PI),n=i-e;if(Math.abs(n)>Math.PI){let t=n<0?1:-1;c.rotation=i+2*Math.PI*t}else c.rotation=i}void 0!==t.tilt&&(u.tilt=h.getTilt(),h.viewState!==oQ.MULTI_FLOOR&&U?c.tilt=Math.max(Math.min(t.tilt,h.maxTilt),h.minTilt):c.tilt=t.tilt);let d=u.zoom!==c.zoom,f=u.rotation!==c.rotation,g=u.tilt!==c.tilt;var m=new qQ.default.Tween(u).to(c,n.b.env.TESTING?0:e).onUpdate(function(t){h.setMulti({x:t.x,y:t.y,z:t.z},t.zoom,t.rotation,t.tilt)}).onComplete(function(){r&&r(),Y(m),h.dispatcher.dispatchEvent({type:h.CAMERA_EVENTS.MULTI_END_EVENT.type,message:{zooming:d,rotating:f,tilting:g}})}).onStart(function(){7!=S&&(S=7,m.state=7,h.dispatcher.dispatchEvent({type:h.CAMERA_EVENTS.MULTI_START_EVENT.type,message:{zooming:d,rotating:f,tilting:g}})),h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.CHANGE_EVENT)});let v=Array.from(X),y=v[v.length-1],_=!1;return null!=y&&(l.mode===GQ.chain?(_=!0,y.chain(m)):(Y(y),"function"==typeof a&&a(),y=null)),X.add(m),i?m.easing(i):m.easing(qQ.default.Easing.Quadratic.In),!t.doNotAutoStart&&!_&&(m.start(),o.tryRendering()),m._mMapAnimation=!0,m},this.setMulti=function(t,e,i,n){S==g&&h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.MULTI_START_EVENT);let r=!1;null!=t&&(void 0!==t.x&&!isNaN(t.x)&&(h.orbit.position.x=t.x,r=!0),void 0!==t.y&&!isNaN(t.y)&&(h.orbit.position.y=t.y,r=!0),void 0!==t.z&&!isNaN(t.z)&&this.setPedestal(t.z)),r&&h.dispatcher.dispatchEvent(h.UPDATE_EVENTS.POSITION_UPDATED_EVENT);let o={zooming:!1,tilting:e,rotating:!1};if(void 0!==e&&!isNaN(e)){let t=U?Math.min(Math.max(e,h.getZoomScaledMin()),h.getZoomScaledMax()):e;t!==h.camera.position.z&&(o.zooming=!0,h.camera.position.z=t,h.dispatcher.dispatchEvent(h.UPDATE_EVENTS.ZOOM_UPDATED_EVENT),h.viewState===oQ.MULTI_FLOOR?e>jQ&&(h.camera.near=e-jQ,h.camera.far=e+jQ):(h.camera.near=e/l,h.camera.far=e*l),h.camera.updateProjectionMatrix())}if(void 0!==i&&!isNaN(i)&&i!==h.orbit.rotation.z&&(o.rotating=!0,h.orbit.rotation.z=i,h.dispatcher.dispatchEvent(h.UPDATE_EVENTS.ROTATION_UPDATED_EVENT)),void 0!==n&&!isNaN(n)){let t=U?Math.max(Math.min(n,h.maxTilt),h.minTilt):n;t!==h.elevation.rotation.x&&(o.tilting=!0,h.elevation.rotation.x=t,h.dispatcher.dispatchEvent(h.UPDATE_EVENTS.TILT_UPDATED_EVENT))}h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.CHANGE_EVENT),S==g&&h.dispatcher.dispatchEvent({type:h.CAMERA_EVENTS.MULTI_END_EVENT.type,message:o})},(0,r.a)(Z,"handleMouseDownRotate"),(0,r.a)(J,"handleMouseDownPan"),(0,r.a)(K,"handleMouseDownPedestal"),(0,r.a)(Q,"handleMouseMovePedestal"),(0,r.a)($,"handleMouseMoveRotate"),(0,r.a)(tt,"handleMouseMovePan"),this.getProjectionScaleFactor=Fy,this.postRender=function(){(S==y||S==w)&&(d.setFromCamera(T,t),(a=d.intersectObject(p,!1)[0])&&(O.set(a.point.x,a.point.y),N.set(h.orbit.position.x,h.orbit.position.y))),S==_&&k&&(k=!1,f=h.getZoom(),D=At(T),N.set(h.orbit.position.x,h.orbit.position.y)),7==S&&0==W()&&(S=g,h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.MULTI_END_EVENT))},(0,r.a)(et,"scrollDelta"),(0,r.a)(it,"canScrollZoom"),(0,r.a)(nt,"handleMouseWheel"),(0,r.a)(rt,"onMouseDown"),(0,r.a)(ot,"onMouseMove"),(0,r.a)(at,"onMouseUp");let st=null;function lt(t){!1===h.enabled||!1===h.enableZoom||S!==g&&S!==_||(t.preventDefault(),t.stopPropagation(),Pt(t),it(t)&&(F=B.getElapsedTime(),h.dispatchUserZoomEvent()),S!=_&&it(t)&&(h.canvas.addEventListener("mousemove",ot,!1),S=_,f=h.getZoom(),D=At(T),N.set(h.orbit.position.x,h.orbit.position.y),h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.ZOOM_START_EVENT)),null!=st&&clearTimeout(st),st=setTimeout(()=>{h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.ZOOM_END_EVENT)},50),nt(t))}function ht(t){let e=At(t.x?t:C[0]);O.set(e.x,e.y),N.set(h.orbit.position.x,h.orbit.position.y),h.dispatcher.dispatchEvent(h.INTERACTION_EVENTS.USER_PAN_START_EVENT),h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.PAN_START_EVENT)}function ut(t){let e=At(t.x?t:C[0]);q.set(e.x,e.y),R.subVectors(q,O),h.setPosition(N.x-R.x,N.y-R.y),h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.CHANGE_EVENT)}function ct(){let t=C[0].x-C[1].x,e=C[0].y-C[1].y;f=h.getZoom();let i={x:C[0].x-t/2,y:C[0].y-e/2};D=At(i),h.orbit.updateMatrixWorld(),h.touchAnchor1=new QK(C[0],h.camera,p),h.touchAnchor2=new QK(C[1],h.camera,p),N.set(h.orbit.position.x,h.orbit.position.y),h.dispatcher.dispatchEvent(h.INTERACTION_EVENTS.USER_DOLLY_START_EVENT),h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.MULTI_START_EVENT)}function pt(){let t=h.touchInputs.first,e=h.touchInputs.second;h.touchAnchor1.viewCoordinate={x:t.x,y:t.y},h.touchAnchor2.viewCoordinate={x:e.x,y:e.y};let i=Et(h.touchAnchor1,h.touchAnchor2);i&&Mt(i),h.orbit.updateMatrixWorld(),h.touchAnchor1.updateAnchorState(h.camera,t),h.touchAnchor2.updateAnchorState(h.camera,e)}function dt(t){P.set(t.touches[1].clientX,t.touches[1].clientY),h.dispatcher.dispatchEvent(h.INTERACTION_EVENTS.USER_TILT_START_EVENT),h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.ROTATE_START_EVENT)}function ft(t){I.set(t.touches[1].clientX,t.touches[1].clientY),L.subVectors(I,P),h.setTilt(h.getTilt()-L.y/h.rotateSpeed),P.copy(I)}function gt(t){K(t.touches[0])}function mt(t){Q(t.touches[0])}function vt(){S===x||S===b?h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.MULTI_END_EVENT):S===w&&h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.PAN_END_EVENT)}function yt(t){if(!1!==h.enabled)switch(Ct(t),It(t),t.touches.length){case 1:h.enablePedestal?(gt(t),S=M):h.enablePan&&(ht(t),S=w);break;case 2:h.touchInputs=new nQ(C[0],C[1]);break;default:S=g}}function _t(t){if(!1!==h.enabled)switch(It(t),t.touches.length){case 2:t.preventDefault(),t.stopPropagation();let e={...h.touchInputs.first},i={...h.touchInputs.second},n=new Tr(C[0].x,C[0].y),r=new Tr(C[1].x,C[1].y);if(h.touchInputs.update(C[0],C[1]),h.enableRotate&&S===x)ft(t);else if(S===b)pt();else if(h.touchInputs.totalDistance>.05&&S!==b){let o=e.y<n.y&&i.y<r.y,a=e.y>n.y&&i.y>r.y;h.enableRotate&&S!==x&&(a||o)?(dt(t),S=x):(ct(),S=b)}break;case 1:(h.enablePedestal||h.enablePan)&&(t.preventDefault(),t.stopPropagation()),h.enablePedestal&&S===M?mt(t):h.enablePan&&S===w&&ut(t);break;default:S=g}}function xt(t){if(!1!==h.enabled){switch(vt(),S){case y:case w:h.dispatcher.dispatchEvent(h.INTERACTION_EVENTS.USER_PAN_END_EVENT);break;case x:h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.PAN_END_EVENT),h.dispatcher.dispatchEvent(h.INTERACTION_EVENTS.USER_TILT_END_EVENT);break;case v:case b:h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.ZOOM_END_EVENT),h.dispatcher.dispatchEvent(h.INTERACTION_EVENTS.USER_DOLLY_END_EVENT);break;case m:h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.ROTATE_END_EVENT),h.dispatcher.dispatchEvent(h.INTERACTION_EVENTS.USER_ROTATE_END_EVENT);break;case E:case M:h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.PEDESTAL_END_EVENT),h.dispatcher.dispatchEvent(h.INTERACTION_EVENTS.USER_PEDESTAL_END_EVENT)}S=g}}function bt(t){t.preventDefault()}function wt(t,e){return(e-t+Math.PI)%(2*Math.PI)+2*Math.PI%(2*Math.PI)-Math.PI}function Et(t,e){h.orbit.updateMatrixWorld(),h.camera.updateProjectionMatrix();let i=h.camera.projectionMatrix.clone(),n=t.worldCoordinate,o=e.worldCoordinate,a=t.reUnproject(),s=e.reUnproject();if(!a||!s)return null;let l=t.viewCoordinate,u=e.viewCoordinate,c=o.x-n.x,p=o.y-n.y,d=Math.atan2(p,c),f=s.x-a.x,g=s.y-a.y,m=wt(d,Math.atan2(g,f)),v=new Go;v.makeRotationZ(-m);let y=v.clone();y.multiply(t.snapHolderMatrix);let _=(0,r.a)((t,e,i)=>t.elements[4*(e-1)+i-1],"m"),x=_(i,1,1)*_(y,1,1)-l.x*_(i,3,4)*_(y,3,1),b=_(i,1,1)*_(y,1,2)-l.x*_(i,3,4)*_(y,3,2),w=_(i,1,1)*_(y,1,3)-l.x*_(i,3,4)*_(y,3,3),E=n.x*x+n.y*b+n.z*w,M=_(i,2,2)*_(y,2,1)-l.y*_(i,3,4)*_(y,3,1),S=_(i,2,2)*_(y,2,2)-l.y*_(i,3,4)*_(y,3,2),T=_(i,2,2)*_(y,2,3)-l.y*_(i,3,4)*_(y,3,3),C=n.x*M+n.y*S+n.z*T,A=_(i,1,1)*_(y,1,1)-u.x*_(i,3,4)*_(y,3,1),P=_(i,1,1)*_(y,1,2)-u.x*_(i,3,4)*_(y,3,2),I=_(i,1,1)*_(y,1,3)-u.x*_(i,3,4)*_(y,3,3),L=o.x*A+o.y*P+o.z*I,O=_(i,2,2)*_(y,2,1)-u.y*_(i,3,4)*_(y,3,1),N=_(i,2,2)*_(y,2,2)-u.y*_(i,3,4)*_(y,3,2),q=_(i,2,2)*_(y,2,3)-u.y*_(i,3,4)*_(y,3,3),R=o.x*O+o.y*N+o.z*q,D=Math.abs(A-x),k=Math.abs(P-b),B=Math.abs(I-w),F=Math.abs(A-M),U=Math.abs(P-S),z=Math.abs(I-T),V=Math.abs(O-x),j=Math.abs(N-b),G=Math.abs(q-w),H=Math.abs(O-M),W=Math.abs(N-S),X=Math.abs(q-T);Math.min(D+k+B,F+U+z)<Math.min(V+j+G,H+W+X)&&(A=O,P=N,I=q,L=R);let Y=M*w-x*T,Z=S*w-b*T,J=C*w-E*T,K=A*T-M*I,Q=P*T-S*I,$=L*T-C*I,tt=($*Z-J*Q)/(K*Z-Y*Q),et=($*Y-J*K)/(Q*Y-Z*K),it=S*x-b*M,nt=P*M-S*A,rt=((L*M-C*A)*it-(C*x-E*M)*nt)/((I*M-T*A)*it-(T*x-w*M)*nt),ot=y.clone();return ot.elements[12]=tt,ot.elements[13]=et,ot.elements[14]=rt,rt>0?ot:null}function Mt(t){h.orbit.updateMatrixWorld();let e=new ea;e.setFromRotationMatrix(t,"ZYX");let i=(t.elements[14]-p.position.z)/Math.cos(e.x),n=e.z,r=new ho(0,0,1);r.applyEuler(e),r.setLength(i);let o=new ho;o.setFromMatrixPosition(t),o.sub(r),h.enablePan&&h.setPosition(o.x,o.y),h.enableZoom&&h.setZoom(i),h.enableRotate&&h.setRotation(n)}function St(t,e){return{x:e.offsetX,y:e.offsetY}}function Tt(t,e){return{x:e.clientX-A.offsetLeft,y:e.clientY-A.offsetTop}}function Ct(t){let e=h.canvas;A.offsetLeft=e.getBoundingClientRect().left,A.offsetTop=e.getBoundingClientRect().top}function At(e){d.setFromCamera(e,t);let i=d.intersectObject(p,!1)[0];return i?i.point:new ho}function Pt(t){let e=St(h.canvas,t);return T.x=e.x/h.canvas.width*o.resolutionScale*2-1,T.y=-e.y/h.canvas.height*o.resolutionScale*2+1,T}function It(t){C=[];for(let e=0,i=t.touches.length;e<i;e++){let i=t.touches[e],n=Tt(h.canvas,i);C.push(new Tr(n.x/h.canvas.width*o.resolutionScale*2-1,-n.y/h.canvas.height*o.resolutionScale*2+1))}T=C[0]}(0,r.a)(lt,"onMouseWheel"),(0,r.a)(ht,"handleTouchStartPan"),(0,r.a)(ut,"handleTouchMovePan"),(0,r.a)(ct,"handleTouchStartDolly"),(0,r.a)(pt,"handleTouchMoveDolly"),(0,r.a)(dt,"handleTouchStartTilt"),(0,r.a)(ft,"handleTouchMoveTilt"),(0,r.a)(gt,"handleTouchStartPedestal"),(0,r.a)(mt,"handleTouchMovePedestal"),(0,r.a)(vt,"handleTouchEnd"),(0,r.a)(yt,"onTouchStart"),(0,r.a)(_t,"onTouchMove"),(0,r.a)(xt,"onTouchEnd"),(0,r.a)(bt,"onContextMenu"),(0,r.a)(wt,"differenceBetweenAngles"),(0,r.a)(Et,"makeTransformFromTouchAnchors"),(0,r.a)(Mt,"setCameraFromTransformMatrix"),(0,r.a)(St,"getMousePos"),(0,r.a)(Tt,"getTouchPos"),(0,r.a)(Ct,"updateTouchOrigin"),(0,r.a)(At,"raycastToFloor"),(0,r.a)(Pt,"mouseToScene"),(0,r.a)(It,"touchToScene"),this.update=function(){qQ.default.update(),F>0&&S==_&&B.getElapsedTime()-F>.2&&(F=0,S=g,h.dispatcher.dispatchEvent(h.CAMERA_EVENTS.ZOOM_END_EVENT),h.canvas.removeEventListener("mousemove",ot,!1))};let Lt=!1;this.dispatchUserZoomDebounced=ky(()=>{Lt=!1,h.dispatcher.dispatchEvent(h.INTERACTION_EVENTS.USER_ZOOM_END_EVENT)},250),this.dispatchUserZoomEvent=function(){Lt||(h.dispatcher.dispatchEvent(h.INTERACTION_EVENTS.USER_ZOOM_START_EVENT),Lt=!0),h.dispatchUserZoomDebounced()},this.dispose=function(){for(let t in this.INTERACTION_EVENTS){let e=this.INTERACTION_EVENTS[t];e.type.endsWith("Start")&&h.dispatcher.removeEventListener(e.type,V)}for(let t in this.INTERACTION_EVENTS){let e=this.INTERACTION_EVENTS[t];e.type.endsWith("End")&&h.dispatcher.removeEventListener(e.type,j)}h.canvas.removeEventListener("contextmenu",bt,!1),h.canvas.removeEventListener("mousedown",rt,!1),h.canvas.removeEventListener("wheel",lt,{passive:!1}),h.canvas.removeEventListener("touchstart",yt,!1),h.canvas.removeEventListener("touchend",xt,!1),h.canvas.removeEventListener("touchmove",_t,!1),h.canvas.removeEventListener("mousemove",ot,!1),window.removeEventListener("mouseup",at,!1),window.removeEventListener("mouseout",at,!1),i.remove(p),h.dispatcher._listeners={}},this.canvas.addEventListener("contextmenu",bt,!1),this.canvas.addEventListener("mousedown",rt,!1),this.canvas.addEventListener("wheel",lt,{passive:!1}),this.canvas.addEventListener("touchstart",yt,!1),this.canvas.addEventListener("touchend",xt,!1),this.canvas.addEventListener("touchmove",_t,!1)},"CameraControls"),XQ=WQ,YQ=(t=>(t.performance="Performance",t.low="Low",t.medium="Medium",t.high="High",t.ultra="Ultra",t))(YQ||{}),ZQ=class extends HZ{constructor(t){super("CustomRenderPass"),(0,r.f)(this,"effectComposer"),(0,r.f)(this,"clearPass"),this.renderToScreen=!1,this.needsSwap=!1,this.effectComposer=t,this.fullscreenMaterial=new Us({uniforms:t.options.compositeUniforms,vertexShader:WK,fragmentShader:JK}),this.clearPass=new ZZ}render(t,e,i,n,r){let o=this.fullscreenMaterial.uniforms;null!==e&&void 0!==o&&void 0!==o.inputBuffer&&(o.inputBuffer.value=e.texture),this.clearPass.render(t,e,i,n,r),t.setRenderTarget(this.renderToScreen?null:e),t.render(this.scene,this.camera)}initialize(t,e,i){void 0!==i&&i!==Ci&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}};(0,r.a)(ZQ,"CustomRenderPass");var JQ=ZQ,KQ=class extends jK{constructor(t,e){let{scene:i,camera:n,renderer:o}=t;super(i,n,o.width,o.height),(0,r.f)(this,"effectComposer"),(0,r.f)(this,"cachePass"),this.effectComposer=t;let a=new Us({uniforms:{colorTexture:{value:this.outputTargetInternal.texture}},vertexShader:WK,fragmentShader:XK});this.cachePass=new _J(a),Object.assign(this.configuration,e)}setAOConfiguration(t){Object.assign(this.configuration,t)}setQualityMode(t){let e=YQ[t.toLowerCase()];e||(e="Performance"),super.setQualityMode(e)}get distanceFalloff(){if(!this.effectComposer.renderer.core.controls)return 0;let t=this.effectComposer.renderer.core.controls.getZoomLevel();return(Mr.clamp(t,FQ,UQ)-FQ)/(UQ-FQ)*.2}initialize(t,e,i){this.cachePass.initialize(t,e,i),super.initialize(t,e,i)}render(t,e,i,n,r){var o;let a=null==(o=this.effectComposer.options.compositeUniforms)?void 0:o.staticSceneDepthTexture.value;a&&!a.userData.needsAmbientOcclusionUpdate&&this.outputTargetInternal?this.cachePass.render(t,e,i,n,r):(this.configuration.distanceFalloff=this.distanceFalloff,super.render(t,e,i,n,r),a&&(a.userData.needsAmbientOcclusionUpdate=!1))}};(0,r.a)(KQ,"AmbientOcclusionPass");var QQ=KQ,$Q=class extends mJ{constructor(t,...e){super(t,...e),(0,r.f)(this,"_effects"),this._effects=[...e]}getEffects(){return this._effects}setEffects(t){this._effects=t,super.setEffects(t)}};(0,r.a)($Q,"CustomEffectPass");var t$=$Q,e$=class{constructor(t,e){var i;(0,r.f)(this,"options",{antialias:!0,aoEnabled:!1,aoQuality:"medium",aoResolution:"half",compositeUniforms:void 0}),(0,r.f)(this,"isWebGL2"),(0,r.f)(this,"effectComposer"),(0,r.f)(this,"scene",null),(0,r.f)(this,"camera",null),(0,r.f)(this,"depthTexture"),(0,r.f)(this,"renderer"),(0,r.f)(this,"ambientOcclusionPass",null),this.isWebGL2=!!t.renderer.capabilities.isWebGL2,this.options=(0,HK.default)({},this.options,e),this.effectComposer=new EJ(t.renderer),this.effectComposer.multisampling=0,this.effectComposer.depthTexture=(null==(i=this.options.compositeUniforms)?void 0:i.staticSceneDepthTexture.value)||null,this.renderer=t}get initialized(){return!!this.effectComposer.passes.length}init(t,e){this.scene=t,this.camera=e;let i=this.getRenderPass();this.addPass(i,"RenderPass"),this.ambientOcclusionPass=this.getAmbientOcclusionPass(),this.addPass(this.ambientOcclusionPass,"AmbientOcclusionPass");let n=this.getCompositePass();this.addPass(n,"CompositeRenderPass");let r=this.getEffectsPass();this.addPass(r,"EffectsPass");let o=this.getFinalPass();this.addPass(o,"FinalPass")}render(){this.effectComposer.render()}setSize(t,e){this.effectComposer.setSize(t,e,!1)}getPassByName(t){return this.effectComposer.passes.find(({name:e})=>e===t)||null}getEffectByName(t){return this.getPassByName("EffectsPass").getEffects().find(e=>e.name===t)||null}setAmbientOcclusionConfiguration(t){var e;null==(e=this.ambientOcclusionPass)||e.setAOConfiguration(t)}setPolygonOutlineColor(t){let e=this.getEffectByName("OutlineEffect");t=new Ua(t),e.visibleEdgeColor=t,e.hiddenEdgeColor=t}addSelectionForOutline(t){this.getEffectByName("OutlineEffect").selection.add(t)}removeSelectionForOutline(t){this.getEffectByName("OutlineEffect").selection.delete(t)}addPass(t,e){t&&(t.name=e,this.effectComposer.addPass(t))}getRenderPass(){let t=this.options.compositeUniforms?new JQ(this):new tJ(this.scene,this.camera);return t.renderToScreen=!1,t.needsSwap=!1,t.needsDepthTexture=!0,t}getAmbientOcclusionPass(){let{aoResolution:t,aoEnabled:e,aoQuality:i}=this.options;if(!this.isWebGL2||!e)return null;let n=new QQ(this,{aoRadius:5,intensity:5,screenSpaceRadius:!0,halfRes:"half"===t});return n.setQualityMode(i),n.renderToScreen=!1,n.needsSwap=!0,n.needsDepthTexture=!0,n}getCompositePass(){if(!this.options.compositeUniforms)return null;let{staticSceneColorTexture:t,alwaysOnBottomSceneColorTexture:e,alwaysOnTopSceneColorTexture:i,...n}=this.options.compositeUniforms,r=new Us({uniforms:n,vertexShader:WK,fragmentShader:YK}),o=new _J(r);return o.renderToScreen=!1,o.needsSwap=!0,o.needsDepthTexture=!1,o}getEffectsPass(){let{compositeUniforms:t}=this.options,e=this.getAntialiasingEffect(),i=[];e&&i.push(e);let n=new CK(this.scene,this.camera,{multisampling:Math.min(4,this.renderer.renderer.capabilities.maxSamples),edgeStrength:10,visibleEdgeColor:16711680,hiddenEdgeColor:16711680,xRay:!0,blendFunction:gZ.ALPHA});i.push(n);let r=new t$(this.camera,...i);return r.renderToScreen=!t,r.needsSwap=!!t,r.needsDepthTexture=!0,r}getFinalPass(){if(!this.options.compositeUniforms)return null;let{alwaysOnBottomSceneColorTexture:t,alwaysOnTopSceneColorTexture:e,inputBuffer:i}=this.options.compositeUniforms,n=new Us({uniforms:{inputBuffer:i,alwaysOnBottomSceneColorTexture:t,alwaysOnTopSceneColorTexture:e},vertexShader:WK,fragmentShader:ZK}),r=new _J(n);return r.renderToScreen=!0,r.needsSwap=!1,r.needsDepthTexture=!1,r}getAntialiasingEffect(){let{antialias:t}=this.options;if(!t)return null;let e=new hK({blendFunction:gZ.SRC});return e.samples=8,e}};(0,r.a)(e$,"EffectComposer");var i$,n$=e$,r$=!1;r$&&((i$=new $Y.default).showPanel(0),document.body.appendChild(i$.dom));var o$=class{constructor(t){t.multiBufferRendering=t.multiBufferRendering||!1,this.contextLost=!1,this.implementation=this.getRenderer(t),this.onWebGLContextCreationError=t.onWebGLContextCreationError,this.onWebGLContextLost=t.onWebGLContextLost,this.onWebGLContextRestored=t.onWebGLContextRestored,this.webGLContextCreationErrorListener=this.domElement().addEventListener("webglcontextcreationerror",t=>this.reportWebGlContextCreationError(t)),this.webGLContextLostListener=this.domElement().addEventListener("webglcontextlost",t=>this.reportWebGlContextLost(t)),this.webGLContextRestoredListener=this.domElement().addEventListener("webglcontextrestored",t=>this.reportWebGLContextRestored(t));let e=t.backgroundColor;"string"==typeof e&&(e=new Ua(t.backgroundColor)),null==e&&(e=new Ua("#ffffff"));let i=t.backgroundAlpha;null==i&&(i=1),this.shouldConsiderAlpha=t.alpha||!1,this.antialias=t.antialias||!1,this.setBackgroundColor(e,i)}destroy(){this.domElement().removeEventListener("webglcontextcreationerror",this.webGLContextCreationErrorListener),this.domElement().removeEventListener("webglcontextlost",this.webGLContextLostListener),this.domElement().removeEventListener("webglcontextrestored",this.webGLContextRestoredListener),this.implementation.destroy()}render(t,e,i,n){this.implementation.render(t,e,i,n)}getMaxAnisotropy(){return this.implementation.renderer.capabilities.getMaxAnisotropy()}getBufferSize(){return this.implementation.renderer.getSize(new Tr)}getContext(){return this.implementation.renderer.getContext()}preloadTexture(t){this.implementation.renderer.initTexture(t)}setBufferSize(t,e){this.implementation.setBufferSize(t,e)}get backgroundColor(){return this.implementation.backgroundColor}get backgroundAlpha(){return this.implementation.backgroundAlpha}setBackgroundColor(t,e=1){this.shouldConsiderAlpha||(e=1),e=(e=void 0!==e?+e:1)>=0&&e<=1?e:1,this.implementation.setBackgroundColor(t,e)}setMapboxOutdoorContext(t){this.implementation.setMapboxOutdoorContext(t)}domElement(){return this.implementation.renderer.domElement}isAvailable(){return null!=this.implementation.renderer&&!this.contextLost}disposeOfRenderLists(){this.implementation.renderer.renderLists.dispose()}reportWebGlContextCreationError(t){this.onWebGLContextCreationError&&this.onWebGLContextCreationError(t)}reportWebGlContextLost(t){t.preventDefault(),this.onWebGLContextLost&&this.onWebGLContextLost(t),this.contextLost=!0}reportWebGLContextRestored(){this.onWebGLContextRestored&&this.onWebGLContextRestored(),this.contextLost=!1}getTargetWebGLVersion(t){let e=/(AppleWebKit)/.test(navigator.userAgent),i=/(Mac)/.test(navigator.platform),n=t.getExtension("WEBGL_debug_renderer_info"),r=/radeon\spro\s4\d\d|radeon\spro\s5\d\d/i.test(t.getParameter(n.UNMASKED_RENDERER_WEBGL));return e&&i&&r?1:2}getRenderer(t){let e=t.multiBufferRendering?u$:l$,i=new e(t),n=this.getTargetWebGLVersion(i.renderer.getContext());return 2===n?i:(i.destroy(),new e(t,n))}};(0,r.a)(o$,"Renderer");var a$=o$,s$=class{constructor(t,e=2){try{this.options=t;let i={alpha:t.alpha||!1,stencil:!0,outputEncoding:Nn,antialias:!1,powerPreference:"high-performance",preserveDrawingBuffer:!0};this.core=this.options.core,this.renderer=2===e?new Kd(i):new $d(i),this.effectComposer=new n$(this,this.options)}catch(e){t.onWebGLRendererError&&t.onWebGLRendererError(e)}this.backgroundColor=new Ua,this.backgroundAlpha=1,this.mapboxOutdoorContext=null}destroy(){this.renderer.dispose()}render(t,e,i,n){n.layers.enable(CF.STATIC),n.layers.enable(CF.ANIMATED),n.layers.enable(CF.ALWAYS_ON_TOP),r$&&i$.begin(),this.renderer.setClearColor(this.backgroundColor,this.backgroundAlpha),this.effectComposer.initialized||this.effectComposer.init(i,n),this.renderer.clear(),this.effectComposer.render(),r$&&i$.end(),null!=this.mapboxOutdoorContext&&(this.renderer.state.reset(),this.mapboxOutdoorContext.render({resolution:this.renderer.getSize(new Tr),camera:n}),this.renderer.state.reset())}setBufferSize(t,e){this.width=t,this.height=e,this.renderer.setSize(t,e,!1),this.effectComposer.setSize(t,e)}setBackgroundColor(t,e){this.backgroundColor=t,this.backgroundAlpha=e}setMapboxOutdoorContext(t){this.mapboxOutdoorContext=t}};(0,r.a)(s$,"SingleBufferRenderer");var l$=s$,h$=class{constructor(t,e=2){(0,r.f)(this,"effectComposer",null),(0,r.f)(this,"outdoorsVisible",!1);try{this.options=t;let i={alpha:t.alpha||!1,stencil:!0,antialias:!1,outputEncoding:Nn,powerPreference:"high-performance",preserveDrawingBuffer:!0};this.renderer=2===e?new Kd(i):new $d(i),this.core=this.options.core,this.journeyOpacity=t.xRayPath?.3:0,this.backgroundColor=new Ua,this.backgroundAlpha=1,this.mapboxOutdoorContext=null,this.staticSceneRenderTarget=new $r(this.renderer.width,this.renderer.height),this.populateRenderTarget(this.staticSceneRenderTarget),this.animatedSceneRenderTarget=new $r(this.renderer.width,this.renderer.height),this.populateRenderTarget(this.animatedSceneRenderTarget),this.alwaysOnTopSceneRenderTarget=new $r(this.renderer.width,this.renderer.height),this.populateRenderTarget(this.alwaysOnTopSceneRenderTarget),this.outdoorViewRenderTarget=new $r(this.renderer.width,this.renderer.height),this.createOutdoorViewTexture(),this.populateRenderTarget(this.outdoorViewRenderTarget),this.setupEffectComposer()}catch(e){t.onWebGLRendererError&&t.onWebGLRendererError(e)}}populateRenderTarget(t){t.texture.colorSpace=Nn,t.texture.format=Fi,t.texture.minFilter=bi,t.texture.magFilter=bi,t.texture.generateMipmaps=!1,t.stencilBuffer=!0,t.depthBuffer=!0,t.depthTexture=new Gd(this.renderer.width,this.renderer.height),t.depthTexture.type=Oi}createOutdoorViewTexture(){null!=this.outdoorViewTexture&&this.outdoorViewTexture.dispose(),this.outdoorViewTexture=new Zr,this.outdoorViewTexture.colorSpace=Nn,this.outdoorViewTextureProps=this.renderer.properties.get(this.outdoorViewTexture),this.outdoorViewRenderTarget.texture=this.outdoorViewTexture,null!=this.effectComposer&&this.outdoorsVisible&&(this.options.compositeUniforms.alwaysOnBottomSceneColorTexture.value=this.outdoorViewRenderTarget.texture)}setupEffectComposer(){this.options.compositeUniforms={animatedColorOpacity:new Wv(this.journeyOpacity),inputBuffer:new Wv(null),staticSceneColorTexture:new Wv(this.staticSceneRenderTarget.texture),staticSceneDepthTexture:new Wv(this.staticSceneRenderTarget.depthTexture),animatedSceneColorTexture:new Wv(this.animatedSceneRenderTarget.texture),animatedSceneDepthTexture:new Wv(this.animatedSceneRenderTarget.depthTexture),alwaysOnTopSceneColorTexture:new Wv(this.alwaysOnTopSceneRenderTarget.texture),alwaysOnBottomSceneColorTexture:new Wv(this.outdoorViewRenderTarget.texture)},this.effectComposer=new n$(this,this.options)}setOutdoorViewTexture(t){this.outdoorViewTextureProps.__webglTexture=t}destroy(){this.staticSceneRenderTarget.dispose(),this.animatedSceneRenderTarget.dispose(),this.alwaysOnTopSceneRenderTarget.dispose(),this.renderer.dispose()}renderComposite(t,e,i){i.layers.set(CF.STATIC),this.renderer.setRenderTarget(t),this.effectComposer.render()}renderToAnimatedBuffer(t,e){e.layers.set(CF.ANIMATED),this.renderer.setClearColor(new Ua,0),this.renderer.setRenderTarget(this.animatedSceneRenderTarget),this.renderer.clear(),this.renderer.render(t,e)}renderAnimated(t,e,i){this.renderToAnimatedBuffer(e,i),this.renderComposite(t,e,i)}renderToAlwaysOnTopBuffer(t,e){e.layers.set(CF.ALWAYS_ON_TOP),this.renderer.setClearColor(new Ua,0),this.renderer.setRenderTarget(this.alwaysOnTopSceneRenderTarget),this.renderer.clear(),this.renderer.render(t,e)}renderAlwaysOnTop(t,e,i){this.renderToAlwaysOnTopBuffer(e,i),this.renderComposite(t,e,i)}renderAll(t,e,i){r$&&i$.begin(),null!=this.outdoorViewController&&this.outdoorViewController.render(),this.renderer.state.reset(),i.layers.set(CF.STATIC),this.renderer.autoClear=!1,this.renderer.setClearColor(this.backgroundColor,this.outdoorViewController?0:this.backgroundAlpha),this.staticSceneRenderTarget.depthTexture.userData.needsAmbientOcclusionUpdate=!0,this.renderer.setRenderTarget(this.staticSceneRenderTarget),this.renderer.clear(),this.renderer.render(e,i),null!=this.mapboxOutdoorContext&&(this.renderer.state.reset(),this.mapboxOutdoorContext.render({resolution:this.renderer.getSize(new Tr),camera:i,renderTarget:this.staticSceneRenderTarget}),this.renderer.state.reset()),this.renderToAnimatedBuffer(e,i),this.renderToAlwaysOnTopBuffer(e,i),this.renderComposite(t,e,i),r$&&i$.end()}render(t,e,i,n){this.effectComposer.initialized||this.effectComposer.init(i,n),t===YB.ANIMATED?(this.renderer.state.reset(),this.renderAnimated(e,i,n)):t===YB.ALWAYS_ON_TOP?(this.renderer.state.reset(),this.renderAlwaysOnTop(e,i,n)):t===YB.COMPOSITE?(this.renderer.state.reset(),this.renderComposite(e,i,n)):t===YB.ALL?this.renderAll(e,i,n):vy.error("Renderer.render called with invalid renderTask")}setBufferSize(t,e){this.width=t,this.height=e,this.renderer.setSize(t,e,!1),this.effectComposer.setSize(t,e),this.staticSceneRenderTarget.setSize(t,e),this.animatedSceneRenderTarget.setSize(t,e),this.alwaysOnTopSceneRenderTarget.setSize(t,e),this.outdoorViewRenderTarget.width=t,this.outdoorViewRenderTarget.height=e,this.outdoorViewRenderTarget.viewport.set(0,0,t,e),this.outdoorViewRenderTarget.scissor.set(0,0,t,e),this.createOutdoorViewTexture()}setBackgroundColor(t,e){this.backgroundColor=t,this.backgroundAlpha=e}setMapboxOutdoorContext(t){this.mapboxOutdoorContext=t}setOutdoorViewController(t){this.outdoorsVisible=!0,this.outdoorViewController=t}toggleOutdoorViewVisiblity(t){this.outdoorsVisible=t,this.options.compositeUniforms.alwaysOnBottomSceneColorTexture.value=t?this.outdoorViewRenderTarget.texture:null}};(0,r.a)(h$,"MultiBufferRenderer");var u$=h$;(0,n.a)();var c$=(0,r.e)(fe()),p$=!1,d$=class{constructor(t,e){(0,r.f)(this,"_attribution"),(0,r.f)(this,"core"),(0,r.f)(this,"map"),(0,r.f)(this,"enabled",!1),(0,r.f)(this,"hidden",!1),(0,r.f)(this,"url","https://tiles-cdn.mappedin.com/styles/mappedin/style.json"),(0,r.f)(this,"authURL","https://auth.mappedin.com/oauth2/token"),(0,r.f)(this,"headers"),(0,r.f)(this,"customAttribution"),(0,r.f)(this,"attributionPosition"),(0,r.f)(this,"loaded",!1),(0,r.f)(this,"module"),(0,r.f)(this,"getRequestHeaders",(0,r.a)(async()=>{if(this.headers)return this.headers;{let{authURL:t}=this,e=await this.fetchToken(t),{access_token:i}=await e.json();return{"x-mappedin-tiles-key":i}}},"getRequestHeaders")),(0,r.f)(this,"lastCameraPosition"),this.core=t,this.url=(null==e?void 0:e.url)||this.url,this.authURL=(null==e?void 0:e.authURL)||this.authURL,this.headers=null==e?void 0:e.headers,this.attributionPosition=null==e?void 0:e.attributionPosition,(null==e?void 0:e.customAttribution)instanceof Array?(this.customAttribution=[],null==e||e.customAttribution.forEach(t=>{this.customAttribution.push((0,c$.sanitize)(t))})):null!=e&&e.customAttribution&&(this.customAttribution=(0,c$.sanitize)(e.customAttribution))}fetchToken(t){return fetch(t,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({grant_type:"client_credentials",client_id:this.core.venue.options.clientId,client_secret:this.core.venue.options.clientSecret})})}async load(){this.enabled=!0;try{let[e,i]=await Promise.all([require("_bundle_loader")(require.resolve("./outdoor-context-4DYDRFJG.js")),this.getRequestHeaders()]);this.module=e;let{Map:n,Marker:r,AttributionControl:o}=this.module.default,a=document.createElement("div");Object.assign(a.style,{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",pointerEvents:"none"}),this.core.container.appendChild(a);let s=this.core.referenceMap.georeference[0].target.x,l=this.core.referenceMap.georeference[0].target.y,h=this.core.referenceMap.georeference[2].target.x,u=this.core.referenceMap.georeference[2].target.y,c=new py(s,l),p=new py(h,u),d=c.midpointTo(p),f=-Mr.radToDeg(this.core.controls.getRotation()+this.core.referenceMap.getNorth()),g=Mr.radToDeg(this.core.controls.getTilt()),m=this.core.controls.getZoomLevel(),v={canvas:this.core.renderer.domElement(),canvasContainer:a,container:this.core.container,style:this.url,center:[d.lon,d.lat],zoom:m,bearing:f,pitch:g,attributionControl:!1,transformRequest:t=>({url:t,headers:i})};this.map=new n(v),this._attribution=new o({collapse:!1,position:this.attributionPosition,customAttribution:this.customAttribution}),this.core.container.appendChild(this._attribution.onAdd(this.map)),this._attribution&&this.hidden&&this._attribution.hide(),this.map.on("error",t=>{vy.error(t)}),this.map.transform.getElevation=(()=>this.core.controls.getPedestal()*this.core.referenceMap.scale),this.core.renderer.implementation.setOutdoorViewTexture(this.map.painter.webGLRenderTargetTexture),this.map.on("load",()=>{if(this.core.tryRendering(),p$){let{x:t,y:e}=this.core.referenceMap.georeference[0].target,{x:i,y:n}=this.core.referenceMap.georeference[2].target,o=this.core.referenceMap.createCoordinate(t,e),a=this.core.referenceMap.createCoordinate(i,n);this.core.markers.add(o,"!",{rank:4}),this.core.markers.add(a,"!",{rank:4}),(new r).setLngLat([e,t]).addTo(this.map),(new r).setLngLat([n,i]).addTo(this.map)}}),this.map.on("resize",()=>{this.core.renderer.implementation.setOutdoorViewTexture(this.map.painter.webGLRenderTargetTexture)}),this.map.on("render",()=>{}),this.map.on("idle",()=>{this.loaded||(this.loaded=!0,this.core.publish(31)),this.core.tryRendering(YB.COMPOSITE)})}catch(t){this.enabled=!1,vy.error(t)}}get attributions(){return this._attribution?this._attribution.attributions:[]}hide(){this.core.renderer.implementation.toggleOutdoorViewVisiblity(!1),this._attribution&&this._attribution.hide(),this.core.tryRendering(YB.COMPOSITE),this.lastCameraPosition=null,this.hidden=!0}show(){this.core.renderer.implementation.toggleOutdoorViewVisiblity(!0),this._attribution&&this._attribution.show(),this.core.tryRendering(YB.COMPOSITE),this.hidden=!1}resize(){this.enabled&&null!=this.map&&this.map.resize()}render(){if(!this.enabled||null==this.map)return;let{lat:t,lon:e}=this.core.controls.getPositionCoordinate(),i={center:{lat:t,lon:e},bearing:-Mr.radToDeg(this.core.controls.getRotation()+this.core.referenceMap.getNorth()),pitch:Mr.radToDeg(this.core.controls.getTilt()),zoom:this.core.controls.getZoomLevel()},n=this.core.controls.getPedestal()*this.core.referenceMap.scale;this.lastCameraPosition&&this.lastCameraPosition.center.lat===i.center.lat&&this.lastCameraPosition.center.lon===i.center.lon&&this.lastCameraPosition.bearing===i.bearing&&this.lastCameraPosition.pitch===i.pitch&&this.lastCameraPosition.zoom===i.zoom&&this.lastCameraPosition.elevation===n||(this.map.jumpTo(i),this.map.triggerRepaintSync(),this.lastCameraPosition={...i,elevation:n})}setStyle(t){this.map.setStyle(t),this.map.triggerRepaintSync()}setAttributionPosition(t){this._attribution&&this._attribution.setPosition(t)}};(0,r.a)(d$,"OutdoorViewController");var f$=d$,g$=f$;(0,n.a)();var m$,v$,y$="#ff0000",_$=["fill","fill-opacity"],x$=!1,b$=class{constructor(t){(0,r.h)(this,m$,void 0),(0,r.h)(this,v$,{}),(0,r.i)(this,m$,t),(0,r.g)(this,m$).on(32,t=>{this.clearCache(t)}),(0,r.g)(this,m$).controls.dispatcher.addEventListener((0,r.g)(this,m$).controls.CAMERA_EVENTS.CHANGE_EVENT.type,()=>this.runInterpolations()),(0,r.g)(this,m$).on(7,()=>this.runInterpolations())}clearCache(t){(0,r.g)(this,v$)[t.id]=void 0}showLayers(t){if(!(0,r.g)(this,m$).currentMap)return;let e=(0,r.g)(this,m$).mapObjects.get((0,r.g)(this,m$).currentMap);null!=e&&(e.renderLayerGroup(t,[]),(0,r.g)(this,m$).publish(32,e.mapClass),(0,r.g)(this,m$).tryRendering())}async getAllLayersForMap(t){let e=(0,r.g)(this,m$).mapObjects.get(t.id);return e?(await e.load(),this.processMapObjectLayers(e)):{}}processMapObjectLayers(t){let e=Array.from(t.loadedLayerNames),i={};return e.forEach(t=>{i[t]=!1}),t.layerGroups.forEach(t=>{t.isVisible&&t.layers.forEach(t=>{i[t]=!0})}),i}getVisibleLayersForLoadedMap(t){if(!(0,r.g)(this,m$).currentMap)return[];if((0,r.g)(this,v$)[t.id])return(0,r.g)(this,v$)[t.id];let e=(0,r.g)(this,m$).mapObjects.get(t.id),i=[],n=this.processMapObjectLayers(e);for(let r in n)n[r]&&i.push(r);return(0,r.g)(this,v$)[t.id]=i,i}runInterpolations(){let t=(0,r.g)(this,m$).controls.getZoomLevel();(0,r.g)(this,m$).visibleMapObjectsInCurrentScene.forEach(e=>{e.layerGroups.forEach(e=>{if(null!=e.interpolationFn){let i=e.interpolationFn(t);e.setOpacity(i),e.isVisible=1===i}})})}async addGeoJSONLayer(t,e){let i=(0,r.g)(this,m$).mapObjects.get((0,r.g)(this,m$).currentMap);if(null!=(await this.getAllLayersForMap(null==i?void 0:i.mapClass))[t])return vy.error('"'.concat(t,'" layer already exists, not adding')),Promise.resolve();if("FeatureCollection"===e.type){let n=[];for(let i of e.features){let e=this.convertFeatureToElement(t,i);await e.load(),n.push(e)}let o=null==i?void 0:i.processLayerGroup(t,[t],[],!0,n);null==i||i.object.add(o.mergedObjectsGroup),(0,r.g)(this,m$).tryRendering()}else{let n=this.convertFeatureToElement(t,e);await n.load();let o=null==i?void 0:i.processLayerGroup(t,[t],[],!0,[n]);null==i||i.object.add(o.mergedObjectsGroup),(0,r.g)(this,m$).tryRendering()}}convertFeatureToElement(t,e){var i,n,o,a;x$&&Object.keys(e.properties||{}).forEach(t=>{_$.includes(t)||vy.warn("".concat(t," property not supported in GeoJSON layers"))});let s=(0,r.g)(this,m$).mapObjects.get((0,r.g)(this,m$).currentMap),l=s.mapClass,h={vertexes:[],layer:t,material:{color:null!=(n=null==(i=e.properties)?void 0:i.fill)?n:y$,opacity:null!=(a=null==(o=e.properties)?void 0:o["fill-opacity"])?a:1},geometry:{visible:!0,position:{z:1},scale:{z:0}}};for(let r=0;r<e.geometry.coordinates[0].length;r++){let[t,i]=e.geometry.coordinates[0][r],n=l.createCoordinate(i,t);h.vertexes.push({x:n.x,y:n.y,lat:i,lon:t})}let u=new iV(h,l,new Fd,void 0,void 0);return s.loadedElements.push(u),u}};m$=new WeakMap,v$=new WeakMap,(0,r.a)(b$,"LayerController");var w$=b$,E$=w$;(0,n.a)();var M$=(0,r.e)(ge()),S$=!1,T$=(0,r.a)(function({core:t,blueDotManager:e,controller:i}){var n,r,o,a;let s=bB.create({...null==(n=null==t?void 0:t.venue)?void 0:n.options,testMode:!(null!=(o=null==(r=null==t?void 0:t.venue)?void 0:r.options)&&o.emitAnalyticsEvents),userPosition:{...null==(a=i.userPosition)?void 0:a.coords}}),{stateMachine:l}=i,h=Dy(t.smartCollisionEngine.update,1e4),u=sF({isFollowing:!1,blueDotTooltips:[],zoomCondition:0,setBlueDotPosition(){if(e&&i.userPosition&&i.userMap){let t=2===l.state||3===l.state;e.update({coordinates:i.userPosition.coords,bearing:i.bearing,radius:t&&i.userPosition.coords.accuracy||0,mapId:i.userMap.id})}},showBlueDotBearing(){if(e&&i.userPosition&&i.userMap){let t=2===l.state||3===l.state;e.update({coordinates:i.userPosition.coords,bearing:i.bearing,radius:t&&i.userPosition.coords.accuracy||0,mapId:i.userMap.id})}},addGhostMarkers(){e&&i.userPosition&&i.userMap&&e.update({mode:yW.GHOST,coordinates:i.userPosition.coords,bearing:i.bearing,radius:i.userPosition.coords.accuracy,mapId:i.userMap.id})},addLocationUncertainMarkersAndTooltips(){e&&i.userPosition&&i.userMap&&e.update({mode:yW.GREY,coordinates:i.userPosition.coords,radius:0,mapId:i.userMap.id})},addBlueDotMarker(){e&&i.userPosition&&i.userMap&&e.update({mode:yW.BLUE,coordinates:i.userPosition.coords,bearing:i.bearing,radius:i.userPosition.coords.accuracy,mapId:i.userMap.id,baseColor:i.enableBlueDotOptions.baseColor})},removeTooltips(){u.blueDotTooltips.forEach(t.tooltips.removeTooltip),u.blueDotTooltips=[]},removeBlueDot(){e.cleanup()},centerBlueDot(){var e,n,r,o,a;if(!i.userPosition)return;let{latitude:s,longitude:l}=i.userPosition.coords;(null==(e=i.userMap)?void 0:e.id)!==t.currentMap&&null!=i.userMap&&t.setMapWithReason(i.userMap,"blue-dot-level-transition");let c=i.userMap.createCoordinate(s,l),p=t.getPositionLatLon(s,l),d=null!=t.currentPath&&i.enableBlueDotOptions.useRotationMode,f=t.controls.zoomFactor||1,g=(null==(r=null==(n=t.options.loadOptions)?void 0:n.zoomOverrides)?void 0:r.blueDotFollowingZoomFactor)||2.5,m=f*g;if(0===u.zoomCondition&&null!=(null==(a=null==(o=t.options.loadOptions)?void 0:o.zoomOverrides)?void 0:a.blueDotFollowingZoomFactor)){u.zoomCondition=1,S$=!0;let e=t.convertTo3DMapPosition({x:c.x,y:c.y});t.focusOn({points:[e],changeZoom:!0,duration:500,focusZoomFactor:m,callback:()=>{u.zoomCondition=2}}),S$=!1}else if(1!==this.zoomCondition&&d){let e=i.userMap;if(null==e)return;let n=t.currentPath,r=t.camera.rotation,o={x:p.x+e.width/2,y:-p.y+e.height/2},a=null==n?void 0:n.filter(t=>t.map.id===e.id);if(null!=a&&a.length){let t,i=(0,M$.default)(a,e._scale),n=IW(i,o);t=null!=n&&n.proportion&&n.proportion>.5?i[n.index||1]:i[n.index||0],r=LW(i,t)+Math.PI}let s=t.canvasHeight>t.canvasWidth&&t.canvasHeight>600&&t.canvasWidth>500,l=900,u=OW(p,r,g*t.controls.getZoomScaledMin(),s);t.controls.animateCamera({...u,duration:l}),h()}else 1!==this.zoomCondition&&(S$=!0,t.camera.focusOn({coordinates:[c]},{changeZoom:!1,duration:1e3}),S$=!1)},endFollowing(){u.isFollowing=!1,u.zoomCondition=0}}),c=null,p=!1;return t.on(22,()=>{!c&&p&&(c=setTimeout(()=>{u.endFollowing(),clearTimeout(c),c=null},60))}),t.on(26,()=>{S$||u.endFollowing()}),t.on(27,()=>{p=!0}),t.on(28,()=>{c&&(clearTimeout(c),c=null,p=!1)}),t.on(18,()=>{u.endFollowing()}),t.on("user-tilt-begin",()=>{u.endFollowing()}),t.on(20,()=>{u.endFollowing()}),i.on("userDataChanged",t=>{let{position:e,state:i}=t.newValue;switch(i){case 2:u.removeTooltips(),u.addGhostMarkers(),s.updateAnalyticsUserPosition({...e.coords}),s.trackBlueDotEvent(bB.BLUEDOT_EVENT.FOUND_POSITION),u.setBlueDotPosition(),u.showBlueDotBearing();break;case 3:u.removeTooltips(),u.addBlueDotMarker(),s.updateAnalyticsUserPosition({...e.coords}),s.trackBlueDotEvent(bB.BLUEDOT_EVENT.FOUND_FLOOR),u.setBlueDotPosition(),u.showBlueDotBearing();break;case 4:u.removeTooltips(),u.addLocationUncertainMarkersAndTooltips(),u.setBlueDotPosition(),u.showBlueDotBearing();break;default:u.removeTooltips(),u.removeBlueDot(),s.updateAnalyticsUserPosition(void 0)}let n=!0,r=!1;t.oldValue&&(n=t.oldValue.position&&t.newValue.position&&(e.coords.latitude!==t.oldValue.position.coords.latitude||e.coords.longitude!==t.oldValue.position.coords.longitude),r=t.oldValue.map!==t.newValue.map),u.isFollowing&&(n||r)&&u.centerBlueDot()}),u},"BlueDotUI"),C$=T$;(0,n.a)(),(0,n.a)();var A$=20,P$=14,I$=8,L$=72,O$=16,N$=12,q$=52,R$=4,D$=2,k$=8,B$=128,F$=320,U$=8,z$=2,V$=2/(Math.sqrt(5)+1)*360/6,j$=60,G$=5,H$=class{constructor(){this._element=document.createElement("div"),this._titleElement=document.createElement("select"),this._minimizeElement=document.createElement("button"),this._performancePanelElement=document.createElement("div"),this._performanceEntries=new Map,this._sortedPerformanceEntryNames=[];let t=document.createElement("option");t.value="Performance",t.innerHTML="Performance",t.selected="selected",this._titleElement.appendChild(t),this._titleElement.addEventListener("change",this._onCategoryChanged.bind(this)),this._overviewGraph=new J$({width:F$,height:B$,seriesList:[]}),this._controlPanels=new Map,this._sortedControlPanelNames=[],this._minimized=!1,this._element.appendChild(this._titleElement),this._element.appendChild(this._minimizeElement),this._element.appendChild(this._performancePanelElement),this._performancePanelElement.appendChild(this._overviewGraph.element),this._layout(),this._minimizeElement.addEventListener("click",this._onMinimizeClicked.bind(this)),null==window.MappedinDebug&&(window.MappedinDebug={}),window.MappedinDebug.DebugUI=this}destroy(){for(let t of this._performanceEntries.values())t.destroy();for(let t of this._controlPanels.values())t.destroy();this._controlPanels=null,this._performanceEntries=null,this._element=null,this._titleElement=null,this._minimizeElement=null,this._performancePanelElement=null,this._overviewGraph=null,Object.setPrototypeOf(this,null)}get element(){return this._element}reportFramePerformance(t){let e=!1;for(let i in t){if(!this._performanceEntries.has(i)){let t=new Y$({name:i});this._performanceEntries.set(i,t),this._performancePanelElement.appendChild(t.element),this._sortedPerformanceEntryNames.push(i),this._sortedPerformanceEntryNames.sort(),e=!0}this._performanceEntries.get(i).report(t[i])}for(let i of this._performanceEntries.keys())null==t[i]&&this._performanceEntries.get(i).report(0);e&&this._updateLayout();for(let i of this._performanceEntries.values())if(i.series.changed()){this._overviewGraph.redraw();break}}addDebugControls(t){for(let e in t){for(let i of t[e]){let{name:t,description:n,control:r}=i;this._addDebugControl(e,t,n,r)}this._controlPanels.get(e)._updateLayout()}this._updateLayout()}addDebugControl(t,e,i,n){this._addDebugControl(t,e,i,n),this._updateLayout(),this._controlPanels.get(t)._updateLayout()}removeDebugControls(t){for(let e in t){for(let i of t[e])this._removeDebugControl(e,i);this._controlPanels.get(e)._updateLayout()}this._updateLayout()}removeDebugControl(t,e){this._removeDebugControl(t,e),this._updateLayout(),this._controlPanels.get(t)._updateLayout()}_addDebugControl(t,e,i,n){if(!this._controlPanels.has(t)){let e=new IQ({name:t});this._controlPanels.set(t,e),this._element.appendChild(e.element);let i=document.createElement("option");i.value=t,i.innerHTML=t;let n=this._titleElement.children,r=1;for(;r<n.length&&!(n[r].value>t);++r);r===n.length?this._titleElement.appendChild(i):this._titleElement.insertBefore(i,n[r]),Object.assign(e.element.style,{display:"hidden",position:"absolute",left:U$+"px",right:U$+"px",top:U$+A$+U$+"px"})}this._controlPanels.get(t).addControl(e,i,n)}_removeDebugControl(t,e){this._controlPanels.get(t).removeControl(e)}_layout(){Object.assign(this._element.style,{display:"block",position:"absolute",right:I$+"px",top:I$+"px",width:F$+2*U$+"px","font-family":"sans-serif",background:"rgba(255, 255, 255, 0.9)",outline:"1px solid white"}),Object.assign(this._titleElement.style,{display:"block",position:"absolute",left:U$+"px",top:U$+"px","font-size":P$+"px"}),Object.assign(this._minimizeElement.style,{display:"block",position:"absolute",right:U$+"px",top:U$+"px",width:1.5*A$+"px",height:A$+"px"}),Object.assign(this._performancePanelElement.style,{display:"block",position:"absolute",left:U$+"px",right:U$+"px",top:U$+A$+U$+"px"}),Object.assign(this._overviewGraph.element.style,{display:"block",position:"absolute",left:"0px",right:"0px",height:B$+"px",border:"1px solid white",outline:"1px solid #bbb"}),this._updateLayout()}_updateLayout(){let t=null;for(let e of this._titleElement.children){e.selected&&(t=e);let i=e.selected&&!this._minimized;"Performance"===e.value?this._performancePanelElement.style.display=i?"block":"none":this._controlPanels.get(e.value).element.style.display=i?"block":"none"}this._minimized?this._element.style.height=U$+A$+U$+"px":"Performance"===t.value?this._element.style.height=U$+A$+(L$+k$)*this._performanceEntries.size+B$+U$+2*U$+"px":this._element.style.height=U$+A$+this._controlPanels.get(t.value).height+U$+"px";for(let e=0;e<this._sortedPerformanceEntryNames.length;++e){let t=this._sortedPerformanceEntryNames[e],i=this._performanceEntries.get(t);i.setHue(e*V$),i.element.style.top=(L$+k$)*e+"px"}this._overviewGraph.setSeriesList(this._sortedPerformanceEntryNames.map(t=>this._performanceEntries.get(t).series)),this._overviewGraph.element.style.top=(L$+k$)*this._performanceEntries.size+U$+"px",this._minimizeElement.innerHTML=this._minimized?"⇕":"⇗"}_onMinimizeClicked(){this._minimized=!this._minimized,this._updateLayout()}_onCategoryChanged(){this._updateLayout()}};(0,r.a)(H$,"DebugUI");var W$=H$,X$=class{constructor({name:t,hue:e}){this._name=t,this.series=new Q$({hue:e}),this._graph=new J$({width:F$,height:q$,seriesList:[this.series]}),this._element=document.createElement("div"),this._nameElement=document.createElement("div"),this._hueElement=document.createElement("div"),this._lastFrameTimeElement=document.createElement("div"),this._element.appendChild(this._graph.element),this._element.appendChild(this._nameElement),this._element.appendChild(this._hueElement),this._element.appendChild(this._lastFrameTimeElement),this._layout()}destroy(){this._element.removeChild(this._graph.element),this._element.removeChild(this._nameElement),this._element.removeChild(this._hueElement),this._element.removeChild(this._lastFrameTimeElement),this._graph.destroy(),this._element=null,this._nameElement=null,this._hueElement=null,this._lastFrameTimeElement=null}_layout(){Object.assign(this._element.style,{display:"block",position:"absolute",left:"0px",right:"0px",height:L$+"px"}),Object.assign(this._hueElement.style,{display:"block",position:"absolute",left:"-1px",top:D$-1+"px",width:O$-2*D$+"px",height:O$-2*D$+"px","background-color":$$(this.series.hue,.3,.9),border:"1px solid "+$$(this.series.hue,.9,.9),"border-radius":"2px"}),Object.assign(this._nameElement.style,{display:"block",position:"absolute",left:O$-D$+R$+"px",right:"0px",top:"0px",height:O$+"px","font-size":N$+"px","text-align":"left","vertical-align":"middle"}),Object.assign(this._lastFrameTimeElement.style,{display:"block",position:"absolute",left:"0px",right:"0px",top:"0px",height:O$+"px","font-size":N$+"px","text-align":"right","vertical-align":"middle"}),Object.assign(this._graph.element.style,{display:"block",position:"absolute",left:"0px",right:"0px",bottom:"0px","text-align":"right",border:"1px solid white",outline:"1px solid "+$$(this.series.hue,.2,1)}),this._nameElement.innerHTML=this._name}get element(){return this._element}report(t){if(this.series.report(t),this.series.changed()){if(this.series.length>=1){let t=0;for(let i=0;i<this.series.length;++i)t+=this.series.at(i);let e=this.series.maximumValue();this._lastFrameTimeElement.innerHTML="∫ "+(t/this.series.length).toFixed(z$)+"ms, ⤒ "+e.toFixed(z$)+" ms"}this._graph.redraw()}}setHue(t){this.series.hue=t,this._graph.setSeriesList([this.series]),this._layout()}};(0,r.a)(X$,"PerformanceEntry");var Y$=X$,Z$=class{constructor({seriesList:t,width:e,height:i}){this._gradients=new Map,this._canvas=document.createElement("canvas"),this._layout(e,i),this._context=this._canvas.getContext("2d"),this.setSeriesList(t)}destroy(){this._gradients=null,this._canvas=null,this._context=null,Object.setPrototypeOf(this,null)}_layout(t,e){Object.assign(this._canvas.style,{display:"block",position:"absolute",left:"0px",right:"0px",width:t+"px",height:e+"px"}),this._canvas.width=t*window.devicePixelRatio,this._canvas.height=e*window.devicePixelRatio}get element(){return this._canvas}redraw(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height);let t=0;for(let e of this._seriesList)t=Math.max(t,e.maximumValue());for(let e of this._seriesList)if(e.length>=1){this._context.beginPath();let i=1-(e.length-1)/(e.windowSize-1),n=1-e.at(0)/t;this._context.moveTo(i*this._canvas.width,n*this._canvas.height);for(let r=1;r<e.length;++r){let i=1-(e.length-1-r)/(e.windowSize-1),n=1-e.at(r)/t;this._context.lineTo(i*this._canvas.width,n*this._canvas.height)}this._context.strokeStyle=this._gradients.get(e),this._context.lineWidth=window.devicePixelRatio,this._context.stroke()}}setSeriesList(t){this._seriesList=t;for(let e of this._seriesList){let t=this._context.createLinearGradient(0,0,0,this._canvas.height);t.addColorStop(0,$$(e.hue,1,1)),t.addColorStop(1,$$(e.hue,.5,.5)),this._gradients.set(e,t)}}};(0,r.a)(Z$,"LineGraph");var J$=Z$,K$=class{constructor({windowSize:t=j$,totalAccumulationCount:e=G$,hue:i=0}){this.windowSize=t,this.hue=i,this._totalAccumulationCount=e,this._ringBuffer=new Array(this.windowSize).fill(0),this._ringBufferLength=0,this._ringBufferPointer=0,this._accumulatorValue=0,this._accumulatorCount=0,this._changed=!0}destroy(){}report(t){this._accumulatorValue+=t,++this._accumulatorCount,this._changed=!1,this._accumulatorCount===this._totalAccumulationCount&&(this._push(this._accumulatorValue/this._totalAccumulationCount),this._accumulatorValue=0,this._accumulatorCount=0,this._changed=!0)}at(t){if(!Number.isFinite(t)||t>=this._ringBufferLength||t<0)throw new Error("invalid index: "+t+" (length: "+this.length+")");let e=(this._ringBufferPointer+t-this._ringBufferLength+this.windowSize)%this.windowSize;return this._ringBuffer[e]}_push(t){this._ringBuffer[this._ringBufferPointer]=t,++this._ringBufferLength,this._ringBufferLength>this.windowSize&&(this._ringBufferLength=this.windowSize),++this._ringBufferPointer,this._ringBufferPointer>=this.windowSize&&(this._ringBufferPointer=0)}maximumValue(){let t=0;for(let e=0;e<this._ringBufferLength;++e)t=Math.max(t,this.at(e));return t}changed(){return this._changed}get length(){return this._ringBufferLength}};(0,r.a)(K$,"TimeSeries");var Q$=K$;function $$(t,e,i,n){let r=t%360/60,o=0|r,a=r-o,s=i*(1-e),l=i*(1-e*a),h=i*(1-e*(1-a)),u=0,c=0,p=0;switch(o){case 0:u=i,c=h,p=s;break;case 1:u=l,c=i,p=s;break;case 2:u=s,c=i,p=h;break;case 3:u=s,c=l,p=i;break;case 4:u=h,c=s,p=i;break;case 5:u=i,c=s,p=l}return"#"+t0(u)+t0(c)+t0(p)}function t0(t){let e=(255*t|0).toString(16);return 1===e.length&&(e="0"+e),e}(0,r.a)($$,"hsv2rgb"),(0,r.a)(t0,"toHex"),(0,n.a)(),(0,n.a)(),(0,n.a)();var e0=new cv,i0=6371e3;function n0(t,e,i,n){let r=new so;return r.setFromAxisAngle(i,n),t.applyQuaternion(r),t.position.sub(e),t.position.applyQuaternion(r),t.position.add(e),t}function r0(t){let e=t.max.x-t.min.x,i=t.max.y-t.min.y,n=Math.max(e,i),r=new fo(new ho,new ho(n,n,0)),o=new ho;return o.subVectors(t.getCenter(new ho),r.getCenter(new ho)),r.translate(o),r}function o0(t,e,i,n){if(0===e)return t;let{lat:r,lon:o}=t,a=a0(i),s=a0(r),l=a0(o),h=e/i0*Math.cos(a),u=l+e/i0*Math.sin(a)/Math.cos(s),c=s0(s+h),p=s0(u);return n.createCoordinate(c,p)}function a0(t){return t*Math.PI/180}function s0(t){return 180*t/Math.PI}async function l0(t,e,i,n,r){let o,{signal:a}=n;try{o=await(await r.fetchTile(t,e,i,a)).blob()}catch(t){return}try{let t=await createImageBitmap(o,{imageOrientation:"flipY",colorSpaceConversion:"none"}),e=new Gf(t);return e.wrapS=yi,e.wrapT=yi,e}catch{return new Promise(t=>{let e=URL.createObjectURL(o),i=e0.load(e,()=>{i.colorSpace=Fn,i.wrapS=yi,i.wrapT=yi,t(i)})})}}function h0(t){return Math.sqrt(Math.pow(t,2)+Math.pow(t,2))/2}(0,r.a)(n0,"rotateAroundWorldAxis"),(0,r.a)(r0,"getSquareBoundingBoxByLongestSide"),(0,r.a)(o0,"translateCoordinate"),(0,r.a)(a0,"toRadians"),(0,r.a)(s0,"toDegrees"),(0,r.a)(l0,"loadTextureByTile"),(0,r.a)(h0,"calculateCircleRadius"),(0,n.a)();var u0=class{static MapSize(t,e){return Math.ceil(e*Math.pow(2,t))}static Clip(t,e,i){return Math.min(Math.max(t,e),i)}static GlobalPixelToPosition(t,e,i){var n=this.MapSize(e,i),r=this.Clip(t[0],0,n-1)/n-.5,o=.5-this.Clip(t[1],0,n-1)/n;return[360*r,90-360*Math.atan(Math.exp(2*-o*Math.PI))/Math.PI]}static GroundResolution(t,e,i){return t=this.Clip(t,this.MinLatitude,this.MaxLatitude),2*Math.cos(t*Math.PI/180)*Math.PI*this.EarthRadius/this.MapSize(e,i)}static TileXYToBoundingBox(t,e,i,n){var r=t*n,o=e*n,a=r+n,s=o+n,l=this.GlobalPixelToPosition([r,o],i,n),h=this.GlobalPixelToPosition([a,s],i,n);return[l[0],h[1],h[0],l[1]]}static PositionToTileXY(t,e,i){var n=this.Clip(t[1],this.MinLatitude,this.MaxLatitude),r=(this.Clip(t[0],this.MinLongitude,this.MaxLongitude)+180)/360,o=Math.sin(n*Math.PI/180),a=.5-Math.log((1+o)/(1-o))/(4*Math.PI),s=this.MapSize(e,i);return{tileX:Math.floor(this.Clip(r*s+.5,0,s-1)/i),tileY:Math.floor(this.Clip(a*s+.5,0,s-1)/i)}}static TileXYToQuadKey(t,e,i){for(var n=[],r=i;r>0;r--){var o=0,a=1<<r-1;t&a&&o++,e&a&&(o+=2),n.push(o)}return n.join("")}};(0,r.a)(u0,"TileMath"),(0,r.f)(u0,"EarthRadius",6378137),(0,r.f)(u0,"MinLatitude",-85.05112878),(0,r.f)(u0,"MaxLatitude",85.05112878),(0,r.f)(u0,"MinLongitude",-180),(0,r.f)(u0,"MaxLongitude",180);var c0,p0,d0,f0=u0,g0=class{constructor(t,e,i,n,o){(0,r.f)(this,"center"),(0,r.f)(this,"zoomLevel"),(0,r.h)(this,c0,void 0),(0,r.h)(this,p0,void 0),(0,r.h)(this,d0,void 0),(0,r.f)(this,"mesh"),(0,r.f)(this,"material"),(0,r.f)(this,"texture"),(0,r.f)(this,"cache",{}),(0,r.f)(this,"rendered",!1),this.center=t,this.zoomLevel=e,(0,r.i)(this,c0,i),(0,r.i)(this,p0,n),(0,r.i)(this,d0,o)}get tileXY(){if(this.cache.tileXY)return this.cache.tileXY;let{tileX:t,tileY:e}=f0.PositionToTileXY([this.center.lon,this.center.lat],this.zoomLevel,(0,r.g)(this,c0).tileSize);return this.cache.tileXY={tileX:t,tileY:e},{tileX:t,tileY:e}}get tileBoundingBoxInLatLon(){if(this.cache.tileBoundingBoxInLatLon)return this.cache.tileBoundingBoxInLatLon;let{tileX:t,tileY:e}=this.tileXY,{tileSize:i}=(0,r.g)(this,c0),n=f0.TileXYToBoundingBox(t,e,this.zoomLevel,i);return this.cache.tileBoundingBoxInLatLon=n,n}discardTexture(){if(1===(0,r.g)(this,c0).tileRenderMode){this.rendered=!1,this.material.opacity=0,this.material.map=null,this.material.needsUpdate=!0;try{this.texture.dispose()}catch{}(0,r.g)(this,p0).tryRendering()}}applyTexture(){if(this.rendered&&1!==(0,r.g)(this,c0).tileRenderMode)return;this.rendered=!0;let{tileX:t,tileY:e}=this.tileXY;(0,r.g)(this,p0).taskScheduler.scheduleTask(new jD({name:"fetchTile",callback:()=>{l0(t,e,this.zoomLevel,(0,r.g)(this,d0),(0,r.g)(this,c0).outdoorContextProvider).then(t=>{this.texture=t,this.material.map=t,Hy({from:{opacity:0},to:{opacity:1},duration:500,onStart:()=>{this.mesh.visible=!0},onUpdate:({opacity:t})=>{this.material.opacity=!0===(0,r.g)(this,c0).visible?t:0,this.material.needsUpdate=!0,(0,r.g)(this,p0).tryRendering()}}).start((0,r.g)(this,p0))})}}))}render(t,e){let i=t/e.scale,n=new cl(i,i,1,1);this.material=new ja({opacity:0,transparent:!0,stencilWrite:!0,stencilFunc:Gn,stencilRef:1}),this.mesh=new Cs(n,this.material),this.mesh.visible=!1;let o=this.tileBoundingBoxInLatLon,a=(0,r.g)(this,p0).referenceMap.createCoordinate(o[3],o[2]),s=(0,r.g)(this,p0).convertTo3DMapPosition(a);return this.mesh.position.set(s.x-i/2,s.y-i/2,-1),n0(this.mesh,s,new ho(0,0,1),-e.getNorth()),this.mesh}};c0=new WeakMap,p0=new WeakMap,d0=new WeakMap,(0,r.a)(g0,"Tile");var m0,v0=g0,y0=2,_0="#f0f0f1",x0=class t{constructor(e){var i,n,o,a;(0,r.f)(this,"tileSize",256),(0,r.f)(this,"token",""),(0,r.f)(this,"apiKey"),(0,r.f)(this,"tileRenderMode",1),(0,r.f)(this,"currentAbortController",new AbortController),(0,r.h)(this,m0,void 0),(0,r.f)(this,"attributionEl"),(0,r.f)(this,"outdoorContextProvider"),(0,r.f)(this,"renderVisibleTiles"),(0,r.f)(this,"cachedZoomLevel",-1/0),(0,r.f)(this,"visible",!0),(0,r.f)(this,"zoomLevelToAltitudeMap",[[18,-1/0],[17,800],[16,1800],[15,3e3]]),(0,r.f)(this,"plane"),(0,r.f)(this,"tiles",[]),(0,r.f)(this,"maskMeshBoundingBox"),(0,r.i)(this,m0,e),this.renderVisibleTiles=ky(this._renderVisibleTiles,32),t.ENABLED&&null!==(null==(i=t.OPTIONS)?void 0:i.provider)&&(this.outdoorContextProvider=null==(n=t.OPTIONS)?void 0:n.provider,this.tileRenderMode=null!=(a=null==(o=t.OPTIONS)?void 0:o.tileRenderMode)?a:this.tileRenderMode,(0,r.g)(this,m0).camera.on("CHANGED",()=>{this.fetchTiles(),this.renderVisibleTiles()}),(0,r.g)(this,m0).on(7,()=>{this.fetchTiles(),this.renderVisibleTiles()}))}createAttributionEl(){this.attributionEl=document.createElement("div"),Object.assign(this.attributionEl.style,{position:"absolute",bottom:0,right:0,padding:"2px",pointerEvents:"none"}),(0,r.g)(this,m0).container.append(this.attributionEl)}_renderVisibleTiles(){let t=(0,r.g)(this,m0).cameraObject,e=new sl;e.setFromProjectionMatrix((new Go).multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse));for(let i of this.tiles){let t=i.mesh,n=t.geometry.attributes.position.array,r=[t.localToWorld(new ho(n[0],n[1],n[2])),t.localToWorld(new ho(n[3],n[4],n[5])),t.localToWorld(new ho(n[6],n[7],n[8])),t.localToWorld(new ho(n[9],n[10],n[11]))],o=!1;for(let a=0;a<4;a++)if((e.containsPoint(r[a])||e.intersectsObject(t))&&(o=!0,!i.rendered)){i.applyTexture();break}i.rendered&&!o&&i.discardTexture()}}fadeOut(){return t.ENABLED&&this.visible?Hy({from:{opacity:1},to:{opacity:0},onUpdate:({opacity:t})=>{this.plane.children.forEach(e=>{e.material.opacity=t,e.material.needsUpdate=!0,(0,r.g)(this,m0).tryRendering()})},onComplete:()=>{this.visible=!1,this.plane.visible=!1,(0,r.g)(this,m0).tryRendering()}}).start((0,r.g)(this,m0)):Promise.resolve()}fadeIn(){return!t.ENABLED||this.visible?Promise.resolve():Hy({from:{opacity:0},to:{opacity:1},onStart:()=>{this.plane.visible=!0,(0,r.g)(this,m0).tryRendering()},onUpdate:({opacity:t})=>{this.plane.children.forEach(e=>{e.material.opacity=t,e.material.needsUpdate=!0,(0,r.g)(this,m0).tryRendering()})},onComplete:()=>{this.visible=!0}}).start((0,r.g)(this,m0))}fetchTiles(){let t=(0,r.g)(this,m0).controls.getZoom()*(0,r.g)(this,m0).referenceMap.scale,e=-1/0;this.zoomLevelToAltitudeMap.forEach(([i,n])=>{t>n&&(e=i)}),e!==this.cachedZoomLevel&&(this.currentAbortController.signal.aborted||(this.currentAbortController.abort(),this.currentAbortController=new AbortController),this.fetchTilesForZoomLevel(e))}async fetchTilesForZoomLevel(e){var i,n;this.plane&&(this.tiles=[],(0,r.g)(this,m0).scene.remove(this.plane),this.plane.destroy(),(0,r.g)(this,m0).tryRendering()),this.cachedZoomLevel=e,this.plane=new Fd;let o=(0,r.g)(this,m0).referenceMap,a=(0,r.g)(this,m0).mapObjects.get(o.id);await a.load();let s=a.boundingBox,l=Gy(r0(new fo(new ho(s.min.x,s.min.y,s.min.z),new ho(s.max.x,s.max.y,s.max.z))),null!=(n=null==(i=t.OPTIONS)?void 0:i.boundingBoxMultiplier)?n:y0),{min:h,max:u}=l,c=new cl(u.x-h.x,u.y-h.y),p=new ja({color:_0,stencilWrite:!0,stencilRef:1,depthWrite:!1,stencilFunc:Hn,stencilFail:jn,stencilZFail:jn,stencilZPass:jn}),d=new Cs(c,p);d.renderOrder=-1,d.applyMatrix4(a.object.matrix),this.maskMeshBoundingBox=(new fo).setFromObject(d),this.maskMeshBoundingBox.min.z=-100,this.maskMeshBoundingBox.max.z=100,this.plane.add(d);let f=new ho(l.min.x,l.min.y,0),g=new ho(l.max.x,l.max.y,0);if("function"==typeof this.outdoorContextProvider.fetchAttribution){null==this.attributionEl&&this.createAttributionEl();let t=(0,r.g)(this,m0).convert3DMapPositionToCoordinate(f),i=(0,r.g)(this,m0).convert3DMapPositionToCoordinate(g);this.outdoorContextProvider.fetchAttribution(e,[i.lon,i.lat,t.lon,t.lat]).then(t=>t.json()).then(({copyrights:t})=>{this.attributionEl.innerHTML=t[0]}).catch(t=>vy.error(t))}let m=l.getCenter(new ho),v=(0,r.g)(this,m0).convert3DMapPositionToCoordinate(m,o),y=f0.GroundResolution(v.lat,e,this.tileSize),_=this.tileSize*y,x=new v0(v,e,this,(0,r.g)(this,m0),this.currentAbortController);x.render(_,o),this.plane.add(x.mesh),this.tiles.push(x);let b=h0(l.max.x-l.min.x),w=_/o.scale,E=Math.ceil(b/w);for(let t=1;t<=E;t++)this.populateLayer(t,v,e,_,o);(0,r.g)(this,m0).scene.add(this.plane)}populateLayer(t=1,e,i,n,o){let a=o0(e,n*t,0,o),s=2*t+1,l=a=o0(a,n*t,270,o),h=[90,180,270,0];for(let u of h)for(let t=0;t<s-1;t++){let t=new v0(l,i,this,(0,r.g)(this,m0),this.currentAbortController);t.render(n,o),this.checkIfTileIsInBoundingBox(t)&&(this.plane.add(t.mesh),this.tiles.push(t)),l=o0(l,n,u,o)}}checkIfTileIsInBoundingBox(t){let e=(new fo).setFromObject(t.mesh);return this.maskMeshBoundingBox.intersectsBox(e)||this.maskMeshBoundingBox.containsBox(e)}};m0=new WeakMap,(0,r.a)(x0,"TileManager"),(0,r.f)(x0,"ENABLED",!1),(0,r.f)(x0,"OPTIONS");var b0=x0;(0,n.a)(),(0,n.a)(),"object"!=typeof globalThis&&(Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__);var w0=(0,r.e)(o());(0,n.a)(),ya.prototype.destroy=function(){for(let t=this.children.length-1;t>=0;t--)this.children[t].destroy();this.geometry&&(this.geometry.dispose(),this.geometry=void 0),this.parent&&this.parent.remove(this),this.texture&&(this.texture.dispose(),this.texture=void 0),Array.isArray(this.material)?this.material.forEach(function(t){Ay(t)}):typeof this.material<"u"&&Ay(this.material),this.material=void 0};var E0=new Yv,M0={},S0={BEFORE_CAMERA:5,CAMERA:4,AFTER_CAMERA:3,RENDER:2,AFTER_RENDER:1,AFTER_ALL_UPDATES:0},T0=Mr.radToDeg(.698132);M0.CameraControls=XQ;var C0,A0,P0,I0,L0,O0,N0,q0,R0,D0,k0,B0,F0,U0,z0,V0,j0,G0,H0,W0,X0,Y0,Z0,J0,K0,Q0,$0,t1,e1,i1,n1,r1,o1,a1,s1,l1,h1,u1,c1,p1,d1,f1,g1,m1,v1,y1,_1=class extends FR{constructor(t,e,i={},o){var a,s,l,h,u,c,p,d,f,g;super(),(0,r.f)(this,"eventSystem"),(0,r.f)(this,"floatingLabels"),(0,r.f)(this,"flatLabels"),(0,r.f)(this,"paths"),(0,r.f)(this,"polygonColors"),(0,r.f)(this,"polygonHoverColors"),(0,r.f)(this,"polygonInteraction"),(0,r.f)(this,"polygonStates"),(0,r.f)(this,"polygonImages"),(0,r.f)(this,"markers"),(0,r.f)(this,"tooltips"),(0,r.f)(this,"threeDMarkers"),(0,r.f)(this,"blueDot"),(0,r.f)(this,"camera"),(0,r.f)(this,"outdoorViewController"),(0,r.f)(this,"watermark"),(0,r.f)(this,"layerController"),(0,r.f)(this,"options"),(0,r.f)(this,"currentPath"),(0,r.f)(this,"state","explore"),(0,r.f)(this,"imageFlippingCache",{}),(0,r.f)(this,"imageFlippingEnabled",!1),(0,r.f)(this,"MapView"),(0,r.f)(this,"type"),(0,r.f)(this,"container"),(0,r.f)(this,"venue"),(0,r.f)(this,"colors"),(0,r.f)(this,"loadOptions"),(0,r.f)(this,"smartCollisionEngine"),(0,r.f)(this,"taskScheduler"),(0,r.f)(this,"renderer"),(0,r.f)(this,"highlightedPolygons",{}),(0,r.f)(this,"outlinedPolygons",new Map),(0,r.f)(this,"scene"),(0,r.f)(this,"focusZoomFactor"),(0,r.f)(this,"cameraObject"),(0,r.f)(this,"polygonMeshesById"),(0,r.f)(this,"textLabelsByPolygonId"),(0,r.f)(this,"labelOrientationDelay"),(0,r.f)(this,"isWebGL2"),(0,r.f)(this,"interactivePolygons"),(0,r.f)(this,"polygonHoverColorsById"),(0,r.f)(this,"mapManager"),(0,r.f)(this,"sceneManager"),(0,r.f)(this,"mapObjects"),(0,r.f)(this,"referenceMap"),(0,r.f)(this,"currentInteractionEvent"),(0,r.f)(this,"resolution"),(0,r.f)(this,"cameraParameters"),(0,r.f)(this,"controls"),(0,r.f)(this,"cameraPlane"),(0,r.f)(this,"canvasWidth"),(0,r.f)(this,"canvasHeight"),(0,r.f)(this,"cachedPadding",{top:0,left:0,right:0,bottom:0}),(0,r.f)(this,"currentScale",0),(0,r.f)(this,"rendererDomElement"),(0,r.f)(this,"resolutionScale"),(0,r.h)(this,C0,void 0),(0,r.h)(this,A0,void 0),(0,r.h)(this,P0,void 0),(0,r.h)(this,I0,void 0),(0,r.h)(this,L0,void 0),(0,r.h)(this,O0,void 0),(0,r.h)(this,N0,void 0),(0,r.h)(this,q0,null),(0,r.h)(this,R0,["top","bottom","left","right"]),(0,r.h)(this,D0,{PIXELS:"pixels",PORTIONS:"portions"}),(0,r.h)(this,k0,void 0),(0,r.h)(this,B0,void 0),(0,r.h)(this,F0,void 0),(0,r.h)(this,U0,void 0),(0,r.h)(this,z0,void 0),(0,r.h)(this,V0,void 0),(0,r.h)(this,j0,void 0),(0,r.h)(this,G0,void 0),(0,r.h)(this,H0,void 0),(0,r.h)(this,W0,void 0),(0,r.h)(this,X0,void 0),(0,r.h)(this,Y0,void 0),(0,r.h)(this,Z0,void 0),(0,r.h)(this,J0,void 0),(0,r.h)(this,K0,!1),(0,r.h)(this,Q0,void 0),(0,r.h)(this,$0,void 0),(0,r.f)(this,"outdoorGeometryLayers",[]),(0,r.f)(this,"billboardManager"),(0,r.f)(this,"stackedMaps"),(0,r.f)(this,"tileManager"),(0,r.f)(this,"setMapReason"),(0,r.h)(this,t1,(0,r.a)((t=!0)=>{(0,r.i)(this,K0,t)},"#setFlippablesNeedUpdating")),(0,r.h)(this,e1,(0,r.a)(()=>{this.smartCollisionEngine.init(this.container,(0,r.g)(this,u1))},"#initializeCollisionEngine")),(0,r.h)(this,i1,(0,r.a)(t=>Math.trunc(100*t)/100,"#round100")),(0,r.h)(this,n1,(0,r.a)(()=>{var t,e;this.canvasWidth=this.rendererDomElement.clientWidth,this.canvasHeight=this.rendererDomElement.clientHeight,(0,r.g)(this,p1).call(this),null!=this.outdoorViewController&&this.outdoorViewController.resize(),(0,r.g)(this,r1).call(this),this.smartCollisionEngine.resize(this.container),"function"==typeof(null==(e=null==(t=this.sceneManager)?void 0:t.currentScene)?void 0:e.resize)&&this.sceneManager.currentScene.resize(),this.watermark.resize()},"#onWindowResize")),(0,r.h)(this,r1,(0,r.a)(()=>{this.renderer.render(YB.ALL,null,this.scene,this.cameraObject)},"#renderFull")),(0,r.h)(this,o1,(0,r.a)((t,e)=>{t.style.transform="rotate("+(e+t._mRotationOffset)+"rad)"},"#rotateNode")),(0,r.h)(this,a1,(0,r.a)(()=>{(0,r.i)(this,L0,!0),(0,r.i)(this,K0,!0)},"#cameraRotationStarted")),(0,r.h)(this,s1,(0,r.a)(()=>{(0,r.i)(this,L0,!1),(0,r.i)(this,K0,!0)},"#cameraRotationStopped")),(0,r.h)(this,l1,(0,r.a)(()=>{},"#cameraMovementStart")),(0,r.h)(this,h1,(0,r.a)(()=>{},"#cameraMovementEnd")),(0,r.h)(this,u1,(0,r.a)((t,e)=>{this.cameraObject.updateProjectionMatrix(),this.cameraObject.updateMatrixWorld(!0);let i=this.mapObjects.get(e);if(null==i)return{x:0,y:0};let n=this.convertTo3DMapPosition(t.nodeOrCoordinate);typeof t.height<"u"&&(n.z+=t.height*i.object.scale.x);let o=n.project(this.cameraObject),a=(o.x+1)/2*this.canvasWidth-0,s=(1-o.y)/2*this.canvasHeight-0;return{x:(0,r.g)(this,i1).call(this,a),y:(0,r.g)(this,i1).call(this,s)}},"#project")),(0,r.h)(this,c1,(0,r.a)((t,e)=>{this.renderer.setBufferSize(t,e),this.cameraObject.aspect=t/e,this.cameraObject.updateProjectionMatrix(),this.cameraObject.updateMatrixWorld(!0),this.resolution.x=t,this.resolution.y=e},"#setBufferSize")),(0,r.h)(this,p1,(0,r.a)(()=>{let t=this.canvasWidth=this.rendererDomElement.clientWidth,e=this.canvasHeight=this.rendererDomElement.clientHeight,i=Math.floor(t*this.resolutionScale),n=Math.floor(e*this.resolutionScale);if(this.rendererDomElement.width!==i||this.rendererDomElement.height!==n){if(this.rendererDomElement.width*this.rendererDomElement.height*i*n!=0){let t=this.rendererDomElement.width!==i?this.rendererDomElement.width/i:this.rendererDomElement.height/n;this.controls.setZoom(t*this.controls.getZoom())}(0,r.g)(this,c1).call(this,i,n)}(0,r.i)(this,Z0,!1)},"#measureCanvas")),(0,r.h)(this,d1,(0,r.a)(()=>{var t;let e=(0,r.g)(this,Q0).rotation.z;if((0,r.g)(this,L0)||(0,r.g)(this,K0)){let i=null==(t=this.sceneManager)?void 0:t.currentScene.mapObjects;null==i||i.forEach(t=>{let i=e-t.object.rotation.z;t.imagesToFlip.forEach(t=>t.flipIfNeeded(i))})}},"#rotateTextLabels")),(0,r.h)(this,f1,(0,r.a)(()=>{var t;let e=(0,r.g)(this,Q0).rotation.z;if((0,r.g)(this,L0)||(0,r.g)(this,K0)){let i=null==(t=this.sceneManager)?void 0:t.currentScene.mapObjects;null==i||i.forEach(t=>{let i=e-t.object.rotation.z;t.imagesToFlip.forEach(t=>t.flipIfNeeded(i))})}},"#rotateImages")),(0,r.h)(this,g1,(0,r.a)(t=>{t.addDebugControls({MapView3D:[{name:"Background Color",description:"The color of the mapview background. Will be obscured if there is a fully-opaque outdoor context.",control:new EQ({current:new Ua("#ffffff"),onValueChanged:t=>{this.renderer.setBackgroundColor(t,this.renderer.backgroundAlpha),this.tryRendering()}})},{name:"Background Opacity",description:"The opacity of the mapview background. Will be obscured if there is a fully-opaque outdoor context.",control:new pQ({minimum:0,maximum:1,step:.01,current:this.renderer.backgroundAlpha,onValueChanged:t=>{this.renderer.setBackgroundColor(this.renderer.backgroundColor,t),this.tryRendering()}})}]})},"#addDebugControls")),(0,r.h)(this,m1,(0,r.a)(t=>{t.removeDebugControls({MapView3D:["Background Color","Background Opacity"]})},"#removeDebugControls")),(0,r.h)(this,v1,(0,r.a)((t,e)=>E0.intersectObjects(t,!0).filter(t=>!!t.object.name&&(e&&this.venue._polygonsById?t.object.name in this.venue._polygonsById:t.object.name in this.interactivePolygons)).map(t=>this.venue._polygonsById[t.object.name])||[],"#getPolygonsFromRaycaster")),(0,r.h)(this,y1,(0,r.a)(()=>{this.tryRendering()},"#onCameraChange")),(0,r.f)(this,"getPolygon",(0,r.a)(t=>Oy(t,this.venue.polygons),"getPolygon")),(0,r.f)(this,"showEntireMap",(0,r.a)(t=>{if(null==this.currentMap)return;t||(t={});let e,i=this.mapObjects.get(this.currentMap);return t.interactiveOnly?e=Object.keys(this.interactivePolygons):!(e=null==i?void 0:i.hoverableMeshChildren.map(function(t){return t.name})).length&&null!=i&&i.elements&&(e=Object.keys(i.elements)),t.polygons=e,this.focusOn(t)},"showEntireMap")),(0,r.f)(this,"resetPanBounds",(0,r.a)(()=>{var t;if(null==this.currentMap)return;let e=this.mapObjects.get(this.currentMap);this.controls.panBounds.min=this.controls.getPosition(),this.controls.panBounds.max=this.controls.getPosition();let i=null==e?void 0:e.boundingBox;i||(i=(new fo).setFromObject(null==e?void 0:e.object),this.mapObjects.get(this.currentMap).boundingBox=i),null==(t=this.mapManager)||t.expandPanBounds(i)},"resetPanBounds")),(0,r.f)(this,"focusOn",(0,r.a)(t=>{var e,i;if(null==this.currentMap||null==t)return;let o,a=void 0===t.changeZoom||t.changeZoom;o=void 0!==t.duration?t.duration:"true"===n.b.env.TESTING?0:200;let s=void 0!==t.focusZoomFactor?t.focusZoomFactor:this.focusZoomFactor,l=t.curve,h=void 0!==t.horizontalFovFactor?t.horizontalFovFactor:1,u=void 0!==t.verticalFovFactor?t.verticalFovFactor:1,c=t.callback,p=t.cancelledCallback,d=void 0!==t.minZoom?t.minZoom:this.controls.minZoom,f=void 0!==t.maxZoom?t.maxZoom:this.controls.maxZoom,g=null==(e=t.updateZoomLimits)||e,m=!1,v=[],y=null!=(i=t.doNotEmitFocusOnEvent)&&i;if((0,r.g)(this,p1).call(this),t.nodes){let e=t.nodes;for(var _=0,x=e.length;_<x;_++){let t=e[_];"string"==typeof t&&(t=Oy(t,this.venue.nodes)),(null==t.map||t.map.id==this.currentMap)&&(v.push(this.convertTo3DMapPosition(t)),m=!0)}}if(t.debug){(0,r.g)(this,N0)&&(0,r.g)(this,N0).destroy(),(0,r.i)(this,N0,new ya),this.scene.add((0,r.g)(this,N0));var b=new Ls(100,100,100),w=new ja({color:65280})}t.points&&(t.points.forEach(t=>v.push(t)),m=!0);let E=this.controls.getRotation(),M=this.controls.getTilt();if(this.controls.setRotation(t.rotation,!0),this.controls.setTilt(t.tilt,!0),t.boundingBox){let{min:e,max:i}=t.boundingBox;[new ho(e.x,e.y,e.z),new ho(e.x,i.y,e.z),new ho(i.x,e.y,e.z),new ho(i.x,i.y,e.z),new ho(e.x,e.y,i.z),new ho(e.x,i.y,i.z),new ho(i.x,e.y,i.z),new ho(i.x,i.y,i.z)].forEach(e=>{if(t.debug){let t=new Cs(b,w);t.position.set(e.x,e.y,e.z),(0,r.g)(this,N0).add(t)}v.push(e)}),m=!0}if(t.polygons){let e=t.polygons,i=this.mapObjects.get(this.currentMap),n=0;for(_=0,x=e.length;_<x;_++){let t=Ly(e[_]),r=null==i?void 0:i.objectsDictionary[t];if(r)if(n++,r.geometry.attributes){let t=r.geometry.attributes.position;for(let e=0,n=t.count;e<n;e++){let n=new ho;n.set(t.getX(e),t.getY(e),t.getZ(e)).applyMatrix4(null==i?void 0:i.object.matrix),v.push(n)}m=!0}else{for(let t=0,e=r.geometry.vertices.length;t<e;t++)v.push(r.geometry.vertices[t].clone().applyMatrix4(null==i?void 0:i.object.matrix));m=!0}}1===n&&(s=this.loadOptions&&this.loadOptions.zoomOverrides&&this.loadOptions.zoomOverrides.focusZoomFactorPolygon||s)}if(m){this.tryRendering();let e=t.padding||this.cachedPadding||{top:0,bottom:0,left:0,right:0},i=this.getZoomLevelForCurrentMap(),n=d*s,r=f*s,m=this.getCameraFrameForPoints(v,h,u,e,!a,n,r),_=m.zoom;g&&(this.controls.restrictZoomLimits(i),this.controls.expandZoomLimits(_*s));let x={position:m.position,tilt:t.tilt,rotation:t.rotation};return a&&(x.zoom=Mr.clamp(m.zoom*s,d,f)),y||this.publish(26),this.controls.setRotation(E,!0),this.controls.setTilt(M,!0),this.controls.animateCamera(x,o,l,c,p)}return y||this.publish(26),this.controls.setRotation(E,!0),this.controls.setTilt(M,!0),this.controls.animateCamera({},o,l,c,p)},"focusOn")),(0,r.f)(this,"focusOnPolygon",(0,r.a)((t,e,i,n)=>this.focusOn({polygons:[t],changeZoom:e,duration:i,curve:n}),"focusOnPolygon")),(0,r.f)(this,"focusOnPath",(0,r.a)((t,e,i,n,r)=>this.focusOn({nodes:t,polygons:e,changeZoom:i,duration:n,curve:r}),"focusOnPath")),(0,r.f)(this,"getCameraFrameForPoints",(0,r.a)((t,e,i,n,o=!0,a=this.controls.getZoomScaledMin(),s=this.controls.getZoomScaledMax())=>{(!i||isNaN(i))&&(i=1),(!e||isNaN(e))&&(e=1);let l={position:this.controls.getPosition(),zoom:this.controls.minZoom};if(null==t||0===t.length)return l;n||(n={top:0,bottom:0,left:0,right:0,type:(0,r.g)(this,D0).PIXELS});for(let G of(0,r.g)(this,R0))"number"!=typeof n[G]&&(n[G]=0);if(n.type||(n.type=(0,r.g)(this,D0).PIXELS),n.type===(0,r.g)(this,D0).PORTIONS&&(n={top:n.top*this.canvasHeight,bottom:n.bottom*this.canvasHeight,left:n.left*this.canvasWidth,right:n.right*this.canvasWidth,type:(0,r.g)(this,D0).PIXELS}),n.left+n.right>=this.canvasWidth||n.top+n.bottom>=this.canvasHeight)return l;(0,r.g)(this,Q0).updateMatrixWorld();let h=this.cameraObject.matrixWorldInverse,u=this.cameraObject.fov*(Math.PI/180)/2,c=u*i,p=Math.atan(Math.tan(u)*(this.canvasWidth/this.canvasHeight))*e;if(1===t.length){let e=t[0].clone();e.applyMatrix4(h);let i=this.controls.minZoom*Math.tan(p)*2,r=this.controls.minZoom*Math.tan(c)*2,o=(n.left-n.right)/2/this.canvasWidth,a=(n.top-n.bottom)/2/this.canvasHeight,s=new ho(-o*i,a*r,0);return e.add(s),e.applyMatrix4(this.cameraObject.matrixWorld),l.position.x=e.x,l.position.y=e.y,l}let d,f=new ho(1/0,1/0,1/0),g=new ho(-1/0,-1/0,-1/0),m=(new fo).setFromPoints(t);for(let r=0,G=t.length;r<G;r++)(d=t[r]).applyMatrix4(h),f.min(d),g.max(d);let v=g.x-f.x,y=g.y-f.y,_=this.canvasWidth-n.left-n.right,x=this.canvasHeight-n.top-n.bottom,b=(g.x+f.x)/2,w=(g.y+f.y)/2,E=v/_,M=y/x,S=s,T=a*Math.tan(p)*2,C=S*Math.tan(p)*2,A=T/this.canvasWidth,P=C/this.canvasWidth,I=Math.max(E,M);o||(I=Math.min(Math.max(I,A),P));let L=_*I,O=x*I,N=b-L/2-n.left*I,q=w-O/2-n.bottom*I,R=(N+(b+L/2+n.right*I))/2,D=(q+(w+O/2+n.top*I))/2,k=m.getCenter(new ho),B=Math.abs(R-N),F=Math.abs(D-q),U=B/Math.tan(p),z=F/Math.tan(c),V=new ho;V.set(R,D,g.z+Math.max(U,z)),V.applyMatrix4(this.cameraObject.matrixWorld);let j=new ho;if(j.set(R,D,g.z),j.applyMatrix4(this.cameraObject.matrixWorld),"STACKED"===this.state){let t=(new ho).subVectors(j,V),e=(k.z-V.z)/t.z,i=(new ho).copy(V).add(t.clone().multiplyScalar(e));l.position=i,j.set(l.position.x,l.position.y,l.position.z)}else{j.sub(V);let t=V.z/j.z;l.position.x=V.x-j.x*t,l.position.y=V.y-j.y*t,j.set(l.position.x,l.position.y,0)}return V.sub(j),l.zoom=V.length(),l},"getCameraFrameForPoints")),(0,r.f)(this,"setPadding",(0,r.a)(t=>{this.cachedPadding=t||{top:0,bottom:0,left:0,right:0}},"setPadding")),(0,r.f)(this,"getZoomLevelForPolygon",(0,r.a)(t=>{var e;if(null==this.currentMap)return;let i=Ly(t),n=[],r=null==(e=this.mapObjects.get(this.currentMap))?void 0:e.objectsDictionary[i];if(r){let t=r.geometry.attributes?r.geometry.attributes.position:[];for(let e=0,i=t.count;e<i;e++){let i=new ho;i.set(t.getX(e),t.getY(e),t.getZ(e)),n.push(i)}return this.getCameraFrameForPoints(n,1,1,this.cachedPadding,!0).zoom}return this.controls.getZoom()},"getZoomLevelForPolygon")),(0,r.f)(this,"getZoomLevelForCurrentMap",(0,r.a)(()=>{var t;if(null==this.currentMap)return;let e=null==(t=this.mapObjects.get(this.currentMap))?void 0:t.object;if(e){let t=this.mapObjects.get(this.currentMap).boundingBox;t||(t=(new fo).setFromObject(e),this.mapObjects.get(this.currentMap).boundingBox=t);let i=[t.min.clone(),t.max.clone()];return this.getCameraFrameForPoints(i,1,1,this.cachedPadding,!0).zoom}return this.controls.getZoom()},"getZoomLevelForCurrentMap")),(0,r.f)(this,"getZoomLevelForObject",(0,r.a)(t=>{let e;e||(e=(new fo).setFromObject(t));let i=[e.min.clone(),e.max.clone()];return this.getCameraFrameForPoints(i,1,1,0,!0).zoom},"getZoomLevelForObject")),(0,r.f)(this,"resetCamera",(0,r.a)((t=!1)=>{var e;if(null==this.currentMap)return;let i={x:0,y:0};if(!t){let t=null==(e=this.mapObjects.get(this.currentMap))?void 0:e.boundingBox;t&&(i={x:(t.max.x-t.min.x)/2+t.min.x,y:(t.max.y-t.min.y)/2+t.min.y})}let n=this.getZoomLevelForCurrentMap();this.controls.expandZoomLimits(n),this.controls.setMulti(i,n,0,.6)},"resetCamera")),(0,r.f)(this,"getPositionLatLon",(0,r.a)((t,e,i)=>{let n;if(null==(n="string"==typeof i?i:null==i?this.currentMap:i.id))return;let r=this.mapObjects.get(n);if(null==r)throw new Error("Invalid map: "+n);return r.getPositionLatLon(t,e)},"getPositionLatLon")),(0,r.f)(this,"lockNorth",(0,r.a)((t,e=0)=>{(0,r.g)(this,O0).push(t),t._mRotationOffset=e,(0,r.g)(this,o1).call(this,t,this.getNorth()+this.controls.getRotation())},"lockNorth")),(0,r.f)(this,"unlockNorth",(0,r.a)(t=>{delete t._mRotationOffset,(0,r.i)(this,O0,(0,r.g)(this,O0).filter(function(e){return e!=t}))},"unlockNorth")),(0,r.f)(this,"convertTo3DMapPosition",(0,r.a)(t=>{var e;let i=(null==(e=t.map)?void 0:e.id)||this.currentMap;if(null==i)return;let n=this.venue.getCollectionItemById("maps",i);return new ho(t.x-n.width/2,-t.y+n.height/2,1).applyMatrix4(this.mapObjects.get(i).object.matrix)},"convertTo3DMapPosition")),(0,r.f)(this,"convertScreenCoordinateToMapCoordinate",(0,r.a)((t,e,i)=>{var n;let r=null!=(n=null==i?void 0:i.id)?n:this.currentMap;if(null==r)return;let o=this.mapObjects.get(r);this.cameraObject.updateMatrixWorld(!0),this.cameraObject.updateMatrix();let a=t/this.canvasWidth*2-1,s=-e/this.canvasHeight*2+1,l=new ho(a,s,0);E0.setFromCamera(l,this.cameraObject.clone());let h=E0.intersectObject(this.cameraPlane,!1)[0].point.applyMatrix4((new Go).copy(o.object.matrix).invert());return o.mapClass.createCoordinateByXY(h.x+o.mapClass.width/2,-h.y+o.mapClass.height/2)},"convertScreenCoordinateToMapCoordinate")),(0,r.f)(this,"convert3DMapPositionToCoordinate",(0,r.a)((t,e)=>{var i;let n=null!=(i=null==e?void 0:e.id)?i:this.currentMap;if(null==n)return;let r=this.mapObjects.get(n),o=r.mapClass,a=new ho(t.x,t.y,t.z||0);a.applyMatrix4((new Go).copy(r.object.matrix).invert());let s=a.x+o.width/2,l=-a.y+o.height/2;return o.createCoordinateByXY(s,l)},"convert3DMapPositionToCoordinate")),(0,r.f)(this,"getPositionPolygon",(0,r.a)(t=>{var e;let i=Ly(t),n=t;null==t.map&&(n=this.getPolygon(i));let r=null==(e=this.mapObjects.get(n.map.id))?void 0:e.objectsDictionary[i];if(r){r.geometry.computeBoundingBox();let t=r.geometry.boundingBox;return new ho(t.min.x+(t.max.x-t.min.x)/2,t.min.y+(t.max.y-t.min.y)/2,t.max.z)}return null},"getPositionPolygon")),(0,r.f)(this,"getPositionNode",(0,r.a)(t=>{let e=t;return"string"==typeof e&&(e=Oy(t,this.venue.nodes)),this.convertTo3DMapPosition(e)},"getPositionNode")),(0,r.f)(this,"hideAllLabels",(0,r.a)(()=>{this.mapObjects.forEach(t=>{t.textObjects.forEach(t=>t.hide()),t.colliders.forEach(t=>{t.disable()})})},"hideAllLabels")),(0,r.f)(this,"setBackgroundColor",(0,r.a)((t,e)=>{this.renderer.setBackgroundColor(t,e)},"setBackgroundColor")),(0,r.f)(this,"setSize",(0,r.a)((t,e)=>{this.canvasWidth=this.rendererDomElement.clientWidth,this.canvasHeight=this.rendererDomElement.clientHeight;let i=Math.floor(t*this.resolutionScale),n=Math.floor(e*this.resolutionScale);if(!(0,r.g)(this,A0)&&this.rendererDomElement.width*this.rendererDomElement.height*i*n!=0){let t=this.rendererDomElement.width!==i?this.rendererDomElement.width/i:this.rendererDomElement.height/n;this.controls.setZoom(t*this.controls.getZoom())}(0,r.g)(this,c1).call(this,i,n)},"setSize")),(0,r.f)(this,"getMapScale",(0,r.a)(()=>null==this.currentMap?0:this.mapObjects.get(this.currentMap).getMapScale(),"getMapScale")),(0,r.f)(this,"getNorth",(0,r.a)(()=>null==this.currentMap?0:this.mapObjects.get(this.currentMap).getNorth(),"getNorth")),(0,r.f)(this,"tryRendering",(0,r.a)((t=YB.ALL)=>{if(null!=this.renderer)if(null!=(0,r.g)(this,q0)&&this.taskScheduler.scheduleUpdate((0,r.g)(this,W0)),t===YB.ALL)this.taskScheduler.scheduleUpdate((0,r.g)(this,B0)),null!=(0,r.g)(this,X0)&&this.taskScheduler.scheduleUpdate((0,r.g)(this,X0)),this.taskScheduler.scheduleUpdate((0,r.g)(this,k0)),this.taskScheduler.scheduleUpdate((0,r.g)(this,F0)),this.taskScheduler.scheduleUpdate((0,r.g)(this,U0)),this.taskScheduler.scheduleUpdate((0,r.g)(this,z0)),this.taskScheduler.scheduleUpdate((0,r.g)(this,G0)),this.taskScheduler.scheduleUpdate((0,r.g)(this,H0));else if(t===YB.ANIMATED)this.taskScheduler.scheduleUpdate((0,r.g)(this,k0)),this.taskScheduler.scheduleUpdate((0,r.g)(this,B0)),this.taskScheduler.scheduleUpdate((0,r.g)(this,V0));else if(t===YB.ALWAYS_ON_TOP)this.taskScheduler.scheduleUpdate((0,r.g)(this,B0)),this.taskScheduler.scheduleUpdate((0,r.g)(this,j0));else if(t===YB.TWEEN)this.taskScheduler.scheduleUpdate((0,r.g)(this,B0));else{if(t!==YB.COMPOSITE)throw new Error("invalid render task passed to tryRendering");this.taskScheduler.scheduleUpdate((0,r.g)(this,Y0))}},"tryRendering")),(0,r.f)(this,"showDebugUI",(0,r.a)(()=>{null==(0,r.g)(this,q0)&&((0,r.i)(this,q0,new W$),this.container.appendChild((0,r.g)(this,q0).element),(0,r.g)(this,g1).call(this,(0,r.g)(this,q0)),this.controls.addDebugControls((0,r.g)(this,q0)),this.tryRendering())},"showDebugUI")),(0,r.f)(this,"hideDebugUI",(0,r.a)(()=>{null!=(0,r.g)(this,q0)&&(this.container.removeChild((0,r.g)(this,q0).element),(0,r.g)(this,m1).call(this,(0,r.g)(this,q0)),this.controls.removeDebugControls((0,r.g)(this,q0)),(0,r.g)(this,q0).destroy(),(0,r.i)(this,q0,null))},"hideDebugUI")),(0,r.f)(this,"determineNewLabelSize",(0,r.a)(()=>{let t=this.controls.getZoom(),e=this.controls.getZoomScaledMin(),i=(t-e)/(this.controls.getZoomScaledMax()-e);this.currentScale=i},"determineNewLabelSize")),(0,r.f)(this,"mapSetInProgress",Promise.resolve(void 0)),(0,r.f)(this,"mapSetResolved"),(0,r.f)(this,"setMap",(0,r.a)(async t=>{await this.mapSetInProgress,this.mapSetInProgress=new Promise(t=>{this.mapSetResolved=t});let e="string"==typeof t?this.venue.getCollectionItemById("maps",t):t;if(null==e)return Promise.reject(null);let{currentScene:i}=this.sceneManager;return null==i?Promise.reject(null):"STACKED"===this.state?this.stackedMaps.mapsInJourney.includes(e)?this.stackedMaps.zoomInToMap(e).then(()=>(this.mapSetResolved(),Promise.resolve(null))):(vy.warn("Can't set map outside of current scene"),Promise.reject(null)):this.sceneManager.transitionTo(new wz([e],this),{activeMap:e}).then(()=>(this.mapSetResolved(),Promise.resolve(null)))},"setMap")),(0,r.f)(this,"setMapWithReason",(0,r.a)((t,e)=>(this.setMapReason=e,this.setMap(t)),"setMapWithReason")),(0,r.f)(this,"getPolygonsAtScreenCoordinate",(0,r.a)((t,e,i)=>{if(null==this.currentMap)return[];let n=this.mapObjects.get(this.currentMap);if(!n||!n.hoverableMeshChildren)return[];let o=new Tr(t,e),a=o.x/this.canvasWidth*2-1,s=-o.y/this.canvasHeight*2+1,l=new ho(a,s,0);return E0.setFromCamera(l,this.cameraObject),(0,r.g)(this,v1).call(this,n.hoverableMeshChildren,null==i?void 0:i.includeNonInteractive)},"getPolygonsAtScreenCoordinate")),(0,r.f)(this,"getPolygonsAtCoordinate",(0,r.a)((t,e)=>{let i=this.mapObjects.get(t.map.id);if(!i||!i.hoverableMeshChildren)return[];let n=this.convertTo3DMapPosition(t);return n.setZ(this.controls.maxZoom),E0.set(n,new ho(0,0,-1)),(0,r.g)(this,v1).call(this,i.hoverableMeshChildren,null==e?void 0:e.includeNonInteractive)},"getPolygonsAtCoordinate")),(0,r.f)(this,"destroy",(0,r.a)(()=>{var t;this.flatLabels.removeAllLabels(),this.floatingLabels.removeAllLabels(),this.paths.removeAllPaths(),this.polygonInteraction.removeAllInteractivePolygons(),this.polygonColors.clearAllPolygonColors(),this.polygonHoverColors.clearAllPolygonHoverColors(),this.polygonStates.destroy(),this.markers.removeAll(),this.tooltips.removeAllTooltips(),this.smartCollisionEngine.destroy(),iV.imagesLoadingInProgress.clear(),this.controls.dispose(),this.off(2,this.tryRendering),this.off(3,(0,r.g)(this,r1)),this.off(4,(0,r.g)(this,t1)),this.off(0,(0,r.g)(this,e1)),window.removeEventListener("resize",(0,r.g)(this,n1),!1),(0,r.g)(this,C0)&&(0,r.g)(this,C0).disconnect(),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.CHANGE_EVENT.type,this.determineNewLabelSize),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.CHANGE_EVENT.type,(0,r.g)(this,y1)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.ZOOM_START_EVENT.type,(0,r.g)(this,l1)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.ROTATE_START_EVENT.type,(0,r.g)(this,l1)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.ROTATE_START_EVENT.type,(0,r.g)(this,a1)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.MULTI_START_EVENT.type,(0,r.g)(this,l1)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.MULTI_START_EVENT.type,this.publish(15)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.MULTI_START_EVENT.type,(0,r.g)(this,a1)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.PAN_START_EVENT.type,(0,r.g)(this,l1)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.PAN_START_EVENT.type,this.publish(15)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.ZOOM_END_EVENT.type,(0,r.g)(this,h1)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.ROTATE_END_EVENT.type,(0,r.g)(this,h1)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.ROTATE_END_EVENT.type,(0,r.g)(this,s1)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.MULTI_END_EVENT.type,(0,r.g)(this,h1)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.MULTI_END_EVENT.type,(0,r.g)(this,s1)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.PAN_END_EVENT.type,(0,r.g)(this,h1));for(let e in this.polygonMeshesById)this.polygonMeshesById[e].destroy();this.polygonMeshesById={},this.interactivePolygons={},this._subscribers={},null==(t=this.mapManager)||t.destroy(),this.scene.destroy(),this.interactivePolygons={},(0,r.g)(this,$0).dispose(),this.taskScheduler.destroy(),this.renderer.destroy(),this.container.removeChild(this.rendererDomElement),null!=(0,r.g)(this,q0)&&this.hideDebugUI(),this.renderer=void 0},"destroy")),this.MapView=o,this.options=i,this.type="MapView3D",this.container=t,this.venue=e,window.MappedinDebug||(window.MappedinDebug={}),"test"===n.b.env.NODE_ENV&&(window.MappedinDebug.mapViewCoreInstance=this),(0,r.i)(this,A0,!1),(0,r.i)(this,P0,b0.ENABLED?_0:i.backgroundColor||"#ffffff"),(0,r.i)(this,I0,null!=(a=i.backgroundAlpha)?a:1),this.colors={defaultHover2D:"#cccccc",select:"#4ca1fc",text:"#000000",path:"#ff834c",pathPulse:"#ffffff",textSelect:"#ffffff"},i.disableZoomOnMapSizeChange&&(0,r.i)(this,A0,!0),this.loadOptions={mapRenderStrategy:"SINGLE_GEOMETRY",...i.loadOptions},!0===this.loadOptions.loadAsync&&"SINGLE_GEOMETRY"===this.loadOptions.mapRenderStrategy&&(vy.warn("Async loading does not work with the single geometry map render strategy. Reverting to non-async loading."),this.loadOptions.loadAsync=!1),this.taskScheduler=new ZD({performance:!0}),(0,r.i)(this,$0,new YF);let m="boolean"==typeof i.multiBufferRendering&&i.multiBufferRendering;this.renderer=new a$({antialias:"boolean"!=typeof i.antialias||i.antialias,aoEnabled:i.aoEnabled,aoQuality:i.aoQuality,aoResolution:i.aoResolution,multiBufferRendering:m,xRayPath:"boolean"!=typeof i.xRayPath||i.xRayPath,alpha:!0,onWebGLContextCreationError:i.onWebGLContextCreationError,onWebGLContextLost:i.onWebGLContextLost,onWebGLContextRestored:()=>{i.onWebGLContextRestored&&i.onWebGLContextRestored(),(0,r.g)(this,$0).onWebGLContextRestored(),this.tryRendering()},onWebGLRendererError:i.onWebGLRendererError,backgroundColor:(0,r.g)(this,P0),backgroundAlpha:(0,r.g)(this,I0),core:this}),this.scene=new ef,this.outdoorGeometryLayers=null!=(l=null==(s=i.loadOptions)?void 0:s.outdoorGeometryLayers)?l:[];let v=window.__THREE_DEVTOOLS__;"dev"===n.b.env.NODE_ENV&&typeof v<"u"&&(v.dispatchEvent(new CustomEvent("observe",{detail:this.scene})),v.dispatchEvent(new CustomEvent("observe",{detail:this.renderer}))),this.resolutionScale=window.devicePixelRatio,this.cameraObject=new Gs(T0,this.aspect,50,1e5),this.cameraObject.renderOrder=999;let y=new ya;y.add(this.cameraObject),(0,r.i)(this,Q0,new ya),(0,r.g)(this,Q0).add(y),this.billboardManager=new xY((0,r.g)(this,Q0)),this.scene.add((0,r.g)(this,Q0)),this.cameraObject.updateProjectionMatrix(),this.cameraObject.updateMatrixWorld(!0),this.focusZoomFactor=1.1,(0,r.i)(this,L0,!1),(0,r.i)(this,O0,[]),this.polygonMeshesById={},this.textLabelsByPolygonId={},this.labelOrientationDelay=650,this.interactivePolygons={},this.polygonHoverColorsById={};let _=new Map;this.mapObjects=_,e.maps.forEach(t=>{let e=new SF(t,this.polygonMeshesById,0,this,{taskScheduler:this.taskScheduler});this.mapObjects.set(t.id,e)}),this.referenceMap=e.getCollectionItemById("maps",e.venue.defaultMap),this.rendererDomElement=this.renderer.domElement(),this.resolution=new Tr,this.isWebGL2=!!this.renderer.implementation.renderer.capabilities.isWebGL2,!0===m&&this.renderer.implementation instanceof u$&&!0===(null==(h=null==i?void 0:i.outdoorView)?void 0:h.enabled)&&this.isWebGL2&&(this.outdoorViewController=new g$(this,null==i?void 0:i.outdoorView),this.outdoorViewController.load(),this.renderer.implementation.setOutdoorViewController(this.outdoorViewController)),(0,r.i)(this,Y0,new zD({name:"updateRenderTargets",ordering:S0.RENDER,callback:()=>{this.renderer.render(YB.COMPOSITE,null,this.scene,this.cameraObject)}})),(0,r.i)(this,k0,new zD({name:"updateBillboards",ordering:S0.BEFORE_CAMERA,callback:()=>{this.billboardManager.update()}})),(0,r.i)(this,B0,new zD({name:"updateTweens",ordering:S0.BEFORE_CAMERA,callback:()=>{w0.default.update()}})),this.cameraParameters=new Tr,(0,r.i)(this,F0,new zD({name:"camera",ordering:S0.CAMERA,callback:()=>{this.controls.update(),this.cameraParameters.x=this.controls.getZoom(),this.cameraParameters.y=this.controls.getTilt(),this.controls.isCameraMoving()&&this.publish(9,this.cameraParameters),this.publish(10,this.cameraParameters.x)}})),(0,r.i)(this,U0,new zD({name:"rotateObjects",ordering:S0.AFTER_CAMERA,callback:()=>{let t=this.getNorth()+this.controls.getRotation();for(let e=0,i=(0,r.g)(this,O0).length;e<i;++e)(0,r.g)(this,o1).call(this,(0,r.g)(this,O0)[e],t);(0,r.g)(this,d1).call(this),(0,r.g)(this,f1).call(this),(0,r.i)(this,K0,!1)}})),(0,r.i)(this,z0,new zD({name:"renderAll",ordering:S0.RENDER,callback:()=>{null!=this.currentMap&&this.renderer.isAvailable()&&((0,r.g)(this,Z0)&&(0,r.g)(this,p1).call(this),this.renderer.render(YB.ALL,null,this.scene,this.cameraObject),this.controls.postRender&&this.controls.postRender())}})),(0,r.i)(this,V0,new zD({name:"renderAnimated",ordering:S0.RENDER,supersededBy:new Set([(0,r.g)(this,z0)]),callback:()=>{null!=this.currentMap&&this.renderer.isAvailable()&&((0,r.g)(this,Z0)&&(0,r.g)(this,p1).call(this),this.renderer.render(YB.ANIMATED,null,this.scene,this.cameraObject),this.controls.postRender&&this.controls.postRender())}})),(0,r.i)(this,j0,new zD({name:"renderAlwaysOnTop",ordering:S0.RENDER,supersededBy:new Set([(0,r.g)(this,z0)]),callback:()=>{null!=this.currentMap&&this.renderer.isAvailable()&&((0,r.g)(this,Z0)&&(0,r.g)(this,p1).call(this),this.renderer.render(YB.ALWAYS_ON_TOP,null,this.scene,this.cameraObject),this.controls.postRender&&this.controls.postRender())}})),(0,r.i)(this,G0,new zD({name:"updateBlueDotPosition",ordering:S0.AFTER_RENDER,callback:()=>{this.publish(11)}})),(0,r.i)(this,H0,new zD({name:"updateColliders",ordering:S0.AFTER_RENDER,frameCount:32,callback:()=>{this.smartCollisionEngine.reposition()}})),(0,r.i)(this,W0,new zD({name:"updateDebugUI",ordering:S0.AFTER_ALL_UPDATES,frameCount:1,callback:()=>{var t;let e={};for(let i of this.taskScheduler.getUpdatesRunLastFrame().values())e[i.name]=i.getLastFrameTime();null==(t=(0,r.g)(this,q0))||t.reportFramePerformance(e)}}));let x=new cl(1e6,1e6),b=new ja({color:0,visible:!1});this.cameraPlane=new Cs(x,b),this.scene.add(this.cameraPlane),t.appendChild(this.rendererDomElement),window.addEventListener("resize",(0,r.g)(this,n1),!1),"function"==typeof ResizeObserver&&"test"!==(null==(u=n.b.env)?void 0:u.NODE_ENV)&&((0,r.i)(this,C0,new ResizeObserver(()=>{window.requestAnimationFrame((0,r.g)(this,n1))})),null==(c=(0,r.g)(this,C0))||c.observe(t)),t.classList.add("mappedin-map"),this.rendererDomElement.style.width=null!=(p=globalThis.MappedinDebug)&&p.TEST_IOS?"1080px":"100%",this.rendererDomElement.style.height=null!=(d=globalThis.MappedinDebug)&&d.TEST_IOS?"1920px":"100%",this.rendererDomElement.style.cursor="grab",this.canvasWidth=this.rendererDomElement.clientWidth,this.canvasHeight=this.rendererDomElement.clientHeight,this.rendererDomElement.style.touchAction="manipulation";let w=this.canvasWidth,E=this.canvasHeight;(0,r.i)(this,Z0,!0),this.setBackgroundColor((0,r.g)(this,P0),(0,r.g)(this,I0)),(0,r.g)(this,c1).call(this,Math.floor(w*this.resolutionScale),Math.floor(E*this.resolutionScale)),(0,r.g)(this,r1).call(this);let M=new wv(16777215,.3);M.position.set(-150,-150,350),this.scene.add(M);let S=new Mv(16777215,.741);this.scene.add(S),this.controls=new XQ(this.cameraObject,this.rendererDomElement,this.scene,this),this.controls.enableZoom=!0,this.smartCollisionEngine=new vY(this),this.controls.dispatcher.addEventListener(this.controls.CAMERA_EVENTS.CHANGE_EVENT.type,this.determineNewLabelSize),this.controls.dispatcher.addEventListener(this.controls.CAMERA_EVENTS.CHANGE_EVENT.type,(0,r.g)(this,y1)),this.controls.dispatcher.addEventListener(this.controls.CAMERA_EVENTS.ZOOM_START_EVENT.type,()=>{this.publish(18),(0,r.g)(this,l1).call(this)}),this.controls.dispatcher.addEventListener(this.controls.CAMERA_EVENTS.ROTATE_START_EVENT.type,()=>{this.publish(20),(0,r.g)(this,l1).call(this),(0,r.g)(this,a1).call(this)}),this.controls.dispatcher.addEventListener(this.controls.CAMERA_EVENTS.MULTI_START_EVENT.type,()=>{this.publish(24),this.publish(15),(0,r.g)(this,l1).call(this),(0,r.g)(this,a1).call(this)}),this.controls.dispatcher.addEventListener(this.controls.CAMERA_EVENTS.PAN_START_EVENT.type,()=>{this.publish(22),(0,r.g)(this,l1).call(this),this.publish(15)}),this.controls.dispatcher.addEventListener(this.controls.CAMERA_EVENTS.ZOOM_END_EVENT.type,()=>{this.publish(17),this.publish(18),(0,r.g)(this,h1).call(this)}),this.controls.dispatcher.addEventListener(this.controls.CAMERA_EVENTS.ROTATE_END_EVENT.type,()=>{this.publish(19),(0,r.g)(this,h1).call(this),(0,r.g)(this,s1).call(this)}),this.controls.dispatcher.addEventListener(this.controls.CAMERA_EVENTS.MULTI_END_EVENT.type,()=>{this.publish(25),(0,r.g)(this,h1).call(this),(0,r.g)(this,s1).call(this)}),this.controls.dispatcher.addEventListener(this.controls.CAMERA_EVENTS.PAN_END_EVENT.type,(0,r.g)(this,h1)),this.controls.dispatcher.addEventListener(this.controls.INTERACTION_EVENTS.USER_PAN_START_EVENT.type,()=>{this.currentInteractionEvent=21}),this.controls.dispatcher.addEventListener(this.controls.INTERACTION_EVENTS.USER_ROTATE_START_EVENT.type,()=>{this.currentInteractionEvent=19}),this.controls.dispatcher.addEventListener(this.controls.INTERACTION_EVENTS.USER_DOLLY_START_EVENT.type,()=>{this.currentInteractionEvent=17}),this.controls.dispatcher.addEventListener(this.controls.INTERACTION_EVENTS.USER_TILT_START_EVENT.type,()=>{this.currentInteractionEvent=23}),this.controls.dispatcher.addEventListener(this.controls.INTERACTION_EVENTS.USER_ZOOM_START_EVENT.type,()=>{this.publish(17),this.currentInteractionEvent=17}),(0,r.i)(this,J0,Vy(e,i)),this.sceneManager=null!=(null==(f=null==i?void 0:i.dynamicFocus)?void 0:f.baseMap)?new iF(this,null==(g=i.dynamicFocus)?void 0:g.baseMap):new $B(this,new wz([(0,r.g)(this,J0)],this)),this.on(2,this.tryRendering),this.on(3,(0,r.g)(this,r1)),this.on(4,(0,r.g)(this,t1)),this.on(1,t=>{this.tryRendering(),this.renderer.preloadTexture(t)}),this.on(0,()=>{(0,r.g)(this,e1).call(this),"function"==typeof this.options.onFirstMapLoaded&&this.options.onFirstMapLoaded(e)}),e.imageBinaries&&c2(new VX(e.imageBinaries)),"function"==typeof i.onDataLoaded&&i.onDataLoaded(e),this.setPadding(),this.eventSystem=new PX(this),this.floatingLabels=new PG(this),this.flatLabels=new WG(this),this.paths=new Cj(this),this.polygonColors=new rH(this),this.polygonHoverColors=new lH(this),this.polygonInteraction=new pH(this),this.polygonStates=new bH(this),this.polygonImages=new SH(this),this.markers=new tz(this),this.tooltips=new mH(this),this.threeDMarkers=new IH(this),this.blueDot=new kH(this),this.camera=new ZW(this),this.stackedMaps=new QY(this),this.tileManager=new b0(this),this.watermark=new dX(this),this.layerController=new E$(this)}get aspect(){return this.canvasWidth/this.canvasHeight}get visibleMapsInCurrentScene(){return this.visibleMapObjectsInCurrentScene.map(t=>t.mapClass)}get visibleMapObjectsInCurrentScene(){return Array.from(this.sceneManager.currentScene.mapObjects.values()).filter(t=>t.visible).map(t=>t)}get visibleLayersInCurrentScene(){let t={};for(let e of this.visibleMapsInCurrentScene){let i=this.layerController.getVisibleLayersForLoadedMap(e);t[e.id]=i}return t}get currentMap(){var t,e;return null!=(e=null==(t=this.sceneManager)?void 0:t.currentMap)&&e.id?this.sceneManager.currentMap.id:(vy.error("No maps loaded."),null)}async setState(t){if(t!==this.state){if("explore"===t)this.publish(14,!1),this.state=t;else if("STACKED"===t)this.publish(14,!1),this.state=t;else{if("follow"!==t)throw new Error("Unsupported State");this.publish(14,!0),this.state=t}return this.publish(12,{state:this.state}),Promise.resolve()}}getNearestNodeByScreenCoordinate(t,e,i){let n="string"==typeof i?i:(null==i?void 0:i.id)||this.currentMap,r=this.mapObjects.get(n);if(null==r)throw new Error("getNodeByScreenCoordinates failed: map not found");this.cameraObject.updateMatrixWorld(!0),this.cameraObject.updateMatrix();let o=t/this.canvasWidth*2-1,a=-e/this.canvasHeight*2+1,s=new ho(o,a,0);E0.setFromCamera(s,this.cameraObject.clone());let l=E0.intersectObject(this.cameraPlane,!1)[0].point.applyMatrix4(r.object.matrix);return this.venue._mapsById[n].createCoordinateByXY(l.x+r.mapClass.width/2,-l.y+r.mapClass.height/2).nearestNode}};C0=new WeakMap,A0=new WeakMap,P0=new WeakMap,I0=new WeakMap,L0=new WeakMap,O0=new WeakMap,N0=new WeakMap,q0=new WeakMap,R0=new WeakMap,D0=new WeakMap,k0=new WeakMap,B0=new WeakMap,F0=new WeakMap,U0=new WeakMap,z0=new WeakMap,V0=new WeakMap,j0=new WeakMap,G0=new WeakMap,H0=new WeakMap,W0=new WeakMap,X0=new WeakMap,Y0=new WeakMap,Z0=new WeakMap,J0=new WeakMap,K0=new WeakMap,Q0=new WeakMap,$0=new WeakMap,t1=new WeakMap,e1=new WeakMap,i1=new WeakMap,n1=new WeakMap,r1=new WeakMap,o1=new WeakMap,a1=new WeakMap,s1=new WeakMap,l1=new WeakMap,h1=new WeakMap,u1=new WeakMap,c1=new WeakMap,p1=new WeakMap,d1=new WeakMap,f1=new WeakMap,g1=new WeakMap,m1=new WeakMap,v1=new WeakMap,y1=new WeakMap,(0,r.a)(_1,"Core");var x1=_1,b1=x1;(0,n.a)();var w1,E1=class{constructor(t){(0,r.h)(this,w1,void 0),(0,r.i)(this,w1,t)}draw(t,e){var i,n,o,a;let s=(0,r.g)(this,w1).venue.venue.slug;return rT.addPendingEvent(new UE({animate_drawing:null==(i=null==e?void 0:e.pathOptions)?void 0:i.animateDrawing,display_arrows_on_path:null==(n=null==e?void 0:e.pathOptions)?void 0:n.displayArrowsOnPath,flatten_path:null==(o=null==e?void 0:e.pathOptions)?void 0:o.flattenPath,show_pulse:null==(a=null==e?void 0:e.pathOptions)?void 0:a.showPulse,venue:s})),ZY.create(t,e,(0,r.g)(this,w1))}setStep(t){if(null!=ZY.instance){let e=(0,r.g)(this,w1).venue.venue.slug;rT.addPendingEvent(new VE({venue:e})),ZY.instance.setStep(t)}}setStepByPath(t){null!=ZY.instance&&ZY.instance.setStepByPath(t)}clear(){if((0,r.g)(this,w1).stackedMaps.enabled&&(0,r.g)(this,w1).stackedMaps.disable(),null!=ZY.instance){let t=(0,r.g)(this,w1).venue.venue.slug;rT.addPendingEvent(new BE({venue:t})),ZY.instance.destroy()}}};w1=new WeakMap,(0,r.a)(E1,"Journey");var M1=E1,S1=M1;(0,n.a)();var T1,C1=class{constructor(t){(0,r.h)(this,T1,void 0),(0,r.i)(this,T1,t)}labelAllLocations(t){var e,i;let n=(0,r.g)(this,T1).core.venue.venue.slug;rT.addPendingEvent(new uE({exclude_type:!(null==(e=null==t?void 0:t.excludeTypes)||!e.length)||void 0,include_locations:!(null==(i=null==t?void 0:t.locations)||!i.length)||void 0,venue:n})),(0,r.g)(this,T1).labelAllLocations(t)}add(t,e,i){let n=(0,r.g)(this,T1).core.venue.venue.slug;rT.addPendingEvent(new lE({venue:n})),(0,r.g)(this,T1).labelPolygon(t,e,i)}remove(t){let e=(0,r.g)(this,T1).core.venue.venue.slug;rT.addPendingEvent(new pE({venue:e})),(0,r.g)(this,T1).removeLabel(t)}removeAll(){(0,r.g)(this,T1).removeAllLabels()}setAppearance(t,e){let i=(0,r.g)(this,T1).core.venue.venue.slug;rT.addPendingEvent(new mE({venue:i})),(0,r.g)(this,T1).setAppearance(t,e)}setHoverColorForAll(t){(0,r.g)(this,T1).setHoverColorForAll(t)}};T1=new WeakMap,(0,r.a)(C1,"FlatLabels");var A1=C1;(0,n.a)();var P1,I1=class{constructor(t){(0,r.h)(this,P1,void 0),(0,r.i)(this,P1,t)}labelAllLocations(t){var e,i,n,o;let a=(0,r.g)(this,P1).core.venue.venue.slug;rT.addPendingEvent(new xE({exclude_type:!(null==(e=null==t?void 0:t.excludeTypes)||!e.length)||void 0,include_locations:!(null==(i=null==t?void 0:t.locations)||!i.length)||void 0,with_icon:!(null==(o=null==(n=null==t?void 0:t.appearance)?void 0:n.marker)||!o.icon)||void 0,venue:a})),(0,r.g)(this,P1).labelAllLocations(t)}add(t,e,i){var n,o;let a=(0,r.g)(this,P1).core.venue.venue.slug;rT.addPendingEvent(new yE({with_icon:!(null==(o=null==(n=null==i?void 0:i.appearance)?void 0:n.marker)||!o.icon)||void 0,venue:a})),(0,r.g)(this,P1).addLabel(t,e,i)}setAppearance(t,e){let i=(0,r.g)(this,P1).core.venue.venue.slug;rT.addPendingEvent(new AE({venue:i})),(0,r.g)(this,P1).setAppearance(t,e)}remove(t){let e=(0,r.g)(this,P1).core.venue.venue.slug;rT.addPendingEvent(new wE({venue:e})),(0,r.g)(this,P1).removeLabel(t,!1)}removeAll(){(0,r.g)(this,P1).removeAllLabels()}setPriority(t,e){let i=(0,r.g)(this,P1).core.venue.venue.slug;rT.addPendingEvent(new IE({venue:i})),(0,r.g)(this,P1).setPriority(t,e)}resetPriority(t){let e=(0,r.g)(this,P1).core.venue.venue.slug;rT.addPendingEvent(new TE({venue:e})),(0,r.g)(this,P1).resetPriority(t)}};P1=new WeakMap,(0,r.a)(I1,"FloatingLabels");var L1=I1;(0,n.a)();var O1,N1=class{constructor(t){(0,r.h)(this,O1,void 0),(0,r.i)(this,O1,t)}get markers(){return Array.from((0,r.g)(this,O1).markersMap.entries()).map(t=>t[1].marker)}add(t,e,i){return(0,r.g)(this,O1).add(t,e,i)}setPosition(t,e){(0,r.g)(this,O1).setPosition(t,e)}animate(t,e,i){return(0,r.g)(this,O1).animate(t,e,i)}remove(t){(0,r.g)(this,O1).remove(t)}removeAll(){(0,r.g)(this,O1).removeAll()}};O1=new WeakMap,(0,r.a)(N1,"Markers");var q1=N1;(0,n.a)();var R1,D1=class{constructor(t){(0,r.h)(this,R1,void 0),(0,r.i)(this,R1,t)}get paths(){let t=[];return(0,r.g)(this,R1).pathsById.forEach(({path:e})=>{t.push(e)}),t}add(t,e){return(0,r.g)(this,R1).drawPath(t,e)}remove(t){(0,r.g)(this,R1).removePath(null==t?void 0:t.id)}removeAll(){(0,r.g)(this,R1).removeAllPaths()}};R1=new WeakMap,(0,r.a)(D1,"Paths");var k1=D1;(0,n.a)();var B1,F1=class{constructor(t){(0,r.h)(this,B1,void 0),(0,r.f)(this,"on",(0,r.a)((...t)=>{let e=(0,r.g)(this,B1).core.venue.venue.slug;return rT.addPendingEvent(new Vw({venue:e})),(0,r.g)(this,B1).on(...t)},"on")),(0,r.f)(this,"off",(0,r.a)((...t)=>{let e=(0,r.g)(this,B1).core.venue.venue.slug;return rT.addPendingEvent(new Uw({venue:e})),(0,r.g)(this,B1).off(...t)},"off")),(0,r.i)(this,B1,t)}enable(t){let e=(0,r.g)(this,B1).core.venue.venue.slug;return rT.addPendingEvent(new Bw({allow_implicit_floor_level:null==t?void 0:t.allowImplicitFloorLevel,use_rotation_mode:null==t?void 0:t.useRotationMode,smoothing:null==t?void 0:t.smoothing,show_bearing:null==t?void 0:t.showBearing,venue:e})),(0,r.g)(this,B1).enable(t)}disable(){let t=(0,r.g)(this,B1).core.venue.venue.slug;rT.addPendingEvent(new Dw({venue:t})),(0,r.g)(this,B1).disable()}};B1=new WeakMap,(0,r.a)(F1,"BlueDot");var U1=F1;(0,n.a)();var z1,V1=class{constructor(t){(0,r.h)(this,z1,void 0),(0,r.f)(this,"on",(0,r.a)((...t)=>(0,r.g)(this,z1).on(...t),"on")),(0,r.f)(this,"off",(0,r.a)((...t)=>(0,r.g)(this,z1).off(...t),"off")),(0,r.f)(this,"interactions",{set:t=>(0,r.g)(this,z1).interactions.set(t),enable:()=>{let t=(0,r.g)(this,z1).core.venue.venue.slug;return rT.addPendingEvent(new tE({venue:t})),(0,r.g)(this,z1).interactions.enable()},disable:()=>{let t=(0,r.g)(this,z1).core.venue.venue.slug;return rT.addPendingEvent(new Qw({venue:t})),(0,r.g)(this,z1).interactions.disable()}}),(0,r.i)(this,z1,t)}get currentAnimation(){return(0,r.g)(this,z1).currentAnimation}get zoom(){return(0,r.g)(this,z1).zoom}get rotation(){return(0,r.g)(this,z1).rotation}get tilt(){return(0,r.g)(this,z1).tilt}get minZoom(){return(0,r.g)(this,z1).minZoom}set minZoom(t){(0,r.g)(this,z1).minZoom=t}get maxZoom(){return(0,r.g)(this,z1).maxZoom}set maxZoom(t){(0,r.g)(this,z1).maxZoom=t}get maxTilt(){return(0,r.g)(this,z1).maxTilt}set maxTilt(t){(0,r.g)(this,z1).maxTilt=t}get position(){return(0,r.g)(this,z1).position}setSafeAreaInsets(t){let e=(0,r.g)(this,z1).core.venue.venue.slug;return rT.addPendingEvent(new rE({venue:e})),(0,r.g)(this,z1).setSafeAreaInsets(t)}getSafeAreaInsets(){let t=(0,r.g)(this,z1).core.venue.venue.slug;return rT.addPendingEvent(new Jw({venue:t})),(0,r.g)(this,z1).getSafeAreaInsets()}async focusOn(t,e){let i=(0,r.g)(this,z1).core.venue.venue.slug;return rT.addPendingEvent(new Yw({venue:i})),(0,r.g)(this,z1).focusOn(t,e)}set(t){let e=(0,r.g)(this,z1).core.venue.venue.slug;return rT.addPendingEvent(new iE({venue:e})),(0,r.g)(this,z1).set(t)}convertZoomLevelToAltitude(t){return(0,r.g)(this,z1).convertZoomLevelToAltitude(t)}convertAltitudeToZoomLevel(t){return(0,r.g)(this,z1).convertAltitudeToZoomLevel(t)}async animate(t,e){let i=(0,r.g)(this,z1).core.venue.venue.slug;return rT.addPendingEvent(new Gw({venue:i})),(0,r.g)(this,z1).animate(t,e)}async translate(t,e,i){let n=(0,r.g)(this,z1).core.venue.venue.slug;return rT.addPendingEvent(new aE({venue:n})),(0,r.g)(this,z1).translate(t,e,i)}cancelAnimation(){let t=(0,r.g)(this,z1).core.venue.venue.slug;return rT.addPendingEvent(new Ww({venue:t})),(0,r.g)(this,z1).cancelAnimation()}};z1=new WeakMap,(0,r.a)(V1,"Camera");var j1=V1;(0,n.a)();var G1,H1=class{constructor(t){(0,r.h)(this,G1,void 0),(0,r.f)(this,"enable",(0,r.a)(t=>(0,r.g)(this,G1).enable(t),"enable")),(0,r.f)(this,"disable",(0,r.a)(()=>(0,r.g)(this,G1).disable(),"disable")),(0,r.f)(this,"showOverview",(0,r.a)(async()=>(0,r.g)(this,G1).showOverview(),"showOverview")),(0,r.f)(this,"scrollToMap",(0,r.a)(t=>(0,r.g)(this,G1).scrollToMap(t),"scrollToMap")),(0,r.f)(this,"zoomInToMap",(0,r.a)((t,e)=>(0,r.g)(this,G1).zoomInToMap(t,e),"zoomInToMap")),(0,r.i)(this,G1,t)}get state(){return(0,r.g)(this,G1).currentState}};G1=new WeakMap,(0,r.a)(H1,"StackedMaps");var W1=H1;(0,n.a)();var X1,Y1=class{constructor(t){(0,r.h)(this,X1,void 0),t&&(0,r.i)(this,X1,t)}setStyle(t){(0,r.g)(this,X1)&&(0,r.g)(this,X1).setStyle(t)}setAttributionPosition(t){(0,r.g)(this,X1)&&(0,r.g)(this,X1).setAttributionPosition(t)}};X1=new WeakMap,(0,r.a)(Y1,"OutdoorView");var Z1=Y1,J1=Z1;(0,n.a)();var K1,Q1=class{constructor(t){(0,r.h)(this,K1,void 0),t&&(0,r.i)(this,K1,t)}async getAllLayersForMap(t){var e,i;return(0,r.g)(this,K1)?null!=(i=null==(e=(0,r.g)(this,K1))?void 0:e.getAllLayersForMap(t))?i:[]:{}}showLayers(t){(0,r.g)(this,K1)&&(0,r.g)(this,K1).showLayers(t)}addGeoJSONLayer(t,e){var i;return null==(i=(0,r.g)(this,K1))?void 0:i.addGeoJSONLayer(t,e)}};K1=new WeakMap,(0,r.a)(Q1,"Layers");var $1=Q1;(0,n.a)();var t2,e2=class{constructor(t){(0,r.h)(this,t2,void 0),(0,r.i)(this,t2,t)}set setMapOnUserInteraction(t){(0,r.g)(this,t2).mapShouldSetOnUserInteraction=t}get setMapOnUserInteraction(){return(0,r.g)(this,t2).mapShouldSetOnUserInteraction}update(){(0,r.g)(this,t2).determineTargetMap()}};t2=new WeakMap,(0,r.a)(e2,"DynamicFocus");var i2,n2=e2,r2=class extends FR{constructor(t,e,i){super(),(0,r.h)(this,i2,void 0),(0,r.f)(this,"Journey"),(0,r.f)(this,"Camera"),(0,r.f)(this,"FlatLabels"),(0,r.f)(this,"FloatingLabels"),(0,r.f)(this,"Markers"),(0,r.f)(this,"Paths"),(0,r.f)(this,"BlueDot"),(0,r.f)(this,"options",{}),(0,r.f)(this,"StackedMaps"),(0,r.f)(this,"OutdoorView"),(0,r.f)(this,"Layers"),(0,r.f)(this,"DynamicFocus"),(0,r.f)(this,"on",(0,r.a)((...t)=>{super.on(...t)},"on")),(0,r.f)(this,"off",(0,r.a)((...t)=>{super.off(...t)},"off")),this.options=i||{},(0,r.i)(this,i2,new b1(t,e,i,this)),(0,r.g)(this,i2).on(16,({position:t,polygons:e,maps:i,floatingLabels:n,nearBlueDot:r,paths:o,markers:a,tooltips:s})=>{this.publish("CLICK",{position:t,polygons:e,maps:i,floatingLabels:n,markers:a,tooltips:s,nearBlueDot:r,paths:o})}),(0,r.g)(this,i2).on(7,()=>{this.publish("MAP_CHANGED",this.currentMap),this.publish("MAP_CHANGED_WITH_REASON",{map:this.currentMap,reason:(0,r.g)(this,i2).setMapReason}),(0,r.g)(this,i2).setMapReason=void 0}),(0,r.g)(this,i2).on(5,()=>{this.publish("MAP_CHANGED",this.currentMap)}),(0,r.g)(this,i2).on(31,()=>{this.publish("OUTDOOR_VIEW_LOADED")}),(0,r.g)(this,i2).on(12,({state:t})=>{this.publish("STATE_CHANGE",t)}),(0,r.g)(this,i2).onPolygonClicked=(t=>{this.publish("POLYGON_CLICKED",e.polygons.find(e=>e.id===t))}),(0,r.g)(this,i2).onNothingClicked=(()=>{this.publish("NOTHING_CLICKED")}),this.Journey=new S1((0,r.g)(this,i2)),this.BlueDot=new U1((0,r.g)(this,i2).blueDot),this.FlatLabels=new A1((0,r.g)(this,i2).flatLabels),this.FloatingLabels=new L1((0,r.g)(this,i2).floatingLabels),this.Markers=new q1((0,r.g)(this,i2).markers),this.Paths=new k1((0,r.g)(this,i2).paths),this.Camera=new j1((0,r.g)(this,i2).camera),this.StackedMaps=new W1((0,r.g)(this,i2).stackedMaps),this.OutdoorView=new J1((0,r.g)(this,i2).outdoorViewController),this.Layers=new $1((0,r.g)(this,i2).layerController),(0,r.g)(this,i2).sceneManager instanceof iF&&(this.DynamicFocus=new n2((0,r.g)(this,i2).sceneManager))}labelAllLocations(t){let e=(0,r.g)(this,i2).venue.venue.slug;return rT.addPendingEvent(new WM({venue:e})),null!=t&&t.flatLabels?this.FlatLabels.labelAllLocations(t):this.FloatingLabels.labelAllLocations(t),[]}getNearestNodeByScreenCoordinates(t,e,i){let n=(0,r.g)(this,i2).venue.venue.slug;return rT.addPendingEvent(new UM({venue:n})),(0,r.g)(this,i2).getNearestNodeByScreenCoordinate(t,e,i)}async setState(t){let e=(0,r.g)(this,i2).venue.venue.slug;return rT.addPendingEvent(new yS({venue:e})),(0,r.g)(this,i2).setState(t)}get state(){return(0,r.g)(this,i2).state}get venue(){return(0,r.g)(this,i2).venue}get container(){return(0,r.g)(this,i2).container}get currentMap(){return(0,r.g)(this,i2).venue.maps.find(t=>(0,r.g)(this,i2).currentMap===t.id)}removeAllInteractivePolygons(){let t=(0,r.g)(this,i2).venue.venue.slug;rT.addPendingEvent(new YM({venue:t})),(0,r.g)(this,i2).polygonInteraction.removeAllInteractivePolygons()}setMap(t){let e=(0,r.g)(this,i2).venue.venue.slug;return rT.addPendingEvent(new fS({venue:e})),(0,r.g)(this,i2).setMap(t)}setPolygonColor(t,e){let i=(0,r.g)(this,i2).venue.venue.slug;rT.addPendingEvent(new mS({venue:i})),(0,r.g)(this,i2).polygonColors.setPolygonColor(t,e)}clearPolygonColor(t){let e=(0,r.g)(this,i2).venue.venue.slug;rT.addPendingEvent(new wM({venue:e})),(0,r.g)(this,i2).polygonColors.clearPolygonColor(t)}clearAllPolygonColors(){(0,r.g)(this,i2).polygonColors.clearAllPolygonColors()}setPolygonOutlineColor(t){(0,r.g)(this,i2).polygonColors.setPolygonOutlineColor(t)}addPolygonOutline(t){(0,r.g)(this,i2).polygonColors.addPolygonOutline(t)}removePolygonOutline(t){(0,r.g)(this,i2).polygonColors.removePolygonOutline(t)}removeAllPolygonOutlines(){(0,r.g)(this,i2).polygonColors.removeAllPolygonOutlines()}addInteractivePolygon(t){let e=(0,r.g)(this,i2).venue.venue.slug;rT.addPendingEvent(new yM({venue:e})),(0,r.g)(this,i2).polygonInteraction.addInteractivePolygon(t)}addInteractivePolygonsForAllLocations(t){var e,i;let n=(0,r.g)(this,i2).venue.venue.slug;rT.addPendingEvent(new xM({exclude_type:!(null==(e=null==t?void 0:t.excludeTypes)||!e.length)||void 0,include_locations:!(null==(i=null==t?void 0:t.locations)||!i.length)||void 0,venue:n})),(0,r.g)(this,i2).polygonInteraction.addInteractivePolygonsForAllLocations(t)}removeInteractivePolygon(t){let e=(0,r.g)(this,i2).venue.venue.slug;rT.addPendingEvent(new iS({venue:e})),(0,r.g)(this,i2).polygonInteraction.removeInteractivePolygon(t)}createMarker(t,e,i){return this.Markers.add(t,e,i)}removeMarker(t){this.Markers.remove(t)}removeAllMarkers(){let t=(0,r.g)(this,i2).venue.venue.slug;rT.addPendingEvent(new JM({venue:t})),this.Markers.removeAll()}removeAllTooltips(){let t=(0,r.g)(this,i2).venue.venue.slug;rT.addPendingEvent(new tS({venue:t})),(0,r.g)(this,i2).tooltips.removeAllTooltips()}createTooltip(t,e,i){let n=(0,r.g)(this,i2).venue.venue.slug;return rT.addPendingEvent(new AM({venue:n})),(0,r.g)(this,i2).tooltips.createTooltip(t,e,i)}createCustomTooltip(t,e,i,n){let o=(0,r.g)(this,i2).venue.venue.slug;return rT.addPendingEvent(new MM({venue:o})),(0,r.g)(this,i2).tooltips.createCustomTooltip(t,e,i,n)}removeTooltip(t){let e=(0,r.g)(this,i2).venue.venue.slug;rT.addPendingEvent(new lS({venue:e})),(0,r.g)(this,i2).tooltips.removeTooltip(t)}enableImageFlippingForAllLocations(t){var e,i;let n=(0,r.g)(this,i2).venue.venue.slug;rT.addPendingEvent(new DM({exclude_type:!(null==(e=null==t?void 0:t.excludeTypes)||!e.length)||void 0,include_locations:!(null==(i=null==t?void 0:t.locations)||!i.length)||void 0,venue:n})),(0,r.g)(this,i2).polygonImages.enableImageFlippingForAllLocations(t)}enableImageFlippingForPolygon(t){let e=(0,r.g)(this,i2).venue.venue.slug;rT.addPendingEvent(new BM({venue:e})),(0,r.g)(this,i2).polygonImages.enableImageFlippingForPolygon(t)}disableImageFlippingForAllPolygons(){let t=(0,r.g)(this,i2).venue.venue.slug;rT.addPendingEvent(new OM({venue:t})),(0,r.g)(this,i2).polygonImages.disableImageFlippingForAllPolygons()}drawPath(t,e){let i=(0,r.g)(this,i2).venue.venue.slug;return rT.addPendingEvent(new qM({...void 0!==(null==e?void 0:e.animateDrawing)&&{animate_drawing:e.animateDrawing},...void 0!==(null==e?void 0:e.displayArrowsOnPath)&&{display_arrows_on_path:e.displayArrowsOnPath},...void 0!==(null==e?void 0:e.flattenPath)&&{flatten_path:e.flattenPath},...void 0!==(null==e?void 0:e.showPulse)&&{show_pulse:e.showPulse},venue:i})),(0,r.g)(this,i2).paths.drawPath(t,e).id}removePath(t){let e=(0,r.g)(this,i2).venue.venue.slug;return rT.addPendingEvent(new aS({venue:e})),(0,r.g)(this,i2).paths.removePath(t)}removeAllPaths(){let t=(0,r.g)(this,i2).venue.venue.slug;rT.addPendingEvent(new QM({venue:t})),(0,r.g)(this,i2).paths.removeAllPaths()}setBackgroundColor(t,e){let i=(0,r.g)(this,i2).venue.venue.slug;rT.addPendingEvent(new uS({venue:i})),(0,r.g)(this,i2).setBackgroundColor(t,e)}setHoverColor(t){let e=(0,r.g)(this,i2).venue.venue.slug;rT.addPendingEvent(new pS({venue:e})),(0,r.g)(this,i2).eventSystem.setHoverColor(t)}setPolygonHoverColor(t,e){(0,r.g)(this,i2).polygonHoverColors.setPolygonHoverColor(t,e)}clearPolygonHoverColor(t){(0,r.g)(this,i2).polygonHoverColors.clearPolygonHoverColor(t)}clearAllPolygonHoverColors(){(0,r.g)(this,i2).polygonHoverColors.clearAllPolygonHoverColors()}tryRendering(t){}getPrimaryLocationForPolygon(t){let e=(0,r.g)(this,i2).venue.venue.slug;return rT.addPendingEvent(new GM({venue:e})),zy(t,this.venue)}getPolygonsAtCoordinate(t,e){let i=(0,r.g)(this,i2).venue.venue.slug;return rT.addPendingEvent(new VM({venue:i})),(0,r.g)(this,i2).getPolygonsAtCoordinate(t,e)}getPolygonsAtScreenCoordinate(t,e,i){return(0,r.g)(this,i2).getPolygonsAtScreenCoordinate(t,e,i)}getMappedinCoordinateAtScreenCoordinate(t,e,i){return(0,r.g)(this,i2).convertScreenCoordinateToMapCoordinate(t,e,i)}setAmbientOcclusionSettings(t){(0,r.g)(this,i2).renderer.implementation.effectComposer.setAmbientOcclusionConfiguration(t),(0,r.g)(this,i2).tryRendering()}destroy(){let t=(0,r.g)(this,i2).venue.venue.slug;rT.addPendingEvent(new IM({venue:t})),(0,r.g)(this,i2).destroy()}};i2=new WeakMap,(0,r.a)(r2,"MapView");var o2=r2;(0,n.a)();var a2=class{constructor(t="en-US",e=256,i,n){(0,r.f)(this,"lang"),(0,r.f)(this,"apiKey"),(0,r.f)(this,"token"),(0,r.f)(this,"tileSize"),(0,r.f)(this,"tilesetId","microsoft.base.road"),this.lang=t,this.tileSize=e,this.apiKey=i,this.token=n}makeURL(t,e,i){return"https://atlas.microsoft.com/map/tile?api-version=2.0&tilesetId=".concat(this.tilesetId,"&zoom=").concat(i,"&x=").concat(t,"&y=").concat(e,"&tileSize=").concat(this.tileSize,"&language=").concat(this.lang,"&view=Auto").concat(this.apiKey?"&subscription-key=".concat(this.apiKey):"")}fetchAttribution(t,e){return fetch("https://atlas.microsoft.com/map/attribution?api-version=2022-08-01&tilesetId=".concat(this.tilesetId,"&zoom=").concat(t,"&bounds=").concat(e[0]+","+e[1]+","+e[2]+","+e[3]).concat(this.apiKey?"&subscription-key=".concat(this.apiKey):""),{headers:{Authorization:"jwt-sas ".concat(this.token)}})}fetchTile(t,e,i,n){return fetch(this.makeURL(t,e,i),{signal:n,headers:{Authorization:"jwt-sas ".concat(this.token)}})}};(0,r.a)(a2,"AzureOutdoorContextProvider");var s2=exports.AzureOutdoorContextProvider=a2,l2=class{makeURL(t,e,i,n){return null==n?"https://tile.openstreetmap.org/".concat(i,"/").concat(t,"/").concat(e,".png"):"https://".concat(n,"/").concat(i,"/").concat(t,"/").concat(e,".png")}async fetchTile(t,e,i,n,r){return fetch(this.makeURL(t,e,i,r),{signal:n})}};(0,r.a)(l2,"OpenStreetMapOutdoorContext");var h2=exports.OpenStreetMapOutdoorContext=l2;function u2(t,e,i){return new Promise((n,r)=>{var o,a,s;try{let{slug:r}=e.venue,l=new o2(t,e,{...i,onFirstMapLoaded(){rT.sendEventNow(new xS({venue:r})),n(l)}});bB.create({...null==(o=null==l?void 0:l.venue)?void 0:o.options,testMode:!(null!=(s=null==(a=null==l?void 0:l.venue)?void 0:a.options)&&s.emitAnalyticsEvents)}).mapViewLoaded("3d",!1,-1,""),rT.addPendingEvent(new DE({venue:r}))}catch(t){r(t)}})}(0,r.a)(u2,"showVenue");var c2=exports.setAssetManager=WB.setAssetManager.bind(WB);function p2(t){b0.ENABLED=!0,null!=t&&(b0.OPTIONS=t)}function d2(t){dX.ENABLED=!0,null!=t&&(dX.OPTIONS={...dX.OPTIONS,...t})}(0,r.a)(p2,"__enableTileManager"),(0,r.a)(d2,"__showWatermark");
},{"./chunk-VT5JGPT4.js":"UXmn","./chunk-HZJGZV5Z.js":"LKNM","./chunk-ZRT45YCM.js":"YAkP","_bundle_loader":"z1Am","./browser-TNMQUB7G.js":[["browser-TNMQUB7G.7be3f089.js","SYkY"],"browser-TNMQUB7G.7be3f089.js.map","SYkY"],"./Arrival-4TTHZQOF.js":[["Arrival-4TTHZQOF.580dba1e.js","WLok"],"Arrival-4TTHZQOF.580dba1e.js.map","WLok"],"./Chalet-LUA2Z236.js":[["Chalet-LUA2Z236.bc19f068.js","iMiU"],"Chalet-LUA2Z236.bc19f068.js.map","iMiU"],"./HelveticaNeue-U3XEZDB5.js":[["HelveticaNeue-U3XEZDB5.1da3b0b8.js","CNyP"],"HelveticaNeue-U3XEZDB5.1da3b0b8.js.map","CNyP"],"./Helvetiker-WFBA7C7H.js":[["Helvetiker-WFBA7C7H.db986dd0.js","EX8k"],"Helvetiker-WFBA7C7H.db986dd0.js.map","EX8k"],"./Lato-ZI244CQU.js":[["Lato-ZI244CQU.a4657215.js","v1GV"],"Lato-ZI244CQU.a4657215.js.map","v1GV"],"./MyriadPro-XF3IH7EM.js":[["MyriadPro-XF3IH7EM.51697205.js","rJ2T"],"MyriadPro-XF3IH7EM.51697205.js.map","rJ2T"],"./ProximaNova-YIIK4S37.js":[["ProximaNova-YIIK4S37.6f2749e2.js","Yhcx"],"ProximaNova-YIIK4S37.6f2749e2.js.map","Yhcx"],"./SimonCircular-NQ53YBIJ.js":[["SimonCircular-NQ53YBIJ.3fb1107b.js","ryCH"],"SimonCircular-NQ53YBIJ.3fb1107b.js.map","ryCH"],"./outdoor-context-4DYDRFJG.js":[["outdoor-context-4DYDRFJG.ca6cbd1c.js","kMcO"],"outdoor-context-4DYDRFJG.ca6cbd1c.js.map","kMcO"]}],"pMrg":[function(require,module,exports) {

},{}],"B6dB":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(n){a(n)}}function l(e){try{u(r.throw(e))}catch(n){a(n)}}function u(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(i,l)}u((r=r.apply(e,n||[])).next())})},n=this&&this.__generator||function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(l){a=[6,l],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@mappedin/mappedin-js");require("@mappedin/mappedin-js/lib/mappedin.css");var r={venue:"mappedin-demo-airport",clientId:"5eab30aa91b055001a68e996",clientSecret:"RJyRXKcryCMy4erZqqCbuB1NbR66QTGNXVE0x3Pg6oCIlUR1"};function o(){return e(this,void 0,void 0,function(){var e,o;return n(this,function(n){switch(n.label){case 0:return[4,(0,t.getVenue)(r)];case 1:return e=n.sent(),console.log(e),[4,(0,t.showVenue)(document.getElementById("app"),e,{multiBufferRendering:!0,outdoorView:{enabled:!0},dynamicFocus:{baseMap:e.maps[0],indoorsFullyVisibleZoomLevel:16,buildingFullyVisibleZoomLevel:15.7}})];case 2:return(o=n.sent()).FloatingLabels.labelAllLocations(),o.Camera.on(t.E_CAMERA_EVENT.CHANGED,function(e){console.log("mercator zoom level",o.Camera.convertAltitudeToZoomLevel(e.zoom))}),[2]}})})}o();
},{"@mappedin/mappedin-js":"jjLH","@mappedin/mappedin-js/lib/mappedin.css":"pMrg"}],"Ijyk":[function(require,module,exports) {
module.exports=function(n){return new Promise(function(e,o){var r=document.createElement("script");r.async=!0,r.type="text/javascript",r.charset="utf-8",r.src=n,r.onerror=function(n){r.onerror=r.onload=null,o(n)},r.onload=function(){r.onerror=r.onload=null,e()},document.getElementsByTagName("head")[0].appendChild(r)})};
},{}],0:[function(require,module,exports) {
var b=require("z1Am");b.register("js",require("Ijyk"));
},{}]},{},[0,"B6dB"], null)
//# sourceMappingURL=/csb-6llc7l/src.0cc913d9.js.map